function e2(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var ha=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function t2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var n2={exports:{}},Pu={},r2={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _l=Symbol.for("react.element"),n_=Symbol.for("react.portal"),r_=Symbol.for("react.fragment"),i_=Symbol.for("react.strict_mode"),s_=Symbol.for("react.profiler"),o_=Symbol.for("react.provider"),a_=Symbol.for("react.context"),l_=Symbol.for("react.forward_ref"),c_=Symbol.for("react.suspense"),u_=Symbol.for("react.memo"),d_=Symbol.for("react.lazy"),hg=Symbol.iterator;function f_(t){return t===null||typeof t!="object"?null:(t=hg&&t[hg]||t["@@iterator"],typeof t=="function"?t:null)}var i2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},s2=Object.assign,o2={};function Go(t,e,n){this.props=t,this.context=e,this.refs=o2,this.updater=n||i2}Go.prototype.isReactComponent={};Go.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Go.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function a2(){}a2.prototype=Go.prototype;function $h(t,e,n){this.props=t,this.context=e,this.refs=o2,this.updater=n||i2}var Kh=$h.prototype=new a2;Kh.constructor=$h;s2(Kh,Go.prototype);Kh.isPureReactComponent=!0;var gg=Array.isArray,l2=Object.prototype.hasOwnProperty,qh={current:null},c2={key:!0,ref:!0,__self:!0,__source:!0};function u2(t,e,n){var i,o={},l=null,f=null;if(e!=null)for(i in e.ref!==void 0&&(f=e.ref),e.key!==void 0&&(l=""+e.key),e)l2.call(e,i)&&!c2.hasOwnProperty(i)&&(o[i]=e[i]);var p=arguments.length-2;if(p===1)o.children=n;else if(1<p){for(var w=Array(p),m=0;m<p;m++)w[m]=arguments[m+2];o.children=w}if(t&&t.defaultProps)for(i in p=t.defaultProps,p)o[i]===void 0&&(o[i]=p[i]);return{$$typeof:_l,type:t,key:l,ref:f,props:o,_owner:qh.current}}function h_(t,e){return{$$typeof:_l,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zh(t){return typeof t=="object"&&t!==null&&t.$$typeof===_l}function g_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var pg=/\/+/g;function Pd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?g_(""+t.key):e.toString(36)}function xc(t,e,n,i,o){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var f=!1;if(t===null)f=!0;else switch(l){case"string":case"number":f=!0;break;case"object":switch(t.$$typeof){case _l:case n_:f=!0}}if(f)return f=t,o=o(f),t=i===""?"."+Pd(f,0):i,gg(o)?(n="",t!=null&&(n=t.replace(pg,"$&/")+"/"),xc(o,e,n,"",function(m){return m})):o!=null&&(Zh(o)&&(o=h_(o,n+(!o.key||f&&f.key===o.key?"":(""+o.key).replace(pg,"$&/")+"/")+t)),e.push(o)),1;if(f=0,i=i===""?".":i+":",gg(t))for(var p=0;p<t.length;p++){l=t[p];var w=i+Pd(l,p);f+=xc(l,e,n,w,o)}else if(w=f_(t),typeof w=="function")for(t=w.call(t),p=0;!(l=t.next()).done;)l=l.value,w=i+Pd(l,p++),f+=xc(l,e,n,w,o);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return f}function Ql(t,e,n){if(t==null)return t;var i=[],o=0;return xc(t,i,"","",function(l){return e.call(n,l,o++)}),i}function p_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Rn={current:null},yc={transition:null},m_={ReactCurrentDispatcher:Rn,ReactCurrentBatchConfig:yc,ReactCurrentOwner:qh};function d2(){throw Error("act(...) is not supported in production builds of React.")}Le.Children={map:Ql,forEach:function(t,e,n){Ql(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ql(t,function(){e++}),e},toArray:function(t){return Ql(t,function(e){return e})||[]},only:function(t){if(!Zh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Le.Component=Go;Le.Fragment=r_;Le.Profiler=s_;Le.PureComponent=$h;Le.StrictMode=i_;Le.Suspense=c_;Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m_;Le.act=d2;Le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=s2({},t.props),o=t.key,l=t.ref,f=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,f=qh.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var p=t.type.defaultProps;for(w in e)l2.call(e,w)&&!c2.hasOwnProperty(w)&&(i[w]=e[w]===void 0&&p!==void 0?p[w]:e[w])}var w=arguments.length-2;if(w===1)i.children=n;else if(1<w){p=Array(w);for(var m=0;m<w;m++)p[m]=arguments[m+2];i.children=p}return{$$typeof:_l,type:t.type,key:o,ref:l,props:i,_owner:f}};Le.createContext=function(t){return t={$$typeof:a_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:o_,_context:t},t.Consumer=t};Le.createElement=u2;Le.createFactory=function(t){var e=u2.bind(null,t);return e.type=t,e};Le.createRef=function(){return{current:null}};Le.forwardRef=function(t){return{$$typeof:l_,render:t}};Le.isValidElement=Zh;Le.lazy=function(t){return{$$typeof:d_,_payload:{_status:-1,_result:t},_init:p_}};Le.memo=function(t,e){return{$$typeof:u_,type:t,compare:e===void 0?null:e}};Le.startTransition=function(t){var e=yc.transition;yc.transition={};try{t()}finally{yc.transition=e}};Le.unstable_act=d2;Le.useCallback=function(t,e){return Rn.current.useCallback(t,e)};Le.useContext=function(t){return Rn.current.useContext(t)};Le.useDebugValue=function(){};Le.useDeferredValue=function(t){return Rn.current.useDeferredValue(t)};Le.useEffect=function(t,e){return Rn.current.useEffect(t,e)};Le.useId=function(){return Rn.current.useId()};Le.useImperativeHandle=function(t,e,n){return Rn.current.useImperativeHandle(t,e,n)};Le.useInsertionEffect=function(t,e){return Rn.current.useInsertionEffect(t,e)};Le.useLayoutEffect=function(t,e){return Rn.current.useLayoutEffect(t,e)};Le.useMemo=function(t,e){return Rn.current.useMemo(t,e)};Le.useReducer=function(t,e,n){return Rn.current.useReducer(t,e,n)};Le.useRef=function(t){return Rn.current.useRef(t)};Le.useState=function(t){return Rn.current.useState(t)};Le.useSyncExternalStore=function(t,e,n){return Rn.current.useSyncExternalStore(t,e,n)};Le.useTransition=function(){return Rn.current.useTransition()};Le.version="18.3.1";r2.exports=Le;var Y=r2.exports;const f2=t2(Y),w_=e2({__proto__:null,default:f2},[Y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x_=Y,y_=Symbol.for("react.element"),v_=Symbol.for("react.fragment"),C_=Object.prototype.hasOwnProperty,__=x_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,E_={key:!0,ref:!0,__self:!0,__source:!0};function h2(t,e,n){var i,o={},l=null,f=null;n!==void 0&&(l=""+n),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(f=e.ref);for(i in e)C_.call(e,i)&&!E_.hasOwnProperty(i)&&(o[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)o[i]===void 0&&(o[i]=e[i]);return{$$typeof:y_,type:t,key:l,ref:f,props:o,_owner:__.current}}Pu.Fragment=v_;Pu.jsx=h2;Pu.jsxs=h2;n2.exports=Pu;var b=n2.exports,Sf={},g2={exports:{}},rr={},p2={exports:{}},m2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ae,we){var xe=ae.length;ae.push(we);e:for(;0<xe;){var X=xe-1>>>1,oe=ae[X];if(0<o(oe,we))ae[X]=we,ae[xe]=oe,xe=X;else break e}}function n(ae){return ae.length===0?null:ae[0]}function i(ae){if(ae.length===0)return null;var we=ae[0],xe=ae.pop();if(xe!==we){ae[0]=xe;e:for(var X=0,oe=ae.length,Ge=oe>>>1;X<Ge;){var ue=2*(X+1)-1,_t=ae[ue],ce=ue+1,bn=ae[ce];if(0>o(_t,xe))ce<oe&&0>o(bn,_t)?(ae[X]=bn,ae[ce]=xe,X=ce):(ae[X]=_t,ae[ue]=xe,X=ue);else if(ce<oe&&0>o(bn,xe))ae[X]=bn,ae[ce]=xe,X=ce;else break e}}return we}function o(ae,we){var xe=ae.sortIndex-we.sortIndex;return xe!==0?xe:ae.id-we.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var f=Date,p=f.now();t.unstable_now=function(){return f.now()-p}}var w=[],m=[],E=1,v=null,A=3,R=!1,M=!1,B=!1,K=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(ae){for(var we=n(m);we!==null;){if(we.callback===null)i(m);else if(we.startTime<=ae)i(m),we.sortIndex=we.expirationTime,e(w,we);else break;we=n(m)}}function U(ae){if(B=!1,k(ae),!M)if(n(w)!==null)M=!0,ct(te);else{var we=n(m);we!==null&&Ee(U,we.startTime-ae)}}function te(ae,we){M=!1,B&&(B=!1,O(J),J=-1),R=!0;var xe=A;try{for(k(we),v=n(w);v!==null&&(!(v.expirationTime>we)||ae&&!nt());){var X=v.callback;if(typeof X=="function"){v.callback=null,A=v.priorityLevel;var oe=X(v.expirationTime<=we);we=t.unstable_now(),typeof oe=="function"?v.callback=oe:v===n(w)&&i(w),k(we)}else i(w);v=n(w)}if(v!==null)var Ge=!0;else{var ue=n(m);ue!==null&&Ee(U,ue.startTime-we),Ge=!1}return Ge}finally{v=null,A=xe,R=!1}}var Z=!1,z=null,J=-1,$=5,Ae=-1;function nt(){return!(t.unstable_now()-Ae<$)}function pe(){if(z!==null){var ae=t.unstable_now();Ae=ae;var we=!0;try{we=z(!0,ae)}finally{we?Oe():(Z=!1,z=null)}}else Z=!1}var Oe;if(typeof N=="function")Oe=function(){N(pe)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,H=Te.port2;Te.port1.onmessage=pe,Oe=function(){H.postMessage(null)}}else Oe=function(){K(pe,0)};function ct(ae){z=ae,Z||(Z=!0,Oe())}function Ee(ae,we){J=K(function(){ae(t.unstable_now())},we)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ae){ae.callback=null},t.unstable_continueExecution=function(){M||R||(M=!0,ct(te))},t.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<ae?Math.floor(1e3/ae):5},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return n(w)},t.unstable_next=function(ae){switch(A){case 1:case 2:case 3:var we=3;break;default:we=A}var xe=A;A=we;try{return ae()}finally{A=xe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ae,we){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var xe=A;A=ae;try{return we()}finally{A=xe}},t.unstable_scheduleCallback=function(ae,we,xe){var X=t.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?X+xe:X):xe=X,ae){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=xe+oe,ae={id:E++,callback:we,priorityLevel:ae,startTime:xe,expirationTime:oe,sortIndex:-1},xe>X?(ae.sortIndex=xe,e(m,ae),n(w)===null&&ae===n(m)&&(B?(O(J),J=-1):B=!0,Ee(U,xe-X))):(ae.sortIndex=oe,e(w,ae),M||R||(M=!0,ct(te))),ae},t.unstable_shouldYield=nt,t.unstable_wrapCallback=function(ae){var we=A;return function(){var xe=A;A=we;try{return ae.apply(this,arguments)}finally{A=xe}}}})(m2);p2.exports=m2;var b_=p2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S_=Y,tr=b_;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w2=new Set,Xa={};function Ds(t,e){No(t,e),No(t+"Capture",e)}function No(t,e){for(Xa[t]=e,t=0;t<e.length;t++)w2.add(e[t])}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Af=Object.prototype.hasOwnProperty,A_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mg={},wg={};function I_(t){return Af.call(wg,t)?!0:Af.call(mg,t)?!1:A_.test(t)?wg[t]=!0:(mg[t]=!0,!1)}function T_(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function k_(t,e,n,i){if(e===null||typeof e>"u"||T_(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function On(t,e,n,i,o,l,f){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=f}var pn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pn[t]=new On(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pn[e]=new On(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pn[t]=new On(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pn[t]=new On(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pn[t]=new On(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pn[t]=new On(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pn[t]=new On(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pn[t]=new On(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pn[t]=new On(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qh=/[\-:]([a-z])/g;function Jh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qh,Jh);pn[e]=new On(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qh,Jh);pn[e]=new On(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qh,Jh);pn[e]=new On(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pn[t]=new On(t,1,!1,t.toLowerCase(),null,!1,!1)});pn.xlinkHref=new On("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pn[t]=new On(t,1,!1,t.toLowerCase(),null,!0,!0)});function e0(t,e,n,i){var o=pn.hasOwnProperty(e)?pn[e]:null;(o!==null?o.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(k_(e,n,o,i)&&(n=null),i||o===null?I_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,i=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var gi=S_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jl=Symbol.for("react.element"),io=Symbol.for("react.portal"),so=Symbol.for("react.fragment"),t0=Symbol.for("react.strict_mode"),If=Symbol.for("react.profiler"),x2=Symbol.for("react.provider"),y2=Symbol.for("react.context"),n0=Symbol.for("react.forward_ref"),Tf=Symbol.for("react.suspense"),kf=Symbol.for("react.suspense_list"),r0=Symbol.for("react.memo"),Si=Symbol.for("react.lazy"),v2=Symbol.for("react.offscreen"),xg=Symbol.iterator;function ga(t){return t===null||typeof t!="object"?null:(t=xg&&t[xg]||t["@@iterator"],typeof t=="function"?t:null)}var Nt=Object.assign,Md;function Aa(t){if(Md===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Md=e&&e[1]||""}return`
`+Md+t}var Bd=!1;function Ld(t,e){if(!t||Bd)return"";Bd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var i=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){i=m}t.call(e.prototype)}else{try{throw Error()}catch(m){i=m}t()}}catch(m){if(m&&i&&typeof m.stack=="string"){for(var o=m.stack.split(`
`),l=i.stack.split(`
`),f=o.length-1,p=l.length-1;1<=f&&0<=p&&o[f]!==l[p];)p--;for(;1<=f&&0<=p;f--,p--)if(o[f]!==l[p]){if(f!==1||p!==1)do if(f--,p--,0>p||o[f]!==l[p]){var w=`
`+o[f].replace(" at new "," at ");return t.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",t.displayName)),w}while(1<=f&&0<=p);break}}}finally{Bd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Aa(t):""}function N_(t){switch(t.tag){case 5:return Aa(t.type);case 16:return Aa("Lazy");case 13:return Aa("Suspense");case 19:return Aa("SuspenseList");case 0:case 2:case 15:return t=Ld(t.type,!1),t;case 11:return t=Ld(t.type.render,!1),t;case 1:return t=Ld(t.type,!0),t;default:return""}}function Nf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case so:return"Fragment";case io:return"Portal";case If:return"Profiler";case t0:return"StrictMode";case Tf:return"Suspense";case kf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case y2:return(t.displayName||"Context")+".Consumer";case x2:return(t._context.displayName||"Context")+".Provider";case n0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case r0:return e=t.displayName||null,e!==null?e:Nf(t.type)||"Memo";case Si:e=t._payload,t=t._init;try{return Nf(t(e))}catch{}}return null}function R_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nf(e);case 8:return e===t0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $i(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function C2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function O_(t){var e=C2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(f){i=""+f,l.call(this,f)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ec(t){t._valueTracker||(t._valueTracker=O_(t))}function _2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=C2(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Oc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rf(t,e){var n=e.checked;return Nt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function yg(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=$i(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function E2(t,e){e=e.checked,e!=null&&e0(t,"checked",e,!1)}function Of(t,e){E2(t,e);var n=$i(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Df(t,e.type,n):e.hasOwnProperty("defaultValue")&&Df(t,e.type,$i(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Df(t,e,n){(e!=="number"||Oc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ia=Array.isArray;function vo(t,e,n,i){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&i&&(t[n].defaultSelected=!0)}else{for(n=""+$i(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,i&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Pf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return Nt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Cg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(Ia(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$i(n)}}function b2(t,e){var n=$i(e.value),i=$i(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function _g(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function S2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?S2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tc,A2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tc=tc||document.createElement("div"),tc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ya(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ra={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},D_=["Webkit","ms","Moz","O"];Object.keys(Ra).forEach(function(t){D_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ra[e]=Ra[t]})});function I2(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ra.hasOwnProperty(t)&&Ra[t]?(""+e).trim():e+"px"}function T2(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,o=I2(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,o):t[n]=o}}var P_=Nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bf(t,e){if(e){if(P_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function Lf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ff=null;function i0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jf=null,Co=null,_o=null;function Eg(t){if(t=Sl(t)){if(typeof jf!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=ju(e),jf(t.stateNode,t.type,e))}}function k2(t){Co?_o?_o.push(t):_o=[t]:Co=t}function N2(){if(Co){var t=Co,e=_o;if(_o=Co=null,Eg(t),e)for(t=0;t<e.length;t++)Eg(e[t])}}function R2(t,e){return t(e)}function O2(){}var Fd=!1;function D2(t,e,n){if(Fd)return t(e,n);Fd=!0;try{return R2(t,e,n)}finally{Fd=!1,(Co!==null||_o!==null)&&(O2(),N2())}}function $a(t,e){var n=t.stateNode;if(n===null)return null;var i=ju(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var Uf=!1;if(ai)try{var pa={};Object.defineProperty(pa,"passive",{get:function(){Uf=!0}}),window.addEventListener("test",pa,pa),window.removeEventListener("test",pa,pa)}catch{Uf=!1}function M_(t,e,n,i,o,l,f,p,w){var m=Array.prototype.slice.call(arguments,3);try{e.apply(n,m)}catch(E){this.onError(E)}}var Oa=!1,Dc=null,Pc=!1,zf=null,B_={onError:function(t){Oa=!0,Dc=t}};function L_(t,e,n,i,o,l,f,p,w){Oa=!1,Dc=null,M_.apply(B_,arguments)}function F_(t,e,n,i,o,l,f,p,w){if(L_.apply(this,arguments),Oa){if(Oa){var m=Dc;Oa=!1,Dc=null}else throw Error(ee(198));Pc||(Pc=!0,zf=m)}}function Ps(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function P2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function bg(t){if(Ps(t)!==t)throw Error(ee(188))}function j_(t){var e=t.alternate;if(!e){if(e=Ps(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,i=e;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return bg(o),t;if(l===i)return bg(o),e;l=l.sibling}throw Error(ee(188))}if(n.return!==i.return)n=o,i=l;else{for(var f=!1,p=o.child;p;){if(p===n){f=!0,n=o,i=l;break}if(p===i){f=!0,i=o,n=l;break}p=p.sibling}if(!f){for(p=l.child;p;){if(p===n){f=!0,n=l,i=o;break}if(p===i){f=!0,i=l,n=o;break}p=p.sibling}if(!f)throw Error(ee(189))}}if(n.alternate!==i)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function M2(t){return t=j_(t),t!==null?B2(t):null}function B2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=B2(t);if(e!==null)return e;t=t.sibling}return null}var L2=tr.unstable_scheduleCallback,Sg=tr.unstable_cancelCallback,U_=tr.unstable_shouldYield,z_=tr.unstable_requestPaint,Ut=tr.unstable_now,W_=tr.unstable_getCurrentPriorityLevel,s0=tr.unstable_ImmediatePriority,F2=tr.unstable_UserBlockingPriority,Mc=tr.unstable_NormalPriority,V_=tr.unstable_LowPriority,j2=tr.unstable_IdlePriority,Mu=null,Xr=null;function H_(t){if(Xr&&typeof Xr.onCommitFiberRoot=="function")try{Xr.onCommitFiberRoot(Mu,t,void 0,(t.current.flags&128)===128)}catch{}}var Rr=Math.clz32?Math.clz32:Y_,G_=Math.log,X_=Math.LN2;function Y_(t){return t>>>=0,t===0?32:31-(G_(t)/X_|0)|0}var nc=64,rc=4194304;function Ta(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,o=t.suspendedLanes,l=t.pingedLanes,f=n&268435455;if(f!==0){var p=f&~o;p!==0?i=Ta(p):(l&=f,l!==0&&(i=Ta(l)))}else f=n&~o,f!==0?i=Ta(f):l!==0&&(i=Ta(l));if(i===0)return 0;if(e!==0&&e!==i&&!(e&o)&&(o=i&-i,l=e&-e,o>=l||o===16&&(l&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Rr(e),o=1<<n,i|=t[n],e&=~o;return i}function $_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function K_(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,l=t.pendingLanes;0<l;){var f=31-Rr(l),p=1<<f,w=o[f];w===-1?(!(p&n)||p&i)&&(o[f]=$_(p,e)):w<=e&&(t.expiredLanes|=p),l&=~p}}function Wf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function U2(){var t=nc;return nc<<=1,!(nc&4194240)&&(nc=64),t}function jd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function El(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Rr(e),t[e]=n}function q_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Rr(n),l=1<<o;e[o]=0,i[o]=-1,t[o]=-1,n&=~l}}function o0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Rr(n),o=1<<i;o&e|t[i]&e&&(t[i]|=e),n&=~o}}var st=0;function z2(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var W2,a0,V2,H2,G2,Vf=!1,ic=[],Mi=null,Bi=null,Li=null,Ka=new Map,qa=new Map,Ii=[],Z_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ag(t,e){switch(t){case"focusin":case"focusout":Mi=null;break;case"dragenter":case"dragleave":Bi=null;break;case"mouseover":case"mouseout":Li=null;break;case"pointerover":case"pointerout":Ka.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qa.delete(e.pointerId)}}function ma(t,e,n,i,o,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:l,targetContainers:[o]},e!==null&&(e=Sl(e),e!==null&&a0(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function Q_(t,e,n,i,o){switch(e){case"focusin":return Mi=ma(Mi,t,e,n,i,o),!0;case"dragenter":return Bi=ma(Bi,t,e,n,i,o),!0;case"mouseover":return Li=ma(Li,t,e,n,i,o),!0;case"pointerover":var l=o.pointerId;return Ka.set(l,ma(Ka.get(l)||null,t,e,n,i,o)),!0;case"gotpointercapture":return l=o.pointerId,qa.set(l,ma(qa.get(l)||null,t,e,n,i,o)),!0}return!1}function X2(t){var e=gs(t.target);if(e!==null){var n=Ps(e);if(n!==null){if(e=n.tag,e===13){if(e=P2(n),e!==null){t.blockedOn=e,G2(t.priority,function(){V2(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Ff=i,n.target.dispatchEvent(i),Ff=null}else return e=Sl(n),e!==null&&a0(e),t.blockedOn=n,!1;e.shift()}return!0}function Ig(t,e,n){vc(t)&&n.delete(e)}function J_(){Vf=!1,Mi!==null&&vc(Mi)&&(Mi=null),Bi!==null&&vc(Bi)&&(Bi=null),Li!==null&&vc(Li)&&(Li=null),Ka.forEach(Ig),qa.forEach(Ig)}function wa(t,e){t.blockedOn===e&&(t.blockedOn=null,Vf||(Vf=!0,tr.unstable_scheduleCallback(tr.unstable_NormalPriority,J_)))}function Za(t){function e(o){return wa(o,t)}if(0<ic.length){wa(ic[0],t);for(var n=1;n<ic.length;n++){var i=ic[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Mi!==null&&wa(Mi,t),Bi!==null&&wa(Bi,t),Li!==null&&wa(Li,t),Ka.forEach(e),qa.forEach(e),n=0;n<Ii.length;n++)i=Ii[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ii.length&&(n=Ii[0],n.blockedOn===null);)X2(n),n.blockedOn===null&&Ii.shift()}var Eo=gi.ReactCurrentBatchConfig,Lc=!0;function eE(t,e,n,i){var o=st,l=Eo.transition;Eo.transition=null;try{st=1,l0(t,e,n,i)}finally{st=o,Eo.transition=l}}function tE(t,e,n,i){var o=st,l=Eo.transition;Eo.transition=null;try{st=4,l0(t,e,n,i)}finally{st=o,Eo.transition=l}}function l0(t,e,n,i){if(Lc){var o=Hf(t,e,n,i);if(o===null)Kd(t,e,i,Fc,n),Ag(t,i);else if(Q_(o,t,e,n,i))i.stopPropagation();else if(Ag(t,i),e&4&&-1<Z_.indexOf(t)){for(;o!==null;){var l=Sl(o);if(l!==null&&W2(l),l=Hf(t,e,n,i),l===null&&Kd(t,e,i,Fc,n),l===o)break;o=l}o!==null&&i.stopPropagation()}else Kd(t,e,i,null,n)}}var Fc=null;function Hf(t,e,n,i){if(Fc=null,t=i0(i),t=gs(t),t!==null)if(e=Ps(t),e===null)t=null;else if(n=e.tag,n===13){if(t=P2(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Fc=t,null}function Y2(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(W_()){case s0:return 1;case F2:return 4;case Mc:case V_:return 16;case j2:return 536870912;default:return 16}default:return 16}}var ki=null,c0=null,Cc=null;function $2(){if(Cc)return Cc;var t,e=c0,n=e.length,i,o="value"in ki?ki.value:ki.textContent,l=o.length;for(t=0;t<n&&e[t]===o[t];t++);var f=n-t;for(i=1;i<=f&&e[n-i]===o[l-i];i++);return Cc=o.slice(t,1<i?1-i:void 0)}function _c(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function sc(){return!0}function Tg(){return!1}function ir(t){function e(n,i,o,l,f){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=l,this.target=f,this.currentTarget=null;for(var p in t)t.hasOwnProperty(p)&&(n=t[p],this[p]=n?n(l):l[p]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?sc:Tg,this.isPropagationStopped=Tg,this}return Nt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sc)},persist:function(){},isPersistent:sc}),e}var Xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},u0=ir(Xo),bl=Nt({},Xo,{view:0,detail:0}),nE=ir(bl),Ud,zd,xa,Bu=Nt({},bl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:d0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xa&&(xa&&t.type==="mousemove"?(Ud=t.screenX-xa.screenX,zd=t.screenY-xa.screenY):zd=Ud=0,xa=t),Ud)},movementY:function(t){return"movementY"in t?t.movementY:zd}}),kg=ir(Bu),rE=Nt({},Bu,{dataTransfer:0}),iE=ir(rE),sE=Nt({},bl,{relatedTarget:0}),Wd=ir(sE),oE=Nt({},Xo,{animationName:0,elapsedTime:0,pseudoElement:0}),aE=ir(oE),lE=Nt({},Xo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cE=ir(lE),uE=Nt({},Xo,{data:0}),Ng=ir(uE),dE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hE[t])?!!e[t]:!1}function d0(){return gE}var pE=Nt({},bl,{key:function(t){if(t.key){var e=dE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_c(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:d0,charCode:function(t){return t.type==="keypress"?_c(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_c(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mE=ir(pE),wE=Nt({},Bu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rg=ir(wE),xE=Nt({},bl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:d0}),yE=ir(xE),vE=Nt({},Xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),CE=ir(vE),_E=Nt({},Bu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),EE=ir(_E),bE=[9,13,27,32],f0=ai&&"CompositionEvent"in window,Da=null;ai&&"documentMode"in document&&(Da=document.documentMode);var SE=ai&&"TextEvent"in window&&!Da,K2=ai&&(!f0||Da&&8<Da&&11>=Da),Og=" ",Dg=!1;function q2(t,e){switch(t){case"keyup":return bE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Z2(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var oo=!1;function AE(t,e){switch(t){case"compositionend":return Z2(e);case"keypress":return e.which!==32?null:(Dg=!0,Og);case"textInput":return t=e.data,t===Og&&Dg?null:t;default:return null}}function IE(t,e){if(oo)return t==="compositionend"||!f0&&q2(t,e)?(t=$2(),Cc=c0=ki=null,oo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return K2&&e.locale!=="ko"?null:e.data;default:return null}}var TE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!TE[t.type]:e==="textarea"}function Q2(t,e,n,i){k2(i),e=jc(e,"onChange"),0<e.length&&(n=new u0("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Pa=null,Qa=null;function kE(t){cw(t,0)}function Lu(t){var e=co(t);if(_2(e))return t}function NE(t,e){if(t==="change")return e}var J2=!1;if(ai){var Vd;if(ai){var Hd="oninput"in document;if(!Hd){var Mg=document.createElement("div");Mg.setAttribute("oninput","return;"),Hd=typeof Mg.oninput=="function"}Vd=Hd}else Vd=!1;J2=Vd&&(!document.documentMode||9<document.documentMode)}function Bg(){Pa&&(Pa.detachEvent("onpropertychange",ew),Qa=Pa=null)}function ew(t){if(t.propertyName==="value"&&Lu(Qa)){var e=[];Q2(e,Qa,t,i0(t)),D2(kE,e)}}function RE(t,e,n){t==="focusin"?(Bg(),Pa=e,Qa=n,Pa.attachEvent("onpropertychange",ew)):t==="focusout"&&Bg()}function OE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Lu(Qa)}function DE(t,e){if(t==="click")return Lu(e)}function PE(t,e){if(t==="input"||t==="change")return Lu(e)}function ME(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pr=typeof Object.is=="function"?Object.is:ME;function Ja(t,e){if(Pr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!Af.call(e,o)||!Pr(t[o],e[o]))return!1}return!0}function Lg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fg(t,e){var n=Lg(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Lg(n)}}function tw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?tw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function nw(){for(var t=window,e=Oc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Oc(t.document)}return e}function h0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function BE(t){var e=nw(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&tw(n.ownerDocument.documentElement,n)){if(i!==null&&h0(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,l=Math.min(i.start,o);i=i.end===void 0?l:Math.min(i.end,o),!t.extend&&l>i&&(o=i,i=l,l=o),o=Fg(n,l);var f=Fg(n,i);o&&f&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==f.node||t.focusOffset!==f.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),l>i?(t.addRange(e),t.extend(f.node,f.offset)):(e.setEnd(f.node,f.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var LE=ai&&"documentMode"in document&&11>=document.documentMode,ao=null,Gf=null,Ma=null,Xf=!1;function jg(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xf||ao==null||ao!==Oc(i)||(i=ao,"selectionStart"in i&&h0(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ma&&Ja(Ma,i)||(Ma=i,i=jc(Gf,"onSelect"),0<i.length&&(e=new u0("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ao)))}function oc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var lo={animationend:oc("Animation","AnimationEnd"),animationiteration:oc("Animation","AnimationIteration"),animationstart:oc("Animation","AnimationStart"),transitionend:oc("Transition","TransitionEnd")},Gd={},rw={};ai&&(rw=document.createElement("div").style,"AnimationEvent"in window||(delete lo.animationend.animation,delete lo.animationiteration.animation,delete lo.animationstart.animation),"TransitionEvent"in window||delete lo.transitionend.transition);function Fu(t){if(Gd[t])return Gd[t];if(!lo[t])return t;var e=lo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in rw)return Gd[t]=e[n];return t}var iw=Fu("animationend"),sw=Fu("animationiteration"),ow=Fu("animationstart"),aw=Fu("transitionend"),lw=new Map,Ug="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function es(t,e){lw.set(t,e),Ds(e,[t])}for(var Xd=0;Xd<Ug.length;Xd++){var Yd=Ug[Xd],FE=Yd.toLowerCase(),jE=Yd[0].toUpperCase()+Yd.slice(1);es(FE,"on"+jE)}es(iw,"onAnimationEnd");es(sw,"onAnimationIteration");es(ow,"onAnimationStart");es("dblclick","onDoubleClick");es("focusin","onFocus");es("focusout","onBlur");es(aw,"onTransitionEnd");No("onMouseEnter",["mouseout","mouseover"]);No("onMouseLeave",["mouseout","mouseover"]);No("onPointerEnter",["pointerout","pointerover"]);No("onPointerLeave",["pointerout","pointerover"]);Ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ds("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UE=new Set("cancel close invalid load scroll toggle".split(" ").concat(ka));function zg(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,F_(i,e,void 0,t),t.currentTarget=null}function cw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],o=i.event;i=i.listeners;e:{var l=void 0;if(e)for(var f=i.length-1;0<=f;f--){var p=i[f],w=p.instance,m=p.currentTarget;if(p=p.listener,w!==l&&o.isPropagationStopped())break e;zg(o,p,m),l=w}else for(f=0;f<i.length;f++){if(p=i[f],w=p.instance,m=p.currentTarget,p=p.listener,w!==l&&o.isPropagationStopped())break e;zg(o,p,m),l=w}}}if(Pc)throw t=zf,Pc=!1,zf=null,t}function yt(t,e){var n=e[Zf];n===void 0&&(n=e[Zf]=new Set);var i=t+"__bubble";n.has(i)||(uw(e,t,2,!1),n.add(i))}function $d(t,e,n){var i=0;e&&(i|=4),uw(n,t,i,e)}var ac="_reactListening"+Math.random().toString(36).slice(2);function el(t){if(!t[ac]){t[ac]=!0,w2.forEach(function(n){n!=="selectionchange"&&(UE.has(n)||$d(n,!1,t),$d(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ac]||(e[ac]=!0,$d("selectionchange",!1,e))}}function uw(t,e,n,i){switch(Y2(e)){case 1:var o=eE;break;case 4:o=tE;break;default:o=l0}n=o.bind(null,e,n,t),o=void 0,!Uf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),i?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Kd(t,e,n,i,o){var l=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var p=i.stateNode.containerInfo;if(p===o||p.nodeType===8&&p.parentNode===o)break;if(f===4)for(f=i.return;f!==null;){var w=f.tag;if((w===3||w===4)&&(w=f.stateNode.containerInfo,w===o||w.nodeType===8&&w.parentNode===o))return;f=f.return}for(;p!==null;){if(f=gs(p),f===null)return;if(w=f.tag,w===5||w===6){i=l=f;continue e}p=p.parentNode}}i=i.return}D2(function(){var m=l,E=i0(n),v=[];e:{var A=lw.get(t);if(A!==void 0){var R=u0,M=t;switch(t){case"keypress":if(_c(n)===0)break e;case"keydown":case"keyup":R=mE;break;case"focusin":M="focus",R=Wd;break;case"focusout":M="blur",R=Wd;break;case"beforeblur":case"afterblur":R=Wd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=kg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=iE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=yE;break;case iw:case sw:case ow:R=aE;break;case aw:R=CE;break;case"scroll":R=nE;break;case"wheel":R=EE;break;case"copy":case"cut":case"paste":R=cE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=Rg}var B=(e&4)!==0,K=!B&&t==="scroll",O=B?A!==null?A+"Capture":null:A;B=[];for(var N=m,k;N!==null;){k=N;var U=k.stateNode;if(k.tag===5&&U!==null&&(k=U,O!==null&&(U=$a(N,O),U!=null&&B.push(tl(N,U,k)))),K)break;N=N.return}0<B.length&&(A=new R(A,M,null,n,E),v.push({event:A,listeners:B}))}}if(!(e&7)){e:{if(A=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",A&&n!==Ff&&(M=n.relatedTarget||n.fromElement)&&(gs(M)||M[li]))break e;if((R||A)&&(A=E.window===E?E:(A=E.ownerDocument)?A.defaultView||A.parentWindow:window,R?(M=n.relatedTarget||n.toElement,R=m,M=M?gs(M):null,M!==null&&(K=Ps(M),M!==K||M.tag!==5&&M.tag!==6)&&(M=null)):(R=null,M=m),R!==M)){if(B=kg,U="onMouseLeave",O="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(B=Rg,U="onPointerLeave",O="onPointerEnter",N="pointer"),K=R==null?A:co(R),k=M==null?A:co(M),A=new B(U,N+"leave",R,n,E),A.target=K,A.relatedTarget=k,U=null,gs(E)===m&&(B=new B(O,N+"enter",M,n,E),B.target=k,B.relatedTarget=K,U=B),K=U,R&&M)t:{for(B=R,O=M,N=0,k=B;k;k=to(k))N++;for(k=0,U=O;U;U=to(U))k++;for(;0<N-k;)B=to(B),N--;for(;0<k-N;)O=to(O),k--;for(;N--;){if(B===O||O!==null&&B===O.alternate)break t;B=to(B),O=to(O)}B=null}else B=null;R!==null&&Wg(v,A,R,B,!1),M!==null&&K!==null&&Wg(v,K,M,B,!0)}}e:{if(A=m?co(m):window,R=A.nodeName&&A.nodeName.toLowerCase(),R==="select"||R==="input"&&A.type==="file")var te=NE;else if(Pg(A))if(J2)te=PE;else{te=OE;var Z=RE}else(R=A.nodeName)&&R.toLowerCase()==="input"&&(A.type==="checkbox"||A.type==="radio")&&(te=DE);if(te&&(te=te(t,m))){Q2(v,te,n,E);break e}Z&&Z(t,A,m),t==="focusout"&&(Z=A._wrapperState)&&Z.controlled&&A.type==="number"&&Df(A,"number",A.value)}switch(Z=m?co(m):window,t){case"focusin":(Pg(Z)||Z.contentEditable==="true")&&(ao=Z,Gf=m,Ma=null);break;case"focusout":Ma=Gf=ao=null;break;case"mousedown":Xf=!0;break;case"contextmenu":case"mouseup":case"dragend":Xf=!1,jg(v,n,E);break;case"selectionchange":if(LE)break;case"keydown":case"keyup":jg(v,n,E)}var z;if(f0)e:{switch(t){case"compositionstart":var J="onCompositionStart";break e;case"compositionend":J="onCompositionEnd";break e;case"compositionupdate":J="onCompositionUpdate";break e}J=void 0}else oo?q2(t,n)&&(J="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(J="onCompositionStart");J&&(K2&&n.locale!=="ko"&&(oo||J!=="onCompositionStart"?J==="onCompositionEnd"&&oo&&(z=$2()):(ki=E,c0="value"in ki?ki.value:ki.textContent,oo=!0)),Z=jc(m,J),0<Z.length&&(J=new Ng(J,t,null,n,E),v.push({event:J,listeners:Z}),z?J.data=z:(z=Z2(n),z!==null&&(J.data=z)))),(z=SE?AE(t,n):IE(t,n))&&(m=jc(m,"onBeforeInput"),0<m.length&&(E=new Ng("onBeforeInput","beforeinput",null,n,E),v.push({event:E,listeners:m}),E.data=z))}cw(v,e)})}function tl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function jc(t,e){for(var n=e+"Capture",i=[];t!==null;){var o=t,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=$a(t,n),l!=null&&i.unshift(tl(t,l,o)),l=$a(t,e),l!=null&&i.push(tl(t,l,o))),t=t.return}return i}function to(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Wg(t,e,n,i,o){for(var l=e._reactName,f=[];n!==null&&n!==i;){var p=n,w=p.alternate,m=p.stateNode;if(w!==null&&w===i)break;p.tag===5&&m!==null&&(p=m,o?(w=$a(n,l),w!=null&&f.unshift(tl(n,w,p))):o||(w=$a(n,l),w!=null&&f.push(tl(n,w,p)))),n=n.return}f.length!==0&&t.push({event:e,listeners:f})}var zE=/\r\n?/g,WE=/\u0000|\uFFFD/g;function Vg(t){return(typeof t=="string"?t:""+t).replace(zE,`
`).replace(WE,"")}function lc(t,e,n){if(e=Vg(e),Vg(t)!==e&&n)throw Error(ee(425))}function Uc(){}var Yf=null,$f=null;function Kf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qf=typeof setTimeout=="function"?setTimeout:void 0,VE=typeof clearTimeout=="function"?clearTimeout:void 0,Hg=typeof Promise=="function"?Promise:void 0,HE=typeof queueMicrotask=="function"?queueMicrotask:typeof Hg<"u"?function(t){return Hg.resolve(null).then(t).catch(GE)}:qf;function GE(t){setTimeout(function(){throw t})}function qd(t,e){var n=e,i=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(i===0){t.removeChild(o),Za(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=o}while(n);Za(e)}function Fi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Gg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yo=Math.random().toString(36).slice(2),Gr="__reactFiber$"+Yo,nl="__reactProps$"+Yo,li="__reactContainer$"+Yo,Zf="__reactEvents$"+Yo,XE="__reactListeners$"+Yo,YE="__reactHandles$"+Yo;function gs(t){var e=t[Gr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[li]||n[Gr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Gg(t);t!==null;){if(n=t[Gr])return n;t=Gg(t)}return e}t=n,n=t.parentNode}return null}function Sl(t){return t=t[Gr]||t[li],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function co(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function ju(t){return t[nl]||null}var Qf=[],uo=-1;function ts(t){return{current:t}}function Ct(t){0>uo||(t.current=Qf[uo],Qf[uo]=null,uo--)}function mt(t,e){uo++,Qf[uo]=t.current,t.current=e}var Ki={},_n=ts(Ki),Wn=ts(!1),_s=Ki;function Ro(t,e){var n=t.type.contextTypes;if(!n)return Ki;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in n)o[l]=e[l];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Vn(t){return t=t.childContextTypes,t!=null}function zc(){Ct(Wn),Ct(_n)}function Xg(t,e,n){if(_n.current!==Ki)throw Error(ee(168));mt(_n,e),mt(Wn,n)}function dw(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var o in i)if(!(o in e))throw Error(ee(108,R_(t)||"Unknown",o));return Nt({},n,i)}function Wc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ki,_s=_n.current,mt(_n,t),mt(Wn,Wn.current),!0}function Yg(t,e,n){var i=t.stateNode;if(!i)throw Error(ee(169));n?(t=dw(t,e,_s),i.__reactInternalMemoizedMergedChildContext=t,Ct(Wn),Ct(_n),mt(_n,t)):Ct(Wn),mt(Wn,n)}var ei=null,Uu=!1,Zd=!1;function fw(t){ei===null?ei=[t]:ei.push(t)}function $E(t){Uu=!0,fw(t)}function ns(){if(!Zd&&ei!==null){Zd=!0;var t=0,e=st;try{var n=ei;for(st=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}ei=null,Uu=!1}catch(o){throw ei!==null&&(ei=ei.slice(t+1)),L2(s0,ns),o}finally{st=e,Zd=!1}}return null}var fo=[],ho=0,Vc=null,Hc=0,fr=[],hr=0,Es=null,ti=1,ni="";function us(t,e){fo[ho++]=Hc,fo[ho++]=Vc,Vc=t,Hc=e}function hw(t,e,n){fr[hr++]=ti,fr[hr++]=ni,fr[hr++]=Es,Es=t;var i=ti;t=ni;var o=32-Rr(i)-1;i&=~(1<<o),n+=1;var l=32-Rr(e)+o;if(30<l){var f=o-o%5;l=(i&(1<<f)-1).toString(32),i>>=f,o-=f,ti=1<<32-Rr(e)+o|n<<o|i,ni=l+t}else ti=1<<l|n<<o|i,ni=t}function g0(t){t.return!==null&&(us(t,1),hw(t,1,0))}function p0(t){for(;t===Vc;)Vc=fo[--ho],fo[ho]=null,Hc=fo[--ho],fo[ho]=null;for(;t===Es;)Es=fr[--hr],fr[hr]=null,ni=fr[--hr],fr[hr]=null,ti=fr[--hr],fr[hr]=null}var Jn=null,Qn=null,At=!1,Tr=null;function gw(t,e){var n=gr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $g(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Jn=t,Qn=Fi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Jn=t,Qn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Es!==null?{id:ti,overflow:ni}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=gr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Jn=t,Qn=null,!0):!1;default:return!1}}function Jf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function eh(t){if(At){var e=Qn;if(e){var n=e;if(!$g(t,e)){if(Jf(t))throw Error(ee(418));e=Fi(n.nextSibling);var i=Jn;e&&$g(t,e)?gw(i,n):(t.flags=t.flags&-4097|2,At=!1,Jn=t)}}else{if(Jf(t))throw Error(ee(418));t.flags=t.flags&-4097|2,At=!1,Jn=t}}}function Kg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Jn=t}function cc(t){if(t!==Jn)return!1;if(!At)return Kg(t),At=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Kf(t.type,t.memoizedProps)),e&&(e=Qn)){if(Jf(t))throw pw(),Error(ee(418));for(;e;)gw(t,e),e=Fi(e.nextSibling)}if(Kg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qn=Fi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qn=null}}else Qn=Jn?Fi(t.stateNode.nextSibling):null;return!0}function pw(){for(var t=Qn;t;)t=Fi(t.nextSibling)}function Oo(){Qn=Jn=null,At=!1}function m0(t){Tr===null?Tr=[t]:Tr.push(t)}var KE=gi.ReactCurrentBatchConfig;function ya(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var i=n.stateNode}if(!i)throw Error(ee(147,t));var o=i,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(f){var p=o.refs;f===null?delete p[l]:p[l]=f},e._stringRef=l,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function uc(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function qg(t){var e=t._init;return e(t._payload)}function mw(t){function e(O,N){if(t){var k=O.deletions;k===null?(O.deletions=[N],O.flags|=16):k.push(N)}}function n(O,N){if(!t)return null;for(;N!==null;)e(O,N),N=N.sibling;return null}function i(O,N){for(O=new Map;N!==null;)N.key!==null?O.set(N.key,N):O.set(N.index,N),N=N.sibling;return O}function o(O,N){return O=Wi(O,N),O.index=0,O.sibling=null,O}function l(O,N,k){return O.index=k,t?(k=O.alternate,k!==null?(k=k.index,k<N?(O.flags|=2,N):k):(O.flags|=2,N)):(O.flags|=1048576,N)}function f(O){return t&&O.alternate===null&&(O.flags|=2),O}function p(O,N,k,U){return N===null||N.tag!==6?(N=sf(k,O.mode,U),N.return=O,N):(N=o(N,k),N.return=O,N)}function w(O,N,k,U){var te=k.type;return te===so?E(O,N,k.props.children,U,k.key):N!==null&&(N.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===Si&&qg(te)===N.type)?(U=o(N,k.props),U.ref=ya(O,N,k),U.return=O,U):(U=kc(k.type,k.key,k.props,null,O.mode,U),U.ref=ya(O,N,k),U.return=O,U)}function m(O,N,k,U){return N===null||N.tag!==4||N.stateNode.containerInfo!==k.containerInfo||N.stateNode.implementation!==k.implementation?(N=of(k,O.mode,U),N.return=O,N):(N=o(N,k.children||[]),N.return=O,N)}function E(O,N,k,U,te){return N===null||N.tag!==7?(N=vs(k,O.mode,U,te),N.return=O,N):(N=o(N,k),N.return=O,N)}function v(O,N,k){if(typeof N=="string"&&N!==""||typeof N=="number")return N=sf(""+N,O.mode,k),N.return=O,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Jl:return k=kc(N.type,N.key,N.props,null,O.mode,k),k.ref=ya(O,null,N),k.return=O,k;case io:return N=of(N,O.mode,k),N.return=O,N;case Si:var U=N._init;return v(O,U(N._payload),k)}if(Ia(N)||ga(N))return N=vs(N,O.mode,k,null),N.return=O,N;uc(O,N)}return null}function A(O,N,k,U){var te=N!==null?N.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return te!==null?null:p(O,N,""+k,U);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Jl:return k.key===te?w(O,N,k,U):null;case io:return k.key===te?m(O,N,k,U):null;case Si:return te=k._init,A(O,N,te(k._payload),U)}if(Ia(k)||ga(k))return te!==null?null:E(O,N,k,U,null);uc(O,k)}return null}function R(O,N,k,U,te){if(typeof U=="string"&&U!==""||typeof U=="number")return O=O.get(k)||null,p(N,O,""+U,te);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Jl:return O=O.get(U.key===null?k:U.key)||null,w(N,O,U,te);case io:return O=O.get(U.key===null?k:U.key)||null,m(N,O,U,te);case Si:var Z=U._init;return R(O,N,k,Z(U._payload),te)}if(Ia(U)||ga(U))return O=O.get(k)||null,E(N,O,U,te,null);uc(N,U)}return null}function M(O,N,k,U){for(var te=null,Z=null,z=N,J=N=0,$=null;z!==null&&J<k.length;J++){z.index>J?($=z,z=null):$=z.sibling;var Ae=A(O,z,k[J],U);if(Ae===null){z===null&&(z=$);break}t&&z&&Ae.alternate===null&&e(O,z),N=l(Ae,N,J),Z===null?te=Ae:Z.sibling=Ae,Z=Ae,z=$}if(J===k.length)return n(O,z),At&&us(O,J),te;if(z===null){for(;J<k.length;J++)z=v(O,k[J],U),z!==null&&(N=l(z,N,J),Z===null?te=z:Z.sibling=z,Z=z);return At&&us(O,J),te}for(z=i(O,z);J<k.length;J++)$=R(z,O,J,k[J],U),$!==null&&(t&&$.alternate!==null&&z.delete($.key===null?J:$.key),N=l($,N,J),Z===null?te=$:Z.sibling=$,Z=$);return t&&z.forEach(function(nt){return e(O,nt)}),At&&us(O,J),te}function B(O,N,k,U){var te=ga(k);if(typeof te!="function")throw Error(ee(150));if(k=te.call(k),k==null)throw Error(ee(151));for(var Z=te=null,z=N,J=N=0,$=null,Ae=k.next();z!==null&&!Ae.done;J++,Ae=k.next()){z.index>J?($=z,z=null):$=z.sibling;var nt=A(O,z,Ae.value,U);if(nt===null){z===null&&(z=$);break}t&&z&&nt.alternate===null&&e(O,z),N=l(nt,N,J),Z===null?te=nt:Z.sibling=nt,Z=nt,z=$}if(Ae.done)return n(O,z),At&&us(O,J),te;if(z===null){for(;!Ae.done;J++,Ae=k.next())Ae=v(O,Ae.value,U),Ae!==null&&(N=l(Ae,N,J),Z===null?te=Ae:Z.sibling=Ae,Z=Ae);return At&&us(O,J),te}for(z=i(O,z);!Ae.done;J++,Ae=k.next())Ae=R(z,O,J,Ae.value,U),Ae!==null&&(t&&Ae.alternate!==null&&z.delete(Ae.key===null?J:Ae.key),N=l(Ae,N,J),Z===null?te=Ae:Z.sibling=Ae,Z=Ae);return t&&z.forEach(function(pe){return e(O,pe)}),At&&us(O,J),te}function K(O,N,k,U){if(typeof k=="object"&&k!==null&&k.type===so&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Jl:e:{for(var te=k.key,Z=N;Z!==null;){if(Z.key===te){if(te=k.type,te===so){if(Z.tag===7){n(O,Z.sibling),N=o(Z,k.props.children),N.return=O,O=N;break e}}else if(Z.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===Si&&qg(te)===Z.type){n(O,Z.sibling),N=o(Z,k.props),N.ref=ya(O,Z,k),N.return=O,O=N;break e}n(O,Z);break}else e(O,Z);Z=Z.sibling}k.type===so?(N=vs(k.props.children,O.mode,U,k.key),N.return=O,O=N):(U=kc(k.type,k.key,k.props,null,O.mode,U),U.ref=ya(O,N,k),U.return=O,O=U)}return f(O);case io:e:{for(Z=k.key;N!==null;){if(N.key===Z)if(N.tag===4&&N.stateNode.containerInfo===k.containerInfo&&N.stateNode.implementation===k.implementation){n(O,N.sibling),N=o(N,k.children||[]),N.return=O,O=N;break e}else{n(O,N);break}else e(O,N);N=N.sibling}N=of(k,O.mode,U),N.return=O,O=N}return f(O);case Si:return Z=k._init,K(O,N,Z(k._payload),U)}if(Ia(k))return M(O,N,k,U);if(ga(k))return B(O,N,k,U);uc(O,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,N!==null&&N.tag===6?(n(O,N.sibling),N=o(N,k),N.return=O,O=N):(n(O,N),N=sf(k,O.mode,U),N.return=O,O=N),f(O)):n(O,N)}return K}var Do=mw(!0),ww=mw(!1),Gc=ts(null),Xc=null,go=null,w0=null;function x0(){w0=go=Xc=null}function y0(t){var e=Gc.current;Ct(Gc),t._currentValue=e}function th(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function bo(t,e){Xc=t,w0=go=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Un=!0),t.firstContext=null)}function wr(t){var e=t._currentValue;if(w0!==t)if(t={context:t,memoizedValue:e,next:null},go===null){if(Xc===null)throw Error(ee(308));go=t,Xc.dependencies={lanes:0,firstContext:t}}else go=go.next=t;return e}var ps=null;function v0(t){ps===null?ps=[t]:ps.push(t)}function xw(t,e,n,i){var o=e.interleaved;return o===null?(n.next=n,v0(e)):(n.next=o.next,o.next=n),e.interleaved=n,ci(t,i)}function ci(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ai=!1;function C0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ii(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ji(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,$e&2){var o=i.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),i.pending=e,ci(t,n)}return o=i.interleaved,o===null?(e.next=e,v0(i)):(e.next=o.next,o.next=e),i.interleaved=e,ci(t,n)}function Ec(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,o0(t,n)}}function Zg(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?o=l=f:l=l.next=f,n=n.next}while(n!==null);l===null?o=l=e:l=l.next=e}else o=l=e;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Yc(t,e,n,i){var o=t.updateQueue;Ai=!1;var l=o.firstBaseUpdate,f=o.lastBaseUpdate,p=o.shared.pending;if(p!==null){o.shared.pending=null;var w=p,m=w.next;w.next=null,f===null?l=m:f.next=m,f=w;var E=t.alternate;E!==null&&(E=E.updateQueue,p=E.lastBaseUpdate,p!==f&&(p===null?E.firstBaseUpdate=m:p.next=m,E.lastBaseUpdate=w))}if(l!==null){var v=o.baseState;f=0,E=m=w=null,p=l;do{var A=p.lane,R=p.eventTime;if((i&A)===A){E!==null&&(E=E.next={eventTime:R,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var M=t,B=p;switch(A=e,R=n,B.tag){case 1:if(M=B.payload,typeof M=="function"){v=M.call(R,v,A);break e}v=M;break e;case 3:M.flags=M.flags&-65537|128;case 0:if(M=B.payload,A=typeof M=="function"?M.call(R,v,A):M,A==null)break e;v=Nt({},v,A);break e;case 2:Ai=!0}}p.callback!==null&&p.lane!==0&&(t.flags|=64,A=o.effects,A===null?o.effects=[p]:A.push(p))}else R={eventTime:R,lane:A,tag:p.tag,payload:p.payload,callback:p.callback,next:null},E===null?(m=E=R,w=v):E=E.next=R,f|=A;if(p=p.next,p===null){if(p=o.shared.pending,p===null)break;A=p,p=A.next,A.next=null,o.lastBaseUpdate=A,o.shared.pending=null}}while(!0);if(E===null&&(w=v),o.baseState=w,o.firstBaseUpdate=m,o.lastBaseUpdate=E,e=o.shared.interleaved,e!==null){o=e;do f|=o.lane,o=o.next;while(o!==e)}else l===null&&(o.shared.lanes=0);Ss|=f,t.lanes=f,t.memoizedState=v}}function Qg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],o=i.callback;if(o!==null){if(i.callback=null,i=n,typeof o!="function")throw Error(ee(191,o));o.call(i)}}}var Al={},Yr=ts(Al),rl=ts(Al),il=ts(Al);function ms(t){if(t===Al)throw Error(ee(174));return t}function _0(t,e){switch(mt(il,e),mt(rl,t),mt(Yr,Al),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Mf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Mf(e,t)}Ct(Yr),mt(Yr,e)}function Po(){Ct(Yr),Ct(rl),Ct(il)}function vw(t){ms(il.current);var e=ms(Yr.current),n=Mf(e,t.type);e!==n&&(mt(rl,t),mt(Yr,n))}function E0(t){rl.current===t&&(Ct(Yr),Ct(rl))}var Tt=ts(0);function $c(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qd=[];function b0(){for(var t=0;t<Qd.length;t++)Qd[t]._workInProgressVersionPrimary=null;Qd.length=0}var bc=gi.ReactCurrentDispatcher,Jd=gi.ReactCurrentBatchConfig,bs=0,kt=null,$t=null,nn=null,Kc=!1,Ba=!1,sl=0,qE=0;function yn(){throw Error(ee(321))}function S0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Pr(t[n],e[n]))return!1;return!0}function A0(t,e,n,i,o,l){if(bs=l,kt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bc.current=t===null||t.memoizedState===null?e3:t3,t=n(i,o),Ba){l=0;do{if(Ba=!1,sl=0,25<=l)throw Error(ee(301));l+=1,nn=$t=null,e.updateQueue=null,bc.current=n3,t=n(i,o)}while(Ba)}if(bc.current=qc,e=$t!==null&&$t.next!==null,bs=0,nn=$t=kt=null,Kc=!1,e)throw Error(ee(300));return t}function I0(){var t=sl!==0;return sl=0,t}function Vr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?kt.memoizedState=nn=t:nn=nn.next=t,nn}function xr(){if($t===null){var t=kt.alternate;t=t!==null?t.memoizedState:null}else t=$t.next;var e=nn===null?kt.memoizedState:nn.next;if(e!==null)nn=e,$t=t;else{if(t===null)throw Error(ee(310));$t=t,t={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},nn===null?kt.memoizedState=nn=t:nn=nn.next=t}return nn}function ol(t,e){return typeof e=="function"?e(t):e}function ef(t){var e=xr(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=$t,o=i.baseQueue,l=n.pending;if(l!==null){if(o!==null){var f=o.next;o.next=l.next,l.next=f}i.baseQueue=o=l,n.pending=null}if(o!==null){l=o.next,i=i.baseState;var p=f=null,w=null,m=l;do{var E=m.lane;if((bs&E)===E)w!==null&&(w=w.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),i=m.hasEagerState?m.eagerState:t(i,m.action);else{var v={lane:E,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};w===null?(p=w=v,f=i):w=w.next=v,kt.lanes|=E,Ss|=E}m=m.next}while(m!==null&&m!==l);w===null?f=i:w.next=p,Pr(i,e.memoizedState)||(Un=!0),e.memoizedState=i,e.baseState=f,e.baseQueue=w,n.lastRenderedState=i}if(t=n.interleaved,t!==null){o=t;do l=o.lane,kt.lanes|=l,Ss|=l,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function tf(t){var e=xr(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=n.dispatch,o=n.pending,l=e.memoizedState;if(o!==null){n.pending=null;var f=o=o.next;do l=t(l,f.action),f=f.next;while(f!==o);Pr(l,e.memoizedState)||(Un=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),n.lastRenderedState=l}return[l,i]}function Cw(){}function _w(t,e){var n=kt,i=xr(),o=e(),l=!Pr(i.memoizedState,o);if(l&&(i.memoizedState=o,Un=!0),i=i.queue,T0(Sw.bind(null,n,i,t),[t]),i.getSnapshot!==e||l||nn!==null&&nn.memoizedState.tag&1){if(n.flags|=2048,al(9,bw.bind(null,n,i,o,e),void 0,null),sn===null)throw Error(ee(349));bs&30||Ew(n,e,o)}return o}function Ew(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=kt.updateQueue,e===null?(e={lastEffect:null,stores:null},kt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function bw(t,e,n,i){e.value=n,e.getSnapshot=i,Aw(e)&&Iw(t)}function Sw(t,e,n){return n(function(){Aw(e)&&Iw(t)})}function Aw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pr(t,n)}catch{return!0}}function Iw(t){var e=ci(t,1);e!==null&&Or(e,t,1,-1)}function Jg(t){var e=Vr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:t},e.queue=t,t=t.dispatch=JE.bind(null,kt,t),[e.memoizedState,t]}function al(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=kt.updateQueue,e===null?(e={lastEffect:null,stores:null},kt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Tw(){return xr().memoizedState}function Sc(t,e,n,i){var o=Vr();kt.flags|=t,o.memoizedState=al(1|e,n,void 0,i===void 0?null:i)}function zu(t,e,n,i){var o=xr();i=i===void 0?null:i;var l=void 0;if($t!==null){var f=$t.memoizedState;if(l=f.destroy,i!==null&&S0(i,f.deps)){o.memoizedState=al(e,n,l,i);return}}kt.flags|=t,o.memoizedState=al(1|e,n,l,i)}function ep(t,e){return Sc(8390656,8,t,e)}function T0(t,e){return zu(2048,8,t,e)}function kw(t,e){return zu(4,2,t,e)}function Nw(t,e){return zu(4,4,t,e)}function Rw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ow(t,e,n){return n=n!=null?n.concat([t]):null,zu(4,4,Rw.bind(null,e,t),n)}function k0(){}function Dw(t,e){var n=xr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&S0(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Pw(t,e){var n=xr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&S0(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Mw(t,e,n){return bs&21?(Pr(n,e)||(n=U2(),kt.lanes|=n,Ss|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Un=!0),t.memoizedState=n)}function ZE(t,e){var n=st;st=n!==0&&4>n?n:4,t(!0);var i=Jd.transition;Jd.transition={};try{t(!1),e()}finally{st=n,Jd.transition=i}}function Bw(){return xr().memoizedState}function QE(t,e,n){var i=zi(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Lw(t))Fw(e,n);else if(n=xw(t,e,n,i),n!==null){var o=Tn();Or(n,t,i,o),jw(n,e,i)}}function JE(t,e,n){var i=zi(t),o={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lw(t))Fw(e,o);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var f=e.lastRenderedState,p=l(f,n);if(o.hasEagerState=!0,o.eagerState=p,Pr(p,f)){var w=e.interleaved;w===null?(o.next=o,v0(e)):(o.next=w.next,w.next=o),e.interleaved=o;return}}catch{}finally{}n=xw(t,e,o,i),n!==null&&(o=Tn(),Or(n,t,i,o),jw(n,e,i))}}function Lw(t){var e=t.alternate;return t===kt||e!==null&&e===kt}function Fw(t,e){Ba=Kc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jw(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,o0(t,n)}}var qc={readContext:wr,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useInsertionEffect:yn,useLayoutEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useMutableSource:yn,useSyncExternalStore:yn,useId:yn,unstable_isNewReconciler:!1},e3={readContext:wr,useCallback:function(t,e){return Vr().memoizedState=[t,e===void 0?null:e],t},useContext:wr,useEffect:ep,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Sc(4194308,4,Rw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sc(4,2,t,e)},useMemo:function(t,e){var n=Vr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Vr();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=QE.bind(null,kt,t),[i.memoizedState,t]},useRef:function(t){var e=Vr();return t={current:t},e.memoizedState=t},useState:Jg,useDebugValue:k0,useDeferredValue:function(t){return Vr().memoizedState=t},useTransition:function(){var t=Jg(!1),e=t[0];return t=ZE.bind(null,t[1]),Vr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=kt,o=Vr();if(At){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),sn===null)throw Error(ee(349));bs&30||Ew(i,e,n)}o.memoizedState=n;var l={value:n,getSnapshot:e};return o.queue=l,ep(Sw.bind(null,i,l,t),[t]),i.flags|=2048,al(9,bw.bind(null,i,l,n,e),void 0,null),n},useId:function(){var t=Vr(),e=sn.identifierPrefix;if(At){var n=ni,i=ti;n=(i&~(1<<32-Rr(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=sl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},t3={readContext:wr,useCallback:Dw,useContext:wr,useEffect:T0,useImperativeHandle:Ow,useInsertionEffect:kw,useLayoutEffect:Nw,useMemo:Pw,useReducer:ef,useRef:Tw,useState:function(){return ef(ol)},useDebugValue:k0,useDeferredValue:function(t){var e=xr();return Mw(e,$t.memoizedState,t)},useTransition:function(){var t=ef(ol)[0],e=xr().memoizedState;return[t,e]},useMutableSource:Cw,useSyncExternalStore:_w,useId:Bw,unstable_isNewReconciler:!1},n3={readContext:wr,useCallback:Dw,useContext:wr,useEffect:T0,useImperativeHandle:Ow,useInsertionEffect:kw,useLayoutEffect:Nw,useMemo:Pw,useReducer:tf,useRef:Tw,useState:function(){return tf(ol)},useDebugValue:k0,useDeferredValue:function(t){var e=xr();return $t===null?e.memoizedState=t:Mw(e,$t.memoizedState,t)},useTransition:function(){var t=tf(ol)[0],e=xr().memoizedState;return[t,e]},useMutableSource:Cw,useSyncExternalStore:_w,useId:Bw,unstable_isNewReconciler:!1};function Ar(t,e){if(t&&t.defaultProps){e=Nt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function nh(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Nt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wu={isMounted:function(t){return(t=t._reactInternals)?Ps(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Tn(),o=zi(t),l=ii(i,o);l.payload=e,n!=null&&(l.callback=n),e=ji(t,l,o),e!==null&&(Or(e,t,o,i),Ec(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Tn(),o=zi(t),l=ii(i,o);l.tag=1,l.payload=e,n!=null&&(l.callback=n),e=ji(t,l,o),e!==null&&(Or(e,t,o,i),Ec(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tn(),i=zi(t),o=ii(n,i);o.tag=2,e!=null&&(o.callback=e),e=ji(t,o,i),e!==null&&(Or(e,t,i,n),Ec(e,t,i))}};function tp(t,e,n,i,o,l,f){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,l,f):e.prototype&&e.prototype.isPureReactComponent?!Ja(n,i)||!Ja(o,l):!0}function Uw(t,e,n){var i=!1,o=Ki,l=e.contextType;return typeof l=="object"&&l!==null?l=wr(l):(o=Vn(e)?_s:_n.current,i=e.contextTypes,l=(i=i!=null)?Ro(t,o):Ki),e=new e(n,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wu,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=l),e}function np(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Wu.enqueueReplaceState(e,e.state,null)}function rh(t,e,n,i){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},C0(t);var l=e.contextType;typeof l=="object"&&l!==null?o.context=wr(l):(l=Vn(e)?_s:_n.current,o.context=Ro(t,l)),o.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(nh(t,e,l,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Wu.enqueueReplaceState(o,o.state,null),Yc(t,n,o,i),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function Mo(t,e){try{var n="",i=e;do n+=N_(i),i=i.return;while(i);var o=n}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:o,digest:null}}function nf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ih(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var r3=typeof WeakMap=="function"?WeakMap:Map;function zw(t,e,n){n=ii(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Qc||(Qc=!0,gh=i),ih(t,e)},n}function Ww(t,e,n){n=ii(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var o=e.value;n.payload=function(){return i(o)},n.callback=function(){ih(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){ih(t,e),typeof i!="function"&&(Ui===null?Ui=new Set([this]):Ui.add(this));var f=e.stack;this.componentDidCatch(e.value,{componentStack:f!==null?f:""})}),n}function rp(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new r3;var o=new Set;i.set(e,o)}else o=i.get(e),o===void 0&&(o=new Set,i.set(e,o));o.has(n)||(o.add(n),t=w3.bind(null,t,e,n),e.then(t,t))}function ip(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sp(t,e,n,i,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ii(-1,1),e.tag=2,ji(n,e,1))),n.lanes|=1),t)}var i3=gi.ReactCurrentOwner,Un=!1;function An(t,e,n,i){e.child=t===null?ww(e,null,n,i):Do(e,t.child,n,i)}function op(t,e,n,i,o){n=n.render;var l=e.ref;return bo(e,o),i=A0(t,e,n,i,l,o),n=I0(),t!==null&&!Un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,ui(t,e,o)):(At&&n&&g0(e),e.flags|=1,An(t,e,i,o),e.child)}function ap(t,e,n,i,o){if(t===null){var l=n.type;return typeof l=="function"&&!L0(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=l,Vw(t,e,l,i,o)):(t=kc(n.type,null,i,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&o)){var f=l.memoizedProps;if(n=n.compare,n=n!==null?n:Ja,n(f,i)&&t.ref===e.ref)return ui(t,e,o)}return e.flags|=1,t=Wi(l,i),t.ref=e.ref,t.return=e,e.child=t}function Vw(t,e,n,i,o){if(t!==null){var l=t.memoizedProps;if(Ja(l,i)&&t.ref===e.ref)if(Un=!1,e.pendingProps=i=l,(t.lanes&o)!==0)t.flags&131072&&(Un=!0);else return e.lanes=t.lanes,ui(t,e,o)}return sh(t,e,n,i,o)}function Hw(t,e,n){var i=e.pendingProps,o=i.children,l=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(mo,qn),qn|=n;else{if(!(n&1073741824))return t=l!==null?l.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,mt(mo,qn),qn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:n,mt(mo,qn),qn|=i}else l!==null?(i=l.baseLanes|n,e.memoizedState=null):i=n,mt(mo,qn),qn|=i;return An(t,e,o,n),e.child}function Gw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function sh(t,e,n,i,o){var l=Vn(n)?_s:_n.current;return l=Ro(e,l),bo(e,o),n=A0(t,e,n,i,l,o),i=I0(),t!==null&&!Un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,ui(t,e,o)):(At&&i&&g0(e),e.flags|=1,An(t,e,n,o),e.child)}function lp(t,e,n,i,o){if(Vn(n)){var l=!0;Wc(e)}else l=!1;if(bo(e,o),e.stateNode===null)Ac(t,e),Uw(e,n,i),rh(e,n,i,o),i=!0;else if(t===null){var f=e.stateNode,p=e.memoizedProps;f.props=p;var w=f.context,m=n.contextType;typeof m=="object"&&m!==null?m=wr(m):(m=Vn(n)?_s:_n.current,m=Ro(e,m));var E=n.getDerivedStateFromProps,v=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function";v||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(p!==i||w!==m)&&np(e,f,i,m),Ai=!1;var A=e.memoizedState;f.state=A,Yc(e,i,f,o),w=e.memoizedState,p!==i||A!==w||Wn.current||Ai?(typeof E=="function"&&(nh(e,n,E,i),w=e.memoizedState),(p=Ai||tp(e,n,p,i,A,w,m))?(v||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(e.flags|=4194308)):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=w),f.props=i,f.state=w,f.context=m,i=p):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{f=e.stateNode,yw(t,e),p=e.memoizedProps,m=e.type===e.elementType?p:Ar(e.type,p),f.props=m,v=e.pendingProps,A=f.context,w=n.contextType,typeof w=="object"&&w!==null?w=wr(w):(w=Vn(n)?_s:_n.current,w=Ro(e,w));var R=n.getDerivedStateFromProps;(E=typeof R=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(p!==v||A!==w)&&np(e,f,i,w),Ai=!1,A=e.memoizedState,f.state=A,Yc(e,i,f,o);var M=e.memoizedState;p!==v||A!==M||Wn.current||Ai?(typeof R=="function"&&(nh(e,n,R,i),M=e.memoizedState),(m=Ai||tp(e,n,m,i,A,M,w)||!1)?(E||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,M,w),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,M,w)),typeof f.componentDidUpdate=="function"&&(e.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof f.componentDidUpdate!="function"||p===t.memoizedProps&&A===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&A===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=M),f.props=i,f.state=M,f.context=w,i=m):(typeof f.componentDidUpdate!="function"||p===t.memoizedProps&&A===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&A===t.memoizedState||(e.flags|=1024),i=!1)}return oh(t,e,n,i,l,o)}function oh(t,e,n,i,o,l){Gw(t,e);var f=(e.flags&128)!==0;if(!i&&!f)return o&&Yg(e,n,!1),ui(t,e,l);i=e.stateNode,i3.current=e;var p=f&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&f?(e.child=Do(e,t.child,null,l),e.child=Do(e,null,p,l)):An(t,e,p,l),e.memoizedState=i.state,o&&Yg(e,n,!0),e.child}function Xw(t){var e=t.stateNode;e.pendingContext?Xg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Xg(t,e.context,!1),_0(t,e.containerInfo)}function cp(t,e,n,i,o){return Oo(),m0(o),e.flags|=256,An(t,e,n,i),e.child}var ah={dehydrated:null,treeContext:null,retryLane:0};function lh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Yw(t,e,n){var i=e.pendingProps,o=Tt.current,l=!1,f=(e.flags&128)!==0,p;if((p=f)||(p=t!==null&&t.memoizedState===null?!1:(o&2)!==0),p?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),mt(Tt,o&1),t===null)return eh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(f=i.children,t=i.fallback,l?(i=e.mode,l=e.child,f={mode:"hidden",children:f},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=f):l=Gu(f,i,0,null),t=vs(t,i,n,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=lh(n),e.memoizedState=ah,t):N0(e,f));if(o=t.memoizedState,o!==null&&(p=o.dehydrated,p!==null))return s3(t,e,f,i,p,o,n);if(l){l=i.fallback,f=e.mode,o=t.child,p=o.sibling;var w={mode:"hidden",children:i.children};return!(f&1)&&e.child!==o?(i=e.child,i.childLanes=0,i.pendingProps=w,e.deletions=null):(i=Wi(o,w),i.subtreeFlags=o.subtreeFlags&14680064),p!==null?l=Wi(p,l):(l=vs(l,f,n,null),l.flags|=2),l.return=e,i.return=e,i.sibling=l,e.child=i,i=l,l=e.child,f=t.child.memoizedState,f=f===null?lh(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},l.memoizedState=f,l.childLanes=t.childLanes&~n,e.memoizedState=ah,i}return l=t.child,t=l.sibling,i=Wi(l,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function N0(t,e){return e=Gu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function dc(t,e,n,i){return i!==null&&m0(i),Do(e,t.child,null,n),t=N0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function s3(t,e,n,i,o,l,f){if(n)return e.flags&256?(e.flags&=-257,i=nf(Error(ee(422))),dc(t,e,f,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=i.fallback,o=e.mode,i=Gu({mode:"visible",children:i.children},o,0,null),l=vs(l,o,f,null),l.flags|=2,i.return=e,l.return=e,i.sibling=l,e.child=i,e.mode&1&&Do(e,t.child,null,f),e.child.memoizedState=lh(f),e.memoizedState=ah,l);if(!(e.mode&1))return dc(t,e,f,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var p=i.dgst;return i=p,l=Error(ee(419)),i=nf(l,i,void 0),dc(t,e,f,i)}if(p=(f&t.childLanes)!==0,Un||p){if(i=sn,i!==null){switch(f&-f){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|f)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,ci(t,o),Or(i,t,o,-1))}return B0(),i=nf(Error(ee(421))),dc(t,e,f,i)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=x3.bind(null,t),o._reactRetry=e,null):(t=l.treeContext,Qn=Fi(o.nextSibling),Jn=e,At=!0,Tr=null,t!==null&&(fr[hr++]=ti,fr[hr++]=ni,fr[hr++]=Es,ti=t.id,ni=t.overflow,Es=e),e=N0(e,i.children),e.flags|=4096,e)}function up(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),th(t.return,e,n)}function rf(t,e,n,i,o){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=o)}function $w(t,e,n){var i=e.pendingProps,o=i.revealOrder,l=i.tail;if(An(t,e,i.children,n),i=Tt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&up(t,n,e);else if(t.tag===19)up(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(mt(Tt,i),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&$c(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),rf(e,!1,o,n,l);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&$c(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}rf(e,!0,n,null,l);break;case"together":rf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ac(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ui(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ss|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=Wi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function o3(t,e,n){switch(e.tag){case 3:Xw(e),Oo();break;case 5:vw(e);break;case 1:Vn(e.type)&&Wc(e);break;case 4:_0(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,o=e.memoizedProps.value;mt(Gc,i._currentValue),i._currentValue=o;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(mt(Tt,Tt.current&1),e.flags|=128,null):n&e.child.childLanes?Yw(t,e,n):(mt(Tt,Tt.current&1),t=ui(t,e,n),t!==null?t.sibling:null);mt(Tt,Tt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return $w(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),mt(Tt,Tt.current),i)break;return null;case 22:case 23:return e.lanes=0,Hw(t,e,n)}return ui(t,e,n)}var Kw,ch,qw,Zw;Kw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ch=function(){};qw=function(t,e,n,i){var o=t.memoizedProps;if(o!==i){t=e.stateNode,ms(Yr.current);var l=null;switch(n){case"input":o=Rf(t,o),i=Rf(t,i),l=[];break;case"select":o=Nt({},o,{value:void 0}),i=Nt({},i,{value:void 0}),l=[];break;case"textarea":o=Pf(t,o),i=Pf(t,i),l=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Uc)}Bf(n,i);var f;n=null;for(m in o)if(!i.hasOwnProperty(m)&&o.hasOwnProperty(m)&&o[m]!=null)if(m==="style"){var p=o[m];for(f in p)p.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Xa.hasOwnProperty(m)?l||(l=[]):(l=l||[]).push(m,null));for(m in i){var w=i[m];if(p=o!=null?o[m]:void 0,i.hasOwnProperty(m)&&w!==p&&(w!=null||p!=null))if(m==="style")if(p){for(f in p)!p.hasOwnProperty(f)||w&&w.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in w)w.hasOwnProperty(f)&&p[f]!==w[f]&&(n||(n={}),n[f]=w[f])}else n||(l||(l=[]),l.push(m,n)),n=w;else m==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,p=p?p.__html:void 0,w!=null&&p!==w&&(l=l||[]).push(m,w)):m==="children"?typeof w!="string"&&typeof w!="number"||(l=l||[]).push(m,""+w):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Xa.hasOwnProperty(m)?(w!=null&&m==="onScroll"&&yt("scroll",t),l||p===w||(l=[])):(l=l||[]).push(m,w))}n&&(l=l||[]).push("style",n);var m=l;(e.updateQueue=m)&&(e.flags|=4)}};Zw=function(t,e,n,i){n!==i&&(e.flags|=4)};function va(t,e){if(!At)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function vn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function a3(t,e,n){var i=e.pendingProps;switch(p0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(e),null;case 1:return Vn(e.type)&&zc(),vn(e),null;case 3:return i=e.stateNode,Po(),Ct(Wn),Ct(_n),b0(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(cc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Tr!==null&&(wh(Tr),Tr=null))),ch(t,e),vn(e),null;case 5:E0(e);var o=ms(il.current);if(n=e.type,t!==null&&e.stateNode!=null)qw(t,e,n,i,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ee(166));return vn(e),null}if(t=ms(Yr.current),cc(e)){i=e.stateNode,n=e.type;var l=e.memoizedProps;switch(i[Gr]=e,i[nl]=l,t=(e.mode&1)!==0,n){case"dialog":yt("cancel",i),yt("close",i);break;case"iframe":case"object":case"embed":yt("load",i);break;case"video":case"audio":for(o=0;o<ka.length;o++)yt(ka[o],i);break;case"source":yt("error",i);break;case"img":case"image":case"link":yt("error",i),yt("load",i);break;case"details":yt("toggle",i);break;case"input":yg(i,l),yt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},yt("invalid",i);break;case"textarea":Cg(i,l),yt("invalid",i)}Bf(n,l),o=null;for(var f in l)if(l.hasOwnProperty(f)){var p=l[f];f==="children"?typeof p=="string"?i.textContent!==p&&(l.suppressHydrationWarning!==!0&&lc(i.textContent,p,t),o=["children",p]):typeof p=="number"&&i.textContent!==""+p&&(l.suppressHydrationWarning!==!0&&lc(i.textContent,p,t),o=["children",""+p]):Xa.hasOwnProperty(f)&&p!=null&&f==="onScroll"&&yt("scroll",i)}switch(n){case"input":ec(i),vg(i,l,!0);break;case"textarea":ec(i),_g(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=Uc)}i=o,e.updateQueue=i,i!==null&&(e.flags|=4)}else{f=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=S2(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=f.createElement(n,{is:i.is}):(t=f.createElement(n),n==="select"&&(f=t,i.multiple?f.multiple=!0:i.size&&(f.size=i.size))):t=f.createElementNS(t,n),t[Gr]=e,t[nl]=i,Kw(t,e,!1,!1),e.stateNode=t;e:{switch(f=Lf(n,i),n){case"dialog":yt("cancel",t),yt("close",t),o=i;break;case"iframe":case"object":case"embed":yt("load",t),o=i;break;case"video":case"audio":for(o=0;o<ka.length;o++)yt(ka[o],t);o=i;break;case"source":yt("error",t),o=i;break;case"img":case"image":case"link":yt("error",t),yt("load",t),o=i;break;case"details":yt("toggle",t),o=i;break;case"input":yg(t,i),o=Rf(t,i),yt("invalid",t);break;case"option":o=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},o=Nt({},i,{value:void 0}),yt("invalid",t);break;case"textarea":Cg(t,i),o=Pf(t,i),yt("invalid",t);break;default:o=i}Bf(n,o),p=o;for(l in p)if(p.hasOwnProperty(l)){var w=p[l];l==="style"?T2(t,w):l==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&A2(t,w)):l==="children"?typeof w=="string"?(n!=="textarea"||w!=="")&&Ya(t,w):typeof w=="number"&&Ya(t,""+w):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Xa.hasOwnProperty(l)?w!=null&&l==="onScroll"&&yt("scroll",t):w!=null&&e0(t,l,w,f))}switch(n){case"input":ec(t),vg(t,i,!1);break;case"textarea":ec(t),_g(t);break;case"option":i.value!=null&&t.setAttribute("value",""+$i(i.value));break;case"select":t.multiple=!!i.multiple,l=i.value,l!=null?vo(t,!!i.multiple,l,!1):i.defaultValue!=null&&vo(t,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Uc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vn(e),null;case 6:if(t&&e.stateNode!=null)Zw(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ee(166));if(n=ms(il.current),ms(Yr.current),cc(e)){if(i=e.stateNode,n=e.memoizedProps,i[Gr]=e,(l=i.nodeValue!==n)&&(t=Jn,t!==null))switch(t.tag){case 3:lc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&lc(i.nodeValue,n,(t.mode&1)!==0)}l&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Gr]=e,e.stateNode=i}return vn(e),null;case 13:if(Ct(Tt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(At&&Qn!==null&&e.mode&1&&!(e.flags&128))pw(),Oo(),e.flags|=98560,l=!1;else if(l=cc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!l)throw Error(ee(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(ee(317));l[Gr]=e}else Oo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vn(e),l=!1}else Tr!==null&&(wh(Tr),Tr=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Tt.current&1?Zt===0&&(Zt=3):B0())),e.updateQueue!==null&&(e.flags|=4),vn(e),null);case 4:return Po(),ch(t,e),t===null&&el(e.stateNode.containerInfo),vn(e),null;case 10:return y0(e.type._context),vn(e),null;case 17:return Vn(e.type)&&zc(),vn(e),null;case 19:if(Ct(Tt),l=e.memoizedState,l===null)return vn(e),null;if(i=(e.flags&128)!==0,f=l.rendering,f===null)if(i)va(l,!1);else{if(Zt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(f=$c(t),f!==null){for(e.flags|=128,va(l,!1),i=f.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)l=n,t=i,l.flags&=14680066,f=l.alternate,f===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,t=f.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return mt(Tt,Tt.current&1|2),e.child}t=t.sibling}l.tail!==null&&Ut()>Bo&&(e.flags|=128,i=!0,va(l,!1),e.lanes=4194304)}else{if(!i)if(t=$c(f),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),va(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!At)return vn(e),null}else 2*Ut()-l.renderingStartTime>Bo&&n!==1073741824&&(e.flags|=128,i=!0,va(l,!1),e.lanes=4194304);l.isBackwards?(f.sibling=e.child,e.child=f):(n=l.last,n!==null?n.sibling=f:e.child=f,l.last=f)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Ut(),e.sibling=null,n=Tt.current,mt(Tt,i?n&1|2:n&1),e):(vn(e),null);case 22:case 23:return M0(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?qn&1073741824&&(vn(e),e.subtreeFlags&6&&(e.flags|=8192)):vn(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function l3(t,e){switch(p0(e),e.tag){case 1:return Vn(e.type)&&zc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Po(),Ct(Wn),Ct(_n),b0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return E0(e),null;case 13:if(Ct(Tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));Oo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ct(Tt),null;case 4:return Po(),null;case 10:return y0(e.type._context),null;case 22:case 23:return M0(),null;case 24:return null;default:return null}}var fc=!1,Cn=!1,c3=typeof WeakSet=="function"?WeakSet:Set,fe=null;function po(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Pt(t,e,i)}else n.current=null}function uh(t,e,n){try{n()}catch(i){Pt(t,e,i)}}var dp=!1;function u3(t,e){if(Yf=Lc,t=nw(),h0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var f=0,p=-1,w=-1,m=0,E=0,v=t,A=null;t:for(;;){for(var R;v!==n||o!==0&&v.nodeType!==3||(p=f+o),v!==l||i!==0&&v.nodeType!==3||(w=f+i),v.nodeType===3&&(f+=v.nodeValue.length),(R=v.firstChild)!==null;)A=v,v=R;for(;;){if(v===t)break t;if(A===n&&++m===o&&(p=f),A===l&&++E===i&&(w=f),(R=v.nextSibling)!==null)break;v=A,A=v.parentNode}v=R}n=p===-1||w===-1?null:{start:p,end:w}}else n=null}n=n||{start:0,end:0}}else n=null;for($f={focusedElem:t,selectionRange:n},Lc=!1,fe=e;fe!==null;)if(e=fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,fe=t;else for(;fe!==null;){e=fe;try{var M=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(M!==null){var B=M.memoizedProps,K=M.memoizedState,O=e.stateNode,N=O.getSnapshotBeforeUpdate(e.elementType===e.type?B:Ar(e.type,B),K);O.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(U){Pt(e,e.return,U)}if(t=e.sibling,t!==null){t.return=e.return,fe=t;break}fe=e.return}return M=dp,dp=!1,M}function La(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&t)===t){var l=o.destroy;o.destroy=void 0,l!==void 0&&uh(e,n,l)}o=o.next}while(o!==i)}}function Vu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function dh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Qw(t){var e=t.alternate;e!==null&&(t.alternate=null,Qw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Gr],delete e[nl],delete e[Zf],delete e[XE],delete e[YE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Jw(t){return t.tag===5||t.tag===3||t.tag===4}function fp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fh(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Uc));else if(i!==4&&(t=t.child,t!==null))for(fh(t,e,n),t=t.sibling;t!==null;)fh(t,e,n),t=t.sibling}function hh(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(hh(t,e,n),t=t.sibling;t!==null;)hh(t,e,n),t=t.sibling}var dn=null,Ir=!1;function bi(t,e,n){for(n=n.child;n!==null;)ex(t,e,n),n=n.sibling}function ex(t,e,n){if(Xr&&typeof Xr.onCommitFiberUnmount=="function")try{Xr.onCommitFiberUnmount(Mu,n)}catch{}switch(n.tag){case 5:Cn||po(n,e);case 6:var i=dn,o=Ir;dn=null,bi(t,e,n),dn=i,Ir=o,dn!==null&&(Ir?(t=dn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):dn.removeChild(n.stateNode));break;case 18:dn!==null&&(Ir?(t=dn,n=n.stateNode,t.nodeType===8?qd(t.parentNode,n):t.nodeType===1&&qd(t,n),Za(t)):qd(dn,n.stateNode));break;case 4:i=dn,o=Ir,dn=n.stateNode.containerInfo,Ir=!0,bi(t,e,n),dn=i,Ir=o;break;case 0:case 11:case 14:case 15:if(!Cn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var l=o,f=l.destroy;l=l.tag,f!==void 0&&(l&2||l&4)&&uh(n,e,f),o=o.next}while(o!==i)}bi(t,e,n);break;case 1:if(!Cn&&(po(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(p){Pt(n,e,p)}bi(t,e,n);break;case 21:bi(t,e,n);break;case 22:n.mode&1?(Cn=(i=Cn)||n.memoizedState!==null,bi(t,e,n),Cn=i):bi(t,e,n);break;default:bi(t,e,n)}}function hp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new c3),e.forEach(function(i){var o=y3.bind(null,t,i);n.has(i)||(n.add(i),i.then(o,o))})}}function Sr(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];try{var l=t,f=e,p=f;e:for(;p!==null;){switch(p.tag){case 5:dn=p.stateNode,Ir=!1;break e;case 3:dn=p.stateNode.containerInfo,Ir=!0;break e;case 4:dn=p.stateNode.containerInfo,Ir=!0;break e}p=p.return}if(dn===null)throw Error(ee(160));ex(l,f,o),dn=null,Ir=!1;var w=o.alternate;w!==null&&(w.return=null),o.return=null}catch(m){Pt(o,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tx(e,t),e=e.sibling}function tx(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Sr(e,t),Wr(t),i&4){try{La(3,t,t.return),Vu(3,t)}catch(B){Pt(t,t.return,B)}try{La(5,t,t.return)}catch(B){Pt(t,t.return,B)}}break;case 1:Sr(e,t),Wr(t),i&512&&n!==null&&po(n,n.return);break;case 5:if(Sr(e,t),Wr(t),i&512&&n!==null&&po(n,n.return),t.flags&32){var o=t.stateNode;try{Ya(o,"")}catch(B){Pt(t,t.return,B)}}if(i&4&&(o=t.stateNode,o!=null)){var l=t.memoizedProps,f=n!==null?n.memoizedProps:l,p=t.type,w=t.updateQueue;if(t.updateQueue=null,w!==null)try{p==="input"&&l.type==="radio"&&l.name!=null&&E2(o,l),Lf(p,f);var m=Lf(p,l);for(f=0;f<w.length;f+=2){var E=w[f],v=w[f+1];E==="style"?T2(o,v):E==="dangerouslySetInnerHTML"?A2(o,v):E==="children"?Ya(o,v):e0(o,E,v,m)}switch(p){case"input":Of(o,l);break;case"textarea":b2(o,l);break;case"select":var A=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var R=l.value;R!=null?vo(o,!!l.multiple,R,!1):A!==!!l.multiple&&(l.defaultValue!=null?vo(o,!!l.multiple,l.defaultValue,!0):vo(o,!!l.multiple,l.multiple?[]:"",!1))}o[nl]=l}catch(B){Pt(t,t.return,B)}}break;case 6:if(Sr(e,t),Wr(t),i&4){if(t.stateNode===null)throw Error(ee(162));o=t.stateNode,l=t.memoizedProps;try{o.nodeValue=l}catch(B){Pt(t,t.return,B)}}break;case 3:if(Sr(e,t),Wr(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Za(e.containerInfo)}catch(B){Pt(t,t.return,B)}break;case 4:Sr(e,t),Wr(t);break;case 13:Sr(e,t),Wr(t),o=t.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(D0=Ut())),i&4&&hp(t);break;case 22:if(E=n!==null&&n.memoizedState!==null,t.mode&1?(Cn=(m=Cn)||E,Sr(e,t),Cn=m):Sr(e,t),Wr(t),i&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!E&&t.mode&1)for(fe=t,E=t.child;E!==null;){for(v=fe=E;fe!==null;){switch(A=fe,R=A.child,A.tag){case 0:case 11:case 14:case 15:La(4,A,A.return);break;case 1:po(A,A.return);var M=A.stateNode;if(typeof M.componentWillUnmount=="function"){i=A,n=A.return;try{e=i,M.props=e.memoizedProps,M.state=e.memoizedState,M.componentWillUnmount()}catch(B){Pt(i,n,B)}}break;case 5:po(A,A.return);break;case 22:if(A.memoizedState!==null){pp(v);continue}}R!==null?(R.return=A,fe=R):pp(v)}E=E.sibling}e:for(E=null,v=t;;){if(v.tag===5){if(E===null){E=v;try{o=v.stateNode,m?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(p=v.stateNode,w=v.memoizedProps.style,f=w!=null&&w.hasOwnProperty("display")?w.display:null,p.style.display=I2("display",f))}catch(B){Pt(t,t.return,B)}}}else if(v.tag===6){if(E===null)try{v.stateNode.nodeValue=m?"":v.memoizedProps}catch(B){Pt(t,t.return,B)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;E===v&&(E=null),v=v.return}E===v&&(E=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Sr(e,t),Wr(t),i&4&&hp(t);break;case 21:break;default:Sr(e,t),Wr(t)}}function Wr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Jw(n)){var i=n;break e}n=n.return}throw Error(ee(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(Ya(o,""),i.flags&=-33);var l=fp(t);hh(t,l,o);break;case 3:case 4:var f=i.stateNode.containerInfo,p=fp(t);fh(t,p,f);break;default:throw Error(ee(161))}}catch(w){Pt(t,t.return,w)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function d3(t,e,n){fe=t,nx(t)}function nx(t,e,n){for(var i=(t.mode&1)!==0;fe!==null;){var o=fe,l=o.child;if(o.tag===22&&i){var f=o.memoizedState!==null||fc;if(!f){var p=o.alternate,w=p!==null&&p.memoizedState!==null||Cn;p=fc;var m=Cn;if(fc=f,(Cn=w)&&!m)for(fe=o;fe!==null;)f=fe,w=f.child,f.tag===22&&f.memoizedState!==null?mp(o):w!==null?(w.return=f,fe=w):mp(o);for(;l!==null;)fe=l,nx(l),l=l.sibling;fe=o,fc=p,Cn=m}gp(t)}else o.subtreeFlags&8772&&l!==null?(l.return=o,fe=l):gp(t)}}function gp(t){for(;fe!==null;){var e=fe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Cn||Vu(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Cn)if(n===null)i.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:Ar(e.type,n.memoizedProps);i.componentDidUpdate(o,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&Qg(e,l,i);break;case 3:var f=e.updateQueue;if(f!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Qg(e,f,n)}break;case 5:var p=e.stateNode;if(n===null&&e.flags&4){n=p;var w=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&n.focus();break;case"img":w.src&&(n.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var E=m.memoizedState;if(E!==null){var v=E.dehydrated;v!==null&&Za(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Cn||e.flags&512&&dh(e)}catch(A){Pt(e,e.return,A)}}if(e===t){fe=null;break}if(n=e.sibling,n!==null){n.return=e.return,fe=n;break}fe=e.return}}function pp(t){for(;fe!==null;){var e=fe;if(e===t){fe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,fe=n;break}fe=e.return}}function mp(t){for(;fe!==null;){var e=fe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Vu(4,e)}catch(w){Pt(e,n,w)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var o=e.return;try{i.componentDidMount()}catch(w){Pt(e,o,w)}}var l=e.return;try{dh(e)}catch(w){Pt(e,l,w)}break;case 5:var f=e.return;try{dh(e)}catch(w){Pt(e,f,w)}}}catch(w){Pt(e,e.return,w)}if(e===t){fe=null;break}var p=e.sibling;if(p!==null){p.return=e.return,fe=p;break}fe=e.return}}var f3=Math.ceil,Zc=gi.ReactCurrentDispatcher,R0=gi.ReactCurrentOwner,mr=gi.ReactCurrentBatchConfig,$e=0,sn=null,Wt=null,gn=0,qn=0,mo=ts(0),Zt=0,ll=null,Ss=0,Hu=0,O0=0,Fa=null,jn=null,D0=0,Bo=1/0,Jr=null,Qc=!1,gh=null,Ui=null,hc=!1,Ni=null,Jc=0,ja=0,ph=null,Ic=-1,Tc=0;function Tn(){return $e&6?Ut():Ic!==-1?Ic:Ic=Ut()}function zi(t){return t.mode&1?$e&2&&gn!==0?gn&-gn:KE.transition!==null?(Tc===0&&(Tc=U2()),Tc):(t=st,t!==0||(t=window.event,t=t===void 0?16:Y2(t.type)),t):1}function Or(t,e,n,i){if(50<ja)throw ja=0,ph=null,Error(ee(185));El(t,n,i),(!($e&2)||t!==sn)&&(t===sn&&(!($e&2)&&(Hu|=n),Zt===4&&Ti(t,gn)),Hn(t,i),n===1&&$e===0&&!(e.mode&1)&&(Bo=Ut()+500,Uu&&ns()))}function Hn(t,e){var n=t.callbackNode;K_(t,e);var i=Bc(t,t===sn?gn:0);if(i===0)n!==null&&Sg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Sg(n),e===1)t.tag===0?$E(wp.bind(null,t)):fw(wp.bind(null,t)),HE(function(){!($e&6)&&ns()}),n=null;else{switch(z2(i)){case 1:n=s0;break;case 4:n=F2;break;case 16:n=Mc;break;case 536870912:n=j2;break;default:n=Mc}n=ux(n,rx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rx(t,e){if(Ic=-1,Tc=0,$e&6)throw Error(ee(327));var n=t.callbackNode;if(So()&&t.callbackNode!==n)return null;var i=Bc(t,t===sn?gn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=eu(t,i);else{e=i;var o=$e;$e|=2;var l=sx();(sn!==t||gn!==e)&&(Jr=null,Bo=Ut()+500,ys(t,e));do try{p3();break}catch(p){ix(t,p)}while(!0);x0(),Zc.current=l,$e=o,Wt!==null?e=0:(sn=null,gn=0,e=Zt)}if(e!==0){if(e===2&&(o=Wf(t),o!==0&&(i=o,e=mh(t,o))),e===1)throw n=ll,ys(t,0),Ti(t,i),Hn(t,Ut()),n;if(e===6)Ti(t,i);else{if(o=t.current.alternate,!(i&30)&&!h3(o)&&(e=eu(t,i),e===2&&(l=Wf(t),l!==0&&(i=l,e=mh(t,l))),e===1))throw n=ll,ys(t,0),Ti(t,i),Hn(t,Ut()),n;switch(t.finishedWork=o,t.finishedLanes=i,e){case 0:case 1:throw Error(ee(345));case 2:ds(t,jn,Jr);break;case 3:if(Ti(t,i),(i&130023424)===i&&(e=D0+500-Ut(),10<e)){if(Bc(t,0)!==0)break;if(o=t.suspendedLanes,(o&i)!==i){Tn(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=qf(ds.bind(null,t,jn,Jr),e);break}ds(t,jn,Jr);break;case 4:if(Ti(t,i),(i&4194240)===i)break;for(e=t.eventTimes,o=-1;0<i;){var f=31-Rr(i);l=1<<f,f=e[f],f>o&&(o=f),i&=~l}if(i=o,i=Ut()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*f3(i/1960))-i,10<i){t.timeoutHandle=qf(ds.bind(null,t,jn,Jr),i);break}ds(t,jn,Jr);break;case 5:ds(t,jn,Jr);break;default:throw Error(ee(329))}}}return Hn(t,Ut()),t.callbackNode===n?rx.bind(null,t):null}function mh(t,e){var n=Fa;return t.current.memoizedState.isDehydrated&&(ys(t,e).flags|=256),t=eu(t,e),t!==2&&(e=jn,jn=n,e!==null&&wh(e)),t}function wh(t){jn===null?jn=t:jn.push.apply(jn,t)}function h3(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var o=n[i],l=o.getSnapshot;o=o.value;try{if(!Pr(l(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ti(t,e){for(e&=~O0,e&=~Hu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Rr(e),i=1<<n;t[n]=-1,e&=~i}}function wp(t){if($e&6)throw Error(ee(327));So();var e=Bc(t,0);if(!(e&1))return Hn(t,Ut()),null;var n=eu(t,e);if(t.tag!==0&&n===2){var i=Wf(t);i!==0&&(e=i,n=mh(t,i))}if(n===1)throw n=ll,ys(t,0),Ti(t,e),Hn(t,Ut()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ds(t,jn,Jr),Hn(t,Ut()),null}function P0(t,e){var n=$e;$e|=1;try{return t(e)}finally{$e=n,$e===0&&(Bo=Ut()+500,Uu&&ns())}}function As(t){Ni!==null&&Ni.tag===0&&!($e&6)&&So();var e=$e;$e|=1;var n=mr.transition,i=st;try{if(mr.transition=null,st=1,t)return t()}finally{st=i,mr.transition=n,$e=e,!($e&6)&&ns()}}function M0(){qn=mo.current,Ct(mo)}function ys(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,VE(n)),Wt!==null)for(n=Wt.return;n!==null;){var i=n;switch(p0(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&zc();break;case 3:Po(),Ct(Wn),Ct(_n),b0();break;case 5:E0(i);break;case 4:Po();break;case 13:Ct(Tt);break;case 19:Ct(Tt);break;case 10:y0(i.type._context);break;case 22:case 23:M0()}n=n.return}if(sn=t,Wt=t=Wi(t.current,null),gn=qn=e,Zt=0,ll=null,O0=Hu=Ss=0,jn=Fa=null,ps!==null){for(e=0;e<ps.length;e++)if(n=ps[e],i=n.interleaved,i!==null){n.interleaved=null;var o=i.next,l=n.pending;if(l!==null){var f=l.next;l.next=o,i.next=f}n.pending=i}ps=null}return t}function ix(t,e){do{var n=Wt;try{if(x0(),bc.current=qc,Kc){for(var i=kt.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Kc=!1}if(bs=0,nn=$t=kt=null,Ba=!1,sl=0,R0.current=null,n===null||n.return===null){Zt=1,ll=e,Wt=null;break}e:{var l=t,f=n.return,p=n,w=e;if(e=gn,p.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var m=w,E=p,v=E.tag;if(!(E.mode&1)&&(v===0||v===11||v===15)){var A=E.alternate;A?(E.updateQueue=A.updateQueue,E.memoizedState=A.memoizedState,E.lanes=A.lanes):(E.updateQueue=null,E.memoizedState=null)}var R=ip(f);if(R!==null){R.flags&=-257,sp(R,f,p,l,e),R.mode&1&&rp(l,m,e),e=R,w=m;var M=e.updateQueue;if(M===null){var B=new Set;B.add(w),e.updateQueue=B}else M.add(w);break e}else{if(!(e&1)){rp(l,m,e),B0();break e}w=Error(ee(426))}}else if(At&&p.mode&1){var K=ip(f);if(K!==null){!(K.flags&65536)&&(K.flags|=256),sp(K,f,p,l,e),m0(Mo(w,p));break e}}l=w=Mo(w,p),Zt!==4&&(Zt=2),Fa===null?Fa=[l]:Fa.push(l),l=f;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var O=zw(l,w,e);Zg(l,O);break e;case 1:p=w;var N=l.type,k=l.stateNode;if(!(l.flags&128)&&(typeof N.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Ui===null||!Ui.has(k)))){l.flags|=65536,e&=-e,l.lanes|=e;var U=Ww(l,p,e);Zg(l,U);break e}}l=l.return}while(l!==null)}ax(n)}catch(te){e=te,Wt===n&&n!==null&&(Wt=n=n.return);continue}break}while(!0)}function sx(){var t=Zc.current;return Zc.current=qc,t===null?qc:t}function B0(){(Zt===0||Zt===3||Zt===2)&&(Zt=4),sn===null||!(Ss&268435455)&&!(Hu&268435455)||Ti(sn,gn)}function eu(t,e){var n=$e;$e|=2;var i=sx();(sn!==t||gn!==e)&&(Jr=null,ys(t,e));do try{g3();break}catch(o){ix(t,o)}while(!0);if(x0(),$e=n,Zc.current=i,Wt!==null)throw Error(ee(261));return sn=null,gn=0,Zt}function g3(){for(;Wt!==null;)ox(Wt)}function p3(){for(;Wt!==null&&!U_();)ox(Wt)}function ox(t){var e=cx(t.alternate,t,qn);t.memoizedProps=t.pendingProps,e===null?ax(t):Wt=e,R0.current=null}function ax(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=l3(n,e),n!==null){n.flags&=32767,Wt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Zt=6,Wt=null;return}}else if(n=a3(n,e,qn),n!==null){Wt=n;return}if(e=e.sibling,e!==null){Wt=e;return}Wt=e=t}while(e!==null);Zt===0&&(Zt=5)}function ds(t,e,n){var i=st,o=mr.transition;try{mr.transition=null,st=1,m3(t,e,n,i)}finally{mr.transition=o,st=i}return null}function m3(t,e,n,i){do So();while(Ni!==null);if($e&6)throw Error(ee(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var l=n.lanes|n.childLanes;if(q_(t,l),t===sn&&(Wt=sn=null,gn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hc||(hc=!0,ux(Mc,function(){return So(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=mr.transition,mr.transition=null;var f=st;st=1;var p=$e;$e|=4,R0.current=null,u3(t,n),tx(n,t),BE($f),Lc=!!Yf,$f=Yf=null,t.current=n,d3(n),z_(),$e=p,st=f,mr.transition=l}else t.current=n;if(hc&&(hc=!1,Ni=t,Jc=o),l=t.pendingLanes,l===0&&(Ui=null),H_(n.stateNode),Hn(t,Ut()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],i(o.value,{componentStack:o.stack,digest:o.digest});if(Qc)throw Qc=!1,t=gh,gh=null,t;return Jc&1&&t.tag!==0&&So(),l=t.pendingLanes,l&1?t===ph?ja++:(ja=0,ph=t):ja=0,ns(),null}function So(){if(Ni!==null){var t=z2(Jc),e=mr.transition,n=st;try{if(mr.transition=null,st=16>t?16:t,Ni===null)var i=!1;else{if(t=Ni,Ni=null,Jc=0,$e&6)throw Error(ee(331));var o=$e;for($e|=4,fe=t.current;fe!==null;){var l=fe,f=l.child;if(fe.flags&16){var p=l.deletions;if(p!==null){for(var w=0;w<p.length;w++){var m=p[w];for(fe=m;fe!==null;){var E=fe;switch(E.tag){case 0:case 11:case 15:La(8,E,l)}var v=E.child;if(v!==null)v.return=E,fe=v;else for(;fe!==null;){E=fe;var A=E.sibling,R=E.return;if(Qw(E),E===m){fe=null;break}if(A!==null){A.return=R,fe=A;break}fe=R}}}var M=l.alternate;if(M!==null){var B=M.child;if(B!==null){M.child=null;do{var K=B.sibling;B.sibling=null,B=K}while(B!==null)}}fe=l}}if(l.subtreeFlags&2064&&f!==null)f.return=l,fe=f;else e:for(;fe!==null;){if(l=fe,l.flags&2048)switch(l.tag){case 0:case 11:case 15:La(9,l,l.return)}var O=l.sibling;if(O!==null){O.return=l.return,fe=O;break e}fe=l.return}}var N=t.current;for(fe=N;fe!==null;){f=fe;var k=f.child;if(f.subtreeFlags&2064&&k!==null)k.return=f,fe=k;else e:for(f=N;fe!==null;){if(p=fe,p.flags&2048)try{switch(p.tag){case 0:case 11:case 15:Vu(9,p)}}catch(te){Pt(p,p.return,te)}if(p===f){fe=null;break e}var U=p.sibling;if(U!==null){U.return=p.return,fe=U;break e}fe=p.return}}if($e=o,ns(),Xr&&typeof Xr.onPostCommitFiberRoot=="function")try{Xr.onPostCommitFiberRoot(Mu,t)}catch{}i=!0}return i}finally{st=n,mr.transition=e}}return!1}function xp(t,e,n){e=Mo(n,e),e=zw(t,e,1),t=ji(t,e,1),e=Tn(),t!==null&&(El(t,1,e),Hn(t,e))}function Pt(t,e,n){if(t.tag===3)xp(t,t,n);else for(;e!==null;){if(e.tag===3){xp(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ui===null||!Ui.has(i))){t=Mo(n,t),t=Ww(e,t,1),e=ji(e,t,1),t=Tn(),e!==null&&(El(e,1,t),Hn(e,t));break}}e=e.return}}function w3(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Tn(),t.pingedLanes|=t.suspendedLanes&n,sn===t&&(gn&n)===n&&(Zt===4||Zt===3&&(gn&130023424)===gn&&500>Ut()-D0?ys(t,0):O0|=n),Hn(t,e)}function lx(t,e){e===0&&(t.mode&1?(e=rc,rc<<=1,!(rc&130023424)&&(rc=4194304)):e=1);var n=Tn();t=ci(t,e),t!==null&&(El(t,e,n),Hn(t,n))}function x3(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lx(t,n)}function y3(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ee(314))}i!==null&&i.delete(e),lx(t,n)}var cx;cx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wn.current)Un=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Un=!1,o3(t,e,n);Un=!!(t.flags&131072)}else Un=!1,At&&e.flags&1048576&&hw(e,Hc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ac(t,e),t=e.pendingProps;var o=Ro(e,_n.current);bo(e,n),o=A0(null,e,i,t,o,n);var l=I0();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vn(i)?(l=!0,Wc(e)):l=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,C0(e),o.updater=Wu,e.stateNode=o,o._reactInternals=e,rh(e,i,t,n),e=oh(null,e,i,!0,l,n)):(e.tag=0,At&&l&&g0(e),An(null,e,o,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Ac(t,e),t=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=C3(i),t=Ar(i,t),o){case 0:e=sh(null,e,i,t,n);break e;case 1:e=lp(null,e,i,t,n);break e;case 11:e=op(null,e,i,t,n);break e;case 14:e=ap(null,e,i,Ar(i.type,t),n);break e}throw Error(ee(306,i,""))}return e;case 0:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Ar(i,o),sh(t,e,i,o,n);case 1:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Ar(i,o),lp(t,e,i,o,n);case 3:e:{if(Xw(e),t===null)throw Error(ee(387));i=e.pendingProps,l=e.memoizedState,o=l.element,yw(t,e),Yc(e,i,null,n);var f=e.memoizedState;if(i=f.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){o=Mo(Error(ee(423)),e),e=cp(t,e,i,n,o);break e}else if(i!==o){o=Mo(Error(ee(424)),e),e=cp(t,e,i,n,o);break e}else for(Qn=Fi(e.stateNode.containerInfo.firstChild),Jn=e,At=!0,Tr=null,n=ww(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Oo(),i===o){e=ui(t,e,n);break e}An(t,e,i,n)}e=e.child}return e;case 5:return vw(e),t===null&&eh(e),i=e.type,o=e.pendingProps,l=t!==null?t.memoizedProps:null,f=o.children,Kf(i,o)?f=null:l!==null&&Kf(i,l)&&(e.flags|=32),Gw(t,e),An(t,e,f,n),e.child;case 6:return t===null&&eh(e),null;case 13:return Yw(t,e,n);case 4:return _0(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Do(e,null,i,n):An(t,e,i,n),e.child;case 11:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Ar(i,o),op(t,e,i,o,n);case 7:return An(t,e,e.pendingProps,n),e.child;case 8:return An(t,e,e.pendingProps.children,n),e.child;case 12:return An(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,o=e.pendingProps,l=e.memoizedProps,f=o.value,mt(Gc,i._currentValue),i._currentValue=f,l!==null)if(Pr(l.value,f)){if(l.children===o.children&&!Wn.current){e=ui(t,e,n);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var p=l.dependencies;if(p!==null){f=l.child;for(var w=p.firstContext;w!==null;){if(w.context===i){if(l.tag===1){w=ii(-1,n&-n),w.tag=2;var m=l.updateQueue;if(m!==null){m=m.shared;var E=m.pending;E===null?w.next=w:(w.next=E.next,E.next=w),m.pending=w}}l.lanes|=n,w=l.alternate,w!==null&&(w.lanes|=n),th(l.return,n,e),p.lanes|=n;break}w=w.next}}else if(l.tag===10)f=l.type===e.type?null:l.child;else if(l.tag===18){if(f=l.return,f===null)throw Error(ee(341));f.lanes|=n,p=f.alternate,p!==null&&(p.lanes|=n),th(f,n,e),f=l.sibling}else f=l.child;if(f!==null)f.return=l;else for(f=l;f!==null;){if(f===e){f=null;break}if(l=f.sibling,l!==null){l.return=f.return,f=l;break}f=f.return}l=f}An(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,i=e.pendingProps.children,bo(e,n),o=wr(o),i=i(o),e.flags|=1,An(t,e,i,n),e.child;case 14:return i=e.type,o=Ar(i,e.pendingProps),o=Ar(i.type,o),ap(t,e,i,o,n);case 15:return Vw(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Ar(i,o),Ac(t,e),e.tag=1,Vn(i)?(t=!0,Wc(e)):t=!1,bo(e,n),Uw(e,i,o),rh(e,i,o,n),oh(null,e,i,!0,t,n);case 19:return $w(t,e,n);case 22:return Hw(t,e,n)}throw Error(ee(156,e.tag))};function ux(t,e){return L2(t,e)}function v3(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gr(t,e,n,i){return new v3(t,e,n,i)}function L0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function C3(t){if(typeof t=="function")return L0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===n0)return 11;if(t===r0)return 14}return 2}function Wi(t,e){var n=t.alternate;return n===null?(n=gr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function kc(t,e,n,i,o,l){var f=2;if(i=t,typeof t=="function")L0(t)&&(f=1);else if(typeof t=="string")f=5;else e:switch(t){case so:return vs(n.children,o,l,e);case t0:f=8,o|=8;break;case If:return t=gr(12,n,e,o|2),t.elementType=If,t.lanes=l,t;case Tf:return t=gr(13,n,e,o),t.elementType=Tf,t.lanes=l,t;case kf:return t=gr(19,n,e,o),t.elementType=kf,t.lanes=l,t;case v2:return Gu(n,o,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case x2:f=10;break e;case y2:f=9;break e;case n0:f=11;break e;case r0:f=14;break e;case Si:f=16,i=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=gr(f,n,e,o),e.elementType=t,e.type=i,e.lanes=l,e}function vs(t,e,n,i){return t=gr(7,t,i,e),t.lanes=n,t}function Gu(t,e,n,i){return t=gr(22,t,i,e),t.elementType=v2,t.lanes=n,t.stateNode={isHidden:!1},t}function sf(t,e,n){return t=gr(6,t,null,e),t.lanes=n,t}function of(t,e,n){return e=gr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _3(t,e,n,i,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jd(0),this.expirationTimes=jd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jd(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function F0(t,e,n,i,o,l,f,p,w){return t=new _3(t,e,n,p,w),e===1?(e=1,l===!0&&(e|=8)):e=0,l=gr(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},C0(l),t}function E3(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:io,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function dx(t){if(!t)return Ki;t=t._reactInternals;e:{if(Ps(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(Vn(n))return dw(t,n,e)}return e}function fx(t,e,n,i,o,l,f,p,w){return t=F0(n,i,!0,t,o,l,f,p,w),t.context=dx(null),n=t.current,i=Tn(),o=zi(n),l=ii(i,o),l.callback=e??null,ji(n,l,o),t.current.lanes=o,El(t,o,i),Hn(t,i),t}function Xu(t,e,n,i){var o=e.current,l=Tn(),f=zi(o);return n=dx(n),e.context===null?e.context=n:e.pendingContext=n,e=ii(l,f),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ji(o,e,f),t!==null&&(Or(t,o,f,l),Ec(t,o,f)),f}function tu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function j0(t,e){yp(t,e),(t=t.alternate)&&yp(t,e)}function b3(){return null}var hx=typeof reportError=="function"?reportError:function(t){console.error(t)};function U0(t){this._internalRoot=t}Yu.prototype.render=U0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));Xu(t,e,null,null)};Yu.prototype.unmount=U0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;As(function(){Xu(null,t,null,null)}),e[li]=null}};function Yu(t){this._internalRoot=t}Yu.prototype.unstable_scheduleHydration=function(t){if(t){var e=H2();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ii.length&&e!==0&&e<Ii[n].priority;n++);Ii.splice(n,0,t),n===0&&X2(t)}};function z0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vp(){}function S3(t,e,n,i,o){if(o){if(typeof i=="function"){var l=i;i=function(){var m=tu(f);l.call(m)}}var f=fx(e,i,t,0,null,!1,!1,"",vp);return t._reactRootContainer=f,t[li]=f.current,el(t.nodeType===8?t.parentNode:t),As(),f}for(;o=t.lastChild;)t.removeChild(o);if(typeof i=="function"){var p=i;i=function(){var m=tu(w);p.call(m)}}var w=F0(t,0,!1,null,null,!1,!1,"",vp);return t._reactRootContainer=w,t[li]=w.current,el(t.nodeType===8?t.parentNode:t),As(function(){Xu(e,w,n,i)}),w}function Ku(t,e,n,i,o){var l=n._reactRootContainer;if(l){var f=l;if(typeof o=="function"){var p=o;o=function(){var w=tu(f);p.call(w)}}Xu(e,f,t,o)}else f=S3(n,e,t,o,i);return tu(f)}W2=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ta(e.pendingLanes);n!==0&&(o0(e,n|1),Hn(e,Ut()),!($e&6)&&(Bo=Ut()+500,ns()))}break;case 13:As(function(){var i=ci(t,1);if(i!==null){var o=Tn();Or(i,t,1,o)}}),j0(t,1)}};a0=function(t){if(t.tag===13){var e=ci(t,134217728);if(e!==null){var n=Tn();Or(e,t,134217728,n)}j0(t,134217728)}};V2=function(t){if(t.tag===13){var e=zi(t),n=ci(t,e);if(n!==null){var i=Tn();Or(n,t,e,i)}j0(t,e)}};H2=function(){return st};G2=function(t,e){var n=st;try{return st=t,e()}finally{st=n}};jf=function(t,e,n){switch(e){case"input":if(Of(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var o=ju(i);if(!o)throw Error(ee(90));_2(i),Of(i,o)}}}break;case"textarea":b2(t,n);break;case"select":e=n.value,e!=null&&vo(t,!!n.multiple,e,!1)}};R2=P0;O2=As;var A3={usingClientEntryPoint:!1,Events:[Sl,co,ju,k2,N2,P0]},Ca={findFiberByHostInstance:gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},I3={bundleType:Ca.bundleType,version:Ca.version,rendererPackageName:Ca.rendererPackageName,rendererConfig:Ca.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=M2(t),t===null?null:t.stateNode},findFiberByHostInstance:Ca.findFiberByHostInstance||b3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gc.isDisabled&&gc.supportsFiber)try{Mu=gc.inject(I3),Xr=gc}catch{}}rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A3;rr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!z0(e))throw Error(ee(200));return E3(t,e,null,n)};rr.createRoot=function(t,e){if(!z0(t))throw Error(ee(299));var n=!1,i="",o=hx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=F0(t,1,!1,null,null,n,!1,i,o),t[li]=e.current,el(t.nodeType===8?t.parentNode:t),new U0(e)};rr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=M2(e),t=t===null?null:t.stateNode,t};rr.flushSync=function(t){return As(t)};rr.hydrate=function(t,e,n){if(!$u(e))throw Error(ee(200));return Ku(null,t,e,!0,n)};rr.hydrateRoot=function(t,e,n){if(!z0(t))throw Error(ee(405));var i=n!=null&&n.hydratedSources||null,o=!1,l="",f=hx;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),e=fx(e,null,t,1,n??null,o,!1,l,f),t[li]=e.current,el(t),i)for(t=0;t<i.length;t++)n=i[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new Yu(e)};rr.render=function(t,e,n){if(!$u(e))throw Error(ee(200));return Ku(null,t,e,!1,n)};rr.unmountComponentAtNode=function(t){if(!$u(t))throw Error(ee(40));return t._reactRootContainer?(As(function(){Ku(null,null,t,!1,function(){t._reactRootContainer=null,t[li]=null})}),!0):!1};rr.unstable_batchedUpdates=P0;rr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!$u(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return Ku(t,e,n,!1,i)};rr.version="18.3.1-next-f1338f8080-20240426";function gx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gx)}catch(t){console.error(t)}}gx(),g2.exports=rr;var T3=g2.exports,Cp=T3;Sf.createRoot=Cp.createRoot,Sf.hydrateRoot=Cp.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cl(){return cl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},cl.apply(this,arguments)}var Ri;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ri||(Ri={}));const _p="popstate";function k3(t){t===void 0&&(t={});function e(i,o){let{pathname:l,search:f,hash:p}=i.location;return xh("",{pathname:l,search:f,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:nu(o)}return R3(e,n,null,t)}function Vt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function px(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function N3(){return Math.random().toString(36).substr(2,8)}function Ep(t,e){return{usr:t.state,key:t.key,idx:e}}function xh(t,e,n,i){return n===void 0&&(n=null),cl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?$o(e):e,{state:n,key:e&&e.key||i||N3()})}function nu(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function $o(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function R3(t,e,n,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,f=o.history,p=Ri.Pop,w=null,m=E();m==null&&(m=0,f.replaceState(cl({},f.state,{idx:m}),""));function E(){return(f.state||{idx:null}).idx}function v(){p=Ri.Pop;let K=E(),O=K==null?null:K-m;m=K,w&&w({action:p,location:B.location,delta:O})}function A(K,O){p=Ri.Push;let N=xh(B.location,K,O);m=E()+1;let k=Ep(N,m),U=B.createHref(N);try{f.pushState(k,"",U)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;o.location.assign(U)}l&&w&&w({action:p,location:B.location,delta:1})}function R(K,O){p=Ri.Replace;let N=xh(B.location,K,O);m=E();let k=Ep(N,m),U=B.createHref(N);f.replaceState(k,"",U),l&&w&&w({action:p,location:B.location,delta:0})}function M(K){let O=o.location.origin!=="null"?o.location.origin:o.location.href,N=typeof K=="string"?K:nu(K);return N=N.replace(/ $/,"%20"),Vt(O,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,O)}let B={get action(){return p},get location(){return t(o,f)},listen(K){if(w)throw new Error("A history only accepts one active listener");return o.addEventListener(_p,v),w=K,()=>{o.removeEventListener(_p,v),w=null}},createHref(K){return e(o,K)},createURL:M,encodeLocation(K){let O=M(K);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:A,replace:R,go(K){return f.go(K)}};return B}var bp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(bp||(bp={}));function O3(t,e,n){return n===void 0&&(n="/"),D3(t,e,n)}function D3(t,e,n,i){let o=typeof e=="string"?$o(e):e,l=W0(o.pathname||"/",n);if(l==null)return null;let f=mx(t);P3(f);let p=null;for(let w=0;p==null&&w<f.length;++w){let m=X3(l);p=V3(f[w],m)}return p}function mx(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let o=(l,f,p)=>{let w={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:f,route:l};w.relativePath.startsWith("/")&&(Vt(w.relativePath.startsWith(i),'Absolute route path "'+w.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),w.relativePath=w.relativePath.slice(i.length));let m=Vi([i,w.relativePath]),E=n.concat(w);l.children&&l.children.length>0&&(Vt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),mx(l.children,e,E,m)),!(l.path==null&&!l.index)&&e.push({path:m,score:z3(m,l.index),routesMeta:E})};return t.forEach((l,f)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))o(l,f);else for(let w of wx(l.path))o(l,f,w)}),e}function wx(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),l=n.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let f=wx(i.join("/")),p=[];return p.push(...f.map(w=>w===""?l:[l,w].join("/"))),o&&p.push(...f),p.map(w=>t.startsWith("/")&&w===""?"/":w)}function P3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:W3(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const M3=/^:[\w-]+$/,B3=3,L3=2,F3=1,j3=10,U3=-2,Sp=t=>t==="*";function z3(t,e){let n=t.split("/"),i=n.length;return n.some(Sp)&&(i+=U3),e&&(i+=L3),n.filter(o=>!Sp(o)).reduce((o,l)=>o+(M3.test(l)?B3:l===""?F3:j3),i)}function W3(t,e){return t.length===e.length&&t.slice(0,-1).every((i,o)=>i===e[o])?t[t.length-1]-e[e.length-1]:0}function V3(t,e,n){let{routesMeta:i}=t,o={},l="/",f=[];for(let p=0;p<i.length;++p){let w=i[p],m=p===i.length-1,E=l==="/"?e:e.slice(l.length)||"/",v=H3({path:w.relativePath,caseSensitive:w.caseSensitive,end:m},E),A=w.route;if(!v)return null;Object.assign(o,v.params),f.push({params:o,pathname:Vi([l,v.pathname]),pathnameBase:q3(Vi([l,v.pathnameBase])),route:A}),v.pathnameBase!=="/"&&(l=Vi([l,v.pathnameBase]))}return f}function H3(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=G3(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let l=o[0],f=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((m,E,v)=>{let{paramName:A,isOptional:R}=E;if(A==="*"){let B=p[v]||"";f=l.slice(0,l.length-B.length).replace(/(.)\/+$/,"$1")}const M=p[v];return R&&!M?m[A]=void 0:m[A]=(M||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:f,pattern:t}}function G3(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),px(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,p,w)=>(i.push({paramName:p,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function X3(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return px(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function W0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function Y3(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:o=""}=typeof t=="string"?$o(t):t;return{pathname:n?n.startsWith("/")?n:$3(n,e):e,search:Z3(i),hash:Q3(o)}}function $3(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function af(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function K3(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xx(t,e){let n=K3(t);return e?n.map((i,o)=>o===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function yx(t,e,n,i){i===void 0&&(i=!1);let o;typeof t=="string"?o=$o(t):(o=cl({},t),Vt(!o.pathname||!o.pathname.includes("?"),af("?","pathname","search",o)),Vt(!o.pathname||!o.pathname.includes("#"),af("#","pathname","hash",o)),Vt(!o.search||!o.search.includes("#"),af("#","search","hash",o)));let l=t===""||o.pathname==="",f=l?"/":o.pathname,p;if(f==null)p=n;else{let v=e.length-1;if(!i&&f.startsWith("..")){let A=f.split("/");for(;A[0]==="..";)A.shift(),v-=1;o.pathname=A.join("/")}p=v>=0?e[v]:"/"}let w=Y3(o,p),m=f&&f!=="/"&&f.endsWith("/"),E=(l||f===".")&&n.endsWith("/");return!w.pathname.endsWith("/")&&(m||E)&&(w.pathname+="/"),w}const Vi=t=>t.join("/").replace(/\/\/+/g,"/"),q3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Z3=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Q3=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function J3(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const vx=["post","put","patch","delete"];new Set(vx);const eb=["get",...vx];new Set(eb);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ul(){return ul=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ul.apply(this,arguments)}const V0=Y.createContext(null),tb=Y.createContext(null),Ms=Y.createContext(null),qu=Y.createContext(null),Bs=Y.createContext({outlet:null,matches:[],isDataRoute:!1}),Cx=Y.createContext(null);function nb(t,e){let{relative:n}=e===void 0?{}:e;Il()||Vt(!1);let{basename:i,navigator:o}=Y.useContext(Ms),{hash:l,pathname:f,search:p}=Ex(t,{relative:n}),w=f;return i!=="/"&&(w=f==="/"?i:Vi([i,f])),o.createHref({pathname:w,search:p,hash:l})}function Il(){return Y.useContext(qu)!=null}function Tl(){return Il()||Vt(!1),Y.useContext(qu).location}function _x(t){Y.useContext(Ms).static||Y.useLayoutEffect(t)}function rb(){let{isDataRoute:t}=Y.useContext(Bs);return t?mb():ib()}function ib(){Il()||Vt(!1);let t=Y.useContext(V0),{basename:e,future:n,navigator:i}=Y.useContext(Ms),{matches:o}=Y.useContext(Bs),{pathname:l}=Tl(),f=JSON.stringify(xx(o,n.v7_relativeSplatPath)),p=Y.useRef(!1);return _x(()=>{p.current=!0}),Y.useCallback(function(m,E){if(E===void 0&&(E={}),!p.current)return;if(typeof m=="number"){i.go(m);return}let v=yx(m,JSON.parse(f),l,E.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Vi([e,v.pathname])),(E.replace?i.replace:i.push)(v,E.state,E)},[e,i,f,l,t])}function Ex(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=Y.useContext(Ms),{matches:o}=Y.useContext(Bs),{pathname:l}=Tl(),f=JSON.stringify(xx(o,i.v7_relativeSplatPath));return Y.useMemo(()=>yx(t,JSON.parse(f),l,n==="path"),[t,f,l,n])}function sb(t,e){return ob(t,e)}function ob(t,e,n,i){Il()||Vt(!1);let{navigator:o}=Y.useContext(Ms),{matches:l}=Y.useContext(Bs),f=l[l.length-1],p=f?f.params:{};f&&f.pathname;let w=f?f.pathnameBase:"/";f&&f.route;let m=Tl(),E;if(e){var v;let K=typeof e=="string"?$o(e):e;w==="/"||(v=K.pathname)!=null&&v.startsWith(w)||Vt(!1),E=K}else E=m;let A=E.pathname||"/",R=A;if(w!=="/"){let K=w.replace(/^\//,"").split("/");R="/"+A.replace(/^\//,"").split("/").slice(K.length).join("/")}let M=O3(t,{pathname:R}),B=db(M&&M.map(K=>Object.assign({},K,{params:Object.assign({},p,K.params),pathname:Vi([w,o.encodeLocation?o.encodeLocation(K.pathname).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?w:Vi([w,o.encodeLocation?o.encodeLocation(K.pathnameBase).pathname:K.pathnameBase])})),l,n,i);return e&&B?Y.createElement(qu.Provider,{value:{location:ul({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:Ri.Pop}},B):B}function ab(){let t=pb(),e=J3(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),n?Y.createElement("pre",{style:o},n):null,null)}const lb=Y.createElement(ab,null);class cb extends Y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?Y.createElement(Bs.Provider,{value:this.props.routeContext},Y.createElement(Cx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ub(t){let{routeContext:e,match:n,children:i}=t,o=Y.useContext(V0);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),Y.createElement(Bs.Provider,{value:e},i)}function db(t,e,n,i){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var l;if(!n)return null;if(n.errors)t=n.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let f=t,p=(o=n)==null?void 0:o.errors;if(p!=null){let E=f.findIndex(v=>v.route.id&&(p==null?void 0:p[v.route.id])!==void 0);E>=0||Vt(!1),f=f.slice(0,Math.min(f.length,E+1))}let w=!1,m=-1;if(n&&i&&i.v7_partialHydration)for(let E=0;E<f.length;E++){let v=f[E];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=E),v.route.id){let{loaderData:A,errors:R}=n,M=v.route.loader&&A[v.route.id]===void 0&&(!R||R[v.route.id]===void 0);if(v.route.lazy||M){w=!0,m>=0?f=f.slice(0,m+1):f=[f[0]];break}}}return f.reduceRight((E,v,A)=>{let R,M=!1,B=null,K=null;n&&(R=p&&v.route.id?p[v.route.id]:void 0,B=v.route.errorElement||lb,w&&(m<0&&A===0?(wb("route-fallback"),M=!0,K=null):m===A&&(M=!0,K=v.route.hydrateFallbackElement||null)));let O=e.concat(f.slice(0,A+1)),N=()=>{let k;return R?k=B:M?k=K:v.route.Component?k=Y.createElement(v.route.Component,null):v.route.element?k=v.route.element:k=E,Y.createElement(ub,{match:v,routeContext:{outlet:E,matches:O,isDataRoute:n!=null},children:k})};return n&&(v.route.ErrorBoundary||v.route.errorElement||A===0)?Y.createElement(cb,{location:n.location,revalidation:n.revalidation,component:B,error:R,children:N(),routeContext:{outlet:null,matches:O,isDataRoute:!0}}):N()},null)}var bx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(bx||{}),Sx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Sx||{});function fb(t){let e=Y.useContext(V0);return e||Vt(!1),e}function hb(t){let e=Y.useContext(tb);return e||Vt(!1),e}function gb(t){let e=Y.useContext(Bs);return e||Vt(!1),e}function Ax(t){let e=gb(),n=e.matches[e.matches.length-1];return n.route.id||Vt(!1),n.route.id}function pb(){var t;let e=Y.useContext(Cx),n=hb(),i=Ax();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function mb(){let{router:t}=fb(bx.UseNavigateStable),e=Ax(Sx.UseNavigateStable),n=Y.useRef(!1);return _x(()=>{n.current=!0}),Y.useCallback(function(o,l){l===void 0&&(l={}),n.current&&(typeof o=="number"?t.navigate(o):t.navigate(o,ul({fromRouteId:e},l)))},[t,e])}const Ap={};function wb(t,e,n){Ap[t]||(Ap[t]=!0)}function xb(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Nc(t){Vt(!1)}function yb(t){let{basename:e="/",children:n=null,location:i,navigationType:o=Ri.Pop,navigator:l,static:f=!1,future:p}=t;Il()&&Vt(!1);let w=e.replace(/^\/*/,"/"),m=Y.useMemo(()=>({basename:w,navigator:l,static:f,future:ul({v7_relativeSplatPath:!1},p)}),[w,p,l,f]);typeof i=="string"&&(i=$o(i));let{pathname:E="/",search:v="",hash:A="",state:R=null,key:M="default"}=i,B=Y.useMemo(()=>{let K=W0(E,w);return K==null?null:{location:{pathname:K,search:v,hash:A,state:R,key:M},navigationType:o}},[w,E,v,A,R,M,o]);return B==null?null:Y.createElement(Ms.Provider,{value:m},Y.createElement(qu.Provider,{children:n,value:B}))}function vb(t){let{children:e,location:n}=t;return sb(yh(e),n)}new Promise(()=>{});function yh(t,e){e===void 0&&(e=[]);let n=[];return Y.Children.forEach(t,(i,o)=>{if(!Y.isValidElement(i))return;let l=[...e,o];if(i.type===Y.Fragment){n.push.apply(n,yh(i.props.children,l));return}i.type!==Nc&&Vt(!1),!i.props.index||!i.props.children||Vt(!1);let f={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=yh(i.props.children,l)),n.push(f)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vh(){return vh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},vh.apply(this,arguments)}function Cb(t,e){if(t==null)return{};var n={},i=Object.keys(t),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function _b(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Eb(t,e){return t.button===0&&(!e||e==="_self")&&!_b(t)}const bb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Sb="6";try{window.__reactRouterVersion=Sb}catch{}const Ab="startTransition",Ip=w_[Ab];function Ib(t){let{basename:e,children:n,future:i,window:o}=t,l=Y.useRef();l.current==null&&(l.current=k3({window:o,v5Compat:!0}));let f=l.current,[p,w]=Y.useState({action:f.action,location:f.location}),{v7_startTransition:m}=i||{},E=Y.useCallback(v=>{m&&Ip?Ip(()=>w(v)):w(v)},[w,m]);return Y.useLayoutEffect(()=>f.listen(E),[f,E]),Y.useEffect(()=>xb(i),[i]),Y.createElement(yb,{basename:e,children:n,location:p.location,navigationType:p.action,navigator:f,future:i})}const Tb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tp=Y.forwardRef(function(e,n){let{onClick:i,relative:o,reloadDocument:l,replace:f,state:p,target:w,to:m,preventScrollReset:E,viewTransition:v}=e,A=Cb(e,bb),{basename:R}=Y.useContext(Ms),M,B=!1;if(typeof m=="string"&&kb.test(m)&&(M=m,Tb))try{let k=new URL(window.location.href),U=m.startsWith("//")?new URL(k.protocol+m):new URL(m),te=W0(U.pathname,R);U.origin===k.origin&&te!=null?m=te+U.search+U.hash:B=!0}catch{}let K=nb(m,{relative:o}),O=Nb(m,{replace:f,state:p,target:w,preventScrollReset:E,relative:o,viewTransition:v});function N(k){i&&i(k),k.defaultPrevented||O(k)}return Y.createElement("a",vh({},A,{href:M||K,onClick:B||l?i:N,ref:n,target:w}))});var kp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(kp||(kp={}));var Np;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Np||(Np={}));function Nb(t,e){let{target:n,replace:i,state:o,preventScrollReset:l,relative:f,viewTransition:p}=e===void 0?{}:e,w=rb(),m=Tl(),E=Ex(t,{relative:f});return Y.useCallback(v=>{if(Eb(v,n)){v.preventDefault();let A=i!==void 0?i:nu(m)===nu(E);w(t,{replace:A,state:o,preventScrollReset:l,relative:f,viewTransition:p})}},[m,w,E,i,o,n,t,l,f,p])}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Yn=(t,e)=>{const n=Y.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:f,className:p="",children:w,...m},E)=>Y.createElement("svg",{ref:E,...Rb,width:o,height:o,stroke:i,strokeWidth:f?Number(l)*24/Number(o):l,className:["lucide",`lucide-${Ob(t)}`,p].join(" "),...m},[...e.map(([v,A])=>Y.createElement(v,A)),...Array.isArray(w)?w:[w]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=Yn("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=Yn("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=Yn("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=Yn("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=Yn("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=Yn("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=Yn("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=Yn("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=Yn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=Yn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=Yn("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=Yn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bb=Yn("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lb=Yn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Op={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se=function(t,e){if(!t)throw Ko(e)},Ko=function(t){return new Error("Firebase Database ("+kx.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Fb=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const o=t[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=t[n++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=t[n++],f=t[n++],p=t[n++],w=((o&7)<<18|(l&63)<<12|(f&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(w>>10)),e[i++]=String.fromCharCode(56320+(w&1023))}else{const l=t[n++],f=t[n++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|f&63)}}return e.join("")},G0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<t.length;o+=3){const l=t[o],f=o+1<t.length,p=f?t[o+1]:0,w=o+2<t.length,m=w?t[o+2]:0,E=l>>2,v=(l&3)<<4|p>>4;let A=(p&15)<<2|m>>6,R=m&63;w||(R=64,f||(A=64)),i.push(n[E],n[v],n[A],n[R])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Nx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Fb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<t.length;){const l=n[t.charAt(o++)],p=o<t.length?n[t.charAt(o)]:0;++o;const m=o<t.length?n[t.charAt(o)]:64;++o;const v=o<t.length?n[t.charAt(o)]:64;if(++o,l==null||p==null||m==null||v==null)throw new jb;const A=l<<2|p>>4;if(i.push(A),m!==64){const R=p<<4&240|m>>2;if(i.push(R),v!==64){const M=m<<6&192|v;i.push(M)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class jb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Rx=function(t){const e=Nx(t);return G0.encodeByteArray(e,!0)},iu=function(t){return Rx(t).replace(/\./g,"")},bh=function(t){try{return G0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(t){return Ox(void 0,t)}function Ox(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!zb(n)||(t[n]=Ox(t[n],e[n]));return t}function zb(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb=()=>Wb().__FIREBASE_DEFAULTS__,Hb=()=>{if(typeof process>"u"||typeof Op>"u")return;const t=Op.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Gb=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bh(t[1]);return e&&JSON.parse(e)},Dx=()=>{try{return Vb()||Hb()||Gb()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Xb=t=>{var e,n;return(n=(e=Dx())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Yb=t=>{const e=Xb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Px=()=>{var t;return(t=Dx())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[iu(JSON.stringify(n)),iu(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Mx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kb())}function qb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Zb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Qb(){return kx.NODE_ADMIN===!0}function Bx(){try{return typeof indexedDB=="object"}catch{return!1}}function Lx(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}function Jb(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="FirebaseError";class Ls extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=eS,Object.setPrototypeOf(this,Ls.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zu.prototype.create)}}class Zu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,l=this.errors[e],f=l?tS(l,i):"Error",p=`${this.serviceName}: ${f} (${o}).`;return new Ls(o,p,i)}}function tS(t,e){return t.replace(nS,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const nS=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(t){return JSON.parse(t)}function qt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=function(t){let e={},n={},i={},o="";try{const l=t.split(".");e=dl(bh(l[0])||""),n=dl(bh(l[1])||""),o=l[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:o}},rS=function(t){const e=Fx(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},iS=function(t){const e=Fx(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Lo(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Dp(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function su(t,e,n){const i={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(i[o]=e.call(n,t[o],o,t));return i}function ou(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const l=t[o],f=e[o];if(Pp(l)&&Pp(f)){if(!ou(l,f))return!1}else if(l!==f)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function Pp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let v=0;v<16;v++)i[v]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let v=0;v<16;v++)i[v]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let v=16;v<80;v++){const A=i[v-3]^i[v-8]^i[v-14]^i[v-16];i[v]=(A<<1|A>>>31)&4294967295}let o=this.chain_[0],l=this.chain_[1],f=this.chain_[2],p=this.chain_[3],w=this.chain_[4],m,E;for(let v=0;v<80;v++){v<40?v<20?(m=p^l&(f^p),E=1518500249):(m=l^f^p,E=1859775393):v<60?(m=l&f|p&(l|f),E=2400959708):(m=l^f^p,E=3395469782);const A=(o<<5|o>>>27)+m+w+E+i[v]&4294967295;w=p,p=f,f=(l<<30|l>>>2)&4294967295,l=o,o=A}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+w&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let o=0;const l=this.buf_;let f=this.inbuf_;for(;o<n;){if(f===0)for(;o<=i;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<n;)if(l[f]=e.charCodeAt(o),++f,++o,f===this.blockSize){this.compress_(l),f=0;break}}else for(;o<n;)if(l[f]=e[o],++f,++o,f===this.blockSize){this.compress_(l),f=0;break}}this.inbuf_=f,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let o=0;o<5;o++)for(let l=24;l>=0;l-=8)e[i]=this.chain_[o]>>l&255,++i;return e}}function Qu(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);if(o>=55296&&o<=56319){const l=o-55296;i++,se(i<t.length,"Surrogate pair missing trail surrogate.");const f=t.charCodeAt(i)-56320;o=65536+(l<<10)+f}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Ju=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=1e3,cS=2,uS=4*60*60*1e3,dS=.5;function Mp(t,e=lS,n=cS){const i=e*Math.pow(n,t),o=Math.round(dS*i*(Math.random()-.5)*2);return Math.min(uS,i+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t){return t&&t._delegate?t._delegate:t}class di{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new kl;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gS(e))try{this.getOrInitializeService({instanceIdentifier:fs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fs){return this.instances.has(e)}getOptions(e=fs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[l,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);i===p&&f.resolve(o)}return o}onInit(e,n){var i;const o=this.normalizeInstanceIdentifier(n),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const f=this.instances.get(o);return f&&e(f,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:hS(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=fs){return this.component?this.component.multipleInstances?e:fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hS(t){return t===fs?void 0:t}function gS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(gt||(gt={}));const mS={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},wS=gt.INFO,xS={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},yS=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),o=xS[e];if(o)console[o](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class X0{constructor(e){this.name=e,this._logLevel=wS,this._logHandler=yS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...e),this._logHandler(this,gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...e),this._logHandler(this,gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...e),this._logHandler(this,gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...e),this._logHandler(this,gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...e),this._logHandler(this,gt.ERROR,...e)}}const vS=(t,e)=>e.some(n=>t instanceof n);let Bp,Lp;function CS(){return Bp||(Bp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _S(){return Lp||(Lp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jx=new WeakMap,Sh=new WeakMap,Ux=new WeakMap,lf=new WeakMap,Y0=new WeakMap;function ES(t){const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("success",l),t.removeEventListener("error",f)},l=()=>{n(Hi(t.result)),o()},f=()=>{i(t.error),o()};t.addEventListener("success",l),t.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&jx.set(n,t)}).catch(()=>{}),Y0.set(e,t),e}function bS(t){if(Sh.has(t))return;const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",f),t.removeEventListener("abort",f)},l=()=>{n(),o()},f=()=>{i(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",l),t.addEventListener("error",f),t.addEventListener("abort",f)});Sh.set(t,e)}let Ah={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Sh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ux.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function SS(t){Ah=t(Ah)}function AS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(cf(this),e,...n);return Ux.set(i,e.sort?e.sort():[e]),Hi(i)}:_S().includes(t)?function(...e){return t.apply(cf(this),e),Hi(jx.get(this))}:function(...e){return Hi(t.apply(cf(this),e))}}function IS(t){return typeof t=="function"?AS(t):(t instanceof IDBTransaction&&bS(t),vS(t,CS())?new Proxy(t,Ah):t)}function Hi(t){if(t instanceof IDBRequest)return ES(t);if(lf.has(t))return lf.get(t);const e=IS(t);return e!==t&&(lf.set(t,e),Y0.set(e,t)),e}const cf=t=>Y0.get(t);function zx(t,e,{blocked:n,upgrade:i,blocking:o,terminated:l}={}){const f=indexedDB.open(t,e),p=Hi(f);return i&&f.addEventListener("upgradeneeded",w=>{i(Hi(f.result),w.oldVersion,w.newVersion,Hi(f.transaction),w)}),n&&f.addEventListener("blocked",w=>n(w.oldVersion,w.newVersion,w)),p.then(w=>{l&&w.addEventListener("close",()=>l()),o&&w.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),p}const TS=["get","getKey","getAll","getAllKeys","count"],kS=["put","add","delete","clear"],uf=new Map;function Fp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(uf.get(e))return uf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=kS.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||TS.includes(n)))return;const l=async function(f,...p){const w=this.transaction(f,o?"readwrite":"readonly");let m=w.store;return i&&(m=m.index(p.shift())),(await Promise.all([m[n](...p),o&&w.done]))[0]};return uf.set(e,l),l}SS(t=>({...t,get:(e,n,i)=>Fp(e,n)||t.get(e,n,i),has:(e,n)=>!!Fp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(RS(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function RS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ih="@firebase/app",jp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=new X0("@firebase/app"),OS="@firebase/app-compat",DS="@firebase/analytics-compat",PS="@firebase/analytics",MS="@firebase/app-check-compat",BS="@firebase/app-check",LS="@firebase/auth",FS="@firebase/auth-compat",jS="@firebase/database",US="@firebase/data-connect",zS="@firebase/database-compat",WS="@firebase/functions",VS="@firebase/functions-compat",HS="@firebase/installations",GS="@firebase/installations-compat",XS="@firebase/messaging",YS="@firebase/messaging-compat",$S="@firebase/performance",KS="@firebase/performance-compat",qS="@firebase/remote-config",ZS="@firebase/remote-config-compat",QS="@firebase/storage",JS="@firebase/storage-compat",eA="@firebase/firestore",tA="@firebase/vertexai-preview",nA="@firebase/firestore-compat",rA="firebase",iA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th="[DEFAULT]",sA={[Ih]:"fire-core",[OS]:"fire-core-compat",[PS]:"fire-analytics",[DS]:"fire-analytics-compat",[BS]:"fire-app-check",[MS]:"fire-app-check-compat",[LS]:"fire-auth",[FS]:"fire-auth-compat",[jS]:"fire-rtdb",[US]:"fire-data-connect",[zS]:"fire-rtdb-compat",[WS]:"fire-fn",[VS]:"fire-fn-compat",[HS]:"fire-iid",[GS]:"fire-iid-compat",[XS]:"fire-fcm",[YS]:"fire-fcm-compat",[$S]:"fire-perf",[KS]:"fire-perf-compat",[qS]:"fire-rc",[ZS]:"fire-rc-compat",[QS]:"fire-gcs",[JS]:"fire-gcs-compat",[eA]:"fire-fst",[nA]:"fire-fst-compat",[tA]:"fire-vertex","fire-js":"fire-js",[rA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au=new Map,oA=new Map,kh=new Map;function Up(t,e){try{t.container.addComponent(e)}catch(n){fi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qi(t){const e=t.name;if(kh.has(e))return fi.debug(`There were multiple attempts to register component ${e}.`),!1;kh.set(e,t);for(const n of au.values())Up(n,t);for(const n of oA.values())Up(n,t);return!0}function Nl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gi=new Zu("app","Firebase",aA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new di("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=iA;function Wx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Th,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Gi.create("bad-app-name",{appName:String(o)});if(n||(n=Px()),!n)throw Gi.create("no-options");const l=au.get(o);if(l){if(ou(n,l.options)&&ou(i,l.config))return l;throw Gi.create("duplicate-app",{appName:o})}const f=new pS(o);for(const w of kh.values())f.addComponent(w);const p=new lA(n,i,f);return au.set(o,p),p}function Vx(t=Th){const e=au.get(t);if(!e&&t===Th&&Px())return Wx();if(!e)throw Gi.create("no-app",{appName:t});return e}function $r(t,e,n){var i;let o=(i=sA[t])!==null&&i!==void 0?i:t;n&&(o+=`-${n}`);const l=o.match(/\s|\//),f=e.match(/\s|\//);if(l||f){const p=[`Unable to register library "${o}" with version "${e}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&f&&p.push("and"),f&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fi.warn(p.join(" "));return}qi(new di(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA="firebase-heartbeat-database",dA=1,fl="firebase-heartbeat-store";let df=null;function Hx(){return df||(df=zx(uA,dA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gi.create("idb-open",{originalErrorMessage:t.message})})),df}async function fA(t){try{const n=(await Hx()).transaction(fl),i=await n.objectStore(fl).get(Gx(t));return await n.done,i}catch(e){if(e instanceof Ls)fi.warn(e.message);else{const n=Gi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fi.warn(n.message)}}}async function zp(t,e){try{const i=(await Hx()).transaction(fl,"readwrite");await i.objectStore(fl).put(e,Gx(t)),await i.done}catch(n){if(n instanceof Ls)fi.warn(n.message);else{const i=Gi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fi.warn(i.message)}}}function Gx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=1024,gA=30*24*60*60*1e3;class pA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Wp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(f=>f.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(f=>{const p=new Date(f.date).valueOf();return Date.now()-p<=gA}),this._storage.overwrite(this._heartbeatsCache))}catch(i){fi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Wp(),{heartbeatsToSend:i,unsentEntries:o}=mA(this._heartbeatsCache.heartbeats),l=iu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return fi.warn(n),""}}}function Wp(){return new Date().toISOString().substring(0,10)}function mA(t,e=hA){const n=[];let i=t.slice();for(const o of t){const l=n.find(f=>f.agent===o.agent);if(l){if(l.dates.push(o.date),Vp(n)>e){l.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Vp(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class wA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Bx()?Lx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return zp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return zp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Vp(t){return iu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(t){qi(new di("platform-logger",e=>new NS(e),"PRIVATE")),qi(new di("heartbeat",e=>new pA(e),"PRIVATE")),$r(Ih,jp,t),$r(Ih,jp,"esm2017"),$r("fire-js","")}xA("");var Hp={};const Gp="@firebase/database",Xp="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xx="";function yA(t){Xx=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),qt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:dl(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return qr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new vA(e)}}catch{}return new CA},ws=Yx("localStorage"),_A=Yx("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=new X0("@firebase/database"),EA=function(){let t=1;return function(){return t++}}(),$x=function(t){const e=aS(t),n=new oS;n.update(e);const i=n.digest();return G0.encodeByteArray(i)},Rl=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Rl.apply(null,i):typeof i=="object"?e+=qt(i):e+=i,e+=" "}return e};let Ua=null,Yp=!0;const bA=function(t,e){se(!0,"Can't turn on custom loggers persistently."),Ao.logLevel=gt.VERBOSE,Ua=Ao.log.bind(Ao)},hn=function(...t){if(Yp===!0&&(Yp=!1,Ua===null&&_A.get("logging_enabled")===!0&&bA()),Ua){const e=Rl.apply(null,t);Ua(e)}},Ol=function(t){return function(...e){hn(t,...e)}},Nh=function(...t){const e="FIREBASE INTERNAL ERROR: "+Rl(...t);Ao.error(e)},hi=function(...t){const e=`FIREBASE FATAL ERROR: ${Rl(...t)}`;throw Ao.error(e),new Error(e)},kn=function(...t){const e="FIREBASE WARNING: "+Rl(...t);Ao.warn(e)},SA=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&kn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},$0=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},AA=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Fo="[MIN_NAME]",Is="[MAX_NAME]",Fs=function(t,e){if(t===e)return 0;if(t===Fo||e===Is)return-1;if(e===Fo||t===Is)return 1;{const n=$p(t),i=$p(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},IA=function(t,e){return t===e?0:t<e?-1:1},_a=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+qt(e))},K0=function(t){if(typeof t!="object"||t===null)return qt(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=qt(e[i]),n+=":",n+=K0(t[e[i]]);return n+="}",n},Kx=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let o=0;o<n;o+=e)o+e>n?i.push(t.substring(o,n)):i.push(t.substring(o,o+e));return i};function mn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const qx=function(t){se(!$0(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let o,l,f,p,w;t===0?(l=0,f=0,o=1/t===-1/0?1:0):(o=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(p=Math.min(Math.floor(Math.log(t)/Math.LN2),i),l=p+i,f=Math.round(t*Math.pow(2,n-p)-Math.pow(2,n))):(l=0,f=Math.round(t/Math.pow(2,1-i-n))));const m=[];for(w=n;w;w-=1)m.push(f%2?1:0),f=Math.floor(f/2);for(w=e;w;w-=1)m.push(l%2?1:0),l=Math.floor(l/2);m.push(o?1:0),m.reverse();const E=m.join("");let v="";for(w=0;w<64;w+=8){let A=parseInt(E.substr(w,8),2).toString(16);A.length===1&&(A="0"+A),v=v+A}return v.toLowerCase()},TA=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},kA=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function NA(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const RA=new RegExp("^-?(0*)\\d{1,10}$"),OA=-2147483648,DA=2147483647,$p=function(t){if(RA.test(t)){const e=Number(t);if(e>=OA&&e<=DA)return e}return null},qo=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw kn("Exception was thrown by user callback.",n),e},Math.floor(0))}},PA=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},za=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){kn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(hn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',kn(e)}}class Rc{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Rc.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="5",Zx="v",Qx="s",Jx="r",ey="f",ty=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ny="ls",ry="p",Rh="ac",iy="websocket",sy="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,n,i,o,l=!1,f="",p=!1,w=!1){this.secure=n,this.namespace=i,this.webSocketOnly=o,this.nodeAdmin=l,this.persistenceKey=f,this.includeNamespaceInQueryParams=p,this.isUsingEmulator=w,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ws.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ws.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function LA(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function ay(t,e,n){se(typeof e=="string","typeof type must == string"),se(typeof n=="object","typeof params must == object");let i;if(e===iy)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===sy)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);LA(t)&&(n.ns=t.namespace);const o=[];return mn(n,(l,f)=>{o.push(l+"="+f)}),i+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(){this.counters_={}}incrementCounter(e,n=1){qr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Ub(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff={},hf={};function Z0(t){const e=t.toString();return ff[e]||(ff[e]=new FA),ff[e]}function jA(t,e){const n=t.toString();return hf[n]||(hf[n]=e()),hf[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<i.length;++o)i[o]&&qo(()=>{this.onMessage_(i[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="start",zA="close",WA="pLPCommand",VA="pRTLPCB",ly="id",cy="pw",uy="ser",HA="cb",GA="seg",XA="ts",YA="d",$A="dframe",dy=1870,fy=30,KA=dy-fy,qA=25e3,ZA=3e4;class wo{constructor(e,n,i,o,l,f,p){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.transportSessionId=f,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ol(e),this.stats_=Z0(n),this.urlFn=w=>(this.appCheckToken&&(w[Rh]=this.appCheckToken),ay(n,sy,w))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new UA(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(ZA)),AA(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Q0((...l)=>{const[f,p,w,m,E]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,f===Kp)this.id=p,this.password=w;else if(f===zA)p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+f)},(...l)=>{const[f,p]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(f,p)},()=>{this.onClosed_()},this.urlFn);const i={};i[Kp]="t",i[uy]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[HA]=this.scriptTagHolder.uniqueCallbackIdentifier),i[Zx]=q0,this.transportSessionId&&(i[Qx]=this.transportSessionId),this.lastSessionId&&(i[ny]=this.lastSessionId),this.applicationId&&(i[ry]=this.applicationId),this.appCheckToken&&(i[Rh]=this.appCheckToken),typeof location<"u"&&location.hostname&&ty.test(location.hostname)&&(i[Jx]=ey);const o=this.urlFn(i);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){wo.forceAllow_=!0}static forceDisallow(){wo.forceDisallow_=!0}static isAvailable(){return wo.forceAllow_?!0:!wo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!TA()&&!kA()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=qt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Rx(n),o=Kx(i,KA);for(let l=0;l<o.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[l]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[$A]="t",i[ly]=e,i[cy]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=qt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Q0{constructor(e,n,i,o){this.onDisconnect=i,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=EA(),window[WA+this.uniqueCallbackIdentifier]=e,window[VA+this.uniqueCallbackIdentifier]=n,this.myIFrame=Q0.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const f="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(f),this.myIFrame.doc.close()}catch(p){hn("frame writing exception"),p.stack&&hn(p.stack),hn(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||hn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[ly]=this.myID,e[cy]=this.myPW,e[uy]=this.currentSerial;let n=this.urlFn(e),i="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+fy+i.length<=dy;){const f=this.pendingSegs.shift();i=i+"&"+GA+o+"="+f.seg+"&"+XA+o+"="+f.ts+"&"+YA+o+"="+f.d,o++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},o=setTimeout(i,Math.floor(qA)),l=()=>{clearTimeout(o),i()};this.addTag(e,l)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const o=i.readyState;(!o||o==="loaded"||o==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{hn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=16384,JA=45e3;let lu=null;typeof MozWebSocket<"u"?lu=MozWebSocket:typeof WebSocket<"u"&&(lu=WebSocket);class kr{constructor(e,n,i,o,l,f,p){this.connId=e,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ol(this.connId),this.stats_=Z0(n),this.connURL=kr.connectionURL_(n,f,p,o,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,o,l){const f={};return f[Zx]=q0,typeof location<"u"&&location.hostname&&ty.test(location.hostname)&&(f[Jx]=ey),n&&(f[Qx]=n),i&&(f[ny]=i),o&&(f[Rh]=o),l&&(f[ry]=l),ay(e,iy,f)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ws.set("previous_websocket_failure",!0);try{let i;Qb(),this.mySock=new lu(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){kr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&lu!==null&&!kr.forceDisallow_}static previouslyFailed(){return ws.isInMemoryStorage||ws.get("previous_websocket_failure")===!0}markConnectionHealthy(){ws.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=dl(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(se(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=qt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Kx(n,QA);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(JA))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}kr.responsesRequiredToBeHealthy=2;kr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[wo,kr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=kr&&kr.isAvailable();let i=n&&!kr.previouslyFailed();if(e.webSocketOnly&&(n||kn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[kr];else{const o=this.transports_=[];for(const l of hl.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l);hl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}hl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=6e4,tI=5e3,nI=10*1024,rI=100*1024,gf="t",qp="d",iI="s",Zp="r",sI="e",Qp="o",Jp="a",em="n",tm="p",oI="h";class aI{constructor(e,n,i,o,l,f,p,w,m,E){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=o,this.authToken_=l,this.onMessage_=f,this.onReady_=p,this.onDisconnect_=w,this.onKill_=m,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ol("c:"+this.id+":"),this.transportManager_=new hl(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=za(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>rI?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>nI?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(gf in e){const n=e[gf];n===Jp?this.upgradeIfSecondaryHealthy_():n===Zp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Qp&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=_a("t",e),i=_a("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:tm,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Jp,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:em,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=_a("t",e),i=_a("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=_a(gf,e);if(qp in e){const i=e[qp];if(n===oI){const o=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(n===em){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===iI?this.onConnectionShutdown_(i):n===Zp?this.onReset_(i):n===sI?Nh("Server Error: "+i):n===Qp?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Nh("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),q0!==i&&kn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),za(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(eI))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):za(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(tI))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:tm,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ws.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{put(e,n,i,o){}merge(e,n,i,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gy=class{constructor(e){this.allowedEvents_=e,this.listeners_={},se(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let o=0;o<i.length;o++)i[o].callback.apply(i[o].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const o=this.getInitialEvent(e);o&&n.apply(i,o)}off(e,n,i){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let l=0;l<o.length;l++)if(o[l].callback===n&&(!i||i===o[l].context)){o.splice(l,1);return}}validateEventType_(e){se(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends gy{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Mx()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new cu}getInitialEvent(e){return se(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm=32,rm=768;class lt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[i]=this.pieces_[o],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ze(){return new lt("")}function je(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Zi(t){return t.pieces_.length-t.pieceNum_}function pt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new lt(t.pieces_,e)}function J0(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function lI(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function gl(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function py(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new lt(e,0)}function Mt(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof lt)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let o=0;o<i.length;o++)i[o].length>0&&n.push(i[o])}return new lt(n,0)}function Be(t){return t.pieceNum_>=t.pieces_.length}function In(t,e){const n=je(t),i=je(e);if(n===null)return e;if(n===i)return In(pt(t),pt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function cI(t,e){const n=gl(t,0),i=gl(e,0);for(let o=0;o<n.length&&o<i.length;o++){const l=Fs(n[o],i[o]);if(l!==0)return l}return n.length===i.length?0:n.length<i.length?-1:1}function my(t,e){if(Zi(t)!==Zi(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function pr(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(Zi(t)>Zi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class uI{constructor(e,n){this.errorPrefix_=n,this.parts_=gl(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Ju(this.parts_[i]);wy(this)}}function dI(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ju(e),wy(t)}function fI(t){const e=t.parts_.pop();t.byteLength_-=Ju(e),t.parts_.length>0&&(t.byteLength_-=1)}function wy(t){if(t.byteLength_>rm)throw new Error(t.errorPrefix_+"has a key path longer than "+rm+" bytes ("+t.byteLength_+").");if(t.parts_.length>nm)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+nm+") or object contains a cycle "+hs(t))}function hs(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1 extends gy{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new e1}getInitialEvent(e){return se(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=1e3,hI=60*5*1e3,im=30*1e3,gI=1.3,pI=3e4,mI="server_kill",sm=3;class si extends hy{constructor(e,n,i,o,l,f,p,w){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=p,this.authOverride_=w,this.id=si.nextPersistentConnectionId_++,this.log_=Ol("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ea,this.maxReconnectDelay_=hI,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");e1.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&cu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const o=++this.requestNumber_,l={r:o,a:e,b:n};this.log_(qt(l)),se(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[o]=i)}get(e){this.initConnection_();const n=new kl,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:f=>{const p=f.d;f.s==="ok"?n.resolve(p):n.reject(p)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),n.promise}listen(e,n,i,o){this.initConnection_();const l=e._queryIdentifier,f=e._path.toString();this.log_("Listen called for "+f+" "+l),this.listens.has(f)||this.listens.set(f,new Map),se(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),se(!this.listens.get(f).has(l),"listen() called twice for same path/queryId.");const p={onComplete:o,hashFn:n,query:e,tag:i};this.listens.get(f).set(l,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+i+" for "+o);const l={p:i},f="q";e.tag&&(l.q=n._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest(f,l,p=>{const w=p.d,m=p.s;si.warnOnListenWarnings_(w,n),(this.listens.get(i)&&this.listens.get(i).get(o))===e&&(this.log_("listen response",p),m!=="ok"&&this.removeListen_(i,o),e.onComplete&&e.onComplete(m,w))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&qr(e,"w")){const i=Lo(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',l=n._path.toString();kn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||iS(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=im)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=rS(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,o=>{const l=o.s,f=o.d||"error";this.authToken_===e&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),se(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,e._queryObject,n)}sendUnlisten_(e,n,i,o){this.log_("Unlisten on "+e+" for "+n);const l={p:e},f="n";o&&(l.q=i,l.t=o),this.sendRequest(f,l)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,o){const l={p:n,d:i};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,f=>{o&&setTimeout(()=>{o(f.s,f.d)},Math.floor(0))})}put(e,n,i,o){this.putInternal("p",e,n,i,o)}merge(e,n,i,o){this.putInternal("m",e,n,i,o)}putInternal(e,n,i,o,l){this.initConnection_();const f={p:n,d:i};l!==void 0&&(f.h=l),this.outstandingPuts_.push({action:e,request:f,onComplete:o}),this.outstandingPutCount_++;const p=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(p):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,l=>{this.log_(n+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const l=i.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+qt(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Nh("Unrecognized action received from server: "+qt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){se(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ea,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ea,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>pI&&(this.reconnectDelay_=Ea),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*gI)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+si.nextConnectionId_++,l=this.lastSessionId;let f=!1,p=null;const w=function(){p?p.close():(f=!0,i())},m=function(v){se(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(v)};this.realtime_={close:w,sendRequest:m};const E=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,A]=await Promise.all([this.authTokenProvider_.getToken(E),this.appCheckTokenProvider_.getToken(E)]);f?hn("getToken() completed but was canceled"):(hn("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=A&&A.token,p=new aI(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,R=>{kn(R+" ("+this.repoInfo_.toString()+")"),this.interrupt(mI)},l))}catch(v){this.log_("Failed to get token: "+v),f||(this.repoInfo_.nodeAdmin&&kn(v),w())}}}interrupt(e){hn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){hn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Dp(this.interruptReasons_)&&(this.reconnectDelay_=Ea,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(l=>K0(l)).join("$"):i="default";const o=this.removeListen_(e,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,n){const i=new lt(e).toString();let o;if(this.listens.has(i)){const l=this.listens.get(i);o=l.get(n),l.delete(n),l.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(e,n){hn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=sm&&(this.reconnectDelay_=im,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){hn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=sm&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Xx.replace(/\./g,"-")]=1,Mx()?e["framework.cordova"]=1:Zb()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=cu.getInstance().currentlyOnline();return Dp(this.interruptReasons_)&&e}}si.nextPersistentConnectionId_=0;si.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Me(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new Me(Fo,e),o=new Me(Fo,n);return this.compare(i,o)!==0}minPost(){return Me.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pc;class xy extends ed{static get __EMPTY_NODE(){return pc}static set __EMPTY_NODE(e){pc=e}compare(e,n){return Fs(e.name,n.name)}isDefinedOn(e){throw Ko("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Me.MIN}maxPost(){return new Me(Is,pc)}makePost(e,n){return se(typeof e=="string","KeyIndex indexValue must always be a string."),new Me(e,pc)}toString(){return".key"}}const Io=new xy;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n,i,o,l=null){this.isReverse_=o,this.resultGenerator_=l,this.nodeStack_=[];let f=1;for(;!e.isEmpty();)if(e=e,f=n?i(e.key,n):1,o&&(f*=-1),f<0)this.isReverse_?e=e.left:e=e.right;else if(f===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class rn{constructor(e,n,i,o,l){this.key=e,this.value=n,this.color=i??rn.RED,this.left=o??zn.EMPTY_NODE,this.right=l??zn.EMPTY_NODE}copy(e,n,i,o,l){return new rn(e??this.key,n??this.value,i??this.color,o??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const l=i(e,o.key);return l<0?o=o.copy(null,null,null,o.left.insert(e,n,i),null):l===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return zn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,o;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return zn.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}rn.RED=!0;rn.BLACK=!1;class wI{copy(e,n,i,o,l){return this}insert(e,n,i){return new rn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class zn{constructor(e,n=zn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new zn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,rn.BLACK,null,null))}remove(e){return new zn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,rn.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,o=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return o?o.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(o=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new mc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new mc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new mc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new mc(this.root_,null,this.comparator_,!0,e)}}zn.EMPTY_NODE=new wI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(t,e){return Fs(t.name,e.name)}function t1(t,e){return Fs(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oh;function yI(t){Oh=t}const yy=function(t){return typeof t=="number"?"number:"+qx(t):"string:"+t},vy=function(t){if(t.isLeafNode()){const e=t.val();se(typeof e=="string"||typeof e=="number"||typeof e=="object"&&qr(e,".sv"),"Priority must be a string or number.")}else se(t===Oh||t.isEmpty(),"priority of unexpected type.");se(t===Oh||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let om;class tn{constructor(e,n=tn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,se(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),vy(this.priorityNode_)}static set __childrenNodeConstructor(e){om=e}static get __childrenNodeConstructor(){return om}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new tn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:tn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Be(e)?this:je(e)===".priority"?this.priorityNode_:tn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:tn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=je(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(se(i!==".priority"||Zi(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,tn.__childrenNodeConstructor.EMPTY_NODE.updateChild(pt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+yy(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=qx(this.value_):e+=this.value_,this.lazyHash_=$x(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===tn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof tn.__childrenNodeConstructor?-1:(se(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,o=tn.VALUE_TYPE_ORDER.indexOf(n),l=tn.VALUE_TYPE_ORDER.indexOf(i);return se(o>=0,"Unknown leaf type: "+n),se(l>=0,"Unknown leaf type: "+i),o===l?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}tn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cy,_y;function vI(t){Cy=t}function CI(t){_y=t}class _I extends ed{compare(e,n){const i=e.node.getPriority(),o=n.node.getPriority(),l=i.compareTo(o);return l===0?Fs(e.name,n.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Me.MIN}maxPost(){return new Me(Is,new tn("[PRIORITY-POST]",_y))}makePost(e,n){const i=Cy(e);return new Me(n,new tn("[PRIORITY-POST]",i))}toString(){return".priority"}}const Bt=new _I;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=Math.log(2);class bI{constructor(e){const n=l=>parseInt(Math.log(l)/EI,10),i=l=>parseInt(Array(l+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const o=i(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const uu=function(t,e,n,i){t.sort(e);const o=function(w,m){const E=m-w;let v,A;if(E===0)return null;if(E===1)return v=t[w],A=n?n(v):v,new rn(A,v.node,rn.BLACK,null,null);{const R=parseInt(E/2,10)+w,M=o(w,R),B=o(R+1,m);return v=t[R],A=n?n(v):v,new rn(A,v.node,rn.BLACK,M,B)}},l=function(w){let m=null,E=null,v=t.length;const A=function(M,B){const K=v-M,O=v;v-=M;const N=o(K+1,O),k=t[K],U=n?n(k):k;R(new rn(U,k.node,B,null,N))},R=function(M){m?(m.left=M,m=M):(E=M,m=M)};for(let M=0;M<w.count;++M){const B=w.nextBitIsOne(),K=Math.pow(2,w.count-(M+1));B?A(K,rn.BLACK):(A(K,rn.BLACK),A(K,rn.RED))}return E},f=new bI(t.length),p=l(f);return new zn(i||e,p)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pf;const no={};class ri{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return se(no&&Bt,"ChildrenNode.ts has not been loaded"),pf=pf||new ri({".priority":no},{".priority":Bt}),pf}get(e){const n=Lo(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof zn?n:null}hasIndex(e){return qr(this.indexSet_,e.toString())}addIndex(e,n){se(e!==Io,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let o=!1;const l=n.getIterator(Me.Wrap);let f=l.getNext();for(;f;)o=o||e.isDefinedOn(f.node),i.push(f),f=l.getNext();let p;o?p=uu(i,e.getCompare()):p=no;const w=e.toString(),m=Object.assign({},this.indexSet_);m[w]=e;const E=Object.assign({},this.indexes_);return E[w]=p,new ri(E,m)}addToIndexes(e,n){const i=su(this.indexes_,(o,l)=>{const f=Lo(this.indexSet_,l);if(se(f,"Missing index implementation for "+l),o===no)if(f.isDefinedOn(e.node)){const p=[],w=n.getIterator(Me.Wrap);let m=w.getNext();for(;m;)m.name!==e.name&&p.push(m),m=w.getNext();return p.push(e),uu(p,f.getCompare())}else return no;else{const p=n.get(e.name);let w=o;return p&&(w=w.remove(new Me(e.name,p))),w.insert(e,e.node)}});return new ri(i,this.indexSet_)}removeFromIndexes(e,n){const i=su(this.indexes_,o=>{if(o===no)return o;{const l=n.get(e.name);return l?o.remove(new Me(e.name,l)):o}});return new ri(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba;class Se{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&vy(this.priorityNode_),this.children_.isEmpty()&&se(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ba||(ba=new Se(new zn(t1),null,ri.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ba}updatePriority(e){return this.children_.isEmpty()?this:new Se(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ba:n}}getChild(e){const n=je(e);return n===null?this:this.getImmediateChild(n).getChild(pt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(se(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new Me(e,n);let o,l;n.isEmpty()?(o=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(e,n),l=this.indexMap_.addToIndexes(i,this.children_));const f=o.isEmpty()?ba:this.priorityNode_;return new Se(o,f,l)}}updateChild(e,n){const i=je(e);if(i===null)return n;{se(je(e)!==".priority"||Zi(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(pt(e),n);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,o=0,l=!0;if(this.forEachChild(Bt,(f,p)=>{n[f]=p.val(e),i++,l&&Se.INTEGER_REGEXP_.test(f)?o=Math.max(o,Number(f)):l=!1}),!e&&l&&o<2*i){const f=[];for(const p in n)f[p]=n[p];return f}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+yy(this.getPriority().val())+":"),this.forEachChild(Bt,(n,i)=>{const o=i.hash();o!==""&&(e+=":"+n+":"+o)}),this.lazyHash_=e===""?"":$x(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const o=this.resolveIndex_(i);if(o){const l=o.getPredecessorKey(new Me(e,n));return l?l.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Me(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Me(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,Me.Wrap);let l=o.peek();for(;l!=null&&n.compare(l,e)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,Me.Wrap);let l=o.peek();for(;l!=null&&n.compare(l,e)>0;)o.getNext(),l=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Dl?-1:0}withIndex(e){if(e===Io||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Se(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Io||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(Bt),o=n.getIterator(Bt);let l=i.getNext(),f=o.getNext();for(;l&&f;){if(l.name!==f.name||!l.node.equals(f.node))return!1;l=i.getNext(),f=o.getNext()}return l===null&&f===null}else return!1;else return!1}}resolveIndex_(e){return e===Io?null:this.indexMap_.get(e.toString())}}Se.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class SI extends Se{constructor(){super(new zn(t1),Se.EMPTY_NODE,ri.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Se.EMPTY_NODE}isEmpty(){return!1}}const Dl=new SI;Object.defineProperties(Me,{MIN:{value:new Me(Fo,Se.EMPTY_NODE)},MAX:{value:new Me(Is,Dl)}});xy.__EMPTY_NODE=Se.EMPTY_NODE;tn.__childrenNodeConstructor=Se;yI(Dl);CI(Dl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=!0;function Kt(t,e=null){if(t===null)return Se.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),se(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new tn(n,Kt(e))}if(!(t instanceof Array)&&AI){const n=[];let i=!1;if(mn(t,(f,p)=>{if(f.substring(0,1)!=="."){const w=Kt(p);w.isEmpty()||(i=i||!w.getPriority().isEmpty(),n.push(new Me(f,w)))}}),n.length===0)return Se.EMPTY_NODE;const l=uu(n,xI,f=>f.name,t1);if(i){const f=uu(n,Bt.getCompare());return new Se(l,Kt(e),new ri({".priority":f},{".priority":Bt}))}else return new Se(l,Kt(e),ri.Default)}else{let n=Se.EMPTY_NODE;return mn(t,(i,o)=>{if(qr(t,i)&&i.substring(0,1)!=="."){const l=Kt(o);(l.isLeafNode()||!l.isEmpty())&&(n=n.updateImmediateChild(i,l))}}),n.updatePriority(Kt(e))}}vI(Kt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II extends ed{constructor(e){super(),this.indexPath_=e,se(!Be(e)&&je(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),o=this.extractChild(n.node),l=i.compareTo(o);return l===0?Fs(e.name,n.name):l}makePost(e,n){const i=Kt(e),o=Se.EMPTY_NODE.updateChild(this.indexPath_,i);return new Me(n,o)}maxPost(){const e=Se.EMPTY_NODE.updateChild(this.indexPath_,Dl);return new Me(Is,e)}toString(){return gl(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI extends ed{compare(e,n){const i=e.node.compareTo(n.node);return i===0?Fs(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Me.MIN}maxPost(){return Me.MAX}makePost(e,n){const i=Kt(e);return new Me(n,i)}toString(){return".value"}}const kI=new TI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(t){return{type:"value",snapshotNode:t}}function jo(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function pl(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ml(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function NI(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.index_=e}updateChild(e,n,i,o,l,f){se(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(n);return p.getChild(o).equals(i.getChild(o))&&p.isEmpty()===i.isEmpty()||(f!=null&&(i.isEmpty()?e.hasChild(n)?f.trackChildChange(pl(n,p)):se(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?f.trackChildChange(jo(n,i)):f.trackChildChange(ml(n,i,p))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Bt,(o,l)=>{n.hasChild(o)||i.trackChildChange(pl(o,l))}),n.isLeafNode()||n.forEachChild(Bt,(o,l)=>{if(e.hasChild(o)){const f=e.getImmediateChild(o);f.equals(l)||i.trackChildChange(ml(o,l,f))}else i.trackChildChange(jo(o,l))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Se.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e){this.indexedFilter_=new n1(e.getIndex()),this.index_=e.getIndex(),this.startPost_=wl.getStartPost_(e),this.endPost_=wl.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,o,l,f){return this.matches(new Me(n,i))||(i=Se.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,o,l,f)}updateFullNode(e,n,i){n.isLeafNode()&&(n=Se.EMPTY_NODE);let o=n.withIndex(this.index_);o=o.updatePriority(Se.EMPTY_NODE);const l=this;return n.forEachChild(Bt,(f,p)=>{l.matches(new Me(f,p))||(o=o.updateImmediateChild(f,Se.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new wl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,o,l,f){return this.rangedFilter_.matches(new Me(n,i))||(i=Se.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,o,l,f):this.fullLimitUpdateChild_(e,n,i,l,f)}updateFullNode(e,n,i){let o;if(n.isLeafNode()||n.isEmpty())o=Se.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){o=Se.EMPTY_NODE.withIndex(this.index_);let l;this.reverse_?l=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let f=0;for(;l.hasNext()&&f<this.limit_;){const p=l.getNext();if(this.withinDirectionalStart(p))if(this.withinDirectionalEnd(p))o=o.updateImmediateChild(p.name,p.node),f++;else break;else continue}}else{o=n.withIndex(this.index_),o=o.updatePriority(Se.EMPTY_NODE);let l;this.reverse_?l=o.getReverseIterator(this.index_):l=o.getIterator(this.index_);let f=0;for(;l.hasNext();){const p=l.getNext();f<this.limit_&&this.withinDirectionalStart(p)&&this.withinDirectionalEnd(p)?f++:o=o.updateImmediateChild(p.name,Se.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,o,l){let f;if(this.reverse_){const v=this.index_.getCompare();f=(A,R)=>v(R,A)}else f=this.index_.getCompare();const p=e;se(p.numChildren()===this.limit_,"");const w=new Me(n,i),m=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),E=this.rangedFilter_.matches(w);if(p.hasChild(n)){const v=p.getImmediateChild(n);let A=o.getChildAfterChild(this.index_,m,this.reverse_);for(;A!=null&&(A.name===n||p.hasChild(A.name));)A=o.getChildAfterChild(this.index_,A,this.reverse_);const R=A==null?1:f(A,w);if(E&&!i.isEmpty()&&R>=0)return l!=null&&l.trackChildChange(ml(n,i,v)),p.updateImmediateChild(n,i);{l!=null&&l.trackChildChange(pl(n,v));const B=p.updateImmediateChild(n,Se.EMPTY_NODE);return A!=null&&this.rangedFilter_.matches(A)?(l!=null&&l.trackChildChange(jo(A.name,A.node)),B.updateImmediateChild(A.name,A.node)):B}}else return i.isEmpty()?e:E&&f(m,w)>=0?(l!=null&&(l.trackChildChange(pl(m.name,m.node)),l.trackChildChange(jo(n,i))),p.updateImmediateChild(n,i).updateImmediateChild(m.name,Se.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Bt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return se(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return se(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Fo}hasEnd(){return this.endSet_}getIndexEndValue(){return se(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return se(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Is}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return se(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Bt}copy(){const e=new r1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function OI(t){return t.loadsAllData()?new n1(t.getIndex()):t.hasLimit()?new RI(t):new wl(t)}function am(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Bt?n="$priority":t.index_===kI?n="$value":t.index_===Io?n="$key":(se(t.index_ instanceof II,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=qt(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=qt(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+qt(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=qt(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+qt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function lm(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Bt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends hy{constructor(e,n,i,o){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=o,this.log_=Ol("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(se(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,o){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const f=du.getListenId_(e,i),p={};this.listens_[f]=p;const w=am(e._queryParams);this.restRequest_(l+".json",w,(m,E)=>{let v=E;if(m===404&&(v=null,m=null),m===null&&this.onDataUpdate_(l,v,!1,i),Lo(this.listens_,f)===p){let A;m?m===401?A="permission_denied":A="rest_error:"+m:A="ok",o(A,null)}})}unlisten(e,n){const i=du.getListenId_(e,n);delete this.listens_[i]}get(e){const n=am(e._queryParams),i=e._path.toString(),o=new kl;return this.restRequest_(i+".json",n,(l,f)=>{let p=f;l===404&&(p=null,l=null),l===null?(this.onDataUpdate_(i,p,!1,null),o.resolve(p)):o.reject(new Error(p))}),o.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,l])=>{o&&o.accessToken&&(n.auth=o.accessToken),l&&l.token&&(n.ac=l.token);const f=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+sS(n);this.log_("Sending REST request for "+f);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(i&&p.readyState===4){this.log_("REST Response for "+f+" received. status:",p.status,"response:",p.responseText);let w=null;if(p.status>=200&&p.status<300){try{w=dl(p.responseText)}catch{kn("Failed to parse JSON response for "+f+": "+p.responseText)}i(null,w)}else p.status!==401&&p.status!==404&&kn("Got unsuccessful REST response for "+f+" Status: "+p.status),i(p.status);i=null}},p.open("GET",f,!0),p.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.rootNode_=Se.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(){return{value:null,children:new Map}}function by(t,e,n){if(Be(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=je(e);t.children.has(i)||t.children.set(i,fu());const o=t.children.get(i);e=pt(e),by(o,e,n)}}function Dh(t,e,n){t.value!==null?n(e,t.value):PI(t,(i,o)=>{const l=new lt(e.toString()+"/"+i);Dh(o,l,n)})}function PI(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&mn(this.last_,(i,o)=>{n[i]=n[i]-o}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm=10*1e3,BI=30*1e3,LI=5*60*1e3;class FI{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new MI(e);const i=cm+(BI-cm)*Math.random();za(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;mn(e,(o,l)=>{l>0&&qr(this.statsToReport_,o)&&(n[o]=l,i=!0)}),i&&this.server_.reportStats(n),za(this.reportStats_.bind(this),Math.floor(Math.random()*2*LI))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Nr||(Nr={}));function i1(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function s1(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function o1(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=Nr.ACK_USER_WRITE,this.source=i1()}operationForChild(e){if(Be(this.path)){if(this.affectedTree.value!=null)return se(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new lt(e));return new hu(Ze(),n,this.revert)}}else return se(je(this.path)===e,"operationForChild called for unrelated child."),new hu(pt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n){this.source=e,this.path=n,this.type=Nr.LISTEN_COMPLETE}operationForChild(e){return Be(this.path)?new xl(this.source,Ze()):new xl(this.source,pt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=Nr.OVERWRITE}operationForChild(e){return Be(this.path)?new Ts(this.source,Ze(),this.snap.getImmediateChild(e)):new Ts(this.source,pt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=Nr.MERGE}operationForChild(e){if(Be(this.path)){const n=this.children.subtree(new lt(e));return n.isEmpty()?null:n.value?new Ts(this.source,Ze(),n.value):new Uo(this.source,Ze(),n)}else return se(je(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Uo(this.source,pt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Be(e))return this.isFullyInitialized()&&!this.filtered_;const n=je(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function UI(t,e,n,i){const o=[],l=[];return e.forEach(f=>{f.type==="child_changed"&&t.index_.indexedValueChanged(f.oldSnap,f.snapshotNode)&&l.push(NI(f.childName,f.snapshotNode))}),Sa(t,o,"child_removed",e,i,n),Sa(t,o,"child_added",e,i,n),Sa(t,o,"child_moved",l,i,n),Sa(t,o,"child_changed",e,i,n),Sa(t,o,"value",e,i,n),o}function Sa(t,e,n,i,o,l){const f=i.filter(p=>p.type===n);f.sort((p,w)=>WI(t,p,w)),f.forEach(p=>{const w=zI(t,p,l);o.forEach(m=>{m.respondsTo(p.type)&&e.push(m.createEvent(w,t.query_))})})}function zI(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function WI(t,e,n){if(e.childName==null||n.childName==null)throw Ko("Should only compare child_ events.");const i=new Me(e.childName,e.snapshotNode),o=new Me(n.childName,n.snapshotNode);return t.index_.compare(i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(t,e){return{eventCache:t,serverCache:e}}function Wa(t,e,n,i){return td(new Qi(e,n,i),t.serverCache)}function Sy(t,e,n,i){return td(t.eventCache,new Qi(e,n,i))}function gu(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ks(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mf;const VI=()=>(mf||(mf=new zn(IA)),mf);class ht{constructor(e,n=VI()){this.value=e,this.children=n}static fromObject(e){let n=new ht(null);return mn(e,(i,o)=>{n=n.set(new lt(i),o)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ze(),value:this.value};if(Be(e))return null;{const i=je(e),o=this.children.get(i);if(o!==null){const l=o.findRootMostMatchingPathAndValue(pt(e),n);return l!=null?{path:Mt(new lt(i),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Be(e))return this;{const n=je(e),i=this.children.get(n);return i!==null?i.subtree(pt(e)):new ht(null)}}set(e,n){if(Be(e))return new ht(n,this.children);{const i=je(e),l=(this.children.get(i)||new ht(null)).set(pt(e),n),f=this.children.insert(i,l);return new ht(this.value,f)}}remove(e){if(Be(e))return this.children.isEmpty()?new ht(null):new ht(null,this.children);{const n=je(e),i=this.children.get(n);if(i){const o=i.remove(pt(e));let l;return o.isEmpty()?l=this.children.remove(n):l=this.children.insert(n,o),this.value===null&&l.isEmpty()?new ht(null):new ht(this.value,l)}else return this}}get(e){if(Be(e))return this.value;{const n=je(e),i=this.children.get(n);return i?i.get(pt(e)):null}}setTree(e,n){if(Be(e))return n;{const i=je(e),l=(this.children.get(i)||new ht(null)).setTree(pt(e),n);let f;return l.isEmpty()?f=this.children.remove(i):f=this.children.insert(i,l),new ht(this.value,f)}}fold(e){return this.fold_(Ze(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((o,l)=>{i[o]=l.fold_(Mt(e,o),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,Ze(),n)}findOnPath_(e,n,i){const o=this.value?i(n,this.value):!1;if(o)return o;if(Be(e))return null;{const l=je(e),f=this.children.get(l);return f?f.findOnPath_(pt(e),Mt(n,l),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ze(),n)}foreachOnPath_(e,n,i){if(Be(e))return this;{this.value&&i(n,this.value);const o=je(e),l=this.children.get(o);return l?l.foreachOnPath_(pt(e),Mt(n,o),i):new ht(null)}}foreach(e){this.foreach_(Ze(),e)}foreach_(e,n){this.children.inorderTraversal((i,o)=>{o.foreach_(Mt(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this.writeTree_=e}static empty(){return new Dr(new ht(null))}}function Va(t,e,n){if(Be(e))return new Dr(new ht(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const o=i.path;let l=i.value;const f=In(o,e);return l=l.updateChild(f,n),new Dr(t.writeTree_.set(o,l))}else{const o=new ht(n),l=t.writeTree_.setTree(e,o);return new Dr(l)}}}function Ph(t,e,n){let i=t;return mn(n,(o,l)=>{i=Va(i,Mt(e,o),l)}),i}function um(t,e){if(Be(e))return Dr.empty();{const n=t.writeTree_.setTree(e,new ht(null));return new Dr(n)}}function Mh(t,e){return js(t,e)!=null}function js(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(In(n.path,e)):null}function dm(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Bt,(i,o)=>{e.push(new Me(i,o))}):t.writeTree_.children.inorderTraversal((i,o)=>{o.value!=null&&e.push(new Me(i,o.value))}),e}function Xi(t,e){if(Be(e))return t;{const n=js(t,e);return n!=null?new Dr(new ht(n)):new Dr(t.writeTree_.subtree(e))}}function Bh(t){return t.writeTree_.isEmpty()}function zo(t,e){return Ay(Ze(),t.writeTree_,e)}function Ay(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((o,l)=>{o===".priority"?(se(l.value!==null,"Priority writes must always be leaf nodes"),i=l.value):n=Ay(Mt(t,o),l,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(Mt(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(t,e){return Ny(e,t)}function HI(t,e,n,i,o){se(i>t.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:o}),o&&(t.visibleWrites=Va(t.visibleWrites,e,n)),t.lastWriteId=i}function GI(t,e,n,i){se(i>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:i,visible:!0}),t.visibleWrites=Ph(t.visibleWrites,e,n),t.lastWriteId=i}function XI(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function YI(t,e){const n=t.allWrites.findIndex(p=>p.writeId===e);se(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let o=i.visible,l=!1,f=t.allWrites.length-1;for(;o&&f>=0;){const p=t.allWrites[f];p.visible&&(f>=n&&$I(p,i.path)?o=!1:pr(i.path,p.path)&&(l=!0)),f--}if(o){if(l)return KI(t),!0;if(i.snap)t.visibleWrites=um(t.visibleWrites,i.path);else{const p=i.children;mn(p,w=>{t.visibleWrites=um(t.visibleWrites,Mt(i.path,w))})}return!0}else return!1}function $I(t,e){if(t.snap)return pr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&pr(Mt(t.path,n),e))return!0;return!1}function KI(t){t.visibleWrites=Iy(t.allWrites,qI,Ze()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function qI(t){return t.visible}function Iy(t,e,n){let i=Dr.empty();for(let o=0;o<t.length;++o){const l=t[o];if(e(l)){const f=l.path;let p;if(l.snap)pr(n,f)?(p=In(n,f),i=Va(i,p,l.snap)):pr(f,n)&&(p=In(f,n),i=Va(i,Ze(),l.snap.getChild(p)));else if(l.children){if(pr(n,f))p=In(n,f),i=Ph(i,p,l.children);else if(pr(f,n))if(p=In(f,n),Be(p))i=Ph(i,Ze(),l.children);else{const w=Lo(l.children,je(p));if(w){const m=w.getChild(pt(p));i=Va(i,Ze(),m)}}}else throw Ko("WriteRecord should have .snap or .children")}}return i}function Ty(t,e,n,i,o){if(!i&&!o){const l=js(t.visibleWrites,e);if(l!=null)return l;{const f=Xi(t.visibleWrites,e);if(Bh(f))return n;if(n==null&&!Mh(f,Ze()))return null;{const p=n||Se.EMPTY_NODE;return zo(f,p)}}}else{const l=Xi(t.visibleWrites,e);if(!o&&Bh(l))return n;if(!o&&n==null&&!Mh(l,Ze()))return null;{const f=function(m){return(m.visible||o)&&(!i||!~i.indexOf(m.writeId))&&(pr(m.path,e)||pr(e,m.path))},p=Iy(t.allWrites,f,e),w=n||Se.EMPTY_NODE;return zo(p,w)}}}function ZI(t,e,n){let i=Se.EMPTY_NODE;const o=js(t.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(Bt,(l,f)=>{i=i.updateImmediateChild(l,f)}),i;if(n){const l=Xi(t.visibleWrites,e);return n.forEachChild(Bt,(f,p)=>{const w=zo(Xi(l,new lt(f)),p);i=i.updateImmediateChild(f,w)}),dm(l).forEach(f=>{i=i.updateImmediateChild(f.name,f.node)}),i}else{const l=Xi(t.visibleWrites,e);return dm(l).forEach(f=>{i=i.updateImmediateChild(f.name,f.node)}),i}}function QI(t,e,n,i,o){se(i||o,"Either existingEventSnap or existingServerSnap must exist");const l=Mt(e,n);if(Mh(t.visibleWrites,l))return null;{const f=Xi(t.visibleWrites,l);return Bh(f)?o.getChild(n):zo(f,o.getChild(n))}}function JI(t,e,n,i){const o=Mt(e,n),l=js(t.visibleWrites,o);if(l!=null)return l;if(i.isCompleteForChild(n)){const f=Xi(t.visibleWrites,o);return zo(f,i.getNode().getImmediateChild(n))}else return null}function e8(t,e){return js(t.visibleWrites,e)}function t8(t,e,n,i,o,l,f){let p;const w=Xi(t.visibleWrites,e),m=js(w,Ze());if(m!=null)p=m;else if(n!=null)p=zo(w,n);else return[];if(p=p.withIndex(f),!p.isEmpty()&&!p.isLeafNode()){const E=[],v=f.getCompare(),A=l?p.getReverseIteratorFrom(i,f):p.getIteratorFrom(i,f);let R=A.getNext();for(;R&&E.length<o;)v(R,i)!==0&&E.push(R),R=A.getNext();return E}else return[]}function n8(){return{visibleWrites:Dr.empty(),allWrites:[],lastWriteId:-1}}function pu(t,e,n,i){return Ty(t.writeTree,t.treePath,e,n,i)}function a1(t,e){return ZI(t.writeTree,t.treePath,e)}function fm(t,e,n,i){return QI(t.writeTree,t.treePath,e,n,i)}function mu(t,e){return e8(t.writeTree,Mt(t.treePath,e))}function r8(t,e,n,i,o,l){return t8(t.writeTree,t.treePath,e,n,i,o,l)}function l1(t,e,n){return JI(t.writeTree,t.treePath,e,n)}function ky(t,e){return Ny(Mt(t.treePath,e),t.writeTree)}function Ny(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;se(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),se(i!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(i);if(o){const l=o.type;if(n==="child_added"&&l==="child_removed")this.changeMap.set(i,ml(i,e.snapshotNode,o.snapshotNode));else if(n==="child_removed"&&l==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&l==="child_changed")this.changeMap.set(i,pl(i,o.oldSnap));else if(n==="child_changed"&&l==="child_added")this.changeMap.set(i,jo(i,e.snapshotNode));else if(n==="child_changed"&&l==="child_changed")this.changeMap.set(i,ml(i,e.snapshotNode,o.oldSnap));else throw Ko("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const Ry=new s8;class c1{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Qi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return l1(this.writes_,e,i)}}getChildAfterChild(e,n,i){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ks(this.viewCache_),l=r8(this.writes_,o,n,1,i,e);return l.length===0?null:l[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o8(t){return{filter:t}}function a8(t,e){se(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),se(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function l8(t,e,n,i,o){const l=new i8;let f,p;if(n.type===Nr.OVERWRITE){const m=n;m.source.fromUser?f=Lh(t,e,m.path,m.snap,i,o,l):(se(m.source.fromServer,"Unknown source."),p=m.source.tagged||e.serverCache.isFiltered()&&!Be(m.path),f=wu(t,e,m.path,m.snap,i,o,p,l))}else if(n.type===Nr.MERGE){const m=n;m.source.fromUser?f=u8(t,e,m.path,m.children,i,o,l):(se(m.source.fromServer,"Unknown source."),p=m.source.tagged||e.serverCache.isFiltered(),f=Fh(t,e,m.path,m.children,i,o,p,l))}else if(n.type===Nr.ACK_USER_WRITE){const m=n;m.revert?f=h8(t,e,m.path,i,o,l):f=d8(t,e,m.path,m.affectedTree,i,o,l)}else if(n.type===Nr.LISTEN_COMPLETE)f=f8(t,e,n.path,i,l);else throw Ko("Unknown operation type: "+n.type);const w=l.getChanges();return c8(e,f,w),{viewCache:f,changes:w}}function c8(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const o=i.getNode().isLeafNode()||i.getNode().isEmpty(),l=gu(t);(n.length>0||!t.eventCache.isFullyInitialized()||o&&!i.getNode().equals(l)||!i.getNode().getPriority().equals(l.getPriority()))&&n.push(Ey(gu(e)))}}function Oy(t,e,n,i,o,l){const f=e.eventCache;if(mu(i,n)!=null)return e;{let p,w;if(Be(n))if(se(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=ks(e),E=m instanceof Se?m:Se.EMPTY_NODE,v=a1(i,E);p=t.filter.updateFullNode(e.eventCache.getNode(),v,l)}else{const m=pu(i,ks(e));p=t.filter.updateFullNode(e.eventCache.getNode(),m,l)}else{const m=je(n);if(m===".priority"){se(Zi(n)===1,"Can't have a priority with additional path components");const E=f.getNode();w=e.serverCache.getNode();const v=fm(i,n,E,w);v!=null?p=t.filter.updatePriority(E,v):p=f.getNode()}else{const E=pt(n);let v;if(f.isCompleteForChild(m)){w=e.serverCache.getNode();const A=fm(i,n,f.getNode(),w);A!=null?v=f.getNode().getImmediateChild(m).updateChild(E,A):v=f.getNode().getImmediateChild(m)}else v=l1(i,m,e.serverCache);v!=null?p=t.filter.updateChild(f.getNode(),m,v,E,o,l):p=f.getNode()}}return Wa(e,p,f.isFullyInitialized()||Be(n),t.filter.filtersNodes())}}function wu(t,e,n,i,o,l,f,p){const w=e.serverCache;let m;const E=f?t.filter:t.filter.getIndexedFilter();if(Be(n))m=E.updateFullNode(w.getNode(),i,null);else if(E.filtersNodes()&&!w.isFiltered()){const R=w.getNode().updateChild(n,i);m=E.updateFullNode(w.getNode(),R,null)}else{const R=je(n);if(!w.isCompleteForPath(n)&&Zi(n)>1)return e;const M=pt(n),K=w.getNode().getImmediateChild(R).updateChild(M,i);R===".priority"?m=E.updatePriority(w.getNode(),K):m=E.updateChild(w.getNode(),R,K,M,Ry,null)}const v=Sy(e,m,w.isFullyInitialized()||Be(n),E.filtersNodes()),A=new c1(o,v,l);return Oy(t,v,n,o,A,p)}function Lh(t,e,n,i,o,l,f){const p=e.eventCache;let w,m;const E=new c1(o,e,l);if(Be(n))m=t.filter.updateFullNode(e.eventCache.getNode(),i,f),w=Wa(e,m,!0,t.filter.filtersNodes());else{const v=je(n);if(v===".priority")m=t.filter.updatePriority(e.eventCache.getNode(),i),w=Wa(e,m,p.isFullyInitialized(),p.isFiltered());else{const A=pt(n),R=p.getNode().getImmediateChild(v);let M;if(Be(A))M=i;else{const B=E.getCompleteChild(v);B!=null?J0(A)===".priority"&&B.getChild(py(A)).isEmpty()?M=B:M=B.updateChild(A,i):M=Se.EMPTY_NODE}if(R.equals(M))w=e;else{const B=t.filter.updateChild(p.getNode(),v,M,A,E,f);w=Wa(e,B,p.isFullyInitialized(),t.filter.filtersNodes())}}}return w}function hm(t,e){return t.eventCache.isCompleteForChild(e)}function u8(t,e,n,i,o,l,f){let p=e;return i.foreach((w,m)=>{const E=Mt(n,w);hm(e,je(E))&&(p=Lh(t,p,E,m,o,l,f))}),i.foreach((w,m)=>{const E=Mt(n,w);hm(e,je(E))||(p=Lh(t,p,E,m,o,l,f))}),p}function gm(t,e,n){return n.foreach((i,o)=>{e=e.updateChild(i,o)}),e}function Fh(t,e,n,i,o,l,f,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w=e,m;Be(n)?m=i:m=new ht(null).setTree(n,i);const E=e.serverCache.getNode();return m.children.inorderTraversal((v,A)=>{if(E.hasChild(v)){const R=e.serverCache.getNode().getImmediateChild(v),M=gm(t,R,A);w=wu(t,w,new lt(v),M,o,l,f,p)}}),m.children.inorderTraversal((v,A)=>{const R=!e.serverCache.isCompleteForChild(v)&&A.value===null;if(!E.hasChild(v)&&!R){const M=e.serverCache.getNode().getImmediateChild(v),B=gm(t,M,A);w=wu(t,w,new lt(v),B,o,l,f,p)}}),w}function d8(t,e,n,i,o,l,f){if(mu(o,n)!=null)return e;const p=e.serverCache.isFiltered(),w=e.serverCache;if(i.value!=null){if(Be(n)&&w.isFullyInitialized()||w.isCompleteForPath(n))return wu(t,e,n,w.getNode().getChild(n),o,l,p,f);if(Be(n)){let m=new ht(null);return w.getNode().forEachChild(Io,(E,v)=>{m=m.set(new lt(E),v)}),Fh(t,e,n,m,o,l,p,f)}else return e}else{let m=new ht(null);return i.foreach((E,v)=>{const A=Mt(n,E);w.isCompleteForPath(A)&&(m=m.set(E,w.getNode().getChild(A)))}),Fh(t,e,n,m,o,l,p,f)}}function f8(t,e,n,i,o){const l=e.serverCache,f=Sy(e,l.getNode(),l.isFullyInitialized()||Be(n),l.isFiltered());return Oy(t,f,n,i,Ry,o)}function h8(t,e,n,i,o,l){let f;if(mu(i,n)!=null)return e;{const p=new c1(i,e,o),w=e.eventCache.getNode();let m;if(Be(n)||je(n)===".priority"){let E;if(e.serverCache.isFullyInitialized())E=pu(i,ks(e));else{const v=e.serverCache.getNode();se(v instanceof Se,"serverChildren would be complete if leaf node"),E=a1(i,v)}E=E,m=t.filter.updateFullNode(w,E,l)}else{const E=je(n);let v=l1(i,E,e.serverCache);v==null&&e.serverCache.isCompleteForChild(E)&&(v=w.getImmediateChild(E)),v!=null?m=t.filter.updateChild(w,E,v,pt(n),p,l):e.eventCache.getNode().hasChild(E)?m=t.filter.updateChild(w,E,Se.EMPTY_NODE,pt(n),p,l):m=w,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(f=pu(i,ks(e)),f.isLeafNode()&&(m=t.filter.updateFullNode(m,f,l)))}return f=e.serverCache.isFullyInitialized()||mu(i,Ze())!=null,Wa(e,m,f,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,o=new n1(i.getIndex()),l=OI(i);this.processor_=o8(l);const f=n.serverCache,p=n.eventCache,w=o.updateFullNode(Se.EMPTY_NODE,f.getNode(),null),m=l.updateFullNode(Se.EMPTY_NODE,p.getNode(),null),E=new Qi(w,f.isFullyInitialized(),o.filtersNodes()),v=new Qi(m,p.isFullyInitialized(),l.filtersNodes());this.viewCache_=td(v,E),this.eventGenerator_=new jI(this.query_)}get query(){return this.query_}}function p8(t){return t.viewCache_.serverCache.getNode()}function m8(t){return gu(t.viewCache_)}function w8(t,e){const n=ks(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Be(e)&&!n.getImmediateChild(je(e)).isEmpty())?n.getChild(e):null}function pm(t){return t.eventRegistrations_.length===0}function x8(t,e){t.eventRegistrations_.push(e)}function mm(t,e,n){const i=[];if(n){se(e==null,"A cancel should cancel all event registrations.");const o=t.query._path;t.eventRegistrations_.forEach(l=>{const f=l.createCancelEvent(n,o);f&&i.push(f)})}if(e){let o=[];for(let l=0;l<t.eventRegistrations_.length;++l){const f=t.eventRegistrations_[l];if(!f.matches(e))o.push(f);else if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(l+1));break}}t.eventRegistrations_=o}else t.eventRegistrations_=[];return i}function wm(t,e,n,i){e.type===Nr.MERGE&&e.source.queryId!==null&&(se(ks(t.viewCache_),"We should always have a full cache before handling merges"),se(gu(t.viewCache_),"Missing event cache, even though we have a server cache"));const o=t.viewCache_,l=l8(t.processor_,o,e,n,i);return a8(t.processor_,l.viewCache),se(l.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=l.viewCache,Dy(t,l.changes,l.viewCache.eventCache.getNode(),null)}function y8(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Bt,(l,f)=>{i.push(jo(l,f))}),n.isFullyInitialized()&&i.push(Ey(n.getNode())),Dy(t,i,n.getNode(),e)}function Dy(t,e,n,i){const o=i?[i]:t.eventRegistrations_;return UI(t.eventGenerator_,e,n,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xu;class Py{constructor(){this.views=new Map}}function v8(t){se(!xu,"__referenceConstructor has already been defined"),xu=t}function C8(){return se(xu,"Reference.ts has not been loaded"),xu}function _8(t){return t.views.size===0}function u1(t,e,n,i){const o=e.source.queryId;if(o!==null){const l=t.views.get(o);return se(l!=null,"SyncTree gave us an op for an invalid query."),wm(l,e,n,i)}else{let l=[];for(const f of t.views.values())l=l.concat(wm(f,e,n,i));return l}}function My(t,e,n,i,o){const l=e._queryIdentifier,f=t.views.get(l);if(!f){let p=pu(n,o?i:null),w=!1;p?w=!0:i instanceof Se?(p=a1(n,i),w=!1):(p=Se.EMPTY_NODE,w=!1);const m=td(new Qi(p,w,!1),new Qi(i,o,!1));return new g8(e,m)}return f}function E8(t,e,n,i,o,l){const f=My(t,e,i,o,l);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,f),x8(f,n),y8(f,n)}function b8(t,e,n,i){const o=e._queryIdentifier,l=[];let f=[];const p=Ji(t);if(o==="default")for(const[w,m]of t.views.entries())f=f.concat(mm(m,n,i)),pm(m)&&(t.views.delete(w),m.query._queryParams.loadsAllData()||l.push(m.query));else{const w=t.views.get(o);w&&(f=f.concat(mm(w,n,i)),pm(w)&&(t.views.delete(o),w.query._queryParams.loadsAllData()||l.push(w.query)))}return p&&!Ji(t)&&l.push(new(C8())(e._repo,e._path)),{removed:l,events:f}}function By(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Yi(t,e){let n=null;for(const i of t.views.values())n=n||w8(i,e);return n}function Ly(t,e){if(e._queryParams.loadsAllData())return rd(t);{const i=e._queryIdentifier;return t.views.get(i)}}function Fy(t,e){return Ly(t,e)!=null}function Ji(t){return rd(t)!=null}function rd(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yu;function S8(t){se(!yu,"__referenceConstructor has already been defined"),yu=t}function A8(){return se(yu,"Reference.ts has not been loaded"),yu}let I8=1;class xm{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ht(null),this.pendingWriteTree_=n8(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function jy(t,e,n,i,o){return HI(t.pendingWriteTree_,e,n,i,o),o?Zo(t,new Ts(i1(),e,n)):[]}function T8(t,e,n,i){GI(t.pendingWriteTree_,e,n,i);const o=ht.fromObject(n);return Zo(t,new Uo(i1(),e,o))}function Oi(t,e,n=!1){const i=XI(t.pendingWriteTree_,e);if(YI(t.pendingWriteTree_,e)){let l=new ht(null);return i.snap!=null?l=l.set(Ze(),!0):mn(i.children,f=>{l=l.set(new lt(f),!0)}),Zo(t,new hu(i.path,l,n))}else return[]}function Pl(t,e,n){return Zo(t,new Ts(s1(),e,n))}function k8(t,e,n){const i=ht.fromObject(n);return Zo(t,new Uo(s1(),e,i))}function N8(t,e){return Zo(t,new xl(s1(),e))}function R8(t,e,n){const i=f1(t,n);if(i){const o=h1(i),l=o.path,f=o.queryId,p=In(l,e),w=new xl(o1(f),p);return g1(t,l,w)}else return[]}function Uy(t,e,n,i,o=!1){const l=e._path,f=t.syncPointTree_.get(l);let p=[];if(f&&(e._queryIdentifier==="default"||Fy(f,e))){const w=b8(f,e,n,i);_8(f)&&(t.syncPointTree_=t.syncPointTree_.remove(l));const m=w.removed;if(p=w.events,!o){const E=m.findIndex(A=>A._queryParams.loadsAllData())!==-1,v=t.syncPointTree_.findOnPath(l,(A,R)=>Ji(R));if(E&&!v){const A=t.syncPointTree_.subtree(l);if(!A.isEmpty()){const R=M8(A);for(let M=0;M<R.length;++M){const B=R[M],K=B.query,O=Hy(t,B);t.listenProvider_.startListening(Ha(K),yl(t,K),O.hashFn,O.onComplete)}}}!v&&m.length>0&&!i&&(E?t.listenProvider_.stopListening(Ha(e),null):m.forEach(A=>{const R=t.queryToTagMap.get(id(A));t.listenProvider_.stopListening(Ha(A),R)}))}B8(t,m)}return p}function zy(t,e,n,i){const o=f1(t,i);if(o!=null){const l=h1(o),f=l.path,p=l.queryId,w=In(f,e),m=new Ts(o1(p),w,n);return g1(t,f,m)}else return[]}function O8(t,e,n,i){const o=f1(t,i);if(o){const l=h1(o),f=l.path,p=l.queryId,w=In(f,e),m=ht.fromObject(n),E=new Uo(o1(p),w,m);return g1(t,f,E)}else return[]}function D8(t,e,n,i=!1){const o=e._path;let l=null,f=!1;t.syncPointTree_.foreachOnPath(o,(A,R)=>{const M=In(A,o);l=l||Yi(R,M),f=f||Ji(R)});let p=t.syncPointTree_.get(o);p?(f=f||Ji(p),l=l||Yi(p,Ze())):(p=new Py,t.syncPointTree_=t.syncPointTree_.set(o,p));let w;l!=null?w=!0:(w=!1,l=Se.EMPTY_NODE,t.syncPointTree_.subtree(o).foreachChild((R,M)=>{const B=Yi(M,Ze());B&&(l=l.updateImmediateChild(R,B))}));const m=Fy(p,e);if(!m&&!e._queryParams.loadsAllData()){const A=id(e);se(!t.queryToTagMap.has(A),"View does not exist, but we have a tag");const R=L8();t.queryToTagMap.set(A,R),t.tagToQueryMap.set(R,A)}const E=nd(t.pendingWriteTree_,o);let v=E8(p,e,n,E,l,w);if(!m&&!f&&!i){const A=Ly(p,e);v=v.concat(F8(t,e,A))}return v}function d1(t,e,n){const o=t.pendingWriteTree_,l=t.syncPointTree_.findOnPath(e,(f,p)=>{const w=In(f,e),m=Yi(p,w);if(m)return m});return Ty(o,e,l,n,!0)}function P8(t,e){const n=e._path;let i=null;t.syncPointTree_.foreachOnPath(n,(m,E)=>{const v=In(m,n);i=i||Yi(E,v)});let o=t.syncPointTree_.get(n);o?i=i||Yi(o,Ze()):(o=new Py,t.syncPointTree_=t.syncPointTree_.set(n,o));const l=i!=null,f=l?new Qi(i,!0,!1):null,p=nd(t.pendingWriteTree_,e._path),w=My(o,e,p,l?f.getNode():Se.EMPTY_NODE,l);return m8(w)}function Zo(t,e){return Wy(e,t.syncPointTree_,null,nd(t.pendingWriteTree_,Ze()))}function Wy(t,e,n,i){if(Be(t.path))return Vy(t,e,n,i);{const o=e.get(Ze());n==null&&o!=null&&(n=Yi(o,Ze()));let l=[];const f=je(t.path),p=t.operationForChild(f),w=e.children.get(f);if(w&&p){const m=n?n.getImmediateChild(f):null,E=ky(i,f);l=l.concat(Wy(p,w,m,E))}return o&&(l=l.concat(u1(o,t,i,n))),l}}function Vy(t,e,n,i){const o=e.get(Ze());n==null&&o!=null&&(n=Yi(o,Ze()));let l=[];return e.children.inorderTraversal((f,p)=>{const w=n?n.getImmediateChild(f):null,m=ky(i,f),E=t.operationForChild(f);E&&(l=l.concat(Vy(E,p,w,m)))}),o&&(l=l.concat(u1(o,t,i,n))),l}function Hy(t,e){const n=e.query,i=yl(t,n);return{hashFn:()=>(p8(e)||Se.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return i?R8(t,n._path,i):N8(t,n._path);{const l=NA(o,n);return Uy(t,n,null,l)}}}}function yl(t,e){const n=id(e);return t.queryToTagMap.get(n)}function id(t){return t._path.toString()+"$"+t._queryIdentifier}function f1(t,e){return t.tagToQueryMap.get(e)}function h1(t){const e=t.indexOf("$");return se(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new lt(t.substr(0,e))}}function g1(t,e,n){const i=t.syncPointTree_.get(e);se(i,"Missing sync point for query tag that we're tracking");const o=nd(t.pendingWriteTree_,e);return u1(i,n,o,null)}function M8(t){return t.fold((e,n,i)=>{if(n&&Ji(n))return[rd(n)];{let o=[];return n&&(o=By(n)),mn(i,(l,f)=>{o=o.concat(f)}),o}})}function Ha(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(A8())(t._repo,t._path):t}function B8(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const o=id(i),l=t.queryToTagMap.get(o);t.queryToTagMap.delete(o),t.tagToQueryMap.delete(l)}}}function L8(){return I8++}function F8(t,e,n){const i=e._path,o=yl(t,e),l=Hy(t,n),f=t.listenProvider_.startListening(Ha(e),o,l.hashFn,l.onComplete),p=t.syncPointTree_.subtree(i);if(o)se(!Ji(p.value),"If we're adding a query, it shouldn't be shadowed");else{const w=p.fold((m,E,v)=>{if(!Be(m)&&E&&Ji(E))return[rd(E).query];{let A=[];return E&&(A=A.concat(By(E).map(R=>R.query))),mn(v,(R,M)=>{A=A.concat(M)}),A}});for(let m=0;m<w.length;++m){const E=w[m];t.listenProvider_.stopListening(Ha(E),yl(t,E))}}return f}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new p1(n)}node(){return this.node_}}class m1{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Mt(this.path_,e);return new m1(this.syncTree_,n)}node(){return d1(this.syncTree_,this.path_)}}const j8=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},ym=function(t,e,n){if(!t||typeof t!="object")return t;if(se(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return U8(t[".sv"],e,n);if(typeof t[".sv"]=="object")return z8(t[".sv"],e);se(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},U8=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:se(!1,"Unexpected server value: "+t)}},z8=function(t,e,n){t.hasOwnProperty("increment")||se(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&se(!1,"Unexpected increment value: "+i);const o=e.node();if(se(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return i;const f=o.getValue();return typeof f!="number"?i:f+i},Gy=function(t,e,n,i){return w1(e,new m1(n,t),i)},Xy=function(t,e,n){return w1(t,new p1(e),n)};function w1(t,e,n){const i=t.getPriority().val(),o=ym(i,e.getImmediateChild(".priority"),n);let l;if(t.isLeafNode()){const f=t,p=ym(f.getValue(),e,n);return p!==f.getValue()||o!==f.getPriority().val()?new tn(p,Kt(o)):t}else{const f=t;return l=f,o!==f.getPriority().val()&&(l=l.updatePriority(new tn(o))),f.forEachChild(Bt,(p,w)=>{const m=w1(w,e.getImmediateChild(p),n);m!==w&&(l=l.updateImmediateChild(p,m))}),l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function y1(t,e){let n=e instanceof lt?e:new lt(e),i=t,o=je(n);for(;o!==null;){const l=Lo(i.node.children,o)||{children:{},childCount:0};i=new x1(o,i,l),n=pt(n),o=je(n)}return i}function Qo(t){return t.node.value}function Yy(t,e){t.node.value=e,jh(t)}function $y(t){return t.node.childCount>0}function W8(t){return Qo(t)===void 0&&!$y(t)}function sd(t,e){mn(t.node.children,(n,i)=>{e(new x1(n,t,i))})}function Ky(t,e,n,i){n&&e(t),sd(t,o=>{Ky(o,e,!0)})}function V8(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Ml(t){return new lt(t.parent===null?t.name:Ml(t.parent)+"/"+t.name)}function jh(t){t.parent!==null&&H8(t.parent,t.name,t)}function H8(t,e,n){const i=W8(n),o=qr(t.node.children,e);i&&o?(delete t.node.children[e],t.node.childCount--,jh(t)):!i&&!o&&(t.node.children[e]=n.node,t.node.childCount++,jh(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8=/[\[\].#$\/\u0000-\u001F\u007F]/,X8=/[\[\].#$\u0000-\u001F\u007F]/,wf=10*1024*1024,v1=function(t){return typeof t=="string"&&t.length!==0&&!G8.test(t)},qy=function(t){return typeof t=="string"&&t.length!==0&&!X8.test(t)},Y8=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),qy(t)},$8=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!$0(t)||t&&typeof t=="object"&&qr(t,".sv")},Zy=function(t,e,n,i){i&&e===void 0||od(Qu(t,"value"),e,n)},od=function(t,e,n){const i=n instanceof lt?new uI(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+hs(i));if(typeof e=="function")throw new Error(t+"contains a function "+hs(i)+" with contents = "+e.toString());if($0(e))throw new Error(t+"contains "+e.toString()+" "+hs(i));if(typeof e=="string"&&e.length>wf/3&&Ju(e)>wf)throw new Error(t+"contains a string greater than "+wf+" utf8 bytes "+hs(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,l=!1;if(mn(e,(f,p)=>{if(f===".value")o=!0;else if(f!==".priority"&&f!==".sv"&&(l=!0,!v1(f)))throw new Error(t+" contains an invalid key ("+f+") "+hs(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);dI(i,f),od(t,p,i),fI(i)}),o&&l)throw new Error(t+' contains ".value" child '+hs(i)+" in addition to actual children.")}},K8=function(t,e){let n,i;for(n=0;n<e.length;n++){i=e[n];const l=gl(i);for(let f=0;f<l.length;f++)if(!(l[f]===".priority"&&f===l.length-1)){if(!v1(l[f]))throw new Error(t+"contains an invalid key ("+l[f]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(cI);let o=null;for(n=0;n<e.length;n++){if(i=e[n],o!==null&&pr(o,i))throw new Error(t+"contains a path "+o.toString()+" that is ancestor of another path "+i.toString());o=i}},q8=function(t,e,n,i){const o=Qu(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const l=[];mn(e,(f,p)=>{const w=new lt(f);if(od(o,p,Mt(n,w)),J0(w)===".priority"&&!$8(p))throw new Error(o+"contains an invalid value for '"+w.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(w)}),K8(o,l)},Qy=function(t,e,n,i){if(!qy(n))throw new Error(Qu(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Z8=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Qy(t,e,n)},C1=function(t,e){if(je(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Q8=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!v1(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Y8(n))throw new Error(Qu(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function _1(t,e){let n=null;for(let i=0;i<e.length;i++){const o=e[i],l=o.getPath();n!==null&&!my(l,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:l}),n.events.push(o)}n&&t.eventLists_.push(n)}function yr(t,e,n){_1(t,n),e4(t,i=>pr(i,e)||pr(e,i))}function e4(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const o=t.eventLists_[i];if(o){const l=o.path;e(l)?(t4(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function t4(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();Ua&&hn("event: "+n.toString()),qo(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4="repo_interrupt",r4=25;class i4{constructor(e,n,i,o){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new J8,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=fu(),this.transactionQueueTree_=new x1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function s4(t,e,n){if(t.stats_=Z0(t.repoInfo_),t.forceRestClient_||PA())t.server_=new du(t.repoInfo_,(i,o,l,f)=>{vm(t,i,o,l,f)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Cm(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{qt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new si(t.repoInfo_,e,(i,o,l,f)=>{vm(t,i,o,l,f)},i=>{Cm(t,i)},i=>{o4(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=jA(t.repoInfo_,()=>new FI(t.stats_,t.server_)),t.infoData_=new DI,t.infoSyncTree_=new xm({startListening:(i,o,l,f)=>{let p=[];const w=t.infoData_.getNode(i._path);return w.isEmpty()||(p=Pl(t.infoSyncTree_,i._path,w),setTimeout(()=>{f("ok")},0)),p},stopListening:()=>{}}),E1(t,"connected",!1),t.serverSyncTree_=new xm({startListening:(i,o,l,f)=>(t.server_.listen(i,l,o,(p,w)=>{const m=f(p,w);yr(t.eventQueue_,i._path,m)}),[]),stopListening:(i,o)=>{t.server_.unlisten(i,o)}})}function Jy(t){const n=t.infoData_.getNode(new lt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ad(t){return j8({timestamp:Jy(t)})}function vm(t,e,n,i,o){t.dataUpdateCount++;const l=new lt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let f=[];if(o)if(i){const w=su(n,m=>Kt(m));f=O8(t.serverSyncTree_,l,w,o)}else{const w=Kt(n);f=zy(t.serverSyncTree_,l,w,o)}else if(i){const w=su(n,m=>Kt(m));f=k8(t.serverSyncTree_,l,w)}else{const w=Kt(n);f=Pl(t.serverSyncTree_,l,w)}let p=l;f.length>0&&(p=Wo(t,l)),yr(t.eventQueue_,p,f)}function Cm(t,e){E1(t,"connected",e),e===!1&&u4(t)}function o4(t,e){mn(e,(n,i)=>{E1(t,n,i)})}function E1(t,e,n){const i=new lt("/.info/"+e),o=Kt(n);t.infoData_.updateSnapshot(i,o);const l=Pl(t.infoSyncTree_,i,o);yr(t.eventQueue_,i,l)}function b1(t){return t.nextWriteId_++}function a4(t,e,n){const i=P8(t.serverSyncTree_,e);return i!=null?Promise.resolve(i):t.server_.get(e).then(o=>{const l=Kt(o).withIndex(e._queryParams.getIndex());D8(t.serverSyncTree_,e,n,!0);let f;if(e._queryParams.loadsAllData())f=Pl(t.serverSyncTree_,e._path,l);else{const p=yl(t.serverSyncTree_,e);f=zy(t.serverSyncTree_,e._path,l,p)}return yr(t.eventQueue_,e._path,f),Uy(t.serverSyncTree_,e,n,null,!0),l},o=>(Bl(t,"get for query "+qt(e)+" failed: "+o),Promise.reject(new Error(o))))}function l4(t,e,n,i,o){Bl(t,"set",{path:e.toString(),value:n,priority:i});const l=ad(t),f=Kt(n,i),p=d1(t.serverSyncTree_,e),w=Xy(f,p,l),m=b1(t),E=jy(t.serverSyncTree_,e,w,m,!0);_1(t.eventQueue_,E),t.server_.put(e.toString(),f.val(!0),(A,R)=>{const M=A==="ok";M||kn("set at "+e+" failed: "+A);const B=Oi(t.serverSyncTree_,m,!M);yr(t.eventQueue_,e,B),Uh(t,o,A,R)});const v=A1(t,e);Wo(t,v),yr(t.eventQueue_,v,[])}function c4(t,e,n,i){Bl(t,"update",{path:e.toString(),value:n});let o=!0;const l=ad(t),f={};if(mn(n,(p,w)=>{o=!1,f[p]=Gy(Mt(e,p),Kt(w),t.serverSyncTree_,l)}),o)hn("update() called with empty data.  Don't do anything."),Uh(t,i,"ok",void 0);else{const p=b1(t),w=T8(t.serverSyncTree_,e,f,p);_1(t.eventQueue_,w),t.server_.merge(e.toString(),n,(m,E)=>{const v=m==="ok";v||kn("update at "+e+" failed: "+m);const A=Oi(t.serverSyncTree_,p,!v),R=A.length>0?Wo(t,e):e;yr(t.eventQueue_,R,A),Uh(t,i,m,E)}),mn(n,m=>{const E=A1(t,Mt(e,m));Wo(t,E)}),yr(t.eventQueue_,e,[])}}function u4(t){Bl(t,"onDisconnectEvents");const e=ad(t),n=fu();Dh(t.onDisconnect_,Ze(),(o,l)=>{const f=Gy(o,l,t.serverSyncTree_,e);by(n,o,f)});let i=[];Dh(n,Ze(),(o,l)=>{i=i.concat(Pl(t.serverSyncTree_,o,l));const f=A1(t,o);Wo(t,f)}),t.onDisconnect_=fu(),yr(t.eventQueue_,Ze(),i)}function d4(t){t.persistentConnection_&&t.persistentConnection_.interrupt(n4)}function Bl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),hn(n,...e)}function Uh(t,e,n,i){e&&qo(()=>{if(n==="ok")e(null);else{const o=(n||"error").toUpperCase();let l=o;i&&(l+=": "+i);const f=new Error(l);f.code=o,e(f)}})}function ev(t,e,n){return d1(t.serverSyncTree_,e,n)||Se.EMPTY_NODE}function S1(t,e=t.transactionQueueTree_){if(e||ld(t,e),Qo(e)){const n=nv(t,e);se(n.length>0,"Sending zero length transaction queue"),n.every(o=>o.status===0)&&f4(t,Ml(e),n)}else $y(e)&&sd(e,n=>{S1(t,n)})}function f4(t,e,n){const i=n.map(m=>m.currentWriteId),o=ev(t,e,i);let l=o;const f=o.hash();for(let m=0;m<n.length;m++){const E=n[m];se(E.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const v=In(e,E.path);l=l.updateChild(v,E.currentOutputSnapshotRaw)}const p=l.val(!0),w=e;t.server_.put(w.toString(),p,m=>{Bl(t,"transaction put response",{path:w.toString(),status:m});let E=[];if(m==="ok"){const v=[];for(let A=0;A<n.length;A++)n[A].status=2,E=E.concat(Oi(t.serverSyncTree_,n[A].currentWriteId)),n[A].onComplete&&v.push(()=>n[A].onComplete(null,!0,n[A].currentOutputSnapshotResolved)),n[A].unwatcher();ld(t,y1(t.transactionQueueTree_,e)),S1(t,t.transactionQueueTree_),yr(t.eventQueue_,e,E);for(let A=0;A<v.length;A++)qo(v[A])}else{if(m==="datastale")for(let v=0;v<n.length;v++)n[v].status===3?n[v].status=4:n[v].status=0;else{kn("transaction at "+w.toString()+" failed: "+m);for(let v=0;v<n.length;v++)n[v].status=4,n[v].abortReason=m}Wo(t,e)}},f)}function Wo(t,e){const n=tv(t,e),i=Ml(n),o=nv(t,n);return h4(t,o,i),i}function h4(t,e,n){if(e.length===0)return;const i=[];let o=[];const f=e.filter(p=>p.status===0).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const w=e[p],m=In(n,w.path);let E=!1,v;if(se(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),w.status===4)E=!0,v=w.abortReason,o=o.concat(Oi(t.serverSyncTree_,w.currentWriteId,!0));else if(w.status===0)if(w.retryCount>=r4)E=!0,v="maxretry",o=o.concat(Oi(t.serverSyncTree_,w.currentWriteId,!0));else{const A=ev(t,w.path,f);w.currentInputSnapshot=A;const R=e[p].update(A.val());if(R!==void 0){od("transaction failed: Data returned ",R,w.path);let M=Kt(R);typeof R=="object"&&R!=null&&qr(R,".priority")||(M=M.updatePriority(A.getPriority()));const K=w.currentWriteId,O=ad(t),N=Xy(M,A,O);w.currentOutputSnapshotRaw=M,w.currentOutputSnapshotResolved=N,w.currentWriteId=b1(t),f.splice(f.indexOf(K),1),o=o.concat(jy(t.serverSyncTree_,w.path,N,w.currentWriteId,w.applyLocally)),o=o.concat(Oi(t.serverSyncTree_,K,!0))}else E=!0,v="nodata",o=o.concat(Oi(t.serverSyncTree_,w.currentWriteId,!0))}yr(t.eventQueue_,n,o),o=[],E&&(e[p].status=2,function(A){setTimeout(A,Math.floor(0))}(e[p].unwatcher),e[p].onComplete&&(v==="nodata"?i.push(()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot)):i.push(()=>e[p].onComplete(new Error(v),!1,null))))}ld(t,t.transactionQueueTree_);for(let p=0;p<i.length;p++)qo(i[p]);S1(t,t.transactionQueueTree_)}function tv(t,e){let n,i=t.transactionQueueTree_;for(n=je(e);n!==null&&Qo(i)===void 0;)i=y1(i,n),e=pt(e),n=je(e);return i}function nv(t,e){const n=[];return rv(t,e,n),n.sort((i,o)=>i.order-o.order),n}function rv(t,e,n){const i=Qo(e);if(i)for(let o=0;o<i.length;o++)n.push(i[o]);sd(e,o=>{rv(t,o,n)})}function ld(t,e){const n=Qo(e);if(n){let i=0;for(let o=0;o<n.length;o++)n[o].status!==2&&(n[i]=n[o],i++);n.length=i,Yy(e,n.length>0?n:void 0)}sd(e,i=>{ld(t,i)})}function A1(t,e){const n=Ml(tv(t,e)),i=y1(t.transactionQueueTree_,e);return V8(i,o=>{xf(t,o)}),xf(t,i),Ky(i,o=>{xf(t,o)}),n}function xf(t,e){const n=Qo(e);if(n){const i=[];let o=[],l=-1;for(let f=0;f<n.length;f++)n[f].status===3||(n[f].status===1?(se(l===f-1,"All SENT items should be at beginning of queue."),l=f,n[f].status=3,n[f].abortReason="set"):(se(n[f].status===0,"Unexpected transaction status in abort"),n[f].unwatcher(),o=o.concat(Oi(t.serverSyncTree_,n[f].currentWriteId,!0)),n[f].onComplete&&i.push(n[f].onComplete.bind(null,new Error("set"),!1,null))));l===-1?Yy(e,void 0):n.length=l+1,yr(t.eventQueue_,Ml(e),o);for(let f=0;f<i.length;f++)qo(i[f])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let o=n[i];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function p4(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):kn(`Invalid query segment '${n}' in query '${t}'`)}return e}const _m=function(t,e){const n=m4(t),i=n.namespace;n.domain==="firebase.com"&&hi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&hi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||SA();const o=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new oy(n.host,n.secure,i,o,e,"",i!==n.subdomain),path:new lt(n.pathString)}},m4=function(t){let e="",n="",i="",o="",l="",f=!0,p="https",w=443;if(typeof t=="string"){let m=t.indexOf("//");m>=0&&(p=t.substring(0,m-1),t=t.substring(m+2));let E=t.indexOf("/");E===-1&&(E=t.length);let v=t.indexOf("?");v===-1&&(v=t.length),e=t.substring(0,Math.min(E,v)),E<v&&(o=g4(t.substring(E,v)));const A=p4(t.substring(Math.min(t.length,v)));m=e.indexOf(":"),m>=0?(f=p==="https"||p==="wss",w=parseInt(e.substring(m+1),10)):m=e.length;const R=e.slice(0,m);if(R.toLowerCase()==="localhost")n="localhost";else if(R.split(".").length<=2)n=R;else{const M=e.indexOf(".");i=e.substring(0,M).toLowerCase(),n=e.substring(M+1),l=i}"ns"in A&&(l=A.ns)}return{host:e,port:w,domain:n,subdomain:i,secure:f,scheme:p,pathString:o,namespace:l}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",w4=function(){let t=0;const e=[];return function(n){const i=n===t;t=n;let o;const l=new Array(8);for(o=7;o>=0;o--)l[o]=Em.charAt(n%64),n=Math.floor(n/64);se(n===0,"Cannot push at time == 0");let f=l.join("");if(i){for(o=11;o>=0&&e[o]===63;o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(Math.random()*64);for(o=0;o<12;o++)f+=Em.charAt(e[o]);return se(f.length===20,"nextPushId: Length should be 20."),f}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,n,i,o){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+qt(this.snapshot.exportVal())}}class y4{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return se(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,n,i,o){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=o}get key(){return Be(this._path)?null:J0(this._path)}get ref(){return new mi(this._repo,this._path)}get _queryIdentifier(){const e=lm(this._queryParams),n=K0(e);return n==="{}"?"default":n}get _queryObject(){return lm(this._queryParams)}isEqual(e){if(e=pi(e),!(e instanceof I1))return!1;const n=this._repo===e._repo,i=my(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return n&&i&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+lI(this._path)}}class mi extends I1{constructor(e,n){super(e,n,new r1,!1)}get parent(){const e=py(this._path);return e===null?null:new mi(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class vl{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new lt(e),i=Cl(this.ref,e);return new vl(this._node.getChild(n),i,Bt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,o)=>e(new vl(o,Cl(this.ref,i),Bt)))}hasChild(e){const n=new lt(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ve(t,e){return t=pi(t),t._checkNotDeleted("ref"),e!==void 0?Cl(t._root,e):t._root}function Cl(t,e){return t=pi(t),je(t._path)===null?Z8("child","path",e):Qy("child","path",e),new mi(t._repo,Mt(t._path,e))}function xo(t,e){t=pi(t),C1("push",t._path),Zy("push",e,t._path,!0);const n=Jy(t._repo),i=w4(n),o=Cl(t,i),l=Cl(t,i);let f;return f=Promise.resolve(l),o.then=f.then.bind(f),o.catch=f.then.bind(f,void 0),o}function C4(t){return C1("remove",t._path),Zn(t,null)}function Zn(t,e){t=pi(t),C1("set",t._path),Zy("set",e,t._path,!1);const n=new kl;return l4(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function ro(t,e){q8("update",e,t._path);const n=new kl;return c4(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function en(t){t=pi(t);const e=new v4(()=>{}),n=new T1(e);return a4(t._repo,t,n).then(i=>new vl(i,new mi(t._repo,t._path),t._queryParams.getIndex()))}class T1{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new x4("value",this,new vl(e.snapshotNode,new mi(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new y4(this,e,n):null}matches(e){return e instanceof T1?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}v8(mi);S8(mi);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4="FIREBASE_DATABASE_EMULATOR_HOST",zh={};let E4=!1;function b4(t,e,n,i){t.repoInfo_=new oy(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function S4(t,e,n,i,o){let l=i||t.options.databaseURL;l===void 0&&(t.options.projectId||hi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),hn("Using default host for project ",t.options.projectId),l=`${t.options.projectId}-default-rtdb.firebaseio.com`);let f=_m(l,o),p=f.repoInfo,w;typeof process<"u"&&Hp&&(w=Hp[_4]),w?(l=`http://${w}?ns=${p.namespace}`,f=_m(l,o),p=f.repoInfo):f.repoInfo.secure;const m=new BA(t.name,t.options,e);Q8("Invalid Firebase Database URL",f),Be(f.path)||hi("Database URL must point to the root of a Firebase Database (not including a child path).");const E=I4(p,t,m,new MA(t.name,n));return new T4(E,t)}function A4(t,e){const n=zh[e];(!n||n[t.key]!==t)&&hi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),d4(t),delete n[t.key]}function I4(t,e,n,i){let o=zh[e.name];o||(o={},zh[e.name]=o);let l=o[t.toURLString()];return l&&hi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new i4(t,E4,n,i),o[t.toURLString()]=l,l}class T4{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(s4(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new mi(this._repo,Ze())),this._rootInternal}_delete(){return this._rootInternal!==null&&(A4(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&hi("Cannot call "+e+" on a deleted database.")}}function k4(t=Vx(),e){const n=Nl(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=Yb("database");i&&N4(n,...i)}return n}function N4(t,e,n,i={}){t=pi(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&hi("Cannot call useEmulator() after instance has already been initialized.");const o=t._repoInternal;let l;if(o.repoInfo_.nodeAdmin)i.mockUserToken&&hi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new Rc(Rc.OWNER);else if(i.mockUserToken){const f=typeof i.mockUserToken=="string"?i.mockUserToken:$b(i.mockUserToken,t.app.options.projectId);l=new Rc(f)}b4(o,e,n,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(t){yA(cA),qi(new di("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return S4(i,o,l,n)},"PUBLIC").setMultipleInstances(!0)),$r(Gp,Xp,t),$r(Gp,Xp,"esm2017")}si.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};si.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};R4();var O4="firebase",D4="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$r(O4,D4,"app");const iv="@firebase/installations",k1="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=1e4,ov=`w:${k1}`,av="FIS_v2",P4="https://firebaseinstallations.googleapis.com/v1",M4=60*60*1e3,B4="installations",L4="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ns=new Zu(B4,L4,F4);function lv(t){return t instanceof Ls&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv({projectId:t}){return`${P4}/projects/${t}/installations`}function uv(t){return{token:t.token,requestStatus:2,expiresIn:U4(t.expiresIn),creationTime:Date.now()}}async function dv(t,e){const i=(await e.json()).error;return Ns.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function fv({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function j4(t,{refreshToken:e}){const n=fv(t);return n.append("Authorization",z4(e)),n}async function hv(t){const e=await t();return e.status>=500&&e.status<600?t():e}function U4(t){return Number(t.replace("s","000"))}function z4(t){return`${av} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=cv(t),o=fv(t),l=e.getImmediate({optional:!0});if(l){const m=await l.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const f={fid:n,authVersion:av,appId:t.appId,sdkVersion:ov},p={method:"POST",headers:o,body:JSON.stringify(f)},w=await hv(()=>fetch(i,p));if(w.ok){const m=await w.json();return{fid:m.fid||n,registrationStatus:2,refreshToken:m.refreshToken,authToken:uv(m.authToken)}}else throw await dv("Create Installation",w)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V4(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=/^[cdef][\w-]{21}$/,Wh="";function G4(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=X4(t);return H4.test(n)?n:Wh}catch{return Wh}}function X4(t){return V4(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=new Map;function mv(t,e){const n=cd(t);wv(n,e),Y4(n,e)}function wv(t,e){const n=pv.get(t);if(n)for(const i of n)i(e)}function Y4(t,e){const n=$4();n&&n.postMessage({key:t,fid:e}),K4()}let xs=null;function $4(){return!xs&&"BroadcastChannel"in self&&(xs=new BroadcastChannel("[Firebase] FID Change"),xs.onmessage=t=>{wv(t.data.key,t.data.fid)}),xs}function K4(){pv.size===0&&xs&&(xs.close(),xs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4="firebase-installations-database",Z4=1,Rs="firebase-installations-store";let yf=null;function N1(){return yf||(yf=zx(q4,Z4,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Rs)}}})),yf}async function vu(t,e){const n=cd(t),o=(await N1()).transaction(Rs,"readwrite"),l=o.objectStore(Rs),f=await l.get(n);return await l.put(e,n),await o.done,(!f||f.fid!==e.fid)&&mv(t,e.fid),e}async function xv(t){const e=cd(t),i=(await N1()).transaction(Rs,"readwrite");await i.objectStore(Rs).delete(e),await i.done}async function ud(t,e){const n=cd(t),o=(await N1()).transaction(Rs,"readwrite"),l=o.objectStore(Rs),f=await l.get(n),p=e(f);return p===void 0?await l.delete(n):await l.put(p,n),await o.done,p&&(!f||f.fid!==p.fid)&&mv(t,p.fid),p}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R1(t){let e;const n=await ud(t.appConfig,i=>{const o=Q4(i),l=J4(t,o);return e=l.registrationPromise,l.installationEntry});return n.fid===Wh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Q4(t){const e=t||{fid:G4(),registrationStatus:0};return yv(e)}function J4(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Ns.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=eT(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:tT(t)}:{installationEntry:e}}async function eT(t,e){try{const n=await W4(t,e);return vu(t.appConfig,n)}catch(n){throw lv(n)&&n.customData.serverCode===409?await xv(t.appConfig):await vu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function tT(t){let e=await bm(t.appConfig);for(;e.registrationStatus===1;)await gv(100),e=await bm(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await R1(t);return i||n}return e}function bm(t){return ud(t,e=>{if(!e)throw Ns.create("installation-not-found");return yv(e)})}function yv(t){return nT(t)?{fid:t.fid,registrationStatus:0}:t}function nT(t){return t.registrationStatus===1&&t.registrationTime+sv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rT({appConfig:t,heartbeatServiceProvider:e},n){const i=iT(t,n),o=j4(t,n),l=e.getImmediate({optional:!0});if(l){const m=await l.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const f={installation:{sdkVersion:ov,appId:t.appId}},p={method:"POST",headers:o,body:JSON.stringify(f)},w=await hv(()=>fetch(i,p));if(w.ok){const m=await w.json();return uv(m)}else throw await dv("Generate Auth Token",w)}function iT(t,{fid:e}){return`${cv(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O1(t,e=!1){let n;const i=await ud(t.appConfig,l=>{if(!vv(l))throw Ns.create("not-registered");const f=l.authToken;if(!e&&aT(f))return l;if(f.requestStatus===1)return n=sT(t,e),l;{if(!navigator.onLine)throw Ns.create("app-offline");const p=cT(l);return n=oT(t,p),p}});return n?await n:i.authToken}async function sT(t,e){let n=await Sm(t.appConfig);for(;n.authToken.requestStatus===1;)await gv(100),n=await Sm(t.appConfig);const i=n.authToken;return i.requestStatus===0?O1(t,e):i}function Sm(t){return ud(t,e=>{if(!vv(e))throw Ns.create("not-registered");const n=e.authToken;return uT(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function oT(t,e){try{const n=await rT(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await vu(t.appConfig,i),n}catch(n){if(lv(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await xv(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await vu(t.appConfig,i)}throw n}}function vv(t){return t!==void 0&&t.registrationStatus===2}function aT(t){return t.requestStatus===2&&!lT(t)}function lT(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+M4}function cT(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function uT(t){return t.requestStatus===1&&t.requestTime+sv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dT(t){const e=t,{installationEntry:n,registrationPromise:i}=await R1(e);return i?i.catch(console.error):O1(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fT(t,e=!1){const n=t;return await hT(n),(await O1(n,e)).token}async function hT(t){const{registrationPromise:e}=await R1(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(t){if(!t||!t.options)throw vf("App Configuration");if(!t.name)throw vf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw vf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function vf(t){return Ns.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="installations",pT="installations-internal",mT=t=>{const e=t.getProvider("app").getImmediate(),n=gT(e),i=Nl(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},wT=t=>{const e=t.getProvider("app").getImmediate(),n=Nl(e,Cv).getImmediate();return{getId:()=>dT(n),getToken:o=>fT(n,o)}};function xT(){qi(new di(Cv,mT,"PUBLIC")),qi(new di(pT,wT,"PRIVATE"))}xT();$r(iv,k1);$r(iv,k1,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu="analytics",yT="firebase_id",vT="origin",CT=60*1e3,_T="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",D1="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn=new X0("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},er=new Zu("analytics","Analytics",ET);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(t){if(!t.startsWith(D1)){const e=er.create("invalid-gtag-resource",{gtagURL:t});return Gn.warn(e.message),""}return t}function _v(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function ST(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function AT(t,e){const n=ST("firebase-js-sdk-policy",{createScriptURL:bT}),i=document.createElement("script"),o=`${D1}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(o):o,i.async=!0,document.head.appendChild(i)}function IT(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function TT(t,e,n,i,o,l){const f=i[o];try{if(f)await e[f];else{const w=(await _v(n)).find(m=>m.measurementId===o);w&&await e[w.appId]}}catch(p){Gn.error(p)}t("config",o,l)}async function kT(t,e,n,i,o){try{let l=[];if(o&&o.send_to){let f=o.send_to;Array.isArray(f)||(f=[f]);const p=await _v(n);for(const w of f){const m=p.find(v=>v.measurementId===w),E=m&&e[m.appId];if(E)l.push(E);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),t("event",i,o||{})}catch(l){Gn.error(l)}}function NT(t,e,n,i){async function o(l,...f){try{if(l==="event"){const[p,w]=f;await kT(t,e,n,p,w)}else if(l==="config"){const[p,w]=f;await TT(t,e,n,i,p,w)}else if(l==="consent"){const[p,w]=f;t("consent",p,w)}else if(l==="get"){const[p,w,m]=f;t("get",p,w,m)}else if(l==="set"){const[p]=f;t("set",p)}else t(l,...f)}catch(p){Gn.error(p)}}return o}function RT(t,e,n,i,o){let l=function(...f){window[i].push(arguments)};return window[o]&&typeof window[o]=="function"&&(l=window[o]),window[o]=NT(l,t,e,n),{gtagCore:l,wrappedGtag:window[o]}}function OT(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(D1)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=30,PT=1e3;class MT{constructor(e={},n=PT){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Ev=new MT;function BT(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function LT(t){var e;const{appId:n,apiKey:i}=t,o={method:"GET",headers:BT(i)},l=_T.replace("{app-id}",n),f=await fetch(l,o);if(f.status!==200&&f.status!==304){let p="";try{const w=await f.json();!((e=w.error)===null||e===void 0)&&e.message&&(p=w.error.message)}catch{}throw er.create("config-fetch-failed",{httpStatus:f.status,responseMessage:p})}return f.json()}async function FT(t,e=Ev,n){const{appId:i,apiKey:o,measurementId:l}=t.options;if(!i)throw er.create("no-app-id");if(!o){if(l)return{measurementId:l,appId:i};throw er.create("no-api-key")}const f=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},p=new zT;return setTimeout(async()=>{p.abort()},CT),bv({appId:i,apiKey:o,measurementId:l},f,p,e)}async function bv(t,{throttleEndTimeMillis:e,backoffCount:n},i,o=Ev){var l;const{appId:f,measurementId:p}=t;try{await jT(i,e)}catch(w){if(p)return Gn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${w==null?void 0:w.message}]`),{appId:f,measurementId:p};throw w}try{const w=await LT(t);return o.deleteThrottleMetadata(f),w}catch(w){const m=w;if(!UT(m)){if(o.deleteThrottleMetadata(f),p)return Gn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:f,measurementId:p};throw w}const E=Number((l=m==null?void 0:m.customData)===null||l===void 0?void 0:l.httpStatus)===503?Mp(n,o.intervalMillis,DT):Mp(n,o.intervalMillis),v={throttleEndTimeMillis:Date.now()+E,backoffCount:n+1};return o.setThrottleMetadata(f,v),Gn.debug(`Calling attemptFetch again in ${E} millis`),bv(t,v,i,o)}}function jT(t,e){return new Promise((n,i)=>{const o=Math.max(e-Date.now(),0),l=setTimeout(n,o);t.addEventListener(()=>{clearTimeout(l),i(er.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function UT(t){if(!(t instanceof Ls)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class zT{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function WT(t,e,n,i,o){if(o&&o.global){t("event",n,i);return}else{const l=await e,f=Object.assign(Object.assign({},i),{send_to:l});t("event",n,f)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VT(){if(Bx())try{await Lx()}catch(t){return Gn.warn(er.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Gn.warn(er.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function HT(t,e,n,i,o,l,f){var p;const w=FT(t);w.then(R=>{n[R.measurementId]=R.appId,t.options.measurementId&&R.measurementId!==t.options.measurementId&&Gn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${R.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(R=>Gn.error(R)),e.push(w);const m=VT().then(R=>{if(R)return i.getId()}),[E,v]=await Promise.all([w,m]);OT(l)||AT(l,E.measurementId),o("js",new Date);const A=(p=f==null?void 0:f.config)!==null&&p!==void 0?p:{};return A[vT]="firebase",A.update=!0,v!=null&&(A[yT]=v),o("config",E.measurementId,A),E.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e){this.app=e}_delete(){return delete Ga[this.app.options.appId],Promise.resolve()}}let Ga={},Am=[];const Im={};let Cf="dataLayer",XT="gtag",Tm,Sv,km=!1;function YT(){const t=[];if(qb()&&t.push("This is a browser extension environment."),Jb()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,o)=>`(${o+1}) ${i}`).join(" "),n=er.create("invalid-analytics-context",{errorInfo:e});Gn.warn(n.message)}}function $T(t,e,n){YT();const i=t.options.appId;if(!i)throw er.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Gn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw er.create("no-api-key");if(Ga[i]!=null)throw er.create("already-exists",{id:i});if(!km){IT(Cf);const{wrappedGtag:l,gtagCore:f}=RT(Ga,Am,Im,Cf,XT);Sv=l,Tm=f,km=!0}return Ga[i]=HT(t,Am,Im,e,Tm,Cf,n),new GT(t)}function KT(t=Vx()){t=pi(t);const e=Nl(t,Cu);return e.isInitialized()?e.getImmediate():qT(t)}function qT(t,e={}){const n=Nl(t,Cu);if(n.isInitialized()){const o=n.getImmediate();if(ou(e,n.getOptions()))return o;throw er.create("already-initialized")}return n.initialize({options:e})}function ZT(t,e,n,i){t=pi(t),WT(Sv,Ga[t.app.options.appId],e,n,i).catch(o=>Gn.error(o))}const Nm="@firebase/analytics",Rm="0.10.8";function QT(){qi(new di(Cu,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return $T(i,o,n)},"PUBLIC")),qi(new di("analytics-internal",t,"PRIVATE")),$r(Nm,Rm),$r(Nm,Rm,"esm2017");function t(e){try{const n=e.getProvider(Cu).getImmediate();return{logEvent:(i,o,l)=>ZT(n,i,o,l)}}catch(n){throw er.create("interop-component-reg-failed",{reason:n})}}}QT();const JT={apiKey:"AIzaSyBVLs9aP79sEfYy9EjtUan6J5jOX21AoNU",authDomain:"iqos-d3074.firebaseapp.com",databaseURL:"https://iqos-d3074-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"iqos-d3074",storageBucket:"iqos-d3074.firebasestorage.app",messagingSenderId:"928334092425",appId:"1:928334092425:web:3b6d5898ab46d835854e58",measurementId:"G-JN7DT8HRGN"},Av=Wx(JT);KT(Av);const He=k4(Av),fn={createProduct:async t=>{try{const e=Ve(He,"products"),n=xo(e),i=t.useBarcode!==!1,o={id:n.key,...t,stock:i?0:t.stock,createdAt:Date.now(),updatedAt:Date.now()};if(await Zn(n,o),i){const l=Ve(He,`productUnits/${n.key}`);await Zn(l,{})}return o}catch(e){throw new Error(`Error creating product: ${e.message}`)}},getUnitsWithBarcodeCount:async t=>{try{const e=Ve(He,`productUnits/${t}`),n=await en(e);return n.exists()?Object.values(n.val()).filter(o=>o.barcode).length:0}catch(e){throw new Error(`Error getting units count: ${e.message}`)}},getReadyStock:async t=>{try{const e=Ve(He,`products/${t}`),n=await en(e);if(!n.exists())return 0;const i=n.val();if(i.useBarcode===!1)return i.stock||0;const o=Ve(He,`productUnits/${t}`),l=await en(o);return l.exists()?Object.values(l.val()).filter(p=>p.barcode&&p.status==="in_stock").length:0}catch(e){throw new Error(`Error getting ready stock: ${e.message}`)}},updateProductStockFromUnits:async t=>{try{const e=Ve(He,`productUnits/${t}`),n=await en(e);let i=0;n.exists()&&(i=Object.values(n.val()).filter(f=>f&&f.status==="in_stock").length);const o=Ve(He,`products/${t}`);return await ro(o,{stock:i,updatedAt:Date.now()}),i}catch(e){throw new Error(`Error updating product stock: ${e.message}`)}},getAllProducts:async()=>{try{const t=Ve(He,"products"),e=await en(t);return e.exists()?Object.values(e.val()):[]}catch(t){throw new Error(`Error fetching products: ${t.message}`)}},getProductById:async t=>{try{const e=Ve(He,`products/${t}`),n=await en(e);return n.exists()?n.val():null}catch(e){throw new Error(`Error fetching product: ${e.message}`)}},getProductByBarcode:async t=>{try{const e=Ve(He,"products"),n=await en(e);if(n.exists()){const i=Object.values(n.val());for(const o of i){const l=Ve(He,`productUnits/${o.id}`),f=await en(l);if(f.exists()){const w=Object.values(f.val()).find(m=>m.barcode===t);if(w)return{...o,matchedUnitId:w.unitId}}}}return null}catch(e){throw new Error(`Error fetching product by barcode: ${e.message}`)}},addBarcodeToProduct:async(t,e)=>{try{if(!e)throw new Error("Barcode is required");const n=Ve(He,`products/${t}`),i=await en(n);if(!i.exists())throw new Error("Product not found");if(i.val().useBarcode===!1)throw new Error("Product tidak menggunakan barcode");const l=await en(Ve(He,"productUnits"));if(l.exists()){const m=Object.values(l.val());for(const E of m)if(Object.values(E||{}).some(A=>A&&A.barcode===e))throw new Error("Barcode sudah dipakai unit lain")}const f=Ve(He,`productUnits/${t}`),p=await en(f);let w;if(p.exists()){const m=p.val(),E=Object.values(m).find(v=>v&&!v.barcode&&v.status==="in_stock");E&&(w=Ve(He,`productUnits/${t}/${E.unitId}`))}if(!w){const m=xo(f);await Zn(m,{unitId:m.key,productId:t,barcode:null,status:"in_stock",createdAt:Date.now()}),w=m}return await ro(w,{barcode:e,updatedAt:Date.now()}),await fn.updateProductStockFromUnits(t),!0}catch(n){throw new Error(`Error adding barcode: ${n.message}`)}},updateProduct:async(t,e)=>{try{const n=Ve(He,`products/${t}`),i={...e,updatedAt:Date.now()};return await ro(n,i),!0}catch(n){throw new Error(`Error updating product: ${n.message}`)}},deleteProduct:async t=>{try{const e=Ve(He,`products/${t}`);return await C4(e),!0}catch(e){throw new Error(`Error deleting product: ${e.message}`)}},updateStock:async(t,e,n,i)=>{try{const o=Ve(He,`products/${t}`),l=await en(o);if(!l.exists())throw new Error("Product not found");const f=l.val(),p=f.stock+e;if(p<0)throw new Error("Insufficient stock");await ro(o,{stock:p,updatedAt:Date.now()});const w=Ve(He,"stockMovements"),m=xo(w),E={id:m.key,productId:t,productName:f.name,type:e>0?"in":"out",quantity:Math.abs(e),reason:n,referenceId:i,createdAt:Date.now()};return await Zn(m,E),!0}catch(o){throw new Error(`Error updating stock: ${o.message}`)}},updateStockAndMarkUnitsSold:async(t,e,n)=>{try{const i=Ve(He,`products/${t}`),o=await en(i);if(!o.exists())throw new Error("Product not found");const l=o.val();if(l.useBarcode!==!1){const m=Ve(He,`productUnits/${t}`),E=await en(m);if(E.exists()){const v=E.val(),A=Object.values(v).filter(M=>M.status==="in_stock");if(A.length<e)throw new Error(`Insufficient units available. Available: ${A.length}, Requested: ${e}`);let R=0;for(const[M,B]of Object.entries(v))B.status==="in_stock"&&R<e&&(await ro(Ve(He,`productUnits/${t}/${M}`),{status:"sold",soldAt:Date.now(),saleId:n,updatedAt:Date.now()}),R++);await fn.updateProductStockFromUnits(t)}}else{const m=l.stock-e;if(m<0)throw new Error("Insufficient stock");await ro(i,{stock:m,updatedAt:Date.now()})}const f=Ve(He,"stockMovements"),p=xo(f),w={id:p.key,productId:t,productName:l.name,type:"out",quantity:e,reason:"sale",referenceId:n,createdAt:Date.now()};return await Zn(p,w),!0}catch(i){throw new Error(`Error updating stock: ${i.message}`)}}},Iv={createSale:async t=>{try{const e=Ve(He,"sales"),n=xo(e),i={id:n.key,...t,createdAt:Date.now(),status:"completed"};await Zn(n,i);for(const o of t.items)await fn.updateStockAndMarkUnitsSold(o.productId,o.quantity,n.key);return i}catch(e){throw new Error(`Error creating sale: ${e.message}`)}},getAllSales:async()=>{try{const t=Ve(He,"sales"),e=await en(t);return e.exists()?Object.values(e.val()):[]}catch(t){throw new Error(`Error fetching sales: ${t.message}`)}},getSaleById:async t=>{try{const e=Ve(He,`sales/${t}`),n=await en(e);return n.exists()?n.val():null}catch(e){throw new Error(`Error fetching sale: ${e.message}`)}}};var le;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(le||(le={}));var Om=new Map([[le.QR_CODE,"QR_CODE"],[le.AZTEC,"AZTEC"],[le.CODABAR,"CODABAR"],[le.CODE_39,"CODE_39"],[le.CODE_93,"CODE_93"],[le.CODE_128,"CODE_128"],[le.DATA_MATRIX,"DATA_MATRIX"],[le.MAXICODE,"MAXICODE"],[le.ITF,"ITF"],[le.EAN_13,"EAN_13"],[le.EAN_8,"EAN_8"],[le.PDF_417,"PDF_417"],[le.RSS_14,"RSS_14"],[le.RSS_EXPANDED,"RSS_EXPANDED"],[le.UPC_A,"UPC_A"],[le.UPC_E,"UPC_E"],[le.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Dm;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Dm||(Dm={}));function e6(t){return Object.values(le).includes(t)}var _u;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(_u||(_u={}));var t6=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[_u.SCAN_TYPE_CAMERA,_u.SCAN_TYPE_FILE],t}(),Tv=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!Om.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,Om.get(e))},t}(),Pm=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),Vh;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Vh||(Vh={}));var n6=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Vh.UNKWOWN_ERROR}},t}(),r6=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function Qr(t){return typeof t>"u"||t===null}var yo=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),kv=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var i=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var o=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(o),f=Object.keys(e),p=0,w=f;p<w.length;p++){var m=w[p];if(l.has(m))return n.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},t}(),Hh={exports:{}};(function(t,e){(function(n,i){i(e)})(ha,function(n){function i(C){return C==null}var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,r){C.__proto__=r}||function(C,r){for(var s in r)r.hasOwnProperty(s)&&(C[s]=r[s])};function l(C,r){o(C,r);function s(){this.constructor=C}C.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}function f(C,r){var s=Object.setPrototypeOf;s?s(C,r):C.__proto__=r}function p(C,r){r===void 0&&(r=C.constructor);var s=Error.captureStackTrace;s&&s(C,r)}var w=function(C){l(r,C);function r(s){var a=this.constructor,c=C.call(this,s)||this;return Object.defineProperty(c,"name",{value:a.name,enumerable:!1}),f(c,a.prototype),p(c),c}return r}(Error);class m extends w{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}m.kind="Exception";class E extends m{}E.kind="ArgumentException";class v extends m{}v.kind="IllegalArgumentException";class A{constructor(r){if(this.binarizer=r,r===null)throw new v("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,s){return this.binarizer.getBlackRow(r,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,s,a,c){const u=this.binarizer.getLuminanceSource().crop(r,s,a,c);return new A(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new A(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new A(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class R extends m{static getChecksumInstance(){return new R}}R.kind="ChecksumException";class M{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class B{static arraycopy(r,s,a,c,u){for(;u--;)a[c++]=r[s++]}static currentTimeMillis(){return Date.now()}}class K extends m{}K.kind="IndexOutOfBoundsException";class O extends K{constructor(r=void 0,s=void 0){super(s),this.index=r,this.message=s}}O.kind="ArrayIndexOutOfBoundsException";class N{static fill(r,s){for(let a=0,c=r.length;a<c;a++)r[a]=s}static fillWithin(r,s,a,c){N.rangeCheck(r.length,s,a);for(let u=s;u<a;u++)r[u]=c}static rangeCheck(r,s,a){if(s>a)throw new v("fromIndex("+s+") > toIndex("+a+")");if(s<0)throw new O(s);if(a>r)throw new O(a)}static asList(...r){return r}static create(r,s,a){return Array.from({length:r}).map(u=>Array.from({length:s}).fill(a))}static createInt32Array(r,s,a){return Array.from({length:r}).map(u=>Int32Array.from({length:s}).fill(a))}static equals(r,s){if(!r||!s||!r.length||!s.length||r.length!==s.length)return!1;for(let a=0,c=r.length;a<c;a++)if(r[a]!==s[a])return!1;return!0}static hashCode(r){if(r===null)return 0;let s=1;for(const a of r)s=31*s+a;return s}static fillUint8Array(r,s){for(let a=0;a!==r.length;a++)r[a]=s}static copyOf(r,s){return r.slice(0,s)}static copyOfUint8Array(r,s){if(r.length<=s){const a=new Uint8Array(s);return a.set(r),a}return r.slice(0,s)}static copyOfRange(r,s,a){const c=a-s,u=new Int32Array(c);return B.arraycopy(r,s,u,0,c),u}static binarySearch(r,s,a){a===void 0&&(a=N.numberComparator);let c=0,u=r.length-1;for(;c<=u;){const d=u+c>>1,h=a(s,r[d]);if(h>0)c=d+1;else if(h<0)u=d-1;else return d}return-c-1}static numberComparator(r,s){return r-s}}class k{static numberOfTrailingZeros(r){let s;if(r===0)return 32;let a=31;return s=r<<16,s!==0&&(a-=16,r=s),s=r<<8,s!==0&&(a-=8,r=s),s=r<<4,s!==0&&(a-=4,r=s),s=r<<2,s!==0&&(a-=2,r=s),a-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let s=1;return r>>>16||(s+=16,r<<=16),r>>>24||(s+=8,r<<=8),r>>>28||(s+=4,r<<=4),r>>>30||(s+=2,r<<=2),s-=r>>>31,s}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,s){return Math.trunc(r/s)}static parseInt(r,s=void 0){return parseInt(r,s)}}k.MIN_VALUE_32_BITS=-2147483648,k.MAX_VALUE=Number.MAX_SAFE_INTEGER;class U{constructor(r,s){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,s==null?this.bits=U.makeArray(r):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const s=U.makeArray(r);B.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const s=this.size;if(r>=s)return s;const a=this.bits;let c=Math.floor(r/32),u=a[c];u&=~((1<<(r&31))-1);const d=a.length;for(;u===0;){if(++c===d)return s;u=a[c]}const h=c*32+k.numberOfTrailingZeros(u);return h>s?s:h}getNextUnset(r){const s=this.size;if(r>=s)return s;const a=this.bits;let c=Math.floor(r/32),u=~a[c];u&=~((1<<(r&31))-1);const d=a.length;for(;u===0;){if(++c===d)return s;u=~a[c]}const h=c*32+k.numberOfTrailingZeros(u);return h>s?s:h}setBulk(r,s){this.bits[Math.floor(r/32)]=s}setRange(r,s){if(s<r||r<0||s>this.size)throw new v;if(s===r)return;s--;const a=Math.floor(r/32),c=Math.floor(s/32),u=this.bits;for(let d=a;d<=c;d++){const h=d>a?0:r&31,x=(2<<(d<c?31:s&31))-(1<<h);u[d]|=x}}clear(){const r=this.bits.length,s=this.bits;for(let a=0;a<r;a++)s[a]=0}isRange(r,s,a){if(s<r||r<0||s>this.size)throw new v;if(s===r)return!0;s--;const c=Math.floor(r/32),u=Math.floor(s/32),d=this.bits;for(let h=c;h<=u;h++){const g=h>c?0:r&31,y=(2<<(h<u?31:s&31))-(1<<g)&4294967295;if((d[h]&y)!==(a?y:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,s){if(s<0||s>32)throw new v("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let a=s;a>0;a--)this.appendBit((r>>a-1&1)===1)}appendBitArray(r){const s=r.size;this.ensureCapacity(this.size+s);for(let a=0;a<s;a++)this.appendBit(r.get(a))}xor(r){if(this.size!==r.size)throw new v("Sizes don't match");const s=this.bits;for(let a=0,c=s.length;a<c;a++)s[a]^=r.bits[a]}toBytes(r,s,a,c){for(let u=0;u<c;u++){let d=0;for(let h=0;h<8;h++)this.get(r)&&(d|=1<<7-h),r++;s[a+u]=d}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),a=s+1,c=this.bits;for(let u=0;u<a;u++){let d=c[u];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,r[s-u]=d}if(this.size!==a*32){const u=a*32-this.size;let d=r[0]>>>u;for(let h=1;h<a;h++){const g=r[h];d|=g<<32-u,r[h-1]=d,d=g>>>u}r[a-1]=d}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof U))return!1;const s=r;return this.size===s.size&&N.equals(this.bits,s.bits)}hashCode(){return 31*this.size+N.hashCode(this.bits)}toString(){let r="";for(let s=0,a=this.size;s<a;s++)s&7||(r+=" "),r+=this.get(s)?"X":".";return r}clone(){return new U(this.size,this.bits.slice())}}var te;(function(C){C[C.OTHER=0]="OTHER",C[C.PURE_BARCODE=1]="PURE_BARCODE",C[C.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",C[C.TRY_HARDER=3]="TRY_HARDER",C[C.CHARACTER_SET=4]="CHARACTER_SET",C[C.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",C[C.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",C[C.ASSUME_GS1=7]="ASSUME_GS1",C[C.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",C[C.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",C[C.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(te||(te={}));var Z=te;class z extends m{static getFormatInstance(){return new z}}z.kind="FormatException";var J;(function(C){C[C.Cp437=0]="Cp437",C[C.ISO8859_1=1]="ISO8859_1",C[C.ISO8859_2=2]="ISO8859_2",C[C.ISO8859_3=3]="ISO8859_3",C[C.ISO8859_4=4]="ISO8859_4",C[C.ISO8859_5=5]="ISO8859_5",C[C.ISO8859_6=6]="ISO8859_6",C[C.ISO8859_7=7]="ISO8859_7",C[C.ISO8859_8=8]="ISO8859_8",C[C.ISO8859_9=9]="ISO8859_9",C[C.ISO8859_10=10]="ISO8859_10",C[C.ISO8859_11=11]="ISO8859_11",C[C.ISO8859_13=12]="ISO8859_13",C[C.ISO8859_14=13]="ISO8859_14",C[C.ISO8859_15=14]="ISO8859_15",C[C.ISO8859_16=15]="ISO8859_16",C[C.SJIS=16]="SJIS",C[C.Cp1250=17]="Cp1250",C[C.Cp1251=18]="Cp1251",C[C.Cp1252=19]="Cp1252",C[C.Cp1256=20]="Cp1256",C[C.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",C[C.UTF8=22]="UTF8",C[C.ASCII=23]="ASCII",C[C.Big5=24]="Big5",C[C.GB18030=25]="GB18030",C[C.EUC_KR=26]="EUC_KR"})(J||(J={}));class ${constructor(r,s,a,...c){this.valueIdentifier=r,this.name=a,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=c,$.VALUE_IDENTIFIER_TO_ECI.set(r,this),$.NAME_TO_ECI.set(a,this);const u=this.values;for(let d=0,h=u.length;d!==h;d++){const g=u[d];$.VALUES_TO_ECI.set(g,this)}for(const d of c)$.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new z("incorect value");const s=$.VALUES_TO_ECI.get(r);if(s===void 0)throw new z("incorect value");return s}static getCharacterSetECIByName(r){const s=$.NAME_TO_ECI.get(r);if(s===void 0)throw new z("incorect value");return s}equals(r){if(!(r instanceof $))return!1;const s=r;return this.getName()===s.getName()}}$.VALUE_IDENTIFIER_TO_ECI=new Map,$.VALUES_TO_ECI=new Map,$.NAME_TO_ECI=new Map,$.Cp437=new $(J.Cp437,Int32Array.from([0,2]),"Cp437"),$.ISO8859_1=new $(J.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),$.ISO8859_2=new $(J.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),$.ISO8859_3=new $(J.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),$.ISO8859_4=new $(J.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),$.ISO8859_5=new $(J.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),$.ISO8859_6=new $(J.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),$.ISO8859_7=new $(J.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),$.ISO8859_8=new $(J.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),$.ISO8859_9=new $(J.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),$.ISO8859_10=new $(J.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),$.ISO8859_11=new $(J.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),$.ISO8859_13=new $(J.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),$.ISO8859_14=new $(J.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),$.ISO8859_15=new $(J.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),$.ISO8859_16=new $(J.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),$.SJIS=new $(J.SJIS,20,"SJIS","Shift_JIS"),$.Cp1250=new $(J.Cp1250,21,"Cp1250","windows-1250"),$.Cp1251=new $(J.Cp1251,22,"Cp1251","windows-1251"),$.Cp1252=new $(J.Cp1252,23,"Cp1252","windows-1252"),$.Cp1256=new $(J.Cp1256,24,"Cp1256","windows-1256"),$.UnicodeBigUnmarked=new $(J.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),$.UTF8=new $(J.UTF8,26,"UTF8","UTF-8"),$.ASCII=new $(J.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),$.Big5=new $(J.Big5,28,"Big5"),$.GB18030=new $(J.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),$.EUC_KR=new $(J.EUC_KR,30,"EUC_KR","EUC-KR");class Ae extends m{}Ae.kind="UnsupportedOperationException";class nt{static decode(r,s){const a=this.encodingName(s);return this.customDecoder?this.customDecoder(r,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(r,a):new TextDecoder(a).decode(r)}static shouldDecodeOnFallback(r){return!nt.isBrowser()&&r==="ISO-8859-1"}static encode(r,s){const a=this.encodingName(s);return this.customEncoder?this.customEncoder(r,a):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof $?r:$.getCharacterSetECIByName(r)}static decodeFallback(r,s){const a=this.encodingCharacterSet(s);if(nt.isDecodeFallbackSupported(a)){let c="";for(let u=0,d=r.length;u<d;u++){let h=r[u].toString(16);h.length<2&&(h="0"+h),c+="%"+h}return decodeURIComponent(c)}if(a.equals($.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new Ae(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals($.UTF8)||r.equals($.ISO8859_1)||r.equals($.ASCII)}static encodeFallback(r){const a=btoa(unescape(encodeURIComponent(r))).split(""),c=[];for(let u=0;u<a.length;u++)c.push(a[u].charCodeAt(0));return new Uint8Array(c)}}class pe{static castAsNonUtf8Char(r,s=null){const a=s?s.getName():this.ISO88591;return nt.decode(new Uint8Array([r]),a)}static guessEncoding(r,s){if(s!=null&&s.get(Z.CHARACTER_SET)!==void 0)return s.get(Z.CHARACTER_SET).toString();const a=r.length;let c=!0,u=!0,d=!0,h=0,g=0,x=0,y=0,_=0,S=0,T=0,D=0,P=0,L=0,V=0;const ne=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let ie=0;ie<a&&(c||u||d);ie++){const Q=r[ie]&255;d&&(h>0?Q&128?h--:d=!1:Q&128&&(Q&64?(h++,Q&32?(h++,Q&16?(h++,Q&8?d=!1:y++):x++):g++):d=!1)),c&&(Q>127&&Q<160?c=!1:Q>159&&(Q<192||Q===215||Q===247)&&V++),u&&(_>0?Q<64||Q===127||Q>252?u=!1:_--:Q===128||Q===160||Q>239?u=!1:Q>160&&Q<224?(S++,D=0,T++,T>P&&(P=T)):Q>127?(_++,T=0,D++,D>L&&(L=D)):(T=0,D=0))}return d&&h>0&&(d=!1),u&&_>0&&(u=!1),d&&(ne||g+x+y>0)?pe.UTF8:u&&(pe.ASSUME_SHIFT_JIS||P>=3||L>=3)?pe.SHIFT_JIS:c&&u?P===2&&S===2||V*10>=a?pe.SHIFT_JIS:pe.ISO88591:c?pe.ISO88591:u?pe.SHIFT_JIS:d?pe.UTF8:pe.PLATFORM_DEFAULT_ENCODING}static format(r,...s){let a=-1;function c(d,h,g,x,y,_){if(d==="%%")return"%";if(s[++a]===void 0)return;d=x?parseInt(x.substr(1)):void 0;let S=y?parseInt(y.substr(1)):void 0,T;switch(_){case"s":T=s[a];break;case"c":T=s[a][0];break;case"f":T=parseFloat(s[a]).toFixed(d);break;case"p":T=parseFloat(s[a]).toPrecision(d);break;case"e":T=parseFloat(s[a]).toExponential(d);break;case"x":T=parseInt(s[a]).toString(S||16);break;case"d":T=parseFloat(parseInt(s[a],S||10).toPrecision(d)).toFixed(0);break}T=typeof T=="object"?JSON.stringify(T):(+T).toString(S);let D=parseInt(g),P=g&&g[0]+""=="0"?"0":" ";for(;T.length<D;)T=h!==void 0?T+P:P+T;return T}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,c)}static getBytes(r,s){return nt.encode(r,s)}static getCharCode(r,s=0){return r.charCodeAt(s)}static getCharAt(r){return String.fromCharCode(r)}}pe.SHIFT_JIS=$.SJIS.getName(),pe.GB2312="GB2312",pe.ISO88591=$.ISO8859_1.getName(),pe.EUC_JP="EUC_JP",pe.UTF8=$.UTF8.getName(),pe.PLATFORM_DEFAULT_ENCODING=pe.UTF8,pe.ASSUME_SHIFT_JIS=!1;class Oe{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=pe.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,s,a){for(let c=s;s<s+a;c++)this.append(r[c]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+1)}substring(r,s){return this.value.substring(r,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+s.length)}}class Te{constructor(r,s,a,c){if(this.width=r,this.height=s,this.rowSize=a,this.bits=c,s==null&&(s=r),this.height=s,r<1||s<1)throw new v("Both dimensions must be greater than 0");a==null&&(a=Math.floor((r+31)/32)),this.rowSize=a,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const s=r.length,a=r[0].length,c=new Te(a,s);for(let u=0;u<s;u++){const d=r[u];for(let h=0;h<a;h++)d[h]&&c.set(h,u)}return c}static parseFromString(r,s,a){if(r===null)throw new v("stringRepresentation cannot be null");const c=new Array(r.length);let u=0,d=0,h=-1,g=0,x=0;for(;x<r.length;)if(r.charAt(x)===`
`||r.charAt(x)==="\r"){if(u>d){if(h===-1)h=u-d;else if(u-d!==h)throw new v("row lengths do not match");d=u,g++}x++}else if(r.substring(x,x+s.length)===s)x+=s.length,c[u]=!0,u++;else if(r.substring(x,x+a.length)===a)x+=a.length,c[u]=!1,u++;else throw new v("illegal character encountered: "+r.substring(x));if(u>d){if(h===-1)h=u-d;else if(u-d!==h)throw new v("row lengths do not match");g++}const y=new Te(h,g);for(let _=0;_<u;_++)c[_]&&y.set(Math.floor(_%h),Math.floor(_/h));return y}get(r,s){const a=s*this.rowSize+Math.floor(r/32);return(this.bits[a]>>>(r&31)&1)!==0}set(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]|=1<<(r&31)&4294967295}unset(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]&=~(1<<(r&31)&4294967295)}flip(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new v("input matrix dimensions do not match");const s=new U(Math.floor(this.width/32)+1),a=this.rowSize,c=this.bits;for(let u=0,d=this.height;u<d;u++){const h=u*a,g=r.getRow(u,s).getBitArray();for(let x=0;x<a;x++)c[h+x]^=g[x]}}clear(){const r=this.bits,s=r.length;for(let a=0;a<s;a++)r[a]=0}setRegion(r,s,a,c){if(s<0||r<0)throw new v("Left and top must be nonnegative");if(c<1||a<1)throw new v("Height and width must be at least 1");const u=r+a,d=s+c;if(d>this.height||u>this.width)throw new v("The region must fit inside the matrix");const h=this.rowSize,g=this.bits;for(let x=s;x<d;x++){const y=x*h;for(let _=r;_<u;_++)g[y+Math.floor(_/32)]|=1<<(_&31)&4294967295}}getRow(r,s){s==null||s.getSize()<this.width?s=new U(this.width):s.clear();const a=this.rowSize,c=this.bits,u=r*a;for(let d=0;d<a;d++)s.setBulk(d*32,c[u+d]);return s}setRow(r,s){B.arraycopy(s.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),s=this.getHeight();let a=new U(r),c=new U(r);for(let u=0,d=Math.floor((s+1)/2);u<d;u++)a=this.getRow(u,a),c=this.getRow(s-1-u,c),a.reverse(),c.reverse(),this.setRow(u,c),this.setRow(s-1-u,a)}getEnclosingRectangle(){const r=this.width,s=this.height,a=this.rowSize,c=this.bits;let u=r,d=s,h=-1,g=-1;for(let x=0;x<s;x++)for(let y=0;y<a;y++){const _=c[x*a+y];if(_!==0){if(x<d&&(d=x),x>g&&(g=x),y*32<u){let S=0;for(;!(_<<31-S&4294967295);)S++;y*32+S<u&&(u=y*32+S)}if(y*32+31>h){let S=31;for(;!(_>>>S);)S--;y*32+S>h&&(h=y*32+S)}}}return h<u||g<d?null:Int32Array.from([u,d,h-u+1,g-d+1])}getTopLeftOnBit(){const r=this.rowSize,s=this.bits;let a=0;for(;a<s.length&&s[a]===0;)a++;if(a===s.length)return null;const c=a/r;let u=a%r*32;const d=s[a];let h=0;for(;!(d<<31-h&4294967295);)h++;return u+=h,Int32Array.from([u,c])}getBottomRightOnBit(){const r=this.rowSize,s=this.bits;let a=s.length-1;for(;a>=0&&s[a]===0;)a--;if(a<0)return null;const c=Math.floor(a/r);let u=Math.floor(a%r)*32;const d=s[a];let h=31;for(;!(d>>>h);)h--;return u+=h,Int32Array.from([u,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof Te))return!1;const s=r;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&N.equals(this.bits,s.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+N.hashCode(this.bits),r}toString(r="X ",s="  ",a=`
`){return this.buildToString(r,s,a)}buildToString(r,s,a){let c=new Oe;for(let u=0,d=this.height;u<d;u++){for(let h=0,g=this.width;h<g;h++)c.append(this.get(h,u)?r:s);c.append(a)}return c.toString()}clone(){return new Te(this.width,this.height,this.rowSize,this.bits.slice())}}class H extends m{static getNotFoundInstance(){return new H}}H.kind="NotFoundException";class ct extends M{constructor(r){super(r),this.luminances=ct.EMPTY,this.buckets=new Int32Array(ct.LUMINANCE_BUCKETS)}getBlackRow(r,s){const a=this.getLuminanceSource(),c=a.getWidth();s==null||s.getSize()<c?s=new U(c):s.clear(),this.initArrays(c);const u=a.getRow(r,this.luminances),d=this.buckets;for(let g=0;g<c;g++)d[(u[g]&255)>>ct.LUMINANCE_SHIFT]++;const h=ct.estimateBlackPoint(d);if(c<3)for(let g=0;g<c;g++)(u[g]&255)<h&&s.set(g);else{let g=u[0]&255,x=u[1]&255;for(let y=1;y<c-1;y++){const _=u[y+1]&255;(x*4-g-_)/2<h&&s.set(y),g=x,x=_}}return s}getBlackMatrix(){const r=this.getLuminanceSource(),s=r.getWidth(),a=r.getHeight(),c=new Te(s,a);this.initArrays(s);const u=this.buckets;for(let g=1;g<5;g++){const x=Math.floor(a*g/5),y=r.getRow(x,this.luminances),_=Math.floor(s*4/5);for(let S=Math.floor(s/5);S<_;S++){const T=y[S]&255;u[T>>ct.LUMINANCE_SHIFT]++}}const d=ct.estimateBlackPoint(u),h=r.getMatrix();for(let g=0;g<a;g++){const x=g*s;for(let y=0;y<s;y++)(h[x+y]&255)<d&&c.set(y,g)}return c}createBinarizer(r){return new ct(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const s=this.buckets;for(let a=0;a<ct.LUMINANCE_BUCKETS;a++)s[a]=0}static estimateBlackPoint(r){const s=r.length;let a=0,c=0,u=0;for(let y=0;y<s;y++)r[y]>u&&(c=y,u=r[y]),r[y]>a&&(a=r[y]);let d=0,h=0;for(let y=0;y<s;y++){const _=y-c,S=r[y]*_*_;S>h&&(d=y,h=S)}if(c>d){const y=c;c=d,d=y}if(d-c<=s/16)throw new H;let g=d-1,x=-1;for(let y=d-1;y>c;y--){const _=y-c,S=_*_*(d-y)*(a-r[y]);S>x&&(g=y,x=S)}return g<<ct.LUMINANCE_SHIFT}}ct.LUMINANCE_BITS=5,ct.LUMINANCE_SHIFT=8-ct.LUMINANCE_BITS,ct.LUMINANCE_BUCKETS=1<<ct.LUMINANCE_BITS,ct.EMPTY=Uint8ClampedArray.from([0]);class Ee extends ct{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),s=r.getWidth(),a=r.getHeight();if(s>=Ee.MINIMUM_DIMENSION&&a>=Ee.MINIMUM_DIMENSION){const c=r.getMatrix();let u=s>>Ee.BLOCK_SIZE_POWER;s&Ee.BLOCK_SIZE_MASK&&u++;let d=a>>Ee.BLOCK_SIZE_POWER;a&Ee.BLOCK_SIZE_MASK&&d++;const h=Ee.calculateBlackPoints(c,u,d,s,a),g=new Te(s,a);Ee.calculateThresholdForBlock(c,u,d,s,a,h,g),this.matrix=g}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new Ee(r)}static calculateThresholdForBlock(r,s,a,c,u,d,h){const g=u-Ee.BLOCK_SIZE,x=c-Ee.BLOCK_SIZE;for(let y=0;y<a;y++){let _=y<<Ee.BLOCK_SIZE_POWER;_>g&&(_=g);const S=Ee.cap(y,2,a-3);for(let T=0;T<s;T++){let D=T<<Ee.BLOCK_SIZE_POWER;D>x&&(D=x);const P=Ee.cap(T,2,s-3);let L=0;for(let ne=-2;ne<=2;ne++){const ie=d[S+ne];L+=ie[P-2]+ie[P-1]+ie[P]+ie[P+1]+ie[P+2]}const V=L/25;Ee.thresholdBlock(r,D,_,V,c,h)}}}static cap(r,s,a){return r<s?s:r>a?a:r}static thresholdBlock(r,s,a,c,u,d){for(let h=0,g=a*u+s;h<Ee.BLOCK_SIZE;h++,g+=u)for(let x=0;x<Ee.BLOCK_SIZE;x++)(r[g+x]&255)<=c&&d.set(s+x,a+h)}static calculateBlackPoints(r,s,a,c,u){const d=u-Ee.BLOCK_SIZE,h=c-Ee.BLOCK_SIZE,g=new Array(a);for(let x=0;x<a;x++){g[x]=new Int32Array(s);let y=x<<Ee.BLOCK_SIZE_POWER;y>d&&(y=d);for(let _=0;_<s;_++){let S=_<<Ee.BLOCK_SIZE_POWER;S>h&&(S=h);let T=0,D=255,P=0;for(let V=0,ne=y*c+S;V<Ee.BLOCK_SIZE;V++,ne+=c){for(let ie=0;ie<Ee.BLOCK_SIZE;ie++){const Q=r[ne+ie]&255;T+=Q,Q<D&&(D=Q),Q>P&&(P=Q)}if(P-D>Ee.MIN_DYNAMIC_RANGE)for(V++,ne+=c;V<Ee.BLOCK_SIZE;V++,ne+=c)for(let ie=0;ie<Ee.BLOCK_SIZE;ie++)T+=r[ne+ie]&255}let L=T>>Ee.BLOCK_SIZE_POWER*2;if(P-D<=Ee.MIN_DYNAMIC_RANGE&&(L=D/2,x>0&&_>0)){const V=(g[x-1][_]+2*g[x][_-1]+g[x-1][_-1])/4;D<V&&(L=V)}g[x][_]=L}}return g}}Ee.BLOCK_SIZE_POWER=3,Ee.BLOCK_SIZE=1<<Ee.BLOCK_SIZE_POWER,Ee.BLOCK_SIZE_MASK=Ee.BLOCK_SIZE-1,Ee.MINIMUM_DIMENSION=Ee.BLOCK_SIZE*5,Ee.MIN_DYNAMIC_RANGE=24;class ae{constructor(r,s){this.width=r,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,s,a,c){throw new Ae("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Ae("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Ae("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let s=new Oe;for(let a=0;a<this.height;a++){const c=this.getRow(a,r);for(let u=0;u<this.width;u++){const d=c[u]&255;let h;d<64?h="#":d<128?h="+":d<192?h=".":h=" ",s.append(h)}s.append(`
`)}return s.toString()}}class we extends ae{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,s){const a=this.delegate.getRow(r,s),c=this.getWidth();for(let u=0;u<c;u++)a[u]=255-(a[u]&255);return a}getMatrix(){const r=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(s);for(let c=0;c<s;c++)a[c]=255-(r[c]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(r,s,a,c){return new we(this.delegate.crop(r,s,a,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new we(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new we(this.delegate.rotateCounterClockwise45())}}class xe extends ae{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=xe.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const s=r.getContext("2d").getImageData(0,0,r.width,r.height);return xe.toGrayscaleBuffer(s.data,r.width,r.height)}static toGrayscaleBuffer(r,s,a){const c=new Uint8ClampedArray(s*a);for(let u=0,d=0,h=r.length;u<h;u+=4,d++){let g;if(r[u+3]===0)g=255;else{const y=r[u],_=r[u+1],S=r[u+2];g=306*y+601*_+117*S+512>>10}c[d]=g}return c}getRow(r,s){if(r<0||r>=this.getHeight())throw new v("Requested row is outside the image: "+r);const a=this.getWidth(),c=r*a;return s===null?s=this.buffer.slice(c,c+a):(s.length<a&&(s=new Uint8ClampedArray(a)),s.set(this.buffer.slice(c,c+a))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,s,a,c){return super.crop(r,s,a,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const s=this.getTempCanvasElement(),a=s.getContext("2d"),c=r*xe.DEGREE_TO_RADIANS,u=this.canvas.width,d=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(c))*u+Math.abs(Math.sin(c))*d),g=Math.ceil(Math.abs(Math.sin(c))*u+Math.abs(Math.cos(c))*d);return s.width=h,s.height=g,a.translate(h/2,g/2),a.rotate(c),a.drawImage(this.canvas,u/-2,d/-2),this.buffer=xe.makeBufferFromCanvasImageData(s),this}invert(){return new we(this)}}xe.DEGREE_TO_RADIANS=Math.PI/180;class X{constructor(r,s,a){this.deviceId=r,this.label=s,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var oe=(globalThis||ha||self||window||void 0)&&(globalThis||ha||self||window||void 0).__awaiter||function(C,r,s,a){function c(u){return u instanceof s?u:new s(function(d){d(u)})}return new(s||(s=Promise))(function(u,d){function h(y){try{x(a.next(y))}catch(_){d(_)}}function g(y){try{x(a.throw(y))}catch(_){d(_)}}function x(y){y.done?u(y.value):c(y.value).then(h,g)}x((a=a.apply(C,r||[])).next())})};class Ge{constructor(r,s=500,a){this.reader=r,this.timeBetweenScansMillis=s,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return oe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const a of r){const c=a.kind==="video"?"videoinput":a.kind;if(c!=="videoinput")continue;const u=a.deviceId||a.id,d=a.label||`Video device ${s.length+1}`,h=a.groupId,g={deviceId:u,label:d,kind:c,groupId:h};s.push(g)}return s})}getVideoInputDevices(){return oe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new X(s.deviceId,s.label))})}findDeviceById(r){return oe(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(a=>a.deviceId===r):null})}decodeFromInputVideoDevice(r,s){return oe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,s)})}decodeOnceFromVideoDevice(r,s){return oe(this,void 0,void 0,function*(){this.reset();let a;r?a={deviceId:{exact:r}}:a={facingMode:"environment"};const c={video:a};return yield this.decodeOnceFromConstraints(c,s)})}decodeOnceFromConstraints(r,s){return oe(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(a,s)})}decodeOnceFromStream(r,s){return oe(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(r,s);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(r,s,a){return oe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,s,a)})}decodeFromVideoDevice(r,s,a){return oe(this,void 0,void 0,function*(){let c;r?c={deviceId:{exact:r}}:c={facingMode:"environment"};const u={video:c};return yield this.decodeFromConstraints(u,s,a)})}decodeFromConstraints(r,s,a){return oe(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(c,s,a)})}decodeFromStream(r,s,a){return oe(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(r,s);return yield this.decodeContinuously(c,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,s){return oe(this,void 0,void 0,function*(){const a=this.prepareVideoElement(s);return this.addVideoSource(a,r),this.videoElement=a,this.stream=r,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(r){return new Promise((s,a)=>this.playVideoOnLoad(r,()=>s()))}playVideoOnLoad(r,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",s),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return oe(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,s){const a=document.getElementById(r);if(!a)throw new E(`element with id '${r}' not found`);if(a.nodeName.toLowerCase()!==s.toLowerCase())throw new E(`element with id '${r}' must be an ${s} element`);return a}decodeFromImage(r,s){if(!r&&!s)throw new E("either imageElement with a src set or an url must be provided");return s&&!r?this.decodeFromImageUrl(s):this.decodeFromImageElement(r)}decodeFromVideo(r,s){if(!r&&!s)throw new E("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,s,a){if(r===void 0&&s===void 0)throw new E("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrlContinuously(s,a):this.decodeFromVideoElementContinuously(r,a)}decodeFromImageElement(r){if(!r)throw new E("An image element must be provided.");this.reset();const s=this.prepareImageElement(r);this.imageElement=s;let a;return this.isImageLoaded(s)?a=this.decodeOnce(s,!1,!0):a=this._decodeOnLoadImage(s),a}decodeFromVideoElement(r){const s=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(r,s){const a=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(a,s)}_decodeFromVideoElementSetup(r){if(!r)throw new E("A video element must be provided.");this.reset();const s=this.prepareVideoElement(r);return this.videoElement=s,s}decodeFromImageUrl(r){if(!r)throw new E("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const a=this._decodeOnLoadImage(s);return s.src=r,a}decodeFromVideoUrl(r){if(!r)throw new E("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),a=this.decodeFromVideoElement(s);return s.src=r,a}decodeFromVideoUrlContinuously(r,s){if(!r)throw new E("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(a,s);return a.src=r,c}_decodeOnLoadImage(r){return new Promise((s,a)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(s,a),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return oe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,s){return oe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,s)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let s;return typeof r>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(s=r),s}prepareVideoElement(r){let s;return!r&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(s=r),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(r,s=!0,a=!0){this._stopAsyncDecode=!1;const c=(u,d)=>{if(this._stopAsyncDecode){d(new H("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(r);u(h)}catch(h){const g=s&&h instanceof H,y=(h instanceof R||h instanceof z)&&a;if(g||y)return setTimeout(c,this._timeBetweenDecodingAttempts,u,d);d(h)}};return new Promise((u,d)=>c(u,d))}decodeContinuously(r,s){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(r);s(c,null),setTimeout(a,this.timeBetweenScansMillis)}catch(c){s(null,c);const u=c instanceof R||c instanceof z,d=c instanceof H;(u||d)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(r){const s=this.createBinaryBitmap(r);return this.decodeBitmap(s)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,s,a){s||(s={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(r,s,a=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const s=this.getCaptureCanvas(r),a=new xe(s),c=new Ee(a);return new A(c)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const s=this.createCaptureCanvas(r);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let a,c;return typeof r<"u"&&(r instanceof HTMLVideoElement?(a=r.videoWidth,c=r.videoHeight):r instanceof HTMLImageElement&&(a=r.naturalWidth||r.width,c=r.naturalHeight||r.height)),s.style.width=a+"px",s.style.height=c+"px",s.width=a,s.height=c,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,s){try{r.srcObject=s}catch{r.src=URL.createObjectURL(s)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class ue{constructor(r,s,a=s==null?0:8*s.length,c,u,d=B.currentTimeMillis()){this.text=r,this.rawBytes=s,this.numBits=a,this.resultPoints=c,this.format=u,this.timestamp=d,this.text=r,this.rawBytes=s,a==null?this.numBits=s==null?0:8*s.length:this.numBits=a,this.resultPoints=c,this.format=u,this.resultMetadata=null,d==null?this.timestamp=B.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,s)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const s=this.resultPoints;if(s===null)this.resultPoints=r;else if(r!==null&&r.length>0){const a=new Array(s.length+r.length);B.arraycopy(s,0,a,0,s.length),B.arraycopy(r,0,a,s.length,r.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var _t;(function(C){C[C.AZTEC=0]="AZTEC",C[C.CODABAR=1]="CODABAR",C[C.CODE_39=2]="CODE_39",C[C.CODE_93=3]="CODE_93",C[C.CODE_128=4]="CODE_128",C[C.DATA_MATRIX=5]="DATA_MATRIX",C[C.EAN_8=6]="EAN_8",C[C.EAN_13=7]="EAN_13",C[C.ITF=8]="ITF",C[C.MAXICODE=9]="MAXICODE",C[C.PDF_417=10]="PDF_417",C[C.QR_CODE=11]="QR_CODE",C[C.RSS_14=12]="RSS_14",C[C.RSS_EXPANDED=13]="RSS_EXPANDED",C[C.UPC_A=14]="UPC_A",C[C.UPC_E=15]="UPC_E",C[C.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(_t||(_t={}));var ce=_t,bn;(function(C){C[C.OTHER=0]="OTHER",C[C.ORIENTATION=1]="ORIENTATION",C[C.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",C[C.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",C[C.ISSUE_NUMBER=4]="ISSUE_NUMBER",C[C.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",C[C.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",C[C.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",C[C.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",C[C.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",C[C.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(bn||(bn={}));var Pe=bn;class Mr{constructor(r,s,a,c,u=-1,d=-1){this.rawBytes=r,this.text=s,this.byteSegments=a,this.ecLevel=c,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=d,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Cr{exp(r){return this.expTable[r]}log(r){if(r===0)throw new v;return this.logTable[r]}static addOrSubtract(r,s){return r^s}}class Lt{constructor(r,s){if(s.length===0)throw new v;this.field=r;const a=s.length;if(a>1&&s[0]===0){let c=1;for(;c<a&&s[c]===0;)c++;c===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-c),B.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const s=this.coefficients;let a;if(r===1){a=0;for(let d=0,h=s.length;d!==h;d++){const g=s[d];a=Cr.addOrSubtract(a,g)}return a}a=s[0];const c=s.length,u=this.field;for(let d=1;d<c;d++)a=Cr.addOrSubtract(u.multiply(r,a),s[d]);return a}addOrSubtract(r){if(!this.field.equals(r.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,a=r.coefficients;if(s.length>a.length){const d=s;s=a,a=d}let c=new Int32Array(a.length);const u=a.length-s.length;B.arraycopy(a,0,c,0,u);for(let d=u;d<a.length;d++)c[d]=Cr.addOrSubtract(s[d-u],a[d]);return new Lt(this.field,c)}multiply(r){if(!this.field.equals(r.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const s=this.coefficients,a=s.length,c=r.coefficients,u=c.length,d=new Int32Array(a+u-1),h=this.field;for(let g=0;g<a;g++){const x=s[g];for(let y=0;y<u;y++)d[g+y]=Cr.addOrSubtract(d[g+y],h.multiply(x,c[y]))}return new Lt(h,d)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const s=this.coefficients.length,a=this.field,c=new Int32Array(s),u=this.coefficients;for(let d=0;d<s;d++)c[d]=a.multiply(u[d],r);return new Lt(a,c)}multiplyByMonomial(r,s){if(r<0)throw new v;if(s===0)return this.field.getZero();const a=this.coefficients,c=a.length,u=new Int32Array(c+r),d=this.field;for(let h=0;h<c;h++)u[h]=d.multiply(a[h],s);return new Lt(d,u)}divide(r){if(!this.field.equals(r.field))throw new v("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new v("Divide by 0");const s=this.field;let a=s.getZero(),c=this;const u=r.getCoefficient(r.getDegree()),d=s.inverse(u);for(;c.getDegree()>=r.getDegree()&&!c.isZero();){const h=c.getDegree()-r.getDegree(),g=s.multiply(c.getCoefficient(c.getDegree()),d),x=r.multiplyByMonomial(h,g),y=s.buildMonomial(h,g);a=a.addOrSubtract(y),c=c.addOrSubtract(x)}return[a,c]}toString(){let r="";for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);if(a!==0){if(a<0?(r+=" - ",a=-a):r.length>0&&(r+=" + "),s===0||a!==1){const c=this.field.log(a);c===0?r+="1":c===1?r+="a":(r+="a^",r+=c)}s!==0&&(s===1?r+="x":(r+="x^",r+=s))}}return r}}class Ws extends m{}Ws.kind="ArithmeticException";class We extends Cr{constructor(r,s,a){super(),this.primitive=r,this.size=s,this.generatorBase=a;const c=new Int32Array(s);let u=1;for(let h=0;h<s;h++)c[h]=u,u*=2,u>=s&&(u^=r,u&=s-1);this.expTable=c;const d=new Int32Array(s);for(let h=0;h<s-1;h++)d[c[h]]=h;this.logTable=d,this.zero=new Lt(this,Int32Array.from([0])),this.one=new Lt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new v;if(s===0)return this.zero;const a=new Int32Array(r+1);return a[0]=s,new Lt(this,a)}inverse(r){if(r===0)throw new Ws;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+k.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}We.AZTEC_DATA_12=new We(4201,4096,1),We.AZTEC_DATA_10=new We(1033,1024,1),We.AZTEC_DATA_6=new We(67,64,1),We.AZTEC_PARAM=new We(19,16,1),We.QR_CODE_FIELD_256=new We(285,256,0),We.DATA_MATRIX_FIELD_256=new We(301,256,1),We.AZTEC_DATA_8=We.DATA_MATRIX_FIELD_256,We.MAXICODE_FIELD_64=We.AZTEC_DATA_6;class Zr extends m{}Zr.kind="ReedSolomonException";class ar extends m{}ar.kind="IllegalStateException";class wi{constructor(r){this.field=r}decode(r,s){const a=this.field,c=new Lt(a,r),u=new Int32Array(s);let d=!0;for(let T=0;T<s;T++){const D=c.evaluateAt(a.exp(T+a.getGeneratorBase()));u[u.length-1-T]=D,D!==0&&(d=!1)}if(d)return;const h=new Lt(a,u),g=this.runEuclideanAlgorithm(a.buildMonomial(s,1),h,s),x=g[0],y=g[1],_=this.findErrorLocations(x),S=this.findErrorMagnitudes(y,_);for(let T=0;T<_.length;T++){const D=r.length-1-a.log(_[T]);if(D<0)throw new Zr("Bad error location");r[D]=We.addOrSubtract(r[D],S[T])}}runEuclideanAlgorithm(r,s,a){if(r.getDegree()<s.getDegree()){const T=r;r=s,s=T}const c=this.field;let u=r,d=s,h=c.getZero(),g=c.getOne();for(;d.getDegree()>=(a/2|0);){let T=u,D=h;if(u=d,h=g,u.isZero())throw new Zr("r_{i-1} was zero");d=T;let P=c.getZero();const L=u.getCoefficient(u.getDegree()),V=c.inverse(L);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){const ne=d.getDegree()-u.getDegree(),ie=c.multiply(d.getCoefficient(d.getDegree()),V);P=P.addOrSubtract(c.buildMonomial(ne,ie)),d=d.addOrSubtract(u.multiplyByMonomial(ne,ie))}if(g=P.multiply(h).addOrSubtract(D),d.getDegree()>=u.getDegree())throw new ar("Division algorithm failed to reduce polynomial?")}const x=g.getCoefficient(0);if(x===0)throw new Zr("sigmaTilde(0) was zero");const y=c.inverse(x),_=g.multiplyScalar(y),S=d.multiplyScalar(y);return[_,S]}findErrorLocations(r){const s=r.getDegree();if(s===1)return Int32Array.from([r.getCoefficient(1)]);const a=new Int32Array(s);let c=0;const u=this.field;for(let d=1;d<u.getSize()&&c<s;d++)r.evaluateAt(d)===0&&(a[c]=u.inverse(d),c++);if(c!==s)throw new Zr("Error locator degree does not match number of roots");return a}findErrorMagnitudes(r,s){const a=s.length,c=new Int32Array(a),u=this.field;for(let d=0;d<a;d++){const h=u.inverse(s[d]);let g=1;for(let x=0;x<a;x++)if(d!==x){const y=u.multiply(s[x],h),_=y&1?y&-2:y|1;g=u.multiply(g,_)}c[d]=u.multiply(r.evaluateAt(h),u.inverse(g)),u.getGeneratorBase()!==0&&(c[d]=u.multiply(c[d],h))}return c}}var Ht;(function(C){C[C.UPPER=0]="UPPER",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.DIGIT=3]="DIGIT",C[C.PUNCT=4]="PUNCT",C[C.BINARY=5]="BINARY"})(Ht||(Ht={}));class ot{decode(r){this.ddata=r;let s=r.getBits(),a=this.extractBits(s),c=this.correctBits(a),u=ot.convertBoolArrayToByteArray(c),d=ot.getEncodedData(c),h=new Mr(u,d,null,null);return h.setNumBits(c.length),h}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let s=r.length,a=Ht.UPPER,c=Ht.UPPER,u="",d=0;for(;d<s;)if(c===Ht.BINARY){if(s-d<5)break;let h=ot.readCode(r,d,5);if(d+=5,h===0){if(s-d<11)break;h=ot.readCode(r,d,11)+31,d+=11}for(let g=0;g<h;g++){if(s-d<8){d=s;break}const x=ot.readCode(r,d,8);u+=pe.castAsNonUtf8Char(x),d+=8}c=a}else{let h=c===Ht.DIGIT?4:5;if(s-d<h)break;let g=ot.readCode(r,d,h);d+=h;let x=ot.getCharacter(c,g);x.startsWith("CTRL_")?(a=c,c=ot.getTable(x.charAt(5)),x.charAt(6)==="L"&&(a=c)):(u+=x,c=a)}return u}static getTable(r){switch(r){case"L":return Ht.LOWER;case"P":return Ht.PUNCT;case"M":return Ht.MIXED;case"D":return Ht.DIGIT;case"B":return Ht.BINARY;case"U":default:return Ht.UPPER}}static getCharacter(r,s){switch(r){case Ht.UPPER:return ot.UPPER_TABLE[s];case Ht.LOWER:return ot.LOWER_TABLE[s];case Ht.MIXED:return ot.MIXED_TABLE[s];case Ht.PUNCT:return ot.PUNCT_TABLE[s];case Ht.DIGIT:return ot.DIGIT_TABLE[s];default:throw new ar("Bad table")}}correctBits(r){let s,a;this.ddata.getNbLayers()<=2?(a=6,s=We.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,s=We.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,s=We.AZTEC_DATA_10):(a=12,s=We.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),u=r.length/a;if(u<c)throw new z;let d=r.length%a,h=new Int32Array(u);for(let S=0;S<u;S++,d+=a)h[S]=ot.readCode(r,d,a);try{new wi(s).decode(h,u-c)}catch(S){throw new z(S)}let g=(1<<a)-1,x=0;for(let S=0;S<c;S++){let T=h[S];if(T===0||T===g)throw new z;(T===1||T===g-1)&&x++}let y=new Array(c*a-x),_=0;for(let S=0;S<c;S++){let T=h[S];if(T===1||T===g-1)y.fill(T>1,_,_+a-1),_+=a-1;else for(let D=a-1;D>=0;--D)y[_++]=(T&1<<D)!==0}return y}extractBits(r){let s=this.ddata.isCompact(),a=this.ddata.getNbLayers(),c=(s?11:14)+a*4,u=new Int32Array(c),d=new Array(this.totalBitsInLayer(a,s));if(s)for(let h=0;h<u.length;h++)u[h]=h;else{let h=c+1+2*k.truncDivision(k.truncDivision(c,2)-1,15),g=c/2,x=k.truncDivision(h,2);for(let y=0;y<g;y++){let _=y+k.truncDivision(y,15);u[g-y-1]=x-_-1,u[g+y]=x+_+1}}for(let h=0,g=0;h<a;h++){let x=(a-h)*4+(s?9:12),y=h*2,_=c-1-y;for(let S=0;S<x;S++){let T=S*2;for(let D=0;D<2;D++)d[g+T+D]=r.get(u[y+D],u[y+S]),d[g+2*x+T+D]=r.get(u[y+S],u[_-D]),d[g+4*x+T+D]=r.get(u[_-D],u[_-S]),d[g+6*x+T+D]=r.get(u[_-S],u[y+D])}g+=x*8}return d}static readCode(r,s,a){let c=0;for(let u=s;u<s+a;u++)c<<=1,r[u]&&(c|=1);return c}static readByte(r,s){let a=r.length-s;return a>=8?ot.readCode(r,s,8):ot.readCode(r,s,a)<<8-a}static convertBoolArrayToByteArray(r){let s=new Uint8Array((r.length+7)/8);for(let a=0;a<s.length;a++)s[a]=ot.readByte(r,8*a);return s}totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}ot.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ot.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ot.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ot.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ot.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ue{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,s,a,c){const u=r-a,d=s-c;return Math.sqrt(u*u+d*d)}static sum(r){let s=0;for(let a=0,c=r.length;a!==c;a++){const u=r[a];s+=u}return s}}class Vs{static floatToIntBits(r){return r}}Vs.MAX_VALUE=Number.MAX_SAFE_INTEGER;class he{constructor(r,s){this.x=r,this.y=s}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof he){const s=r;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*Vs.floatToIntBits(this.x)+Vs.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const s=this.distance(r[0],r[1]),a=this.distance(r[1],r[2]),c=this.distance(r[0],r[2]);let u,d,h;if(a>=s&&a>=c?(d=r[0],u=r[1],h=r[2]):c>=a&&c>=s?(d=r[1],u=r[0],h=r[2]):(d=r[2],u=r[0],h=r[1]),this.crossProductZ(u,d,h)<0){const g=u;u=h,h=g}r[0]=u,r[1]=d,r[2]=h}static distance(r,s){return Ue.distance(r.x,r.y,s.x,s.y)}static crossProductZ(r,s,a){const c=s.x,u=s.y;return(a.x-c)*(r.y-u)-(a.y-u)*(r.x-c)}}class Hs{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class ra extends Hs{constructor(r,s,a,c,u){super(r,s),this.compact=a,this.nbDatablocks=c,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class _r{constructor(r,s,a,c){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),s==null&&(s=_r.INIT_SIZE),a==null&&(a=r.getWidth()/2|0),c==null&&(c=r.getHeight()/2|0);const u=s/2|0;if(this.leftInit=a-u,this.rightInit=a+u,this.upInit=c-u,this.downInit=c+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new H}detect(){let r=this.leftInit,s=this.rightInit,a=this.upInit,c=this.downInit,u=!1,d=!0,h=!1,g=!1,x=!1,y=!1,_=!1;const S=this.width,T=this.height;for(;d;){d=!1;let D=!0;for(;(D||!g)&&s<S;)D=this.containsBlackPoint(a,c,s,!1),D?(s++,d=!0,g=!0):g||s++;if(s>=S){u=!0;break}let P=!0;for(;(P||!x)&&c<T;)P=this.containsBlackPoint(r,s,c,!0),P?(c++,d=!0,x=!0):x||c++;if(c>=T){u=!0;break}let L=!0;for(;(L||!y)&&r>=0;)L=this.containsBlackPoint(a,c,r,!1),L?(r--,d=!0,y=!0):y||r--;if(r<0){u=!0;break}let V=!0;for(;(V||!_)&&a>=0;)V=this.containsBlackPoint(r,s,a,!0),V?(a--,d=!0,_=!0):_||a--;if(a<0){u=!0;break}d&&(h=!0)}if(!u&&h){const D=s-r;let P=null;for(let ie=1;P===null&&ie<D;ie++)P=this.getBlackPointOnSegment(r,c-ie,r+ie,c);if(P==null)throw new H;let L=null;for(let ie=1;L===null&&ie<D;ie++)L=this.getBlackPointOnSegment(r,a+ie,r+ie,a);if(L==null)throw new H;let V=null;for(let ie=1;V===null&&ie<D;ie++)V=this.getBlackPointOnSegment(s,a+ie,s-ie,a);if(V==null)throw new H;let ne=null;for(let ie=1;ne===null&&ie<D;ie++)ne=this.getBlackPointOnSegment(s,c-ie,s-ie,c);if(ne==null)throw new H;return this.centerEdges(ne,P,V,L)}else throw new H}getBlackPointOnSegment(r,s,a,c){const u=Ue.round(Ue.distance(r,s,a,c)),d=(a-r)/u,h=(c-s)/u,g=this.image;for(let x=0;x<u;x++){const y=Ue.round(r+x*d),_=Ue.round(s+x*h);if(g.get(y,_))return new he(y,_)}return null}centerEdges(r,s,a,c){const u=r.getX(),d=r.getY(),h=s.getX(),g=s.getY(),x=a.getX(),y=a.getY(),_=c.getX(),S=c.getY(),T=_r.CORR;return u<this.width/2?[new he(_-T,S+T),new he(h+T,g+T),new he(x-T,y-T),new he(u+T,d-T)]:[new he(_+T,S+T),new he(h+T,g-T),new he(x-T,y+T),new he(u-T,d-T)]}containsBlackPoint(r,s,a,c){const u=this.image;if(c){for(let d=r;d<=s;d++)if(u.get(d,a))return!0}else for(let d=r;d<=s;d++)if(u.get(a,d))return!0;return!1}}_r.INIT_SIZE=10,_r.CORR=1;class ia{static checkAndNudgePoints(r,s){const a=r.getWidth(),c=r.getHeight();let u=!0;for(let d=0;d<s.length&&u;d+=2){const h=Math.floor(s[d]),g=Math.floor(s[d+1]);if(h<-1||h>a||g<-1||g>c)throw new H;u=!1,h===-1?(s[d]=0,u=!0):h===a&&(s[d]=a-1,u=!0),g===-1?(s[d+1]=0,u=!0):g===c&&(s[d+1]=c-1,u=!0)}u=!0;for(let d=s.length-2;d>=0&&u;d-=2){const h=Math.floor(s[d]),g=Math.floor(s[d+1]);if(h<-1||h>a||g<-1||g>c)throw new H;u=!1,h===-1?(s[d]=0,u=!0):h===a&&(s[d]=a-1,u=!0),g===-1?(s[d+1]=0,u=!0):g===c&&(s[d+1]=c-1,u=!0)}}}class j{constructor(r,s,a,c,u,d,h,g,x){this.a11=r,this.a21=s,this.a31=a,this.a12=c,this.a22=u,this.a32=d,this.a13=h,this.a23=g,this.a33=x}static quadrilateralToQuadrilateral(r,s,a,c,u,d,h,g,x,y,_,S,T,D,P,L){const V=j.quadrilateralToSquare(r,s,a,c,u,d,h,g);return j.squareToQuadrilateral(x,y,_,S,T,D,P,L).times(V)}transformPoints(r){const s=r.length,a=this.a11,c=this.a12,u=this.a13,d=this.a21,h=this.a22,g=this.a23,x=this.a31,y=this.a32,_=this.a33;for(let S=0;S<s;S+=2){const T=r[S],D=r[S+1],P=u*T+g*D+_;r[S]=(a*T+d*D+x)/P,r[S+1]=(c*T+h*D+y)/P}}transformPointsWithValues(r,s){const a=this.a11,c=this.a12,u=this.a13,d=this.a21,h=this.a22,g=this.a23,x=this.a31,y=this.a32,_=this.a33,S=r.length;for(let T=0;T<S;T++){const D=r[T],P=s[T],L=u*D+g*P+_;r[T]=(a*D+d*P+x)/L,s[T]=(c*D+h*P+y)/L}}static squareToQuadrilateral(r,s,a,c,u,d,h,g){const x=r-a+u-h,y=s-c+d-g;if(x===0&&y===0)return new j(a-r,u-a,r,c-s,d-c,s,0,0,1);{const _=a-u,S=h-u,T=c-d,D=g-d,P=_*D-S*T,L=(x*D-S*y)/P,V=(_*y-x*T)/P;return new j(a-r+L*a,h-r+V*h,r,c-s+L*c,g-s+V*g,s,L,V,1)}}static quadrilateralToSquare(r,s,a,c,u,d,h,g){return j.squareToQuadrilateral(r,s,a,c,u,d,h,g).buildAdjoint()}buildAdjoint(){return new j(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new j(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class ge extends ia{sampleGrid(r,s,a,c,u,d,h,g,x,y,_,S,T,D,P,L,V,ne,ie){const Q=j.quadrilateralToQuadrilateral(c,u,d,h,g,x,y,_,S,T,D,P,L,V,ne,ie);return this.sampleGridWithTransform(r,s,a,Q)}sampleGridWithTransform(r,s,a,c){if(s<=0||a<=0)throw new H;const u=new Te(s,a),d=new Float32Array(2*s);for(let h=0;h<a;h++){const g=d.length,x=h+.5;for(let y=0;y<g;y+=2)d[y]=y/2+.5,d[y+1]=x;c.transformPoints(d),ia.checkAndNudgePoints(r,d);try{for(let y=0;y<g;y+=2)r.get(Math.floor(d[y]),Math.floor(d[y+1]))&&u.set(y/2,h)}catch{throw new H}}return u}}class Ie{static setGridSampler(r){Ie.gridSampler=r}static getInstance(){return Ie.gridSampler}}Ie.gridSampler=new ge;class Ce{constructor(r,s){this.x=r,this.y=s}toResultPoint(){return new he(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ke{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let s=this.getMatrixCenter(),a=this.getBullsEyeCorners(s);if(r){let d=a[0];a[0]=a[2],a[2]=d}this.extractParameters(a);let c=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),u=this.getMatrixCornerPoints(a);return new ra(c,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new H;let s=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(r[0],r[1],s),this.sampleLine(r[1],r[2],s),this.sampleLine(r[2],r[3],s),this.sampleLine(r[3],r[0],s)]);this.shift=this.getRotation(a,s);let c=0;for(let d=0;d<4;d++){let h=a[(this.shift+d)%4];this.compact?(c<<=7,c+=h>>1&127):(c<<=10,c+=(h>>2&992)+(h>>1&31))}let u=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(r,s){let a=0;r.forEach((c,u,d)=>{let h=(c>>s-2<<1)+(c&1);a=(a<<3)+h}),a=((a&1)<<11)+(a>>1);for(let c=0;c<4;c++)if(k.bitCount(a^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new H}getCorrectedParameterData(r,s){let a,c;s?(a=7,c=2):(a=10,c=4);let u=a-c,d=new Int32Array(a);for(let g=a-1;g>=0;--g)d[g]=r&15,r>>=4;try{new wi(We.AZTEC_PARAM).decode(d,u)}catch{throw new H}let h=0;for(let g=0;g<c;g++)h=(h<<4)+d[g];return h}getBullsEyeCorners(r){let s=r,a=r,c=r,u=r,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let _=this.getFirstDifferent(s,d,1,-1),S=this.getFirstDifferent(a,d,1,1),T=this.getFirstDifferent(c,d,-1,1),D=this.getFirstDifferent(u,d,-1,-1);if(this.nbCenterLayers>2){let P=this.distancePoint(D,_)*this.nbCenterLayers/(this.distancePoint(u,s)*(this.nbCenterLayers+2));if(P<.75||P>1.25||!this.isWhiteOrBlackRectangle(_,S,T,D))break}s=_,a=S,c=T,u=D,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new H;this.compact=this.nbCenterLayers===5;let h=new he(s.getX()+.5,s.getY()-.5),g=new he(a.getX()+.5,a.getY()+.5),x=new he(c.getX()-.5,c.getY()+.5),y=new he(u.getX()-.5,u.getY()-.5);return this.expandSquare([h,g,x,y],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,s,a,c;try{let h=new _r(this.image).detect();r=h[0],s=h[1],a=h[2],c=h[3]}catch{let g=this.image.getWidth()/2,x=this.image.getHeight()/2;r=this.getFirstDifferent(new Ce(g+7,x-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Ce(g+7,x+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Ce(g-7,x+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Ce(g-7,x-7),!1,-1,-1).toResultPoint()}let u=Ue.round((r.getX()+c.getX()+s.getX()+a.getX())/4),d=Ue.round((r.getY()+c.getY()+s.getY()+a.getY())/4);try{let h=new _r(this.image,15,u,d).detect();r=h[0],s=h[1],a=h[2],c=h[3]}catch{r=this.getFirstDifferent(new Ce(u+7,d-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Ce(u+7,d+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Ce(u-7,d+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Ce(u-7,d-7),!1,-1,-1).toResultPoint()}return u=Ue.round((r.getX()+c.getX()+s.getX()+a.getX())/4),d=Ue.round((r.getY()+c.getY()+s.getY()+a.getY())/4),new Ce(u,d)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,s,a,c,u){let d=Ie.getInstance(),h=this.getDimension(),g=h/2-this.nbCenterLayers,x=h/2+this.nbCenterLayers;return d.sampleGrid(r,h,h,g,g,x,g,x,x,g,x,s.getX(),s.getY(),a.getX(),a.getY(),c.getX(),c.getY(),u.getX(),u.getY())}sampleLine(r,s,a){let c=0,u=this.distanceResultPoint(r,s),d=u/a,h=r.getX(),g=r.getY(),x=d*(s.getX()-r.getX())/u,y=d*(s.getY()-r.getY())/u;for(let _=0;_<a;_++)this.image.get(Ue.round(h+_*x),Ue.round(g+_*y))&&(c|=1<<a-_-1);return c}isWhiteOrBlackRectangle(r,s,a,c){let u=3;r=new Ce(r.getX()-u,r.getY()+u),s=new Ce(s.getX()-u,s.getY()-u),a=new Ce(a.getX()+u,a.getY()-u),c=new Ce(c.getX()+u,c.getY()+u);let d=this.getColor(c,r);if(d===0)return!1;let h=this.getColor(r,s);return h!==d||(h=this.getColor(s,a),h!==d)?!1:(h=this.getColor(a,c),h===d)}getColor(r,s){let a=this.distancePoint(r,s),c=(s.getX()-r.getX())/a,u=(s.getY()-r.getY())/a,d=0,h=r.getX(),g=r.getY(),x=this.image.get(r.getX(),r.getY()),y=Math.ceil(a);for(let S=0;S<y;S++)h+=c,g+=u,this.image.get(Ue.round(h),Ue.round(g))!==x&&d++;let _=d/a;return _>.1&&_<.9?0:_<=.1===x?1:-1}getFirstDifferent(r,s,a,c){let u=r.getX()+a,d=r.getY()+c;for(;this.isValid(u,d)&&this.image.get(u,d)===s;)u+=a,d+=c;for(u-=a,d-=c;this.isValid(u,d)&&this.image.get(u,d)===s;)u+=a;for(u-=a;this.isValid(u,d)&&this.image.get(u,d)===s;)d+=c;return d-=c,new Ce(u,d)}expandSquare(r,s,a){let c=a/(2*s),u=r[0].getX()-r[2].getX(),d=r[0].getY()-r[2].getY(),h=(r[0].getX()+r[2].getX())/2,g=(r[0].getY()+r[2].getY())/2,x=new he(h+c*u,g+c*d),y=new he(h-c*u,g-c*d);u=r[1].getX()-r[3].getX(),d=r[1].getY()-r[3].getY(),h=(r[1].getX()+r[3].getX())/2,g=(r[1].getY()+r[3].getY())/2;let _=new he(h+c*u,g+c*d),S=new he(h-c*u,g-c*d);return[x,_,y,S]}isValid(r,s){return r>=0&&r<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(r){let s=Ue.round(r.getX()),a=Ue.round(r.getY());return this.isValid(s,a)}distancePoint(r,s){return Ue.distance(r.getX(),r.getY(),s.getX(),s.getY())}distanceResultPoint(r,s){return Ue.distance(r.getX(),r.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(k.truncDivision(this.nbLayers-4,8)+1)+15}}class Xe{decode(r,s=null){let a=null,c=new ke(r.getBlackMatrix()),u=null,d=null;try{let y=c.detectMirror(!1);u=y.getPoints(),this.reportFoundResultPoints(s,u),d=new ot().decode(y)}catch(y){a=y}if(d==null)try{let y=c.detectMirror(!0);u=y.getPoints(),this.reportFoundResultPoints(s,u),d=new ot().decode(y)}catch(y){throw a??y}let h=new ue(d.getText(),d.getRawBytes(),d.getNumBits(),u,ce.AZTEC,B.currentTimeMillis()),g=d.getByteSegments();g!=null&&h.putMetadata(Pe.BYTE_SEGMENTS,g);let x=d.getECLevel();return x!=null&&h.putMetadata(Pe.ERROR_CORRECTION_LEVEL,x),h}reportFoundResultPoints(r,s){if(r!=null){let a=r.get(Z.NEED_RESULT_POINT_CALLBACK);a!=null&&s.forEach((c,u,d)=>{a.foundPossibleResultPoint(c)})}}reset(){}}class Gt extends Ge{constructor(r=500){super(new Xe,r)}}class Ke{decode(r,s){try{return this.doDecode(r,s)}catch{if(s&&s.get(Z.TRY_HARDER)===!0&&r.isRotateSupported()){const u=r.rotateCounterClockwise(),d=this.doDecode(u,s),h=d.getResultMetadata();let g=270;h!==null&&h.get(Pe.ORIENTATION)===!0&&(g=g+h.get(Pe.ORIENTATION)%360),d.putMetadata(Pe.ORIENTATION,g);const x=d.getResultPoints();if(x!==null){const y=u.getHeight();for(let _=0;_<x.length;_++)x[_]=new he(y-x[_].getY()-1,x[_].getX())}return d}else throw new H}}reset(){}doDecode(r,s){const a=r.getWidth(),c=r.getHeight();let u=new U(a);const d=s&&s.get(Z.TRY_HARDER)===!0,h=Math.max(1,c>>(d?8:5));let g;d?g=c:g=15;const x=Math.trunc(c/2);for(let y=0;y<g;y++){const _=Math.trunc((y+1)/2),S=(y&1)===0,T=x+h*(S?_:-_);if(T<0||T>=c)break;try{u=r.getBlackRow(T,u)}catch{continue}for(let D=0;D<2;D++){if(D===1&&(u.reverse(),s&&s.get(Z.NEED_RESULT_POINT_CALLBACK)===!0)){const P=new Map;s.forEach((L,V)=>P.set(V,L)),P.delete(Z.NEED_RESULT_POINT_CALLBACK),s=P}try{const P=this.decodeRow(T,u,s);if(D===1){P.putMetadata(Pe.ORIENTATION,180);const L=P.getResultPoints();L!==null&&(L[0]=new he(a-L[0].getX()-1,L[0].getY()),L[1]=new he(a-L[1].getX()-1,L[1].getY()))}return P}catch{}}}throw new H}static recordPattern(r,s,a){const c=a.length;for(let x=0;x<c;x++)a[x]=0;const u=r.getSize();if(s>=u)throw new H;let d=!r.get(s),h=0,g=s;for(;g<u;){if(r.get(g)!==d)a[h]++;else{if(++h===c)break;a[h]=1,d=!d}g++}if(!(h===c||h===c-1&&g===u))throw new H}static recordPatternInReverse(r,s,a){let c=a.length,u=r.get(s);for(;s>0&&c>=0;)r.get(--s)!==u&&(c--,u=!u);if(c>=0)throw new H;Ke.recordPattern(r,s+1,a)}static patternMatchVariance(r,s,a){const c=r.length;let u=0,d=0;for(let x=0;x<c;x++)u+=r[x],d+=s[x];if(u<d)return Number.POSITIVE_INFINITY;const h=u/d;a*=h;let g=0;for(let x=0;x<c;x++){const y=r[x],_=s[x]*h,S=y>_?y-_:_-y;if(S>a)return Number.POSITIVE_INFINITY;g+=S}return g/u}}class re extends Ke{static findStartPattern(r){const s=r.getSize(),a=r.getNextSet(0);let c=0,u=Int32Array.from([0,0,0,0,0,0]),d=a,h=!1;const g=6;for(let x=a;x<s;x++)if(r.get(x)!==h)u[c]++;else{if(c===g-1){let y=re.MAX_AVG_VARIANCE,_=-1;for(let S=re.CODE_START_A;S<=re.CODE_START_C;S++){const T=Ke.patternMatchVariance(u,re.CODE_PATTERNS[S],re.MAX_INDIVIDUAL_VARIANCE);T<y&&(y=T,_=S)}if(_>=0&&r.isRange(Math.max(0,d-(x-d)/2),d,!1))return Int32Array.from([d,x,_]);d+=u[0]+u[1],u=u.slice(2,u.length-1),u[c-1]=0,u[c]=0,c--}else c++;u[c]=1,h=!h}throw new H}static decodeCode(r,s,a){Ke.recordPattern(r,a,s);let c=re.MAX_AVG_VARIANCE,u=-1;for(let d=0;d<re.CODE_PATTERNS.length;d++){const h=re.CODE_PATTERNS[d],g=this.patternMatchVariance(s,h,re.MAX_INDIVIDUAL_VARIANCE);g<c&&(c=g,u=d)}if(u>=0)return u;throw new H}decodeRow(r,s,a){const c=a&&a.get(Z.ASSUME_GS1)===!0,u=re.findStartPattern(s),d=u[2];let h=0;const g=new Uint8Array(20);g[h++]=d;let x;switch(d){case re.CODE_START_A:x=re.CODE_CODE_A;break;case re.CODE_START_B:x=re.CODE_CODE_B;break;case re.CODE_START_C:x=re.CODE_CODE_C;break;default:throw new z}let y=!1,_=!1,S="",T=u[0],D=u[1];const P=Int32Array.from([0,0,0,0,0,0]);let L=0,V=0,ne=d,ie=0,Q=!0,Fe=!1,Ne=!1;for(;!y;){const eo=_;switch(_=!1,L=V,V=re.decodeCode(s,P,D),g[h++]=V,V!==re.CODE_STOP&&(Q=!0),V!==re.CODE_STOP&&(ie++,ne+=ie*V),T=D,D+=P.reduce((e_,t_)=>e_+t_,0),V){case re.CODE_START_A:case re.CODE_START_B:case re.CODE_START_C:throw new z}switch(x){case re.CODE_CODE_A:if(V<64)Ne===Fe?S+=String.fromCharCode(32+V):S+=String.fromCharCode(32+V+128),Ne=!1;else if(V<96)Ne===Fe?S+=String.fromCharCode(V-64):S+=String.fromCharCode(V+64),Ne=!1;else switch(V!==re.CODE_STOP&&(Q=!1),V){case re.CODE_FNC_1:c&&(S.length===0?S+="]C1":S+="");break;case re.CODE_FNC_2:case re.CODE_FNC_3:break;case re.CODE_FNC_4_A:!Fe&&Ne?(Fe=!0,Ne=!1):Fe&&Ne?(Fe=!1,Ne=!1):Ne=!0;break;case re.CODE_SHIFT:_=!0,x=re.CODE_CODE_B;break;case re.CODE_CODE_B:x=re.CODE_CODE_B;break;case re.CODE_CODE_C:x=re.CODE_CODE_C;break;case re.CODE_STOP:y=!0;break}break;case re.CODE_CODE_B:if(V<96)Ne===Fe?S+=String.fromCharCode(32+V):S+=String.fromCharCode(32+V+128),Ne=!1;else switch(V!==re.CODE_STOP&&(Q=!1),V){case re.CODE_FNC_1:c&&(S.length===0?S+="]C1":S+="");break;case re.CODE_FNC_2:case re.CODE_FNC_3:break;case re.CODE_FNC_4_B:!Fe&&Ne?(Fe=!0,Ne=!1):Fe&&Ne?(Fe=!1,Ne=!1):Ne=!0;break;case re.CODE_SHIFT:_=!0,x=re.CODE_CODE_A;break;case re.CODE_CODE_A:x=re.CODE_CODE_A;break;case re.CODE_CODE_C:x=re.CODE_CODE_C;break;case re.CODE_STOP:y=!0;break}break;case re.CODE_CODE_C:if(V<100)V<10&&(S+="0"),S+=V;else switch(V!==re.CODE_STOP&&(Q=!1),V){case re.CODE_FNC_1:c&&(S.length===0?S+="]C1":S+="");break;case re.CODE_CODE_A:x=re.CODE_CODE_A;break;case re.CODE_CODE_B:x=re.CODE_CODE_B;break;case re.CODE_STOP:y=!0;break}break}eo&&(x=x===re.CODE_CODE_A?re.CODE_CODE_B:re.CODE_CODE_A)}const Ln=D-T;if(D=s.getNextUnset(D),!s.isRange(D,Math.min(s.getSize(),D+(D-T)/2),!1))throw new H;if(ne-=ie*L,ne%103!==L)throw new R;const br=S.length;if(br===0)throw new H;br>0&&Q&&(x===re.CODE_CODE_C?S=S.substring(0,br-2):S=S.substring(0,br-1));const Fn=(u[1]+u[0])/2,dt=T+Ln/2,un=g.length,$n=new Uint8Array(un);for(let eo=0;eo<un;eo++)$n[eo]=g[eo];const Js=[new he(Fn,r),new he(dt,r)];return new ue(S,$n,0,Js,ce.CODE_128,new Date().getTime())}}re.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],re.MAX_AVG_VARIANCE=.25,re.MAX_INDIVIDUAL_VARIANCE=.7,re.CODE_SHIFT=98,re.CODE_CODE_C=99,re.CODE_CODE_B=100,re.CODE_CODE_A=101,re.CODE_FNC_1=102,re.CODE_FNC_2=97,re.CODE_FNC_3=96,re.CODE_FNC_4_A=101,re.CODE_FNC_4_B=100,re.CODE_START_A=103,re.CODE_START_B=104,re.CODE_START_C=105,re.CODE_STOP=106;class Et extends Ke{constructor(r=!1,s=!1){super(),this.usingCheckDigit=r,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,s,a){let c=this.counters;c.fill(0),this.decodeRowResult="";let u=Et.findAsteriskPattern(s,c),d=s.getNextSet(u[1]),h=s.getSize(),g,x;do{Et.recordPattern(s,d,c);let P=Et.toNarrowWidePattern(c);if(P<0)throw new H;g=Et.patternToChar(P),this.decodeRowResult+=g,x=d;for(let L of c)d+=L;d=s.getNextSet(d)}while(g!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let y=0;for(let P of c)y+=P;let _=d-x-y;if(d!==h&&_*2<y)throw new H;if(this.usingCheckDigit){let P=this.decodeRowResult.length-1,L=0;for(let V=0;V<P;V++)L+=Et.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(V));if(this.decodeRowResult.charAt(P)!==Et.ALPHABET_STRING.charAt(L%43))throw new R;this.decodeRowResult=this.decodeRowResult.substring(0,P)}if(this.decodeRowResult.length===0)throw new H;let S;this.extendedMode?S=Et.decodeExtended(this.decodeRowResult):S=this.decodeRowResult;let T=(u[1]+u[0])/2,D=x+y/2;return new ue(S,null,0,[new he(T,r),new he(D,r)],ce.CODE_39,new Date().getTime())}static findAsteriskPattern(r,s){let a=r.getSize(),c=r.getNextSet(0),u=0,d=c,h=!1,g=s.length;for(let x=c;x<a;x++)if(r.get(x)!==h)s[u]++;else{if(u===g-1){if(this.toNarrowWidePattern(s)===Et.ASTERISK_ENCODING&&r.isRange(Math.max(0,d-Math.floor((x-d)/2)),d,!1))return[d,x];d+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,h=!h}throw new H}static toNarrowWidePattern(r){let s=r.length,a=0,c;do{let u=2147483647;for(let g of r)g<u&&g>a&&(u=g);a=u,c=0;let d=0,h=0;for(let g=0;g<s;g++){let x=r[g];x>a&&(h|=1<<s-1-g,c++,d+=x)}if(c===3){for(let g=0;g<s&&c>0;g++){let x=r[g];if(x>a&&(c--,x*2>=d))return-1}return h}}while(c>3);return-1}static patternToChar(r){for(let s=0;s<Et.CHARACTER_ENCODINGS.length;s++)if(Et.CHARACTER_ENCODINGS[s]===r)return Et.ALPHABET_STRING.charAt(s);if(r===Et.ASTERISK_ENCODING)return"*";throw new H}static decodeExtended(r){let s=r.length,a="";for(let c=0;c<s;c++){let u=r.charAt(c);if(u==="+"||u==="$"||u==="%"||u==="/"){let d=r.charAt(c+1),h="\0";switch(u){case"+":if(d>="A"&&d<="Z")h=String.fromCharCode(d.charCodeAt(0)+32);else throw new z;break;case"$":if(d>="A"&&d<="Z")h=String.fromCharCode(d.charCodeAt(0)-64);else throw new z;break;case"%":if(d>="A"&&d<="E")h=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")h=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")h=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")h=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")h="\0";else if(d==="V")h="@";else if(d==="W")h="`";else if(d==="X"||d==="Y"||d==="Z")h="";else throw new z;break;case"/":if(d>="A"&&d<="O")h=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")h=":";else throw new z;break}a+=h,c++}else a+=u}return a}}Et.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Et.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Et.ASTERISK_ENCODING=148;class it extends Ke{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,s,a){let c=this.decodeStart(s),u=this.decodeEnd(s),d=new Oe;it.decodeMiddle(s,c[1],u[0],d);let h=d.toString(),g=null;a!=null&&(g=a.get(Z.ALLOWED_LENGTHS)),g==null&&(g=it.DEFAULT_ALLOWED_LENGTHS);let x=h.length,y=!1,_=0;for(let D of g){if(x===D){y=!0;break}D>_&&(_=D)}if(!y&&x>_&&(y=!0),!y)throw new z;const S=[new he(c[1],r),new he(u[0],r)];return new ue(h,null,0,S,ce.ITF,new Date().getTime())}static decodeMiddle(r,s,a,c){let u=new Int32Array(10),d=new Int32Array(5),h=new Int32Array(5);for(u.fill(0),d.fill(0),h.fill(0);s<a;){Ke.recordPattern(r,s,u);for(let x=0;x<5;x++){let y=2*x;d[x]=u[y],h[x]=u[y+1]}let g=it.decodeDigit(d);c.append(g.toString()),g=this.decodeDigit(h),c.append(g.toString()),u.forEach(function(x){s+=x})}}decodeStart(r){let s=it.skipWhiteSpace(r),a=it.findGuardPattern(r,s,it.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a}validateQuietZone(r,s){let a=this.narrowLineWidth*10;a=a<s?a:s;for(let c=s-1;a>0&&c>=0&&!r.get(c);c--)a--;if(a!==0)throw new H}static skipWhiteSpace(r){const s=r.getSize(),a=r.getNextSet(0);if(a===s)throw new H;return a}decodeEnd(r){r.reverse();try{let s=it.skipWhiteSpace(r),a;try{a=it.findGuardPattern(r,s,it.END_PATTERN_REVERSED[0])}catch(u){u instanceof H&&(a=it.findGuardPattern(r,s,it.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);let c=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-c,a}finally{r.reverse()}}static findGuardPattern(r,s,a){let c=a.length,u=new Int32Array(c),d=r.getSize(),h=!1,g=0,x=s;u.fill(0);for(let y=s;y<d;y++)if(r.get(y)!==h)u[g]++;else{if(g===c-1){if(Ke.patternMatchVariance(u,a,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE)return[x,y];x+=u[0]+u[1],B.arraycopy(u,2,u,0,g-1),u[g-1]=0,u[g]=0,g--}else g++;u[g]=1,h=!h}throw new H}static decodeDigit(r){let s=it.MAX_AVG_VARIANCE,a=-1,c=it.PATTERNS.length;for(let u=0;u<c;u++){let d=it.PATTERNS[u],h=Ke.patternMatchVariance(r,d,it.MAX_INDIVIDUAL_VARIANCE);h<s?(s=h,a=u):h===s&&(a=-1)}if(a>=0)return a%10;throw new H}}it.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],it.MAX_AVG_VARIANCE=.38,it.MAX_INDIVIDUAL_VARIANCE=.5,it.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],it.START_PATTERN=Int32Array.from([1,1,1,1]),it.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class bt extends Ke{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let s=!1,a,c=0,u=Int32Array.from([0,0,0]);for(;!s;){u=Int32Array.from([0,0,0]),a=bt.findGuardPattern(r,c,!1,this.START_END_PATTERN,u);let d=a[0];c=a[1];let h=d-(c-d);h>=0&&(s=r.isRange(h,d,!1))}return a}static checkChecksum(r){return bt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let a=parseInt(r.charAt(s-1),10);return bt.getStandardUPCEANChecksum(r.substring(0,s-1))===a}static getStandardUPCEANChecksum(r){let s=r.length,a=0;for(let c=s-1;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new z;a+=u}a*=3;for(let c=s-2;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new z;a+=u}return(1e3-a)%10}static decodeEnd(r,s){return bt.findGuardPattern(r,s,!1,bt.START_END_PATTERN,new Int32Array(bt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,s,a,c){return this.findGuardPattern(r,s,a,c,new Int32Array(c.length))}static findGuardPattern(r,s,a,c,u){let d=r.getSize();s=a?r.getNextUnset(s):r.getNextSet(s);let h=0,g=s,x=c.length,y=a;for(let _=s;_<d;_++)if(r.get(_)!==y)u[h]++;else{if(h===x-1){if(Ke.patternMatchVariance(u,c,bt.MAX_INDIVIDUAL_VARIANCE)<bt.MAX_AVG_VARIANCE)return Int32Array.from([g,_]);g+=u[0]+u[1];let S=u.slice(2,u.length-1);for(let T=0;T<h-1;T++)u[T]=S[T];u[h-1]=0,u[h]=0,h--}else h++;u[h]=1,y=!y}throw new H}static decodeDigit(r,s,a,c){this.recordPattern(r,a,s);let u=this.MAX_AVG_VARIANCE,d=-1,h=c.length;for(let g=0;g<h;g++){let x=c[g],y=Ke.patternMatchVariance(s,x,bt.MAX_INDIVIDUAL_VARIANCE);y<u&&(u=y,d=g)}if(d>=0)return d;throw new H}}bt.MAX_AVG_VARIANCE=.48,bt.MAX_INDIVIDUAL_VARIANCE=.7,bt.START_END_PATTERN=Int32Array.from([1,1,1]),bt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),bt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),bt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class an{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(s,a,c),d=c.toString(),h=an.parseExtensionString(d),g=[new he((a[0]+a[1])/2,r),new he(u,r)],x=new ue(d,null,0,g,ce.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&x.putAllMetadata(h),x}decodeMiddle(r,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1],h=0;for(let x=0;x<5&&d<u;x++){let y=bt.decodeDigit(r,c,d,bt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+y%10);for(let _ of c)d+=_;y>=10&&(h|=1<<4-x),x!==4&&(d=r.getNextSet(d),d=r.getNextUnset(d))}if(a.length!==5)throw new H;let g=this.determineCheckDigit(h);if(an.extensionChecksum(a.toString())!==g)throw new H;return d}static extensionChecksum(r){let s=r.length,a=0;for(let c=s-2;c>=0;c-=2)a+=r.charAt(c).charCodeAt(0)-48;a*=3;for(let c=s-1;c>=0;c-=2)a+=r.charAt(c).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(r){for(let s=0;s<10;s++)if(r===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new H}static parseExtensionString(r){if(r.length!==5)return null;let s=an.parseExtension5String(r);return s==null?null:new Map([[Pe.SUGGESTED_PRICE,s]])}static parseExtension5String(r){let s;switch(r.charAt(0)){case"0":s="£";break;case"5":s="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let a=parseInt(r.substring(1)),c=(a/100).toString(),u=a%100,d=u<10?"0"+u:u.toString();return s+c+"."+d}}class Gs{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(s,a,c),d=c.toString(),h=Gs.parseExtensionString(d),g=[new he((a[0]+a[1])/2,r),new he(u,r)],x=new ue(d,null,0,g,ce.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&x.putAllMetadata(h),x}decodeMiddle(r,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1],h=0;for(let g=0;g<2&&d<u;g++){let x=bt.decodeDigit(r,c,d,bt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+x%10);for(let y of c)d+=y;x>=10&&(h|=1<<1-g),g!==1&&(d=r.getNextSet(d),d=r.getNextUnset(d))}if(a.length!==2)throw new H;if(parseInt(a.toString())%4!==h)throw new H;return d}static parseExtensionString(r){return r.length!==2?null:new Map([[Pe.ISSUE_NUMBER,parseInt(r)]])}}class q1{static decodeRow(r,s,a){let c=bt.findGuardPattern(s,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new an().decodeRow(r,s,c)}catch{return new Gs().decodeRow(r,s,c)}}}q1.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Je extends bt{constructor(){super(),this.decodeRowStringBuffer="",Je.L_AND_G_PATTERNS=Je.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let s=Je.L_PATTERNS[r-10],a=new Int32Array(s.length);for(let c=0;c<s.length;c++)a[c]=s[s.length-c-1];Je.L_AND_G_PATTERNS[r]=a}}decodeRow(r,s,a){let c=Je.findStartGuardPattern(s),u=a==null?null:a.get(Z.NEED_RESULT_POINT_CALLBACK);if(u!=null){const Q=new he((c[0]+c[1])/2,r);u.foundPossibleResultPoint(Q)}let d=this.decodeMiddle(s,c,this.decodeRowStringBuffer),h=d.rowOffset,g=d.resultString;if(u!=null){const Q=new he(h,r);u.foundPossibleResultPoint(Q)}let x=this.decodeEnd(s,h);if(u!=null){const Q=new he((x[0]+x[1])/2,r);u.foundPossibleResultPoint(Q)}let y=x[1],_=y+(y-x[0]);if(_>=s.getSize()||!s.isRange(y,_,!1))throw new H;let S=g.toString();if(S.length<8)throw new z;if(!Je.checkChecksum(S))throw new R;let T=(c[1]+c[0])/2,D=(x[1]+x[0])/2,P=this.getBarcodeFormat(),L=[new he(T,r),new he(D,r)],V=new ue(S,null,0,L,P,new Date().getTime()),ne=0;try{let Q=q1.decodeRow(r,s,x[1]);V.putMetadata(Pe.UPC_EAN_EXTENSION,Q.getText()),V.putAllMetadata(Q.getResultMetadata()),V.addResultPoints(Q.getResultPoints()),ne=Q.getText().length}catch{}let ie=a==null?null:a.get(Z.ALLOWED_EAN_EXTENSIONS);if(ie!=null){let Q=!1;for(let Fe in ie)if(ne.toString()===Fe){Q=!0;break}if(!Q)throw new H}return V}decodeEnd(r,s){return Je.findGuardPattern(r,s,!1,Je.START_END_PATTERN,new Int32Array(Je.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return Je.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let a=parseInt(r.charAt(s-1),10);return Je.getStandardUPCEANChecksum(r.substring(0,s-1))===a}static getStandardUPCEANChecksum(r){let s=r.length,a=0;for(let c=s-1;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new z;a+=u}a*=3;for(let c=s-2;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new z;a+=u}return(1e3-a)%10}}class rs extends Je{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1],h=0;for(let x=0;x<6&&d<u;x++){let y=Je.decodeDigit(r,c,d,Je.L_AND_G_PATTERNS);a+=String.fromCharCode(48+y%10);for(let _ of c)d+=_;y>=10&&(h|=1<<5-x)}a=rs.determineFirstDigit(a,h),d=Je.findGuardPattern(r,d,!0,Je.MIDDLE_PATTERN,new Int32Array(Je.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<6&&d<u;x++){let y=Je.decodeDigit(r,c,d,Je.L_PATTERNS);a+=String.fromCharCode(48+y);for(let _ of c)d+=_}return{rowOffset:d,resultString:a}}getBarcodeFormat(){return ce.EAN_13}static determineFirstDigit(r,s){for(let a=0;a<10;a++)if(s===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new H}}rs.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Z1 extends Je{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,a){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1];for(let g=0;g<4&&d<u;g++){let x=Je.decodeDigit(r,c,d,Je.L_PATTERNS);a+=String.fromCharCode(48+x);for(let y of c)d+=y}d=Je.findGuardPattern(r,d,!0,Je.MIDDLE_PATTERN,new Int32Array(Je.MIDDLE_PATTERN.length).fill(0))[1];for(let g=0;g<4&&d<u;g++){let x=Je.decodeDigit(r,c,d,Je.L_PATTERNS);a+=String.fromCharCode(48+x);for(let y of c)d+=y}return{rowOffset:d,resultString:a}}getBarcodeFormat(){return ce.EAN_8}}class Q1 extends Je{constructor(){super(...arguments),this.ean13Reader=new rs}getBarcodeFormat(){return ce.UPC_A}decode(r,s){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,s,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,s,a))}decodeMiddle(r,s,a){return this.ean13Reader.decodeMiddle(r,s,a)}maybeReturnResult(r){let s=r.getText();if(s.charAt(0)==="0"){let a=new ue(s.substring(1),null,null,r.getResultPoints(),ce.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new H}reset(){this.ean13Reader.reset()}}class Er extends Je{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,s,a){const c=this.decodeMiddleCounters.map(x=>x);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const u=r.getSize();let d=s[1],h=0;for(let x=0;x<6&&d<u;x++){const y=Er.decodeDigit(r,c,d,Er.L_AND_G_PATTERNS);a+=String.fromCharCode(48+y%10);for(let _ of c)d+=_;y>=10&&(h|=1<<5-x)}let g=Er.determineNumSysAndCheckDigit(a,h);return{rowOffset:d,resultString:g}}decodeEnd(r,s){return Er.findGuardPatternWithoutCounters(r,s,!0,Er.MIDDLE_END_PATTERN)}checkChecksum(r){return Je.checkChecksum(Er.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,s){for(let a=0;a<=1;a++)for(let c=0;c<10;c++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][c]){let u=String.fromCharCode(48+a),d=String.fromCharCode(48+c);return u+r+d}throw H.getNotFoundInstance()}getBarcodeFormat(){return ce.UPC_E}static convertUPCEtoUPCA(r){const s=r.slice(1,7).split("").map(u=>u.charCodeAt(0)),a=new Oe;a.append(r.charAt(0));let c=s[5];switch(c){case 0:case 1:case 2:a.appendChars(s,0,2),a.append(c),a.append("0000"),a.appendChars(s,2,3);break;case 3:a.appendChars(s,0,3),a.append("00000"),a.appendChars(s,3,2);break;case 4:a.appendChars(s,0,4),a.append("00000"),a.append(s[4]);break;default:a.appendChars(s,0,5),a.append("0000"),a.append(c);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()}}Er.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Er.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class md extends Ke{constructor(r){super();let s=r==null?null:r.get(Z.POSSIBLE_FORMATS),a=[];i(s)?(a.push(new rs),a.push(new Q1),a.push(new Z1),a.push(new Er)):(s.indexOf(ce.EAN_13)>-1&&a.push(new rs),s.indexOf(ce.UPC_A)>-1&&a.push(new Q1),s.indexOf(ce.EAN_8)>-1&&a.push(new Z1),s.indexOf(ce.UPC_E)>-1&&a.push(new Er)),this.readers=a}decodeRow(r,s,a){for(let c of this.readers)try{const u=c.decodeRow(r,s,a),d=u.getBarcodeFormat()===ce.EAN_13&&u.getText().charAt(0)==="0",h=a==null?null:a.get(Z.POSSIBLE_FORMATS),g=h==null||h.includes(ce.UPC_A);if(d&&g){const x=u.getRawBytes(),y=new ue(u.getText().substring(1),x,x?x.length:null,u.getResultPoints(),ce.UPC_A);return y.putAllMetadata(u.getResultMetadata()),y}return u}catch{}throw new H}reset(){for(let r of this.readers)r.reset()}}class wn extends Ke{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,s){for(let a=0;a<s.length;a++)if(Ke.patternMatchVariance(r,s[a],wn.MAX_INDIVIDUAL_VARIANCE)<wn.MAX_AVG_VARIANCE)return a;throw new H}static count(r){return Ue.sum(new Int32Array(r))}static increment(r,s){let a=0,c=s[0];for(let u=1;u<r.length;u++)s[u]>c&&(c=s[u],a=u);r[a]++}static decrement(r,s){let a=0,c=s[0];for(let u=1;u<r.length;u++)s[u]<c&&(c=s[u],a=u);r[a]--}static isFinderPattern(r){let s=r[0]+r[1],a=s+r[2]+r[3],c=s/a;if(c>=wn.MIN_FINDER_PATTERN_RATIO&&c<=wn.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let h of r)h>d&&(d=h),h<u&&(u=h);return d<10*u}return!1}}wn.MAX_AVG_VARIANCE=.2,wn.MAX_INDIVIDUAL_VARIANCE=.45,wn.MIN_FINDER_PATTERN_RATIO=9.5/12,wn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Xs{constructor(r,s){this.value=r,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof Xs))return!1;const s=r;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Vl{constructor(r,s,a,c,u){this.value=r,this.startEnd=s,this.value=r,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new he(a,u)),this.resultPoints.push(new he(c,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof Vl))return!1;const s=r;return this.value===s.value}hashCode(){return this.value}}class Br{constructor(){}static getRSSvalue(r,s,a){let c=0;for(let g of r)c+=g;let u=0,d=0,h=r.length;for(let g=0;g<h-1;g++){let x;for(x=1,d|=1<<g;x<r[g];x++,d&=~(1<<g)){let y=Br.combins(c-x-1,h-g-2);if(a&&d===0&&c-x-(h-g-1)>=h-g-1&&(y-=Br.combins(c-x-(h-g),h-g-2)),h-g-1>1){let _=0;for(let S=c-x-(h-g-2);S>s;S--)_+=Br.combins(c-x-S-1,h-g-3);y-=_*(h-1-g)}else c-x>s&&y--;u+=y}c-=x}return u}static combins(r,s){let a,c;r-s>s?(c=s,a=r-s):(c=r-s,a=s);let u=1,d=1;for(let h=r;h>a;h--)u*=h,d<=c&&(u/=d,d++);for(;d<=c;)u/=d,d++;return u}}class AC{static buildBitArray(r){let s=r.length*2-1;r[r.length-1].getRightChar()==null&&(s-=1);let a=12*s,c=new U(a),u=0,h=r[0].getRightChar().getValue();for(let g=11;g>=0;--g)h&1<<g&&c.set(u),u++;for(let g=1;g<r.length;++g){let x=r[g],y=x.getLeftChar().getValue();for(let _=11;_>=0;--_)y&1<<_&&c.set(u),u++;if(x.getRightChar()!=null){let _=x.getRightChar().getValue();for(let S=11;S>=0;--S)_&1<<S&&c.set(u),u++}}return c}}class is{constructor(r,s){s?this.decodedInformation=null:(this.finished=r,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class wd{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class Pn extends wd{constructor(r,s){super(r),this.value=s}getValue(){return this.value}isFNC1(){return this.value===Pn.FNC1}}Pn.FNC1="$";class ss extends wd{constructor(r,s,a){super(r),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class lr extends wd{constructor(r,s,a){if(super(r),s<0||s>10||a<0||a>10)throw new z;this.firstDigit=s,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===lr.FNC1}isSecondDigitFNC1(){return this.secondDigit===lr.FNC1}isAnyFNC1(){return this.firstDigit===lr.FNC1||this.secondDigit===lr.FNC1}}lr.FNC1=10;class de{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new H;let s=r.substring(0,2);for(let u of de.TWO_DIGIT_DATA_LENGTH)if(u[0]===s)return u[1]===de.VARIABLE_LENGTH?de.processVariableAI(2,u[2],r):de.processFixedAI(2,u[1],r);if(r.length<3)throw new H;let a=r.substring(0,3);for(let u of de.THREE_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===de.VARIABLE_LENGTH?de.processVariableAI(3,u[2],r):de.processFixedAI(3,u[1],r);for(let u of de.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===de.VARIABLE_LENGTH?de.processVariableAI(4,u[2],r):de.processFixedAI(4,u[1],r);if(r.length<4)throw new H;let c=r.substring(0,4);for(let u of de.FOUR_DIGIT_DATA_LENGTH)if(u[0]===c)return u[1]===de.VARIABLE_LENGTH?de.processVariableAI(4,u[2],r):de.processFixedAI(4,u[1],r);throw new H}static processFixedAI(r,s,a){if(a.length<r)throw new H;let c=a.substring(0,r);if(a.length<r+s)throw new H;let u=a.substring(r,r+s),d=a.substring(r+s),h="("+c+")"+u,g=de.parseFieldsInGeneralPurpose(d);return g==null?h:h+g}static processVariableAI(r,s,a){let c=a.substring(0,r),u;a.length<r+s?u=a.length:u=r+s;let d=a.substring(r,u),h=a.substring(u),g="("+c+")"+d,x=de.parseFieldsInGeneralPurpose(h);return x==null?g:g+x}}de.VARIABLE_LENGTH=[],de.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",de.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",de.VARIABLE_LENGTH,20],["22",de.VARIABLE_LENGTH,29],["30",de.VARIABLE_LENGTH,8],["37",de.VARIABLE_LENGTH,8],["90",de.VARIABLE_LENGTH,30],["91",de.VARIABLE_LENGTH,30],["92",de.VARIABLE_LENGTH,30],["93",de.VARIABLE_LENGTH,30],["94",de.VARIABLE_LENGTH,30],["95",de.VARIABLE_LENGTH,30],["96",de.VARIABLE_LENGTH,30],["97",de.VARIABLE_LENGTH,3],["98",de.VARIABLE_LENGTH,30],["99",de.VARIABLE_LENGTH,30]],de.THREE_DIGIT_DATA_LENGTH=[["240",de.VARIABLE_LENGTH,30],["241",de.VARIABLE_LENGTH,30],["242",de.VARIABLE_LENGTH,6],["250",de.VARIABLE_LENGTH,30],["251",de.VARIABLE_LENGTH,30],["253",de.VARIABLE_LENGTH,17],["254",de.VARIABLE_LENGTH,20],["400",de.VARIABLE_LENGTH,30],["401",de.VARIABLE_LENGTH,30],["402",17],["403",de.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",de.VARIABLE_LENGTH,20],["421",de.VARIABLE_LENGTH,15],["422",3],["423",de.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],de.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",de.VARIABLE_LENGTH,15],["391",de.VARIABLE_LENGTH,18],["392",de.VARIABLE_LENGTH,15],["393",de.VARIABLE_LENGTH,18],["703",de.VARIABLE_LENGTH,30]],de.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",de.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",de.VARIABLE_LENGTH,20],["8003",de.VARIABLE_LENGTH,30],["8004",de.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",de.VARIABLE_LENGTH,30],["8008",de.VARIABLE_LENGTH,12],["8018",18],["8020",de.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",de.VARIABLE_LENGTH,70],["8200",de.VARIABLE_LENGTH,70]];class Ys{constructor(r){this.buffer=new Oe,this.information=r}decodeAllCodes(r,s){let a=s,c=null;do{let u=this.decodeGeneralPurposeField(a,c),d=de.parseFieldsInGeneralPurpose(u.getNewString());if(d!=null&&r.append(d),u.isRemaining()?c=""+u.getRemainingValue():c=null,a===u.getNewPosition())break;a=u.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let s=r;s<r+3;++s)if(this.information.get(s))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(r,4);return u===0?new lr(this.information.getSize(),lr.FNC1,lr.FNC1):new lr(this.information.getSize(),u-1,lr.FNC1)}let s=this.extractNumericValueFromBitArray(r,7),a=(s-8)/11,c=(s-8)%11;return new lr(r+7,a,c)}extractNumericValueFromBitArray(r,s){return Ys.extractNumericValueFromBitArray(this.information,r,s)}static extractNumericValueFromBitArray(r,s,a){let c=0;for(let u=0;u<a;++u)r.get(s+u)&&(c|=1<<a-u-1);return c}decodeGeneralPurposeField(r,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(r);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new ss(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new ss(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,s;do{let a=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),r=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),r=s.isFinished()):(s=this.parseNumericBlock(),r=s.isFinished()),!(a!==this.current.getPosition())&&!r)break}while(!r);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let s;return r.isSecondDigitFNC1()?s=new ss(this.current.getPosition(),this.buffer.toString()):s=new ss(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new is(!0,s)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let s=new ss(this.current.getPosition(),this.buffer.toString());return new is(!0,s)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new is(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new ss(this.current.getPosition(),this.buffer.toString());return new is(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new is(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new ss(this.current.getPosition(),this.buffer.toString());return new is(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new is(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,7);if(a>=64&&a<116)return!0;if(r+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(r,8);return c>=232&&c<253}decodeIsoIec646(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new Pn(r+5,Pn.FNC1);if(s>=5&&s<15)return new Pn(r+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(r,7);if(a>=64&&a<90)return new Pn(r+7,""+(a+1));if(a>=90&&a<116)return new Pn(r+7,""+(a+7));let c=this.extractNumericValueFromBitArray(r,8),u;switch(c){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new z}return new Pn(r+8,u)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,6);return a>=16&&a<63}decodeAlphanumeric(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new Pn(r+5,Pn.FNC1);if(s>=5&&s<15)return new Pn(r+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(r,6);if(a>=32&&a<58)return new Pn(r+6,""+(a+33));let c;switch(a){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new ar("Decoding invalid alphanumeric value: "+a)}return new Pn(r+6,c)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<5&&s+r<this.information.getSize();++s)if(s===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+s))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let s=r;s<r+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<4&&s+r<this.information.getSize();++s)if(this.information.get(r+s))return!1;return!0}}class xd{constructor(r){this.information=r,this.generalDecoder=new Ys(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Mn extends xd{constructor(r){super(r)}encodeCompressedGtin(r,s){r.append("(01)");let a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,s,a)}encodeCompressedGtinWithoutAI(r,s,a){for(let c=0;c<4;++c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*c,10);u/100===0&&r.append("0"),u/10===0&&r.append("0"),r.append(u)}Mn.appendCheckDigit(r,a)}static appendCheckDigit(r,s){let a=0;for(let c=0;c<13;c++){let u=r.charAt(c+s).charCodeAt(0)-48;a+=c&1?u:3*u}a=10-a%10,a===10&&(a=0),r.append(a)}}Mn.GTIN_SIZE=40;class $s extends Mn{constructor(r){super(r)}parseInformation(){let r=new Oe;r.append("(01)");let s=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray($s.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,$s.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(r,$s.HEADER_SIZE+44)}}$s.HEADER_SIZE=4;class Hl extends xd{constructor(r){super(r)}parseInformation(){let r=new Oe;return this.getGeneralDecoder().decodeAllCodes(r,Hl.HEADER_SIZE)}}Hl.HEADER_SIZE=5;class Gl extends Mn{constructor(r){super(r)}encodeCompressedWeight(r,s,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(s,a);this.addWeightCode(r,c);let u=this.checkWeight(c),d=1e5;for(let h=0;h<5;++h)u/d===0&&r.append("0"),d/=10;r.append(u)}}class Lr extends Gl{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=Lr.HEADER_SIZE+Gl.GTIN_SIZE+Lr.WEIGHT_SIZE)throw new H;let r=new Oe;return this.encodeCompressedGtin(r,Lr.HEADER_SIZE),this.encodeCompressedWeight(r,Lr.HEADER_SIZE+Gl.GTIN_SIZE,Lr.WEIGHT_SIZE),r.toString()}}Lr.HEADER_SIZE=5,Lr.WEIGHT_SIZE=15;class IC extends Lr{constructor(r){super(r)}addWeightCode(r,s){r.append("(3103)")}checkWeight(r){return r}}class TC extends Lr{constructor(r){super(r)}addWeightCode(r,s){s<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class Fr extends Mn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Fr.HEADER_SIZE+Mn.GTIN_SIZE)throw new H;let r=new Oe;this.encodeCompressedGtin(r,Fr.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Fr.HEADER_SIZE+Mn.GTIN_SIZE,Fr.LAST_DIGIT_SIZE);r.append("(392"),r.append(s),r.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(Fr.HEADER_SIZE+Mn.GTIN_SIZE+Fr.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()}}Fr.HEADER_SIZE=8,Fr.LAST_DIGIT_SIZE=2;class Sn extends Mn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Sn.HEADER_SIZE+Mn.GTIN_SIZE)throw new H;let r=new Oe;this.encodeCompressedGtin(r,Sn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Sn.HEADER_SIZE+Mn.GTIN_SIZE,Sn.LAST_DIGIT_SIZE);r.append("(393"),r.append(s),r.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Sn.HEADER_SIZE+Mn.GTIN_SIZE+Sn.LAST_DIGIT_SIZE,Sn.FIRST_THREE_DIGITS_SIZE);a/100==0&&r.append("0"),a/10==0&&r.append("0"),r.append(a);let c=this.getGeneralDecoder().decodeGeneralPurposeField(Sn.HEADER_SIZE+Mn.GTIN_SIZE+Sn.LAST_DIGIT_SIZE+Sn.FIRST_THREE_DIGITS_SIZE,null);return r.append(c.getNewString()),r.toString()}}Sn.HEADER_SIZE=8,Sn.LAST_DIGIT_SIZE=2,Sn.FIRST_THREE_DIGITS_SIZE=10;class St extends Gl{constructor(r,s,a){super(r),this.dateCode=a,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=St.HEADER_SIZE+St.GTIN_SIZE+St.WEIGHT_SIZE+St.DATE_SIZE)throw new H;let r=new Oe;return this.encodeCompressedGtin(r,St.HEADER_SIZE),this.encodeCompressedWeight(r,St.HEADER_SIZE+St.GTIN_SIZE,St.WEIGHT_SIZE),this.encodeCompressedDate(r,St.HEADER_SIZE+St.GTIN_SIZE+St.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,s){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(s,St.DATE_SIZE);if(a==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let c=a%32;a/=32;let u=a%12+1;a/=12;let d=a;d/10==0&&r.append("0"),r.append(d),u/10==0&&r.append("0"),r.append(u),c/10==0&&r.append("0"),r.append(c)}addWeightCode(r,s){r.append("("),r.append(this.firstAIdigits),r.append(s/1e5),r.append(")")}checkWeight(r){return r%1e5}}St.HEADER_SIZE=8,St.WEIGHT_SIZE=20,St.DATE_SIZE=16;function J1(C){try{if(C.get(1))return new $s(C);if(!C.get(2))return new Hl(C);switch(Ys.extractNumericValueFromBitArray(C,1,4)){case 4:return new IC(C);case 5:return new TC(C)}switch(Ys.extractNumericValueFromBitArray(C,1,5)){case 12:return new Fr(C);case 13:return new Sn(C)}switch(Ys.extractNumericValueFromBitArray(C,1,7)){case 56:return new St(C,"310","11");case 57:return new St(C,"320","11");case 58:return new St(C,"310","13");case 59:return new St(C,"320","13");case 60:return new St(C,"310","15");case 61:return new St(C,"320","15");case 62:return new St(C,"310","17");case 63:return new St(C,"320","17")}}catch(r){throw console.log(r),new ar("unknown decoder: "+C)}}class xi{constructor(r,s,a,c){this.leftchar=r,this.rightchar=s,this.finderpattern=a,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,s){return r instanceof xi?xi.equalsOrNull(r.leftchar,s.leftchar)&&xi.equalsOrNull(r.rightchar,s.rightchar)&&xi.equalsOrNull(r.finderpattern,s.finderpattern):!1}static equalsOrNull(r,s){return r===null?s===null:xi.equals(r,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class yd{constructor(r,s,a){this.pairs=r,this.rowNumber=s,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,s){return r instanceof yd?this.checkEqualitity(r,s)&&r.wasReversed===s.wasReversed:!1}checkEqualitity(r,s){if(!r||!s)return;let a;return r.forEach((c,u)=>{s.forEach(d=>{c.getLeftChar().getValue()===d.getLeftChar().getValue()&&c.getRightChar().getValue()===d.getRightChar().getValue()&&c.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(a=!0)})}),a}}class q extends wn{constructor(r){super(...arguments),this.pairs=new Array(q.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,s,a){this.pairs.length=0,this.startFromEven=!1;try{return q.constructResult(this.decodeRow2pairs(r,s))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,q.constructResult(this.decodeRow2pairs(r,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,s){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,r))}catch(u){if(u instanceof H){if(!this.pairs.length)throw new H;a=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(r,!1),c){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new H}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return r&&(this.rows=this.rows.reverse()),s}checkRows(r,s){for(let a=s;a<this.rows.length;a++){let c=this.rows[a];this.pairs.length=0;for(let d of r)this.pairs.push(d.getPairs());if(this.pairs.push(c.getPairs()),!q.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(r);u.push(c);try{return this.checkRows(u,a+1)}catch(d){this.verbose&&console.log(d)}}throw new H}static isValidSequence(r){for(let s of q.FINDER_PATTERN_SEQUENCES){if(r.length>s.length)continue;let a=!0;for(let c=0;c<r.length;c++)if(r[c].getFinderPattern().getValue()!=s[c]){a=!1;break}if(a)return!0}return!1}storeRow(r,s){let a=0,c=!1,u=!1;for(;a<this.rows.length;){let d=this.rows[a];if(d.getRowNumber()>r){u=d.isEquivalent(this.pairs);break}c=d.isEquivalent(this.pairs),a++}u||c||q.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new yd(this.pairs,r,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,s){for(let a of s)if(a.getPairs().length!==r.length){for(let c of a.getPairs())for(let u of r)if(xi.equals(c,u))break}}static isPartialRow(r,s){for(let a of s){let c=!0;for(let u of r){let d=!1;for(let h of a.getPairs())if(u.equals(h)){d=!0;break}if(!d){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(r){let s=AC.buildBitArray(r),c=J1(s).parseInformation(),u=r[0].getFinderPattern().getResultPoints(),d=r[r.length-1].getFinderPattern().getResultPoints(),h=[u[0],u[1],d[0],d[1]];return new ue(c,null,null,h,ce.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),s=r.getLeftChar(),a=r.getRightChar();if(a==null)return!1;let c=a.getChecksumPortion(),u=2;for(let h=1;h<this.pairs.size();++h){let g=this.pairs.get(h);c+=g.getLeftChar().getChecksumPortion(),u++;let x=g.getRightChar();x!=null&&(c+=x.getChecksumPortion(),u++)}return c%=211,211*(u-4)+c==s.getValue()}static getNextSecondBar(r,s){let a;return r.get(s)?(a=r.getNextUnset(s),a=r.getNextSet(a)):(a=r.getNextSet(s),a=r.getNextUnset(a)),a}retrieveNextPair(r,s,a){let c=s.length%2==0;this.startFromEven&&(c=!c);let u,d=!0,h=-1;do this.findNextPair(r,s,h),u=this.parseFoundFinderPattern(r,a,c),u==null?h=q.getNextSecondBar(r,this.startEnd[0]):d=!1;while(d);let g=this.decodeDataCharacter(r,u,c,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new H;let x;try{x=this.decodeDataCharacter(r,u,c,!1)}catch(y){x=null,this.verbose&&console.log(y)}return new xi(g,x,u,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,s,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d;a>=0?d=a:this.isEmptyPair(s)?d=0:d=s[s.length-1].getFinderPattern().getStartEnd()[1];let h=s.length%2!=0;this.startFromEven&&(h=!h);let g=!1;for(;d<u&&(g=!r.get(d),!!g);)d++;let x=0,y=d;for(let _=d;_<u;_++)if(r.get(_)!=g)c[x]++;else{if(x==3){if(h&&q.reverseCounters(c),q.isFinderPattern(c)){this.startEnd[0]=y,this.startEnd[1]=_;return}h&&q.reverseCounters(c),y+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,x--}else x++;c[x]=1,g=!g}throw new H}static reverseCounters(r){let s=r.length;for(let a=0;a<s/2;++a){let c=r[a];r[a]=r[s-a-1],r[s-a-1]=c}}parseFoundFinderPattern(r,s,a){let c,u,d;if(a){let x=this.startEnd[0]-1;for(;x>=0&&!r.get(x);)x--;x++,c=this.startEnd[0]-x,u=x,d=this.startEnd[1]}else u=this.startEnd[0],d=r.getNextUnset(this.startEnd[1]+1),c=d-this.startEnd[1];let h=this.getDecodeFinderCounters();B.arraycopy(h,0,h,1,h.length-1),h[0]=c;let g;try{g=this.parseFinderValue(h,q.FINDER_PATTERNS)}catch{return null}return new Vl(g,[u,d],u,d,s)}decodeDataCharacter(r,s,a,c){let u=this.getDataCharacterCounters();for(let dt=0;dt<u.length;dt++)u[dt]=0;if(c)q.recordPatternInReverse(r,s.getStartEnd()[0],u);else{q.recordPattern(r,s.getStartEnd()[1],u);for(let dt=0,un=u.length-1;dt<un;dt++,un--){let $n=u[dt];u[dt]=u[un],u[un]=$n}}let d=17,h=Ue.sum(new Int32Array(u))/d,g=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(h-g)/g>.3)throw new H;let x=this.getOddCounts(),y=this.getEvenCounts(),_=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors();for(let dt=0;dt<u.length;dt++){let un=1*u[dt]/h,$n=un+.5;if($n<1){if(un<.3)throw new H;$n=1}else if($n>8){if(un>8.7)throw new H;$n=8}let Js=dt/2;dt&1?(y[Js]=$n,S[Js]=un-$n):(x[Js]=$n,_[Js]=un-$n)}this.adjustOddEvenCounts(d);let T=4*s.getValue()+(a?0:2)+(c?0:1)-1,D=0,P=0;for(let dt=x.length-1;dt>=0;dt--){if(q.isNotA1left(s,a,c)){let un=q.WEIGHTS[T][2*dt];P+=x[dt]*un}D+=x[dt]}let L=0;for(let dt=y.length-1;dt>=0;dt--)if(q.isNotA1left(s,a,c)){let un=q.WEIGHTS[T][2*dt+1];L+=y[dt]*un}let V=P+L;if(D&1||D>13||D<4)throw new H;let ne=(13-D)/2,ie=q.SYMBOL_WIDEST[ne],Q=9-ie,Fe=Br.getRSSvalue(x,ie,!0),Ne=Br.getRSSvalue(y,Q,!1),Ln=q.EVEN_TOTAL_SUBSET[ne],br=q.GSUM[ne],Fn=Fe*Ln+Ne+br;return new Xs(Fn,V)}static isNotA1left(r,s,a){return!(r.getValue()==0&&s&&a)}adjustOddEvenCounts(r){let s=Ue.sum(new Int32Array(this.getOddCounts())),a=Ue.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1;s>13?u=!0:s<4&&(c=!0);let d=!1,h=!1;a>13?h=!0:a<4&&(d=!0);let g=s+a-r,x=(s&1)==1,y=(a&1)==0;if(g==1)if(x){if(y)throw new H;u=!0}else{if(!y)throw new H;h=!0}else if(g==-1)if(x){if(y)throw new H;c=!0}else{if(!y)throw new H;d=!0}else if(g==0){if(x){if(!y)throw new H;s<a?(c=!0,h=!0):(u=!0,d=!0)}else if(y)throw new H}else throw new H;if(c){if(u)throw new H;q.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&q.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(h)throw new H;q.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&q.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}q.SYMBOL_WIDEST=[7,5,4,3,1],q.EVEN_TOTAL_SUBSET=[4,20,52,104,204],q.GSUM=[0,348,1388,2948,3988],q.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],q.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],q.FINDER_PAT_A=0,q.FINDER_PAT_B=1,q.FINDER_PAT_C=2,q.FINDER_PAT_D=3,q.FINDER_PAT_E=4,q.FINDER_PAT_F=5,q.FINDER_PATTERN_SEQUENCES=[[q.FINDER_PAT_A,q.FINDER_PAT_A],[q.FINDER_PAT_A,q.FINDER_PAT_B,q.FINDER_PAT_B],[q.FINDER_PAT_A,q.FINDER_PAT_C,q.FINDER_PAT_B,q.FINDER_PAT_D],[q.FINDER_PAT_A,q.FINDER_PAT_E,q.FINDER_PAT_B,q.FINDER_PAT_D,q.FINDER_PAT_C],[q.FINDER_PAT_A,q.FINDER_PAT_E,q.FINDER_PAT_B,q.FINDER_PAT_D,q.FINDER_PAT_D,q.FINDER_PAT_F],[q.FINDER_PAT_A,q.FINDER_PAT_E,q.FINDER_PAT_B,q.FINDER_PAT_D,q.FINDER_PAT_E,q.FINDER_PAT_F,q.FINDER_PAT_F],[q.FINDER_PAT_A,q.FINDER_PAT_A,q.FINDER_PAT_B,q.FINDER_PAT_B,q.FINDER_PAT_C,q.FINDER_PAT_C,q.FINDER_PAT_D,q.FINDER_PAT_D],[q.FINDER_PAT_A,q.FINDER_PAT_A,q.FINDER_PAT_B,q.FINDER_PAT_B,q.FINDER_PAT_C,q.FINDER_PAT_C,q.FINDER_PAT_D,q.FINDER_PAT_E,q.FINDER_PAT_E],[q.FINDER_PAT_A,q.FINDER_PAT_A,q.FINDER_PAT_B,q.FINDER_PAT_B,q.FINDER_PAT_C,q.FINDER_PAT_C,q.FINDER_PAT_D,q.FINDER_PAT_E,q.FINDER_PAT_F,q.FINDER_PAT_F],[q.FINDER_PAT_A,q.FINDER_PAT_A,q.FINDER_PAT_B,q.FINDER_PAT_B,q.FINDER_PAT_C,q.FINDER_PAT_D,q.FINDER_PAT_D,q.FINDER_PAT_E,q.FINDER_PAT_E,q.FINDER_PAT_F,q.FINDER_PAT_F]],q.MAX_PAIRS=11;class kC extends Xs{constructor(r,s,a){super(r,s),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Rt extends wn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,s,a){const c=this.decodePair(s,!1,r,a);Rt.addOrTally(this.possibleLeftPairs,c),s.reverse();let u=this.decodePair(s,!0,r,a);Rt.addOrTally(this.possibleRightPairs,u),s.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&Rt.checkChecksum(d,h))return Rt.constructResult(d,h)}throw new H}static addOrTally(r,s){if(s==null)return;let a=!1;for(let c of r)if(c.getValue()===s.getValue()){c.incrementCount(),a=!0;break}a||r.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,s){let a=4537077*r.getValue()+s.getValue(),c=new String(a).toString(),u=new Oe;for(let x=13-c.length;x>0;x--)u.append("0");u.append(c);let d=0;for(let x=0;x<13;x++){let y=u.charAt(x).charCodeAt(0)-48;d+=x&1?y:3*y}d=10-d%10,d===10&&(d=0),u.append(d.toString());let h=r.getFinderPattern().getResultPoints(),g=s.getFinderPattern().getResultPoints();return new ue(u.toString(),null,0,[h[0],h[1],g[0],g[1]],ce.RSS_14,new Date().getTime())}static checkChecksum(r,s){let a=(r.getChecksumPortion()+16*s.getChecksumPortion())%79,c=9*r.getFinderPattern().getValue()+s.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,a===c}decodePair(r,s,a,c){try{let u=this.findFinderPattern(r,s),d=this.parseFoundFinderPattern(r,a,s,u),h=c==null?null:c.get(Z.NEED_RESULT_POINT_CALLBACK);if(h!=null){let y=(u[0]+u[1])/2;s&&(y=r.getSize()-1-y),h.foundPossibleResultPoint(new he(y,a))}let g=this.decodeDataCharacter(r,d,!0),x=this.decodeDataCharacter(r,d,!1);return new kC(1597*g.getValue()+x.getValue(),g.getChecksumPortion()+4*x.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(r,s,a){let c=this.getDataCharacterCounters();for(let L=0;L<c.length;L++)c[L]=0;if(a)Ke.recordPatternInReverse(r,s.getStartEnd()[0],c);else{Ke.recordPattern(r,s.getStartEnd()[1]+1,c);for(let L=0,V=c.length-1;L<V;L++,V--){let ne=c[L];c[L]=c[V],c[V]=ne}}let u=a?16:15,d=Ue.sum(new Int32Array(c))/u,h=this.getOddCounts(),g=this.getEvenCounts(),x=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors();for(let L=0;L<c.length;L++){let V=c[L]/d,ne=Math.floor(V+.5);ne<1?ne=1:ne>8&&(ne=8);let ie=Math.floor(L/2);L&1?(g[ie]=ne,y[ie]=V-ne):(h[ie]=ne,x[ie]=V-ne)}this.adjustOddEvenCounts(a,u);let _=0,S=0;for(let L=h.length-1;L>=0;L--)S*=9,S+=h[L],_+=h[L];let T=0,D=0;for(let L=g.length-1;L>=0;L--)T*=9,T+=g[L],D+=g[L];let P=S+3*T;if(a){if(_&1||_>12||_<4)throw new H;let L=(12-_)/2,V=Rt.OUTSIDE_ODD_WIDEST[L],ne=9-V,ie=Br.getRSSvalue(h,V,!1),Q=Br.getRSSvalue(g,ne,!0),Fe=Rt.OUTSIDE_EVEN_TOTAL_SUBSET[L],Ne=Rt.OUTSIDE_GSUM[L];return new Xs(ie*Fe+Q+Ne,P)}else{if(D&1||D>10||D<4)throw new H;let L=(10-D)/2,V=Rt.INSIDE_ODD_WIDEST[L],ne=9-V,ie=Br.getRSSvalue(h,V,!0),Q=Br.getRSSvalue(g,ne,!1),Fe=Rt.INSIDE_ODD_TOTAL_SUBSET[L],Ne=Rt.INSIDE_GSUM[L];return new Xs(Q*Fe+ie+Ne,P)}}findFinderPattern(r,s){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=r.getSize(),u=!1,d=0;for(;d<c&&(u=!r.get(d),s!==u);)d++;let h=0,g=d;for(let x=d;x<c;x++)if(r.get(x)!==u)a[h]++;else{if(h===3){if(wn.isFinderPattern(a))return[g,x];g+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,h--}else h++;a[h]=1,u=!u}throw new H}parseFoundFinderPattern(r,s,a,c){let u=r.get(c[0]),d=c[0]-1;for(;d>=0&&u!==r.get(d);)d--;d++;const h=c[0]-d,g=this.getDecodeFinderCounters(),x=new Int32Array(g.length);B.arraycopy(g,0,x,1,g.length-1),x[0]=h;const y=this.parseFinderValue(x,Rt.FINDER_PATTERNS);let _=d,S=c[1];return a&&(_=r.getSize()-1-_,S=r.getSize()-1-S),new Vl(y,[d,c[1]],_,S,s)}adjustOddEvenCounts(r,s){let a=Ue.sum(new Int32Array(this.getOddCounts())),c=Ue.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1,h=!1,g=!1;r?(a>12?d=!0:a<4&&(u=!0),c>12?g=!0:c<4&&(h=!0)):(a>11?d=!0:a<5&&(u=!0),c>10?g=!0:c<4&&(h=!0));let x=a+c-s,y=(a&1)===(r?1:0),_=(c&1)===1;if(x===1)if(y){if(_)throw new H;d=!0}else{if(!_)throw new H;g=!0}else if(x===-1)if(y){if(_)throw new H;u=!0}else{if(!_)throw new H;h=!0}else if(x===0){if(y){if(!_)throw new H;a<c?(u=!0,g=!0):(d=!0,h=!0)}else if(_)throw new H}else throw new H;if(u){if(d)throw new H;wn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&wn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(g)throw new H;wn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&wn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Rt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Rt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Rt.OUTSIDE_GSUM=[0,161,961,2015,2715],Rt.INSIDE_GSUM=[0,336,1036,1516],Rt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Rt.INSIDE_ODD_WIDEST=[2,4,6,8],Rt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ks extends Ke{constructor(r,s){super(),this.readers=[],this.verbose=s===!0;const a=r?r.get(Z.POSSIBLE_FORMATS):null,c=r&&r.get(Z.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(ce.EAN_13)||a.includes(ce.UPC_A)||a.includes(ce.EAN_8)||a.includes(ce.UPC_E))&&this.readers.push(new md(r)),a.includes(ce.CODE_39)&&this.readers.push(new Et(c)),a.includes(ce.CODE_128)&&this.readers.push(new re),a.includes(ce.ITF)&&this.readers.push(new it),a.includes(ce.RSS_14)&&this.readers.push(new Rt),a.includes(ce.RSS_EXPANDED)&&this.readers.push(new q(this.verbose))):(this.readers.push(new md(r)),this.readers.push(new Et),this.readers.push(new md(r)),this.readers.push(new re),this.readers.push(new it),this.readers.push(new Rt),this.readers.push(new q(this.verbose)))}decodeRow(r,s,a){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(r,s,a)}catch{}throw new H}reset(){this.readers.forEach(r=>r.reset())}}class NC extends Ge{constructor(r=500,s){super(new Ks(s),r,s)}}class rt{constructor(r,s,a){this.ecCodewords=r,this.ecBlocks=[s],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class et{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ze{constructor(r,s,a,c,u,d){this.versionNumber=r,this.symbolSizeRows=s,this.symbolSizeColumns=a,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=u,this.ecBlocks=d;let h=0;const g=d.getECCodewords(),x=d.getECBlocks();for(let y of x)h+=y.getCount()*(y.getDataCodewords()+g);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,s){if(r&1||s&1)throw new z;for(let a of ze.VERSIONS)if(a.symbolSizeRows===r&&a.symbolSizeColumns===s)return a;throw new z}toString(){return""+this.versionNumber}static buildVersions(){return[new ze(1,10,10,8,8,new rt(5,new et(1,3))),new ze(2,12,12,10,10,new rt(7,new et(1,5))),new ze(3,14,14,12,12,new rt(10,new et(1,8))),new ze(4,16,16,14,14,new rt(12,new et(1,12))),new ze(5,18,18,16,16,new rt(14,new et(1,18))),new ze(6,20,20,18,18,new rt(18,new et(1,22))),new ze(7,22,22,20,20,new rt(20,new et(1,30))),new ze(8,24,24,22,22,new rt(24,new et(1,36))),new ze(9,26,26,24,24,new rt(28,new et(1,44))),new ze(10,32,32,14,14,new rt(36,new et(1,62))),new ze(11,36,36,16,16,new rt(42,new et(1,86))),new ze(12,40,40,18,18,new rt(48,new et(1,114))),new ze(13,44,44,20,20,new rt(56,new et(1,144))),new ze(14,48,48,22,22,new rt(68,new et(1,174))),new ze(15,52,52,24,24,new rt(42,new et(2,102))),new ze(16,64,64,14,14,new rt(56,new et(2,140))),new ze(17,72,72,16,16,new rt(36,new et(4,92))),new ze(18,80,80,18,18,new rt(48,new et(4,114))),new ze(19,88,88,20,20,new rt(56,new et(4,144))),new ze(20,96,96,22,22,new rt(68,new et(4,174))),new ze(21,104,104,24,24,new rt(56,new et(6,136))),new ze(22,120,120,18,18,new rt(68,new et(6,175))),new ze(23,132,132,20,20,new rt(62,new et(8,163))),new ze(24,144,144,22,22,new rt(62,new et(8,156),new et(2,155))),new ze(25,8,18,6,16,new rt(7,new et(1,5))),new ze(26,8,32,6,14,new rt(11,new et(1,10))),new ze(27,12,26,10,24,new rt(14,new et(1,16))),new ze(28,12,36,10,16,new rt(18,new et(1,22))),new ze(29,16,36,14,16,new rt(24,new et(1,32))),new ze(30,16,48,14,22,new rt(28,new et(1,49)))]}}ze.VERSIONS=ze.buildVersions();class vd{constructor(r){const s=r.getHeight();if(s<8||s>144||s&1)throw new z;this.version=vd.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new Te(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const s=r.getHeight(),a=r.getWidth();return ze.getVersionForDimensions(s,a)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let s=0,a=4,c=0;const u=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let h=!1,g=!1,x=!1,y=!1;do if(a===u&&c===0&&!h)r[s++]=this.readCorner1(u,d)&255,a-=2,c+=2,h=!0;else if(a===u-2&&c===0&&d&3&&!g)r[s++]=this.readCorner2(u,d)&255,a-=2,c+=2,g=!0;else if(a===u+4&&c===2&&!(d&7)&&!x)r[s++]=this.readCorner3(u,d)&255,a-=2,c+=2,x=!0;else if(a===u-2&&c===0&&(d&7)===4&&!y)r[s++]=this.readCorner4(u,d)&255,a-=2,c+=2,y=!0;else{do a<u&&c>=0&&!this.readMappingMatrix.get(c,a)&&(r[s++]=this.readUtah(a,c,u,d)&255),a-=2,c+=2;while(a>=0&&c<d);a+=1,c+=3;do a>=0&&c<d&&!this.readMappingMatrix.get(c,a)&&(r[s++]=this.readUtah(a,c,u,d)&255),a+=2,c-=2;while(a<u&&c>=0);a+=3,c+=1}while(a<u||c<d);if(s!==this.version.getTotalCodewords())throw new z;return r}readModule(r,s,a,c){return r<0&&(r+=a,s+=4-(a+4&7)),s<0&&(s+=c,r+=4-(c+4&7)),this.readMappingMatrix.set(s,r),this.mappingBitMatrix.get(s,r)}readUtah(r,s,a,c){let u=0;return this.readModule(r-2,s-2,a,c)&&(u|=1),u<<=1,this.readModule(r-2,s-1,a,c)&&(u|=1),u<<=1,this.readModule(r-1,s-2,a,c)&&(u|=1),u<<=1,this.readModule(r-1,s-1,a,c)&&(u|=1),u<<=1,this.readModule(r-1,s,a,c)&&(u|=1),u<<=1,this.readModule(r,s-2,a,c)&&(u|=1),u<<=1,this.readModule(r,s-1,a,c)&&(u|=1),u<<=1,this.readModule(r,s,a,c)&&(u|=1),u}readCorner1(r,s){let a=0;return this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,1,r,s)&&(a|=1),a<<=1,this.readModule(r-1,2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(2,s-1,r,s)&&(a|=1),a<<=1,this.readModule(3,s-1,r,s)&&(a|=1),a}readCorner2(r,s){let a=0;return this.readModule(r-3,0,r,s)&&(a|=1),a<<=1,this.readModule(r-2,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(0,s-4,r,s)&&(a|=1),a<<=1,this.readModule(0,s-3,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a}readCorner3(r,s){let a=0;return this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(0,s-3,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-3,r,s)&&(a|=1),a<<=1,this.readModule(1,s-2,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a}readCorner4(r,s){let a=0;return this.readModule(r-3,0,r,s)&&(a|=1),a<<=1,this.readModule(r-2,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(2,s-1,r,s)&&(a|=1),a<<=1,this.readModule(3,s-1,r,s)&&(a|=1),a}extractDataRegion(r){const s=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(r.getHeight()!==s)throw new v("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),d=s/c|0,h=a/u|0,g=d*c,x=h*u,y=new Te(x,g);for(let _=0;_<d;++_){const S=_*c;for(let T=0;T<h;++T){const D=T*u;for(let P=0;P<c;++P){const L=_*(c+2)+1+P,V=S+P;for(let ne=0;ne<u;++ne){const ie=T*(u+2)+1+ne;if(r.get(ie,L)){const Q=D+ne;y.set(Q,V)}}}}}return y}}class Cd{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s){const a=s.getECBlocks();let c=0;const u=a.getECBlocks();for(let P of u)c+=P.getCount();const d=new Array(c);let h=0;for(let P of u)for(let L=0;L<P.getCount();L++){const V=P.getDataCodewords(),ne=a.getECCodewords()+V;d[h++]=new Cd(V,new Uint8Array(ne))}const x=d[0].codewords.length-a.getECCodewords(),y=x-1;let _=0;for(let P=0;P<y;P++)for(let L=0;L<h;L++)d[L].codewords[P]=r[_++];const S=s.getVersionNumber()===24,T=S?8:h;for(let P=0;P<T;P++)d[P].codewords[x-1]=r[_++];const D=d[0].codewords.length;for(let P=x;P<D;P++)for(let L=0;L<h;L++){const V=S?(L+8)%h:L,ne=S&&V>7?P-1:P;d[V].codewords[ne]=r[_++]}if(_!==r.length)throw new v;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class _d{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new v(""+r);let s=0,a=this.bitOffset,c=this.byteOffset;const u=this.bytes;if(a>0){const d=8-a,h=r<d?r:d,g=d-h,x=255>>8-h<<g;s=(u[c]&x)>>g,r-=h,a+=h,a===8&&(a=0,c++)}if(r>0){for(;r>=8;)s=s<<8|u[c]&255,c++,r-=8;if(r>0){const d=8-r,h=255>>d<<d;s=s<<r|(u[c]&h)>>d,a+=r}}return this.bitOffset=a,this.byteOffset=c,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Xt;(function(C){C[C.PAD_ENCODE=0]="PAD_ENCODE",C[C.ASCII_ENCODE=1]="ASCII_ENCODE",C[C.C40_ENCODE=2]="C40_ENCODE",C[C.TEXT_ENCODE=3]="TEXT_ENCODE",C[C.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",C[C.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",C[C.BASE256_ENCODE=6]="BASE256_ENCODE"})(Xt||(Xt={}));class yi{static decode(r){const s=new _d(r),a=new Oe,c=new Oe,u=new Array;let d=Xt.ASCII_ENCODE;do if(d===Xt.ASCII_ENCODE)d=this.decodeAsciiSegment(s,a,c);else{switch(d){case Xt.C40_ENCODE:this.decodeC40Segment(s,a);break;case Xt.TEXT_ENCODE:this.decodeTextSegment(s,a);break;case Xt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,a);break;case Xt.EDIFACT_ENCODE:this.decodeEdifactSegment(s,a);break;case Xt.BASE256_ENCODE:this.decodeBase256Segment(s,a,u);break;default:throw new z}d=Xt.ASCII_ENCODE}while(d!==Xt.PAD_ENCODE&&s.available()>0);return c.length()>0&&a.append(c.toString()),new Mr(r,a.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(r,s,a){let c=!1;do{let u=r.readBits(8);if(u===0)throw new z;if(u<=128)return c&&(u+=128),s.append(String.fromCharCode(u-1)),Xt.ASCII_ENCODE;if(u===129)return Xt.PAD_ENCODE;if(u<=229){const d=u-130;d<10&&s.append("0"),s.append(""+d)}else switch(u){case 230:return Xt.C40_ENCODE;case 231:return Xt.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:s.append("[)>05"),a.insert(0,"");break;case 237:s.append("[)>06"),a.insert(0,"");break;case 238:return Xt.ANSIX12_ENCODE;case 239:return Xt.TEXT_ENCODE;case 240:return Xt.EDIFACT_ENCODE;case 241:break;default:if(u!==254||r.available()!==0)throw new z;break}}while(r.available()>0);return Xt.ASCII_ENCODE}static decodeC40Segment(r,s){let a=!1;const c=[];let u=0;do{if(r.available()===8)return;const d=r.readBits(8);if(d===254)return;this.parseTwoBytes(d,r.readBits(8),c);for(let h=0;h<3;h++){const g=c[h];switch(u){case 0:if(g<3)u=g+1;else if(g<this.C40_BASIC_SET_CHARS.length){const x=this.C40_BASIC_SET_CHARS[g];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x)}else throw new z;break;case 1:a?(s.append(String.fromCharCode(g+128)),a=!1):s.append(String.fromCharCode(g)),u=0;break;case 2:if(g<this.C40_SHIFT2_SET_CHARS.length){const x=this.C40_SHIFT2_SET_CHARS[g];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x)}else switch(g){case 27:s.append("");break;case 30:a=!0;break;default:throw new z}u=0;break;case 3:a?(s.append(String.fromCharCode(g+224)),a=!1):s.append(String.fromCharCode(g+96)),u=0;break;default:throw new z}}}while(r.available()>0)}static decodeTextSegment(r,s){let a=!1,c=[],u=0;do{if(r.available()===8)return;const d=r.readBits(8);if(d===254)return;this.parseTwoBytes(d,r.readBits(8),c);for(let h=0;h<3;h++){const g=c[h];switch(u){case 0:if(g<3)u=g+1;else if(g<this.TEXT_BASIC_SET_CHARS.length){const x=this.TEXT_BASIC_SET_CHARS[g];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x)}else throw new z;break;case 1:a?(s.append(String.fromCharCode(g+128)),a=!1):s.append(String.fromCharCode(g)),u=0;break;case 2:if(g<this.TEXT_SHIFT2_SET_CHARS.length){const x=this.TEXT_SHIFT2_SET_CHARS[g];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x)}else switch(g){case 27:s.append("");break;case 30:a=!0;break;default:throw new z}u=0;break;case 3:if(g<this.TEXT_SHIFT3_SET_CHARS.length){const x=this.TEXT_SHIFT3_SET_CHARS[g];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x),u=0}else throw new z;break;default:throw new z}}}while(r.available()>0)}static decodeAnsiX12Segment(r,s){const a=[];do{if(r.available()===8)return;const c=r.readBits(8);if(c===254)return;this.parseTwoBytes(c,r.readBits(8),a);for(let u=0;u<3;u++){const d=a[u];switch(d){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(d<14)s.append(String.fromCharCode(d+44));else if(d<40)s.append(String.fromCharCode(d+51));else throw new z;break}}}while(r.available()>0)}static parseTwoBytes(r,s,a){let c=(r<<8)+s-1,u=Math.floor(c/1600);a[0]=u,c-=u*1600,u=Math.floor(c/40),a[1]=u,a[2]=c-u*40}static decodeEdifactSegment(r,s){do{if(r.available()<=16)return;for(let a=0;a<4;a++){let c=r.readBits(6);if(c===31){const u=8-r.getBitOffset();u!==8&&r.readBits(u);return}c&32||(c|=64),s.append(String.fromCharCode(c))}}while(r.available()>0)}static decodeBase256Segment(r,s,a){let c=1+r.getByteOffset();const u=this.unrandomize255State(r.readBits(8),c++);let d;if(u===0?d=r.available()/8|0:u<250?d=u:d=250*(u-249)+this.unrandomize255State(r.readBits(8),c++),d<0)throw new z;const h=new Uint8Array(d);for(let g=0;g<d;g++){if(r.available()<8)throw new z;h[g]=this.unrandomize255State(r.readBits(8),c++)}a.push(h);try{s.append(nt.decode(h,pe.ISO88591))}catch(g){throw new ar("Platform does not support required encoding: "+g.message)}}static unrandomize255State(r,s){const a=149*s%255+1,c=r-a;return c>=0?c:c+256}}yi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],yi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],yi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],yi.TEXT_SHIFT2_SET_CHARS=yi.C40_SHIFT2_SET_CHARS,yi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class RC{constructor(){this.rsDecoder=new wi(We.DATA_MATRIX_FIELD_256)}decode(r){const s=new vd(r),a=s.getVersion(),c=s.readCodewords(),u=Cd.getDataBlocks(c,a);let d=0;for(let x of u)d+=x.getNumDataCodewords();const h=new Uint8Array(d),g=u.length;for(let x=0;x<g;x++){const y=u[x],_=y.getCodewords(),S=y.getNumDataCodewords();this.correctErrors(_,S);for(let T=0;T<S;T++)h[T*g+x]=_[T]}return yi.decode(h)}correctErrors(r,s){const a=new Int32Array(r);try{this.rsDecoder.decode(a,r.length-s)}catch{throw new R}for(let c=0;c<s;c++)r[c]=a[c]}}class Ft{constructor(r){this.image=r,this.rectangleDetector=new _r(this.image)}detect(){const r=this.rectangleDetector.detect();let s=this.detectSolid1(r);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new H;s=this.shiftToModuleCenter(s);const a=s[0],c=s[1],u=s[2],d=s[3];let h=this.transitionsBetween(a,d)+1,g=this.transitionsBetween(u,d)+1;(h&1)===1&&(h+=1),(g&1)===1&&(g+=1),4*h<7*g&&4*g<7*h&&(h=g=Math.max(h,g));let x=Ft.sampleGrid(this.image,a,c,u,d,h,g);return new Hs(x,[a,c,u,d])}static shiftPoint(r,s,a){let c=(s.getX()-r.getX())/(a+1),u=(s.getY()-r.getY())/(a+1);return new he(r.getX()+c,r.getY()+u)}static moveAway(r,s,a){let c=r.getX(),u=r.getY();return c<s?c-=1:c+=1,u<a?u-=1:u+=1,new he(c,u)}detectSolid1(r){let s=r[0],a=r[1],c=r[3],u=r[2],d=this.transitionsBetween(s,a),h=this.transitionsBetween(a,c),g=this.transitionsBetween(c,u),x=this.transitionsBetween(u,s),y=d,_=[u,s,a,c];return y>h&&(y=h,_[0]=s,_[1]=a,_[2]=c,_[3]=u),y>g&&(y=g,_[0]=a,_[1]=c,_[2]=u,_[3]=s),y>x&&(_[0]=c,_[1]=u,_[2]=s,_[3]=a),_}detectSolid2(r){let s=r[0],a=r[1],c=r[2],u=r[3],d=this.transitionsBetween(s,u),h=Ft.shiftPoint(a,c,(d+1)*4),g=Ft.shiftPoint(c,a,(d+1)*4),x=this.transitionsBetween(h,s),y=this.transitionsBetween(g,u);return x<y?(r[0]=s,r[1]=a,r[2]=c,r[3]=u):(r[0]=a,r[1]=c,r[2]=u,r[3]=s),r}correctTopRight(r){let s=r[0],a=r[1],c=r[2],u=r[3],d=this.transitionsBetween(s,u),h=this.transitionsBetween(a,u),g=Ft.shiftPoint(s,a,(h+1)*4),x=Ft.shiftPoint(c,a,(d+1)*4);d=this.transitionsBetween(g,u),h=this.transitionsBetween(x,u);let y=new he(u.getX()+(c.getX()-a.getX())/(d+1),u.getY()+(c.getY()-a.getY())/(d+1)),_=new he(u.getX()+(s.getX()-a.getX())/(h+1),u.getY()+(s.getY()-a.getY())/(h+1));if(!this.isValid(y))return this.isValid(_)?_:null;if(!this.isValid(_))return y;let S=this.transitionsBetween(g,y)+this.transitionsBetween(x,y),T=this.transitionsBetween(g,_)+this.transitionsBetween(x,_);return S>T?y:_}shiftToModuleCenter(r){let s=r[0],a=r[1],c=r[2],u=r[3],d=this.transitionsBetween(s,u)+1,h=this.transitionsBetween(c,u)+1,g=Ft.shiftPoint(s,a,h*4),x=Ft.shiftPoint(c,a,d*4);d=this.transitionsBetween(g,u)+1,h=this.transitionsBetween(x,u)+1,(d&1)===1&&(d+=1),(h&1)===1&&(h+=1);let y=(s.getX()+a.getX()+c.getX()+u.getX())/4,_=(s.getY()+a.getY()+c.getY()+u.getY())/4;s=Ft.moveAway(s,y,_),a=Ft.moveAway(a,y,_),c=Ft.moveAway(c,y,_),u=Ft.moveAway(u,y,_);let S,T;return g=Ft.shiftPoint(s,a,h*4),g=Ft.shiftPoint(g,u,d*4),S=Ft.shiftPoint(a,s,h*4),S=Ft.shiftPoint(S,c,d*4),x=Ft.shiftPoint(c,u,h*4),x=Ft.shiftPoint(x,a,d*4),T=Ft.shiftPoint(u,c,h*4),T=Ft.shiftPoint(T,s,d*4),[g,S,x,T]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,s,a,c,u,d,h){return Ie.getInstance().sampleGrid(r,d,h,.5,.5,d-.5,.5,d-.5,h-.5,.5,h-.5,s.getX(),s.getY(),u.getX(),u.getY(),c.getX(),c.getY(),a.getX(),a.getY())}transitionsBetween(r,s){let a=Math.trunc(r.getX()),c=Math.trunc(r.getY()),u=Math.trunc(s.getX()),d=Math.trunc(s.getY()),h=Math.abs(d-c)>Math.abs(u-a);if(h){let P=a;a=c,c=P,P=u,u=d,d=P}let g=Math.abs(u-a),x=Math.abs(d-c),y=-g/2,_=c<d?1:-1,S=a<u?1:-1,T=0,D=this.image.get(h?c:a,h?a:c);for(let P=a,L=c;P!==u;P+=S){let V=this.image.get(h?L:P,h?P:L);if(V!==D&&(T++,D=V),y+=x,y>0){if(L===d)break;L+=_,y-=g}}return T}}class vi{constructor(){this.decoder=new RC}decode(r,s=null){let a,c;if(s!=null&&s.has(Z.PURE_BARCODE)){const x=vi.extractPureBits(r.getBlackMatrix());a=this.decoder.decode(x),c=vi.NO_POINTS}else{const x=new Ft(r.getBlackMatrix()).detect();a=this.decoder.decode(x.getBits()),c=x.getPoints()}const u=a.getRawBytes(),d=new ue(a.getText(),u,8*u.length,c,ce.DATA_MATRIX,B.currentTimeMillis()),h=a.getByteSegments();h!=null&&d.putMetadata(Pe.BYTE_SEGMENTS,h);const g=a.getECLevel();return g!=null&&d.putMetadata(Pe.ERROR_CORRECTION_LEVEL,g),d}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),a=r.getBottomRightOnBit();if(s==null||a==null)throw new H;const c=this.moduleSize(s,r);let u=s[1];const d=a[1];let h=s[0];const x=(a[0]-h+1)/c,y=(d-u+1)/c;if(x<=0||y<=0)throw new H;const _=c/2;u+=_,h+=_;const S=new Te(x,y);for(let T=0;T<y;T++){const D=u+T*c;for(let P=0;P<x;P++)r.get(h+P*c,D)&&S.set(P,T)}return S}static moduleSize(r,s){const a=s.getWidth();let c=r[0];const u=r[1];for(;c<a&&s.get(c,u);)c++;if(c===a)throw new H;const d=c-r[0];if(d===0)throw new H;return d}}vi.NO_POINTS=[];class OC extends Ge{constructor(r=500){super(new vi,r)}}var qs;(function(C){C[C.L=0]="L",C[C.M=1]="M",C[C.Q=2]="Q",C[C.H=3]="H"})(qs||(qs={}));class ft{constructor(r,s,a){this.value=r,this.stringValue=s,this.bits=a,ft.FOR_BITS.set(a,this),ft.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return ft.L;case"M":return ft.M;case"Q":return ft.Q;case"H":return ft.H;default:throw new E(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof ft))return!1;const s=r;return this.value===s.value}static forBits(r){if(r<0||r>=ft.FOR_BITS.size)throw new v;return ft.FOR_BITS.get(r)}}ft.FOR_BITS=new Map,ft.FOR_VALUE=new Map,ft.L=new ft(qs.L,"L",1),ft.M=new ft(qs.M,"M",0),ft.Q=new ft(qs.Q,"Q",3),ft.H=new ft(qs.H,"H",2);class xn{constructor(r){this.errorCorrectionLevel=ft.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,s){return k.bitCount(r^s)}static decodeFormatInformation(r,s){const a=xn.doDecodeFormatInformation(r,s);return a!==null?a:xn.doDecodeFormatInformation(r^xn.FORMAT_INFO_MASK_QR,s^xn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,s){let a=Number.MAX_SAFE_INTEGER,c=0;for(const u of xn.FORMAT_INFO_DECODE_LOOKUP){const d=u[0];if(d===r||d===s)return new xn(u[1]);let h=xn.numBitsDiffering(r,d);h<a&&(c=u[1],a=h),r!==s&&(h=xn.numBitsDiffering(s,d),h<a&&(c=u[1],a=h))}return a<=3?new xn(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof xn))return!1;const s=r;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}xn.FORMAT_INFO_MASK_QR=21522,xn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class F{constructor(r,...s){this.ecCodewordsPerBlock=r,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const s=this.ecBlocks;for(const a of s)r+=a.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class I{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class me{constructor(r,s,...a){this.versionNumber=r,this.alignmentPatternCenters=s,this.ecBlocks=a;let c=0;const u=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();for(const h of d)c+=h.getCount()*(h.getDataCodewords()+u);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new z;try{return this.getVersionForNumber((r-17)/4)}catch{throw new z}}static getVersionForNumber(r){if(r<1||r>40)throw new v;return me.VERSIONS[r-1]}static decodeVersionInformation(r){let s=Number.MAX_SAFE_INTEGER,a=0;for(let c=0;c<me.VERSION_DECODE_INFO.length;c++){const u=me.VERSION_DECODE_INFO[c];if(u===r)return me.getVersionForNumber(c+7);const d=xn.numBitsDiffering(r,u);d<s&&(a=c+7,s=d)}return s<=3?me.getVersionForNumber(a):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),s=new Te(r);s.setRegion(0,0,9,9),s.setRegion(r-8,0,8,9),s.setRegion(0,r-8,9,8);const a=this.alignmentPatternCenters.length;for(let c=0;c<a;c++){const u=this.alignmentPatternCenters[c]-2;for(let d=0;d<a;d++)c===0&&(d===0||d===a-1)||c===a-1&&d===0||s.setRegion(this.alignmentPatternCenters[d]-2,u,5,5)}return s.setRegion(6,9,1,r-17),s.setRegion(9,6,r-17,1),this.versionNumber>6&&(s.setRegion(r-11,0,3,6),s.setRegion(0,r-11,6,3)),s}toString(){return""+this.versionNumber}}me.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),me.VERSIONS=[new me(1,new Int32Array(0),new F(7,new I(1,19)),new F(10,new I(1,16)),new F(13,new I(1,13)),new F(17,new I(1,9))),new me(2,Int32Array.from([6,18]),new F(10,new I(1,34)),new F(16,new I(1,28)),new F(22,new I(1,22)),new F(28,new I(1,16))),new me(3,Int32Array.from([6,22]),new F(15,new I(1,55)),new F(26,new I(1,44)),new F(18,new I(2,17)),new F(22,new I(2,13))),new me(4,Int32Array.from([6,26]),new F(20,new I(1,80)),new F(18,new I(2,32)),new F(26,new I(2,24)),new F(16,new I(4,9))),new me(5,Int32Array.from([6,30]),new F(26,new I(1,108)),new F(24,new I(2,43)),new F(18,new I(2,15),new I(2,16)),new F(22,new I(2,11),new I(2,12))),new me(6,Int32Array.from([6,34]),new F(18,new I(2,68)),new F(16,new I(4,27)),new F(24,new I(4,19)),new F(28,new I(4,15))),new me(7,Int32Array.from([6,22,38]),new F(20,new I(2,78)),new F(18,new I(4,31)),new F(18,new I(2,14),new I(4,15)),new F(26,new I(4,13),new I(1,14))),new me(8,Int32Array.from([6,24,42]),new F(24,new I(2,97)),new F(22,new I(2,38),new I(2,39)),new F(22,new I(4,18),new I(2,19)),new F(26,new I(4,14),new I(2,15))),new me(9,Int32Array.from([6,26,46]),new F(30,new I(2,116)),new F(22,new I(3,36),new I(2,37)),new F(20,new I(4,16),new I(4,17)),new F(24,new I(4,12),new I(4,13))),new me(10,Int32Array.from([6,28,50]),new F(18,new I(2,68),new I(2,69)),new F(26,new I(4,43),new I(1,44)),new F(24,new I(6,19),new I(2,20)),new F(28,new I(6,15),new I(2,16))),new me(11,Int32Array.from([6,30,54]),new F(20,new I(4,81)),new F(30,new I(1,50),new I(4,51)),new F(28,new I(4,22),new I(4,23)),new F(24,new I(3,12),new I(8,13))),new me(12,Int32Array.from([6,32,58]),new F(24,new I(2,92),new I(2,93)),new F(22,new I(6,36),new I(2,37)),new F(26,new I(4,20),new I(6,21)),new F(28,new I(7,14),new I(4,15))),new me(13,Int32Array.from([6,34,62]),new F(26,new I(4,107)),new F(22,new I(8,37),new I(1,38)),new F(24,new I(8,20),new I(4,21)),new F(22,new I(12,11),new I(4,12))),new me(14,Int32Array.from([6,26,46,66]),new F(30,new I(3,115),new I(1,116)),new F(24,new I(4,40),new I(5,41)),new F(20,new I(11,16),new I(5,17)),new F(24,new I(11,12),new I(5,13))),new me(15,Int32Array.from([6,26,48,70]),new F(22,new I(5,87),new I(1,88)),new F(24,new I(5,41),new I(5,42)),new F(30,new I(5,24),new I(7,25)),new F(24,new I(11,12),new I(7,13))),new me(16,Int32Array.from([6,26,50,74]),new F(24,new I(5,98),new I(1,99)),new F(28,new I(7,45),new I(3,46)),new F(24,new I(15,19),new I(2,20)),new F(30,new I(3,15),new I(13,16))),new me(17,Int32Array.from([6,30,54,78]),new F(28,new I(1,107),new I(5,108)),new F(28,new I(10,46),new I(1,47)),new F(28,new I(1,22),new I(15,23)),new F(28,new I(2,14),new I(17,15))),new me(18,Int32Array.from([6,30,56,82]),new F(30,new I(5,120),new I(1,121)),new F(26,new I(9,43),new I(4,44)),new F(28,new I(17,22),new I(1,23)),new F(28,new I(2,14),new I(19,15))),new me(19,Int32Array.from([6,30,58,86]),new F(28,new I(3,113),new I(4,114)),new F(26,new I(3,44),new I(11,45)),new F(26,new I(17,21),new I(4,22)),new F(26,new I(9,13),new I(16,14))),new me(20,Int32Array.from([6,34,62,90]),new F(28,new I(3,107),new I(5,108)),new F(26,new I(3,41),new I(13,42)),new F(30,new I(15,24),new I(5,25)),new F(28,new I(15,15),new I(10,16))),new me(21,Int32Array.from([6,28,50,72,94]),new F(28,new I(4,116),new I(4,117)),new F(26,new I(17,42)),new F(28,new I(17,22),new I(6,23)),new F(30,new I(19,16),new I(6,17))),new me(22,Int32Array.from([6,26,50,74,98]),new F(28,new I(2,111),new I(7,112)),new F(28,new I(17,46)),new F(30,new I(7,24),new I(16,25)),new F(24,new I(34,13))),new me(23,Int32Array.from([6,30,54,78,102]),new F(30,new I(4,121),new I(5,122)),new F(28,new I(4,47),new I(14,48)),new F(30,new I(11,24),new I(14,25)),new F(30,new I(16,15),new I(14,16))),new me(24,Int32Array.from([6,28,54,80,106]),new F(30,new I(6,117),new I(4,118)),new F(28,new I(6,45),new I(14,46)),new F(30,new I(11,24),new I(16,25)),new F(30,new I(30,16),new I(2,17))),new me(25,Int32Array.from([6,32,58,84,110]),new F(26,new I(8,106),new I(4,107)),new F(28,new I(8,47),new I(13,48)),new F(30,new I(7,24),new I(22,25)),new F(30,new I(22,15),new I(13,16))),new me(26,Int32Array.from([6,30,58,86,114]),new F(28,new I(10,114),new I(2,115)),new F(28,new I(19,46),new I(4,47)),new F(28,new I(28,22),new I(6,23)),new F(30,new I(33,16),new I(4,17))),new me(27,Int32Array.from([6,34,62,90,118]),new F(30,new I(8,122),new I(4,123)),new F(28,new I(22,45),new I(3,46)),new F(30,new I(8,23),new I(26,24)),new F(30,new I(12,15),new I(28,16))),new me(28,Int32Array.from([6,26,50,74,98,122]),new F(30,new I(3,117),new I(10,118)),new F(28,new I(3,45),new I(23,46)),new F(30,new I(4,24),new I(31,25)),new F(30,new I(11,15),new I(31,16))),new me(29,Int32Array.from([6,30,54,78,102,126]),new F(30,new I(7,116),new I(7,117)),new F(28,new I(21,45),new I(7,46)),new F(30,new I(1,23),new I(37,24)),new F(30,new I(19,15),new I(26,16))),new me(30,Int32Array.from([6,26,52,78,104,130]),new F(30,new I(5,115),new I(10,116)),new F(28,new I(19,47),new I(10,48)),new F(30,new I(15,24),new I(25,25)),new F(30,new I(23,15),new I(25,16))),new me(31,Int32Array.from([6,30,56,82,108,134]),new F(30,new I(13,115),new I(3,116)),new F(28,new I(2,46),new I(29,47)),new F(30,new I(42,24),new I(1,25)),new F(30,new I(23,15),new I(28,16))),new me(32,Int32Array.from([6,34,60,86,112,138]),new F(30,new I(17,115)),new F(28,new I(10,46),new I(23,47)),new F(30,new I(10,24),new I(35,25)),new F(30,new I(19,15),new I(35,16))),new me(33,Int32Array.from([6,30,58,86,114,142]),new F(30,new I(17,115),new I(1,116)),new F(28,new I(14,46),new I(21,47)),new F(30,new I(29,24),new I(19,25)),new F(30,new I(11,15),new I(46,16))),new me(34,Int32Array.from([6,34,62,90,118,146]),new F(30,new I(13,115),new I(6,116)),new F(28,new I(14,46),new I(23,47)),new F(30,new I(44,24),new I(7,25)),new F(30,new I(59,16),new I(1,17))),new me(35,Int32Array.from([6,30,54,78,102,126,150]),new F(30,new I(12,121),new I(7,122)),new F(28,new I(12,47),new I(26,48)),new F(30,new I(39,24),new I(14,25)),new F(30,new I(22,15),new I(41,16))),new me(36,Int32Array.from([6,24,50,76,102,128,154]),new F(30,new I(6,121),new I(14,122)),new F(28,new I(6,47),new I(34,48)),new F(30,new I(46,24),new I(10,25)),new F(30,new I(2,15),new I(64,16))),new me(37,Int32Array.from([6,28,54,80,106,132,158]),new F(30,new I(17,122),new I(4,123)),new F(28,new I(29,46),new I(14,47)),new F(30,new I(49,24),new I(10,25)),new F(30,new I(24,15),new I(46,16))),new me(38,Int32Array.from([6,32,58,84,110,136,162]),new F(30,new I(4,122),new I(18,123)),new F(28,new I(13,46),new I(32,47)),new F(30,new I(48,24),new I(14,25)),new F(30,new I(42,15),new I(32,16))),new me(39,Int32Array.from([6,26,54,82,110,138,166]),new F(30,new I(20,117),new I(4,118)),new F(28,new I(40,47),new I(7,48)),new F(30,new I(43,24),new I(22,25)),new F(30,new I(10,15),new I(67,16))),new me(40,Int32Array.from([6,30,58,86,114,142,170]),new F(30,new I(19,118),new I(6,119)),new F(28,new I(18,47),new I(31,48)),new F(30,new I(34,24),new I(34,25)),new F(30,new I(20,15),new I(61,16)))];var Qt;(function(C){C[C.DATA_MASK_000=0]="DATA_MASK_000",C[C.DATA_MASK_001=1]="DATA_MASK_001",C[C.DATA_MASK_010=2]="DATA_MASK_010",C[C.DATA_MASK_011=3]="DATA_MASK_011",C[C.DATA_MASK_100=4]="DATA_MASK_100",C[C.DATA_MASK_101=5]="DATA_MASK_101",C[C.DATA_MASK_110=6]="DATA_MASK_110",C[C.DATA_MASK_111=7]="DATA_MASK_111"})(Qt||(Qt={}));class cr{constructor(r,s){this.value=r,this.isMasked=s}unmaskBitMatrix(r,s){for(let a=0;a<s;a++)for(let c=0;c<s;c++)this.isMasked(a,c)&&r.flip(c,a)}}cr.values=new Map([[Qt.DATA_MASK_000,new cr(Qt.DATA_MASK_000,(C,r)=>(C+r&1)===0)],[Qt.DATA_MASK_001,new cr(Qt.DATA_MASK_001,(C,r)=>(C&1)===0)],[Qt.DATA_MASK_010,new cr(Qt.DATA_MASK_010,(C,r)=>r%3===0)],[Qt.DATA_MASK_011,new cr(Qt.DATA_MASK_011,(C,r)=>(C+r)%3===0)],[Qt.DATA_MASK_100,new cr(Qt.DATA_MASK_100,(C,r)=>(Math.floor(C/2)+Math.floor(r/3)&1)===0)],[Qt.DATA_MASK_101,new cr(Qt.DATA_MASK_101,(C,r)=>C*r%6===0)],[Qt.DATA_MASK_110,new cr(Qt.DATA_MASK_110,(C,r)=>C*r%6<3)],[Qt.DATA_MASK_111,new cr(Qt.DATA_MASK_111,(C,r)=>(C+r+C*r%3&1)===0)]]);class DC{constructor(r){const s=r.getHeight();if(s<21||(s&3)!==1)throw new z;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let u=0;u<6;u++)r=this.copyBit(u,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let u=5;u>=0;u--)r=this.copyBit(8,u,r);const s=this.bitMatrix.getHeight();let a=0;const c=s-7;for(let u=s-1;u>=c;u--)a=this.copyBit(8,u,a);for(let u=s-8;u<s;u++)a=this.copyBit(u,8,a);if(this.parsedFormatInfo=xn.decodeFormatInformation(r,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new z}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),s=Math.floor((r-17)/4);if(s<=6)return me.getVersionForNumber(s);let a=0;const c=r-11;for(let d=5;d>=0;d--)for(let h=r-9;h>=c;h--)a=this.copyBit(h,d,a);let u=me.decodeVersionInformation(a);if(u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;a=0;for(let d=5;d>=0;d--)for(let h=r-9;h>=c;h--)a=this.copyBit(d,h,a);if(u=me.decodeVersionInformation(a),u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;throw new z}copyBit(r,s,a){return(this.isMirror?this.bitMatrix.get(s,r):this.bitMatrix.get(r,s))?a<<1|1:a<<1}readCodewords(){const r=this.readFormatInformation(),s=this.readVersion(),a=cr.values.get(r.getDataMask()),c=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,c);const u=s.buildFunctionPattern();let d=!0;const h=new Uint8Array(s.getTotalCodewords());let g=0,x=0,y=0;for(let _=c-1;_>0;_-=2){_===6&&_--;for(let S=0;S<c;S++){const T=d?c-1-S:S;for(let D=0;D<2;D++)u.get(_-D,T)||(y++,x<<=1,this.bitMatrix.get(_-D,T)&&(x|=1),y===8&&(h[g++]=x,y=0,x=0))}d=!d}if(g!==s.getTotalCodewords())throw new z;return h}remask(){if(this.parsedFormatInfo===null)return;const r=cr.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let s=0,a=r.getWidth();s<a;s++)for(let c=s+1,u=r.getHeight();c<u;c++)r.get(s,c)!==r.get(c,s)&&(r.flip(c,s),r.flip(s,c))}}class Ed{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s,a){if(r.length!==s.getTotalCodewords())throw new v;const c=s.getECBlocksForLevel(a);let u=0;const d=c.getECBlocks();for(const D of d)u+=D.getCount();const h=new Array(u);let g=0;for(const D of d)for(let P=0;P<D.getCount();P++){const L=D.getDataCodewords(),V=c.getECCodewordsPerBlock()+L;h[g++]=new Ed(L,new Uint8Array(V))}const x=h[0].codewords.length;let y=h.length-1;for(;y>=0&&h[y].codewords.length!==x;)y--;y++;const _=x-c.getECCodewordsPerBlock();let S=0;for(let D=0;D<_;D++)for(let P=0;P<g;P++)h[P].codewords[D]=r[S++];for(let D=y;D<g;D++)h[D].codewords[_]=r[S++];const T=h[0].codewords.length;for(let D=_;D<T;D++)for(let P=0;P<g;P++){const L=P<y?D:D+1;h[P].codewords[L]=r[S++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var ur;(function(C){C[C.TERMINATOR=0]="TERMINATOR",C[C.NUMERIC=1]="NUMERIC",C[C.ALPHANUMERIC=2]="ALPHANUMERIC",C[C.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",C[C.BYTE=4]="BYTE",C[C.ECI=5]="ECI",C[C.KANJI=6]="KANJI",C[C.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",C[C.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",C[C.HANZI=9]="HANZI"})(ur||(ur={}));class ye{constructor(r,s,a,c){this.value=r,this.stringValue=s,this.characterCountBitsForVersions=a,this.bits=c,ye.FOR_BITS.set(c,this),ye.FOR_VALUE.set(r,this)}static forBits(r){const s=ye.FOR_BITS.get(r);if(s===void 0)throw new v;return s}getCharacterCountBits(r){const s=r.getVersionNumber();let a;return s<=9?a=0:s<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof ye))return!1;const s=r;return this.value===s.value}toString(){return this.stringValue}}ye.FOR_BITS=new Map,ye.FOR_VALUE=new Map,ye.TERMINATOR=new ye(ur.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ye.NUMERIC=new ye(ur.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ye.ALPHANUMERIC=new ye(ur.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ye.STRUCTURED_APPEND=new ye(ur.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ye.BYTE=new ye(ur.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ye.ECI=new ye(ur.ECI,"ECI",Int32Array.from([0,0,0]),7),ye.KANJI=new ye(ur.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ye.FNC1_FIRST_POSITION=new ye(ur.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ye.FNC1_SECOND_POSITION=new ye(ur.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ye.HANZI=new ye(ur.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class It{static decode(r,s,a,c){const u=new _d(r);let d=new Oe;const h=new Array;let g=-1,x=-1;try{let y=null,_=!1,S;do{if(u.available()<4)S=ye.TERMINATOR;else{const T=u.readBits(4);S=ye.forBits(T)}switch(S){case ye.TERMINATOR:break;case ye.FNC1_FIRST_POSITION:case ye.FNC1_SECOND_POSITION:_=!0;break;case ye.STRUCTURED_APPEND:if(u.available()<16)throw new z;g=u.readBits(8),x=u.readBits(8);break;case ye.ECI:const T=It.parseECIValue(u);if(y=$.getCharacterSetECIByValue(T),y===null)throw new z;break;case ye.HANZI:const D=u.readBits(4),P=u.readBits(S.getCharacterCountBits(s));D===It.GB2312_SUBSET&&It.decodeHanziSegment(u,d,P);break;default:const L=u.readBits(S.getCharacterCountBits(s));switch(S){case ye.NUMERIC:It.decodeNumericSegment(u,d,L);break;case ye.ALPHANUMERIC:It.decodeAlphanumericSegment(u,d,L,_);break;case ye.BYTE:It.decodeByteSegment(u,d,L,y,h,c);break;case ye.KANJI:It.decodeKanjiSegment(u,d,L);break;default:throw new z}break}}while(S!==ye.TERMINATOR)}catch{throw new z}return new Mr(r,d.toString(),h.length===0?null:h,a===null?null:a.toString(),g,x)}static decodeHanziSegment(r,s,a){if(a*13>r.available())throw new z;const c=new Uint8Array(2*a);let u=0;for(;a>0;){const d=r.readBits(13);let h=d/96<<8&4294967295|d%96;h<959?h+=41377:h+=42657,c[u]=h>>8&255,c[u+1]=h&255,u+=2,a--}try{s.append(nt.decode(c,pe.GB2312))}catch(d){throw new z(d)}}static decodeKanjiSegment(r,s,a){if(a*13>r.available())throw new z;const c=new Uint8Array(2*a);let u=0;for(;a>0;){const d=r.readBits(13);let h=d/192<<8&4294967295|d%192;h<7936?h+=33088:h+=49472,c[u]=h>>8,c[u+1]=h,u+=2,a--}try{s.append(nt.decode(c,pe.SHIFT_JIS))}catch(d){throw new z(d)}}static decodeByteSegment(r,s,a,c,u,d){if(8*a>r.available())throw new z;const h=new Uint8Array(a);for(let x=0;x<a;x++)h[x]=r.readBits(8);let g;c===null?g=pe.guessEncoding(h,d):g=c.getName();try{s.append(nt.decode(h,g))}catch(x){throw new z(x)}u.push(h)}static toAlphaNumericChar(r){if(r>=It.ALPHANUMERIC_CHARS.length)throw new z;return It.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,s,a,c){const u=s.length();for(;a>1;){if(r.available()<11)throw new z;const d=r.readBits(11);s.append(It.toAlphaNumericChar(Math.floor(d/45))),s.append(It.toAlphaNumericChar(d%45)),a-=2}if(a===1){if(r.available()<6)throw new z;s.append(It.toAlphaNumericChar(r.readBits(6)))}if(c)for(let d=u;d<s.length();d++)s.charAt(d)==="%"&&(d<s.length()-1&&s.charAt(d+1)==="%"?s.deleteCharAt(d+1):s.setCharAt(d,""))}static decodeNumericSegment(r,s,a){for(;a>=3;){if(r.available()<10)throw new z;const c=r.readBits(10);if(c>=1e3)throw new z;s.append(It.toAlphaNumericChar(Math.floor(c/100))),s.append(It.toAlphaNumericChar(Math.floor(c/10)%10)),s.append(It.toAlphaNumericChar(c%10)),a-=3}if(a===2){if(r.available()<7)throw new z;const c=r.readBits(7);if(c>=100)throw new z;s.append(It.toAlphaNumericChar(Math.floor(c/10))),s.append(It.toAlphaNumericChar(c%10))}else if(a===1){if(r.available()<4)throw new z;const c=r.readBits(4);if(c>=10)throw new z;s.append(It.toAlphaNumericChar(c))}}static parseECIValue(r){const s=r.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const a=r.readBits(8);return(s&63)<<8&4294967295|a}if((s&224)===192){const a=r.readBits(16);return(s&31)<<16&4294967295|a}throw new z}}It.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",It.GB2312_SUBSET=1;class eg{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const s=r[0];r[0]=r[2],r[2]=s}}class PC{constructor(){this.rsDecoder=new wi(We.QR_CODE_FIELD_256)}decodeBooleanArray(r,s){return this.decodeBitMatrix(Te.parseFromBooleanArray(r),s)}decodeBitMatrix(r,s){const a=new DC(r);let c=null;try{return this.decodeBitMatrixParser(a,s)}catch(u){c=u}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const u=this.decodeBitMatrixParser(a,s);return u.setOther(new eg(!0)),u}catch(u){throw c!==null?c:u}}decodeBitMatrixParser(r,s){const a=r.readVersion(),c=r.readFormatInformation().getErrorCorrectionLevel(),u=r.readCodewords(),d=Ed.getDataBlocks(u,a,c);let h=0;for(const y of d)h+=y.getNumDataCodewords();const g=new Uint8Array(h);let x=0;for(const y of d){const _=y.getCodewords(),S=y.getNumDataCodewords();this.correctErrors(_,S);for(let T=0;T<S;T++)g[x++]=_[T]}return It.decode(g,a,c,s)}correctErrors(r,s){const a=new Int32Array(r);try{this.rsDecoder.decode(a,r.length-s)}catch{throw new R}for(let c=0;c<s;c++)r[c]=a[c]}}class bd extends he{constructor(r,s,a){super(r,s),this.estimatedModuleSize=a}aboutEquals(r,s,a){if(Math.abs(s-this.getY())<=r&&Math.abs(a-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,s,a){const c=(this.getX()+s)/2,u=(this.getY()+r)/2,d=(this.estimatedModuleSize+a)/2;return new bd(c,u,d)}}class Xl{constructor(r,s,a,c,u,d,h){this.image=r,this.startX=s,this.startY=a,this.width=c,this.height=u,this.moduleSize=d,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,s=this.height,a=this.width,c=r+a,u=this.startY+s/2,d=new Int32Array(3),h=this.image;for(let g=0;g<s;g++){const x=u+(g&1?-Math.floor((g+1)/2):Math.floor((g+1)/2));d[0]=0,d[1]=0,d[2]=0;let y=r;for(;y<c&&!h.get(y,x);)y++;let _=0;for(;y<c;){if(h.get(y,x))if(_===1)d[1]++;else if(_===2){if(this.foundPatternCross(d)){const S=this.handlePossibleCenter(d,x,y);if(S!==null)return S}d[0]=d[2],d[1]=1,d[2]=0,_=1}else d[++_]++;else _===1&&_++,d[_]++;y++}if(this.foundPatternCross(d)){const S=this.handlePossibleCenter(d,x,c);if(S!==null)return S}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new H}static centerFromEnd(r,s){return s-r[2]-r[1]/2}foundPatternCross(r){const s=this.moduleSize,a=s/2;for(let c=0;c<3;c++)if(Math.abs(s-r[c])>=a)return!1;return!0}crossCheckVertical(r,s,a,c){const u=this.image,d=u.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let g=r;for(;g>=0&&u.get(s,g)&&h[1]<=a;)h[1]++,g--;if(g<0||h[1]>a)return NaN;for(;g>=0&&!u.get(s,g)&&h[0]<=a;)h[0]++,g--;if(h[0]>a)return NaN;for(g=r+1;g<d&&u.get(s,g)&&h[1]<=a;)h[1]++,g++;if(g===d||h[1]>a)return NaN;for(;g<d&&!u.get(s,g)&&h[2]<=a;)h[2]++,g++;if(h[2]>a)return NaN;const x=h[0]+h[1]+h[2];return 5*Math.abs(x-c)>=2*c?NaN:this.foundPatternCross(h)?Xl.centerFromEnd(h,g):NaN}handlePossibleCenter(r,s,a){const c=r[0]+r[1]+r[2],u=Xl.centerFromEnd(r,a),d=this.crossCheckVertical(s,u,2*r[1],c);if(!isNaN(d)){const h=(r[0]+r[1]+r[2])/3;for(const x of this.possibleCenters)if(x.aboutEquals(h,d,u))return x.combineEstimate(d,u,h);const g=new bd(u,d,h);this.possibleCenters.push(g),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(g)}return null}}class Sd extends he{constructor(r,s,a,c){super(r,s),this.estimatedModuleSize=a,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,s,a){if(Math.abs(s-this.getY())<=r&&Math.abs(a-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,s,a){const c=this.count+1,u=(this.count*this.getX()+s)/c,d=(this.count*this.getY()+r)/c,h=(this.count*this.estimatedModuleSize+a)/c;return new Sd(u,d,h,c)}}class MC{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Jt{constructor(r,s){this.image=r,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const s=r!=null&&r.get(Z.TRY_HARDER)!==void 0,a=r!=null&&r.get(Z.PURE_BARCODE)!==void 0,c=this.image,u=c.getHeight(),d=c.getWidth();let h=Math.floor(3*u/(4*Jt.MAX_MODULES));(h<Jt.MIN_SKIP||s)&&(h=Jt.MIN_SKIP);let g=!1;const x=new Int32Array(5);for(let _=h-1;_<u&&!g;_+=h){x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0;let S=0;for(let T=0;T<d;T++)if(c.get(T,_))(S&1)===1&&S++,x[S]++;else if(S&1)x[S]++;else if(S===4)if(Jt.foundPatternCross(x)){if(this.handlePossibleCenter(x,_,T,a)===!0)if(h=2,this.hasSkipped===!0)g=this.haveMultiplyConfirmedCenters();else{const P=this.findRowSkip();P>x[2]&&(_+=P-x[2]-h,T=d-1)}else{x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,S=3;continue}S=0,x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0}else x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,S=3;else x[++S]++;Jt.foundPatternCross(x)&&this.handlePossibleCenter(x,_,d,a)===!0&&(h=x[0],this.hasSkipped&&(g=this.haveMultiplyConfirmedCenters()))}const y=this.selectBestPatterns();return he.orderBestPatterns(y),new MC(y)}static centerFromEnd(r,s){return s-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let s=0;for(let u=0;u<5;u++){const d=r[u];if(d===0)return!1;s+=d}if(s<7)return!1;const a=s/7,c=a/2;return Math.abs(a-r[0])<c&&Math.abs(a-r[1])<c&&Math.abs(3*a-r[2])<3*c&&Math.abs(a-r[3])<c&&Math.abs(a-r[4])<c}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,s,a,c){const u=this.getCrossCheckStateCount();let d=0;const h=this.image;for(;r>=d&&s>=d&&h.get(s-d,r-d);)u[2]++,d++;if(r<d||s<d)return!1;for(;r>=d&&s>=d&&!h.get(s-d,r-d)&&u[1]<=a;)u[1]++,d++;if(r<d||s<d||u[1]>a)return!1;for(;r>=d&&s>=d&&h.get(s-d,r-d)&&u[0]<=a;)u[0]++,d++;if(u[0]>a)return!1;const g=h.getHeight(),x=h.getWidth();for(d=1;r+d<g&&s+d<x&&h.get(s+d,r+d);)u[2]++,d++;if(r+d>=g||s+d>=x)return!1;for(;r+d<g&&s+d<x&&!h.get(s+d,r+d)&&u[3]<a;)u[3]++,d++;if(r+d>=g||s+d>=x||u[3]>=a)return!1;for(;r+d<g&&s+d<x&&h.get(s+d,r+d)&&u[4]<a;)u[4]++,d++;if(u[4]>=a)return!1;const y=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(y-c)<2*c&&Jt.foundPatternCross(u)}crossCheckVertical(r,s,a,c){const u=this.image,d=u.getHeight(),h=this.getCrossCheckStateCount();let g=r;for(;g>=0&&u.get(s,g);)h[2]++,g--;if(g<0)return NaN;for(;g>=0&&!u.get(s,g)&&h[1]<=a;)h[1]++,g--;if(g<0||h[1]>a)return NaN;for(;g>=0&&u.get(s,g)&&h[0]<=a;)h[0]++,g--;if(h[0]>a)return NaN;for(g=r+1;g<d&&u.get(s,g);)h[2]++,g++;if(g===d)return NaN;for(;g<d&&!u.get(s,g)&&h[3]<a;)h[3]++,g++;if(g===d||h[3]>=a)return NaN;for(;g<d&&u.get(s,g)&&h[4]<a;)h[4]++,g++;if(h[4]>=a)return NaN;const x=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(x-c)>=2*c?NaN:Jt.foundPatternCross(h)?Jt.centerFromEnd(h,g):NaN}crossCheckHorizontal(r,s,a,c){const u=this.image,d=u.getWidth(),h=this.getCrossCheckStateCount();let g=r;for(;g>=0&&u.get(g,s);)h[2]++,g--;if(g<0)return NaN;for(;g>=0&&!u.get(g,s)&&h[1]<=a;)h[1]++,g--;if(g<0||h[1]>a)return NaN;for(;g>=0&&u.get(g,s)&&h[0]<=a;)h[0]++,g--;if(h[0]>a)return NaN;for(g=r+1;g<d&&u.get(g,s);)h[2]++,g++;if(g===d)return NaN;for(;g<d&&!u.get(g,s)&&h[3]<a;)h[3]++,g++;if(g===d||h[3]>=a)return NaN;for(;g<d&&u.get(g,s)&&h[4]<a;)h[4]++,g++;if(h[4]>=a)return NaN;const x=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(x-c)>=c?NaN:Jt.foundPatternCross(h)?Jt.centerFromEnd(h,g):NaN}handlePossibleCenter(r,s,a,c){const u=r[0]+r[1]+r[2]+r[3]+r[4];let d=Jt.centerFromEnd(r,a),h=this.crossCheckVertical(s,Math.floor(d),r[2],u);if(!isNaN(h)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(h),r[2],u),!isNaN(d)&&(!c||this.crossCheckDiagonal(Math.floor(h),Math.floor(d),r[2],u)))){const g=u/7;let x=!1;const y=this.possibleCenters;for(let _=0,S=y.length;_<S;_++){const T=y[_];if(T.aboutEquals(g,h,d)){y[_]=T.combineEstimate(h,d,g),x=!0;break}}if(!x){const _=new Sd(d,h,g);y.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const a of this.possibleCenters)if(a.getCount()>=Jt.CENTER_QUORUM)if(s==null)s=a;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-a.getX())-Math.abs(s.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,s=0;const a=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=Jt.CENTER_QUORUM&&(r++,s+=d.getEstimatedModuleSize());if(r<3)return!1;const c=s/a;let u=0;for(const d of this.possibleCenters)u+=Math.abs(d.getEstimatedModuleSize()-c);return u<=.05*s}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new H;const s=this.possibleCenters;let a;if(r>3){let c=0,u=0;for(const g of this.possibleCenters){const x=g.getEstimatedModuleSize();c+=x,u+=x*x}a=c/r;let d=Math.sqrt(u/r-a*a);s.sort((g,x)=>{const y=Math.abs(x.getEstimatedModuleSize()-a),_=Math.abs(g.getEstimatedModuleSize()-a);return y<_?-1:y>_?1:0});const h=Math.max(.2*a,d);for(let g=0;g<s.length&&s.length>3;g++){const x=s[g];Math.abs(x.getEstimatedModuleSize()-a)>h&&(s.splice(g,1),g--)}}if(s.length>3){let c=0;for(const u of s)c+=u.getEstimatedModuleSize();a=c/s.length,s.sort((u,d)=>{if(d.getCount()===u.getCount()){const h=Math.abs(d.getEstimatedModuleSize()-a),g=Math.abs(u.getEstimatedModuleSize()-a);return h<g?1:h>g?-1:0}else return d.getCount()-u.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}Jt.CENTER_QUORUM=2,Jt.MIN_SKIP=3,Jt.MAX_MODULES=57;class sa{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(Z.NEED_RESULT_POINT_CALLBACK);const a=new Jt(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(a)}processFinderPatternInfo(r){const s=r.getTopLeft(),a=r.getTopRight(),c=r.getBottomLeft(),u=this.calculateModuleSize(s,a,c);if(u<1)throw new H("No pattern found in proccess finder.");const d=sa.computeDimension(s,a,c,u),h=me.getProvisionalVersionForDimension(d),g=h.getDimensionForVersion()-7;let x=null;if(h.getAlignmentPatternCenters().length>0){const T=a.getX()-s.getX()+c.getX(),D=a.getY()-s.getY()+c.getY(),P=1-3/g,L=Math.floor(s.getX()+P*(T-s.getX())),V=Math.floor(s.getY()+P*(D-s.getY()));for(let ne=4;ne<=16;ne<<=1)try{x=this.findAlignmentInRegion(u,L,V,ne);break}catch(ie){if(!(ie instanceof H))throw ie}}const y=sa.createTransform(s,a,c,x,d),_=sa.sampleGrid(this.image,y,d);let S;return x===null?S=[c,s,a]:S=[c,s,a,x],new Hs(_,S)}static createTransform(r,s,a,c,u){const d=u-3.5;let h,g,x,y;return c!==null?(h=c.getX(),g=c.getY(),x=d-3,y=x):(h=s.getX()-r.getX()+a.getX(),g=s.getY()-r.getY()+a.getY(),x=d,y=d),j.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,x,y,3.5,d,r.getX(),r.getY(),s.getX(),s.getY(),h,g,a.getX(),a.getY())}static sampleGrid(r,s,a){return Ie.getInstance().sampleGridWithTransform(r,a,a,s)}static computeDimension(r,s,a,c){const u=Ue.round(he.distance(r,s)/c),d=Ue.round(he.distance(r,a)/c);let h=Math.floor((u+d)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new H("Dimensions could be not found.")}return h}calculateModuleSize(r,s,a){return(this.calculateModuleSizeOneWay(r,s)+this.calculateModuleSizeOneWay(r,a))/2}calculateModuleSizeOneWay(r,s){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(s.getX()),Math.floor(s.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(a)?c/7:isNaN(c)?a/7:(a+c)/14}sizeOfBlackWhiteBlackRunBothWays(r,s,a,c){let u=this.sizeOfBlackWhiteBlackRun(r,s,a,c),d=1,h=r-(a-r);h<0?(d=r/(r-h),h=0):h>=this.image.getWidth()&&(d=(this.image.getWidth()-1-r)/(h-r),h=this.image.getWidth()-1);let g=Math.floor(s-(c-s)*d);return d=1,g<0?(d=s/(s-g),g=0):g>=this.image.getHeight()&&(d=(this.image.getHeight()-1-s)/(g-s),g=this.image.getHeight()-1),h=Math.floor(r+(h-r)*d),u+=this.sizeOfBlackWhiteBlackRun(r,s,h,g),u-1}sizeOfBlackWhiteBlackRun(r,s,a,c){const u=Math.abs(c-s)>Math.abs(a-r);if(u){let T=r;r=s,s=T,T=a,a=c,c=T}const d=Math.abs(a-r),h=Math.abs(c-s);let g=-d/2;const x=r<a?1:-1,y=s<c?1:-1;let _=0;const S=a+x;for(let T=r,D=s;T!==S;T+=x){const P=u?D:T,L=u?T:D;if(_===1===this.image.get(P,L)){if(_===2)return Ue.distance(T,D,r,s);_++}if(g+=h,g>0){if(D===c)break;D+=y,g-=d}}return _===2?Ue.distance(a+x,c,r,s):NaN}findAlignmentInRegion(r,s,a,c){const u=Math.floor(c*r),d=Math.max(0,s-u),h=Math.min(this.image.getWidth()-1,s+u);if(h-d<r*3)throw new H("Alignment top exceeds estimated module size.");const g=Math.max(0,a-u),x=Math.min(this.image.getHeight()-1,a+u);if(x-g<r*3)throw new H("Alignment bottom exceeds estimated module size.");return new Xl(this.image,d,g,h-d,x-g,r,this.resultPointCallback).find()}}class Ci{constructor(){this.decoder=new PC}getDecoder(){return this.decoder}decode(r,s){let a,c;if(s!=null&&s.get(Z.PURE_BARCODE)!==void 0){const g=Ci.extractPureBits(r.getBlackMatrix());a=this.decoder.decodeBitMatrix(g,s),c=Ci.NO_POINTS}else{const g=new sa(r.getBlackMatrix()).detect(s);a=this.decoder.decodeBitMatrix(g.getBits(),s),c=g.getPoints()}a.getOther()instanceof eg&&a.getOther().applyMirroredCorrection(c);const u=new ue(a.getText(),a.getRawBytes(),void 0,c,ce.QR_CODE,void 0),d=a.getByteSegments();d!==null&&u.putMetadata(Pe.BYTE_SEGMENTS,d);const h=a.getECLevel();return h!==null&&u.putMetadata(Pe.ERROR_CORRECTION_LEVEL,h),a.hasStructuredAppend()&&(u.putMetadata(Pe.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),u.putMetadata(Pe.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),u}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),a=r.getBottomRightOnBit();if(s===null||a===null)throw new H;const c=this.moduleSize(s,r);let u=s[1],d=a[1],h=s[0],g=a[0];if(h>=g||u>=d)throw new H;if(d-u!==g-h&&(g=h+(d-u),g>=r.getWidth()))throw new H;const x=Math.round((g-h+1)/c),y=Math.round((d-u+1)/c);if(x<=0||y<=0)throw new H;if(y!==x)throw new H;const _=Math.floor(c/2);u+=_,h+=_;const S=h+Math.floor((x-1)*c)-g;if(S>0){if(S>_)throw new H;h-=S}const T=u+Math.floor((y-1)*c)-d;if(T>0){if(T>_)throw new H;u-=T}const D=new Te(x,y);for(let P=0;P<y;P++){const L=u+Math.floor(P*c);for(let V=0;V<x;V++)r.get(h+Math.floor(V*c),L)&&D.set(V,P)}return D}static moduleSize(r,s){const a=s.getHeight(),c=s.getWidth();let u=r[0],d=r[1],h=!0,g=0;for(;u<c&&d<a;){if(h!==s.get(u,d)){if(++g===5)break;h=!h}u++,d++}if(u===c||d===a)throw new H;return(u-r[0])/7}}Ci.NO_POINTS=new Array;class be{PDF417Common(){}static getBitCountSum(r){return Ue.sum(r)}static toIntArray(r){if(r==null||!r.length)return be.EMPTY_INT_ARRAY;const s=new Int32Array(r.length);let a=0;for(const c of r)s[a++]=c;return s}static getCodeword(r){const s=N.binarySearch(be.SYMBOL_TABLE,r&262143);return s<0?-1:(be.CODEWORD_TABLE[s]-1)%be.NUMBER_OF_CODEWORDS}}be.NUMBER_OF_CODEWORDS=929,be.MAX_CODEWORDS_IN_BARCODE=be.NUMBER_OF_CODEWORDS-1,be.MIN_ROWS_IN_BARCODE=3,be.MAX_ROWS_IN_BARCODE=90,be.MODULES_IN_CODEWORD=17,be.MODULES_IN_STOP_PATTERN=18,be.BARS_IN_MODULE=8,be.EMPTY_INT_ARRAY=new Int32Array([]),be.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),be.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class BC{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Re{static detectMultiple(r,s,a){let c=r.getBlackMatrix(),u=Re.detect(a,c);return u.length||(c=c.clone(),c.rotate180(),u=Re.detect(a,c)),new BC(c,u)}static detect(r,s){const a=new Array;let c=0,u=0,d=!1;for(;c<s.getHeight();){const h=Re.findVertices(s,c,u);if(h[0]==null&&h[3]==null){if(!d)break;d=!1,u=0;for(const g of a)g[1]!=null&&(c=Math.trunc(Math.max(c,g[1].getY()))),g[3]!=null&&(c=Math.max(c,Math.trunc(g[3].getY())));c+=Re.ROW_STEP;continue}if(d=!0,a.push(h),!r)break;h[2]!=null?(u=Math.trunc(h[2].getX()),c=Math.trunc(h[2].getY())):(u=Math.trunc(h[4].getX()),c=Math.trunc(h[4].getY()))}return a}static findVertices(r,s,a){const c=r.getHeight(),u=r.getWidth(),d=new Array(8);return Re.copyToResult(d,Re.findRowsWithPattern(r,c,u,s,a,Re.START_PATTERN),Re.INDEXES_START_PATTERN),d[4]!=null&&(a=Math.trunc(d[4].getX()),s=Math.trunc(d[4].getY())),Re.copyToResult(d,Re.findRowsWithPattern(r,c,u,s,a,Re.STOP_PATTERN),Re.INDEXES_STOP_PATTERN),d}static copyToResult(r,s,a){for(let c=0;c<a.length;c++)r[a[c]]=s[c]}static findRowsWithPattern(r,s,a,c,u,d){const h=new Array(4);let g=!1;const x=new Int32Array(d.length);for(;c<s;c+=Re.ROW_STEP){let _=Re.findGuardPattern(r,u,c,a,!1,d,x);if(_!=null){for(;c>0;){const S=Re.findGuardPattern(r,u,--c,a,!1,d,x);if(S!=null)_=S;else{c++;break}}h[0]=new he(_[0],c),h[1]=new he(_[1],c),g=!0;break}}let y=c+1;if(g){let _=0,S=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;y<s;y++){const T=Re.findGuardPattern(r,S[0],y,a,!1,d,x);if(T!=null&&Math.abs(S[0]-T[0])<Re.MAX_PATTERN_DRIFT&&Math.abs(S[1]-T[1])<Re.MAX_PATTERN_DRIFT)S=T,_=0;else{if(_>Re.SKIPPED_ROW_COUNT_MAX)break;_++}}y-=_+1,h[2]=new he(S[0],y),h[3]=new he(S[1],y)}return y-c<Re.BARCODE_MIN_HEIGHT&&N.fill(h,null),h}static findGuardPattern(r,s,a,c,u,d,h){N.fillWithin(h,0,h.length,0);let g=s,x=0;for(;r.get(g,a)&&g>0&&x++<Re.MAX_PIXEL_DRIFT;)g--;let y=g,_=0,S=d.length;for(let T=u;y<c;y++)if(r.get(y,a)!==T)h[_]++;else{if(_===S-1){if(Re.patternMatchVariance(h,d,Re.MAX_INDIVIDUAL_VARIANCE)<Re.MAX_AVG_VARIANCE)return new Int32Array([g,y]);g+=h[0]+h[1],B.arraycopy(h,2,h,0,_-1),h[_-1]=0,h[_]=0,_--}else _++;h[_]=1,T=!T}return _===S-1&&Re.patternMatchVariance(h,d,Re.MAX_INDIVIDUAL_VARIANCE)<Re.MAX_AVG_VARIANCE?new Int32Array([g,y-1]):null}static patternMatchVariance(r,s,a){let c=r.length,u=0,d=0;for(let x=0;x<c;x++)u+=r[x],d+=s[x];if(u<d)return 1/0;let h=u/d;a*=h;let g=0;for(let x=0;x<c;x++){let y=r[x],_=s[x]*h,S=y>_?y-_:_-y;if(S>a)return 1/0;g+=S}return g/u}}Re.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Re.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Re.MAX_AVG_VARIANCE=.42,Re.MAX_INDIVIDUAL_VARIANCE=.8,Re.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Re.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Re.MAX_PIXEL_DRIFT=3,Re.MAX_PATTERN_DRIFT=5,Re.SKIPPED_ROW_COUNT_MAX=25,Re.ROW_STEP=5,Re.BARCODE_MIN_HEIGHT=10;class ln{constructor(r,s){if(s.length===0)throw new v;this.field=r;let a=s.length;if(a>1&&s[0]===0){let c=1;for(;c<a&&s[c]===0;)c++;c===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-c),B.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let c=0;for(let u of this.coefficients)c=this.field.add(c,u);return c}let s=this.coefficients[0],a=this.coefficients.length;for(let c=1;c<a;c++)s=this.field.add(this.field.multiply(r,s),this.coefficients[c]);return s}add(r){if(!this.field.equals(r.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,a=r.coefficients;if(s.length>a.length){let d=s;s=a,a=d}let c=new Int32Array(a.length),u=a.length-s.length;B.arraycopy(a,0,c,0,u);for(let d=u;d<a.length;d++)c[d]=this.field.add(s[d-u],a[d]);return new ln(this.field,c)}subtract(r){if(!this.field.equals(r.field))throw new v("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof ln?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new ln(this.field,new Int32Array([0]));let s=this.coefficients,a=s.length,c=r.coefficients,u=c.length,d=new Int32Array(a+u-1);for(let h=0;h<a;h++){let g=s[h];for(let x=0;x<u;x++)d[h+x]=this.field.add(d[h+x],this.field.multiply(g,c[x]))}return new ln(this.field,d)}negative(){let r=this.coefficients.length,s=new Int32Array(r);for(let a=0;a<r;a++)s[a]=this.field.subtract(0,this.coefficients[a]);return new ln(this.field,s)}multiplyScalar(r){if(r===0)return new ln(this.field,new Int32Array([0]));if(r===1)return this;let s=this.coefficients.length,a=new Int32Array(s);for(let c=0;c<s;c++)a[c]=this.field.multiply(this.coefficients[c],r);return new ln(this.field,a)}multiplyByMonomial(r,s){if(r<0)throw new v;if(s===0)return new ln(this.field,new Int32Array([0]));let a=this.coefficients.length,c=new Int32Array(a+r);for(let u=0;u<a;u++)c[u]=this.field.multiply(this.coefficients[u],s);return new ln(this.field,c)}toString(){let r=new Oe;for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);a!==0&&(a<0?(r.append(" - "),a=-a):r.length()>0&&r.append(" + "),(s===0||a!==1)&&r.append(a),s!==0&&(s===1?r.append("x"):(r.append("x^"),r.append(s))))}return r.toString()}}class LC{add(r,s){return(r+s)%this.modulus}subtract(r,s){return(this.modulus+r-s)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new v;return this.logTable[r]}inverse(r){if(r===0)throw new Ws;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class Ad extends LC{constructor(r,s){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let a=1;for(let c=0;c<r;c++)this.expTable[c]=a,a=a*s%r;for(let c=0;c<r-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new ln(this,new Int32Array([0])),this.one=new ln(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new v;if(s===0)return this.zero;let a=new Int32Array(r+1);return a[0]=s,new ln(this,a)}}Ad.PDF417_GF=new Ad(be.NUMBER_OF_CODEWORDS,3);class tg{constructor(){this.field=Ad.PDF417_GF}decode(r,s,a){let c=new ln(this.field,r),u=new Int32Array(s),d=!1;for(let D=s;D>0;D--){let P=c.evaluateAt(this.field.exp(D));u[s-D]=P,P!==0&&(d=!0)}if(!d)return 0;let h=this.field.getOne();if(a!=null)for(const D of a){let P=this.field.exp(r.length-1-D),L=new ln(this.field,new Int32Array([this.field.subtract(0,P),1]));h=h.multiply(L)}let g=new ln(this.field,u),x=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),g,s),y=x[0],_=x[1],S=this.findErrorLocations(y),T=this.findErrorMagnitudes(_,y,S);for(let D=0;D<S.length;D++){let P=r.length-1-this.field.log(S[D]);if(P<0)throw R.getChecksumInstance();r[P]=this.field.subtract(r[P],T[D])}return S.length}runEuclideanAlgorithm(r,s,a){if(r.getDegree()<s.getDegree()){let S=r;r=s,s=S}let c=r,u=s,d=this.field.getZero(),h=this.field.getOne();for(;u.getDegree()>=Math.round(a/2);){let S=c,T=d;if(c=u,d=h,c.isZero())throw R.getChecksumInstance();u=S;let D=this.field.getZero(),P=c.getCoefficient(c.getDegree()),L=this.field.inverse(P);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){let V=u.getDegree()-c.getDegree(),ne=this.field.multiply(u.getCoefficient(u.getDegree()),L);D=D.add(this.field.buildMonomial(V,ne)),u=u.subtract(c.multiplyByMonomial(V,ne))}h=D.multiply(d).subtract(T).negative()}let g=h.getCoefficient(0);if(g===0)throw R.getChecksumInstance();let x=this.field.inverse(g),y=h.multiply(x),_=u.multiply(x);return[y,_]}findErrorLocations(r){let s=r.getDegree(),a=new Int32Array(s),c=0;for(let u=1;u<this.field.getSize()&&c<s;u++)r.evaluateAt(u)===0&&(a[c]=this.field.inverse(u),c++);if(c!==s)throw R.getChecksumInstance();return a}findErrorMagnitudes(r,s,a){let c=s.getDegree(),u=new Int32Array(c);for(let x=1;x<=c;x++)u[c-x]=this.field.multiply(x,s.getCoefficient(x));let d=new ln(this.field,u),h=a.length,g=new Int32Array(h);for(let x=0;x<h;x++){let y=this.field.inverse(a[x]),_=this.field.subtract(0,r.evaluateAt(y)),S=this.field.inverse(d.evaluateAt(y));g[x]=this.field.multiply(_,S)}return g}}class os{constructor(r,s,a,c,u){r instanceof os?this.constructor_2(r):this.constructor_1(r,s,a,c,u)}constructor_1(r,s,a,c,u){const d=s==null||a==null,h=c==null||u==null;if(d&&h)throw new H;d?(s=new he(0,c.getY()),a=new he(0,u.getY())):h&&(c=new he(r.getWidth()-1,s.getY()),u=new he(r.getWidth()-1,a.getY())),this.image=r,this.topLeft=s,this.bottomLeft=a,this.topRight=c,this.bottomRight=u,this.minX=Math.trunc(Math.min(s.getX(),a.getX())),this.maxX=Math.trunc(Math.max(c.getX(),u.getX())),this.minY=Math.trunc(Math.min(s.getY(),c.getY())),this.maxY=Math.trunc(Math.max(a.getY(),u.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,s){return r==null?s:s==null?r:new os(r.image,r.topLeft,r.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(r,s,a){let c=this.topLeft,u=this.bottomLeft,d=this.topRight,h=this.bottomRight;if(r>0){let g=a?this.topLeft:this.topRight,x=Math.trunc(g.getY()-r);x<0&&(x=0);let y=new he(g.getX(),x);a?c=y:d=y}if(s>0){let g=a?this.bottomLeft:this.bottomRight,x=Math.trunc(g.getY()+s);x>=this.image.getHeight()&&(x=this.image.getHeight()-1);let y=new he(g.getX(),x);a?u=y:h=y}return new os(this.image,c,u,d,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class FC{constructor(r,s,a,c){this.columnCount=r,this.errorCorrectionLevel=c,this.rowCountUpperPart=s,this.rowCountLowerPart=a,this.rowCount=s+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class oa{constructor(){this.buffer=""}static form(r,s){let a=-1;function c(d,h,g,x,y,_){if(d==="%%")return"%";if(s[++a]===void 0)return;d=x?parseInt(x.substr(1)):void 0;let S=y?parseInt(y.substr(1)):void 0,T;switch(_){case"s":T=s[a];break;case"c":T=s[a][0];break;case"f":T=parseFloat(s[a]).toFixed(d);break;case"p":T=parseFloat(s[a]).toPrecision(d);break;case"e":T=parseFloat(s[a]).toExponential(d);break;case"x":T=parseInt(s[a]).toString(S||16);break;case"d":T=parseFloat(parseInt(s[a],S||10).toPrecision(d)).toFixed(0);break}T=typeof T=="object"?JSON.stringify(T):(+T).toString(S);let D=parseInt(g),P=g&&g[0]+""=="0"?"0":" ";for(;T.length<D;)T=h!==void 0?T+P:P+T;return T}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,c)}format(r,...s){this.buffer+=oa.form(r,s)}toString(){return this.buffer}}class aa{constructor(r){this.boundingBox=new os(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let s=this.getCodeword(r);if(s!=null)return s;for(let a=1;a<aa.MAX_NEARBY_DISTANCE;a++){let c=this.imageRowToCodewordIndex(r)-a;if(c>=0&&(s=this.codewords[c],s!=null)||(c=this.imageRowToCodewordIndex(r)+a,c<this.codewords.length&&(s=this.codewords[c],s!=null)))return s}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,s){this.codewords[this.imageRowToCodewordIndex(r)]=s}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new oa;let s=0;for(const a of this.codewords){if(a==null){r.format("%3d:    |   %n",s++);continue}r.format("%3d: %3d|%3d%n",s++,a.getRowNumber(),a.getValue())}return r.toString()}}aa.MAX_NEARBY_DISTANCE=5;class la{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let s=this.values.get(r);s==null&&(s=0),s++,this.values.set(r,s)}getValue(){let r=-1,s=new Array;for(const[a,c]of this.values.entries()){const u={getKey:()=>a,getValue:()=>c};u.getValue()>r?(r=u.getValue(),s=[],s.push(u.getKey())):u.getValue()===r&&s.push(u.getKey())}return be.toIntArray(s)}getConfidence(r){return this.values.get(r)}}class ng extends aa{constructor(r,s){super(r),this._isLeft=s}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,r);let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),h=this.imageRowToCodewordIndex(Math.trunc(u.getY())),g=-1,x=1,y=0;for(let _=d;_<h;_++){if(s[_]==null)continue;let S=s[_],T=S.getRowNumber()-g;if(T===0)y++;else if(T===1)x=Math.max(x,y),y=1,g=S.getRowNumber();else if(T<0||S.getRowNumber()>=r.getRowCount()||T>_)s[_]=null;else{let D;x>2?D=(x-2)*T:D=T;let P=D>=_;for(let L=1;L<=D&&!P;L++)P=s[_-L]!=null;P?s[_]=null:(g=S.getRowNumber(),y=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let s=new Int32Array(r.getRowCount());for(let a of this.getCodewords())if(a!=null){let c=a.getRowNumber();if(c>=s.length)continue;s[c]++}return s}adjustIncompleteIndicatorColumnRowNumbers(r){let s=this.getBoundingBox(),a=this._isLeft?s.getTopLeft():s.getTopRight(),c=this._isLeft?s.getBottomLeft():s.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),h=this.getCodewords(),g=-1;for(let x=u;x<d;x++){if(h[x]==null)continue;let y=h[x];y.setRowNumberAsRowIndicatorColumn();let _=y.getRowNumber()-g;_===0||(_===1?g=y.getRowNumber():y.getRowNumber()>=r.getRowCount()?h[x]=null:g=y.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),s=new la,a=new la,c=new la,u=new la;for(let h of r){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let g=h.getValue()%30,x=h.getRowNumber();switch(this._isLeft||(x+=2),x%3){case 0:a.setValue(g*3+1);break;case 1:u.setValue(g/3),c.setValue(g%3);break;case 2:s.setValue(g+1);break}}if(s.getValue().length===0||a.getValue().length===0||c.getValue().length===0||u.getValue().length===0||s.getValue()[0]<1||a.getValue()[0]+c.getValue()[0]<be.MIN_ROWS_IN_BARCODE||a.getValue()[0]+c.getValue()[0]>be.MAX_ROWS_IN_BARCODE)return null;let d=new FC(s.getValue()[0],a.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(r,d),d}removeIncorrectCodewords(r,s){for(let a=0;a<r.length;a++){let c=r[a];if(r[a]==null)continue;let u=c.getValue()%30,d=c.getRowNumber();if(d>s.getRowCount()){r[a]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:u*3+1!==s.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(u/3)!==s.getErrorCorrectionLevel()||u%3!==s.getRowCountLowerPart())&&(r[a]=null);break;case 2:u+1!==s.getColumnCount()&&(r[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ca{constructor(r,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=be.MAX_CODEWORDS_IN_BARCODE,s;do s=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let a=this.detectionResultColumns[s].getCodewords();for(let c=0;c<a.length;c++)a[c]!=null&&(a[c].hasValidRowNumber()||this.adjustRowNumbers(s,c,a))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<r.length;a++)if(r[a]!=null&&s[a]!=null&&r[a].getRowNumber()===s[a].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let u=this.detectionResultColumns[c].getCodewords()[a];u!=null&&(u.setRowNumber(r[a].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let c=s[a].getRowNumber(),u=0;for(let d=this.barcodeColumnCount+1;d>0&&u<this.ADJUST_ROW_NUMBER_SKIP;d--){let h=this.detectionResultColumns[d].getCodewords()[a];h!=null&&(u=ca.adjustRowNumberIfValid(c,u,h),h.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,s=this.detectionResultColumns[0].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let c=s[a].getRowNumber(),u=0;for(let d=1;d<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;d++){let h=this.detectionResultColumns[d].getCodewords()[a];h!=null&&(u=ca.adjustRowNumberIfValid(c,u,h),h.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,s,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(r)?(a.setRowNumber(r),s=0):++s),s}adjustRowNumbers(r,s,a){if(!this.detectionResultColumns[r-1])return;let c=a[s],u=this.detectionResultColumns[r-1].getCodewords(),d=u;this.detectionResultColumns[r+1]!=null&&(d=this.detectionResultColumns[r+1].getCodewords());let h=new Array(14);h[2]=u[s],h[3]=d[s],s>0&&(h[0]=a[s-1],h[4]=u[s-1],h[5]=d[s-1]),s>1&&(h[8]=a[s-2],h[10]=u[s-2],h[11]=d[s-2]),s<a.length-1&&(h[1]=a[s+1],h[6]=u[s+1],h[7]=d[s+1]),s<a.length-2&&(h[9]=a[s+2],h[12]=u[s+2],h[13]=d[s+2]);for(let g of h)if(ca.adjustRowNumber(c,g))return}static adjustRowNumber(r,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===r.getBucket()?(r.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,s){this.detectionResultColumns[r]=s}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new oa;for(let a=0;a<r.getCodewords().length;a++){s.format("CW %3d:",a);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){s.format("    |   ");continue}let u=this.detectionResultColumns[c].getCodewords()[a];if(u==null){s.format("    |   ");continue}s.format(" %3d|%3d",u.getRowNumber(),u.getValue())}s.format("%n")}return s.toString()}}class ua{constructor(r,s,a,c){this.rowNumber=ua.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(s),this.bucket=Math.trunc(a),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==ua.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}ua.BARCODE_ROW_UNKNOWN=-1;class Bn{static initialize(){for(let r=0;r<be.SYMBOL_TABLE.length;r++){let s=be.SYMBOL_TABLE[r],a=s&1;for(let c=0;c<be.BARS_IN_MODULE;c++){let u=0;for(;(s&1)===a;)u+=1,s>>=1;a=s&1,Bn.RATIOS_TABLE[r]||(Bn.RATIOS_TABLE[r]=new Array(be.BARS_IN_MODULE)),Bn.RATIOS_TABLE[r][be.BARS_IN_MODULE-c-1]=Math.fround(u/be.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let s=Bn.getDecodedCodewordValue(Bn.sampleBitCounts(r));return s!==-1?s:Bn.getClosestDecodedValue(r)}static sampleBitCounts(r){let s=Ue.sum(r),a=new Int32Array(be.BARS_IN_MODULE),c=0,u=0;for(let d=0;d<be.MODULES_IN_CODEWORD;d++){let h=s/(2*be.MODULES_IN_CODEWORD)+d*s/be.MODULES_IN_CODEWORD;u+r[c]<=h&&(u+=r[c],c++),a[c]++}return a}static getDecodedCodewordValue(r){let s=Bn.getBitValue(r);return be.getCodeword(s)===-1?-1:s}static getBitValue(r){let s=0;for(let a=0;a<r.length;a++)for(let c=0;c<r[a];c++)s=s<<1|(a%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(r){let s=Ue.sum(r),a=new Array(be.BARS_IN_MODULE);if(s>1)for(let d=0;d<a.length;d++)a[d]=Math.fround(r[d]/s);let c=Vs.MAX_VALUE,u=-1;this.bSymbolTableReady||Bn.initialize();for(let d=0;d<Bn.RATIOS_TABLE.length;d++){let h=0,g=Bn.RATIOS_TABLE[d];for(let x=0;x<be.BARS_IN_MODULE;x++){let y=Math.fround(g[x]-a[x]);if(h+=Math.fround(y*y),h>=c)break}h<c&&(c=h,u=be.SYMBOL_TABLE[d])}return u}}Bn.bSymbolTableReady=!1,Bn.RATIOS_TABLE=new Array(be.SYMBOL_TABLE.length).map(C=>new Array(be.BARS_IN_MODULE));class rg{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class ig{static parseLong(r,s=void 0){return parseInt(r,s)}}class sg extends m{}sg.kind="NullPointerException";class jC{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,s,a){if(r==null)throw new sg;if(s<0||s>r.length||a<0||s+a>r.length||s+a<0)throw new K;if(a===0)return;for(let c=0;c<a;c++)this.write(r[s+c])}flush(){}close(){}}class UC extends m{}class zC extends jC{constructor(r=32){if(super(),this.count=0,r<0)throw new v("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let a=this.buf.length<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new UC;a=k.MAX_VALUE}this.buf=N.copyOfUint8Array(this.buf,a)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,s,a){if(s<0||s>r.length||a<0||s+a-r.length>0)throw new K;this.ensureCapacity(this.count+a),B.arraycopy(r,s,this.buf,this.count,a),this.count+=a}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return N.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var at;(function(C){C[C.ALPHA=0]="ALPHA",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.PUNCT=3]="PUNCT",C[C.ALPHA_SHIFT=4]="ALPHA_SHIFT",C[C.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(at||(at={}));function og(){if(typeof window<"u")return window.BigInt||null;if(typeof ha<"u")return ha.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Yl;function _i(C){if(typeof Yl>"u"&&(Yl=og()),Yl===null)throw new Error("BigInt is not supported!");return Yl(C)}function WC(){let C=[];C[0]=_i(1);let r=_i(900);C[1]=r;for(let s=2;s<16;s++)C[s]=C[s-1]*r;return C}class W{static decode(r,s){let a=new Oe(""),c=$.ISO8859_1;a.enableDecoding(c);let u=1,d=r[u++],h=new rg;for(;u<r[0];){switch(d){case W.TEXT_COMPACTION_MODE_LATCH:u=W.textCompaction(r,u,a);break;case W.BYTE_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH_6:u=W.byteCompaction(d,r,c,u,a);break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[u++]);break;case W.NUMERIC_COMPACTION_MODE_LATCH:u=W.numericCompaction(r,u,a);break;case W.ECI_CHARSET:$.getCharacterSetECIByValue(r[u++]);break;case W.ECI_GENERAL_PURPOSE:u+=2;break;case W.ECI_USER_DEFINED:u++;break;case W.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=W.decodeMacroBlock(r,u,h);break;case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case W.MACRO_PDF417_TERMINATOR:throw new z;default:u--,u=W.textCompaction(r,u,a);break}if(u<r.length)d=r[u++];else throw z.getFormatInstance()}if(a.length()===0)throw z.getFormatInstance();let g=new Mr(null,a.toString(),null,s);return g.setOther(h),g}static decodeMacroBlock(r,s,a){if(s+W.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw z.getFormatInstance();let c=new Int32Array(W.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<W.NUMBER_OF_SEQUENCE_CODEWORDS;h++,s++)c[h]=r[s];a.setSegmentIndex(k.parseInt(W.decodeBase900toBase10(c,W.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new Oe;s=W.textCompaction(r,s,u),a.setFileId(u.toString());let d=-1;for(r[s]===W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=s+1);s<r[0];)switch(r[s]){case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,r[s]){case W.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new Oe;s=W.textCompaction(r,s+1,h),a.setFileName(h.toString());break;case W.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let g=new Oe;s=W.textCompaction(r,s+1,g),a.setSender(g.toString());break;case W.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let x=new Oe;s=W.textCompaction(r,s+1,x),a.setAddressee(x.toString());break;case W.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let y=new Oe;s=W.numericCompaction(r,s+1,y),a.setSegmentCount(k.parseInt(y.toString()));break;case W.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let _=new Oe;s=W.numericCompaction(r,s+1,_),a.setTimestamp(ig.parseLong(_.toString()));break;case W.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let S=new Oe;s=W.numericCompaction(r,s+1,S),a.setChecksum(k.parseInt(S.toString()));break;case W.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let T=new Oe;s=W.numericCompaction(r,s+1,T),a.setFileSize(ig.parseLong(T.toString()));break;default:throw z.getFormatInstance()}break;case W.MACRO_PDF417_TERMINATOR:s++,a.setLastSegment(!0);break;default:throw z.getFormatInstance()}if(d!==-1){let h=s-d;a.isLastSegment()&&h--,a.setOptionalData(N.copyOfRange(r,d,d+h))}return s}static textCompaction(r,s,a){let c=new Int32Array((r[0]-s)*2),u=new Int32Array((r[0]-s)*2),d=0,h=!1;for(;s<r[0]&&!h;){let g=r[s++];if(g<W.TEXT_COMPACTION_MODE_LATCH)c[d]=g/30,c[d+1]=g%30,d+=2;else switch(g){case W.TEXT_COMPACTION_MODE_LATCH:c[d++]=W.TEXT_COMPACTION_MODE_LATCH;break;case W.BYTE_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH_6:case W.NUMERIC_COMPACTION_MODE_LATCH:case W.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case W.MACRO_PDF417_TERMINATOR:s--,h=!0;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[d]=W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,g=r[s++],u[d]=g,d++;break}}return W.decodeTextCompaction(c,u,d,a),s}static decodeTextCompaction(r,s,a,c){let u=at.ALPHA,d=at.ALPHA,h=0;for(;h<a;){let g=r[h],x="";switch(u){case at.ALPHA:if(g<26)x=String.fromCharCode(65+g);else switch(g){case 26:x=" ";break;case W.LL:u=at.LOWER;break;case W.ML:u=at.MIXED;break;case W.PS:d=u,u=at.PUNCT_SHIFT;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case W.TEXT_COMPACTION_MODE_LATCH:u=at.ALPHA;break}break;case at.LOWER:if(g<26)x=String.fromCharCode(97+g);else switch(g){case 26:x=" ";break;case W.AS:d=u,u=at.ALPHA_SHIFT;break;case W.ML:u=at.MIXED;break;case W.PS:d=u,u=at.PUNCT_SHIFT;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case W.TEXT_COMPACTION_MODE_LATCH:u=at.ALPHA;break}break;case at.MIXED:if(g<W.PL)x=W.MIXED_CHARS[g];else switch(g){case W.PL:u=at.PUNCT;break;case 26:x=" ";break;case W.LL:u=at.LOWER;break;case W.AL:u=at.ALPHA;break;case W.PS:d=u,u=at.PUNCT_SHIFT;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case W.TEXT_COMPACTION_MODE_LATCH:u=at.ALPHA;break}break;case at.PUNCT:if(g<W.PAL)x=W.PUNCT_CHARS[g];else switch(g){case W.PAL:u=at.ALPHA;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case W.TEXT_COMPACTION_MODE_LATCH:u=at.ALPHA;break}break;case at.ALPHA_SHIFT:if(u=d,g<26)x=String.fromCharCode(65+g);else switch(g){case 26:x=" ";break;case W.TEXT_COMPACTION_MODE_LATCH:u=at.ALPHA;break}break;case at.PUNCT_SHIFT:if(u=d,g<W.PAL)x=W.PUNCT_CHARS[g];else switch(g){case W.PAL:u=at.ALPHA;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case W.TEXT_COMPACTION_MODE_LATCH:u=at.ALPHA;break}break}x!==""&&c.append(x),h++}}static byteCompaction(r,s,a,c,u){let d=new zC,h=0,g=0,x=!1;switch(r){case W.BYTE_COMPACTION_MODE_LATCH:let y=new Int32Array(6),_=s[c++];for(;c<s[0]&&!x;)switch(y[h++]=_,g=900*g+_,_=s[c++],_){case W.TEXT_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH:case W.NUMERIC_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH_6:case W.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case W.MACRO_PDF417_TERMINATOR:c--,x=!0;break;default:if(h%5===0&&h>0){for(let S=0;S<6;++S)d.write(Number(_i(g)>>_i(8*(5-S))));g=0,h=0}break}c===s[0]&&_<W.TEXT_COMPACTION_MODE_LATCH&&(y[h++]=_);for(let S=0;S<h;S++)d.write(y[S]);break;case W.BYTE_COMPACTION_MODE_LATCH_6:for(;c<s[0]&&!x;){let S=s[c++];if(S<W.TEXT_COMPACTION_MODE_LATCH)h++,g=900*g+S;else switch(S){case W.TEXT_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH:case W.NUMERIC_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH_6:case W.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case W.MACRO_PDF417_TERMINATOR:c--,x=!0;break}if(h%5===0&&h>0){for(let T=0;T<6;++T)d.write(Number(_i(g)>>_i(8*(5-T))));g=0,h=0}}break}return u.append(nt.decode(d.toByteArray(),a)),c}static numericCompaction(r,s,a){let c=0,u=!1,d=new Int32Array(W.MAX_NUMERIC_CODEWORDS);for(;s<r[0]&&!u;){let h=r[s++];if(s===r[0]&&(u=!0),h<W.TEXT_COMPACTION_MODE_LATCH)d[c]=h,c++;else switch(h){case W.TEXT_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH_6:case W.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case W.MACRO_PDF417_TERMINATOR:s--,u=!0;break}(c%W.MAX_NUMERIC_CODEWORDS===0||h===W.NUMERIC_COMPACTION_MODE_LATCH||u)&&c>0&&(a.append(W.decodeBase900toBase10(d,c)),c=0)}return s}static decodeBase900toBase10(r,s){let a=_i(0);for(let u=0;u<s;u++)a+=W.EXP900[s-u-1]*_i(r[u]);let c=a.toString();if(c.charAt(0)!=="1")throw new z;return c.substring(1)}}W.TEXT_COMPACTION_MODE_LATCH=900,W.BYTE_COMPACTION_MODE_LATCH=901,W.NUMERIC_COMPACTION_MODE_LATCH=902,W.BYTE_COMPACTION_MODE_LATCH_6=924,W.ECI_USER_DEFINED=925,W.ECI_GENERAL_PURPOSE=926,W.ECI_CHARSET=927,W.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,W.MACRO_PDF417_TERMINATOR=922,W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,W.MAX_NUMERIC_CODEWORDS=15,W.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,W.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,W.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,W.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,W.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,W.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,W.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,W.PL=25,W.LL=27,W.AS=27,W.ML=28,W.AL=28,W.PS=29,W.PAL=29,W.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,W.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",W.EXP900=og()?WC():[],W.NUMBER_OF_SEQUENCE_CODEWORDS=2;class De{constructor(){}static decode(r,s,a,c,u,d,h){let g=new os(r,s,a,c,u),x=null,y=null,_;for(let D=!0;;D=!1){if(s!=null&&(x=De.getRowIndicatorColumn(r,g,s,!0,d,h)),c!=null&&(y=De.getRowIndicatorColumn(r,g,c,!1,d,h)),_=De.merge(x,y),_==null)throw H.getNotFoundInstance();let P=_.getBoundingBox();if(D&&P!=null&&(P.getMinY()<g.getMinY()||P.getMaxY()>g.getMaxY()))g=P;else break}_.setBoundingBox(g);let S=_.getBarcodeColumnCount()+1;_.setDetectionResultColumn(0,x),_.setDetectionResultColumn(S,y);let T=x!=null;for(let D=1;D<=S;D++){let P=T?D:S-D;if(_.getDetectionResultColumn(P)!==void 0)continue;let L;P===0||P===S?L=new ng(g,P===0):L=new aa(g),_.setDetectionResultColumn(P,L);let V=-1,ne=V;for(let ie=g.getMinY();ie<=g.getMaxY();ie++){if(V=De.getStartColumn(_,P,ie,T),V<0||V>g.getMaxX()){if(ne===-1)continue;V=ne}let Q=De.detectCodeword(r,g.getMinX(),g.getMaxX(),T,V,ie,d,h);Q!=null&&(L.setCodeword(ie,Q),ne=V,d=Math.min(d,Q.getWidth()),h=Math.max(h,Q.getWidth()))}}return De.createDecoderResult(_)}static merge(r,s){if(r==null&&s==null)return null;let a=De.getBarcodeMetadata(r,s);if(a==null)return null;let c=os.merge(De.adjustBoundingBox(r),De.adjustBoundingBox(s));return new ca(a,c)}static adjustBoundingBox(r){if(r==null)return null;let s=r.getRowHeights();if(s==null)return null;let a=De.getMax(s),c=0;for(let h of s)if(c+=a-h,h>0)break;let u=r.getCodewords();for(let h=0;c>0&&u[h]==null;h++)c--;let d=0;for(let h=s.length-1;h>=0&&(d+=a-s[h],!(s[h]>0));h--);for(let h=u.length-1;d>0&&u[h]==null;h--)d--;return r.getBoundingBox().addMissingRows(c,d,r.isLeft())}static getMax(r){let s=-1;for(let a of r)s=Math.max(s,a);return s}static getBarcodeMetadata(r,s){let a;if(r==null||(a=r.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let c;return s==null||(c=s.getBarcodeMetadata())==null?a:a.getColumnCount()!==c.getColumnCount()&&a.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&a.getRowCount()!==c.getRowCount()?null:a}static getRowIndicatorColumn(r,s,a,c,u,d){let h=new ng(s,c);for(let g=0;g<2;g++){let x=g===0?1:-1,y=Math.trunc(Math.trunc(a.getX()));for(let _=Math.trunc(Math.trunc(a.getY()));_<=s.getMaxY()&&_>=s.getMinY();_+=x){let S=De.detectCodeword(r,0,r.getWidth(),c,y,_,u,d);S!=null&&(h.setCodeword(_,S),c?y=S.getStartX():y=S.getEndX())}}return h}static adjustCodewordCount(r,s){let a=s[0][1],c=a.getValue(),u=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-De.getNumberOfECCodeWords(r.getBarcodeECLevel());if(c.length===0){if(u<1||u>be.MAX_CODEWORDS_IN_BARCODE)throw H.getNotFoundInstance();a.setValue(u)}else c[0]!==u&&a.setValue(u)}static createDecoderResult(r){let s=De.createBarcodeMatrix(r);De.adjustCodewordCount(r,s);let a=new Array,c=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),u=[],d=new Array;for(let g=0;g<r.getBarcodeRowCount();g++)for(let x=0;x<r.getBarcodeColumnCount();x++){let y=s[g][x+1].getValue(),_=g*r.getBarcodeColumnCount()+x;y.length===0?a.push(_):y.length===1?c[_]=y[0]:(d.push(_),u.push(y))}let h=new Array(u.length);for(let g=0;g<h.length;g++)h[g]=u[g];return De.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),c,be.toIntArray(a),be.toIntArray(d),h)}static createDecoderResultFromAmbiguousValues(r,s,a,c,u){let d=new Int32Array(c.length),h=100;for(;h-- >0;){for(let g=0;g<d.length;g++)s[c[g]]=u[g][d[g]];try{return De.decodeCodewords(s,r,a)}catch(g){if(!(g instanceof R))throw g}if(d.length===0)throw R.getChecksumInstance();for(let g=0;g<d.length;g++)if(d[g]<u[g].length-1){d[g]++;break}else if(d[g]=0,g===d.length-1)throw R.getChecksumInstance()}throw R.getChecksumInstance()}static createBarcodeMatrix(r){let s=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let c=0;c<s.length;c++)for(let u=0;u<s[c].length;u++)s[c][u]=new la;let a=0;for(let c of r.getDetectionResultColumns()){if(c!=null){for(let u of c.getCodewords())if(u!=null){let d=u.getRowNumber();if(d>=0){if(d>=s.length)continue;s[d][a].setValue(u.getValue())}}}a++}return s}static isValidBarcodeColumn(r,s){return s>=0&&s<=r.getBarcodeColumnCount()+1}static getStartColumn(r,s,a,c){let u=c?1:-1,d=null;if(De.isValidBarcodeColumn(r,s-u)&&(d=r.getDetectionResultColumn(s-u).getCodeword(a)),d!=null)return c?d.getEndX():d.getStartX();if(d=r.getDetectionResultColumn(s).getCodewordNearby(a),d!=null)return c?d.getStartX():d.getEndX();if(De.isValidBarcodeColumn(r,s-u)&&(d=r.getDetectionResultColumn(s-u).getCodewordNearby(a)),d!=null)return c?d.getEndX():d.getStartX();let h=0;for(;De.isValidBarcodeColumn(r,s-u);){s-=u;for(let g of r.getDetectionResultColumn(s).getCodewords())if(g!=null)return(c?g.getEndX():g.getStartX())+u*h*(g.getEndX()-g.getStartX());h++}return c?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,s,a,c,u,d,h,g){u=De.adjustCodewordStartColumn(r,s,a,c,u,d);let x=De.getModuleBitCount(r,s,a,c,u,d);if(x==null)return null;let y,_=Ue.sum(x);if(c)y=u+_;else{for(let D=0;D<x.length/2;D++){let P=x[D];x[D]=x[x.length-1-D],x[x.length-1-D]=P}y=u,u=y-_}if(!De.checkCodewordSkew(_,h,g))return null;let S=Bn.getDecodedValue(x),T=be.getCodeword(S);return T===-1?null:new ua(u,y,De.getCodewordBucketNumber(S),T)}static getModuleBitCount(r,s,a,c,u,d){let h=u,g=new Int32Array(8),x=0,y=c?1:-1,_=c;for(;(c?h<a:h>=s)&&x<g.length;)r.get(h,d)===_?(g[x]++,h+=y):(x++,_=!_);return x===g.length||h===(c?a:s)&&x===g.length-1?g:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,s,a,c,u,d){let h=u,g=c?-1:1;for(let x=0;x<2;x++){for(;(c?h>=s:h<a)&&c===r.get(h,d);){if(Math.abs(u-h)>De.CODEWORD_SKEW_SIZE)return u;h+=g}g=-g,c=!c}return h}static checkCodewordSkew(r,s,a){return s-De.CODEWORD_SKEW_SIZE<=r&&r<=a+De.CODEWORD_SKEW_SIZE}static decodeCodewords(r,s,a){if(r.length===0)throw z.getFormatInstance();let c=1<<s+1,u=De.correctErrors(r,a,c);De.verifyCodewordCount(r,c);let d=W.decode(r,""+s);return d.setErrorsCorrected(u),d.setErasures(a.length),d}static correctErrors(r,s,a){if(s!=null&&s.length>a/2+De.MAX_ERRORS||a<0||a>De.MAX_EC_CODEWORDS)throw R.getChecksumInstance();return De.errorCorrection.decode(r,a,s)}static verifyCodewordCount(r,s){if(r.length<4)throw z.getFormatInstance();let a=r[0];if(a>r.length)throw z.getFormatInstance();if(a===0)if(s<r.length)r[0]=r.length-s;else throw z.getFormatInstance()}static getBitCountForCodeword(r){let s=new Int32Array(8),a=0,c=s.length-1;for(;!((r&1)!==a&&(a=r&1,c--,c<0));)s[c]++,r>>=1;return s}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return De.getCodewordBucketNumber(De.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let s=new oa;for(let a=0;a<r.length;a++){s.format("Row %2d: ",a);for(let c=0;c<r[a].length;c++){let u=r[a][c];u.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}s.format("%n")}return s.toString()}}De.CODEWORD_SKEW_SIZE=2,De.MAX_ERRORS=3,De.MAX_EC_CODEWORDS=512,De.errorCorrection=new tg;class cn{decode(r,s=null){let a=cn.decode(r,s,!1);if(a==null||a.length===0||a[0]==null)throw H.getNotFoundInstance();return a[0]}decodeMultiple(r,s=null){try{return cn.decode(r,s,!0)}catch(a){throw a instanceof z||a instanceof R?H.getNotFoundInstance():a}}static decode(r,s,a){const c=new Array,u=Re.detectMultiple(r,s,a);for(const d of u.getPoints()){const h=De.decode(u.getBits(),d[4],d[5],d[6],d[7],cn.getMinCodewordWidth(d),cn.getMaxCodewordWidth(d)),g=new ue(h.getText(),h.getRawBytes(),void 0,d,ce.PDF_417);g.putMetadata(Pe.ERROR_CORRECTION_LEVEL,h.getECLevel());const x=h.getOther();x!=null&&g.putMetadata(Pe.PDF417_EXTRA_METADATA,x),c.push(g)}return c.map(d=>d)}static getMaxWidth(r,s){return r==null||s==null?0:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMinWidth(r,s){return r==null||s==null?k.MAX_VALUE:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(cn.getMaxWidth(r[0],r[4]),cn.getMaxWidth(r[6],r[2])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN),Math.max(cn.getMaxWidth(r[1],r[5]),cn.getMaxWidth(r[7],r[3])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(cn.getMinWidth(r[0],r[4]),cn.getMinWidth(r[6],r[2])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN),Math.min(cn.getMinWidth(r[1],r[5]),cn.getMinWidth(r[7],r[3])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN)))}reset(){}}class $l extends m{}$l.kind="ReaderException";class ag{constructor(r,s){this.verbose=r===!0,s&&this.setHints(s)}decode(r,s){return s&&this.setHints(s),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const s=!i(r)&&r.get(Z.TRY_HARDER)===!0,a=i(r)?null:r.get(Z.POSSIBLE_FORMATS),c=new Array;if(!i(a)){const u=a.some(d=>d===ce.UPC_A||d===ce.UPC_E||d===ce.EAN_13||d===ce.EAN_8||d===ce.CODABAR||d===ce.CODE_39||d===ce.CODE_93||d===ce.CODE_128||d===ce.ITF||d===ce.RSS_14||d===ce.RSS_EXPANDED);u&&!s&&c.push(new Ks(r,this.verbose)),a.includes(ce.QR_CODE)&&c.push(new Ci),a.includes(ce.DATA_MATRIX)&&c.push(new vi),a.includes(ce.AZTEC)&&c.push(new Xe),a.includes(ce.PDF_417)&&c.push(new cn),u&&s&&c.push(new Ks(r,this.verbose))}c.length===0&&(s||c.push(new Ks(r,this.verbose)),c.push(new Ci),c.push(new vi),c.push(new Xe),c.push(new cn),s&&c.push(new Ks(r,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new $l("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(r,this.hints)}catch(a){if(a instanceof $l)continue}throw new H("No MultiFormat Readers were able to detect the code.")}}class VC extends Ge{constructor(r=null,s=500){const a=new ag;a.setHints(r),super(a,s)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class HC extends Ge{constructor(r=500){super(new cn,r)}}class GC extends Ge{constructor(r=500){super(new Ci,r)}}var Id;(function(C){C[C.ERROR_CORRECTION=0]="ERROR_CORRECTION",C[C.CHARACTER_SET=1]="CHARACTER_SET",C[C.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",C[C.MIN_SIZE=3]="MIN_SIZE",C[C.MAX_SIZE=4]="MAX_SIZE",C[C.MARGIN=5]="MARGIN",C[C.PDF417_COMPACT=6]="PDF417_COMPACT",C[C.PDF417_COMPACTION=7]="PDF417_COMPACTION",C[C.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",C[C.AZTEC_LAYERS=9]="AZTEC_LAYERS",C[C.QR_VERSION=10]="QR_VERSION"})(Id||(Id={}));var Yt=Id;class Td{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new Lt(r,Int32Array.from([1])))}buildGenerator(r){const s=this.cachedGenerators;if(r>=s.length){let a=s[s.length-1];const c=this.field;for(let u=s.length;u<=r;u++){const d=a.multiply(new Lt(c,Int32Array.from([1,c.exp(u-1+c.getGeneratorBase())])));s.push(d),a=d}}return s[r]}encode(r,s){if(s===0)throw new v("No error correction bytes");const a=r.length-s;if(a<=0)throw new v("No data bytes provided");const c=this.buildGenerator(s),u=new Int32Array(a);B.arraycopy(r,0,u,0,a);let d=new Lt(this.field,u);d=d.multiplyByMonomial(s,1);const g=d.divide(c)[1].getCoefficients(),x=s-g.length;for(let y=0;y<x;y++)r[a+y]=0;B.arraycopy(g,0,r,a+x,g.length)}}class Ot{constructor(){}static applyMaskPenaltyRule1(r){return Ot.applyMaskPenaltyRule1Internal(r,!0)+Ot.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let s=0;const a=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let d=0;d<u-1;d++){const h=a[d];for(let g=0;g<c-1;g++){const x=h[g];x===h[g+1]&&x===a[d+1][g]&&x===a[d+1][g+1]&&s++}}return Ot.N2*s}static applyMaskPenaltyRule3(r){let s=0;const a=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let d=0;d<u;d++)for(let h=0;h<c;h++){const g=a[d];h+6<c&&g[h]===1&&g[h+1]===0&&g[h+2]===1&&g[h+3]===1&&g[h+4]===1&&g[h+5]===0&&g[h+6]===1&&(Ot.isWhiteHorizontal(g,h-4,h)||Ot.isWhiteHorizontal(g,h+7,h+11))&&s++,d+6<u&&a[d][h]===1&&a[d+1][h]===0&&a[d+2][h]===1&&a[d+3][h]===1&&a[d+4][h]===1&&a[d+5][h]===0&&a[d+6][h]===1&&(Ot.isWhiteVertical(a,h,d-4,d)||Ot.isWhiteVertical(a,h,d+7,d+11))&&s++}return s*Ot.N3}static isWhiteHorizontal(r,s,a){s=Math.max(s,0),a=Math.min(a,r.length);for(let c=s;c<a;c++)if(r[c]===1)return!1;return!0}static isWhiteVertical(r,s,a,c){a=Math.max(a,0),c=Math.min(c,r.length);for(let u=a;u<c;u++)if(r[u][s]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let s=0;const a=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let g=0;g<u;g++){const x=a[g];for(let y=0;y<c;y++)x[y]===1&&s++}const d=r.getHeight()*r.getWidth();return Math.floor(Math.abs(s*2-d)*10/d)*Ot.N4}static getDataMaskBit(r,s,a){let c,u;switch(r){case 0:c=a+s&1;break;case 1:c=a&1;break;case 2:c=s%3;break;case 3:c=(a+s)%3;break;case 4:c=Math.floor(a/2)+Math.floor(s/3)&1;break;case 5:u=a*s,c=(u&1)+u%3;break;case 6:u=a*s,c=(u&1)+u%3&1;break;case 7:u=a*s,c=u%3+(a+s&1)&1;break;default:throw new v("Invalid mask pattern: "+r)}return c===0}static applyMaskPenaltyRule1Internal(r,s){let a=0;const c=s?r.getHeight():r.getWidth(),u=s?r.getWidth():r.getHeight(),d=r.getArray();for(let h=0;h<c;h++){let g=0,x=-1;for(let y=0;y<u;y++){const _=s?d[h][y]:d[y][h];_===x?g++:(g>=5&&(a+=Ot.N1+(g-5)),g=1,x=_)}g>=5&&(a+=Ot.N1+(g-5))}return a}}Ot.N1=3,Ot.N2=3,Ot.N3=40,Ot.N4=10;class Kl{constructor(r,s){this.width=r,this.height=s;const a=new Array(s);for(let c=0;c!==s;c++)a[c]=new Uint8Array(r);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(r,s){return this.bytes[s][r]}getArray(){return this.bytes}setNumber(r,s,a){this.bytes[s][r]=a}setBoolean(r,s,a){this.bytes[s][r]=a?1:0}clear(r){for(const s of this.bytes)N.fill(s,r)}equals(r){if(!(r instanceof Kl))return!1;const s=r;if(this.width!==s.width||this.height!==s.height)return!1;for(let a=0,c=this.height;a<c;++a){const u=this.bytes[a],d=s.bytes[a];for(let h=0,g=this.width;h<g;++h)if(u[h]!==d[h])return!1}return!0}toString(){const r=new Oe;for(let s=0,a=this.height;s<a;++s){const c=this.bytes[s];for(let u=0,d=this.width;u<d;++u)switch(c[u]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class as{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new Oe;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<as.NUM_MASK_PATTERNS}}as.NUM_MASK_PATTERNS=8;class ut extends m{}ut.kind="WriterException";class _e{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,s,a,c,u){_e.clearMatrix(u),_e.embedBasicPatterns(a,u),_e.embedTypeInfo(s,c,u),_e.maybeEmbedVersionInfo(a,u),_e.embedDataBits(r,c,u)}static embedBasicPatterns(r,s){_e.embedPositionDetectionPatternsAndSeparators(s),_e.embedDarkDotAtLeftBottomCorner(s),_e.maybeEmbedPositionAdjustmentPatterns(r,s),_e.embedTimingPatterns(s)}static embedTypeInfo(r,s,a){const c=new U;_e.makeTypeInfoBits(r,s,c);for(let u=0,d=c.getSize();u<d;++u){const h=c.get(c.getSize()-1-u),g=_e.TYPE_INFO_COORDINATES[u],x=g[0],y=g[1];if(a.setBoolean(x,y,h),u<8){const _=a.getWidth()-u-1;a.setBoolean(_,8,h)}else{const S=a.getHeight()-7+(u-8);a.setBoolean(8,S,h)}}}static maybeEmbedVersionInfo(r,s){if(r.getVersionNumber()<7)return;const a=new U;_e.makeVersionInfoBits(r,a);let c=6*3-1;for(let u=0;u<6;++u)for(let d=0;d<3;++d){const h=a.get(c);c--,s.setBoolean(u,s.getHeight()-11+d,h),s.setBoolean(s.getHeight()-11+d,u,h)}}static embedDataBits(r,s,a){let c=0,u=-1,d=a.getWidth()-1,h=a.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);h>=0&&h<a.getHeight();){for(let g=0;g<2;++g){const x=d-g;if(!_e.isEmpty(a.get(x,h)))continue;let y;c<r.getSize()?(y=r.get(c),++c):y=!1,s!==255&&Ot.getDataMaskBit(s,x,h)&&(y=!y),a.setBoolean(x,h,y)}h+=u}u=-u,h+=u,d-=2}if(c!==r.getSize())throw new ut("Not all bits consumed: "+c+"/"+r.getSize())}static findMSBSet(r){return 32-k.numberOfLeadingZeros(r)}static calculateBCHCode(r,s){if(s===0)throw new v("0 polynomial");const a=_e.findMSBSet(s);for(r<<=a-1;_e.findMSBSet(r)>=a;)r^=s<<_e.findMSBSet(r)-a;return r}static makeTypeInfoBits(r,s,a){if(!as.isValidMaskPattern(s))throw new ut("Invalid mask pattern");const c=r.getBits()<<3|s;a.appendBits(c,5);const u=_e.calculateBCHCode(c,_e.TYPE_INFO_POLY);a.appendBits(u,10);const d=new U;if(d.appendBits(_e.TYPE_INFO_MASK_PATTERN,15),a.xor(d),a.getSize()!==15)throw new ut("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(r,s){s.appendBits(r.getVersionNumber(),6);const a=_e.calculateBCHCode(r.getVersionNumber(),_e.VERSION_INFO_POLY);if(s.appendBits(a,12),s.getSize()!==18)throw new ut("should not happen but we got: "+s.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let s=8;s<r.getWidth()-8;++s){const a=(s+1)%2;_e.isEmpty(r.get(s,6))&&r.setNumber(s,6,a),_e.isEmpty(r.get(6,s))&&r.setNumber(6,s,a)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new ut;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,s,a){for(let c=0;c<8;++c){if(!_e.isEmpty(a.get(r+c,s)))throw new ut;a.setNumber(r+c,s,0)}}static embedVerticalSeparationPattern(r,s,a){for(let c=0;c<7;++c){if(!_e.isEmpty(a.get(r,s+c)))throw new ut;a.setNumber(r,s+c,0)}}static embedPositionAdjustmentPattern(r,s,a){for(let c=0;c<5;++c){const u=_e.POSITION_ADJUSTMENT_PATTERN[c];for(let d=0;d<5;++d)a.setNumber(r+d,s+c,u[d])}}static embedPositionDetectionPattern(r,s,a){for(let c=0;c<7;++c){const u=_e.POSITION_DETECTION_PATTERN[c];for(let d=0;d<7;++d)a.setNumber(r+d,s+c,u[d])}}static embedPositionDetectionPatternsAndSeparators(r){const s=_e.POSITION_DETECTION_PATTERN[0].length;_e.embedPositionDetectionPattern(0,0,r),_e.embedPositionDetectionPattern(r.getWidth()-s,0,r),_e.embedPositionDetectionPattern(0,r.getWidth()-s,r);const a=8;_e.embedHorizontalSeparationPattern(0,a-1,r),_e.embedHorizontalSeparationPattern(r.getWidth()-a,a-1,r),_e.embedHorizontalSeparationPattern(0,r.getWidth()-a,r);const c=7;_e.embedVerticalSeparationPattern(c,0,r),_e.embedVerticalSeparationPattern(r.getHeight()-c-1,0,r),_e.embedVerticalSeparationPattern(c,r.getHeight()-c,r)}static maybeEmbedPositionAdjustmentPatterns(r,s){if(r.getVersionNumber()<2)return;const a=r.getVersionNumber()-1,c=_e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let u=0,d=c.length;u!==d;u++){const h=c[u];if(h>=0)for(let g=0;g!==d;g++){const x=c[g];x>=0&&_e.isEmpty(s.get(x,h))&&_e.embedPositionAdjustmentPattern(x-2,h-2,s)}}}}_e.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),_e.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),_e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),_e.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),_e.VERSION_INFO_POLY=7973,_e.TYPE_INFO_POLY=1335,_e.TYPE_INFO_MASK_PATTERN=21522;class XC{constructor(r,s){this.dataBytes=r,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class xt{constructor(){}static calculateMaskPenalty(r){return Ot.applyMaskPenaltyRule1(r)+Ot.applyMaskPenaltyRule2(r)+Ot.applyMaskPenaltyRule3(r)+Ot.applyMaskPenaltyRule4(r)}static encode(r,s,a=null){let c=xt.DEFAULT_BYTE_MODE_ENCODING;const u=a!==null&&a.get(Yt.CHARACTER_SET)!==void 0;u&&(c=a.get(Yt.CHARACTER_SET).toString());const d=this.chooseMode(r,c),h=new U;if(d===ye.BYTE&&(u||xt.DEFAULT_BYTE_MODE_ENCODING!==c)){const ie=$.getCharacterSetECIByName(c);ie!==void 0&&this.appendECI(ie,h)}this.appendModeInfo(d,h);const g=new U;this.appendBytes(r,d,g,c);let x;if(a!==null&&a.get(Yt.QR_VERSION)!==void 0){const ie=Number.parseInt(a.get(Yt.QR_VERSION).toString(),10);x=me.getVersionForNumber(ie);const Q=this.calculateBitsNeeded(d,h,g,x);if(!this.willFit(Q,x,s))throw new ut("Data too big for requested version")}else x=this.recommendVersion(s,d,h,g);const y=new U;y.appendBitArray(h);const _=d===ye.BYTE?g.getSizeInBytes():r.length;this.appendLengthInfo(_,x,d,y),y.appendBitArray(g);const S=x.getECBlocksForLevel(s),T=x.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(T,y);const D=this.interleaveWithECBytes(y,x.getTotalCodewords(),T,S.getNumBlocks()),P=new as;P.setECLevel(s),P.setMode(d),P.setVersion(x);const L=x.getDimensionForVersion(),V=new Kl(L,L),ne=this.chooseMaskPattern(D,s,x,V);return P.setMaskPattern(ne),_e.buildMatrix(D,s,x,ne,V),P.setMatrix(V),P}static recommendVersion(r,s,a,c){const u=this.calculateBitsNeeded(s,a,c,me.getVersionForNumber(1)),d=this.chooseVersion(u,r),h=this.calculateBitsNeeded(s,a,c,d);return this.chooseVersion(h,r)}static calculateBitsNeeded(r,s,a,c){return s.getSize()+r.getCharacterCountBits(c)+a.getSize()}static getAlphanumericCode(r){return r<xt.ALPHANUMERIC_TABLE.length?xt.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,s=null){if($.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(r))return ye.KANJI;let a=!1,c=!1;for(let u=0,d=r.length;u<d;++u){const h=r.charAt(u);if(xt.isDigit(h))a=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)c=!0;else return ye.BYTE}return c?ye.ALPHANUMERIC:a?ye.NUMERIC:ye.BYTE}static isOnlyDoubleByteKanji(r){let s;try{s=nt.encode(r,$.SJIS)}catch{return!1}const a=s.length;if(a%2!==0)return!1;for(let c=0;c<a;c+=2){const u=s[c]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(r,s,a,c){let u=Number.MAX_SAFE_INTEGER,d=-1;for(let h=0;h<as.NUM_MASK_PATTERNS;h++){_e.buildMatrix(r,s,a,h,c);let g=this.calculateMaskPenalty(c);g<u&&(u=g,d=h)}return d}static chooseVersion(r,s){for(let a=1;a<=40;a++){const c=me.getVersionForNumber(a);if(xt.willFit(r,c,s))return c}throw new ut("Data too big")}static willFit(r,s,a){const c=s.getTotalCodewords(),d=s.getECBlocksForLevel(a).getTotalECCodewords(),h=c-d,g=(r+7)/8;return h>=g}static terminateBits(r,s){const a=r*8;if(s.getSize()>a)throw new ut("data bits cannot fit in the QR Code"+s.getSize()+" > "+a);for(let d=0;d<4&&s.getSize()<a;++d)s.appendBit(!1);const c=s.getSize()&7;if(c>0)for(let d=c;d<8;d++)s.appendBit(!1);const u=r-s.getSizeInBytes();for(let d=0;d<u;++d)s.appendBits(d&1?17:236,8);if(s.getSize()!==a)throw new ut("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,s,a,c,u,d){if(c>=a)throw new ut("Block ID too large");const h=r%a,g=a-h,x=Math.floor(r/a),y=x+1,_=Math.floor(s/a),S=_+1,T=x-_,D=y-S;if(T!==D)throw new ut("EC bytes mismatch");if(a!==g+h)throw new ut("RS blocks mismatch");if(r!==(_+T)*g+(S+D)*h)throw new ut("Total bytes mismatch");c<g?(u[0]=_,d[0]=T):(u[0]=S,d[0]=D)}static interleaveWithECBytes(r,s,a,c){if(r.getSizeInBytes()!==a)throw new ut("Number of bits and data bytes does not match");let u=0,d=0,h=0;const g=new Array;for(let y=0;y<c;++y){const _=new Int32Array(1),S=new Int32Array(1);xt.getNumDataBytesAndNumECBytesForBlockID(s,a,c,y,_,S);const T=_[0],D=new Uint8Array(T);r.toBytes(8*u,D,0,T);const P=xt.generateECBytes(D,S[0]);g.push(new XC(D,P)),d=Math.max(d,T),h=Math.max(h,P.length),u+=_[0]}if(a!==u)throw new ut("Data bytes does not match offset");const x=new U;for(let y=0;y<d;++y)for(const _ of g){const S=_.getDataBytes();y<S.length&&x.appendBits(S[y],8)}for(let y=0;y<h;++y)for(const _ of g){const S=_.getErrorCorrectionBytes();y<S.length&&x.appendBits(S[y],8)}if(s!==x.getSizeInBytes())throw new ut("Interleaving error: "+s+" and "+x.getSizeInBytes()+" differ.");return x}static generateECBytes(r,s){const a=r.length,c=new Int32Array(a+s);for(let d=0;d<a;d++)c[d]=r[d]&255;new Td(We.QR_CODE_FIELD_256).encode(c,s);const u=new Uint8Array(s);for(let d=0;d<s;d++)u[d]=c[a+d];return u}static appendModeInfo(r,s){s.appendBits(r.getBits(),4)}static appendLengthInfo(r,s,a,c){const u=a.getCharacterCountBits(s);if(r>=1<<u)throw new ut(r+" is bigger than "+((1<<u)-1));c.appendBits(r,u)}static appendBytes(r,s,a,c){switch(s){case ye.NUMERIC:xt.appendNumericBytes(r,a);break;case ye.ALPHANUMERIC:xt.appendAlphanumericBytes(r,a);break;case ye.BYTE:xt.append8BitBytes(r,a,c);break;case ye.KANJI:xt.appendKanjiBytes(r,a);break;default:throw new ut("Invalid mode: "+s)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const s=xt.getDigit(r);return s>=0&&s<=9}static appendNumericBytes(r,s){const a=r.length;let c=0;for(;c<a;){const u=xt.getDigit(r.charAt(c));if(c+2<a){const d=xt.getDigit(r.charAt(c+1)),h=xt.getDigit(r.charAt(c+2));s.appendBits(u*100+d*10+h,10),c+=3}else if(c+1<a){const d=xt.getDigit(r.charAt(c+1));s.appendBits(u*10+d,7),c+=2}else s.appendBits(u,4),c++}}static appendAlphanumericBytes(r,s){const a=r.length;let c=0;for(;c<a;){const u=xt.getAlphanumericCode(r.charCodeAt(c));if(u===-1)throw new ut;if(c+1<a){const d=xt.getAlphanumericCode(r.charCodeAt(c+1));if(d===-1)throw new ut;s.appendBits(u*45+d,11),c+=2}else s.appendBits(u,6),c++}}static append8BitBytes(r,s,a){let c;try{c=nt.encode(r,a)}catch(u){throw new ut(u)}for(let u=0,d=c.length;u!==d;u++){const h=c[u];s.appendBits(h,8)}}static appendKanjiBytes(r,s){let a;try{a=nt.encode(r,$.SJIS)}catch(u){throw new ut(u)}const c=a.length;for(let u=0;u<c;u+=2){const d=a[u]&255,h=a[u+1]&255,g=d<<8&4294967295|h;let x=-1;if(g>=33088&&g<=40956?x=g-33088:g>=57408&&g<=60351&&(x=g-49472),x===-1)throw new ut("Invalid byte sequence");const y=(x>>8)*192+(x&255);s.appendBits(y,13)}}static appendECI(r,s){s.appendBits(ye.ECI.getBits(),4),s.appendBits(r.getValue(),8)}}xt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),xt.DEFAULT_BYTE_MODE_ENCODING=$.UTF8.getName();class ls{write(r,s,a,c=null){if(r.length===0)throw new v("Found empty contents");if(s<0||a<0)throw new v("Requested dimensions are too small: "+s+"x"+a);let u=ft.L,d=ls.QUIET_ZONE_SIZE;c!==null&&(c.get(Yt.ERROR_CORRECTION)!==void 0&&(u=ft.fromString(c.get(Yt.ERROR_CORRECTION).toString())),c.get(Yt.MARGIN)!==void 0&&(d=Number.parseInt(c.get(Yt.MARGIN).toString(),10)));const h=xt.encode(r,u,c);return this.renderResult(h,s,a,d)}writeToDom(r,s,a,c,u=null){typeof r=="string"&&(r=document.querySelector(r));const d=this.write(s,a,c,u);r&&r.appendChild(d)}renderResult(r,s,a,c){const u=r.getMatrix();if(u===null)throw new ar;const d=u.getWidth(),h=u.getHeight(),g=d+c*2,x=h+c*2,y=Math.max(s,g),_=Math.max(a,x),S=Math.min(Math.floor(y/g),Math.floor(_/x)),T=Math.floor((y-d*S)/2),D=Math.floor((_-h*S)/2),P=this.createSVGElement(y,_);for(let L=0,V=D;L<h;L++,V+=S)for(let ne=0,ie=T;ne<d;ne++,ie+=S)if(u.get(ne,L)===1){const Q=this.createSvgRectElement(ie,V,S,S);P.appendChild(Q)}return P}createSVGElement(r,s){const a=document.createElementNS(ls.SVG_NS,"svg");return a.setAttributeNS(null,"height",r.toString()),a.setAttributeNS(null,"width",s.toString()),a}createSvgRectElement(r,s,a,c){const u=document.createElementNS(ls.SVG_NS,"rect");return u.setAttributeNS(null,"x",r.toString()),u.setAttributeNS(null,"y",s.toString()),u.setAttributeNS(null,"height",a.toString()),u.setAttributeNS(null,"width",c.toString()),u.setAttributeNS(null,"fill","#000000"),u}}ls.QUIET_ZONE_SIZE=4,ls.SVG_NS="http://www.w3.org/2000/svg";class Zs{encode(r,s,a,c,u){if(r.length===0)throw new v("Found empty contents");if(s!==ce.QR_CODE)throw new v("Can only encode QR_CODE, but got "+s);if(a<0||c<0)throw new v(`Requested dimensions are too small: ${a}x${c}`);let d=ft.L,h=Zs.QUIET_ZONE_SIZE;u!==null&&(u.get(Yt.ERROR_CORRECTION)!==void 0&&(d=ft.fromString(u.get(Yt.ERROR_CORRECTION).toString())),u.get(Yt.MARGIN)!==void 0&&(h=Number.parseInt(u.get(Yt.MARGIN).toString(),10)));const g=xt.encode(r,d,u);return Zs.renderResult(g,a,c,h)}static renderResult(r,s,a,c){const u=r.getMatrix();if(u===null)throw new ar;const d=u.getWidth(),h=u.getHeight(),g=d+c*2,x=h+c*2,y=Math.max(s,g),_=Math.max(a,x),S=Math.min(Math.floor(y/g),Math.floor(_/x)),T=Math.floor((y-d*S)/2),D=Math.floor((_-h*S)/2),P=new Te(y,_);for(let L=0,V=D;L<h;L++,V+=S)for(let ne=0,ie=T;ne<d;ne++,ie+=S)u.get(ne,L)===1&&P.setRegion(ie,V,S,S);return P}}Zs.QUIET_ZONE_SIZE=4;class YC{encode(r,s,a,c,u){let d;switch(s){case ce.QR_CODE:d=new Zs;break;default:throw new v("No encoder available for format "+s)}return d.encode(r,s,a,c,u)}}class jr extends ae{constructor(r,s,a,c,u,d,h,g){if(super(d,h),this.yuvData=r,this.dataWidth=s,this.dataHeight=a,this.left=c,this.top=u,c+d>s||u+h>a)throw new v("Crop rectangle does not fit within image data.");g&&this.reverseHorizontal(d,h)}getRow(r,s){if(r<0||r>=this.getHeight())throw new v("Requested row is outside the image: "+r);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const c=(r+this.top)*this.dataWidth+this.left;return B.arraycopy(this.yuvData,c,s,0,a),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.yuvData;const a=r*s,c=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return B.arraycopy(this.yuvData,u,c,0,a),c;for(let d=0;d<s;d++){const h=d*r;B.arraycopy(this.yuvData,u,c,h,r),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,s,a,c){return new jr(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+s,a,c,!1)}renderThumbnail(){const r=this.getWidth()/jr.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/jr.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*s),c=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let d=0;d<s;d++){const h=d*r;for(let g=0;g<r;g++){const x=c[u+g*jr.THUMBNAIL_SCALE_FACTOR]&255;a[h+g]=4278190080|x*65793}u+=this.dataWidth*jr.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/jr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/jr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,s){const a=this.yuvData;for(let c=0,u=this.top*this.dataWidth+this.left;c<s;c++,u+=this.dataWidth){const d=u+r/2;for(let h=u,g=u+r-1;h<d;h++,g--){const x=a[h];a[h]=a[g],a[g]=x}}}invert(){return new we(this)}}jr.THUMBNAIL_SCALE_FACTOR=2;class kd extends ae{constructor(r,s,a,c,u,d,h){if(super(s,a),this.dataWidth=c,this.dataHeight=u,this.left=d,this.top=h,r.BYTES_PER_ELEMENT===4){const g=s*a,x=new Uint8ClampedArray(g);for(let y=0;y<g;y++){const _=r[y],S=_>>16&255,T=_>>7&510,D=_&255;x[y]=(S+T+D)/4&255}this.luminances=x}else this.luminances=r;if(c===void 0&&(this.dataWidth=s),u===void 0&&(this.dataHeight=a),d===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+a>this.dataHeight)throw new v("Crop rectangle does not fit within image data.")}getRow(r,s){if(r<0||r>=this.getHeight())throw new v("Requested row is outside the image: "+r);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const c=(r+this.top)*this.dataWidth+this.left;return B.arraycopy(this.luminances,c,s,0,a),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.luminances;const a=r*s,c=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return B.arraycopy(this.luminances,u,c,0,a),c;for(let d=0;d<s;d++){const h=d*r;B.arraycopy(this.luminances,u,c,h,r),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,s,a,c){return new kd(this.luminances,a,c,this.dataWidth,this.dataHeight,this.left+r,this.top+s)}invert(){return new we(this)}}class lg extends ${static forName(r){return this.getCharacterSetECIByName(r)}}class Nd{}Nd.ISO_8859_1=$.ISO8859_1;class cg{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class ug{static singletonList(r){return[r]}static min(r,s){return r.sort(s)[0]}}class $C{constructor(r){this.previous=r}getPrevious(){return this.previous}}class Qs extends $C{constructor(r,s,a){super(r),this.value=s,this.bitCount=a}appendTo(r,s){r.appendBits(this.value,this.bitCount)}add(r,s){return new Qs(this,r,s)}addBinaryShift(r,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Qs(this,r,s)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+k.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class Rd extends Qs{constructor(r,s,a){super(r,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=a}appendTo(r,s){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(s[this.binaryShiftStart+a],8)}addBinaryShift(r,s){return new Rd(this,r,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function KC(C,r,s){return new Rd(C,r,s)}function da(C,r,s){return new Qs(C,r,s)}const qC=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ei=0,ql=1,dr=2,dg=3,Ur=4,ZC=new Qs(null,0,0),Od=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function QC(C){for(let r of C)N.fill(r,-1);return C[Ei][Ur]=0,C[ql][Ur]=0,C[ql][Ei]=28,C[dg][Ur]=0,C[dr][Ur]=0,C[dr][Ei]=15,C}const fg=QC(N.createInt32Array(6,6));class zr{constructor(r,s,a,c){this.token=r,this.mode=s,this.binaryShiftByteCount=a,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,s){let a=this.bitCount,c=this.token;if(r!==this.mode){let d=Od[this.mode][r];c=da(c,d&65535,d>>16),a+=d>>16}let u=r===dr?4:5;return c=da(c,s,u),new zr(c,r,0,a+u)}shiftAndAppend(r,s){let a=this.token,c=this.mode===dr?4:5;return a=da(a,fg[this.mode][r],c),a=da(a,s,5),new zr(a,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(r){let s=this.token,a=this.mode,c=this.bitCount;if(this.mode===Ur||this.mode===dr){let h=Od[a][Ei];s=da(s,h&65535,h>>16),c+=h>>16,a=Ei}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new zr(s,a,this.binaryShiftByteCount+1,c+u);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(r+1)),d}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=KC(s,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new zr(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let s=this.bitCount+(Od[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?s+=zr.calculateBinaryShiftCost(r)-zr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(s+=10),s<=r.bitCount}toBitArray(r){let s=[];for(let c=this.endBinaryShift(r.length).token;c!==null;c=c.getPrevious())s.unshift(c);let a=new U;for(const c of s)c.appendTo(a,r);return a}toString(){return pe.format("%s bits=%d bytes=%d",qC[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}zr.INITIAL_STATE=new zr(ZC,Ei,0,0);function JC(C){const r=pe.getCharCode(" "),s=pe.getCharCode("."),a=pe.getCharCode(",");C[Ei][r]=1;const c=pe.getCharCode("Z"),u=pe.getCharCode("A");for(let S=u;S<=c;S++)C[Ei][S]=S-u+2;C[ql][r]=1;const d=pe.getCharCode("z"),h=pe.getCharCode("a");for(let S=h;S<=d;S++)C[ql][S]=S-h+2;C[dr][r]=1;const g=pe.getCharCode("9"),x=pe.getCharCode("0");for(let S=x;S<=g;S++)C[dr][S]=S-x+2;C[dr][a]=12,C[dr][s]=13;const y=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let S=0;S<y.length;S++)C[dg][pe.getCharCode(y[S])]=S;const _=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let S=0;S<_.length;S++)pe.getCharCode(_[S])>0&&(C[Ur][pe.getCharCode(_[S])]=S);return C}const Dd=JC(N.createInt32Array(5,256));class fa{constructor(r){this.text=r}encode(){const r=pe.getCharCode(" "),s=pe.getCharCode(`
`);let a=ug.singletonList(zr.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let d,h=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case pe.getCharCode("\r"):d=h===s?2:0;break;case pe.getCharCode("."):d=h===r?3:0;break;case pe.getCharCode(","):d=h===r?4:0;break;case pe.getCharCode(":"):d=h===r?5:0;break;default:d=0}d>0?(a=fa.updateStateListForPair(a,u,d),u++):a=this.updateStateListForChar(a,u)}return ug.min(a,(u,d)=>u.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,s){const a=[];for(let c of r)this.updateStateForChar(c,s,a);return fa.simplifyStates(a)}updateStateForChar(r,s,a){let c=this.text[s]&255,u=Dd[r.getMode()][c]>0,d=null;for(let h=0;h<=Ur;h++){let g=Dd[h][c];if(g>0){if(d==null&&(d=r.endBinaryShift(s)),!u||h===r.getMode()||h===dr){const x=d.latchAndAppend(h,g);a.push(x)}if(!u&&fg[r.getMode()][h]>=0){const x=d.shiftAndAppend(h,g);a.push(x)}}}if(r.getBinaryShiftByteCount()>0||Dd[r.getMode()][c]===0){let h=r.addBinaryShiftChar(s);a.push(h)}}static updateStateListForPair(r,s,a){const c=[];for(let u of r)this.updateStateForPair(u,s,a,c);return this.simplifyStates(c)}static updateStateForPair(r,s,a,c){let u=r.endBinaryShift(s);if(c.push(u.latchAndAppend(Ur,a)),r.getMode()!==Ur&&c.push(u.shiftAndAppend(Ur,a)),a===3||a===4){let d=u.latchAndAppend(dr,16-a).latchAndAppend(dr,1);c.push(d)}if(r.getBinaryShiftByteCount()>0){let d=r.addBinaryShiftChar(s).addBinaryShiftChar(s+1);c.push(d)}}static simplifyStates(r){let s=[];for(const a of r){let c=!0;for(const u of s){if(u.isBetterThanOrEqualTo(a)){c=!1;break}a.isBetterThanOrEqualTo(u)&&(s=s.filter(d=>d!==u))}c&&s.push(a)}return s}}class Ye{constructor(){}static encodeBytes(r){return Ye.encode(r,Ye.DEFAULT_EC_PERCENT,Ye.DEFAULT_AZTEC_LAYERS)}static encode(r,s,a){let c=new fa(r).encode(),u=k.truncDivision(c.getSize()*s,100)+11,d=c.getSize()+u,h,g,x,y,_;if(a!==Ye.DEFAULT_AZTEC_LAYERS){if(h=a<0,g=Math.abs(a),g>(h?Ye.MAX_NB_BITS_COMPACT:Ye.MAX_NB_BITS))throw new v(pe.format("Illegal value %s for layers",a));x=Ye.totalBitsInLayer(g,h),y=Ye.WORD_SIZE[g];let Q=x-x%y;if(_=Ye.stuffBits(c,y),_.getSize()+u>Q)throw new v("Data to large for user specified layer");if(h&&_.getSize()>y*64)throw new v("Data to large for user specified layer")}else{y=0,_=null;for(let Q=0;;Q++){if(Q>Ye.MAX_NB_BITS)throw new v("Data too large for an Aztec code");if(h=Q<=3,g=h?Q+1:Q,x=Ye.totalBitsInLayer(g,h),d>x)continue;(_==null||y!==Ye.WORD_SIZE[g])&&(y=Ye.WORD_SIZE[g],_=Ye.stuffBits(c,y));let Fe=x-x%y;if(!(h&&_.getSize()>y*64)&&_.getSize()+u<=Fe)break}}let S=Ye.generateCheckWords(_,x,y),T=_.getSize()/y,D=Ye.generateModeMessage(h,g,T),P=(h?11:14)+g*4,L=new Int32Array(P),V;if(h){V=P;for(let Q=0;Q<L.length;Q++)L[Q]=Q}else{V=P+1+2*k.truncDivision(k.truncDivision(P,2)-1,15);let Q=k.truncDivision(P,2),Fe=k.truncDivision(V,2);for(let Ne=0;Ne<Q;Ne++){let Ln=Ne+k.truncDivision(Ne,15);L[Q-Ne-1]=Fe-Ln-1,L[Q+Ne]=Fe+Ln+1}}let ne=new Te(V);for(let Q=0,Fe=0;Q<g;Q++){let Ne=(g-Q)*4+(h?9:12);for(let Ln=0;Ln<Ne;Ln++){let br=Ln*2;for(let Fn=0;Fn<2;Fn++)S.get(Fe+br+Fn)&&ne.set(L[Q*2+Fn],L[Q*2+Ln]),S.get(Fe+Ne*2+br+Fn)&&ne.set(L[Q*2+Ln],L[P-1-Q*2-Fn]),S.get(Fe+Ne*4+br+Fn)&&ne.set(L[P-1-Q*2-Fn],L[P-1-Q*2-Ln]),S.get(Fe+Ne*6+br+Fn)&&ne.set(L[P-1-Q*2-Ln],L[Q*2+Fn])}Fe+=Ne*8}if(Ye.drawModeMessage(ne,h,V,D),h)Ye.drawBullsEye(ne,k.truncDivision(V,2),5);else{Ye.drawBullsEye(ne,k.truncDivision(V,2),7);for(let Q=0,Fe=0;Q<k.truncDivision(P,2)-1;Q+=15,Fe+=16)for(let Ne=k.truncDivision(V,2)&1;Ne<V;Ne+=2)ne.set(k.truncDivision(V,2)-Fe,Ne),ne.set(k.truncDivision(V,2)+Fe,Ne),ne.set(Ne,k.truncDivision(V,2)-Fe),ne.set(Ne,k.truncDivision(V,2)+Fe)}let ie=new cg;return ie.setCompact(h),ie.setSize(V),ie.setLayers(g),ie.setCodeWords(T),ie.setMatrix(ne),ie}static drawBullsEye(r,s,a){for(let c=0;c<a;c+=2)for(let u=s-c;u<=s+c;u++)r.set(u,s-c),r.set(u,s+c),r.set(s-c,u),r.set(s+c,u);r.set(s-a,s-a),r.set(s-a+1,s-a),r.set(s-a,s-a+1),r.set(s+a,s-a),r.set(s+a,s-a+1),r.set(s+a,s+a-1)}static generateModeMessage(r,s,a){let c=new U;return r?(c.appendBits(s-1,2),c.appendBits(a-1,6),c=Ye.generateCheckWords(c,28,4)):(c.appendBits(s-1,5),c.appendBits(a-1,11),c=Ye.generateCheckWords(c,40,4)),c}static drawModeMessage(r,s,a,c){let u=k.truncDivision(a,2);if(s)for(let d=0;d<7;d++){let h=u-3+d;c.get(d)&&r.set(h,u-5),c.get(d+7)&&r.set(u+5,h),c.get(20-d)&&r.set(h,u+5),c.get(27-d)&&r.set(u-5,h)}else for(let d=0;d<10;d++){let h=u-5+d+k.truncDivision(d,5);c.get(d)&&r.set(h,u-7),c.get(d+10)&&r.set(u+7,h),c.get(29-d)&&r.set(h,u+7),c.get(39-d)&&r.set(u-7,h)}}static generateCheckWords(r,s,a){let c=r.getSize()/a,u=new Td(Ye.getGF(a)),d=k.truncDivision(s,a),h=Ye.bitsToWords(r,a,d);u.encode(h,d-c);let g=s%a,x=new U;x.appendBits(0,g);for(const y of Array.from(h))x.appendBits(y,a);return x}static bitsToWords(r,s,a){let c=new Int32Array(a),u,d;for(u=0,d=r.getSize()/s;u<d;u++){let h=0;for(let g=0;g<s;g++)h|=r.get(u*s+g)?1<<s-g-1:0;c[u]=h}return c}static getGF(r){switch(r){case 4:return We.AZTEC_PARAM;case 6:return We.AZTEC_DATA_6;case 8:return We.AZTEC_DATA_8;case 10:return We.AZTEC_DATA_10;case 12:return We.AZTEC_DATA_12;default:throw new v("Unsupported word size "+r)}}static stuffBits(r,s){let a=new U,c=r.getSize(),u=(1<<s)-2;for(let d=0;d<c;d+=s){let h=0;for(let g=0;g<s;g++)(d+g>=c||r.get(d+g))&&(h|=1<<s-1-g);(h&u)===u?(a.appendBits(h&u,s),d--):h&u?a.appendBits(h,s):(a.appendBits(h|1,s),d--)}return a}static totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}Ye.DEFAULT_EC_PERCENT=33,Ye.DEFAULT_AZTEC_LAYERS=0,Ye.MAX_NB_BITS=32,Ye.MAX_NB_BITS_COMPACT=4,Ye.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Zl{encode(r,s,a,c){return this.encodeWithHints(r,s,a,c,null)}encodeWithHints(r,s,a,c,u){let d=Nd.ISO_8859_1,h=Ye.DEFAULT_EC_PERCENT,g=Ye.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(Yt.CHARACTER_SET)&&(d=lg.forName(u.get(Yt.CHARACTER_SET).toString())),u.has(Yt.ERROR_CORRECTION)&&(h=k.parseInt(u.get(Yt.ERROR_CORRECTION).toString())),u.has(Yt.AZTEC_LAYERS)&&(g=k.parseInt(u.get(Yt.AZTEC_LAYERS).toString()))),Zl.encodeLayers(r,s,a,c,d,h,g)}static encodeLayers(r,s,a,c,u,d,h){if(s!==ce.AZTEC)throw new v("Can only encode AZTEC, but got "+s);let g=Ye.encode(pe.getBytes(r,u),d,h);return Zl.renderResult(g,a,c)}static renderResult(r,s,a){let c=r.getMatrix();if(c==null)throw new ar;let u=c.getWidth(),d=c.getHeight(),h=Math.max(s,u),g=Math.max(a,d),x=Math.min(h/u,g/d),y=(h-u*x)/2,_=(g-d*x)/2,S=new Te(h,g);for(let T=0,D=_;T<d;T++,D+=x)for(let P=0,L=y;P<u;P++,L+=x)c.get(P,T)&&S.setRegion(L,D,x,x);return S}}n.AbstractExpandedDecoder=xd,n.ArgumentException=E,n.ArithmeticException=Ws,n.AztecCode=cg,n.AztecCodeReader=Xe,n.AztecCodeWriter=Zl,n.AztecDecoder=ot,n.AztecDetector=ke,n.AztecDetectorResult=ra,n.AztecEncoder=Ye,n.AztecHighLevelEncoder=fa,n.AztecPoint=Ce,n.BarcodeFormat=ce,n.Binarizer=M,n.BinaryBitmap=A,n.BitArray=U,n.BitMatrix=Te,n.BitSource=_d,n.BrowserAztecCodeReader=Gt,n.BrowserBarcodeReader=NC,n.BrowserCodeReader=Ge,n.BrowserDatamatrixCodeReader=OC,n.BrowserMultiFormatReader=VC,n.BrowserPDF417Reader=HC,n.BrowserQRCodeReader=GC,n.BrowserQRCodeSvgWriter=ls,n.CharacterSetECI=$,n.ChecksumException=R,n.Code128Reader=re,n.Code39Reader=Et,n.DataMatrixDecodedBitStreamParser=yi,n.DataMatrixReader=vi,n.DecodeHintType=Z,n.DecoderResult=Mr,n.DefaultGridSampler=ge,n.DetectorResult=Hs,n.EAN13Reader=rs,n.EncodeHintType=Yt,n.Exception=m,n.FormatException=z,n.GenericGF=We,n.GenericGFPoly=Lt,n.GlobalHistogramBinarizer=ct,n.GridSampler=ia,n.GridSamplerInstance=Ie,n.HTMLCanvasElementLuminanceSource=xe,n.HybridBinarizer=Ee,n.ITFReader=it,n.IllegalArgumentException=v,n.IllegalStateException=ar,n.InvertedLuminanceSource=we,n.LuminanceSource=ae,n.MathUtils=Ue,n.MultiFormatOneDReader=Ks,n.MultiFormatReader=ag,n.MultiFormatWriter=YC,n.NotFoundException=H,n.OneDReader=Ke,n.PDF417DecodedBitStreamParser=W,n.PDF417DecoderErrorCorrection=tg,n.PDF417Reader=cn,n.PDF417ResultMetadata=rg,n.PerspectiveTransform=j,n.PlanarYUVLuminanceSource=jr,n.QRCodeByteMatrix=Kl,n.QRCodeDataMask=cr,n.QRCodeDecodedBitStreamParser=It,n.QRCodeDecoderErrorCorrectionLevel=ft,n.QRCodeDecoderFormatInformation=xn,n.QRCodeEncoder=xt,n.QRCodeEncoderQRCode=as,n.QRCodeMaskUtil=Ot,n.QRCodeMatrixUtil=_e,n.QRCodeMode=ye,n.QRCodeReader=Ci,n.QRCodeVersion=me,n.QRCodeWriter=Zs,n.RGBLuminanceSource=kd,n.RSS14Reader=Rt,n.RSSExpandedReader=q,n.ReaderException=$l,n.ReedSolomonDecoder=wi,n.ReedSolomonEncoder=Td,n.ReedSolomonException=Zr,n.Result=ue,n.ResultMetadataType=Pe,n.ResultPoint=he,n.StringUtils=pe,n.UnsupportedOperationException=Ae,n.VideoInputDevice=X,n.WhiteRectangleDetector=_r,n.WriterException=ut,n.ZXingArrays=N,n.ZXingCharset=lg,n.ZXingInteger=k,n.ZXingStandardCharsets=Nd,n.ZXingStringBuilder=Oe,n.ZXingStringEncoding=nt,n.ZXingSystem=B,n.createAbstractExpandedDecoder=J1,Object.defineProperty(n,"__esModule",{value:!0})})})(Hh,Hh.exports);var vt=Hh.exports;const i6=t2(vt),s6=e2({__proto__:null,default:i6},[vt]);var Mm=function(){function t(e,n,i){if(this.formatMap=new Map([[le.QR_CODE,vt.BarcodeFormat.QR_CODE],[le.AZTEC,vt.BarcodeFormat.AZTEC],[le.CODABAR,vt.BarcodeFormat.CODABAR],[le.CODE_39,vt.BarcodeFormat.CODE_39],[le.CODE_93,vt.BarcodeFormat.CODE_93],[le.CODE_128,vt.BarcodeFormat.CODE_128],[le.DATA_MATRIX,vt.BarcodeFormat.DATA_MATRIX],[le.MAXICODE,vt.BarcodeFormat.MAXICODE],[le.ITF,vt.BarcodeFormat.ITF],[le.EAN_13,vt.BarcodeFormat.EAN_13],[le.EAN_8,vt.BarcodeFormat.EAN_8],[le.PDF_417,vt.BarcodeFormat.PDF_417],[le.RSS_14,vt.BarcodeFormat.RSS_14],[le.RSS_EXPANDED,vt.BarcodeFormat.RSS_EXPANDED],[le.UPC_A,vt.BarcodeFormat.UPC_A],[le.UPC_E,vt.BarcodeFormat.UPC_E],[le.UPC_EAN_EXTENSION,vt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!s6)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var o=this.createZXingFormats(e),l=new Map;l.set(vt.DecodeHintType.POSSIBLE_FORMATS,o),l.set(vt.DecodeHintType.TRY_HARDER,!1),this.hints=l}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(i,o){try{i(n.decode(e))}catch(l){o(l)}})},t.prototype.decode=function(e){var n=new vt.MultiFormatReader(this.verbose,this.hints),i=new vt.HTMLCanvasElementLuminanceSource(e),o=new vt.BinaryBitmap(new vt.HybridBinarizer(i)),l=n.decode(o);return{text:l.text,format:Tv.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,o){e.set(n,i)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],i=0,o=e;i<o.length;i++){var l=o[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),o6=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function p(E){try{m(i.next(E))}catch(v){f(v)}}function w(E){try{m(i.throw(E))}catch(v){f(v)}}function m(E){E.done?l(E.value):o(E.value).then(p,w)}m((i=i.apply(t,e||[])).next())})},a6=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(m){return function(E){return w([m,E])}}function w(m){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(i=1,o&&(l=m[0]&2?o.return:m[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,m[1])).done)return l;switch(o=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,o=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(E){m=[6,E],o=0}finally{i=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Bm=function(){function t(e,n,i){if(this.formatMap=new Map([[le.QR_CODE,"qr_code"],[le.AZTEC,"aztec"],[le.CODABAR,"codabar"],[le.CODE_39,"code_39"],[le.CODE_93,"code_93"],[le.CODE_128,"code_128"],[le.DATA_MATRIX,"data_matrix"],[le.ITF,"itf"],[le.EAN_13,"ean_13"],[le.EAN_8,"ean_8"],[le.PDF_417,"pdf417"],[le.UPC_A,"upc_a"],[le.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var o=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(o),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return o6(this,void 0,void 0,function(){var n,i;return a6(this,function(o){switch(o.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=o.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:Tv.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,i=0,o=0,l=e;o<l.length;o++){var f=l[o],p=f.boundingBox.width*f.boundingBox.height;p>i&&(i=p,n=f)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],i=0,o=e;i<o.length;i++){var l=o[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,o){e.set(n,i)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),Lm=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function p(E){try{m(i.next(E))}catch(v){f(v)}}function w(E){try{m(i.throw(E))}catch(v){f(v)}}function m(E){E.done?l(E.value):o(E.value).then(p,w)}m((i=i.apply(t,e||[])).next())})},Fm=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(m){return function(E){return w([m,E])}}function w(m){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(i=1,o&&(l=m[0]&2?o.return:m[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,m[1])).done)return l;switch(o=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,o=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(E){m=[6,E],o=0}finally{i=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},l6=function(){function t(e,n,i,o){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&Bm.isSupported()?(this.primaryDecoder=new Bm(e,i,o),this.secondaryDecoder=new Mm(e,i,o)):this.primaryDecoder=new Mm(e,i,o)}return t.prototype.decodeAsync=function(e){return Lm(this,void 0,void 0,function(){var n;return Fm(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return Lm(this,void 0,void 0,function(){var n,i;return Fm(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,o.sent()];case 3:if(i=o.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,i=this.executionResults;n<i.length;n++){var o=i[n];e+=o}var l=e/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),P1=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Eu=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function p(E){try{m(i.next(E))}catch(v){f(v)}}function w(E){try{m(i.throw(E))}catch(v){f(v)}}function m(E){E.done?l(E.value):o(E.value).then(p,w)}m((i=i.apply(t,e||[])).next())})},bu=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(m){return function(E){return w([m,E])}}function w(m){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(i=1,o&&(l=m[0]&2?o.return:m[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,m[1])).done)return l;switch(o=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,o=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(E){m=[6,E],o=0}finally{i=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Nv=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var i={advanced:[n]};return this.track.applyConstraints(i)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),c6=function(t){P1(e,t);function e(n,i){return t.call(this,n,i)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var i={};i[this.name]=n;var o={advanced:[i]};return this.track.applyConstraints(o)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(Nv),u6=function(t){P1(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(c6),d6=function(t){P1(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(Nv),f6=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new u6(this.track)},t.prototype.torchFeature=function(){return new d6(this.track)},t}(),h6=function(){function t(e,n,i){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=e.surface.clientWidth,o=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(i,o),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,i,o){return Eu(this,void 0,void 0,function(){var l,f;return bu(this,function(p){switch(p.label){case 0:return l=new t(e,n,o),i.aspectRatio?(f={aspectRatio:i.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:p.sent(),p.label=2;case 2:return l.setupSurface(),[2,l]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,i=function(){setTimeout(e,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Eu(this,void 0,void 0,function(){return bu(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,i){var o=e.mediaStream.getVideoTracks(),l=o.length,f=0;e.mediaStream.getVideoTracks().forEach(function(p){e.mediaStream.removeTrack(p),p.stop(),++f,f>=l&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new f6(this.getFirstTrackOrFail())},t}(),g6=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,i){return Eu(this,void 0,void 0,function(){return bu(this,function(o){return[2,h6.create(e,this.mediaStream,n,i)]})})},t.create=function(e){return Eu(this,void 0,void 0,function(){var n,i;return bu(this,function(o){switch(o.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=o.sent(),[2,new t(i)]}})})},t}(),jm=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function p(E){try{m(i.next(E))}catch(v){f(v)}}function w(E){try{m(i.throw(E))}catch(v){f(v)}}function m(E){E.done?l(E.value):o(E.value).then(p,w)}m((i=i.apply(t,e||[])).next())})},Um=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(m){return function(E){return w([m,E])}}function w(m){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(i=1,o&&(l=m[0]&2?o.return:m[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,m[1])).done)return l;switch(o=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,o=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(E){m=[6,E],o=0}finally{i=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},p6=function(){function t(){}return t.failIfNotSupported=function(){return jm(this,void 0,void 0,function(){return Um(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return jm(this,void 0,void 0,function(){return Um(this,function(n){return[2,g6.create(e)]})})},t}(),m6=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function p(E){try{m(i.next(E))}catch(v){f(v)}}function w(E){try{m(i.throw(E))}catch(v){f(v)}}function m(E){E.done?l(E.value):o(E.value).then(p,w)}m((i=i.apply(t,e||[])).next())})},w6=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(m){return function(E){return w([m,E])}}function w(m){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(i=1,o&&(l=m[0]&2?o.return:m[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,m[1])).done)return l;switch(o=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,o=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(E){m=[6,E],o=0}finally{i=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},x6=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=yo.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=yo.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return m6(this,void 0,void 0,function(){var e,n,i,o,l,f,p;return w6(this,function(w){switch(w.label){case 0:return e=function(m){for(var E=m.getVideoTracks(),v=0,A=E;v<A.length;v++){var R=A[v];R.enabled=!1,R.stop(),m.removeTrack(R)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=w.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=w.sent(),o=[],l=0,f=i;l<f.length;l++)p=f[l],p.kind==="videoinput"&&o.push({id:p.deviceId,label:p.label});return e(n),[2,o]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var i=function(l){for(var f=[],p=0,w=l;p<w.length;p++){var m=w[p];m.kind==="video"&&f.push({id:m.id,label:m.label})}e(f)},o=MediaStreamTrack;o.getSources(i)})},t}(),Dt;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(Dt||(Dt={}));var y6=function(){function t(){this.state=Dt.NOT_STARTED,this.onGoingTransactionNewState=Dt.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===Dt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Dt.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===Dt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Dt.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Dt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case Dt.UNKNOWN:throw"Transition from unknown is not allowed";case Dt.NOT_STARTED:this.failIfNewStateIs(e,[Dt.PAUSED]);break;case Dt.SCANNING:break;case Dt.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var i=0,o=n;i<o.length;i++){var l=o[i];if(e===l)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),v6=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===Dt.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==Dt.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Dt.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===Dt.PAUSED},t}(),C6=function(){function t(){}return t.create=function(){return new v6(new y6)},t}(),_6=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Kn=function(t){_6(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(t6),E6=function(){function t(e,n){this.logger=n,this.fps=Kn.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Kn.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?kv.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Qr(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),zm=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new r6(this.verbose),this.qrcode=new l6(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=C6.create()}return t.prototype.start=function(e,n,i,o){var l=this;if(!e)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;o?f=o:f=this.verbose?this.logger.log:function(){};var p=E6.create(n,this.logger);this.clearElement();var w=!1;p.videoConstraints&&(p.isMediaStreamConstraintsValid()?w=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=w,E=document.getElementById(this.elementId);E.clientWidth?E.clientWidth:Kn.DEFAULT_WIDTH,E.style.position="relative",this.shouldScan=!0,this.element=E;var v=this,A=this.stateManagerProxy.startTransition(Dt.SCANNING);return new Promise(function(R,M){var B=m?p.videoConstraints:v.createVideoConstraints(e);if(!B){A.cancel(),M("videoConstraints should be defined");return}var K={};(!m||p.aspectRatio)&&(K.aspectRatio=p.aspectRatio);var O={onRenderSurfaceReady:function(N,k){v.setupUi(N,k,p),v.isScanning=!0,v.foreverScan(p,i,f)}};p6.failIfNotSupported().then(function(N){N.create(B).then(function(k){return k.render(l.element,K,O).then(function(U){v.renderedCamera=U,A.execute(),R(null)}).catch(function(U){A.cancel(),M(U)})}).catch(function(k){A.cancel(),M(yo.errorGettingUserMedia(k))})}).catch(function(N){A.cancel(),M(yo.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Dt.PAUSED),this.showPausedState(),(Qr(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Dt.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Dt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(e.element){var l=document.getElementById(Kn.SHADED_REGION_ELEMENT_ID);l&&e.element.removeChild(l)}},o=this;return this.renderedCamera.close().then(function(){return o.renderedCamera=null,o.element&&(o.element.removeChild(o.canvasElement),o.canvasElement=null),i(),o.qrRegion&&(o.qrRegion=null),o.context&&(o.context=null),n.execute(),o.hidePausedState(),o.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(i){return i.decodedText})},t.prototype.scanFileV2=function(e,n){var i=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Qr(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(o,l){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(e);var f=new Image;f.onload=function(){var p=f.width,w=f.height,m=document.getElementById(i.elementId),E=m.clientWidth?m.clientWidth:Kn.DEFAULT_WIDTH,v=Math.max(m.clientHeight?m.clientHeight:w,Kn.FILE_SCAN_MIN_HEIGHT),A=i.computeCanvasDrawConfig(p,w,E,v);if(n){var R=i.createCanvasElement(E,v,"qr-canvas-visible");R.style.display="inline-block",m.appendChild(R);var M=R.getContext("2d");if(!M)throw"Unable to get 2d context from canvas";M.canvas.width=E,M.canvas.height=v,M.drawImage(f,0,0,p,w,A.x,A.y,A.width,A.height)}var B=Kn.FILE_SCAN_HIDDEN_CANVAS_PADDING,K=Math.max(f.width,A.width),O=Math.max(f.height,A.height),N=K+2*B,k=O+2*B,U=i.createCanvasElement(N,k);m.appendChild(U);var te=U.getContext("2d");if(!te)throw"Unable to get 2d context from canvas";te.canvas.width=N,te.canvas.height=k,te.drawImage(f,0,0,p,w,B,B,K,O);try{i.qrcode.decodeRobustlyAsync(U).then(function(Z){o(Pm.createFromQrcodeResult(Z))}).catch(l)}catch(Z){l("QR code parse error, error = ".concat(Z))}},f.onerror=l,f.onabort=l,f.onstalled=l,f.onsuspend=l,f.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return x6.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!kv.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[le.QR_CODE,le.AZTEC,le.CODABAR,le.CODE_39,le.CODE_93,le.CODE_128,le.DATA_MATRIX,le.MAXICODE,le.ITF,le.EAN_13,le.EAN_8,le.PDF_417,le.RSS_14,le.RSS_EXPANDED,le.UPC_A,le.UPC_E,le.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],o=0,l=e.formatsToSupport;o<l.length;o++){var f=l[o];e6(f)?i.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Qr(e))return!0;if(!Qr(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Qr(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return Qr(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,i){var o=this,l=i.qrbox;this.validateQrboxConfig(l);var f=this.toQrdimensions(e,n,l),p=function(m){if(m<Kn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Kn.MIN_QR_BOX_SIZE,"px.")},w=function(m){return m>e&&(o.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=e),m};p(f.width),p(f.height),f.width=w(f.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(e,n)}catch(o){throw new Error("qrbox config was passed as a function but it failed with unknown error"+o)}return i},t.prototype.setupUi=function(e,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,i);var o=Qr(i.qrbox)?{width:e,height:n}:i.qrbox;this.validateQrboxConfig(o);var l=this.toQrdimensions(e,n,o);l.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=i.isShadedBoxEnabled()&&l.height<=n,p={x:0,y:0,width:e,height:n},w=f?this.getShadedRegionBounds(e,n,l):p,m=this.createCanvasElement(w.width,w.height),E={willReadFrequently:!0},v=m.getContext("2d",E);v.canvas.width=w.width,v.canvas.height=w.height,this.element.append(m),f&&this.possiblyInsertShadingElement(this.element,e,n,l),this.createScannerPausedUiElement(this.element),this.qrRegion=w,this.context=v,this.canvasElement=m},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=yo.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(o){return e(o.text,Pm.createFromQrcodeResult(o)),i.possiblyUpdateShaders(!0),!0}).catch(function(o){i.possiblyUpdateShaders(!1);var l=yo.codeParseError(o);return n(l,n6.createFrom(l)),!1})},t.prototype.foreverScan=function(e,n,i){var o=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),f=l.videoWidth/l.clientWidth,p=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var w=this.qrRegion.width*f,m=this.qrRegion.height*p,E=this.qrRegion.x*f,v=this.qrRegion.y*p;this.context.drawImage(l,E,v,w,m,0,0,this.qrRegion.width,this.qrRegion.height);var A=function(){o.foreverScanTimeout=setTimeout(function(){o.foreverScan(e,n,i)},o.getTimeoutFps(e.fps))};this.scanContext(n,i).then(function(R){!R&&e.disableFlip!==!0?(o.context.translate(o.context.canvas.width,0),o.context.scale(-1,1),o.scanContext(n,i).finally(function(){A()})):A()}).catch(function(R){o.logger.logError("Error happend while scanning context",R),A()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",i="deviceId",o={user:!0,environment:!0},l="exact",f=function(M){if(M in o)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(M,"'")},p=Object.keys(e);if(p.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(p.length," keys");var w=Object.keys(e)[0];if(w!==n&&w!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(w===n){var m=e.facingMode;if(typeof m=="string"){if(f(m))return{facingMode:m}}else if(typeof m=="object")if(l in m){if(f(m["".concat(l)]))return{facingMode:{exact:m["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var E=typeof m;throw"Invalid type of 'facingMode' = ".concat(E)}}else{var v=e.deviceId;if(typeof v=="string")return{deviceId:v};if(typeof v=="object"){if(l in v)return{deviceId:{exact:v["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var A=typeof v;throw"Invalid type of 'deviceId' = ".concat(A)}}}var R=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(R)},t.prototype.computeCanvasDrawConfig=function(e,n,i,o){if(e<=i&&n<=o){var l=(i-e)/2,f=(o-n)/2;return{x:l,y:f,width:e,height:n}}else{var p=e,w=n;return e>i&&(n=i/e*n,e=i),n>o&&(e=o/n*e,n=o),this.logger.log("Image downsampled from "+"".concat(p,"X").concat(w)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,i,o)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Kn.BORDER_SHADER_MATCH_COLOR:Kn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,i){var o=e,l=n,f=document.createElement("canvas");return f.style.width="".concat(o,"px"),f.style.height="".concat(l,"px"),f.style.display="none",f.id=Qr(i)?"qr-canvas":i,f},t.prototype.getShadedRegionBounds=function(e,n,i){if(i.width>e||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},t.prototype.possiblyInsertShadingElement=function(e,n,i,o){if(!(n-o.width<1||i-o.height<1)){var l=document.createElement("div");l.style.position="absolute";var f=(n-o.width)/2,p=(i-o.height)/2;if(l.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(Kn.SHADED_REGION_ELEMENT_ID),n-o.width<11||i-o.height<11)this.hasBorderShaders=!1;else{var w=5,m=40;this.insertShaderBorders(l,m,w,-w,null,0,!0),this.insertShaderBorders(l,m,w,-w,null,0,!1),this.insertShaderBorders(l,m,w,null,-w,0,!0),this.insertShaderBorders(l,m,w,null,-w,0,!1),this.insertShaderBorders(l,w,m+w,-w,null,-w,!0),this.insertShaderBorders(l,w,m+w,null,-w,-w,!0),this.insertShaderBorders(l,w,m+w,-w,null,-w,!1),this.insertShaderBorders(l,w,m+w,null,-w,-w,!1),this.hasBorderShaders=!0}e.append(l)}},t.prototype.insertShaderBorders=function(e,n,i,o,l,f,p){var w=document.createElement("div");w.style.position="absolute",w.style.backgroundColor=Kn.BORDER_SHADER_DEFAULT_COLOR,w.style.width="".concat(n,"px"),w.style.height="".concat(i,"px"),o!==null&&(w.style.top="".concat(o,"px")),l!==null&&(w.style.bottom="".concat(l,"px")),p?w.style.left="".concat(f,"px"):w.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(w),e.appendChild(w)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),Wm;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Wm||(Wm={}));const Rv=({onScan:t,onClose:e,isOpen:n})=>{const[i,o]=Y.useState(!1),[l,f]=Y.useState(""),[p,w]=Y.useState(""),[m,E]=Y.useState(!1),[v,A]=Y.useState(""),R=Y.useRef(null),M=Y.useRef(`html5qr-${Math.random().toString(36).slice(2)}`);Y.useEffect(()=>(n&&B(),()=>{K()}),[n]);const B=async()=>{try{w(""),E(!1),R.current||(R.current=new zm(M.current,!1));const k=await zm.getCameras();if(!k||k.length===0){w("Kamera tidak ditemukan.");return}const U=k.find(Z=>/back|rear|environment/i.test(Z.label))||k[0],te={fps:10,qrbox:{width:280,height:200},aspectRatio:1.777,rememberLastUsedCamera:!0,focusMode:"continuous",focusDistance:0,formatsToSupport:[le.CODE_128,le.EAN_13,le.EAN_8,le.UPC_A,le.UPC_E,le.QR_CODE]};await R.current.start(U.id,te,Z=>{Z&&(f(Z),t(Z),K())},Z=>{}),E(!0),o(!0)}catch(k){console.error("Scanner init error:",k),w("Tidak dapat memulai pemindai: "+((k==null?void 0:k.message)||String(k)))}},K=async()=>{o(!1);try{R.current&&(await R.current.stop(),await R.current.clear())}catch{}},O=()=>{K(),e()},N=()=>{w(""),f(""),B()};return n?b.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:[b.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",width:"100%",maxWidth:"28rem",maxHeight:"90vh",overflow:"auto"},children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[b.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",margin:0},children:"Scan Barcode"}),b.jsx("button",{onClick:O,style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem"},children:b.jsx(Lb,{size:24})})]}),b.jsx("div",{style:{position:"relative",width:"100%",height:"320px",backgroundColor:"#000",borderRadius:"0.5rem",overflow:"hidden",marginBottom:"1rem"},children:b.jsx("div",{id:M.current,style:{width:"100%",height:"100%"}})}),p&&b.jsxs("div",{style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"0.5rem",padding:"1rem",marginBottom:"1rem",display:"flex",alignItems:"center"},children:[b.jsx(Db,{size:20,style:{color:"#dc2626",marginRight:"0.5rem"}}),b.jsxs("div",{children:[b.jsx("p",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#991b1b",margin:0},children:p}),b.jsx("button",{onClick:N,style:{marginTop:"0.5rem",fontSize:"0.75rem",color:"#dc2626",background:"none",border:"none",cursor:"pointer",textDecoration:"underline"},children:"Coba Lagi"})]})]}),l&&b.jsxs("div",{style:{backgroundColor:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"0.5rem",padding:"1rem",marginBottom:"1rem",display:"flex",alignItems:"center"},children:[b.jsx(Ix,{size:20,style:{color:"#059669",marginRight:"0.5rem"}}),b.jsxs("div",{children:[b.jsx("p",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#065f46",margin:0},children:"Barcode berhasil dipindai!"}),b.jsx("p",{style:{fontSize:"0.75rem",color:"#059669",marginTop:"0.25rem",margin:0},children:l})]})]}),b.jsxs("div",{style:{marginBottom:"1rem"},children:[b.jsx("label",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem",display:"block"},children:"Atau masukkan barcode secara manual:"}),b.jsx("input",{type:"text",value:v,onChange:k=>A(k.target.value),placeholder:"Masukkan kode barcode",style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem"}}),v&&b.jsx("button",{onClick:()=>{t(v),O()},style:{marginTop:"0.5rem",width:"100%",backgroundColor:"#10b981",color:"white",padding:"0.5rem",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Gunakan Kode Manual"})]}),b.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[b.jsx("button",{onClick:O,style:{flex:1,backgroundColor:"#6b7280",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Tutup"}),l&&b.jsx("button",{onClick:()=>{t(l),O()},style:{flex:1,backgroundColor:"#3b82f6",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Gunakan"})]})]}),b.jsx("style",{jsx:!0,children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
      `})]}):null};/*!
* sweetalert2 v11.26.3
* Released under the MIT License.
*/function Ov(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function b6(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Vm(t,e){return t.get(Ov(t,e))}function S6(t,e,n){b6(t,e),e.set(t,n)}function A6(t,e,n){return t.set(Ov(t,e),n),n}const I6=100,ve={},T6=()=>{ve.previousActiveElement instanceof HTMLElement?(ve.previousActiveElement.focus(),ve.previousActiveElement=null):document.body&&document.body.focus()},k6=t=>new Promise(e=>{if(!t)return e();const n=window.scrollX,i=window.scrollY;ve.restoreFocusTimeout=setTimeout(()=>{T6(),e()},I6),window.scrollTo(n,i)}),Dv="swal2-",N6=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],G=N6.reduce((t,e)=>(t[e]=Dv+e,t),{}),R6=["success","warning","info","question","error"],Su=R6.reduce((t,e)=>(t[e]=Dv+e,t),{}),Pv="SweetAlert2:",M1=t=>t.charAt(0).toUpperCase()+t.slice(1),Nn=t=>{console.warn(`${Pv} ${typeof t=="object"?t.join(" "):t}`)},Us=t=>{console.error(`${Pv} ${t}`)},Hm=[],O6=t=>{Hm.includes(t)||(Hm.push(t),Nn(t))},Mv=(t,e=null)=>{O6(`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},dd=t=>typeof t=="function"?t():t,B1=t=>t&&typeof t.toPromise=="function",Ll=t=>B1(t)?t.toPromise():Promise.resolve(t),L1=t=>t&&Promise.resolve(t)===t,Dn=()=>document.body.querySelector(`.${G.container}`),Fl=t=>{const e=Dn();return e?e.querySelector(t):null},sr=t=>Fl(`.${t}`),Qe=()=>sr(G.popup),Jo=()=>sr(G.icon),D6=()=>sr(G["icon-content"]),Bv=()=>sr(G.title),F1=()=>sr(G["html-container"]),Lv=()=>sr(G.image),j1=()=>sr(G["progress-steps"]),fd=()=>sr(G["validation-message"]),Kr=()=>Fl(`.${G.actions} .${G.confirm}`),ea=()=>Fl(`.${G.actions} .${G.cancel}`),zs=()=>Fl(`.${G.actions} .${G.deny}`),P6=()=>sr(G["input-label"]),ta=()=>Fl(`.${G.loader}`),jl=()=>sr(G.actions),Fv=()=>sr(G.footer),hd=()=>sr(G["timer-progress-bar"]),U1=()=>sr(G.close),M6=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,z1=()=>{const t=Qe();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(e).sort((l,f)=>{const p=parseInt(l.getAttribute("tabindex")||"0"),w=parseInt(f.getAttribute("tabindex")||"0");return p>w?1:p<w?-1:0}),i=t.querySelectorAll(M6),o=Array.from(i).filter(l=>l.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(o))].filter(l=>Xn(l))},W1=()=>oi(document.body,G.shown)&&!oi(document.body,G["toast-shown"])&&!oi(document.body,G["no-backdrop"]),gd=()=>{const t=Qe();return t?oi(t,G.toast):!1},B6=()=>{const t=Qe();return t?t.hasAttribute("data-loading"):!1},or=(t,e)=>{if(t.textContent="",e){const i=new DOMParser().parseFromString(e,"text/html"),o=i.querySelector("head");o&&Array.from(o.childNodes).forEach(f=>{t.appendChild(f)});const l=i.querySelector("body");l&&Array.from(l.childNodes).forEach(f=>{f instanceof HTMLVideoElement||f instanceof HTMLAudioElement?t.appendChild(f.cloneNode(!0)):t.appendChild(f)})}},oi=(t,e)=>{if(!e)return!1;const n=e.split(/\s+/);for(let i=0;i<n.length;i++)if(!t.classList.contains(n[i]))return!1;return!0},L6=(t,e)=>{Array.from(t.classList).forEach(n=>{!Object.values(G).includes(n)&&!Object.values(Su).includes(n)&&!Object.values(e.showClass||{}).includes(n)&&t.classList.remove(n)})},nr=(t,e,n)=>{if(L6(t,e),!e.customClass)return;const i=e.customClass[n];if(i){if(typeof i!="string"&&!i.forEach){Nn(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof i}"`);return}tt(t,i)}},pd=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${G.popup} > .${G[e]}`);case"checkbox":return t.querySelector(`.${G.popup} > .${G.checkbox} input`);case"radio":return t.querySelector(`.${G.popup} > .${G.radio} input:checked`)||t.querySelector(`.${G.popup} > .${G.radio} input:first-child`);case"range":return t.querySelector(`.${G.popup} > .${G.range} input`);default:return t.querySelector(`.${G.popup} > .${G.input}`)}},jv=t=>{if(t.focus(),t.type!=="file"){const e=t.value;t.value="",t.value=e}},Uv=(t,e,n)=>{!t||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(i=>{Array.isArray(t)?t.forEach(o=>{n?o.classList.add(i):o.classList.remove(i)}):n?t.classList.add(i):t.classList.remove(i)}))},tt=(t,e)=>{Uv(t,e,!0)},vr=(t,e)=>{Uv(t,e,!1)},Di=(t,e)=>{const n=Array.from(t.children);for(let i=0;i<n.length;i++){const o=n[i];if(o instanceof HTMLElement&&oi(o,e))return o}},Cs=(t,e,n)=>{n===`${parseInt(`${n}`)}`&&(n=parseInt(n)),n||parseInt(`${n}`)===0?t.style.setProperty(e,typeof n=="number"?`${n}px`:n):t.style.removeProperty(e)},on=(t,e="flex")=>{t&&(t.style.display=e)},En=t=>{t&&(t.style.display="none")},V1=(t,e="block")=>{t&&new MutationObserver(()=>{Ul(t,t.innerHTML,e)}).observe(t,{childList:!0,subtree:!0})},Gm=(t,e,n,i)=>{const o=t.querySelector(e);o&&o.style.setProperty(n,i)},Ul=(t,e,n="flex")=>{e?on(t,n):En(t)},Xn=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),F6=()=>!Xn(Kr())&&!Xn(zs())&&!Xn(ea()),Gh=t=>t.scrollHeight>t.clientHeight,j6=(t,e)=>{let n=t;for(;n&&n!==e;){if(Gh(n))return!0;n=n.parentElement}return!1},zv=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),i=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||i>0},H1=(t,e=!1)=>{const n=hd();n&&Xn(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${t/1e3}s linear`,n.style.width="0%"},10))},U6=()=>{const t=hd();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const n=parseInt(window.getComputedStyle(t).width),i=e/n*100;t.style.width=`${i}%`},z6=()=>typeof window>"u"||typeof document>"u",W6=`
 <div aria-labelledby="${G.title}" aria-describedby="${G["html-container"]}" class="${G.popup}" tabindex="-1">
   <button type="button" class="${G.close}"></button>
   <ul class="${G["progress-steps"]}"></ul>
   <div class="${G.icon}"></div>
   <img class="${G.image}" />
   <h2 class="${G.title}" id="${G.title}"></h2>
   <div class="${G["html-container"]}" id="${G["html-container"]}"></div>
   <input class="${G.input}" id="${G.input}" />
   <input type="file" class="${G.file}" />
   <div class="${G.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${G.select}" id="${G.select}"></select>
   <div class="${G.radio}"></div>
   <label class="${G.checkbox}">
     <input type="checkbox" id="${G.checkbox}" />
     <span class="${G.label}"></span>
   </label>
   <textarea class="${G.textarea}" id="${G.textarea}"></textarea>
   <div class="${G["validation-message"]}" id="${G["validation-message"]}"></div>
   <div class="${G.actions}">
     <div class="${G.loader}"></div>
     <button type="button" class="${G.confirm}"></button>
     <button type="button" class="${G.deny}"></button>
     <button type="button" class="${G.cancel}"></button>
   </div>
   <div class="${G.footer}"></div>
   <div class="${G["timer-progress-bar-container"]}">
     <div class="${G["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),V6=()=>{const t=Dn();return t?(t.remove(),vr([document.documentElement,document.body],[G["no-backdrop"],G["toast-shown"],G["has-column"]]),!0):!1},cs=()=>{ve.currentInstance.resetValidationMessage()},H6=()=>{const t=Qe(),e=Di(t,G.input),n=Di(t,G.file),i=t.querySelector(`.${G.range} input`),o=t.querySelector(`.${G.range} output`),l=Di(t,G.select),f=t.querySelector(`.${G.checkbox} input`),p=Di(t,G.textarea);e.oninput=cs,n.onchange=cs,l.onchange=cs,f.onchange=cs,p.oninput=cs,i.oninput=()=>{cs(),o.value=i.value},i.onchange=()=>{cs(),o.value=i.value}},G6=t=>typeof t=="string"?document.querySelector(t):t,X6=t=>{const e=Qe();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")},Y6=t=>{window.getComputedStyle(t).direction==="rtl"&&tt(Dn(),G.rtl)},$6=t=>{const e=V6();if(z6()){Us("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=G.container,e&&tt(n,G["no-transition"]),or(n,W6),n.dataset.swal2Theme=t.theme;const i=G6(t.target);i.appendChild(n),t.topLayer&&(n.setAttribute("popover",""),n.showPopover()),X6(t),Y6(i),H6()},G1=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):typeof t=="object"?K6(t,e):t&&or(e,t)},K6=(t,e)=>{t.jquery?q6(e,t):or(e,t.toString())},q6=(t,e)=>{if(t.textContent="",0 in e)for(let n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},Z6=(t,e)=>{const n=jl(),i=ta();!n||!i||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?En(n):on(n),nr(n,e,"actions"),Q6(n,i,e),or(i,e.loaderHtml||""),nr(i,e,"loader"))};function Q6(t,e,n){const i=Kr(),o=zs(),l=ea();!i||!o||!l||(Ef(i,"confirm",n),Ef(o,"deny",n),Ef(l,"cancel",n),J6(i,o,l,n),n.reverseButtons&&(n.toast?(t.insertBefore(l,i),t.insertBefore(o,i)):(t.insertBefore(l,e),t.insertBefore(o,e),t.insertBefore(i,e))))}function J6(t,e,n,i){if(!i.buttonsStyling){vr([t,e,n],G.styled);return}tt([t,e,n],G.styled),i.confirmButtonColor&&t.style.setProperty("--swal2-confirm-button-background-color",i.confirmButtonColor),i.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",i.denyButtonColor),i.cancelButtonColor&&n.style.setProperty("--swal2-cancel-button-background-color",i.cancelButtonColor),_f(t),_f(e),_f(n)}function _f(t){const e=window.getComputedStyle(t);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const n=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");t.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${n}`))}function Ef(t,e,n){const i=M1(e);Ul(t,n[`show${i}Button`],"inline-block"),or(t,n[`${e}ButtonText`]||""),t.setAttribute("aria-label",n[`${e}ButtonAriaLabel`]||""),t.className=G[e],nr(t,n,`${e}Button`)}const e5=(t,e)=>{const n=U1();n&&(or(n,e.closeButtonHtml||""),nr(n,e,"closeButton"),Ul(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel||""))},t5=(t,e)=>{const n=Dn();n&&(n5(n,e.backdrop),r5(n,e.position),i5(n,e.grow),nr(n,e,"container"))};function n5(t,e){typeof e=="string"?t.style.background=e:e||tt([document.documentElement,document.body],G["no-backdrop"])}function r5(t,e){e&&(e in G?tt(t,G[e]):(Nn('The "position" parameter is not valid, defaulting to "center"'),tt(t,G.center)))}function i5(t,e){e&&tt(t,G[`grow-${e}`])}var wt={innerParams:new WeakMap,domCache:new WeakMap};const s5=["input","file","range","select","radio","checkbox","textarea"],o5=(t,e)=>{const n=Qe();if(!n)return;const i=wt.innerParams.get(t),o=!i||e.input!==i.input;s5.forEach(l=>{const f=Di(n,G[l]);f&&(c5(l,e.inputAttributes),f.className=G[l],o&&En(f))}),e.input&&(o&&a5(e),u5(e))},a5=t=>{if(!t.input)return;if(!jt[t.input]){Us(`Unexpected type of input! Expected ${Object.keys(jt).join(" | ")}, got "${t.input}"`);return}const e=Wv(t.input);if(!e)return;const n=jt[t.input](e,t);on(e),t.inputAutoFocus&&setTimeout(()=>{jv(n)})},l5=t=>{for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;["id","type","value","style"].includes(n)||t.removeAttribute(n)}},c5=(t,e)=>{const n=Qe();if(!n)return;const i=pd(n,t);if(i){l5(i);for(const o in e)i.setAttribute(o,e[o])}},u5=t=>{if(!t.input)return;const e=Wv(t.input);e&&nr(e,t,"input")},X1=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},zl=(t,e,n)=>{if(n.inputLabel){const i=document.createElement("label"),o=G["input-label"];i.setAttribute("for",t.id),i.className=o,typeof n.customClass=="object"&&tt(i,n.customClass.inputLabel),i.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",i)}},Wv=t=>{const e=Qe();if(e)return Di(e,G[t]||G.input)},Au=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:L1(e)||Nn(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},jt={};jt.text=jt.email=jt.password=jt.number=jt.tel=jt.url=jt.search=jt.date=jt["datetime-local"]=jt.time=jt.week=jt.month=(t,e)=>(Au(t,e.inputValue),zl(t,t,e),X1(t,e),t.type=e.input,t);jt.file=(t,e)=>(zl(t,t,e),X1(t,e),t);jt.range=(t,e)=>{const n=t.querySelector("input"),i=t.querySelector("output");return Au(n,e.inputValue),n.type=e.input,Au(i,e.inputValue),zl(n,t,e),t};jt.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const n=document.createElement("option");or(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return zl(t,t,e),t};jt.radio=t=>(t.textContent="",t);jt.checkbox=(t,e)=>{const n=pd(Qe(),"checkbox");n.value="1",n.checked=!!e.inputValue;const i=t.querySelector("span");return or(i,e.inputPlaceholder||e.inputLabel),n};jt.textarea=(t,e)=>{Au(t,e.inputValue),X1(t,e),zl(t,t,e);const n=i=>parseInt(window.getComputedStyle(i).marginLeft)+parseInt(window.getComputedStyle(i).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const i=parseInt(window.getComputedStyle(Qe()).width),o=()=>{if(!document.body.contains(t))return;const l=t.offsetWidth+n(t);l>i?Qe().style.width=`${l}px`:Cs(Qe(),"width",e.width)};new MutationObserver(o).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const d5=(t,e)=>{const n=F1();n&&(V1(n),nr(n,e,"htmlContainer"),e.html?(G1(e.html,n),on(n,"block")):e.text?(n.textContent=e.text,on(n,"block")):En(n),o5(t,e))},f5=(t,e)=>{const n=Fv();n&&(V1(n),Ul(n,!!e.footer,"block"),e.footer&&G1(e.footer,n),nr(n,e,"footer"))},h5=(t,e)=>{const n=wt.innerParams.get(t),i=Jo();if(!i)return;if(n&&e.icon===n.icon){Ym(i,e),Xm(i,e);return}if(!e.icon&&!e.iconHtml){En(i);return}if(e.icon&&Object.keys(Su).indexOf(e.icon)===-1){Us(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),En(i);return}on(i),Ym(i,e),Xm(i,e),tt(i,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",Vv)},Xm=(t,e)=>{for(const[n,i]of Object.entries(Su))e.icon!==n&&vr(t,i);tt(t,e.icon&&Su[e.icon]),m5(t,e),Vv(),nr(t,e,"icon")},Vv=()=>{const t=Qe();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let i=0;i<n.length;i++)n[i].style.backgroundColor=e},g5=t=>`
  ${t.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${t.animation?'<div class="swal2-success-fix"></div>':""}
  ${t.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,p5=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Ym=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let n=t.innerHTML,i="";e.iconHtml?i=$m(e.iconHtml):e.icon==="success"?(i=g5(e),n=n.replace(/ style=".*?"/g,"")):e.icon==="error"?i=p5:e.icon&&(i=$m({question:"?",warning:"!",info:"i"}[e.icon])),n.trim()!==i.trim()&&or(t,i)},m5=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Gm(t,n,"background-color",e.iconColor);Gm(t,".swal2-success-ring","border-color",e.iconColor)}},$m=t=>`<div class="${G["icon-content"]}">${t}</div>`,w5=(t,e)=>{const n=Lv();if(n){if(!e.imageUrl){En(n);return}on(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt||""),Cs(n,"width",e.imageWidth),Cs(n,"height",e.imageHeight),n.className=G.image,nr(n,e,"image")}};let Y1=!1,Hv=0,Gv=0,Xv=0,Yv=0;const x5=t=>{t.addEventListener("mousedown",Iu),document.body.addEventListener("mousemove",Tu),t.addEventListener("mouseup",ku),t.addEventListener("touchstart",Iu),document.body.addEventListener("touchmove",Tu),t.addEventListener("touchend",ku)},y5=t=>{t.removeEventListener("mousedown",Iu),document.body.removeEventListener("mousemove",Tu),t.removeEventListener("mouseup",ku),t.removeEventListener("touchstart",Iu),document.body.removeEventListener("touchmove",Tu),t.removeEventListener("touchend",ku)},Iu=t=>{const e=Qe();if(t.target===e||Jo().contains(t.target)){Y1=!0;const n=$v(t);Hv=n.clientX,Gv=n.clientY,Xv=parseInt(e.style.insetInlineStart)||0,Yv=parseInt(e.style.insetBlockStart)||0,tt(e,"swal2-dragging")}},Tu=t=>{const e=Qe();if(Y1){let{clientX:n,clientY:i}=$v(t);e.style.insetInlineStart=`${Xv+(n-Hv)}px`,e.style.insetBlockStart=`${Yv+(i-Gv)}px`}},ku=()=>{const t=Qe();Y1=!1,vr(t,"swal2-dragging")},$v=t=>{let e=0,n=0;return t.type.startsWith("mouse")?(e=t.clientX,n=t.clientY):t.type.startsWith("touch")&&(e=t.touches[0].clientX,n=t.touches[0].clientY),{clientX:e,clientY:n}},v5=(t,e)=>{const n=Dn(),i=Qe();if(!(!n||!i)){if(e.toast){Cs(n,"width",e.width),i.style.width="100%";const o=ta();o&&i.insertBefore(o,Jo())}else Cs(i,"width",e.width);Cs(i,"padding",e.padding),e.color&&(i.style.color=e.color),e.background&&(i.style.background=e.background),En(fd()),C5(i,e),e.draggable&&!e.toast?(tt(i,G.draggable),x5(i)):(vr(i,G.draggable),y5(i))}},C5=(t,e)=>{const n=e.showClass||{};t.className=`${G.popup} ${Xn(t)?n.popup:""}`,e.toast?(tt([document.documentElement,document.body],G["toast-shown"]),tt(t,G.toast)):tt(t,G.modal),nr(t,e,"popup"),typeof e.customClass=="string"&&tt(t,e.customClass),e.icon&&tt(t,G[`icon-${e.icon}`])},_5=(t,e)=>{const n=j1();if(!n)return;const{progressSteps:i,currentProgressStep:o}=e;if(!i||i.length===0||o===void 0){En(n);return}on(n),n.textContent="",o>=i.length&&Nn("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),i.forEach((l,f)=>{const p=E5(l);if(n.appendChild(p),f===o&&tt(p,G["active-progress-step"]),f!==i.length-1){const w=b5(e);n.appendChild(w)}})},E5=t=>{const e=document.createElement("li");return tt(e,G["progress-step"]),or(e,t),e},b5=t=>{const e=document.createElement("li");return tt(e,G["progress-step-line"]),t.progressStepsDistance&&Cs(e,"width",t.progressStepsDistance),e},S5=(t,e)=>{const n=Bv();n&&(V1(n),Ul(n,!!(e.title||e.titleText),"block"),e.title&&G1(e.title,n),e.titleText&&(n.innerText=e.titleText),nr(n,e,"title"))},Kv=(t,e)=>{v5(t,e),t5(t,e),_5(t,e),h5(t,e),w5(t,e),S5(t,e),e5(t,e),d5(t,e),Z6(t,e),f5(t,e);const n=Qe();typeof e.didRender=="function"&&n&&e.didRender(n),ve.eventEmitter.emit("didRender",n)},A5=()=>Xn(Qe()),qv=()=>{var t;return(t=Kr())===null||t===void 0?void 0:t.click()},I5=()=>{var t;return(t=zs())===null||t===void 0?void 0:t.click()},T5=()=>{var t;return(t=ea())===null||t===void 0?void 0:t.click()},na=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Zv=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},k5=(t,e,n)=>{Zv(t),e.toast||(t.keydownHandler=i=>R5(e,i,n),t.keydownTarget=e.keydownListenerCapture?window:Qe(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},Xh=(t,e)=>{var n;const i=z1();if(i.length){t=t+e,t===-2&&(t=i.length-1),t===i.length?t=0:t===-1&&(t=i.length-1),i[t].focus();return}(n=Qe())===null||n===void 0||n.focus()},Qv=["ArrowRight","ArrowDown"],N5=["ArrowLeft","ArrowUp"],R5=(t,e,n)=>{t&&(e.isComposing||e.keyCode===229||(t.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?O5(e,t):e.key==="Tab"?D5(e):[...Qv,...N5].includes(e.key)?P5(e.key):e.key==="Escape"&&M5(e,t,n)))},O5=(t,e)=>{if(!dd(e.allowEnterKey))return;const n=pd(Qe(),e.input);if(t.target&&n&&t.target instanceof HTMLElement&&t.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(e.input))return;qv(),t.preventDefault()}},D5=t=>{const e=t.target,n=z1();let i=-1;for(let o=0;o<n.length;o++)if(e===n[o]){i=o;break}t.shiftKey?Xh(i,-1):Xh(i,1),t.stopPropagation(),t.preventDefault()},P5=t=>{const e=jl(),n=Kr(),i=zs(),o=ea();if(!e||!n||!i||!o)return;const l=[n,i,o];if(document.activeElement instanceof HTMLElement&&!l.includes(document.activeElement))return;const f=Qv.includes(t)?"nextElementSibling":"previousElementSibling";let p=document.activeElement;if(p){for(let w=0;w<e.children.length;w++){if(p=p[f],!p)return;if(p instanceof HTMLButtonElement&&Xn(p))break}p instanceof HTMLButtonElement&&p.focus()}},M5=(t,e,n)=>{t.preventDefault(),dd(e.allowEscapeKey)&&n(na.esc)};var Vo={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const B5=()=>{const t=Dn();Array.from(document.body.children).forEach(n=>{n.contains(t)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},Jv=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},eC=typeof window<"u"&&!!window.GestureEvent,L5=()=>{if(eC&&!oi(document.body,G.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,tt(document.body,G.iosfix),F5()}},F5=()=>{const t=Dn();if(!t)return;let e;t.ontouchstart=n=>{e=j5(n)},t.ontouchmove=n=>{e&&(n.preventDefault(),n.stopPropagation())}},j5=t=>{const e=t.target,n=Dn(),i=F1();return!n||!i||U5(t)||z5(t)?!1:e===n||!Gh(n)&&e instanceof HTMLElement&&!j6(e,i)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(Gh(i)&&i.contains(e))},U5=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",z5=t=>t.touches&&t.touches.length>1,W5=()=>{if(oi(document.body,G.iosfix)){const t=parseInt(document.body.style.top,10);vr(document.body,G.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},V5=()=>{const t=document.createElement("div");t.className=G["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e};let To=null;const H5=t=>{To===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(To=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${To+V5()}px`)},G5=()=>{To!==null&&(document.body.style.paddingRight=`${To}px`,To=null)};function tC(t,e,n,i){gd()?Km(t,i):(k6(n).then(()=>Km(t,i)),Zv(ve)),eC?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),W1()&&(G5(),W5(),Jv()),X5()}function X5(){vr([document.documentElement,document.body],[G.shown,G["height-auto"],G["no-backdrop"],G["toast-shown"]])}function Pi(t){t=$5(t);const e=Vo.swalPromiseResolve.get(this),n=Y5(this);this.isAwaitingPromise?t.isDismissed||(Wl(this),e(t)):n&&e(t)}const Y5=t=>{const e=Qe();if(!e)return!1;const n=wt.innerParams.get(t);if(!n||oi(e,n.hideClass.popup))return!1;vr(e,n.showClass.popup),tt(e,n.hideClass.popup);const i=Dn();return vr(i,n.showClass.backdrop),tt(i,n.hideClass.backdrop),K5(t,e,n),!0};function nC(t){const e=Vo.swalPromiseReject.get(this);Wl(this),e&&e(t)}const Wl=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,wt.innerParams.get(t)||t._destroy())},$5=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),K5=(t,e,n)=>{var i;const o=Dn(),l=zv(e);typeof n.willClose=="function"&&n.willClose(e),(i=ve.eventEmitter)===null||i===void 0||i.emit("willClose",e),l?q5(t,e,o,n.returnFocus,n.didClose):tC(t,o,n.returnFocus,n.didClose)},q5=(t,e,n,i,o)=>{ve.swalCloseEventFinishedCallback=tC.bind(null,t,n,i,o);const l=function(f){if(f.target===e){var p;(p=ve.swalCloseEventFinishedCallback)===null||p===void 0||p.call(ve),delete ve.swalCloseEventFinishedCallback,e.removeEventListener("animationend",l),e.removeEventListener("transitionend",l)}};e.addEventListener("animationend",l),e.addEventListener("transitionend",l)},Km=(t,e)=>{setTimeout(()=>{var n;typeof e=="function"&&e.bind(t.params)(),(n=ve.eventEmitter)===null||n===void 0||n.emit("didClose"),t._destroy&&t._destroy()})},Ho=t=>{let e=Qe();if(e||new qe,e=Qe(),!e)return;const n=ta();gd()?En(Jo()):Z5(e,t),on(n),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},Z5=(t,e)=>{const n=jl(),i=ta();!n||!i||(!e&&Xn(Kr())&&(e=Kr()),on(n),e&&(En(e),i.setAttribute("data-button-to-replace",e.className),n.insertBefore(i,e)),tt([t,n],G.loading))},Q5=(t,e)=>{e.input==="select"||e.input==="radio"?rk(t,e):["text","email","number","tel","textarea"].some(n=>n===e.input)&&(B1(e.inputValue)||L1(e.inputValue))&&(Ho(Kr()),ik(t,e))},J5=(t,e)=>{const n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return ek(n);case"radio":return tk(n);case"file":return nk(n);default:return e.inputAutoTrim?n.value.trim():n.value}},ek=t=>t.checked?1:0,tk=t=>t.checked?t.value:null,nk=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,rk=(t,e)=>{const n=Qe();if(!n)return;const i=o=>{e.input==="select"?sk(n,Nu(o),e):e.input==="radio"&&ok(n,Nu(o),e)};B1(e.inputOptions)||L1(e.inputOptions)?(Ho(Kr()),Ll(e.inputOptions).then(o=>{t.hideLoading(),i(o)})):typeof e.inputOptions=="object"?i(e.inputOptions):Us(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},ik=(t,e)=>{const n=t.getInput();n&&(En(n),Ll(e.inputValue).then(i=>{n.value=e.input==="number"?`${parseFloat(i)||0}`:`${i}`,on(n),n.focus(),t.hideLoading()}).catch(i=>{Us(`Error in inputValue promise: ${i}`),n.value="",on(n),n.focus(),t.hideLoading()}))};function sk(t,e,n){const i=Di(t,G.select);if(!i)return;const o=(l,f,p)=>{const w=document.createElement("option");w.value=p,or(w,f),w.selected=rC(p,n.inputValue),l.appendChild(w)};e.forEach(l=>{const f=l[0],p=l[1];if(Array.isArray(p)){const w=document.createElement("optgroup");w.label=f,w.disabled=!1,i.appendChild(w),p.forEach(m=>o(w,m[1],m[0]))}else o(i,p,f)}),i.focus()}function ok(t,e,n){const i=Di(t,G.radio);if(!i)return;e.forEach(l=>{const f=l[0],p=l[1],w=document.createElement("input"),m=document.createElement("label");w.type="radio",w.name=G.radio,w.value=f,rC(f,n.inputValue)&&(w.checked=!0);const E=document.createElement("span");or(E,p),E.className=G.label,m.appendChild(w),m.appendChild(E),i.appendChild(m)});const o=i.querySelectorAll("input");o.length&&o[0].focus()}const Nu=t=>{const e=[];return t instanceof Map?t.forEach((n,i)=>{let o=n;typeof o=="object"&&(o=Nu(o)),e.push([i,o])}):Object.keys(t).forEach(n=>{let i=t[n];typeof i=="object"&&(i=Nu(i)),e.push([n,i])}),e},rC=(t,e)=>!!e&&e.toString()===t.toString(),ak=t=>{const e=wt.innerParams.get(t);t.disableButtons(),e.input?iC(t,"confirm"):K1(t,!0)},lk=t=>{const e=wt.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?iC(t,"deny"):$1(t,!1)},ck=(t,e)=>{t.disableButtons(),e(na.cancel)},iC=(t,e)=>{const n=wt.innerParams.get(t);if(!n.input){Us(`The "input" parameter is needed to be set when using returnInputValueOn${M1(e)}`);return}const i=t.getInput(),o=J5(t,n);n.inputValidator?uk(t,o,e):i&&!i.checkValidity()?(t.enableButtons(),t.showValidationMessage(n.validationMessage||i.validationMessage)):e==="deny"?$1(t,o):K1(t,o)},uk=(t,e,n)=>{const i=wt.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>Ll(i.inputValidator(e,i.validationMessage))).then(l=>{t.enableButtons(),t.enableInput(),l?t.showValidationMessage(l):n==="deny"?$1(t,e):K1(t,e)})},$1=(t,e)=>{const n=wt.innerParams.get(t||void 0);n.showLoaderOnDeny&&Ho(zs()),n.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>Ll(n.preDeny(e,n.validationMessage))).then(o=>{o===!1?(t.hideLoading(),Wl(t)):t.close({isDenied:!0,value:typeof o>"u"?e:o})}).catch(o=>sC(t||void 0,o))):t.close({isDenied:!0,value:e})},qm=(t,e)=>{t.close({isConfirmed:!0,value:e})},sC=(t,e)=>{t.rejectPromise(e)},K1=(t,e)=>{const n=wt.innerParams.get(t||void 0);n.showLoaderOnConfirm&&Ho(),n.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>Ll(n.preConfirm(e,n.validationMessage))).then(o=>{Xn(fd())||o===!1?(t.hideLoading(),Wl(t)):qm(t,typeof o>"u"?e:o)}).catch(o=>sC(t||void 0,o))):qm(t,e)};function Ru(){const t=wt.innerParams.get(this);if(!t)return;const e=wt.domCache.get(this);En(e.loader),gd()?t.icon&&on(Jo()):dk(e),vr([e.popup,e.actions],G.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const dk=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?on(e[0],"inline-block"):F6()&&En(t.actions)};function oC(){const t=wt.innerParams.get(this),e=wt.domCache.get(this);return e?pd(e.popup,t.input):null}function aC(t,e,n){const i=wt.domCache.get(t);e.forEach(o=>{i[o].disabled=n})}function lC(t,e){const n=Qe();if(!(!n||!t))if(t.type==="radio"){const i=n.querySelectorAll(`[name="${G.radio}"]`);for(let o=0;o<i.length;o++)i[o].disabled=e}else t.disabled=e}function cC(){aC(this,["confirmButton","denyButton","cancelButton"],!1)}function uC(){aC(this,["confirmButton","denyButton","cancelButton"],!0)}function dC(){lC(this.getInput(),!1)}function fC(){lC(this.getInput(),!0)}function hC(t){const e=wt.domCache.get(this),n=wt.innerParams.get(this);or(e.validationMessage,t),e.validationMessage.className=G["validation-message"],n.customClass&&n.customClass.validationMessage&&tt(e.validationMessage,n.customClass.validationMessage),on(e.validationMessage);const i=this.getInput();i&&(i.setAttribute("aria-invalid","true"),i.setAttribute("aria-describedby",G["validation-message"]),jv(i),tt(i,G.inputerror))}function gC(){const t=wt.domCache.get(this);t.validationMessage&&En(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),vr(e,G.inputerror))}const ko={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},fk=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],hk={allowEnterKey:void 0},gk=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],pC=t=>Object.prototype.hasOwnProperty.call(ko,t),mC=t=>fk.indexOf(t)!==-1,wC=t=>hk[t],pk=t=>{pC(t)||Nn(`Unknown parameter "${t}"`)},mk=t=>{gk.includes(t)&&Nn(`The parameter "${t}" is incompatible with toasts`)},wk=t=>{const e=wC(t);e&&Mv(t,e)},xC=t=>{t.backdrop===!1&&t.allowOutsideClick&&Nn('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","minimal","borderless","bootstrap-4","bootstrap-4-light","bootstrap-4-dark","bootstrap-5","bootstrap-5-light","bootstrap-5-dark","material-ui","material-ui-light","material-ui-dark","embed-iframe","bulma","bulma-light","bulma-dark"].includes(t.theme)&&Nn(`Invalid theme "${t.theme}"`);for(const e in t)pk(e),t.toast&&mk(e),wk(e)};function yC(t){const e=Dn(),n=Qe(),i=wt.innerParams.get(this);if(!n||oi(n,i.hideClass.popup)){Nn("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const o=xk(t),l=Object.assign({},i,o);xC(l),e.dataset.swal2Theme=l.theme,Kv(this,l),wt.innerParams.set(this,l),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const xk=t=>{const e={};return Object.keys(t).forEach(n=>{mC(n)?e[n]=t[n]:Nn(`Invalid parameter to update: ${n}`)}),e};function vC(){const t=wt.domCache.get(this),e=wt.innerParams.get(this);if(!e){CC(this);return}t.popup&&ve.swalCloseEventFinishedCallback&&(ve.swalCloseEventFinishedCallback(),delete ve.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),ve.eventEmitter.emit("didDestroy"),yk(this)}const yk=t=>{CC(t),delete t.params,delete ve.keydownHandler,delete ve.keydownTarget,delete ve.currentInstance},CC=t=>{t.isAwaitingPromise?(bf(wt,t),t.isAwaitingPromise=!0):(bf(Vo,t),bf(wt,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},bf=(t,e)=>{for(const n in t)t[n].delete(e)};var vk=Object.freeze({__proto__:null,_destroy:vC,close:Pi,closeModal:Pi,closePopup:Pi,closeToast:Pi,disableButtons:uC,disableInput:fC,disableLoading:Ru,enableButtons:cC,enableInput:dC,getInput:oC,handleAwaitingPromise:Wl,hideLoading:Ru,rejectPromise:nC,resetValidationMessage:gC,showValidationMessage:hC,update:yC});const Ck=(t,e,n)=>{t.toast?_k(t,e,n):(bk(e),Sk(e),Ak(t,e,n))},_k=(t,e,n)=>{e.popup.onclick=()=>{t&&(Ek(t)||t.timer||t.input)||n(na.close)}},Ek=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let Ou=!1;const bk=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(Ou=!0)}}},Sk=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(n){t.popup.onmouseup=()=>{},(n.target===t.popup||n.target instanceof HTMLElement&&t.popup.contains(n.target))&&(Ou=!0)}}},Ak=(t,e,n)=>{e.container.onclick=i=>{if(Ou){Ou=!1;return}i.target===e.container&&dd(t.allowOutsideClick)&&n(na.backdrop)}},Ik=t=>typeof t=="object"&&t.jquery,Zm=t=>t instanceof Element||Ik(t),Tk=t=>{const e={};return typeof t[0]=="object"&&!Zm(t[0])?Object.assign(e,t[0]):["title","html","icon"].forEach((n,i)=>{const o=t[i];typeof o=="string"||Zm(o)?e[n]=o:o!==void 0&&Us(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof o}`)}),e};function kk(...t){return new this(...t)}function Nk(t){class e extends this{_main(i,o){return super._main(i,Object.assign({},t,o))}}return e}const Rk=()=>ve.timeout&&ve.timeout.getTimerLeft(),_C=()=>{if(ve.timeout)return U6(),ve.timeout.stop()},EC=()=>{if(ve.timeout){const t=ve.timeout.start();return H1(t),t}},Ok=()=>{const t=ve.timeout;return t&&(t.running?_C():EC())},Dk=t=>{if(ve.timeout){const e=ve.timeout.increase(t);return H1(e,!0),e}},Pk=()=>!!(ve.timeout&&ve.timeout.isRunning());let Qm=!1;const Yh={};function Mk(t="data-swal-template"){Yh[t]=this,Qm||(document.body.addEventListener("click",Bk),Qm=!0)}const Bk=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const n in Yh){const i=e.getAttribute(n);if(i){Yh[n].fire({template:i});return}}};class Lk{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,n){const i=this._getHandlersByEventName(e);i.includes(n)||i.push(n)}once(e,n){const i=(...o)=>{this.removeListener(e,i),n.apply(this,o)};this.on(e,i)}emit(e,...n){this._getHandlersByEventName(e).forEach(i=>{try{i.apply(this,n)}catch(o){console.error(o)}})}removeListener(e,n){const i=this._getHandlersByEventName(e),o=i.indexOf(n);o>-1&&i.splice(o,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}}ve.eventEmitter=new Lk;const Fk=(t,e)=>{ve.eventEmitter.on(t,e)},jk=(t,e)=>{ve.eventEmitter.once(t,e)},Uk=(t,e)=>{if(!t){ve.eventEmitter.reset();return}e?ve.eventEmitter.removeListener(t,e):ve.eventEmitter.removeAllListeners(t)};var zk=Object.freeze({__proto__:null,argsToParams:Tk,bindClickHandler:Mk,clickCancel:T5,clickConfirm:qv,clickDeny:I5,enableLoading:Ho,fire:kk,getActions:jl,getCancelButton:ea,getCloseButton:U1,getConfirmButton:Kr,getContainer:Dn,getDenyButton:zs,getFocusableElements:z1,getFooter:Fv,getHtmlContainer:F1,getIcon:Jo,getIconContent:D6,getImage:Lv,getInputLabel:P6,getLoader:ta,getPopup:Qe,getProgressSteps:j1,getTimerLeft:Rk,getTimerProgressBar:hd,getTitle:Bv,getValidationMessage:fd,increaseTimer:Dk,isDeprecatedParameter:wC,isLoading:B6,isTimerRunning:Pk,isUpdatableParameter:mC,isValidParameter:pC,isVisible:A5,mixin:Nk,off:Uk,on:Fk,once:jk,resumeTimer:EC,showLoading:Ho,stopTimer:_C,toggleTimer:Ok});class Wk{constructor(e,n){this.callback=e,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const n=this.running;return n&&this.stop(),this.remaining+=e,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const bC=["swal-title","swal-html","swal-footer"],Vk=t=>{const e=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!e)return{};const n=e.content;return Zk(n),Object.assign(Hk(n),Gk(n),Xk(n),Yk(n),$k(n),Kk(n),qk(n,bC))},Hk=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach(i=>{Os(i,["name","value"]);const o=i.getAttribute("name"),l=i.getAttribute("value");!o||!l||(typeof ko[o]=="boolean"?e[o]=l!=="false":typeof ko[o]=="object"?e[o]=JSON.parse(l):e[o]=l)}),e},Gk=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(i=>{const o=i.getAttribute("name"),l=i.getAttribute("value");!o||!l||(e[o]=new Function(`return ${l}`)())}),e},Xk=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach(i=>{Os(i,["type","color","aria-label"]);const o=i.getAttribute("type");!o||!["confirm","cancel","deny"].includes(o)||(e[`${o}ButtonText`]=i.innerHTML,e[`show${M1(o)}Button`]=!0,i.hasAttribute("color")&&(e[`${o}ButtonColor`]=i.getAttribute("color")),i.hasAttribute("aria-label")&&(e[`${o}ButtonAriaLabel`]=i.getAttribute("aria-label")))}),e},Yk=t=>{const e={},n=t.querySelector("swal-image");return n&&(Os(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt")||void 0)),e},$k=t=>{const e={},n=t.querySelector("swal-icon");return n&&(Os(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e},Kk=t=>{const e={},n=t.querySelector("swal-input");n&&(Os(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));const i=Array.from(t.querySelectorAll("swal-input-option"));return i.length&&(e.inputOptions={},i.forEach(o=>{Os(o,["value"]);const l=o.getAttribute("value");if(!l)return;const f=o.innerHTML;e.inputOptions[l]=f})),e},qk=(t,e)=>{const n={};for(const i in e){const o=e[i],l=t.querySelector(o);l&&(Os(l,[]),n[o.replace(/^swal-/,"")]=l.innerHTML.trim())}return n},Zk=t=>{const e=bC.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(n=>{const i=n.tagName.toLowerCase();e.includes(i)||Nn(`Unrecognized element <${i}>`)})},Os=(t,e)=>{Array.from(t.attributes).forEach(n=>{e.indexOf(n.name)===-1&&Nn([`Unrecognized attribute "${n.name}" on <${t.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},SC=10,Qk=t=>{const e=Dn(),n=Qe();typeof t.willOpen=="function"&&t.willOpen(n),ve.eventEmitter.emit("willOpen",n);const o=window.getComputedStyle(document.body).overflowY;tN(e,n,t),setTimeout(()=>{Jk(e,n)},SC),W1()&&(eN(e,t.scrollbarPadding,o),B5()),!gd()&&!ve.previousActiveElement&&(ve.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(n)),ve.eventEmitter.emit("didOpen",n)},Du=t=>{const e=Qe();if(t.target!==e)return;const n=Dn();e.removeEventListener("animationend",Du),e.removeEventListener("transitionend",Du),n.style.overflowY="auto",vr(n,G["no-transition"])},Jk=(t,e)=>{zv(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",Du),e.addEventListener("transitionend",Du)):t.style.overflowY="auto"},eN=(t,e,n)=>{L5(),e&&n!=="hidden"&&H5(n),setTimeout(()=>{t.scrollTop=0})},tN=(t,e,n)=>{tt(t,n.showClass.backdrop),n.animation?(e.style.setProperty("opacity","0","important"),on(e,"grid"),setTimeout(()=>{tt(e,n.showClass.popup),e.style.removeProperty("opacity")},SC)):on(e,"grid"),tt([document.documentElement,document.body],G.shown),n.heightAuto&&n.backdrop&&!n.toast&&tt([document.documentElement,document.body],G["height-auto"])};var Jm={email:(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function nN(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=Jm.email),t.input==="url"&&(t.inputValidator=Jm.url))}function rN(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(Nn('Target parameter is not valid, defaulting to "body"'),t.target="body")}function iN(t){nN(t),t.showLoaderOnConfirm&&!t.preConfirm&&Nn(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),rN(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),$6(t)}let Hr;var wc=new WeakMap;class zt{constructor(...e){if(S6(this,wc,void 0),typeof window>"u")return;Hr=this;const n=Object.freeze(this.constructor.argsToParams(e));this.params=n,this.isAwaitingPromise=!1,A6(wc,this,this._main(Hr.params))}_main(e,n={}){if(xC(Object.assign({},n,e)),ve.currentInstance){const l=Vo.swalPromiseResolve.get(ve.currentInstance),{isAwaitingPromise:f}=ve.currentInstance;ve.currentInstance._destroy(),f||l({isDismissed:!0}),W1()&&Jv()}ve.currentInstance=Hr;const i=oN(e,n);iN(i),Object.freeze(i),ve.timeout&&(ve.timeout.stop(),delete ve.timeout),clearTimeout(ve.restoreFocusTimeout);const o=aN(Hr);return Kv(Hr,i),wt.innerParams.set(Hr,i),sN(Hr,o,i)}then(e){return Vm(wc,this).then(e)}finally(e){return Vm(wc,this).finally(e)}}const sN=(t,e,n)=>new Promise((i,o)=>{const l=f=>{t.close({isDismissed:!0,dismiss:f,isConfirmed:!1,isDenied:!1})};Vo.swalPromiseResolve.set(t,i),Vo.swalPromiseReject.set(t,o),e.confirmButton.onclick=()=>{ak(t)},e.denyButton.onclick=()=>{lk(t)},e.cancelButton.onclick=()=>{ck(t,l)},e.closeButton.onclick=()=>{l(na.close)},Ck(n,e,l),k5(ve,n,l),Q5(t,n),Qk(n),lN(ve,n,l),cN(e,n),setTimeout(()=>{e.container.scrollTop=0})}),oN=(t,e)=>{const n=Vk(t),i=Object.assign({},ko,e,n,t);return i.showClass=Object.assign({},ko.showClass,i.showClass),i.hideClass=Object.assign({},ko.hideClass,i.hideClass),i.animation===!1&&(i.showClass={backdrop:"swal2-noanimation"},i.hideClass={}),i},aN=t=>{const e={popup:Qe(),container:Dn(),actions:jl(),confirmButton:Kr(),denyButton:zs(),cancelButton:ea(),loader:ta(),closeButton:U1(),validationMessage:fd(),progressSteps:j1()};return wt.domCache.set(t,e),e},lN=(t,e,n)=>{const i=hd();En(i),e.timer&&(t.timeout=new Wk(()=>{n("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(on(i),nr(i,e,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&H1(e.timer)})))},cN=(t,e)=>{if(!e.toast){if(!dd(e.allowEnterKey)){Mv("allowEnterKey"),fN();return}uN(t)||dN(t,e)||Xh(-1,1)}},uN=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const n of e)if(n instanceof HTMLElement&&Xn(n))return n.focus(),!0;return!1},dN=(t,e)=>e.focusDeny&&Xn(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&Xn(t.cancelButton)?(t.cancelButton.focus(),!0):e.focusConfirm&&Xn(t.confirmButton)?(t.confirmButton.focus(),!0):!1,fN=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};zt.prototype.disableButtons=uC;zt.prototype.enableButtons=cC;zt.prototype.getInput=oC;zt.prototype.disableInput=fC;zt.prototype.enableInput=dC;zt.prototype.hideLoading=Ru;zt.prototype.disableLoading=Ru;zt.prototype.showValidationMessage=hC;zt.prototype.resetValidationMessage=gC;zt.prototype.close=Pi;zt.prototype.closePopup=Pi;zt.prototype.closeModal=Pi;zt.prototype.closeToast=Pi;zt.prototype.rejectPromise=nC;zt.prototype.update=yC;zt.prototype._destroy=vC;Object.assign(zt,zk);Object.keys(vk).forEach(t=>{zt[t]=function(...e){return Hr&&Hr[t]?Hr[t](...e):null}});zt.DismissReason=na;zt.version="11.26.3";const qe=zt;qe.default=qe;typeof document<"u"&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.15s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}100%{transform:translate3d(0, 0, 0) scale(1);opacity:1}}@keyframes swal2-hide{0%{transform:translate3d(0, 0, 0) scale(1);opacity:1}100%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const hN=()=>{const[t,e]=Y.useState([]),[n,i]=Y.useState({}),[o,l]=Y.useState({}),[f,p]=Y.useState(!0),[w,m]=Y.useState(!1),[E,v]=Y.useState(!1),[A,R]=Y.useState(!1),[M,B]=Y.useState(!1),[K,O]=Y.useState(!1),[N,k]=Y.useState(null),[U,te]=Y.useState(null),[Z,z]=Y.useState(""),[J,$]=Y.useState(null),[Ae,nt]=Y.useState(""),[pe,Oe]=Y.useState([]),[Te,H]=Y.useState(null),[ct,Ee]=Y.useState(!1),[ae,we]=Y.useState(new Date().toISOString().split("T")[0]),[xe,X]=Y.useState(new Date().toTimeString().slice(0,5)),[oe,Ge]=Y.useState([]),[ue,_t]=Y.useState(null),[ce,bn]=Y.useState(null),[Pe,Mr]=Y.useState({name:"",category:"",price:"",stock:"",minStock:"",useBarcode:!0});Y.useEffect(()=>{Cr()},[]);const Cr=async()=>{try{p(!0);const j=await fn.getAllProducts();e(j);const ge={},Ie={};for(const ke of j)ge[ke.id]=await fn.getUnitsWithBarcodeCount(ke.id),Ie[ke.id]=await fn.getReadyStock(ke.id);i(ge),l(Ie);const Ce=j.filter(ke=>ke.stock<=ke.minStock);Oe(Ce)}catch(j){console.error("Error loading products:",j)}finally{p(!1)}},Lt=j=>{const{name:ge,value:Ie,type:Ce,checked:ke}=j.target;Mr(Xe=>({...Xe,[ge]:Ce==="checkbox"?ke:Ie}))},Ws=async j=>{j.preventDefault();try{const ge={...Pe,price:parseFloat(Pe.price),stock:Pe.useBarcode?0:parseInt(Pe.stock),minStock:parseInt(Pe.minStock)};E&&J?await fn.updateProduct(J.id,ge):await fn.createProduct(ge),m(!1),v(!1),Mr({name:"",category:"",price:"",stock:"",minStock:"",useBarcode:!0}),Cr()}catch(ge){console.error("Error saving product:",ge)}},We=j=>{$(j),Mr({name:j.name,category:j.category,price:j.price.toString(),stock:j.stock.toString(),minStock:j.minStock.toString(),useBarcode:j.useBarcode!==!1}),v(!0)},Zr=async j=>{if((await qe.fire({title:"Hapus Produk?",text:"Apakah Anda yakin ingin menghapus produk ini?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"})).isConfirmed)try{await fn.deleteProduct(j),await qe.fire({title:"Berhasil!",text:"Produk berhasil dihapus.",icon:"success",timer:2e3,showConfirmButton:!1}),Cr()}catch(Ie){console.error("Error deleting product:",Ie),await qe.fire({title:"Error!",text:"Gagal menghapus produk.",icon:"error"})}},ar=async j=>{try{const ge=await fn.getProductByBarcode(j);ge?(H(ge),B(!0)):await qe.fire({title:"Produk Tidak Ditemukan",text:"Barcode tidak terdaftar dalam sistem.",icon:"warning"})}catch(ge){console.error("Error checking stock:",ge),await qe.fire({title:"Error!",text:"Gagal memeriksa stok.",icon:"error"})}R(!1),k(null)},wi=j=>{te(j),z(""),O(!0)},Ht=async j=>{try{if(!U)return;await fn.addBarcodeToProduct(U,j),await qe.fire({title:"Berhasil!",text:"Barcode berhasil di-assign.",icon:"success",timer:2e3,showConfirmButton:!1}),te(null),k(null),R(!1),Cr()}catch(ge){await qe.fire({title:"Error!",text:ge.message||"Gagal assign barcode",icon:"error"}),te(null),k(null),R(!1)}},ot=async()=>{if(!Z.trim()){await qe.fire({title:"Perhatian!",text:"Masukkan barcode terlebih dahulu.",icon:"warning"});return}try{await fn.addBarcodeToProduct(U,Z.trim()),await qe.fire({title:"Berhasil!",text:"Barcode berhasil di-assign.",icon:"success",timer:2e3,showConfirmButton:!1}),O(!1),te(null),z(""),Cr()}catch(j){await qe.fire({title:"Error!",text:j.message||"Gagal assign barcode"})}},Ue=async()=>{try{const j=Ve(He,`stockAuditsByDate/${ae}`),ge=await en(j);let Ie=[];if(ge.exists()){const Xe=(ge.val()||{}).results||{};Ie=t.map(Gt=>{const Ke=Xe[Gt.id],re=!!Ke;return{...Gt,physicalStock:(Ke==null?void 0:Ke.physicalStock)??null,databaseStock:Gt.stock,readyStock:o[Gt.id]||0,status:re?"completed":"pending"}})}else await Zn(Ve(He,`stockAuditsByDate/${ae}/meta`),{date:ae,createdAt:Date.now()}),Ie=t.map(ke=>({...ke,physicalStock:null,databaseStock:ke.stock,readyStock:o[ke.id]||0,status:"pending"}));Ge(Ie);const Ce=Ie.find(ke=>ke.status==="pending")||null;_t(Ce),bn(Ce?Ce.useBarcode!==!1?"barcode":"manual":null)}catch(j){await qe.fire({title:"Error!",text:j.message||"Gagal memulai audit.",icon:"error"})}},Vs=async j=>{try{const ge=await fn.getProductByBarcode(j);if(!(ge&&ue&&ge.id===ue.id)){await qe.fire({title:"Barcode Salah",text:"Barcode tidak sesuai produk yang diaudit.",icon:"warning"}),R(!1);return}const Ie=Ve(He,`productUnits/${ge.id}`),Ce=await en(Ie);if(!Ce.exists()){await qe.fire({title:"Tidak Ada Unit",text:"Tidak ada unit untuk produk ini.",icon:"warning"}),R(!1);return}const ke=Ce.val(),Xe=Object.entries(ke).find(([an,Gs])=>Gs.barcode===j&&Gs.status==="in_stock");if(!Xe){await qe.fire({title:"Unit Tidak Ditemukan",text:"Unit barcode tidak tersedia/in-stock.",icon:"warning"}),R(!1);return}const[Gt]=Xe,Ke=oe.find(an=>an.id===ue.id),re=Array.isArray(Ke==null?void 0:Ke.scannedUnits)?Ke.scannedUnits.slice():[];if(re.includes(Gt)){await qe.fire({title:"Duplikat Scan",text:"Unit ini sudah discan untuk produk ini.",icon:"info"}),R(!1);return}re.push(Gt);const Et=re.length,it={productId:ge.id,name:ge.name,useBarcode:ge.useBarcode!==!1,databaseStock:ue.databaseStock,readyStock:ue.readyStock,physicalStock:Et,scannedUnits:re,status:"pending",updatedAt:Date.now()};await Zn(Ve(He,`stockAuditsByDate/${ae}/results/${ge.id}`),it);const bt=oe.map(an=>an.id===ue.id?{...an,physicalStock:Et,scannedUnits:re,status:"pending"}:an);Ge(bt),_t(an=>an&&an.id===ge.id?{...an,physicalStock:Et,scannedUnits:re}:an),await qe.fire({title:"Tersimpan",text:`Ter-scan: ${Et} unit`,icon:"success",timer:1200,showConfirmButton:!1})}catch(ge){console.error("Error scanning barcode:",ge),await qe.fire({title:"Error!",text:"Gagal memindai barcode.",icon:"error"})}R(!1)},he=async(j,ge)=>{try{const Ie=oe.find(Gt=>Gt.id===j);if(!Ie)return;const Ce={productId:j,name:Ie.name,useBarcode:Ie.useBarcode!==!1,databaseStock:Ie.databaseStock,readyStock:Ie.readyStock,physicalStock:parseInt(ge),status:"completed",updatedAt:Date.now()};await Zn(Ve(He,`stockAuditsByDate/${ae}/results/${j}`),Ce);const ke=oe.map(Gt=>Gt.id===j?{...Gt,physicalStock:parseInt(ge),status:"completed"}:Gt);Ge(ke);const Xe=ke.find(Gt=>Gt.status==="pending");Xe?(_t(Xe),bn(Xe.useBarcode!==!1?"barcode":"manual")):(_t(null),bn(null))}catch(Ie){await qe.fire({title:"Error!",text:Ie.message||"Gagal menyimpan hasil item.",icon:"error"})}},Hs=async()=>{try{if(!ue)return;const j=oe.find(Xe=>Xe.id===ue.id),ge=Array.isArray(j==null?void 0:j.scannedUnits)?j.scannedUnits.length:(j==null?void 0:j.physicalStock)??0,Ie={productId:ue.id,name:ue.name,useBarcode:ue.useBarcode!==!1,databaseStock:ue.databaseStock,readyStock:ue.readyStock,physicalStock:ge,scannedUnits:Array.isArray(j==null?void 0:j.scannedUnits)?j.scannedUnits:[],status:"completed",updatedAt:Date.now()};await Zn(Ve(He,`stockAuditsByDate/${ae}/results/${ue.id}`),Ie);const Ce=oe.map(Xe=>Xe.id===ue.id?{...Xe,physicalStock:ge,status:"completed"}:Xe);Ge(Ce);const ke=Ce.find(Xe=>Xe.status==="pending");ke?(_t(ke),bn(ke.useBarcode!==!1?"barcode":"manual")):(_t(null),bn(null))}catch(j){await qe.fire({title:"Error!",text:j.message||"Gagal menyelesaikan item.",icon:"error"})}},ra=t.filter(j=>{if(!j||!j.name||!j.category)return!1;const ge=Ae.toLowerCase(),Ie=j.name.toLowerCase().includes(ge),Ce=j.category.toLowerCase().includes(ge);return Ie||Ce});if(f)return b.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"16rem"},children:b.jsx("div",{className:"spinner"})});const _r=async()=>{try{const j=Ve(He,"stockAudits"),ge=xo(j),Ie={id:ge.key,date:ae,time:xe,createdAt:Date.now(),results:oe.map(Ce=>({productId:Ce.id,name:Ce.name,useBarcode:Ce.useBarcode!==!1,databaseStock:Ce.databaseStock,readyStock:Ce.readyStock,physicalStock:Ce.physicalStock,status:Ce.status}))};await Zn(ge,Ie),await qe.fire({title:"Tersimpan!",text:"Laporan audit berhasil disimpan.",icon:"success",timer:2e3,showConfirmButton:!1})}catch(j){await qe.fire({title:"Error!",text:j.message||"Gagal menyimpan laporan audit.",icon:"error"})}},ia=()=>{try{const j=`Laporan Stock Audit - ${ae} ${xe}`,ge=oe.map(ke=>{const Xe=ke.physicalStock!==null?ke.physicalStock-ke.databaseStock:null,Gt=ke.status==="completed"?Xe===0?"Balance":`${Xe>0?"+":""}${Xe}`:"Pending",Ke=ke.status==="completed"?Xe===0||Xe>0?"#10b981":"#ef4444":"#f59e0b",re=ke.status==="completed"?Xe===0||Xe>0?"#10b98120":"#ef444420":"#f59e0b20";return`
          <tr>
            <td>${ke.name||"-"}</td>
            <td style="text-align:center;">${ke.useBarcode!==!1?"Barcode":"Manual"}</td>
            <td style="text-align:right;">${ke.databaseStock??"-"}</td>
            <td style="text-align:right;">${ke.physicalStock??"-"}</td>
            <td style="text-align:center;">
              <span style="background-color: ${re}; color: ${Ke}; padding: 4px 8px; border-radius: 4px; font-weight: 500;">
                ${Gt}
              </span>
            </td>
          </tr>
        `}).join(""),Ie=`
        <html>
          <head>
            <meta charset="utf-8" />
            <title>${j}</title>
            <style>
              body { font-family: Arial, Helvetica, sans-serif; color: #111827; padding: 24px; }
              h1 { font-size: 18px; margin: 0 0 4px 0; }
              p { margin: 0 0 16px 0; color: #6b7280; }
              table { width: 100%; border-collapse: collapse; }
              th, td { border: 1px solid #e5e7eb; padding: 8px; font-size: 12px; }
              th { background: #f3f4f6; text-align: left; }
              tfoot td { font-weight: 600; }
              .meta { margin-bottom: 16px; }
              @media print {
                @page { size: A4; margin: 16mm; }
              }
            </style>
          </head>
          <body>
            <h1>${j}</h1>
            <p class="meta">Total item selesai: ${oe.filter(ke=>ke.status==="completed").length}/${oe.length}</p>
            <table>
              <thead>
                <tr>
                  <th>Produk</th>
                  <th style="text-align:center;">Mode</th>
                  <th style="text-align:right;">Database Stock</th>
                  <th style="text-align:right;">Fisik Stock</th>
                  <th style="text-align:center;">Status</th>
                </tr>
              </thead>
              <tbody>
                ${ge}
              </tbody>
            </table>
          </body>
        </html>
      `,Ce=window.open("","_blank","width=1024,height=768");if(!Ce)return;Ce.document.open(),Ce.document.write(Ie),Ce.document.close(),Ce.focus(),setTimeout(()=>{Ce.print()},300)}catch(j){qe.fire({title:"Error!",text:j.message||"Gagal mengekspor PDF.",icon:"error"})}};return b.jsxs("div",{style:{padding:"1.5rem"},children:[b.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"}}),pe.length>0&&b.jsxs("div",{style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"0.5rem",padding:"1rem",marginBottom:"1.5rem",display:"flex",alignItems:"center"},children:[b.jsx(Ch,{size:20,style:{color:"#dc2626",marginRight:"0.5rem"}}),b.jsxs("div",{children:[b.jsx("h3",{style:{fontWeight:"500",color:"#991b1b",margin:0,fontSize:"0.875rem"},children:"Stok Rendah!"}),b.jsxs("p",{style:{fontSize:"0.75rem",color:"#dc2626",marginTop:"0.25rem",margin:0},children:[pe.length," produk memiliki stok di bawah minimum"]})]})]}),b.jsxs("div",{style:{background:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",overflow:"hidden"},children:[b.jsxs("div",{style:{backgroundColor:"#f9fafb",padding:"1rem 1.5rem",borderBottom:"1px solid #e5e7eb",display:"flex",flexDirection:window.innerWidth<=768?"column":"row",alignItems:window.innerWidth<=768?"stretch":"center",justifyContent:"space-between",gap:"1rem"},children:[b.jsxs("div",{style:{position:"relative",flex:window.innerWidth<=768?"none":"1",maxWidth:window.innerWidth<=768?"none":"300px"},children:[b.jsx(Tx,{size:20,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),b.jsx("input",{type:"text",placeholder:"Cari produk...",value:Ae,onChange:j=>nt(j.target.value),style:{width:"100%",paddingLeft:"2.5rem",paddingRight:"1rem",paddingTop:"0.5rem",paddingBottom:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.5rem",fontSize:"0.875rem"}})]}),b.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",width:window.innerWidth<=768?"100%":"auto"},children:[b.jsxs("button",{onClick:()=>Ee(!0),style:{backgroundColor:"#10b981",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",flex:window.innerWidth<=768?"1":"none",minWidth:window.innerWidth<=768?"0":"auto"},children:[b.jsx(Ix,{size:20}),"Stock Audit"]}),b.jsxs("button",{onClick:()=>m(!0),style:{backgroundColor:"transparent",color:"#111827",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",flex:window.innerWidth<=768?"1":"none",minWidth:window.innerWidth<=768?"0":"auto"},children:[b.jsx(_h,{size:20}),"Produk"]})]})]}),b.jsx("div",{style:{overflowX:"auto",WebkitOverflowScrolling:"touch",display:window.innerWidth<=768?"none":"block"},children:b.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:"600px"},children:[b.jsx("thead",{style:{backgroundColor:"#f9fafb"},children:b.jsxs("tr",{children:[b.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",borderBottom:"1px solid #e5e7eb"},children:"Produk"}),b.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",borderBottom:"1px solid #e5e7eb"},children:"Ready Stock"}),b.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",borderBottom:"1px solid #e5e7eb"},children:"Kategori"}),b.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",borderBottom:"1px solid #e5e7eb"},children:"Stok"}),b.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",borderBottom:"1px solid #e5e7eb"},children:"Harga"}),b.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",borderBottom:"1px solid #e5e7eb"},children:"Aksi"})]})}),b.jsx("tbody",{children:ra.map(j=>b.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[b.jsx("td",{style:{padding:"1rem 1.5rem"},children:b.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[b.jsx(ru,{size:20,style:{color:"#9ca3af",marginRight:"0.75rem"}}),b.jsx("div",{children:b.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827"},children:j.name})})]})}),b.jsxs("td",{style:{padding:"1rem 1.5rem",fontSize:"0.875rem",color:"#111827"},children:[b.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[b.jsx("span",{style:{fontWeight:"600",color:(j.useBarcode===!1?j.stock:o[j.id]||0)>0?"#059669":"#dc2626"},children:j.useBarcode===!1?j.stock:o[j.id]||0}),b.jsxs("span",{style:{color:"#6b7280",marginLeft:"0.25rem"},children:["/ ",j.stock," unit"]})]}),b.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:j.useBarcode!==!1?"Dengan barcode":"Tanpa barcode"})]}),b.jsx("td",{style:{padding:"1rem 1.5rem",fontSize:"0.875rem",color:"#111827"},children:j.category}),b.jsxs("td",{style:{padding:"1rem 1.5rem"},children:[b.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[b.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:j.stock<=j.minStock?"#dc2626":"#111827"},children:j.stock}),b.jsxs("span",{style:{fontSize:"0.875rem",color:"#6b7280",marginLeft:"0.25rem"},children:["/ ",j.minStock," min"]})]}),b.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:j.useBarcode!==!1?"Dihitung dari unit":"Manual"})]}),b.jsxs("td",{style:{padding:"1rem 1.5rem",fontSize:"0.875rem",color:"#111827"},children:["Rp ",j.price.toLocaleString("id-ID")]}),b.jsx("td",{style:{padding:"1rem 1.5rem"},children:b.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[b.jsx("button",{onClick:()=>We(j),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:"0.25rem"},children:b.jsx(Rp,{size:16})}),j.useBarcode!==!1&&b.jsx("button",{onClick:()=>wi(j.id),style:{color:"#10b981",background:"none",border:"1px dashed #10b981",borderRadius:"0.375rem",cursor:"pointer",padding:"0.25rem 0.5rem",fontSize:"0.75rem"},title:"Assign barcode via scan",children:b.jsx(Na,{size:14})}),b.jsx("button",{onClick:()=>Zr(j.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem"},children:b.jsx(Eh,{size:16})})]})})]},j.id))})]})}),b.jsx("div",{style:{display:window.innerWidth<=768?"block":"none"},children:ra.map(j=>b.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[b.jsxs("div",{style:{flex:1},children:[b.jsx("div",{style:{display:"flex",alignItems:"center",marginBottom:"0.5rem"},children:b.jsxs("div",{children:[b.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827"},children:j.name}),b.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:j.category})]})}),b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[b.jsxs("div",{children:[b.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:"600",color:(j.useBarcode===!1?j.stock:o[j.id]||0)>0?"#059669":"#dc2626"},children:["Ready ",j.useBarcode===!1?j.stock:o[j.id]||0]}),b.jsxs("span",{style:{fontSize:"0.75rem",color:"#6b7280",marginLeft:"0.25rem"},children:["/ ",j.stock]})]}),b.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["Rp ",j.price.toLocaleString("id-ID")]})]}),b.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:j.useBarcode!==!1?"Dengan barcode":"Tanpa barcode"})]}),b.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginLeft:"1rem"},children:[b.jsx("button",{onClick:()=>We(j),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",fontSize:"0.75rem"},title:"Edit",children:b.jsx(Rp,{size:14})}),j.useBarcode!==!1&&b.jsx("button",{onClick:()=>wi(j.id),style:{color:"#10b981",background:"none",border:"1px dashed #10b981",borderRadius:"0.25rem",cursor:"pointer",padding:"0.25rem",fontSize:"0.75rem"},title:"Assign Barcode",children:b.jsx(Na,{size:14})}),b.jsx("button",{onClick:()=>Zr(j.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",fontSize:"0.75rem"},title:"Delete",children:b.jsx(Eh,{size:14})})]})]},j.id))})]}),(w||E)&&b.jsx("div",{className:"modal-overlay",children:b.jsxs("div",{className:"modal",children:[b.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",margin:0},children:w?"Tambah Produk":"Edit Produk"}),b.jsxs("form",{onSubmit:Ws,children:[b.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[b.jsxs("div",{children:[b.jsx("label",{className:"form-label",children:"Nama Produk"}),b.jsx("input",{type:"text",name:"name",value:Pe.name,onChange:Lt,required:!0,className:"form-input"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"form-label",children:"Kategori"}),b.jsxs("select",{name:"category",value:Pe.category,onChange:Lt,required:!0,className:"form-select",children:[b.jsx("option",{value:"",children:"Pilih Kategori"}),b.jsx("option",{value:"IQOS Device",children:"IQOS Device"}),b.jsx("option",{value:"HEETS",children:"HEETS"}),b.jsx("option",{value:"Aksesoris",children:"Aksesoris"}),b.jsx("option",{value:"Lainnya",children:"Lainnya"})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"form-label",children:"Harga"}),b.jsx("input",{type:"number",name:"price",value:Pe.price,onChange:Lt,required:!0,min:"0",step:"0.01",className:"form-input",placeholder:"Harga jual produk"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"form-label",children:"Gunakan Barcode"}),b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[b.jsx("input",{type:"checkbox",name:"useBarcode",checked:Pe.useBarcode,onChange:Lt,style:{width:"1rem",height:"1rem"}}),b.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Centang jika produk menggunakan barcode untuk tracking unit"})]}),Pe.useBarcode&&b.jsxs("div",{style:{marginTop:"0.5rem",padding:"0.75rem",backgroundColor:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:"0.375rem",fontSize:"0.75rem",color:"#0369a1"},children:[b.jsx("strong",{children:"Info:"}),' Stok akan dihitung otomatis dari jumlah unit yang memiliki barcode. Field "Stok Awal" akan di-disable.']}),!Pe.useBarcode&&b.jsxs("div",{style:{marginTop:"0.5rem",padding:"0.75rem",backgroundColor:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"0.375rem",fontSize:"0.75rem",color:"#92400e"},children:[b.jsx("strong",{children:"Info:"}),' Produk tanpa barcode menggunakan input stok manual. Field "Stok Awal" akan di-enable untuk input manual.']})]}),b.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[b.jsxs("div",{children:[b.jsx("label",{className:"form-label",children:"Stok Awal"}),b.jsx("input",{type:"number",name:"stock",value:Pe.stock,onChange:Lt,required:!Pe.useBarcode,disabled:Pe.useBarcode,min:"0",className:"form-input",placeholder:Pe.useBarcode?"Dihitung otomatis":"Jumlah stok awal",style:{opacity:Pe.useBarcode?.6:1,backgroundColor:Pe.useBarcode?"#f9fafb":"white",cursor:Pe.useBarcode?"not-allowed":"text"}})]}),b.jsxs("div",{children:[b.jsx("label",{className:"form-label",children:"Stok Minimum"}),b.jsx("input",{type:"number",name:"minStock",value:Pe.minStock,onChange:Lt,required:!0,min:"0",className:"form-input",placeholder:"Minimum stock untuk alert"})]})]})]}),b.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1.5rem"},children:[b.jsx("button",{type:"button",onClick:()=>{m(!1),v(!1),Mr({name:"",category:"",price:"",stock:"",minStock:"",useBarcode:!0})},className:"btn btn-secondary",style:{flex:1},children:"Batal"}),b.jsx("button",{type:"submit",className:"btn btn-primary",style:{flex:1},children:w?"Tambah":"Update"})]})]})]})}),K&&U&&b.jsx("div",{className:"modal-overlay",children:b.jsxs("div",{className:"modal",children:[b.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",margin:0},children:"Assign Barcode ke Unit"}),b.jsxs("div",{style:{marginBottom:"1rem"},children:[b.jsx("label",{className:"form-label",children:"Input Barcode Manual"}),b.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[b.jsx("input",{type:"text",value:Z,onChange:j=>z(j.target.value),placeholder:"Masukkan barcode...",className:"form-input",style:{flex:1}}),b.jsx("button",{onClick:ot,className:"btn btn-primary",style:{padding:"0.5rem 1rem"},children:"Assign"})]})]}),b.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem",padding:"1rem",backgroundColor:"#f8fafc",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[b.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0 0 0.5rem 0"},children:"Atau scan barcode dengan kamera"}),b.jsxs("button",{onClick:()=>{O(!1),k("assign"),R(!0)},style:{backgroundColor:"#10b981",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",margin:"0 auto"},children:[b.jsx(Na,{size:16}),"Scan Barcode"]})]}),b.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:b.jsx("button",{onClick:()=>{O(!1),te(null),z("")},className:"btn btn-secondary",style:{flex:1},children:"Tutup"})})]})}),M&&Te&&b.jsx("div",{className:"modal-overlay",children:b.jsxs("div",{className:"modal",children:[b.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",margin:0},children:"Informasi Stok Produk"}),b.jsxs("div",{style:{backgroundColor:Te.stock<=Te.minStock?"#fef2f2":"#f0fdf4",border:`1px solid ${Te.stock<=Te.minStock?"#fecaca":"#bbf7d0"}`,borderRadius:"0.5rem",padding:"1rem",marginBottom:"1rem"},children:[b.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"0.5rem"},children:[b.jsx(ru,{size:20,style:{color:Te.stock<=Te.minStock?"#dc2626":"#059669",marginRight:"0.5rem"}}),b.jsx("h4",{style:{fontSize:"1rem",fontWeight:"600",color:Te.stock<=Te.minStock?"#991b1b":"#065f46",margin:0},children:Te.name})]}),b.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[b.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Unit ID:"}),b.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827"},children:Te.matchedUnitId||"-"})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[b.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Kategori:"}),b.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827"},children:Te.category})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[b.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Stok Saat Ini:"}),b.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:Te.stock<=Te.minStock?"#dc2626":"#059669"},children:[Te.stock," unit"]})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[b.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Stok Minimum:"}),b.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827"},children:[Te.minStock," unit"]})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[b.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Harga:"}),b.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827"},children:["Rp ",Te.price.toLocaleString("id-ID")]})]})]}),Te.stock<=Te.minStock&&b.jsx("div",{style:{marginTop:"0.75rem",padding:"0.5rem",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"0.25rem"},children:b.jsxs("p",{style:{fontSize:"0.75rem",color:"#991b1b",margin:0,display:"flex",alignItems:"center"},children:[b.jsx(Ch,{size:14,style:{marginRight:"0.25rem"}}),"Stok rendah! Segera lakukan restocking."]})})]}),b.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[b.jsx("button",{onClick:()=>{B(!1),H(null)},className:"btn btn-secondary",style:{flex:1},children:"Tutup"}),b.jsx("button",{onClick:()=>{B(!1),H(null),R(!0)},className:"btn btn-primary",style:{flex:1},children:"Scan Lagi"})]})]})}),ct&&b.jsx("div",{className:"modal-overlay",children:b.jsxs("div",{className:"modal",style:{maxWidth:"600px",maxHeight:"80vh",overflow:"auto"},children:[b.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",margin:0},children:"Stock Audit Report"}),b.jsxs("div",{className:"audit-inputs",style:{display:"flex",gap:"1rem",marginBottom:"1.5rem"},children:[b.jsxs("div",{style:{flex:1},children:[b.jsx("label",{className:"form-label",children:"Tanggal"}),b.jsx("input",{type:"date",value:ae,onChange:j=>we(j.target.value),className:"form-input",style:{fontSize:"0.875rem",padding:"0.5rem"}})]}),b.jsxs("div",{style:{flex:1},children:[b.jsx("label",{className:"form-label",children:"Waktu"}),b.jsx("input",{type:"time",value:xe,onChange:j=>X(j.target.value),className:"form-input",style:{fontSize:"0.875rem",padding:"0.5rem"}})]})]}),oe.length===0&&b.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[b.jsx("button",{onClick:()=>Ee(!1),className:"btn btn-secondary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:"Tutup"}),b.jsx("button",{onClick:Ue,className:"btn btn-primary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:"Mulai Stock Audit"})]}),ue&&b.jsxs("div",{style:{backgroundColor:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"0.5rem",padding:"1rem",marginBottom:"1.5rem"},children:[b.jsx("h4",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"0.5rem",margin:0},children:ue.name}),b.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.5rem",margin:0},children:["Stock : ",ue.databaseStock]}),ce==="manual"?b.jsx("div",{children:b.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[b.jsx("input",{type:"number",min:"0",placeholder:"Jumlah stock fisik",className:"form-input",style:{flex:1},onKeyPress:j=>{if(j.key==="Enter"){const ge=j.target.value;ge&&(he(ue.id,ge),j.target.value="")}}}),b.jsx("button",{onClick:j=>{const ge=j.target.previousElementSibling;ge.value&&(he(ue.id,ge.value),ge.value="")},className:"btn btn-primary",children:"Submit"})]})}):b.jsxs("div",{children:[b.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.5rem",margin:0},children:"Scan barcode untuk menghitung stock fisik"}),b.jsxs("button",{onClick:()=>R(!0),className:"btn btn-primary",style:{width:"100%"},children:[b.jsx(Na,{size:20,style:{marginRight:"0.5rem"}}),"Scan Barcode"]}),b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"0.5rem",fontSize:"0.75rem",color:"#6b7280"},children:[b.jsxs("span",{children:["Ter-scan: ",Array.isArray(ue.scannedUnits)?ue.scannedUnits.length:ue.physicalStock??0," unit"]}),b.jsxs("span",{children:["Var: ",(()=>{const ge=(Array.isArray(ue.scannedUnits)?ue.scannedUnits.length:ue.physicalStock??0)-(ue.databaseStock??0);return`${ge>0?"+":""}${ge}`})()]})]}),b.jsx("button",{onClick:Hs,className:"btn btn-secondary",style:{width:"100%",marginTop:"0.5rem"},children:"Selesaikan Item"})]})]}),oe.length>0&&b.jsxs("div",{children:[b.jsxs("h4",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem",margin:0},children:["Hasil Audit (",oe.filter(j=>j.status==="completed").length,"/",oe.length,")"]}),b.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:oe.map(j=>{const ge=j.physicalStock!==null?j.physicalStock-j.databaseStock:null,Ie=j.physicalStock!==null?j.physicalStock-j.readyStock:null,Ce=ge!==null&&ge!==0,ke=Ie!==null&&Ie!==0,Xe=ge!==null&&ge<0||Ie!==null&&Ie<0;return b.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.75rem",marginBottom:"0.5rem",backgroundColor:j.status==="completed"?Xe?"#fef2f2":"#f0fdf4":"#fefce8",borderLeft:Ce||ke?"4px solid #ef4444":"4px solid #10b981"},children:b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[b.jsxs("div",{children:[b.jsx("h5",{style:{fontSize:"0.875rem",fontWeight:"500",margin:0},children:j.name}),b.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",margin:0},children:j.useBarcode!==!1?"Barcode":"Manual"})]}),b.jsxs("div",{style:{textAlign:"right"},children:[b.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["Stock : ",j.databaseStock]}),j.status==="completed"?b.jsxs("div",{children:[b.jsxs("div",{style:{fontSize:"0.75rem",fontWeight:"500",color:"#059669"},children:["Fisik: ",j.physicalStock]}),(Ce||ke)&&b.jsx("div",{style:{fontSize:"0.7rem",marginTop:"0.25rem"},children:ke&&b.jsxs("span",{style:{color:Ie>0?"#059669":"#ef4444",fontWeight:"500"},children:[Ie>0?"+":"",Ie]})})]}):b.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"500",color:"#f59e0b"},children:"Pending"})]})]})},j.id)})})]}),oe.length>0&&b.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[b.jsx("button",{onClick:()=>{Ee(!1),Ge([]),_t(null),bn(null)},className:"btn btn-secondary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:"Tutup"}),b.jsx("button",{onClick:ia,className:"btn btn-secondary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:"Export PDF"}),b.jsx("button",{onClick:async()=>{await Zn(Ve(He,`stockAuditsByDate/${ae}/meta/`),{date:ae,updatedAt:Date.now()}),await _r()},className:"btn btn-primary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:"Simpan Laporan"})]})]})}),b.jsx(Rv,{isOpen:A,onScan:N==="assign"?Ht:N==="check"?ar:Vs,onClose:()=>{R(!1),k(null),te(null)}})]})},gN=()=>{const[t,e]=Y.useState([]),[n,i]=Y.useState({}),[o,l]=Y.useState([]),[f,p]=Y.useState(!0),[w,m]=Y.useState(!1),[E,v]=Y.useState(null),[A,R]=Y.useState(null),[M,B]=Y.useState(""),[K,O]=Y.useState("all"),[N,k]=Y.useState({name:"",phone:""}),[U,te]=Y.useState("cash"),[Z,z]=Y.useState(!1),[J,$]=Y.useState(null);Y.useEffect(()=>{Ae()},[]);const Ae=async()=>{try{p(!0);const X=await fn.getAllProducts(),oe={};for(const ue of X)oe[ue.id]=await fn.getReadyStock(ue.id);i(oe);const Ge=X.filter(ue=>oe[ue.id]>0);e(Ge)}catch(X){console.error("Error loading products:",X)}finally{p(!1)}},nt=async X=>{try{const oe=await fn.getProductByBarcode(X);oe?E==="add"?pe(oe):E==="increase"&&A?Te(A):pe(oe):await qe.fire({title:"Produk Tidak Ditemukan",text:"Barcode tidak terdaftar dalam sistem.",icon:"warning"})}catch(oe){console.error("Error scanning barcode:",oe),await qe.fire({title:"Error!",text:"Gagal memindai barcode.",icon:"error"})}m(!1),v(null),R(null)},pe=X=>{if(o.find(Ge=>Ge.productId===X.id))Te(X.id);else{if((n[X.id]||0)<=0){qe.fire({title:"Stok Habis",text:"Stok siap jual untuk produk ini habis.",icon:"warning"});return}l([...o,{productId:X.id,productName:X.name,quantity:1,price:X.price,total:X.price}])}},Oe=X=>{l(o.filter(oe=>oe.productId!==X))},Te=X=>{if(!t.find(_t=>_t.id===X))return;const Ge=n[X]||0,ue=o.find(_t=>_t.productId===X);if(ue){if(ue.quantity>=Ge){qe.fire({title:"Stok Tidak Cukup",text:`Maksimal quantity: ${Ge}`,icon:"warning"});return}const _t=ue.quantity+1;l(o.map(ce=>ce.productId===X?{...ce,quantity:_t,total:_t*ce.price}:ce))}},H=(X,oe)=>{if(oe<=0){Oe(X);return}const Ge=n[X]||0;if(oe>Ge){qe.fire({title:"Stok Tidak Cukup",text:`Maksimal quantity: ${Ge}`,icon:"warning"});return}l(o.map(ue=>ue.productId===X?{...ue,quantity:oe,total:oe*ue.price}:ue))},ct=()=>o.reduce((X,oe)=>X+oe.total,0),Ee=X=>{X.useBarcode!==!1?(v("add"),R(X.id),m(!0)):pe(X)},ae=X=>{const oe=t.find(Ge=>Ge.id===X);oe&&oe.useBarcode!==!1?(v("increase"),R(X),m(!0)):Te(X)},we=async()=>{if(o.length===0){await qe.fire({title:"Keranjang Kosong",text:"Tambahkan produk ke keranjang terlebih dahulu.",icon:"warning"});return}try{const X={items:o,totalAmount:ct(),customerName:N.name,customerPhone:N.phone,paymentMethod:U},oe=await Iv.createSale(X);$(oe),z(!0),l([]),k({name:"",phone:""}),te("cash"),Ae()}catch(X){console.error("Error creating sale:",X),await qe.fire({title:"Error!",text:"Gagal melakukan penjualan.",icon:"error"})}},xe=t.filter(X=>{if(!X||!X.name||!X.category)return!1;const oe=M.toLowerCase(),Ge=X.name.toLowerCase().includes(oe),ue=X.category.toLowerCase().includes(oe),_t=Ge||ue;let ce=!0;return K==="barcode"?ce=X.useBarcode!==!1:K==="manual"&&(ce=X.useBarcode===!1),_t&&ce});return f?b.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"16rem"},children:b.jsx("div",{className:"spinner"})}):b.jsxs("div",{style:{padding:"1.5rem"},children:[b.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"2fr 1fr",gap:"1rem"},children:[b.jsx("div",{children:b.jsxs("div",{style:{background:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",padding:"1.5rem"},children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[b.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",margin:0},children:"Daftar Produk"}),b.jsxs("button",{onClick:()=>m(!0),style:{backgroundColor:"#10b981",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:[b.jsx(Na,{size:20}),"Scan Barcode"]})]}),b.jsxs("div",{style:{marginBottom:"1rem"},children:[b.jsxs("div",{style:{position:"relative",marginBottom:"0.75rem"},children:[b.jsx(Tx,{size:20,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),b.jsx("input",{type:"text",placeholder:"Cari produk...",value:M,onChange:X=>B(X.target.value),style:{width:"100%",paddingLeft:"2.5rem",paddingRight:"1rem",paddingTop:"0.5rem",paddingBottom:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.5rem",fontSize:"0.875rem"}})]}),b.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[b.jsx("button",{onClick:()=>O("all"),style:{backgroundColor:K==="all"?"#3b82f6":"#f3f4f6",color:K==="all"?"white":"#374151",padding:"0.375rem 0.75rem",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:"500"},children:"Semua"}),b.jsx("button",{onClick:()=>O("barcode"),style:{backgroundColor:K==="barcode"?"#3b82f6":"#f3f4f6",color:K==="barcode"?"white":"#374151",padding:"0.375rem 0.75rem",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:"500"},children:"Dengan Barcode"}),b.jsx("button",{onClick:()=>O("manual"),style:{backgroundColor:K==="manual"?"#3b82f6":"#f3f4f6",color:K==="manual"?"white":"#374151",padding:"0.375rem 0.75rem",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:"500"},children:"Manual"})]})]}),b.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",maxHeight:window.innerWidth<=768?"20rem":"24rem",overflowY:"auto"},children:xe.map(X=>b.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"1rem",transition:"box-shadow 0.2s"},children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[b.jsx("h3",{style:{fontWeight:"500",color:"#111827",margin:0,fontSize:"0.875rem"},children:X.name}),b.jsx("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:X.category})]}),b.jsxs("div",{style:{marginBottom:"0.5rem"},children:[b.jsxs("p",{style:{fontSize:"0.75rem",color:"#6b7280",margin:0},children:["Barcode: ",X.useBarcode!==!1?"Per unit":X.barcode||"-"]}),b.jsx("span",{style:{fontSize:"0.625rem",padding:"0.125rem 0.375rem",borderRadius:"0.25rem",backgroundColor:X.useBarcode!==!1?"#dbeafe":"#f3f4f6",color:X.useBarcode!==!1?"#1e40af":"#6b7280",fontWeight:"500"},children:X.useBarcode!==!1?"Dengan Barcode":"Manual"})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[b.jsxs("span",{style:{fontWeight:"600",color:"#2563eb",fontSize:"0.875rem"},children:["Rp ",X.price.toLocaleString("id-ID")]}),b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[b.jsxs("span",{style:{fontSize:"0.75rem",color:(n[X.id]||0)>0?"#059669":"#dc2626"},children:["Ready: ",n[X.id]||0]}),b.jsx("button",{onClick:()=>Ee(X),disabled:(n[X.id]||0)<=0,style:{backgroundColor:(n[X.id]||0)<=0?"#d1d5db":"#3b82f6",color:"white",padding:"0.25rem",borderRadius:"0.25rem",border:"none",cursor:(n[X.id]||0)<=0?"not-allowed":"pointer",fontSize:"0.75rem"},title:(n[X.id]||0)<=0?"Stok habis":X.useBarcode!==!1?"Scan barcode untuk menambah":"Tambah ke keranjang",children:b.jsx(_h,{size:16})})]})]})]},X.id))})]})}),b.jsx("div",{children:b.jsxs("div",{style:{background:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",padding:"1.5rem"},children:[b.jsxs("h2",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",margin:0,display:"flex",alignItems:"center"},children:[b.jsx(H0,{size:20,style:{marginRight:"0.5rem"}}),"Keranjang"]}),b.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1rem",maxHeight:"16rem",overflowY:"auto"},children:o.map(X=>b.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.75rem"},children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[b.jsx("h4",{style:{fontWeight:"500",fontSize:"0.75rem",color:"#111827",margin:0},children:X.productName}),b.jsx("button",{onClick:()=>Oe(X.productId),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem"},children:b.jsx(Eh,{size:14})})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[b.jsx("button",{onClick:()=>H(X.productId,X.quantity-1),style:{backgroundColor:"#e5e7eb",color:"#374151",padding:"0.25rem",borderRadius:"0.25rem",border:"none",cursor:"pointer",fontSize:"0.75rem"},"aria-label":"Kurangi qty (akan menghapus item)",children:b.jsx(Mb,{size:12})}),b.jsx("span",{style:{fontSize:"0.75rem",fontWeight:"500"},children:X.quantity}),b.jsx("button",{onClick:()=>ae(X.productId),disabled:X.quantity>=(n[X.productId]||0),style:{backgroundColor:X.quantity>=(n[X.productId]||0)?"#e5e7eb":"#3b82f6",color:X.quantity>=(n[X.productId]||0)?"#9ca3af":"white",padding:"0.25rem",borderRadius:"0.25rem",border:"none",cursor:X.quantity>=(n[X.productId]||0)?"not-allowed":"pointer",fontSize:"0.75rem"},title:X.quantity>=(n[X.productId]||0)?"Stok tidak cukup":"Tambah quantity",children:b.jsx(_h,{size:12})})]}),b.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:"600"},children:["Rp ",X.total.toLocaleString("id-ID")]})]})]},X.productId))}),b.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1rem"},children:[b.jsxs("div",{children:[b.jsx("label",{className:"form-label",children:"Nama"}),b.jsx("input",{type:"text",value:N.name,onChange:X=>k(oe=>({...oe,name:X.target.value})),className:"form-input",style:{fontSize:"0.75rem"}})]}),b.jsxs("div",{children:[b.jsx("label",{className:"form-label",children:"No. HP"}),b.jsx("input",{type:"text",value:N.phone,onChange:X=>k(oe=>({...oe,phone:X.target.value})),className:"form-input",style:{fontSize:"0.75rem"}})]}),b.jsxs("div",{children:[b.jsx("label",{className:"form-label",children:"Metode Pembayaran"}),b.jsxs("select",{value:U,onChange:X=>te(X.target.value),className:"form-select",style:{fontSize:"0.75rem"},children:[b.jsx("option",{value:"cash",children:"Tunai"}),b.jsx("option",{value:"qris",children:"QRIS"}),b.jsx("option",{value:"card",children:"Kartu"}),b.jsx("option",{value:"transfer",children:"Transfer"})]})]})]}),b.jsxs("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:"1rem"},children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[b.jsx("span",{style:{fontSize:"1.125rem",fontWeight:"600"},children:"Total"}),b.jsxs("span",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#2563eb"},children:["Rp ",ct().toLocaleString("id-ID")]})]}),b.jsx("button",{onClick:we,disabled:o.length===0,style:{width:"100%",backgroundColor:o.length===0?"#d1d5db":"#10b981",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",cursor:o.length===0?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Checkout"})]})]})})]}),b.jsx(Rv,{isOpen:w,onScan:nt,onClose:()=>{m(!1),v(null),R(null)}}),Z&&J&&b.jsx("div",{className:"modal-overlay",children:b.jsxs("div",{className:"modal",children:[b.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",margin:0},children:"Struk Penjualan"}),b.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"1rem"},children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[b.jsx("span",{children:"No. Transaksi:"}),b.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.75rem"},children:J.id})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[b.jsx("span",{children:"Tanggal:"}),b.jsx("span",{children:new Date(J.createdAt).toLocaleString("id-ID")})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[b.jsx("span",{children:"Pelanggan:"}),b.jsx("span",{children:J.customerName||"-"})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[b.jsx("span",{children:"Pembayaran:"}),b.jsx("span",{style:{textTransform:"capitalize"},children:J.paymentMethod})]})]}),b.jsxs("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:"0.5rem",marginBottom:"1rem"},children:[b.jsx("h4",{style:{fontWeight:"500",marginBottom:"0.5rem",margin:0},children:"Item:"}),J.items.map((X,oe)=>b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.75rem"},children:[b.jsxs("span",{children:[X.productName," x",X.quantity]}),b.jsxs("span",{children:["Rp ",X.total.toLocaleString("id-ID")]})]},oe))]}),b.jsx("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:"0.5rem",marginBottom:"1rem"},children:b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:"600"},children:[b.jsx("span",{children:"Total:"}),b.jsxs("span",{children:["Rp ",J.totalAmount.toLocaleString("id-ID")]})]})}),b.jsx("button",{onClick:()=>z(!1),className:"btn btn-primary",style:{width:"100%"},children:"Tutup"})]})})]})},pN=()=>{const[t,e]=Y.useState(!1),[n,i]=Y.useState(!1),[o,l]=Y.useState(!1);return Y.useEffect(()=>{const f=()=>{const p=window.innerWidth;e(p<=768),i(p>768&&p<=1024),l(p>1024)};return f(),window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),{isMobile:t,isTablet:n,isDesktop:o}},mN=()=>{const{isMobile:t}=pN(),[e,n]=Y.useState({totalProducts:0,lowStockProducts:0,totalSales:0,totalRevenue:0}),[i,o]=Y.useState(!0),[l,f]=Y.useState([]);Y.useEffect(()=>{p()},[]);const p=async()=>{try{o(!0);const[m,E]=await Promise.all([fn.getAllProducts(),Iv.getAllSales()]),v=m.filter(M=>M.stock<=M.minStock),A=E.reduce((M,B)=>M+B.totalAmount,0);n({totalProducts:m.length,lowStockProducts:v.length,totalSales:E.length,totalRevenue:A});const R=E.sort((M,B)=>B.createdAt-M.createdAt).slice(0,5);f(R)}catch(m){console.error("Error loading dashboard data:",m)}finally{o(!1)}},w=({title:m,value:E,icon:v,color:A})=>b.jsxs("div",{style:{background:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",padding:"1.5rem",display:"flex",alignItems:"center"},children:[b.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",backgroundColor:A+"20",marginRight:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:b.jsx(v,{size:24,style:{color:A}})}),b.jsxs("div",{children:[b.jsx("p",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#6b7280",margin:0},children:m}),b.jsx("p",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#111827",margin:0},children:E})]})]});return i?b.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"16rem"},children:b.jsx("div",{className:"spinner"})}):b.jsxs("div",{style:{padding:"1.5rem"},children:[b.jsxs("div",{style:{display:"grid",gridTemplateColumns:t?"1fr":"repeat(auto-fit, minmax(250px, 1fr))",gap:t?"1rem":"1.5rem",marginBottom:"1.5rem"},children:[b.jsx(w,{title:"Total Produk",value:e.totalProducts,icon:ru,color:"#3b82f6"}),b.jsx(w,{title:"Stok Rendah",value:e.lowStockProducts,icon:Ch,color:"#ef4444"}),b.jsx(w,{title:"Total Penjualan",value:e.totalSales,icon:H0,color:"#10b981"}),b.jsx(w,{title:"Total Revenue",value:`Rp ${e.totalRevenue.toLocaleString("id-ID")}`,icon:Bb,color:"#8b5cf6"})]}),b.jsxs("div",{style:{background:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:[b.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid #e5e7eb"},children:b.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#111827",margin:0},children:"Penjualan Terbaru"})}),b.jsx("div",{style:{padding:"1.5rem"},children:l.length>0?b.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:l.map(m=>b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"0.5rem",borderBottom:"1px solid #f3f4f6"},children:[b.jsxs("div",{children:[b.jsx("p",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827",margin:0},children:m.customerName||"Pelanggan Umum"}),b.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",margin:0},children:new Date(m.createdAt).toLocaleDateString("id-ID")})]}),b.jsxs("div",{style:{textAlign:"right"},children:[b.jsxs("p",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#059669",margin:0},children:["Rp ",m.totalAmount.toLocaleString("id-ID")]}),b.jsxs("p",{style:{fontSize:"0.75rem",color:"#6b7280",margin:0},children:[m.items.length," item"]})]})]},m.id))}):b.jsx("p",{style:{color:"#6b7280",textAlign:"center",padding:"1rem",margin:0},children:"Belum ada penjualan"})})]})]})},wN=()=>{const t=Tl(),e=[{path:"/",icon:Pb,label:"Dashboard"},{path:"/inventory",icon:ru,label:"Inventory"},{path:"/sales",icon:H0,label:"Penjualan"}];return b.jsx("nav",{className:"nav",children:b.jsxs("div",{className:"nav-container",children:[b.jsx(Tp,{to:"/",className:"nav-brand",children:b.jsx("span",{className:"mobile-hidden",children:"IQOS"})}),b.jsx("ul",{className:"nav-menu",children:e.map(n=>{const i=n.icon,o=t.pathname===n.path;return b.jsx("li",{children:b.jsxs(Tp,{to:n.path,className:`nav-link ${o?"active":""}`,children:[b.jsx(i,{size:18}),n.label]})},n.path)})})]})})},xN=()=>b.jsx(Ib,{children:b.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f9fafb"},children:[b.jsx(wN,{}),b.jsx("main",{className:"container",children:b.jsxs(vb,{children:[b.jsx(Nc,{path:"/",element:b.jsx(mN,{})}),b.jsx(Nc,{path:"/inventory",element:b.jsx(hN,{})}),b.jsx(Nc,{path:"/sales",element:b.jsx(gN,{})})]})})]})});Sf.createRoot(document.getElementById("root")).render(b.jsx(f2.StrictMode,{children:b.jsx(xN,{})}));
