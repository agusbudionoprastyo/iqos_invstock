function wp(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in t)){const c=Object.getOwnPropertyDescriptor(i,a);c&&Object.defineProperty(t,a,c.get?c:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();var Co=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _p(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Cp={exports:{}},Oc={},Ep={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ka=Symbol.for("react.element"),bw=Symbol.for("react.portal"),Nw=Symbol.for("react.fragment"),Rw=Symbol.for("react.strict_mode"),Ow=Symbol.for("react.profiler"),kw=Symbol.for("react.provider"),Dw=Symbol.for("react.context"),Mw=Symbol.for("react.forward_ref"),Pw=Symbol.for("react.suspense"),Lw=Symbol.for("react.memo"),Bw=Symbol.for("react.lazy"),V1=Symbol.iterator;function Fw(t){return t===null||typeof t!="object"?null:(t=V1&&t[V1]||t["@@iterator"],typeof t=="function"?t:null)}var vp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sp=Object.assign,Ap={};function no(t,e,n){this.props=t,this.context=e,this.refs=Ap,this.updater=n||vp}no.prototype.isReactComponent={};no.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};no.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ip(){}Ip.prototype=no.prototype;function Lf(t,e,n){this.props=t,this.context=e,this.refs=Ap,this.updater=n||vp}var Bf=Lf.prototype=new Ip;Bf.constructor=Lf;Sp(Bf,no.prototype);Bf.isPureReactComponent=!0;var H1=Array.isArray,Tp=Object.prototype.hasOwnProperty,Ff={current:null},bp={key:!0,ref:!0,__self:!0,__source:!0};function Np(t,e,n){var i,a={},c=null,f=null;if(e!=null)for(i in e.ref!==void 0&&(f=e.ref),e.key!==void 0&&(c=""+e.key),e)Tp.call(e,i)&&!bp.hasOwnProperty(i)&&(a[i]=e[i]);var p=arguments.length-2;if(p===1)a.children=n;else if(1<p){for(var y=Array(p),m=0;m<p;m++)y[m]=arguments[m+2];a.children=y}if(t&&t.defaultProps)for(i in p=t.defaultProps,p)a[i]===void 0&&(a[i]=p[i]);return{$$typeof:ka,type:t,key:c,ref:f,props:a,_owner:Ff.current}}function Uw(t,e){return{$$typeof:ka,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Uf(t){return typeof t=="object"&&t!==null&&t.$$typeof===ka}function jw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var G1=/\/+/g;function bu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jw(""+t.key):e.toString(36)}function Sl(t,e,n,i,a){var c=typeof t;(c==="undefined"||c==="boolean")&&(t=null);var f=!1;if(t===null)f=!0;else switch(c){case"string":case"number":f=!0;break;case"object":switch(t.$$typeof){case ka:case bw:f=!0}}if(f)return f=t,a=a(f),t=i===""?"."+bu(f,0):i,H1(a)?(n="",t!=null&&(n=t.replace(G1,"$&/")+"/"),Sl(a,e,n,"",function(m){return m})):a!=null&&(Uf(a)&&(a=Uw(a,n+(!a.key||f&&f.key===a.key?"":(""+a.key).replace(G1,"$&/")+"/")+t)),e.push(a)),1;if(f=0,i=i===""?".":i+":",H1(t))for(var p=0;p<t.length;p++){c=t[p];var y=i+bu(c,p);f+=Sl(c,e,n,y,a)}else if(y=Fw(t),typeof y=="function")for(t=y.call(t),p=0;!(c=t.next()).done;)c=c.value,y=i+bu(c,p++),f+=Sl(c,e,n,y,a);else if(c==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return f}function sl(t,e,n){if(t==null)return t;var i=[],a=0;return Sl(t,i,"","",function(c){return e.call(n,c,a++)}),i}function Ww(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fn={current:null},Al={transition:null},zw={ReactCurrentDispatcher:fn,ReactCurrentBatchConfig:Al,ReactCurrentOwner:Ff};function Rp(){throw Error("act(...) is not supported in production builds of React.")}Re.Children={map:sl,forEach:function(t,e,n){sl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return sl(t,function(){e++}),e},toArray:function(t){return sl(t,function(e){return e})||[]},only:function(t){if(!Uf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Re.Component=no;Re.Fragment=Nw;Re.Profiler=Ow;Re.PureComponent=Lf;Re.StrictMode=Rw;Re.Suspense=Pw;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zw;Re.act=Rp;Re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Sp({},t.props),a=t.key,c=t.ref,f=t._owner;if(e!=null){if(e.ref!==void 0&&(c=e.ref,f=Ff.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var p=t.type.defaultProps;for(y in e)Tp.call(e,y)&&!bp.hasOwnProperty(y)&&(i[y]=e[y]===void 0&&p!==void 0?p[y]:e[y])}var y=arguments.length-2;if(y===1)i.children=n;else if(1<y){p=Array(y);for(var m=0;m<y;m++)p[m]=arguments[m+2];i.children=p}return{$$typeof:ka,type:t.type,key:a,ref:c,props:i,_owner:f}};Re.createContext=function(t){return t={$$typeof:Dw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kw,_context:t},t.Consumer=t};Re.createElement=Np;Re.createFactory=function(t){var e=Np.bind(null,t);return e.type=t,e};Re.createRef=function(){return{current:null}};Re.forwardRef=function(t){return{$$typeof:Mw,render:t}};Re.isValidElement=Uf;Re.lazy=function(t){return{$$typeof:Bw,_payload:{_status:-1,_result:t},_init:Ww}};Re.memo=function(t,e){return{$$typeof:Lw,type:t,compare:e===void 0?null:e}};Re.startTransition=function(t){var e=Al.transition;Al.transition={};try{t()}finally{Al.transition=e}};Re.unstable_act=Rp;Re.useCallback=function(t,e){return fn.current.useCallback(t,e)};Re.useContext=function(t){return fn.current.useContext(t)};Re.useDebugValue=function(){};Re.useDeferredValue=function(t){return fn.current.useDeferredValue(t)};Re.useEffect=function(t,e){return fn.current.useEffect(t,e)};Re.useId=function(){return fn.current.useId()};Re.useImperativeHandle=function(t,e,n){return fn.current.useImperativeHandle(t,e,n)};Re.useInsertionEffect=function(t,e){return fn.current.useInsertionEffect(t,e)};Re.useLayoutEffect=function(t,e){return fn.current.useLayoutEffect(t,e)};Re.useMemo=function(t,e){return fn.current.useMemo(t,e)};Re.useReducer=function(t,e,n){return fn.current.useReducer(t,e,n)};Re.useRef=function(t){return fn.current.useRef(t)};Re.useState=function(t){return fn.current.useState(t)};Re.useSyncExternalStore=function(t,e,n){return fn.current.useSyncExternalStore(t,e,n)};Re.useTransition=function(){return fn.current.useTransition()};Re.version="18.3.1";Ep.exports=Re;var G=Ep.exports;const Op=_p(G),Vw=wp({__proto__:null,default:Op},[G]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hw=G,Gw=Symbol.for("react.element"),Xw=Symbol.for("react.fragment"),Yw=Object.prototype.hasOwnProperty,Kw=Hw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qw={key:!0,ref:!0,__self:!0,__source:!0};function kp(t,e,n){var i,a={},c=null,f=null;n!==void 0&&(c=""+n),e.key!==void 0&&(c=""+e.key),e.ref!==void 0&&(f=e.ref);for(i in e)Yw.call(e,i)&&!qw.hasOwnProperty(i)&&(a[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)a[i]===void 0&&(a[i]=e[i]);return{$$typeof:Gw,type:t,key:c,ref:f,props:a,_owner:Kw.current}}Oc.Fragment=Xw;Oc.jsx=kp;Oc.jsxs=kp;Cp.exports=Oc;var S=Cp.exports,pd={},Dp={exports:{}},Pn={},Mp={exports:{}},Pp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ie,fe){var ye=ie.length;ie.push(fe);e:for(;0<ye;){var Ge=ye-1>>>1,be=ie[Ge];if(0<a(be,fe))ie[Ge]=fe,ie[ye]=be,ye=Ge;else break e}}function n(ie){return ie.length===0?null:ie[0]}function i(ie){if(ie.length===0)return null;var fe=ie[0],ye=ie.pop();if(ye!==fe){ie[0]=ye;e:for(var Ge=0,be=ie.length,pn=be>>>1;Ge<pn;){var nt=2*(Ge+1)-1,lr=ie[nt],ue=nt+1,cr=ie[ue];if(0>a(lr,ye))ue<be&&0>a(cr,lr)?(ie[Ge]=cr,ie[ue]=ye,Ge=ue):(ie[Ge]=lr,ie[nt]=ye,Ge=nt);else if(ue<be&&0>a(cr,ye))ie[Ge]=cr,ie[ue]=ye,Ge=ue;else break e}}return fe}function a(ie,fe){var ye=ie.sortIndex-fe.sortIndex;return ye!==0?ye:ie.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();t.unstable_now=function(){return f.now()-p}}var y=[],m=[],v=1,_=null,I=3,O=!1,P=!1,L=!1,K=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(ie){for(var fe=n(m);fe!==null;){if(fe.callback===null)i(m);else if(fe.startTime<=ie)i(m),fe.sortIndex=fe.expirationTime,e(y,fe);else break;fe=n(m)}}function U(ie){if(L=!1,N(ie),!P)if(n(y)!==null)P=!0,Te(J);else{var fe=n(m);fe!==null&&xe(U,fe.startTime-ie)}}function J(ie,fe){P=!1,L&&(L=!1,k(te),te=-1),O=!0;var ye=I;try{for(N(fe),_=n(y);_!==null&&(!(_.expirationTime>fe)||ie&&!je());){var Ge=_.callback;if(typeof Ge=="function"){_.callback=null,I=_.priorityLevel;var be=Ge(_.expirationTime<=fe);fe=t.unstable_now(),typeof be=="function"?_.callback=be:_===n(y)&&i(y),N(fe)}else i(y);_=n(y)}if(_!==null)var pn=!0;else{var nt=n(m);nt!==null&&xe(U,nt.startTime-fe),pn=!1}return pn}finally{_=null,I=ye,O=!1}}var q=!1,j=null,te=-1,X=5,Ce=-1;function je(){return!(t.unstable_now()-Ce<X)}function H(){if(j!==null){var ie=t.unstable_now();Ce=ie;var fe=!0;try{fe=j(!0,ie)}finally{fe?ae():(q=!1,j=null)}}else q=!1}var ae;if(typeof R=="function")ae=function(){R(H)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,V=ge.port2;ge.port1.onmessage=H,ae=function(){V.postMessage(null)}}else ae=function(){K(H,0)};function Te(ie){j=ie,q||(q=!0,ae())}function xe(ie,fe){te=K(function(){ie(t.unstable_now())},fe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_continueExecution=function(){P||O||(P=!0,Te(J))},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return I},t.unstable_getFirstCallbackNode=function(){return n(y)},t.unstable_next=function(ie){switch(I){case 1:case 2:case 3:var fe=3;break;default:fe=I}var ye=I;I=fe;try{return ie()}finally{I=ye}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ie,fe){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ye=I;I=ie;try{return fe()}finally{I=ye}},t.unstable_scheduleCallback=function(ie,fe,ye){var Ge=t.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Ge+ye:Ge):ye=Ge,ie){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=ye+be,ie={id:v++,callback:fe,priorityLevel:ie,startTime:ye,expirationTime:be,sortIndex:-1},ye>Ge?(ie.sortIndex=ye,e(m,ie),n(y)===null&&ie===n(m)&&(L?(k(te),te=-1):L=!0,xe(U,ye-Ge))):(ie.sortIndex=be,e(y,ie),P||O||(P=!0,Te(J))),ie},t.unstable_shouldYield=je,t.unstable_wrapCallback=function(ie){var fe=I;return function(){var ye=I;I=fe;try{return ie.apply(this,arguments)}finally{I=ye}}}})(Pp);Mp.exports=Pp;var Zw=Mp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qw=G,Mn=Zw;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lp=new Set,ta={};function rs(t,e){Vs(t,e),Vs(t+"Capture",e)}function Vs(t,e){for(ta[t]=e,t=0;t<e.length;t++)Lp.add(e[t])}var Mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),md=Object.prototype.hasOwnProperty,$w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,X1={},Y1={};function Jw(t){return md.call(Y1,t)?!0:md.call(X1,t)?!1:$w.test(t)?Y1[t]=!0:(X1[t]=!0,!1)}function e_(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function t_(t,e,n,i){if(e===null||typeof e>"u"||e_(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function hn(t,e,n,i,a,c,f){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=c,this.removeEmptyString=f}var qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qt[t]=new hn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qt[e]=new hn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qt[t]=new hn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qt[t]=new hn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qt[t]=new hn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qt[t]=new hn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qt[t]=new hn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qt[t]=new hn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qt[t]=new hn(t,5,!1,t.toLowerCase(),null,!1,!1)});var jf=/[\-:]([a-z])/g;function Wf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(jf,Wf);qt[e]=new hn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(jf,Wf);qt[e]=new hn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(jf,Wf);qt[e]=new hn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qt[t]=new hn(t,1,!1,t.toLowerCase(),null,!1,!1)});qt.xlinkHref=new hn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qt[t]=new hn(t,1,!1,t.toLowerCase(),null,!0,!0)});function zf(t,e,n,i){var a=qt.hasOwnProperty(e)?qt[e]:null;(a!==null?a.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(t_(e,n,a,i)&&(n=null),i||a===null?Jw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(e=a.attributeName,i=a.attributeNamespace,n===null?t.removeAttribute(e):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Wr=Qw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ol=Symbol.for("react.element"),Cs=Symbol.for("react.portal"),Es=Symbol.for("react.fragment"),Vf=Symbol.for("react.strict_mode"),xd=Symbol.for("react.profiler"),Bp=Symbol.for("react.provider"),Fp=Symbol.for("react.context"),Hf=Symbol.for("react.forward_ref"),yd=Symbol.for("react.suspense"),wd=Symbol.for("react.suspense_list"),Gf=Symbol.for("react.memo"),Jr=Symbol.for("react.lazy"),Up=Symbol.for("react.offscreen"),K1=Symbol.iterator;function Eo(t){return t===null||typeof t!="object"?null:(t=K1&&t[K1]||t["@@iterator"],typeof t=="function"?t:null)}var gt=Object.assign,Nu;function Mo(t){if(Nu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Nu=e&&e[1]||""}return`
`+Nu+t}var Ru=!1;function Ou(t,e){if(!t||Ru)return"";Ru=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var i=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){i=m}t.call(e.prototype)}else{try{throw Error()}catch(m){i=m}t()}}catch(m){if(m&&i&&typeof m.stack=="string"){for(var a=m.stack.split(`
`),c=i.stack.split(`
`),f=a.length-1,p=c.length-1;1<=f&&0<=p&&a[f]!==c[p];)p--;for(;1<=f&&0<=p;f--,p--)if(a[f]!==c[p]){if(f!==1||p!==1)do if(f--,p--,0>p||a[f]!==c[p]){var y=`
`+a[f].replace(" at new "," at ");return t.displayName&&y.includes("<anonymous>")&&(y=y.replace("<anonymous>",t.displayName)),y}while(1<=f&&0<=p);break}}}finally{Ru=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Mo(t):""}function n_(t){switch(t.tag){case 5:return Mo(t.type);case 16:return Mo("Lazy");case 13:return Mo("Suspense");case 19:return Mo("SuspenseList");case 0:case 2:case 15:return t=Ou(t.type,!1),t;case 11:return t=Ou(t.type.render,!1),t;case 1:return t=Ou(t.type,!0),t;default:return""}}function _d(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Es:return"Fragment";case Cs:return"Portal";case xd:return"Profiler";case Vf:return"StrictMode";case yd:return"Suspense";case wd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Fp:return(t.displayName||"Context")+".Consumer";case Bp:return(t._context.displayName||"Context")+".Provider";case Hf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gf:return e=t.displayName||null,e!==null?e:_d(t.type)||"Memo";case Jr:e=t._payload,t=t._init;try{return _d(t(e))}catch{}}return null}function r_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _d(e);case 8:return e===Vf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _i(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function i_(t){var e=jp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,c=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(f){i=""+f,c.call(this,f)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function al(t){t._valueTracker||(t._valueTracker=i_(t))}function Wp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=jp(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Fl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Cd(t,e){var n=e.checked;return gt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function q1(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=_i(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function zp(t,e){e=e.checked,e!=null&&zf(t,"checked",e,!1)}function Ed(t,e){zp(t,e);var n=_i(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vd(t,e.type,n):e.hasOwnProperty("defaultValue")&&vd(t,e.type,_i(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Z1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function vd(t,e,n){(e!=="number"||Fl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Po=Array.isArray;function Ps(t,e,n,i){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&i&&(t[n].defaultSelected=!0)}else{for(n=""+_i(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,i&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function Sd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return gt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Q1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(Po(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:_i(n)}}function Vp(t,e){var n=_i(e.value),i=_i(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function $1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Hp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ad(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Hp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ll,Gp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,a){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ll=ll||document.createElement("div"),ll.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ll.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function na(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Uo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},s_=["Webkit","ms","Moz","O"];Object.keys(Uo).forEach(function(t){s_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Uo[e]=Uo[t]})});function Xp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Uo.hasOwnProperty(t)&&Uo[t]?(""+e).trim():e+"px"}function Yp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,a=Xp(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,a):t[n]=a}}var o_=gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Id(t,e){if(e){if(o_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function Td(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bd=null;function Xf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Nd=null,Ls=null,Bs=null;function J1(t){if(t=Pa(t)){if(typeof Nd!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=Lc(e),Nd(t.stateNode,t.type,e))}}function Kp(t){Ls?Bs?Bs.push(t):Bs=[t]:Ls=t}function qp(){if(Ls){var t=Ls,e=Bs;if(Bs=Ls=null,J1(t),e)for(t=0;t<e.length;t++)J1(e[t])}}function Zp(t,e){return t(e)}function Qp(){}var ku=!1;function $p(t,e,n){if(ku)return t(e,n);ku=!0;try{return Zp(t,e,n)}finally{ku=!1,(Ls!==null||Bs!==null)&&(Qp(),qp())}}function ra(t,e){var n=t.stateNode;if(n===null)return null;var i=Lc(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var Rd=!1;if(Mr)try{var vo={};Object.defineProperty(vo,"passive",{get:function(){Rd=!0}}),window.addEventListener("test",vo,vo),window.removeEventListener("test",vo,vo)}catch{Rd=!1}function a_(t,e,n,i,a,c,f,p,y){var m=Array.prototype.slice.call(arguments,3);try{e.apply(n,m)}catch(v){this.onError(v)}}var jo=!1,Ul=null,jl=!1,Od=null,l_={onError:function(t){jo=!0,Ul=t}};function c_(t,e,n,i,a,c,f,p,y){jo=!1,Ul=null,a_.apply(l_,arguments)}function u_(t,e,n,i,a,c,f,p,y){if(c_.apply(this,arguments),jo){if(jo){var m=Ul;jo=!1,Ul=null}else throw Error(Q(198));jl||(jl=!0,Od=m)}}function is(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Jp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function e0(t){if(is(t)!==t)throw Error(Q(188))}function d_(t){var e=t.alternate;if(!e){if(e=is(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,i=e;;){var a=n.return;if(a===null)break;var c=a.alternate;if(c===null){if(i=a.return,i!==null){n=i;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===n)return e0(a),t;if(c===i)return e0(a),e;c=c.sibling}throw Error(Q(188))}if(n.return!==i.return)n=a,i=c;else{for(var f=!1,p=a.child;p;){if(p===n){f=!0,n=a,i=c;break}if(p===i){f=!0,i=a,n=c;break}p=p.sibling}if(!f){for(p=c.child;p;){if(p===n){f=!0,n=c,i=a;break}if(p===i){f=!0,i=c,n=a;break}p=p.sibling}if(!f)throw Error(Q(189))}}if(n.alternate!==i)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function em(t){return t=d_(t),t!==null?tm(t):null}function tm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=tm(t);if(e!==null)return e;t=t.sibling}return null}var nm=Mn.unstable_scheduleCallback,t0=Mn.unstable_cancelCallback,f_=Mn.unstable_shouldYield,h_=Mn.unstable_requestPaint,At=Mn.unstable_now,g_=Mn.unstable_getCurrentPriorityLevel,Yf=Mn.unstable_ImmediatePriority,rm=Mn.unstable_UserBlockingPriority,Wl=Mn.unstable_NormalPriority,p_=Mn.unstable_LowPriority,im=Mn.unstable_IdlePriority,kc=null,Cr=null;function m_(t){if(Cr&&typeof Cr.onCommitFiberRoot=="function")try{Cr.onCommitFiberRoot(kc,t,void 0,(t.current.flags&128)===128)}catch{}}var ir=Math.clz32?Math.clz32:w_,x_=Math.log,y_=Math.LN2;function w_(t){return t>>>=0,t===0?32:31-(x_(t)/y_|0)|0}var cl=64,ul=4194304;function Lo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function zl(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,a=t.suspendedLanes,c=t.pingedLanes,f=n&268435455;if(f!==0){var p=f&~a;p!==0?i=Lo(p):(c&=f,c!==0&&(i=Lo(c)))}else f=n&~a,f!==0?i=Lo(f):c!==0&&(i=Lo(c));if(i===0)return 0;if(e!==0&&e!==i&&!(e&a)&&(a=i&-i,c=e&-e,a>=c||a===16&&(c&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ir(e),a=1<<n,i|=t[n],e&=~a;return i}function __(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function C_(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,a=t.expirationTimes,c=t.pendingLanes;0<c;){var f=31-ir(c),p=1<<f,y=a[f];y===-1?(!(p&n)||p&i)&&(a[f]=__(p,e)):y<=e&&(t.expiredLanes|=p),c&=~p}}function kd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function sm(){var t=cl;return cl<<=1,!(cl&4194240)&&(cl=64),t}function Du(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Da(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ir(e),t[e]=n}function E_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-ir(n),c=1<<a;e[a]=0,i[a]=-1,t[a]=-1,n&=~c}}function Kf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ir(n),a=1<<i;a&e|t[i]&e&&(t[i]|=e),n&=~a}}var ze=0;function om(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var am,qf,lm,cm,um,Dd=!1,dl=[],ai=null,li=null,ci=null,ia=new Map,sa=new Map,ti=[],v_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function n0(t,e){switch(t){case"focusin":case"focusout":ai=null;break;case"dragenter":case"dragleave":li=null;break;case"mouseover":case"mouseout":ci=null;break;case"pointerover":case"pointerout":ia.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":sa.delete(e.pointerId)}}function So(t,e,n,i,a,c){return t===null||t.nativeEvent!==c?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:c,targetContainers:[a]},e!==null&&(e=Pa(e),e!==null&&qf(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function S_(t,e,n,i,a){switch(e){case"focusin":return ai=So(ai,t,e,n,i,a),!0;case"dragenter":return li=So(li,t,e,n,i,a),!0;case"mouseover":return ci=So(ci,t,e,n,i,a),!0;case"pointerover":var c=a.pointerId;return ia.set(c,So(ia.get(c)||null,t,e,n,i,a)),!0;case"gotpointercapture":return c=a.pointerId,sa.set(c,So(sa.get(c)||null,t,e,n,i,a)),!0}return!1}function dm(t){var e=Ui(t.target);if(e!==null){var n=is(e);if(n!==null){if(e=n.tag,e===13){if(e=Jp(n),e!==null){t.blockedOn=e,um(t.priority,function(){lm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Il(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Md(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);bd=i,n.target.dispatchEvent(i),bd=null}else return e=Pa(n),e!==null&&qf(e),t.blockedOn=n,!1;e.shift()}return!0}function r0(t,e,n){Il(t)&&n.delete(e)}function A_(){Dd=!1,ai!==null&&Il(ai)&&(ai=null),li!==null&&Il(li)&&(li=null),ci!==null&&Il(ci)&&(ci=null),ia.forEach(r0),sa.forEach(r0)}function Ao(t,e){t.blockedOn===e&&(t.blockedOn=null,Dd||(Dd=!0,Mn.unstable_scheduleCallback(Mn.unstable_NormalPriority,A_)))}function oa(t){function e(a){return Ao(a,t)}if(0<dl.length){Ao(dl[0],t);for(var n=1;n<dl.length;n++){var i=dl[n];i.blockedOn===t&&(i.blockedOn=null)}}for(ai!==null&&Ao(ai,t),li!==null&&Ao(li,t),ci!==null&&Ao(ci,t),ia.forEach(e),sa.forEach(e),n=0;n<ti.length;n++)i=ti[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<ti.length&&(n=ti[0],n.blockedOn===null);)dm(n),n.blockedOn===null&&ti.shift()}var Fs=Wr.ReactCurrentBatchConfig,Vl=!0;function I_(t,e,n,i){var a=ze,c=Fs.transition;Fs.transition=null;try{ze=1,Zf(t,e,n,i)}finally{ze=a,Fs.transition=c}}function T_(t,e,n,i){var a=ze,c=Fs.transition;Fs.transition=null;try{ze=4,Zf(t,e,n,i)}finally{ze=a,Fs.transition=c}}function Zf(t,e,n,i){if(Vl){var a=Md(t,e,n,i);if(a===null)Vu(t,e,i,Hl,n),n0(t,i);else if(S_(a,t,e,n,i))i.stopPropagation();else if(n0(t,i),e&4&&-1<v_.indexOf(t)){for(;a!==null;){var c=Pa(a);if(c!==null&&am(c),c=Md(t,e,n,i),c===null&&Vu(t,e,i,Hl,n),c===a)break;a=c}a!==null&&i.stopPropagation()}else Vu(t,e,i,null,n)}}var Hl=null;function Md(t,e,n,i){if(Hl=null,t=Xf(i),t=Ui(t),t!==null)if(e=is(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Jp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hl=t,null}function fm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(g_()){case Yf:return 1;case rm:return 4;case Wl:case p_:return 16;case im:return 536870912;default:return 16}default:return 16}}var ri=null,Qf=null,Tl=null;function hm(){if(Tl)return Tl;var t,e=Qf,n=e.length,i,a="value"in ri?ri.value:ri.textContent,c=a.length;for(t=0;t<n&&e[t]===a[t];t++);var f=n-t;for(i=1;i<=f&&e[n-i]===a[c-i];i++);return Tl=a.slice(t,1<i?1-i:void 0)}function bl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fl(){return!0}function i0(){return!1}function Ln(t){function e(n,i,a,c,f){this._reactName=n,this._targetInst=a,this.type=i,this.nativeEvent=c,this.target=f,this.currentTarget=null;for(var p in t)t.hasOwnProperty(p)&&(n=t[p],this[p]=n?n(c):c[p]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?fl:i0,this.isPropagationStopped=i0,this}return gt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fl)},persist:function(){},isPersistent:fl}),e}var ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$f=Ln(ro),Ma=gt({},ro,{view:0,detail:0}),b_=Ln(Ma),Mu,Pu,Io,Dc=gt({},Ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Io&&(Io&&t.type==="mousemove"?(Mu=t.screenX-Io.screenX,Pu=t.screenY-Io.screenY):Pu=Mu=0,Io=t),Mu)},movementY:function(t){return"movementY"in t?t.movementY:Pu}}),s0=Ln(Dc),N_=gt({},Dc,{dataTransfer:0}),R_=Ln(N_),O_=gt({},Ma,{relatedTarget:0}),Lu=Ln(O_),k_=gt({},ro,{animationName:0,elapsedTime:0,pseudoElement:0}),D_=Ln(k_),M_=gt({},ro,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),P_=Ln(M_),L_=gt({},ro,{data:0}),o0=Ln(L_),B_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},U_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=U_[t])?!!e[t]:!1}function Jf(){return j_}var W_=gt({},Ma,{key:function(t){if(t.key){var e=B_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?F_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jf,charCode:function(t){return t.type==="keypress"?bl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),z_=Ln(W_),V_=gt({},Dc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),a0=Ln(V_),H_=gt({},Ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jf}),G_=Ln(H_),X_=gt({},ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),Y_=Ln(X_),K_=gt({},Dc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),q_=Ln(K_),Z_=[9,13,27,32],eh=Mr&&"CompositionEvent"in window,Wo=null;Mr&&"documentMode"in document&&(Wo=document.documentMode);var Q_=Mr&&"TextEvent"in window&&!Wo,gm=Mr&&(!eh||Wo&&8<Wo&&11>=Wo),l0=" ",c0=!1;function pm(t,e){switch(t){case"keyup":return Z_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vs=!1;function $_(t,e){switch(t){case"compositionend":return mm(e);case"keypress":return e.which!==32?null:(c0=!0,l0);case"textInput":return t=e.data,t===l0&&c0?null:t;default:return null}}function J_(t,e){if(vs)return t==="compositionend"||!eh&&pm(t,e)?(t=hm(),Tl=Qf=ri=null,vs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gm&&e.locale!=="ko"?null:e.data;default:return null}}var eC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eC[t.type]:e==="textarea"}function xm(t,e,n,i){Kp(i),e=Gl(e,"onChange"),0<e.length&&(n=new $f("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var zo=null,aa=null;function tC(t){bm(t,0)}function Mc(t){var e=Is(t);if(Wp(e))return t}function nC(t,e){if(t==="change")return e}var ym=!1;if(Mr){var Bu;if(Mr){var Fu="oninput"in document;if(!Fu){var d0=document.createElement("div");d0.setAttribute("oninput","return;"),Fu=typeof d0.oninput=="function"}Bu=Fu}else Bu=!1;ym=Bu&&(!document.documentMode||9<document.documentMode)}function f0(){zo&&(zo.detachEvent("onpropertychange",wm),aa=zo=null)}function wm(t){if(t.propertyName==="value"&&Mc(aa)){var e=[];xm(e,aa,t,Xf(t)),$p(tC,e)}}function rC(t,e,n){t==="focusin"?(f0(),zo=e,aa=n,zo.attachEvent("onpropertychange",wm)):t==="focusout"&&f0()}function iC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mc(aa)}function sC(t,e){if(t==="click")return Mc(e)}function oC(t,e){if(t==="input"||t==="change")return Mc(e)}function aC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ar=typeof Object.is=="function"?Object.is:aC;function la(t,e){if(ar(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!md.call(e,a)||!ar(t[a],e[a]))return!1}return!0}function h0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function g0(t,e){var n=h0(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=h0(n)}}function _m(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?_m(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Cm(){for(var t=window,e=Fl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fl(t.document)}return e}function th(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lC(t){var e=Cm(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&_m(n.ownerDocument.documentElement,n)){if(i!==null&&th(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,c=Math.min(i.start,a);i=i.end===void 0?c:Math.min(i.end,a),!t.extend&&c>i&&(a=i,i=c,c=a),a=g0(n,c);var f=g0(n,i);a&&f&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==f.node||t.focusOffset!==f.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),c>i?(t.addRange(e),t.extend(f.node,f.offset)):(e.setEnd(f.node,f.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cC=Mr&&"documentMode"in document&&11>=document.documentMode,Ss=null,Pd=null,Vo=null,Ld=!1;function p0(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ld||Ss==null||Ss!==Fl(i)||(i=Ss,"selectionStart"in i&&th(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Vo&&la(Vo,i)||(Vo=i,i=Gl(Pd,"onSelect"),0<i.length&&(e=new $f("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Ss)))}function hl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var As={animationend:hl("Animation","AnimationEnd"),animationiteration:hl("Animation","AnimationIteration"),animationstart:hl("Animation","AnimationStart"),transitionend:hl("Transition","TransitionEnd")},Uu={},Em={};Mr&&(Em=document.createElement("div").style,"AnimationEvent"in window||(delete As.animationend.animation,delete As.animationiteration.animation,delete As.animationstart.animation),"TransitionEvent"in window||delete As.transitionend.transition);function Pc(t){if(Uu[t])return Uu[t];if(!As[t])return t;var e=As[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Em)return Uu[t]=e[n];return t}var vm=Pc("animationend"),Sm=Pc("animationiteration"),Am=Pc("animationstart"),Im=Pc("transitionend"),Tm=new Map,m0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(t,e){Tm.set(t,e),rs(e,[t])}for(var ju=0;ju<m0.length;ju++){var Wu=m0[ju],uC=Wu.toLowerCase(),dC=Wu[0].toUpperCase()+Wu.slice(1);Ii(uC,"on"+dC)}Ii(vm,"onAnimationEnd");Ii(Sm,"onAnimationIteration");Ii(Am,"onAnimationStart");Ii("dblclick","onDoubleClick");Ii("focusin","onFocus");Ii("focusout","onBlur");Ii(Im,"onTransitionEnd");Vs("onMouseEnter",["mouseout","mouseover"]);Vs("onMouseLeave",["mouseout","mouseover"]);Vs("onPointerEnter",["pointerout","pointerover"]);Vs("onPointerLeave",["pointerout","pointerover"]);rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rs("onBeforeInput",["compositionend","keypress","textInput","paste"]);rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bo));function x0(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,u_(i,e,void 0,t),t.currentTarget=null}function bm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],a=i.event;i=i.listeners;e:{var c=void 0;if(e)for(var f=i.length-1;0<=f;f--){var p=i[f],y=p.instance,m=p.currentTarget;if(p=p.listener,y!==c&&a.isPropagationStopped())break e;x0(a,p,m),c=y}else for(f=0;f<i.length;f++){if(p=i[f],y=p.instance,m=p.currentTarget,p=p.listener,y!==c&&a.isPropagationStopped())break e;x0(a,p,m),c=y}}}if(jl)throw t=Od,jl=!1,Od=null,t}function it(t,e){var n=e[Wd];n===void 0&&(n=e[Wd]=new Set);var i=t+"__bubble";n.has(i)||(Nm(e,t,2,!1),n.add(i))}function zu(t,e,n){var i=0;e&&(i|=4),Nm(n,t,i,e)}var gl="_reactListening"+Math.random().toString(36).slice(2);function ca(t){if(!t[gl]){t[gl]=!0,Lp.forEach(function(n){n!=="selectionchange"&&(fC.has(n)||zu(n,!1,t),zu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gl]||(e[gl]=!0,zu("selectionchange",!1,e))}}function Nm(t,e,n,i){switch(fm(e)){case 1:var a=I_;break;case 4:a=T_;break;default:a=Zf}n=a.bind(null,e,n,t),a=void 0,!Rd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),i?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function Vu(t,e,n,i,a){var c=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var p=i.stateNode.containerInfo;if(p===a||p.nodeType===8&&p.parentNode===a)break;if(f===4)for(f=i.return;f!==null;){var y=f.tag;if((y===3||y===4)&&(y=f.stateNode.containerInfo,y===a||y.nodeType===8&&y.parentNode===a))return;f=f.return}for(;p!==null;){if(f=Ui(p),f===null)return;if(y=f.tag,y===5||y===6){i=c=f;continue e}p=p.parentNode}}i=i.return}$p(function(){var m=c,v=Xf(n),_=[];e:{var I=Tm.get(t);if(I!==void 0){var O=$f,P=t;switch(t){case"keypress":if(bl(n)===0)break e;case"keydown":case"keyup":O=z_;break;case"focusin":P="focus",O=Lu;break;case"focusout":P="blur",O=Lu;break;case"beforeblur":case"afterblur":O=Lu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=s0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=R_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=G_;break;case vm:case Sm:case Am:O=D_;break;case Im:O=Y_;break;case"scroll":O=b_;break;case"wheel":O=q_;break;case"copy":case"cut":case"paste":O=P_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=a0}var L=(e&4)!==0,K=!L&&t==="scroll",k=L?I!==null?I+"Capture":null:I;L=[];for(var R=m,N;R!==null;){N=R;var U=N.stateNode;if(N.tag===5&&U!==null&&(N=U,k!==null&&(U=ra(R,k),U!=null&&L.push(ua(R,U,N)))),K)break;R=R.return}0<L.length&&(I=new O(I,P,null,n,v),_.push({event:I,listeners:L}))}}if(!(e&7)){e:{if(I=t==="mouseover"||t==="pointerover",O=t==="mouseout"||t==="pointerout",I&&n!==bd&&(P=n.relatedTarget||n.fromElement)&&(Ui(P)||P[Pr]))break e;if((O||I)&&(I=v.window===v?v:(I=v.ownerDocument)?I.defaultView||I.parentWindow:window,O?(P=n.relatedTarget||n.toElement,O=m,P=P?Ui(P):null,P!==null&&(K=is(P),P!==K||P.tag!==5&&P.tag!==6)&&(P=null)):(O=null,P=m),O!==P)){if(L=s0,U="onMouseLeave",k="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(L=a0,U="onPointerLeave",k="onPointerEnter",R="pointer"),K=O==null?I:Is(O),N=P==null?I:Is(P),I=new L(U,R+"leave",O,n,v),I.target=K,I.relatedTarget=N,U=null,Ui(v)===m&&(L=new L(k,R+"enter",P,n,v),L.target=N,L.relatedTarget=K,U=L),K=U,O&&P)t:{for(L=O,k=P,R=0,N=L;N;N=ws(N))R++;for(N=0,U=k;U;U=ws(U))N++;for(;0<R-N;)L=ws(L),R--;for(;0<N-R;)k=ws(k),N--;for(;R--;){if(L===k||k!==null&&L===k.alternate)break t;L=ws(L),k=ws(k)}L=null}else L=null;O!==null&&y0(_,I,O,L,!1),P!==null&&K!==null&&y0(_,K,P,L,!0)}}e:{if(I=m?Is(m):window,O=I.nodeName&&I.nodeName.toLowerCase(),O==="select"||O==="input"&&I.type==="file")var J=nC;else if(u0(I))if(ym)J=oC;else{J=iC;var q=rC}else(O=I.nodeName)&&O.toLowerCase()==="input"&&(I.type==="checkbox"||I.type==="radio")&&(J=sC);if(J&&(J=J(t,m))){xm(_,J,n,v);break e}q&&q(t,I,m),t==="focusout"&&(q=I._wrapperState)&&q.controlled&&I.type==="number"&&vd(I,"number",I.value)}switch(q=m?Is(m):window,t){case"focusin":(u0(q)||q.contentEditable==="true")&&(Ss=q,Pd=m,Vo=null);break;case"focusout":Vo=Pd=Ss=null;break;case"mousedown":Ld=!0;break;case"contextmenu":case"mouseup":case"dragend":Ld=!1,p0(_,n,v);break;case"selectionchange":if(cC)break;case"keydown":case"keyup":p0(_,n,v)}var j;if(eh)e:{switch(t){case"compositionstart":var te="onCompositionStart";break e;case"compositionend":te="onCompositionEnd";break e;case"compositionupdate":te="onCompositionUpdate";break e}te=void 0}else vs?pm(t,n)&&(te="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(te="onCompositionStart");te&&(gm&&n.locale!=="ko"&&(vs||te!=="onCompositionStart"?te==="onCompositionEnd"&&vs&&(j=hm()):(ri=v,Qf="value"in ri?ri.value:ri.textContent,vs=!0)),q=Gl(m,te),0<q.length&&(te=new o0(te,t,null,n,v),_.push({event:te,listeners:q}),j?te.data=j:(j=mm(n),j!==null&&(te.data=j)))),(j=Q_?$_(t,n):J_(t,n))&&(m=Gl(m,"onBeforeInput"),0<m.length&&(v=new o0("onBeforeInput","beforeinput",null,n,v),_.push({event:v,listeners:m}),v.data=j))}bm(_,e)})}function ua(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Gl(t,e){for(var n=e+"Capture",i=[];t!==null;){var a=t,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=ra(t,n),c!=null&&i.unshift(ua(t,c,a)),c=ra(t,e),c!=null&&i.push(ua(t,c,a))),t=t.return}return i}function ws(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function y0(t,e,n,i,a){for(var c=e._reactName,f=[];n!==null&&n!==i;){var p=n,y=p.alternate,m=p.stateNode;if(y!==null&&y===i)break;p.tag===5&&m!==null&&(p=m,a?(y=ra(n,c),y!=null&&f.unshift(ua(n,y,p))):a||(y=ra(n,c),y!=null&&f.push(ua(n,y,p)))),n=n.return}f.length!==0&&t.push({event:e,listeners:f})}var hC=/\r\n?/g,gC=/\u0000|\uFFFD/g;function w0(t){return(typeof t=="string"?t:""+t).replace(hC,`
`).replace(gC,"")}function pl(t,e,n){if(e=w0(e),w0(t)!==e&&n)throw Error(Q(425))}function Xl(){}var Bd=null,Fd=null;function Ud(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var jd=typeof setTimeout=="function"?setTimeout:void 0,pC=typeof clearTimeout=="function"?clearTimeout:void 0,_0=typeof Promise=="function"?Promise:void 0,mC=typeof queueMicrotask=="function"?queueMicrotask:typeof _0<"u"?function(t){return _0.resolve(null).then(t).catch(xC)}:jd;function xC(t){setTimeout(function(){throw t})}function Hu(t,e){var n=e,i=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(i===0){t.removeChild(a),oa(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=a}while(n);oa(e)}function ui(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function C0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var io=Math.random().toString(36).slice(2),_r="__reactFiber$"+io,da="__reactProps$"+io,Pr="__reactContainer$"+io,Wd="__reactEvents$"+io,yC="__reactListeners$"+io,wC="__reactHandles$"+io;function Ui(t){var e=t[_r];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Pr]||n[_r]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=C0(t);t!==null;){if(n=t[_r])return n;t=C0(t)}return e}t=n,n=t.parentNode}return null}function Pa(t){return t=t[_r]||t[Pr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Is(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function Lc(t){return t[da]||null}var zd=[],Ts=-1;function Ti(t){return{current:t}}function lt(t){0>Ts||(t.current=zd[Ts],zd[Ts]=null,Ts--)}function tt(t,e){Ts++,zd[Ts]=t.current,t.current=e}var Ci={},sn=Ti(Ci),Sn=Ti(!1),Yi=Ci;function Hs(t,e){var n=t.type.contextTypes;if(!n)return Ci;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in n)a[c]=e[c];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function An(t){return t=t.childContextTypes,t!=null}function Yl(){lt(Sn),lt(sn)}function E0(t,e,n){if(sn.current!==Ci)throw Error(Q(168));tt(sn,e),tt(Sn,n)}function Rm(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var a in i)if(!(a in e))throw Error(Q(108,r_(t)||"Unknown",a));return gt({},n,i)}function Kl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ci,Yi=sn.current,tt(sn,t),tt(Sn,Sn.current),!0}function v0(t,e,n){var i=t.stateNode;if(!i)throw Error(Q(169));n?(t=Rm(t,e,Yi),i.__reactInternalMemoizedMergedChildContext=t,lt(Sn),lt(sn),tt(sn,t)):lt(Sn),tt(Sn,n)}var br=null,Bc=!1,Gu=!1;function Om(t){br===null?br=[t]:br.push(t)}function _C(t){Bc=!0,Om(t)}function bi(){if(!Gu&&br!==null){Gu=!0;var t=0,e=ze;try{var n=br;for(ze=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}br=null,Bc=!1}catch(a){throw br!==null&&(br=br.slice(t+1)),nm(Yf,bi),a}finally{ze=e,Gu=!1}}return null}var bs=[],Ns=0,ql=null,Zl=0,Wn=[],zn=0,Ki=null,Nr=1,Rr="";function Pi(t,e){bs[Ns++]=Zl,bs[Ns++]=ql,ql=t,Zl=e}function km(t,e,n){Wn[zn++]=Nr,Wn[zn++]=Rr,Wn[zn++]=Ki,Ki=t;var i=Nr;t=Rr;var a=32-ir(i)-1;i&=~(1<<a),n+=1;var c=32-ir(e)+a;if(30<c){var f=a-a%5;c=(i&(1<<f)-1).toString(32),i>>=f,a-=f,Nr=1<<32-ir(e)+a|n<<a|i,Rr=c+t}else Nr=1<<c|n<<a|i,Rr=t}function nh(t){t.return!==null&&(Pi(t,1),km(t,1,0))}function rh(t){for(;t===ql;)ql=bs[--Ns],bs[Ns]=null,Zl=bs[--Ns],bs[Ns]=null;for(;t===Ki;)Ki=Wn[--zn],Wn[zn]=null,Rr=Wn[--zn],Wn[zn]=null,Nr=Wn[--zn],Wn[zn]=null}var kn=null,On=null,ut=!1,tr=null;function Dm(t,e){var n=Vn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function S0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kn=t,On=ui(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kn=t,On=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ki!==null?{id:Nr,overflow:Rr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Vn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kn=t,On=null,!0):!1;default:return!1}}function Vd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hd(t){if(ut){var e=On;if(e){var n=e;if(!S0(t,e)){if(Vd(t))throw Error(Q(418));e=ui(n.nextSibling);var i=kn;e&&S0(t,e)?Dm(i,n):(t.flags=t.flags&-4097|2,ut=!1,kn=t)}}else{if(Vd(t))throw Error(Q(418));t.flags=t.flags&-4097|2,ut=!1,kn=t}}}function A0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kn=t}function ml(t){if(t!==kn)return!1;if(!ut)return A0(t),ut=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ud(t.type,t.memoizedProps)),e&&(e=On)){if(Vd(t))throw Mm(),Error(Q(418));for(;e;)Dm(t,e),e=ui(e.nextSibling)}if(A0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){On=ui(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}On=null}}else On=kn?ui(t.stateNode.nextSibling):null;return!0}function Mm(){for(var t=On;t;)t=ui(t.nextSibling)}function Gs(){On=kn=null,ut=!1}function ih(t){tr===null?tr=[t]:tr.push(t)}var CC=Wr.ReactCurrentBatchConfig;function To(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var i=n.stateNode}if(!i)throw Error(Q(147,t));var a=i,c=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===c?e.ref:(e=function(f){var p=a.refs;f===null?delete p[c]:p[c]=f},e._stringRef=c,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function xl(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function I0(t){var e=t._init;return e(t._payload)}function Pm(t){function e(k,R){if(t){var N=k.deletions;N===null?(k.deletions=[R],k.flags|=16):N.push(R)}}function n(k,R){if(!t)return null;for(;R!==null;)e(k,R),R=R.sibling;return null}function i(k,R){for(k=new Map;R!==null;)R.key!==null?k.set(R.key,R):k.set(R.index,R),R=R.sibling;return k}function a(k,R){return k=gi(k,R),k.index=0,k.sibling=null,k}function c(k,R,N){return k.index=N,t?(N=k.alternate,N!==null?(N=N.index,N<R?(k.flags|=2,R):N):(k.flags|=2,R)):(k.flags|=1048576,R)}function f(k){return t&&k.alternate===null&&(k.flags|=2),k}function p(k,R,N,U){return R===null||R.tag!==6?(R=$u(N,k.mode,U),R.return=k,R):(R=a(R,N),R.return=k,R)}function y(k,R,N,U){var J=N.type;return J===Es?v(k,R,N.props.children,U,N.key):R!==null&&(R.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===Jr&&I0(J)===R.type)?(U=a(R,N.props),U.ref=To(k,R,N),U.return=k,U):(U=Pl(N.type,N.key,N.props,null,k.mode,U),U.ref=To(k,R,N),U.return=k,U)}function m(k,R,N,U){return R===null||R.tag!==4||R.stateNode.containerInfo!==N.containerInfo||R.stateNode.implementation!==N.implementation?(R=Ju(N,k.mode,U),R.return=k,R):(R=a(R,N.children||[]),R.return=k,R)}function v(k,R,N,U,J){return R===null||R.tag!==7?(R=Xi(N,k.mode,U,J),R.return=k,R):(R=a(R,N),R.return=k,R)}function _(k,R,N){if(typeof R=="string"&&R!==""||typeof R=="number")return R=$u(""+R,k.mode,N),R.return=k,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case ol:return N=Pl(R.type,R.key,R.props,null,k.mode,N),N.ref=To(k,null,R),N.return=k,N;case Cs:return R=Ju(R,k.mode,N),R.return=k,R;case Jr:var U=R._init;return _(k,U(R._payload),N)}if(Po(R)||Eo(R))return R=Xi(R,k.mode,N,null),R.return=k,R;xl(k,R)}return null}function I(k,R,N,U){var J=R!==null?R.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return J!==null?null:p(k,R,""+N,U);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ol:return N.key===J?y(k,R,N,U):null;case Cs:return N.key===J?m(k,R,N,U):null;case Jr:return J=N._init,I(k,R,J(N._payload),U)}if(Po(N)||Eo(N))return J!==null?null:v(k,R,N,U,null);xl(k,N)}return null}function O(k,R,N,U,J){if(typeof U=="string"&&U!==""||typeof U=="number")return k=k.get(N)||null,p(R,k,""+U,J);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case ol:return k=k.get(U.key===null?N:U.key)||null,y(R,k,U,J);case Cs:return k=k.get(U.key===null?N:U.key)||null,m(R,k,U,J);case Jr:var q=U._init;return O(k,R,N,q(U._payload),J)}if(Po(U)||Eo(U))return k=k.get(N)||null,v(R,k,U,J,null);xl(R,U)}return null}function P(k,R,N,U){for(var J=null,q=null,j=R,te=R=0,X=null;j!==null&&te<N.length;te++){j.index>te?(X=j,j=null):X=j.sibling;var Ce=I(k,j,N[te],U);if(Ce===null){j===null&&(j=X);break}t&&j&&Ce.alternate===null&&e(k,j),R=c(Ce,R,te),q===null?J=Ce:q.sibling=Ce,q=Ce,j=X}if(te===N.length)return n(k,j),ut&&Pi(k,te),J;if(j===null){for(;te<N.length;te++)j=_(k,N[te],U),j!==null&&(R=c(j,R,te),q===null?J=j:q.sibling=j,q=j);return ut&&Pi(k,te),J}for(j=i(k,j);te<N.length;te++)X=O(j,k,te,N[te],U),X!==null&&(t&&X.alternate!==null&&j.delete(X.key===null?te:X.key),R=c(X,R,te),q===null?J=X:q.sibling=X,q=X);return t&&j.forEach(function(je){return e(k,je)}),ut&&Pi(k,te),J}function L(k,R,N,U){var J=Eo(N);if(typeof J!="function")throw Error(Q(150));if(N=J.call(N),N==null)throw Error(Q(151));for(var q=J=null,j=R,te=R=0,X=null,Ce=N.next();j!==null&&!Ce.done;te++,Ce=N.next()){j.index>te?(X=j,j=null):X=j.sibling;var je=I(k,j,Ce.value,U);if(je===null){j===null&&(j=X);break}t&&j&&je.alternate===null&&e(k,j),R=c(je,R,te),q===null?J=je:q.sibling=je,q=je,j=X}if(Ce.done)return n(k,j),ut&&Pi(k,te),J;if(j===null){for(;!Ce.done;te++,Ce=N.next())Ce=_(k,Ce.value,U),Ce!==null&&(R=c(Ce,R,te),q===null?J=Ce:q.sibling=Ce,q=Ce);return ut&&Pi(k,te),J}for(j=i(k,j);!Ce.done;te++,Ce=N.next())Ce=O(j,k,te,Ce.value,U),Ce!==null&&(t&&Ce.alternate!==null&&j.delete(Ce.key===null?te:Ce.key),R=c(Ce,R,te),q===null?J=Ce:q.sibling=Ce,q=Ce);return t&&j.forEach(function(H){return e(k,H)}),ut&&Pi(k,te),J}function K(k,R,N,U){if(typeof N=="object"&&N!==null&&N.type===Es&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case ol:e:{for(var J=N.key,q=R;q!==null;){if(q.key===J){if(J=N.type,J===Es){if(q.tag===7){n(k,q.sibling),R=a(q,N.props.children),R.return=k,k=R;break e}}else if(q.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===Jr&&I0(J)===q.type){n(k,q.sibling),R=a(q,N.props),R.ref=To(k,q,N),R.return=k,k=R;break e}n(k,q);break}else e(k,q);q=q.sibling}N.type===Es?(R=Xi(N.props.children,k.mode,U,N.key),R.return=k,k=R):(U=Pl(N.type,N.key,N.props,null,k.mode,U),U.ref=To(k,R,N),U.return=k,k=U)}return f(k);case Cs:e:{for(q=N.key;R!==null;){if(R.key===q)if(R.tag===4&&R.stateNode.containerInfo===N.containerInfo&&R.stateNode.implementation===N.implementation){n(k,R.sibling),R=a(R,N.children||[]),R.return=k,k=R;break e}else{n(k,R);break}else e(k,R);R=R.sibling}R=Ju(N,k.mode,U),R.return=k,k=R}return f(k);case Jr:return q=N._init,K(k,R,q(N._payload),U)}if(Po(N))return P(k,R,N,U);if(Eo(N))return L(k,R,N,U);xl(k,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,R!==null&&R.tag===6?(n(k,R.sibling),R=a(R,N),R.return=k,k=R):(n(k,R),R=$u(N,k.mode,U),R.return=k,k=R),f(k)):n(k,R)}return K}var Xs=Pm(!0),Lm=Pm(!1),Ql=Ti(null),$l=null,Rs=null,sh=null;function oh(){sh=Rs=$l=null}function ah(t){var e=Ql.current;lt(Ql),t._currentValue=e}function Gd(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Us(t,e){$l=t,sh=Rs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(En=!0),t.firstContext=null)}function Xn(t){var e=t._currentValue;if(sh!==t)if(t={context:t,memoizedValue:e,next:null},Rs===null){if($l===null)throw Error(Q(308));Rs=t,$l.dependencies={lanes:0,firstContext:t}}else Rs=Rs.next=t;return e}var ji=null;function lh(t){ji===null?ji=[t]:ji.push(t)}function Bm(t,e,n,i){var a=e.interleaved;return a===null?(n.next=n,lh(e)):(n.next=a.next,a.next=n),e.interleaved=n,Lr(t,i)}function Lr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ei=!1;function ch(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function kr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function di(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Le&2){var a=i.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),i.pending=e,Lr(t,n)}return a=i.interleaved,a===null?(e.next=e,lh(i)):(e.next=a.next,a.next=e),i.interleaved=e,Lr(t,n)}function Nl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Kf(t,n)}}function T0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var a=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};c===null?a=c=f:c=c.next=f,n=n.next}while(n!==null);c===null?a=c=e:c=c.next=e}else a=c=e;n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Jl(t,e,n,i){var a=t.updateQueue;ei=!1;var c=a.firstBaseUpdate,f=a.lastBaseUpdate,p=a.shared.pending;if(p!==null){a.shared.pending=null;var y=p,m=y.next;y.next=null,f===null?c=m:f.next=m,f=y;var v=t.alternate;v!==null&&(v=v.updateQueue,p=v.lastBaseUpdate,p!==f&&(p===null?v.firstBaseUpdate=m:p.next=m,v.lastBaseUpdate=y))}if(c!==null){var _=a.baseState;f=0,v=m=y=null,p=c;do{var I=p.lane,O=p.eventTime;if((i&I)===I){v!==null&&(v=v.next={eventTime:O,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var P=t,L=p;switch(I=e,O=n,L.tag){case 1:if(P=L.payload,typeof P=="function"){_=P.call(O,_,I);break e}_=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=L.payload,I=typeof P=="function"?P.call(O,_,I):P,I==null)break e;_=gt({},_,I);break e;case 2:ei=!0}}p.callback!==null&&p.lane!==0&&(t.flags|=64,I=a.effects,I===null?a.effects=[p]:I.push(p))}else O={eventTime:O,lane:I,tag:p.tag,payload:p.payload,callback:p.callback,next:null},v===null?(m=v=O,y=_):v=v.next=O,f|=I;if(p=p.next,p===null){if(p=a.shared.pending,p===null)break;I=p,p=I.next,I.next=null,a.lastBaseUpdate=I,a.shared.pending=null}}while(!0);if(v===null&&(y=_),a.baseState=y,a.firstBaseUpdate=m,a.lastBaseUpdate=v,e=a.shared.interleaved,e!==null){a=e;do f|=a.lane,a=a.next;while(a!==e)}else c===null&&(a.shared.lanes=0);Zi|=f,t.lanes=f,t.memoizedState=_}}function b0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],a=i.callback;if(a!==null){if(i.callback=null,i=n,typeof a!="function")throw Error(Q(191,a));a.call(i)}}}var La={},Er=Ti(La),fa=Ti(La),ha=Ti(La);function Wi(t){if(t===La)throw Error(Q(174));return t}function uh(t,e){switch(tt(ha,e),tt(fa,t),tt(Er,La),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ad(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ad(e,t)}lt(Er),tt(Er,e)}function Ys(){lt(Er),lt(fa),lt(ha)}function Um(t){Wi(ha.current);var e=Wi(Er.current),n=Ad(e,t.type);e!==n&&(tt(fa,t),tt(Er,n))}function dh(t){fa.current===t&&(lt(Er),lt(fa))}var ft=Ti(0);function ec(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xu=[];function fh(){for(var t=0;t<Xu.length;t++)Xu[t]._workInProgressVersionPrimary=null;Xu.length=0}var Rl=Wr.ReactCurrentDispatcher,Yu=Wr.ReactCurrentBatchConfig,qi=0,ht=null,kt=null,Ut=null,tc=!1,Ho=!1,ga=0,EC=0;function Jt(){throw Error(Q(321))}function hh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ar(t[n],e[n]))return!1;return!0}function gh(t,e,n,i,a,c){if(qi=c,ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Rl.current=t===null||t.memoizedState===null?IC:TC,t=n(i,a),Ho){c=0;do{if(Ho=!1,ga=0,25<=c)throw Error(Q(301));c+=1,Ut=kt=null,e.updateQueue=null,Rl.current=bC,t=n(i,a)}while(Ho)}if(Rl.current=nc,e=kt!==null&&kt.next!==null,qi=0,Ut=kt=ht=null,tc=!1,e)throw Error(Q(300));return t}function ph(){var t=ga!==0;return ga=0,t}function wr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?ht.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function Yn(){if(kt===null){var t=ht.alternate;t=t!==null?t.memoizedState:null}else t=kt.next;var e=Ut===null?ht.memoizedState:Ut.next;if(e!==null)Ut=e,kt=t;else{if(t===null)throw Error(Q(310));kt=t,t={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Ut===null?ht.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function pa(t,e){return typeof e=="function"?e(t):e}function Ku(t){var e=Yn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var i=kt,a=i.baseQueue,c=n.pending;if(c!==null){if(a!==null){var f=a.next;a.next=c.next,c.next=f}i.baseQueue=a=c,n.pending=null}if(a!==null){c=a.next,i=i.baseState;var p=f=null,y=null,m=c;do{var v=m.lane;if((qi&v)===v)y!==null&&(y=y.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),i=m.hasEagerState?m.eagerState:t(i,m.action);else{var _={lane:v,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};y===null?(p=y=_,f=i):y=y.next=_,ht.lanes|=v,Zi|=v}m=m.next}while(m!==null&&m!==c);y===null?f=i:y.next=p,ar(i,e.memoizedState)||(En=!0),e.memoizedState=i,e.baseState=f,e.baseQueue=y,n.lastRenderedState=i}if(t=n.interleaved,t!==null){a=t;do c=a.lane,ht.lanes|=c,Zi|=c,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qu(t){var e=Yn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var i=n.dispatch,a=n.pending,c=e.memoizedState;if(a!==null){n.pending=null;var f=a=a.next;do c=t(c,f.action),f=f.next;while(f!==a);ar(c,e.memoizedState)||(En=!0),e.memoizedState=c,e.baseQueue===null&&(e.baseState=c),n.lastRenderedState=c}return[c,i]}function jm(){}function Wm(t,e){var n=ht,i=Yn(),a=e(),c=!ar(i.memoizedState,a);if(c&&(i.memoizedState=a,En=!0),i=i.queue,mh(Hm.bind(null,n,i,t),[t]),i.getSnapshot!==e||c||Ut!==null&&Ut.memoizedState.tag&1){if(n.flags|=2048,ma(9,Vm.bind(null,n,i,a,e),void 0,null),Wt===null)throw Error(Q(349));qi&30||zm(n,e,a)}return a}function zm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Vm(t,e,n,i){e.value=n,e.getSnapshot=i,Gm(e)&&Xm(t)}function Hm(t,e,n){return n(function(){Gm(e)&&Xm(t)})}function Gm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ar(t,n)}catch{return!0}}function Xm(t){var e=Lr(t,1);e!==null&&sr(e,t,1,-1)}function N0(t){var e=wr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:t},e.queue=t,t=t.dispatch=AC.bind(null,ht,t),[e.memoizedState,t]}function ma(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Ym(){return Yn().memoizedState}function Ol(t,e,n,i){var a=wr();ht.flags|=t,a.memoizedState=ma(1|e,n,void 0,i===void 0?null:i)}function Fc(t,e,n,i){var a=Yn();i=i===void 0?null:i;var c=void 0;if(kt!==null){var f=kt.memoizedState;if(c=f.destroy,i!==null&&hh(i,f.deps)){a.memoizedState=ma(e,n,c,i);return}}ht.flags|=t,a.memoizedState=ma(1|e,n,c,i)}function R0(t,e){return Ol(8390656,8,t,e)}function mh(t,e){return Fc(2048,8,t,e)}function Km(t,e){return Fc(4,2,t,e)}function qm(t,e){return Fc(4,4,t,e)}function Zm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Qm(t,e,n){return n=n!=null?n.concat([t]):null,Fc(4,4,Zm.bind(null,e,t),n)}function xh(){}function $m(t,e){var n=Yn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&hh(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Jm(t,e){var n=Yn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&hh(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function e2(t,e,n){return qi&21?(ar(n,e)||(n=sm(),ht.lanes|=n,Zi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,En=!0),t.memoizedState=n)}function vC(t,e){var n=ze;ze=n!==0&&4>n?n:4,t(!0);var i=Yu.transition;Yu.transition={};try{t(!1),e()}finally{ze=n,Yu.transition=i}}function t2(){return Yn().memoizedState}function SC(t,e,n){var i=hi(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},n2(t))r2(e,n);else if(n=Bm(t,e,n,i),n!==null){var a=un();sr(n,t,i,a),i2(n,e,i)}}function AC(t,e,n){var i=hi(t),a={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(n2(t))r2(e,a);else{var c=t.alternate;if(t.lanes===0&&(c===null||c.lanes===0)&&(c=e.lastRenderedReducer,c!==null))try{var f=e.lastRenderedState,p=c(f,n);if(a.hasEagerState=!0,a.eagerState=p,ar(p,f)){var y=e.interleaved;y===null?(a.next=a,lh(e)):(a.next=y.next,y.next=a),e.interleaved=a;return}}catch{}finally{}n=Bm(t,e,a,i),n!==null&&(a=un(),sr(n,t,i,a),i2(n,e,i))}}function n2(t){var e=t.alternate;return t===ht||e!==null&&e===ht}function r2(t,e){Ho=tc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function i2(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Kf(t,n)}}var nc={readContext:Xn,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},IC={readContext:Xn,useCallback:function(t,e){return wr().memoizedState=[t,e===void 0?null:e],t},useContext:Xn,useEffect:R0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ol(4194308,4,Zm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ol(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ol(4,2,t,e)},useMemo:function(t,e){var n=wr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=wr();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=SC.bind(null,ht,t),[i.memoizedState,t]},useRef:function(t){var e=wr();return t={current:t},e.memoizedState=t},useState:N0,useDebugValue:xh,useDeferredValue:function(t){return wr().memoizedState=t},useTransition:function(){var t=N0(!1),e=t[0];return t=vC.bind(null,t[1]),wr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ht,a=wr();if(ut){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),Wt===null)throw Error(Q(349));qi&30||zm(i,e,n)}a.memoizedState=n;var c={value:n,getSnapshot:e};return a.queue=c,R0(Hm.bind(null,i,c,t),[t]),i.flags|=2048,ma(9,Vm.bind(null,i,c,n,e),void 0,null),n},useId:function(){var t=wr(),e=Wt.identifierPrefix;if(ut){var n=Rr,i=Nr;n=(i&~(1<<32-ir(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=ga++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=EC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},TC={readContext:Xn,useCallback:$m,useContext:Xn,useEffect:mh,useImperativeHandle:Qm,useInsertionEffect:Km,useLayoutEffect:qm,useMemo:Jm,useReducer:Ku,useRef:Ym,useState:function(){return Ku(pa)},useDebugValue:xh,useDeferredValue:function(t){var e=Yn();return e2(e,kt.memoizedState,t)},useTransition:function(){var t=Ku(pa)[0],e=Yn().memoizedState;return[t,e]},useMutableSource:jm,useSyncExternalStore:Wm,useId:t2,unstable_isNewReconciler:!1},bC={readContext:Xn,useCallback:$m,useContext:Xn,useEffect:mh,useImperativeHandle:Qm,useInsertionEffect:Km,useLayoutEffect:qm,useMemo:Jm,useReducer:qu,useRef:Ym,useState:function(){return qu(pa)},useDebugValue:xh,useDeferredValue:function(t){var e=Yn();return kt===null?e.memoizedState=t:e2(e,kt.memoizedState,t)},useTransition:function(){var t=qu(pa)[0],e=Yn().memoizedState;return[t,e]},useMutableSource:jm,useSyncExternalStore:Wm,useId:t2,unstable_isNewReconciler:!1};function Jn(t,e){if(t&&t.defaultProps){e=gt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Xd(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:gt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Uc={isMounted:function(t){return(t=t._reactInternals)?is(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=un(),a=hi(t),c=kr(i,a);c.payload=e,n!=null&&(c.callback=n),e=di(t,c,a),e!==null&&(sr(e,t,a,i),Nl(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=un(),a=hi(t),c=kr(i,a);c.tag=1,c.payload=e,n!=null&&(c.callback=n),e=di(t,c,a),e!==null&&(sr(e,t,a,i),Nl(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=un(),i=hi(t),a=kr(n,i);a.tag=2,e!=null&&(a.callback=e),e=di(t,a,i),e!==null&&(sr(e,t,i,n),Nl(e,t,i))}};function O0(t,e,n,i,a,c,f){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,c,f):e.prototype&&e.prototype.isPureReactComponent?!la(n,i)||!la(a,c):!0}function s2(t,e,n){var i=!1,a=Ci,c=e.contextType;return typeof c=="object"&&c!==null?c=Xn(c):(a=An(e)?Yi:sn.current,i=e.contextTypes,c=(i=i!=null)?Hs(t,a):Ci),e=new e(n,c),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Uc,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=c),e}function k0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Uc.enqueueReplaceState(e,e.state,null)}function Yd(t,e,n,i){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs={},ch(t);var c=e.contextType;typeof c=="object"&&c!==null?a.context=Xn(c):(c=An(e)?Yi:sn.current,a.context=Hs(t,c)),a.state=t.memoizedState,c=e.getDerivedStateFromProps,typeof c=="function"&&(Xd(t,e,c,n),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&Uc.enqueueReplaceState(a,a.state,null),Jl(t,n,a,i),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Ks(t,e){try{var n="",i=e;do n+=n_(i),i=i.return;while(i);var a=n}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:t,source:e,stack:a,digest:null}}function Zu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Kd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var NC=typeof WeakMap=="function"?WeakMap:Map;function o2(t,e,n){n=kr(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){ic||(ic=!0,sf=i),Kd(t,e)},n}function a2(t,e,n){n=kr(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var a=e.value;n.payload=function(){return i(a)},n.callback=function(){Kd(t,e)}}var c=t.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(n.callback=function(){Kd(t,e),typeof i!="function"&&(fi===null?fi=new Set([this]):fi.add(this));var f=e.stack;this.componentDidCatch(e.value,{componentStack:f!==null?f:""})}),n}function D0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new NC;var a=new Set;i.set(e,a)}else a=i.get(e),a===void 0&&(a=new Set,i.set(e,a));a.has(n)||(a.add(n),t=VC.bind(null,t,e,n),e.then(t,t))}function M0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function P0(t,e,n,i,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=kr(-1,1),e.tag=2,di(n,e,1))),n.lanes|=1),t)}var RC=Wr.ReactCurrentOwner,En=!1;function ln(t,e,n,i){e.child=t===null?Lm(e,null,n,i):Xs(e,t.child,n,i)}function L0(t,e,n,i,a){n=n.render;var c=e.ref;return Us(e,a),i=gh(t,e,n,i,c,a),n=ph(),t!==null&&!En?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Br(t,e,a)):(ut&&n&&nh(e),e.flags|=1,ln(t,e,i,a),e.child)}function B0(t,e,n,i,a){if(t===null){var c=n.type;return typeof c=="function"&&!Ah(c)&&c.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=c,l2(t,e,c,i,a)):(t=Pl(n.type,null,i,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(c=t.child,!(t.lanes&a)){var f=c.memoizedProps;if(n=n.compare,n=n!==null?n:la,n(f,i)&&t.ref===e.ref)return Br(t,e,a)}return e.flags|=1,t=gi(c,i),t.ref=e.ref,t.return=e,e.child=t}function l2(t,e,n,i,a){if(t!==null){var c=t.memoizedProps;if(la(c,i)&&t.ref===e.ref)if(En=!1,e.pendingProps=i=c,(t.lanes&a)!==0)t.flags&131072&&(En=!0);else return e.lanes=t.lanes,Br(t,e,a)}return qd(t,e,n,i,a)}function c2(t,e,n){var i=e.pendingProps,a=i.children,c=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(ks,Rn),Rn|=n;else{if(!(n&1073741824))return t=c!==null?c.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,tt(ks,Rn),Rn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=c!==null?c.baseLanes:n,tt(ks,Rn),Rn|=i}else c!==null?(i=c.baseLanes|n,e.memoizedState=null):i=n,tt(ks,Rn),Rn|=i;return ln(t,e,a,n),e.child}function u2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qd(t,e,n,i,a){var c=An(n)?Yi:sn.current;return c=Hs(e,c),Us(e,a),n=gh(t,e,n,i,c,a),i=ph(),t!==null&&!En?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Br(t,e,a)):(ut&&i&&nh(e),e.flags|=1,ln(t,e,n,a),e.child)}function F0(t,e,n,i,a){if(An(n)){var c=!0;Kl(e)}else c=!1;if(Us(e,a),e.stateNode===null)kl(t,e),s2(e,n,i),Yd(e,n,i,a),i=!0;else if(t===null){var f=e.stateNode,p=e.memoizedProps;f.props=p;var y=f.context,m=n.contextType;typeof m=="object"&&m!==null?m=Xn(m):(m=An(n)?Yi:sn.current,m=Hs(e,m));var v=n.getDerivedStateFromProps,_=typeof v=="function"||typeof f.getSnapshotBeforeUpdate=="function";_||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(p!==i||y!==m)&&k0(e,f,i,m),ei=!1;var I=e.memoizedState;f.state=I,Jl(e,i,f,a),y=e.memoizedState,p!==i||I!==y||Sn.current||ei?(typeof v=="function"&&(Xd(e,n,v,i),y=e.memoizedState),(p=ei||O0(e,n,p,i,I,y,m))?(_||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(e.flags|=4194308)):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=y),f.props=i,f.state=y,f.context=m,i=p):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{f=e.stateNode,Fm(t,e),p=e.memoizedProps,m=e.type===e.elementType?p:Jn(e.type,p),f.props=m,_=e.pendingProps,I=f.context,y=n.contextType,typeof y=="object"&&y!==null?y=Xn(y):(y=An(n)?Yi:sn.current,y=Hs(e,y));var O=n.getDerivedStateFromProps;(v=typeof O=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(p!==_||I!==y)&&k0(e,f,i,y),ei=!1,I=e.memoizedState,f.state=I,Jl(e,i,f,a);var P=e.memoizedState;p!==_||I!==P||Sn.current||ei?(typeof O=="function"&&(Xd(e,n,O,i),P=e.memoizedState),(m=ei||O0(e,n,m,i,I,P,y)||!1)?(v||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,P,y),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,P,y)),typeof f.componentDidUpdate=="function"&&(e.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof f.componentDidUpdate!="function"||p===t.memoizedProps&&I===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&I===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=P),f.props=i,f.state=P,f.context=y,i=m):(typeof f.componentDidUpdate!="function"||p===t.memoizedProps&&I===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&I===t.memoizedState||(e.flags|=1024),i=!1)}return Zd(t,e,n,i,c,a)}function Zd(t,e,n,i,a,c){u2(t,e);var f=(e.flags&128)!==0;if(!i&&!f)return a&&v0(e,n,!1),Br(t,e,c);i=e.stateNode,RC.current=e;var p=f&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&f?(e.child=Xs(e,t.child,null,c),e.child=Xs(e,null,p,c)):ln(t,e,p,c),e.memoizedState=i.state,a&&v0(e,n,!0),e.child}function d2(t){var e=t.stateNode;e.pendingContext?E0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&E0(t,e.context,!1),uh(t,e.containerInfo)}function U0(t,e,n,i,a){return Gs(),ih(a),e.flags|=256,ln(t,e,n,i),e.child}var Qd={dehydrated:null,treeContext:null,retryLane:0};function $d(t){return{baseLanes:t,cachePool:null,transitions:null}}function f2(t,e,n){var i=e.pendingProps,a=ft.current,c=!1,f=(e.flags&128)!==0,p;if((p=f)||(p=t!==null&&t.memoizedState===null?!1:(a&2)!==0),p?(c=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),tt(ft,a&1),t===null)return Hd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(f=i.children,t=i.fallback,c?(i=e.mode,c=e.child,f={mode:"hidden",children:f},!(i&1)&&c!==null?(c.childLanes=0,c.pendingProps=f):c=zc(f,i,0,null),t=Xi(t,i,n,null),c.return=e,t.return=e,c.sibling=t,e.child=c,e.child.memoizedState=$d(n),e.memoizedState=Qd,t):yh(e,f));if(a=t.memoizedState,a!==null&&(p=a.dehydrated,p!==null))return OC(t,e,f,i,p,a,n);if(c){c=i.fallback,f=e.mode,a=t.child,p=a.sibling;var y={mode:"hidden",children:i.children};return!(f&1)&&e.child!==a?(i=e.child,i.childLanes=0,i.pendingProps=y,e.deletions=null):(i=gi(a,y),i.subtreeFlags=a.subtreeFlags&14680064),p!==null?c=gi(p,c):(c=Xi(c,f,n,null),c.flags|=2),c.return=e,i.return=e,i.sibling=c,e.child=i,i=c,c=e.child,f=t.child.memoizedState,f=f===null?$d(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},c.memoizedState=f,c.childLanes=t.childLanes&~n,e.memoizedState=Qd,i}return c=t.child,t=c.sibling,i=gi(c,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function yh(t,e){return e=zc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function yl(t,e,n,i){return i!==null&&ih(i),Xs(e,t.child,null,n),t=yh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function OC(t,e,n,i,a,c,f){if(n)return e.flags&256?(e.flags&=-257,i=Zu(Error(Q(422))),yl(t,e,f,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(c=i.fallback,a=e.mode,i=zc({mode:"visible",children:i.children},a,0,null),c=Xi(c,a,f,null),c.flags|=2,i.return=e,c.return=e,i.sibling=c,e.child=i,e.mode&1&&Xs(e,t.child,null,f),e.child.memoizedState=$d(f),e.memoizedState=Qd,c);if(!(e.mode&1))return yl(t,e,f,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var p=i.dgst;return i=p,c=Error(Q(419)),i=Zu(c,i,void 0),yl(t,e,f,i)}if(p=(f&t.childLanes)!==0,En||p){if(i=Wt,i!==null){switch(f&-f){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|f)?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,Lr(t,a),sr(i,t,a,-1))}return Sh(),i=Zu(Error(Q(421))),yl(t,e,f,i)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=HC.bind(null,t),a._reactRetry=e,null):(t=c.treeContext,On=ui(a.nextSibling),kn=e,ut=!0,tr=null,t!==null&&(Wn[zn++]=Nr,Wn[zn++]=Rr,Wn[zn++]=Ki,Nr=t.id,Rr=t.overflow,Ki=e),e=yh(e,i.children),e.flags|=4096,e)}function j0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Gd(t.return,e,n)}function Qu(t,e,n,i,a){var c=t.memoizedState;c===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a}:(c.isBackwards=e,c.rendering=null,c.renderingStartTime=0,c.last=i,c.tail=n,c.tailMode=a)}function h2(t,e,n){var i=e.pendingProps,a=i.revealOrder,c=i.tail;if(ln(t,e,i.children,n),i=ft.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&j0(t,n,e);else if(t.tag===19)j0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(tt(ft,i),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&ec(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),Qu(e,!1,a,n,c);break;case"backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&ec(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}Qu(e,!0,n,null,c);break;case"together":Qu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Br(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Zi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=gi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function kC(t,e,n){switch(e.tag){case 3:d2(e),Gs();break;case 5:Um(e);break;case 1:An(e.type)&&Kl(e);break;case 4:uh(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,a=e.memoizedProps.value;tt(Ql,i._currentValue),i._currentValue=a;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(tt(ft,ft.current&1),e.flags|=128,null):n&e.child.childLanes?f2(t,e,n):(tt(ft,ft.current&1),t=Br(t,e,n),t!==null?t.sibling:null);tt(ft,ft.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return h2(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),tt(ft,ft.current),i)break;return null;case 22:case 23:return e.lanes=0,c2(t,e,n)}return Br(t,e,n)}var g2,Jd,p2,m2;g2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jd=function(){};p2=function(t,e,n,i){var a=t.memoizedProps;if(a!==i){t=e.stateNode,Wi(Er.current);var c=null;switch(n){case"input":a=Cd(t,a),i=Cd(t,i),c=[];break;case"select":a=gt({},a,{value:void 0}),i=gt({},i,{value:void 0}),c=[];break;case"textarea":a=Sd(t,a),i=Sd(t,i),c=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Xl)}Id(n,i);var f;n=null;for(m in a)if(!i.hasOwnProperty(m)&&a.hasOwnProperty(m)&&a[m]!=null)if(m==="style"){var p=a[m];for(f in p)p.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(ta.hasOwnProperty(m)?c||(c=[]):(c=c||[]).push(m,null));for(m in i){var y=i[m];if(p=a!=null?a[m]:void 0,i.hasOwnProperty(m)&&y!==p&&(y!=null||p!=null))if(m==="style")if(p){for(f in p)!p.hasOwnProperty(f)||y&&y.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in y)y.hasOwnProperty(f)&&p[f]!==y[f]&&(n||(n={}),n[f]=y[f])}else n||(c||(c=[]),c.push(m,n)),n=y;else m==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,p=p?p.__html:void 0,y!=null&&p!==y&&(c=c||[]).push(m,y)):m==="children"?typeof y!="string"&&typeof y!="number"||(c=c||[]).push(m,""+y):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(ta.hasOwnProperty(m)?(y!=null&&m==="onScroll"&&it("scroll",t),c||p===y||(c=[])):(c=c||[]).push(m,y))}n&&(c=c||[]).push("style",n);var m=c;(e.updateQueue=m)&&(e.flags|=4)}};m2=function(t,e,n,i){n!==i&&(e.flags|=4)};function bo(t,e){if(!ut)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function en(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function DC(t,e,n){var i=e.pendingProps;switch(rh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(e),null;case 1:return An(e.type)&&Yl(),en(e),null;case 3:return i=e.stateNode,Ys(),lt(Sn),lt(sn),fh(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(ml(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tr!==null&&(lf(tr),tr=null))),Jd(t,e),en(e),null;case 5:dh(e);var a=Wi(ha.current);if(n=e.type,t!==null&&e.stateNode!=null)p2(t,e,n,i,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Q(166));return en(e),null}if(t=Wi(Er.current),ml(e)){i=e.stateNode,n=e.type;var c=e.memoizedProps;switch(i[_r]=e,i[da]=c,t=(e.mode&1)!==0,n){case"dialog":it("cancel",i),it("close",i);break;case"iframe":case"object":case"embed":it("load",i);break;case"video":case"audio":for(a=0;a<Bo.length;a++)it(Bo[a],i);break;case"source":it("error",i);break;case"img":case"image":case"link":it("error",i),it("load",i);break;case"details":it("toggle",i);break;case"input":q1(i,c),it("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!c.multiple},it("invalid",i);break;case"textarea":Q1(i,c),it("invalid",i)}Id(n,c),a=null;for(var f in c)if(c.hasOwnProperty(f)){var p=c[f];f==="children"?typeof p=="string"?i.textContent!==p&&(c.suppressHydrationWarning!==!0&&pl(i.textContent,p,t),a=["children",p]):typeof p=="number"&&i.textContent!==""+p&&(c.suppressHydrationWarning!==!0&&pl(i.textContent,p,t),a=["children",""+p]):ta.hasOwnProperty(f)&&p!=null&&f==="onScroll"&&it("scroll",i)}switch(n){case"input":al(i),Z1(i,c,!0);break;case"textarea":al(i),$1(i);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(i.onclick=Xl)}i=a,e.updateQueue=i,i!==null&&(e.flags|=4)}else{f=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Hp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=f.createElement(n,{is:i.is}):(t=f.createElement(n),n==="select"&&(f=t,i.multiple?f.multiple=!0:i.size&&(f.size=i.size))):t=f.createElementNS(t,n),t[_r]=e,t[da]=i,g2(t,e,!1,!1),e.stateNode=t;e:{switch(f=Td(n,i),n){case"dialog":it("cancel",t),it("close",t),a=i;break;case"iframe":case"object":case"embed":it("load",t),a=i;break;case"video":case"audio":for(a=0;a<Bo.length;a++)it(Bo[a],t);a=i;break;case"source":it("error",t),a=i;break;case"img":case"image":case"link":it("error",t),it("load",t),a=i;break;case"details":it("toggle",t),a=i;break;case"input":q1(t,i),a=Cd(t,i),it("invalid",t);break;case"option":a=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},a=gt({},i,{value:void 0}),it("invalid",t);break;case"textarea":Q1(t,i),a=Sd(t,i),it("invalid",t);break;default:a=i}Id(n,a),p=a;for(c in p)if(p.hasOwnProperty(c)){var y=p[c];c==="style"?Yp(t,y):c==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,y!=null&&Gp(t,y)):c==="children"?typeof y=="string"?(n!=="textarea"||y!=="")&&na(t,y):typeof y=="number"&&na(t,""+y):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ta.hasOwnProperty(c)?y!=null&&c==="onScroll"&&it("scroll",t):y!=null&&zf(t,c,y,f))}switch(n){case"input":al(t),Z1(t,i,!1);break;case"textarea":al(t),$1(t);break;case"option":i.value!=null&&t.setAttribute("value",""+_i(i.value));break;case"select":t.multiple=!!i.multiple,c=i.value,c!=null?Ps(t,!!i.multiple,c,!1):i.defaultValue!=null&&Ps(t,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=Xl)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return en(e),null;case 6:if(t&&e.stateNode!=null)m2(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Q(166));if(n=Wi(ha.current),Wi(Er.current),ml(e)){if(i=e.stateNode,n=e.memoizedProps,i[_r]=e,(c=i.nodeValue!==n)&&(t=kn,t!==null))switch(t.tag){case 3:pl(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&pl(i.nodeValue,n,(t.mode&1)!==0)}c&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[_r]=e,e.stateNode=i}return en(e),null;case 13:if(lt(ft),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ut&&On!==null&&e.mode&1&&!(e.flags&128))Mm(),Gs(),e.flags|=98560,c=!1;else if(c=ml(e),i!==null&&i.dehydrated!==null){if(t===null){if(!c)throw Error(Q(318));if(c=e.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(Q(317));c[_r]=e}else Gs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;en(e),c=!1}else tr!==null&&(lf(tr),tr=null),c=!0;if(!c)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||ft.current&1?Pt===0&&(Pt=3):Sh())),e.updateQueue!==null&&(e.flags|=4),en(e),null);case 4:return Ys(),Jd(t,e),t===null&&ca(e.stateNode.containerInfo),en(e),null;case 10:return ah(e.type._context),en(e),null;case 17:return An(e.type)&&Yl(),en(e),null;case 19:if(lt(ft),c=e.memoizedState,c===null)return en(e),null;if(i=(e.flags&128)!==0,f=c.rendering,f===null)if(i)bo(c,!1);else{if(Pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(f=ec(t),f!==null){for(e.flags|=128,bo(c,!1),i=f.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)c=n,t=i,c.flags&=14680066,f=c.alternate,f===null?(c.childLanes=0,c.lanes=t,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=f.childLanes,c.lanes=f.lanes,c.child=f.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=f.memoizedProps,c.memoizedState=f.memoizedState,c.updateQueue=f.updateQueue,c.type=f.type,t=f.dependencies,c.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return tt(ft,ft.current&1|2),e.child}t=t.sibling}c.tail!==null&&At()>qs&&(e.flags|=128,i=!0,bo(c,!1),e.lanes=4194304)}else{if(!i)if(t=ec(f),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),bo(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!ut)return en(e),null}else 2*At()-c.renderingStartTime>qs&&n!==1073741824&&(e.flags|=128,i=!0,bo(c,!1),e.lanes=4194304);c.isBackwards?(f.sibling=e.child,e.child=f):(n=c.last,n!==null?n.sibling=f:e.child=f,c.last=f)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=At(),e.sibling=null,n=ft.current,tt(ft,i?n&1|2:n&1),e):(en(e),null);case 22:case 23:return vh(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Rn&1073741824&&(en(e),e.subtreeFlags&6&&(e.flags|=8192)):en(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function MC(t,e){switch(rh(e),e.tag){case 1:return An(e.type)&&Yl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ys(),lt(Sn),lt(sn),fh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return dh(e),null;case 13:if(lt(ft),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Gs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return lt(ft),null;case 4:return Ys(),null;case 10:return ah(e.type._context),null;case 22:case 23:return vh(),null;case 24:return null;default:return null}}var wl=!1,rn=!1,PC=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Os(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){wt(t,e,i)}else n.current=null}function ef(t,e,n){try{n()}catch(i){wt(t,e,i)}}var W0=!1;function LC(t,e){if(Bd=Vl,t=Cm(),th(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var a=i.anchorOffset,c=i.focusNode;i=i.focusOffset;try{n.nodeType,c.nodeType}catch{n=null;break e}var f=0,p=-1,y=-1,m=0,v=0,_=t,I=null;t:for(;;){for(var O;_!==n||a!==0&&_.nodeType!==3||(p=f+a),_!==c||i!==0&&_.nodeType!==3||(y=f+i),_.nodeType===3&&(f+=_.nodeValue.length),(O=_.firstChild)!==null;)I=_,_=O;for(;;){if(_===t)break t;if(I===n&&++m===a&&(p=f),I===c&&++v===i&&(y=f),(O=_.nextSibling)!==null)break;_=I,I=_.parentNode}_=O}n=p===-1||y===-1?null:{start:p,end:y}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fd={focusedElem:t,selectionRange:n},Vl=!1,ce=e;ce!==null;)if(e=ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ce=t;else for(;ce!==null;){e=ce;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var L=P.memoizedProps,K=P.memoizedState,k=e.stateNode,R=k.getSnapshotBeforeUpdate(e.elementType===e.type?L:Jn(e.type,L),K);k.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(U){wt(e,e.return,U)}if(t=e.sibling,t!==null){t.return=e.return,ce=t;break}ce=e.return}return P=W0,W0=!1,P}function Go(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&t)===t){var c=a.destroy;a.destroy=void 0,c!==void 0&&ef(e,n,c)}a=a.next}while(a!==i)}}function jc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function tf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function x2(t){var e=t.alternate;e!==null&&(t.alternate=null,x2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_r],delete e[da],delete e[Wd],delete e[yC],delete e[wC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function y2(t){return t.tag===5||t.tag===3||t.tag===4}function z0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||y2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xl));else if(i!==4&&(t=t.child,t!==null))for(nf(t,e,n),t=t.sibling;t!==null;)nf(t,e,n),t=t.sibling}function rf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(rf(t,e,n),t=t.sibling;t!==null;)rf(t,e,n),t=t.sibling}var Xt=null,er=!1;function $r(t,e,n){for(n=n.child;n!==null;)w2(t,e,n),n=n.sibling}function w2(t,e,n){if(Cr&&typeof Cr.onCommitFiberUnmount=="function")try{Cr.onCommitFiberUnmount(kc,n)}catch{}switch(n.tag){case 5:rn||Os(n,e);case 6:var i=Xt,a=er;Xt=null,$r(t,e,n),Xt=i,er=a,Xt!==null&&(er?(t=Xt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xt.removeChild(n.stateNode));break;case 18:Xt!==null&&(er?(t=Xt,n=n.stateNode,t.nodeType===8?Hu(t.parentNode,n):t.nodeType===1&&Hu(t,n),oa(t)):Hu(Xt,n.stateNode));break;case 4:i=Xt,a=er,Xt=n.stateNode.containerInfo,er=!0,$r(t,e,n),Xt=i,er=a;break;case 0:case 11:case 14:case 15:if(!rn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var c=a,f=c.destroy;c=c.tag,f!==void 0&&(c&2||c&4)&&ef(n,e,f),a=a.next}while(a!==i)}$r(t,e,n);break;case 1:if(!rn&&(Os(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(p){wt(n,e,p)}$r(t,e,n);break;case 21:$r(t,e,n);break;case 22:n.mode&1?(rn=(i=rn)||n.memoizedState!==null,$r(t,e,n),rn=i):$r(t,e,n);break;default:$r(t,e,n)}}function V0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new PC),e.forEach(function(i){var a=GC.bind(null,t,i);n.has(i)||(n.add(i),i.then(a,a))})}}function $n(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];try{var c=t,f=e,p=f;e:for(;p!==null;){switch(p.tag){case 5:Xt=p.stateNode,er=!1;break e;case 3:Xt=p.stateNode.containerInfo,er=!0;break e;case 4:Xt=p.stateNode.containerInfo,er=!0;break e}p=p.return}if(Xt===null)throw Error(Q(160));w2(c,f,a),Xt=null,er=!1;var y=a.alternate;y!==null&&(y.return=null),a.return=null}catch(m){wt(a,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)_2(e,t),e=e.sibling}function _2(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($n(e,t),yr(t),i&4){try{Go(3,t,t.return),jc(3,t)}catch(L){wt(t,t.return,L)}try{Go(5,t,t.return)}catch(L){wt(t,t.return,L)}}break;case 1:$n(e,t),yr(t),i&512&&n!==null&&Os(n,n.return);break;case 5:if($n(e,t),yr(t),i&512&&n!==null&&Os(n,n.return),t.flags&32){var a=t.stateNode;try{na(a,"")}catch(L){wt(t,t.return,L)}}if(i&4&&(a=t.stateNode,a!=null)){var c=t.memoizedProps,f=n!==null?n.memoizedProps:c,p=t.type,y=t.updateQueue;if(t.updateQueue=null,y!==null)try{p==="input"&&c.type==="radio"&&c.name!=null&&zp(a,c),Td(p,f);var m=Td(p,c);for(f=0;f<y.length;f+=2){var v=y[f],_=y[f+1];v==="style"?Yp(a,_):v==="dangerouslySetInnerHTML"?Gp(a,_):v==="children"?na(a,_):zf(a,v,_,m)}switch(p){case"input":Ed(a,c);break;case"textarea":Vp(a,c);break;case"select":var I=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var O=c.value;O!=null?Ps(a,!!c.multiple,O,!1):I!==!!c.multiple&&(c.defaultValue!=null?Ps(a,!!c.multiple,c.defaultValue,!0):Ps(a,!!c.multiple,c.multiple?[]:"",!1))}a[da]=c}catch(L){wt(t,t.return,L)}}break;case 6:if($n(e,t),yr(t),i&4){if(t.stateNode===null)throw Error(Q(162));a=t.stateNode,c=t.memoizedProps;try{a.nodeValue=c}catch(L){wt(t,t.return,L)}}break;case 3:if($n(e,t),yr(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{oa(e.containerInfo)}catch(L){wt(t,t.return,L)}break;case 4:$n(e,t),yr(t);break;case 13:$n(e,t),yr(t),a=t.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(Ch=At())),i&4&&V0(t);break;case 22:if(v=n!==null&&n.memoizedState!==null,t.mode&1?(rn=(m=rn)||v,$n(e,t),rn=m):$n(e,t),yr(t),i&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!v&&t.mode&1)for(ce=t,v=t.child;v!==null;){for(_=ce=v;ce!==null;){switch(I=ce,O=I.child,I.tag){case 0:case 11:case 14:case 15:Go(4,I,I.return);break;case 1:Os(I,I.return);var P=I.stateNode;if(typeof P.componentWillUnmount=="function"){i=I,n=I.return;try{e=i,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(L){wt(i,n,L)}}break;case 5:Os(I,I.return);break;case 22:if(I.memoizedState!==null){G0(_);continue}}O!==null?(O.return=I,ce=O):G0(_)}v=v.sibling}e:for(v=null,_=t;;){if(_.tag===5){if(v===null){v=_;try{a=_.stateNode,m?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(p=_.stateNode,y=_.memoizedProps.style,f=y!=null&&y.hasOwnProperty("display")?y.display:null,p.style.display=Xp("display",f))}catch(L){wt(t,t.return,L)}}}else if(_.tag===6){if(v===null)try{_.stateNode.nodeValue=m?"":_.memoizedProps}catch(L){wt(t,t.return,L)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===t)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===t)break e;for(;_.sibling===null;){if(_.return===null||_.return===t)break e;v===_&&(v=null),_=_.return}v===_&&(v=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:$n(e,t),yr(t),i&4&&V0(t);break;case 21:break;default:$n(e,t),yr(t)}}function yr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(y2(n)){var i=n;break e}n=n.return}throw Error(Q(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(na(a,""),i.flags&=-33);var c=z0(t);rf(t,c,a);break;case 3:case 4:var f=i.stateNode.containerInfo,p=z0(t);nf(t,p,f);break;default:throw Error(Q(161))}}catch(y){wt(t,t.return,y)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function BC(t,e,n){ce=t,C2(t)}function C2(t,e,n){for(var i=(t.mode&1)!==0;ce!==null;){var a=ce,c=a.child;if(a.tag===22&&i){var f=a.memoizedState!==null||wl;if(!f){var p=a.alternate,y=p!==null&&p.memoizedState!==null||rn;p=wl;var m=rn;if(wl=f,(rn=y)&&!m)for(ce=a;ce!==null;)f=ce,y=f.child,f.tag===22&&f.memoizedState!==null?X0(a):y!==null?(y.return=f,ce=y):X0(a);for(;c!==null;)ce=c,C2(c),c=c.sibling;ce=a,wl=p,rn=m}H0(t)}else a.subtreeFlags&8772&&c!==null?(c.return=a,ce=c):H0(t)}}function H0(t){for(;ce!==null;){var e=ce;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rn||jc(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!rn)if(n===null)i.componentDidMount();else{var a=e.elementType===e.type?n.memoizedProps:Jn(e.type,n.memoizedProps);i.componentDidUpdate(a,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var c=e.updateQueue;c!==null&&b0(e,c,i);break;case 3:var f=e.updateQueue;if(f!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}b0(e,f,n)}break;case 5:var p=e.stateNode;if(n===null&&e.flags&4){n=p;var y=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":y.autoFocus&&n.focus();break;case"img":y.src&&(n.src=y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var v=m.memoizedState;if(v!==null){var _=v.dehydrated;_!==null&&oa(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}rn||e.flags&512&&tf(e)}catch(I){wt(e,e.return,I)}}if(e===t){ce=null;break}if(n=e.sibling,n!==null){n.return=e.return,ce=n;break}ce=e.return}}function G0(t){for(;ce!==null;){var e=ce;if(e===t){ce=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ce=n;break}ce=e.return}}function X0(t){for(;ce!==null;){var e=ce;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{jc(4,e)}catch(y){wt(e,n,y)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var a=e.return;try{i.componentDidMount()}catch(y){wt(e,a,y)}}var c=e.return;try{tf(e)}catch(y){wt(e,c,y)}break;case 5:var f=e.return;try{tf(e)}catch(y){wt(e,f,y)}}}catch(y){wt(e,e.return,y)}if(e===t){ce=null;break}var p=e.sibling;if(p!==null){p.return=e.return,ce=p;break}ce=e.return}}var FC=Math.ceil,rc=Wr.ReactCurrentDispatcher,wh=Wr.ReactCurrentOwner,Gn=Wr.ReactCurrentBatchConfig,Le=0,Wt=null,Tt=null,Kt=0,Rn=0,ks=Ti(0),Pt=0,xa=null,Zi=0,Wc=0,_h=0,Xo=null,Cn=null,Ch=0,qs=1/0,Tr=null,ic=!1,sf=null,fi=null,_l=!1,ii=null,sc=0,Yo=0,of=null,Dl=-1,Ml=0;function un(){return Le&6?At():Dl!==-1?Dl:Dl=At()}function hi(t){return t.mode&1?Le&2&&Kt!==0?Kt&-Kt:CC.transition!==null?(Ml===0&&(Ml=sm()),Ml):(t=ze,t!==0||(t=window.event,t=t===void 0?16:fm(t.type)),t):1}function sr(t,e,n,i){if(50<Yo)throw Yo=0,of=null,Error(Q(185));Da(t,n,i),(!(Le&2)||t!==Wt)&&(t===Wt&&(!(Le&2)&&(Wc|=n),Pt===4&&ni(t,Kt)),In(t,i),n===1&&Le===0&&!(e.mode&1)&&(qs=At()+500,Bc&&bi()))}function In(t,e){var n=t.callbackNode;C_(t,e);var i=zl(t,t===Wt?Kt:0);if(i===0)n!==null&&t0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&t0(n),e===1)t.tag===0?_C(Y0.bind(null,t)):Om(Y0.bind(null,t)),mC(function(){!(Le&6)&&bi()}),n=null;else{switch(om(i)){case 1:n=Yf;break;case 4:n=rm;break;case 16:n=Wl;break;case 536870912:n=im;break;default:n=Wl}n=N2(n,E2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function E2(t,e){if(Dl=-1,Ml=0,Le&6)throw Error(Q(327));var n=t.callbackNode;if(js()&&t.callbackNode!==n)return null;var i=zl(t,t===Wt?Kt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=oc(t,i);else{e=i;var a=Le;Le|=2;var c=S2();(Wt!==t||Kt!==e)&&(Tr=null,qs=At()+500,Gi(t,e));do try{WC();break}catch(p){v2(t,p)}while(!0);oh(),rc.current=c,Le=a,Tt!==null?e=0:(Wt=null,Kt=0,e=Pt)}if(e!==0){if(e===2&&(a=kd(t),a!==0&&(i=a,e=af(t,a))),e===1)throw n=xa,Gi(t,0),ni(t,i),In(t,At()),n;if(e===6)ni(t,i);else{if(a=t.current.alternate,!(i&30)&&!UC(a)&&(e=oc(t,i),e===2&&(c=kd(t),c!==0&&(i=c,e=af(t,c))),e===1))throw n=xa,Gi(t,0),ni(t,i),In(t,At()),n;switch(t.finishedWork=a,t.finishedLanes=i,e){case 0:case 1:throw Error(Q(345));case 2:Li(t,Cn,Tr);break;case 3:if(ni(t,i),(i&130023424)===i&&(e=Ch+500-At(),10<e)){if(zl(t,0)!==0)break;if(a=t.suspendedLanes,(a&i)!==i){un(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=jd(Li.bind(null,t,Cn,Tr),e);break}Li(t,Cn,Tr);break;case 4:if(ni(t,i),(i&4194240)===i)break;for(e=t.eventTimes,a=-1;0<i;){var f=31-ir(i);c=1<<f,f=e[f],f>a&&(a=f),i&=~c}if(i=a,i=At()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*FC(i/1960))-i,10<i){t.timeoutHandle=jd(Li.bind(null,t,Cn,Tr),i);break}Li(t,Cn,Tr);break;case 5:Li(t,Cn,Tr);break;default:throw Error(Q(329))}}}return In(t,At()),t.callbackNode===n?E2.bind(null,t):null}function af(t,e){var n=Xo;return t.current.memoizedState.isDehydrated&&(Gi(t,e).flags|=256),t=oc(t,e),t!==2&&(e=Cn,Cn=n,e!==null&&lf(e)),t}function lf(t){Cn===null?Cn=t:Cn.push.apply(Cn,t)}function UC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var a=n[i],c=a.getSnapshot;a=a.value;try{if(!ar(c(),a))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ni(t,e){for(e&=~_h,e&=~Wc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ir(e),i=1<<n;t[n]=-1,e&=~i}}function Y0(t){if(Le&6)throw Error(Q(327));js();var e=zl(t,0);if(!(e&1))return In(t,At()),null;var n=oc(t,e);if(t.tag!==0&&n===2){var i=kd(t);i!==0&&(e=i,n=af(t,i))}if(n===1)throw n=xa,Gi(t,0),ni(t,e),In(t,At()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Li(t,Cn,Tr),In(t,At()),null}function Eh(t,e){var n=Le;Le|=1;try{return t(e)}finally{Le=n,Le===0&&(qs=At()+500,Bc&&bi())}}function Qi(t){ii!==null&&ii.tag===0&&!(Le&6)&&js();var e=Le;Le|=1;var n=Gn.transition,i=ze;try{if(Gn.transition=null,ze=1,t)return t()}finally{ze=i,Gn.transition=n,Le=e,!(Le&6)&&bi()}}function vh(){Rn=ks.current,lt(ks)}function Gi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,pC(n)),Tt!==null)for(n=Tt.return;n!==null;){var i=n;switch(rh(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Yl();break;case 3:Ys(),lt(Sn),lt(sn),fh();break;case 5:dh(i);break;case 4:Ys();break;case 13:lt(ft);break;case 19:lt(ft);break;case 10:ah(i.type._context);break;case 22:case 23:vh()}n=n.return}if(Wt=t,Tt=t=gi(t.current,null),Kt=Rn=e,Pt=0,xa=null,_h=Wc=Zi=0,Cn=Xo=null,ji!==null){for(e=0;e<ji.length;e++)if(n=ji[e],i=n.interleaved,i!==null){n.interleaved=null;var a=i.next,c=n.pending;if(c!==null){var f=c.next;c.next=a,i.next=f}n.pending=i}ji=null}return t}function v2(t,e){do{var n=Tt;try{if(oh(),Rl.current=nc,tc){for(var i=ht.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}tc=!1}if(qi=0,Ut=kt=ht=null,Ho=!1,ga=0,wh.current=null,n===null||n.return===null){Pt=1,xa=e,Tt=null;break}e:{var c=t,f=n.return,p=n,y=e;if(e=Kt,p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){var m=y,v=p,_=v.tag;if(!(v.mode&1)&&(_===0||_===11||_===15)){var I=v.alternate;I?(v.updateQueue=I.updateQueue,v.memoizedState=I.memoizedState,v.lanes=I.lanes):(v.updateQueue=null,v.memoizedState=null)}var O=M0(f);if(O!==null){O.flags&=-257,P0(O,f,p,c,e),O.mode&1&&D0(c,m,e),e=O,y=m;var P=e.updateQueue;if(P===null){var L=new Set;L.add(y),e.updateQueue=L}else P.add(y);break e}else{if(!(e&1)){D0(c,m,e),Sh();break e}y=Error(Q(426))}}else if(ut&&p.mode&1){var K=M0(f);if(K!==null){!(K.flags&65536)&&(K.flags|=256),P0(K,f,p,c,e),ih(Ks(y,p));break e}}c=y=Ks(y,p),Pt!==4&&(Pt=2),Xo===null?Xo=[c]:Xo.push(c),c=f;do{switch(c.tag){case 3:c.flags|=65536,e&=-e,c.lanes|=e;var k=o2(c,y,e);T0(c,k);break e;case 1:p=y;var R=c.type,N=c.stateNode;if(!(c.flags&128)&&(typeof R.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(fi===null||!fi.has(N)))){c.flags|=65536,e&=-e,c.lanes|=e;var U=a2(c,p,e);T0(c,U);break e}}c=c.return}while(c!==null)}I2(n)}catch(J){e=J,Tt===n&&n!==null&&(Tt=n=n.return);continue}break}while(!0)}function S2(){var t=rc.current;return rc.current=nc,t===null?nc:t}function Sh(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Wt===null||!(Zi&268435455)&&!(Wc&268435455)||ni(Wt,Kt)}function oc(t,e){var n=Le;Le|=2;var i=S2();(Wt!==t||Kt!==e)&&(Tr=null,Gi(t,e));do try{jC();break}catch(a){v2(t,a)}while(!0);if(oh(),Le=n,rc.current=i,Tt!==null)throw Error(Q(261));return Wt=null,Kt=0,Pt}function jC(){for(;Tt!==null;)A2(Tt)}function WC(){for(;Tt!==null&&!f_();)A2(Tt)}function A2(t){var e=b2(t.alternate,t,Rn);t.memoizedProps=t.pendingProps,e===null?I2(t):Tt=e,wh.current=null}function I2(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=MC(n,e),n!==null){n.flags&=32767,Tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pt=6,Tt=null;return}}else if(n=DC(n,e,Rn),n!==null){Tt=n;return}if(e=e.sibling,e!==null){Tt=e;return}Tt=e=t}while(e!==null);Pt===0&&(Pt=5)}function Li(t,e,n){var i=ze,a=Gn.transition;try{Gn.transition=null,ze=1,zC(t,e,n,i)}finally{Gn.transition=a,ze=i}return null}function zC(t,e,n,i){do js();while(ii!==null);if(Le&6)throw Error(Q(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var c=n.lanes|n.childLanes;if(E_(t,c),t===Wt&&(Tt=Wt=null,Kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_l||(_l=!0,N2(Wl,function(){return js(),null})),c=(n.flags&15990)!==0,n.subtreeFlags&15990||c){c=Gn.transition,Gn.transition=null;var f=ze;ze=1;var p=Le;Le|=4,wh.current=null,LC(t,n),_2(n,t),lC(Fd),Vl=!!Bd,Fd=Bd=null,t.current=n,BC(n),h_(),Le=p,ze=f,Gn.transition=c}else t.current=n;if(_l&&(_l=!1,ii=t,sc=a),c=t.pendingLanes,c===0&&(fi=null),m_(n.stateNode),In(t,At()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)a=e[n],i(a.value,{componentStack:a.stack,digest:a.digest});if(ic)throw ic=!1,t=sf,sf=null,t;return sc&1&&t.tag!==0&&js(),c=t.pendingLanes,c&1?t===of?Yo++:(Yo=0,of=t):Yo=0,bi(),null}function js(){if(ii!==null){var t=om(sc),e=Gn.transition,n=ze;try{if(Gn.transition=null,ze=16>t?16:t,ii===null)var i=!1;else{if(t=ii,ii=null,sc=0,Le&6)throw Error(Q(331));var a=Le;for(Le|=4,ce=t.current;ce!==null;){var c=ce,f=c.child;if(ce.flags&16){var p=c.deletions;if(p!==null){for(var y=0;y<p.length;y++){var m=p[y];for(ce=m;ce!==null;){var v=ce;switch(v.tag){case 0:case 11:case 15:Go(8,v,c)}var _=v.child;if(_!==null)_.return=v,ce=_;else for(;ce!==null;){v=ce;var I=v.sibling,O=v.return;if(x2(v),v===m){ce=null;break}if(I!==null){I.return=O,ce=I;break}ce=O}}}var P=c.alternate;if(P!==null){var L=P.child;if(L!==null){P.child=null;do{var K=L.sibling;L.sibling=null,L=K}while(L!==null)}}ce=c}}if(c.subtreeFlags&2064&&f!==null)f.return=c,ce=f;else e:for(;ce!==null;){if(c=ce,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Go(9,c,c.return)}var k=c.sibling;if(k!==null){k.return=c.return,ce=k;break e}ce=c.return}}var R=t.current;for(ce=R;ce!==null;){f=ce;var N=f.child;if(f.subtreeFlags&2064&&N!==null)N.return=f,ce=N;else e:for(f=R;ce!==null;){if(p=ce,p.flags&2048)try{switch(p.tag){case 0:case 11:case 15:jc(9,p)}}catch(J){wt(p,p.return,J)}if(p===f){ce=null;break e}var U=p.sibling;if(U!==null){U.return=p.return,ce=U;break e}ce=p.return}}if(Le=a,bi(),Cr&&typeof Cr.onPostCommitFiberRoot=="function")try{Cr.onPostCommitFiberRoot(kc,t)}catch{}i=!0}return i}finally{ze=n,Gn.transition=e}}return!1}function K0(t,e,n){e=Ks(n,e),e=o2(t,e,1),t=di(t,e,1),e=un(),t!==null&&(Da(t,1,e),In(t,e))}function wt(t,e,n){if(t.tag===3)K0(t,t,n);else for(;e!==null;){if(e.tag===3){K0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(fi===null||!fi.has(i))){t=Ks(n,t),t=a2(e,t,1),e=di(e,t,1),t=un(),e!==null&&(Da(e,1,t),In(e,t));break}}e=e.return}}function VC(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=un(),t.pingedLanes|=t.suspendedLanes&n,Wt===t&&(Kt&n)===n&&(Pt===4||Pt===3&&(Kt&130023424)===Kt&&500>At()-Ch?Gi(t,0):_h|=n),In(t,e)}function T2(t,e){e===0&&(t.mode&1?(e=ul,ul<<=1,!(ul&130023424)&&(ul=4194304)):e=1);var n=un();t=Lr(t,e),t!==null&&(Da(t,e,n),In(t,n))}function HC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),T2(t,n)}function GC(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Q(314))}i!==null&&i.delete(e),T2(t,n)}var b2;b2=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Sn.current)En=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return En=!1,kC(t,e,n);En=!!(t.flags&131072)}else En=!1,ut&&e.flags&1048576&&km(e,Zl,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;kl(t,e),t=e.pendingProps;var a=Hs(e,sn.current);Us(e,n),a=gh(null,e,i,t,a,n);var c=ph();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,An(i)?(c=!0,Kl(e)):c=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,ch(e),a.updater=Uc,e.stateNode=a,a._reactInternals=e,Yd(e,i,t,n),e=Zd(null,e,i,!0,c,n)):(e.tag=0,ut&&c&&nh(e),ln(null,e,a,n),e=e.child),e;case 16:i=e.elementType;e:{switch(kl(t,e),t=e.pendingProps,a=i._init,i=a(i._payload),e.type=i,a=e.tag=YC(i),t=Jn(i,t),a){case 0:e=qd(null,e,i,t,n);break e;case 1:e=F0(null,e,i,t,n);break e;case 11:e=L0(null,e,i,t,n);break e;case 14:e=B0(null,e,i,Jn(i.type,t),n);break e}throw Error(Q(306,i,""))}return e;case 0:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:Jn(i,a),qd(t,e,i,a,n);case 1:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:Jn(i,a),F0(t,e,i,a,n);case 3:e:{if(d2(e),t===null)throw Error(Q(387));i=e.pendingProps,c=e.memoizedState,a=c.element,Fm(t,e),Jl(e,i,null,n);var f=e.memoizedState;if(i=f.element,c.isDehydrated)if(c={element:i,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},e.updateQueue.baseState=c,e.memoizedState=c,e.flags&256){a=Ks(Error(Q(423)),e),e=U0(t,e,i,n,a);break e}else if(i!==a){a=Ks(Error(Q(424)),e),e=U0(t,e,i,n,a);break e}else for(On=ui(e.stateNode.containerInfo.firstChild),kn=e,ut=!0,tr=null,n=Lm(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gs(),i===a){e=Br(t,e,n);break e}ln(t,e,i,n)}e=e.child}return e;case 5:return Um(e),t===null&&Hd(e),i=e.type,a=e.pendingProps,c=t!==null?t.memoizedProps:null,f=a.children,Ud(i,a)?f=null:c!==null&&Ud(i,c)&&(e.flags|=32),u2(t,e),ln(t,e,f,n),e.child;case 6:return t===null&&Hd(e),null;case 13:return f2(t,e,n);case 4:return uh(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Xs(e,null,i,n):ln(t,e,i,n),e.child;case 11:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:Jn(i,a),L0(t,e,i,a,n);case 7:return ln(t,e,e.pendingProps,n),e.child;case 8:return ln(t,e,e.pendingProps.children,n),e.child;case 12:return ln(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,a=e.pendingProps,c=e.memoizedProps,f=a.value,tt(Ql,i._currentValue),i._currentValue=f,c!==null)if(ar(c.value,f)){if(c.children===a.children&&!Sn.current){e=Br(t,e,n);break e}}else for(c=e.child,c!==null&&(c.return=e);c!==null;){var p=c.dependencies;if(p!==null){f=c.child;for(var y=p.firstContext;y!==null;){if(y.context===i){if(c.tag===1){y=kr(-1,n&-n),y.tag=2;var m=c.updateQueue;if(m!==null){m=m.shared;var v=m.pending;v===null?y.next=y:(y.next=v.next,v.next=y),m.pending=y}}c.lanes|=n,y=c.alternate,y!==null&&(y.lanes|=n),Gd(c.return,n,e),p.lanes|=n;break}y=y.next}}else if(c.tag===10)f=c.type===e.type?null:c.child;else if(c.tag===18){if(f=c.return,f===null)throw Error(Q(341));f.lanes|=n,p=f.alternate,p!==null&&(p.lanes|=n),Gd(f,n,e),f=c.sibling}else f=c.child;if(f!==null)f.return=c;else for(f=c;f!==null;){if(f===e){f=null;break}if(c=f.sibling,c!==null){c.return=f.return,f=c;break}f=f.return}c=f}ln(t,e,a.children,n),e=e.child}return e;case 9:return a=e.type,i=e.pendingProps.children,Us(e,n),a=Xn(a),i=i(a),e.flags|=1,ln(t,e,i,n),e.child;case 14:return i=e.type,a=Jn(i,e.pendingProps),a=Jn(i.type,a),B0(t,e,i,a,n);case 15:return l2(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:Jn(i,a),kl(t,e),e.tag=1,An(i)?(t=!0,Kl(e)):t=!1,Us(e,n),s2(e,i,a),Yd(e,i,a,n),Zd(null,e,i,!0,t,n);case 19:return h2(t,e,n);case 22:return c2(t,e,n)}throw Error(Q(156,e.tag))};function N2(t,e){return nm(t,e)}function XC(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(t,e,n,i){return new XC(t,e,n,i)}function Ah(t){return t=t.prototype,!(!t||!t.isReactComponent)}function YC(t){if(typeof t=="function")return Ah(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hf)return 11;if(t===Gf)return 14}return 2}function gi(t,e){var n=t.alternate;return n===null?(n=Vn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Pl(t,e,n,i,a,c){var f=2;if(i=t,typeof t=="function")Ah(t)&&(f=1);else if(typeof t=="string")f=5;else e:switch(t){case Es:return Xi(n.children,a,c,e);case Vf:f=8,a|=8;break;case xd:return t=Vn(12,n,e,a|2),t.elementType=xd,t.lanes=c,t;case yd:return t=Vn(13,n,e,a),t.elementType=yd,t.lanes=c,t;case wd:return t=Vn(19,n,e,a),t.elementType=wd,t.lanes=c,t;case Up:return zc(n,a,c,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Bp:f=10;break e;case Fp:f=9;break e;case Hf:f=11;break e;case Gf:f=14;break e;case Jr:f=16,i=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=Vn(f,n,e,a),e.elementType=t,e.type=i,e.lanes=c,e}function Xi(t,e,n,i){return t=Vn(7,t,i,e),t.lanes=n,t}function zc(t,e,n,i){return t=Vn(22,t,i,e),t.elementType=Up,t.lanes=n,t.stateNode={isHidden:!1},t}function $u(t,e,n){return t=Vn(6,t,null,e),t.lanes=n,t}function Ju(t,e,n){return e=Vn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function KC(t,e,n,i,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Du(0),this.expirationTimes=Du(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Du(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Ih(t,e,n,i,a,c,f,p,y){return t=new KC(t,e,n,p,y),e===1?(e=1,c===!0&&(e|=8)):e=0,c=Vn(3,null,null,e),t.current=c,c.stateNode=t,c.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ch(c),t}function qC(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cs,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function R2(t){if(!t)return Ci;t=t._reactInternals;e:{if(is(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(An(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(An(n))return Rm(t,n,e)}return e}function O2(t,e,n,i,a,c,f,p,y){return t=Ih(n,i,!0,t,a,c,f,p,y),t.context=R2(null),n=t.current,i=un(),a=hi(n),c=kr(i,a),c.callback=e??null,di(n,c,a),t.current.lanes=a,Da(t,a,i),In(t,i),t}function Vc(t,e,n,i){var a=e.current,c=un(),f=hi(a);return n=R2(n),e.context===null?e.context=n:e.pendingContext=n,e=kr(c,f),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=di(a,e,f),t!==null&&(sr(t,a,f,c),Nl(t,a,f)),f}function ac(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function q0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Th(t,e){q0(t,e),(t=t.alternate)&&q0(t,e)}function ZC(){return null}var k2=typeof reportError=="function"?reportError:function(t){console.error(t)};function bh(t){this._internalRoot=t}Hc.prototype.render=bh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));Vc(t,e,null,null)};Hc.prototype.unmount=bh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qi(function(){Vc(null,t,null,null)}),e[Pr]=null}};function Hc(t){this._internalRoot=t}Hc.prototype.unstable_scheduleHydration=function(t){if(t){var e=cm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ti.length&&e!==0&&e<ti[n].priority;n++);ti.splice(n,0,t),n===0&&dm(t)}};function Nh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Gc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Z0(){}function QC(t,e,n,i,a){if(a){if(typeof i=="function"){var c=i;i=function(){var m=ac(f);c.call(m)}}var f=O2(e,i,t,0,null,!1,!1,"",Z0);return t._reactRootContainer=f,t[Pr]=f.current,ca(t.nodeType===8?t.parentNode:t),Qi(),f}for(;a=t.lastChild;)t.removeChild(a);if(typeof i=="function"){var p=i;i=function(){var m=ac(y);p.call(m)}}var y=Ih(t,0,!1,null,null,!1,!1,"",Z0);return t._reactRootContainer=y,t[Pr]=y.current,ca(t.nodeType===8?t.parentNode:t),Qi(function(){Vc(e,y,n,i)}),y}function Xc(t,e,n,i,a){var c=n._reactRootContainer;if(c){var f=c;if(typeof a=="function"){var p=a;a=function(){var y=ac(f);p.call(y)}}Vc(e,f,t,a)}else f=QC(n,e,t,a,i);return ac(f)}am=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Lo(e.pendingLanes);n!==0&&(Kf(e,n|1),In(e,At()),!(Le&6)&&(qs=At()+500,bi()))}break;case 13:Qi(function(){var i=Lr(t,1);if(i!==null){var a=un();sr(i,t,1,a)}}),Th(t,1)}};qf=function(t){if(t.tag===13){var e=Lr(t,134217728);if(e!==null){var n=un();sr(e,t,134217728,n)}Th(t,134217728)}};lm=function(t){if(t.tag===13){var e=hi(t),n=Lr(t,e);if(n!==null){var i=un();sr(n,t,e,i)}Th(t,e)}};cm=function(){return ze};um=function(t,e){var n=ze;try{return ze=t,e()}finally{ze=n}};Nd=function(t,e,n){switch(e){case"input":if(Ed(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var a=Lc(i);if(!a)throw Error(Q(90));Wp(i),Ed(i,a)}}}break;case"textarea":Vp(t,n);break;case"select":e=n.value,e!=null&&Ps(t,!!n.multiple,e,!1)}};Zp=Eh;Qp=Qi;var $C={usingClientEntryPoint:!1,Events:[Pa,Is,Lc,Kp,qp,Eh]},No={findFiberByHostInstance:Ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JC={bundleType:No.bundleType,version:No.version,rendererPackageName:No.rendererPackageName,rendererConfig:No.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=em(t),t===null?null:t.stateNode},findFiberByHostInstance:No.findFiberByHostInstance||ZC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cl.isDisabled&&Cl.supportsFiber)try{kc=Cl.inject(JC),Cr=Cl}catch{}}Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$C;Pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nh(e))throw Error(Q(200));return qC(t,e,null,n)};Pn.createRoot=function(t,e){if(!Nh(t))throw Error(Q(299));var n=!1,i="",a=k2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=Ih(t,1,!1,null,null,n,!1,i,a),t[Pr]=e.current,ca(t.nodeType===8?t.parentNode:t),new bh(e)};Pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=em(e),t=t===null?null:t.stateNode,t};Pn.flushSync=function(t){return Qi(t)};Pn.hydrate=function(t,e,n){if(!Gc(e))throw Error(Q(200));return Xc(null,t,e,!0,n)};Pn.hydrateRoot=function(t,e,n){if(!Nh(t))throw Error(Q(405));var i=n!=null&&n.hydratedSources||null,a=!1,c="",f=k2;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),e=O2(e,null,t,1,n??null,a,!1,c,f),t[Pr]=e.current,ca(t),i)for(t=0;t<i.length;t++)n=i[t],a=n._getVersion,a=a(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,a]:e.mutableSourceEagerHydrationData.push(n,a);return new Hc(e)};Pn.render=function(t,e,n){if(!Gc(e))throw Error(Q(200));return Xc(null,t,e,!1,n)};Pn.unmountComponentAtNode=function(t){if(!Gc(t))throw Error(Q(40));return t._reactRootContainer?(Qi(function(){Xc(null,null,t,!1,function(){t._reactRootContainer=null,t[Pr]=null})}),!0):!1};Pn.unstable_batchedUpdates=Eh;Pn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Gc(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return Xc(t,e,n,!1,i)};Pn.version="18.3.1-next-f1338f8080-20240426";function D2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(D2)}catch(t){console.error(t)}}D2(),Dp.exports=Pn;var eE=Dp.exports,Q0=eE;pd.createRoot=Q0.createRoot,pd.hydrateRoot=Q0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ya(){return ya=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ya.apply(this,arguments)}var si;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(si||(si={}));const $0="popstate";function tE(t){t===void 0&&(t={});function e(i,a){let{pathname:c,search:f,hash:p}=i.location;return cf("",{pathname:c,search:f,hash:p},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){return typeof a=="string"?a:lc(a)}return rE(e,n,null,t)}function bt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function M2(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nE(){return Math.random().toString(36).substr(2,8)}function J0(t,e){return{usr:t.state,key:t.key,idx:e}}function cf(t,e,n,i){return n===void 0&&(n=null),ya({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?so(e):e,{state:n,key:e&&e.key||i||nE()})}function lc(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function so(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function rE(t,e,n,i){i===void 0&&(i={});let{window:a=document.defaultView,v5Compat:c=!1}=i,f=a.history,p=si.Pop,y=null,m=v();m==null&&(m=0,f.replaceState(ya({},f.state,{idx:m}),""));function v(){return(f.state||{idx:null}).idx}function _(){p=si.Pop;let K=v(),k=K==null?null:K-m;m=K,y&&y({action:p,location:L.location,delta:k})}function I(K,k){p=si.Push;let R=cf(L.location,K,k);m=v()+1;let N=J0(R,m),U=L.createHref(R);try{f.pushState(N,"",U)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;a.location.assign(U)}c&&y&&y({action:p,location:L.location,delta:1})}function O(K,k){p=si.Replace;let R=cf(L.location,K,k);m=v();let N=J0(R,m),U=L.createHref(R);f.replaceState(N,"",U),c&&y&&y({action:p,location:L.location,delta:0})}function P(K){let k=a.location.origin!=="null"?a.location.origin:a.location.href,R=typeof K=="string"?K:lc(K);return R=R.replace(/ $/,"%20"),bt(k,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,k)}let L={get action(){return p},get location(){return t(a,f)},listen(K){if(y)throw new Error("A history only accepts one active listener");return a.addEventListener($0,_),y=K,()=>{a.removeEventListener($0,_),y=null}},createHref(K){return e(a,K)},createURL:P,encodeLocation(K){let k=P(K);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:I,replace:O,go(K){return f.go(K)}};return L}var eg;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(eg||(eg={}));function iE(t,e,n){return n===void 0&&(n="/"),sE(t,e,n)}function sE(t,e,n,i){let a=typeof e=="string"?so(e):e,c=Rh(a.pathname||"/",n);if(c==null)return null;let f=P2(t);oE(f);let p=null;for(let y=0;p==null&&y<f.length;++y){let m=yE(c);p=pE(f[y],m)}return p}function P2(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let a=(c,f,p)=>{let y={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};y.relativePath.startsWith("/")&&(bt(y.relativePath.startsWith(i),'Absolute route path "'+y.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),y.relativePath=y.relativePath.slice(i.length));let m=pi([i,y.relativePath]),v=n.concat(y);c.children&&c.children.length>0&&(bt(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),P2(c.children,e,v,m)),!(c.path==null&&!c.index)&&e.push({path:m,score:hE(m,c.index),routesMeta:v})};return t.forEach((c,f)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))a(c,f);else for(let y of L2(c.path))a(c,f,y)}),e}function L2(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,a=n.endsWith("?"),c=n.replace(/\?$/,"");if(i.length===0)return a?[c,""]:[c];let f=L2(i.join("/")),p=[];return p.push(...f.map(y=>y===""?c:[c,y].join("/"))),a&&p.push(...f),p.map(y=>t.startsWith("/")&&y===""?"/":y)}function oE(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:gE(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const aE=/^:[\w-]+$/,lE=3,cE=2,uE=1,dE=10,fE=-2,tg=t=>t==="*";function hE(t,e){let n=t.split("/"),i=n.length;return n.some(tg)&&(i+=fE),e&&(i+=cE),n.filter(a=>!tg(a)).reduce((a,c)=>a+(aE.test(c)?lE:c===""?uE:dE),i)}function gE(t,e){return t.length===e.length&&t.slice(0,-1).every((i,a)=>i===e[a])?t[t.length-1]-e[e.length-1]:0}function pE(t,e,n){let{routesMeta:i}=t,a={},c="/",f=[];for(let p=0;p<i.length;++p){let y=i[p],m=p===i.length-1,v=c==="/"?e:e.slice(c.length)||"/",_=mE({path:y.relativePath,caseSensitive:y.caseSensitive,end:m},v),I=y.route;if(!_)return null;Object.assign(a,_.params),f.push({params:a,pathname:pi([c,_.pathname]),pathnameBase:EE(pi([c,_.pathnameBase])),route:I}),_.pathnameBase!=="/"&&(c=pi([c,_.pathnameBase]))}return f}function mE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=xE(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let c=a[0],f=c.replace(/(.)\/+$/,"$1"),p=a.slice(1);return{params:i.reduce((m,v,_)=>{let{paramName:I,isOptional:O}=v;if(I==="*"){let L=p[_]||"";f=c.slice(0,c.length-L.length).replace(/(.)\/+$/,"$1")}const P=p[_];return O&&!P?m[I]=void 0:m[I]=(P||"").replace(/%2F/g,"/"),m},{}),pathname:c,pathnameBase:f,pattern:t}}function xE(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),M2(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,p,y)=>(i.push({paramName:p,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function yE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return M2(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Rh(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function wE(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:a=""}=typeof t=="string"?so(t):t;return{pathname:n?n.startsWith("/")?n:_E(n,e):e,search:vE(i),hash:SE(a)}}function _E(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function ed(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function CE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function B2(t,e){let n=CE(t);return e?n.map((i,a)=>a===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function F2(t,e,n,i){i===void 0&&(i=!1);let a;typeof t=="string"?a=so(t):(a=ya({},t),bt(!a.pathname||!a.pathname.includes("?"),ed("?","pathname","search",a)),bt(!a.pathname||!a.pathname.includes("#"),ed("#","pathname","hash",a)),bt(!a.search||!a.search.includes("#"),ed("#","search","hash",a)));let c=t===""||a.pathname==="",f=c?"/":a.pathname,p;if(f==null)p=n;else{let _=e.length-1;if(!i&&f.startsWith("..")){let I=f.split("/");for(;I[0]==="..";)I.shift(),_-=1;a.pathname=I.join("/")}p=_>=0?e[_]:"/"}let y=wE(a,p),m=f&&f!=="/"&&f.endsWith("/"),v=(c||f===".")&&n.endsWith("/");return!y.pathname.endsWith("/")&&(m||v)&&(y.pathname+="/"),y}const pi=t=>t.join("/").replace(/\/\/+/g,"/"),EE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),vE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,SE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function AE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const U2=["post","put","patch","delete"];new Set(U2);const IE=["get",...U2];new Set(IE);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wa(){return wa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wa.apply(this,arguments)}const Oh=G.createContext(null),TE=G.createContext(null),ss=G.createContext(null),Yc=G.createContext(null),os=G.createContext({outlet:null,matches:[],isDataRoute:!1}),j2=G.createContext(null);function bE(t,e){let{relative:n}=e===void 0?{}:e;Ba()||bt(!1);let{basename:i,navigator:a}=G.useContext(ss),{hash:c,pathname:f,search:p}=z2(t,{relative:n}),y=f;return i!=="/"&&(y=f==="/"?i:pi([i,f])),a.createHref({pathname:y,search:p,hash:c})}function Ba(){return G.useContext(Yc)!=null}function Fa(){return Ba()||bt(!1),G.useContext(Yc).location}function W2(t){G.useContext(ss).static||G.useLayoutEffect(t)}function NE(){let{isDataRoute:t}=G.useContext(os);return t?zE():RE()}function RE(){Ba()||bt(!1);let t=G.useContext(Oh),{basename:e,future:n,navigator:i}=G.useContext(ss),{matches:a}=G.useContext(os),{pathname:c}=Fa(),f=JSON.stringify(B2(a,n.v7_relativeSplatPath)),p=G.useRef(!1);return W2(()=>{p.current=!0}),G.useCallback(function(m,v){if(v===void 0&&(v={}),!p.current)return;if(typeof m=="number"){i.go(m);return}let _=F2(m,JSON.parse(f),c,v.relative==="path");t==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:pi([e,_.pathname])),(v.replace?i.replace:i.push)(_,v.state,v)},[e,i,f,c,t])}function z2(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=G.useContext(ss),{matches:a}=G.useContext(os),{pathname:c}=Fa(),f=JSON.stringify(B2(a,i.v7_relativeSplatPath));return G.useMemo(()=>F2(t,JSON.parse(f),c,n==="path"),[t,f,c,n])}function OE(t,e){return kE(t,e)}function kE(t,e,n,i){Ba()||bt(!1);let{navigator:a}=G.useContext(ss),{matches:c}=G.useContext(os),f=c[c.length-1],p=f?f.params:{};f&&f.pathname;let y=f?f.pathnameBase:"/";f&&f.route;let m=Fa(),v;if(e){var _;let K=typeof e=="string"?so(e):e;y==="/"||(_=K.pathname)!=null&&_.startsWith(y)||bt(!1),v=K}else v=m;let I=v.pathname||"/",O=I;if(y!=="/"){let K=y.replace(/^\//,"").split("/");O="/"+I.replace(/^\//,"").split("/").slice(K.length).join("/")}let P=iE(t,{pathname:O}),L=BE(P&&P.map(K=>Object.assign({},K,{params:Object.assign({},p,K.params),pathname:pi([y,a.encodeLocation?a.encodeLocation(K.pathname).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?y:pi([y,a.encodeLocation?a.encodeLocation(K.pathnameBase).pathname:K.pathnameBase])})),c,n,i);return e&&L?G.createElement(Yc.Provider,{value:{location:wa({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:si.Pop}},L):L}function DE(){let t=WE(),e=AE(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),n?G.createElement("pre",{style:a},n):null,null)}const ME=G.createElement(DE,null);class PE extends G.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?G.createElement(os.Provider,{value:this.props.routeContext},G.createElement(j2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function LE(t){let{routeContext:e,match:n,children:i}=t,a=G.useContext(Oh);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),G.createElement(os.Provider,{value:e},i)}function BE(t,e,n,i){var a;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var c;if(!n)return null;if(n.errors)t=n.matches;else if((c=i)!=null&&c.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let f=t,p=(a=n)==null?void 0:a.errors;if(p!=null){let v=f.findIndex(_=>_.route.id&&(p==null?void 0:p[_.route.id])!==void 0);v>=0||bt(!1),f=f.slice(0,Math.min(f.length,v+1))}let y=!1,m=-1;if(n&&i&&i.v7_partialHydration)for(let v=0;v<f.length;v++){let _=f[v];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(m=v),_.route.id){let{loaderData:I,errors:O}=n,P=_.route.loader&&I[_.route.id]===void 0&&(!O||O[_.route.id]===void 0);if(_.route.lazy||P){y=!0,m>=0?f=f.slice(0,m+1):f=[f[0]];break}}}return f.reduceRight((v,_,I)=>{let O,P=!1,L=null,K=null;n&&(O=p&&_.route.id?p[_.route.id]:void 0,L=_.route.errorElement||ME,y&&(m<0&&I===0?(VE("route-fallback"),P=!0,K=null):m===I&&(P=!0,K=_.route.hydrateFallbackElement||null)));let k=e.concat(f.slice(0,I+1)),R=()=>{let N;return O?N=L:P?N=K:_.route.Component?N=G.createElement(_.route.Component,null):_.route.element?N=_.route.element:N=v,G.createElement(LE,{match:_,routeContext:{outlet:v,matches:k,isDataRoute:n!=null},children:N})};return n&&(_.route.ErrorBoundary||_.route.errorElement||I===0)?G.createElement(PE,{location:n.location,revalidation:n.revalidation,component:L,error:O,children:R(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):R()},null)}var V2=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(V2||{}),H2=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(H2||{});function FE(t){let e=G.useContext(Oh);return e||bt(!1),e}function UE(t){let e=G.useContext(TE);return e||bt(!1),e}function jE(t){let e=G.useContext(os);return e||bt(!1),e}function G2(t){let e=jE(),n=e.matches[e.matches.length-1];return n.route.id||bt(!1),n.route.id}function WE(){var t;let e=G.useContext(j2),n=UE(),i=G2();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function zE(){let{router:t}=FE(V2.UseNavigateStable),e=G2(H2.UseNavigateStable),n=G.useRef(!1);return W2(()=>{n.current=!0}),G.useCallback(function(a,c){c===void 0&&(c={}),n.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,wa({fromRouteId:e},c)))},[t,e])}const ng={};function VE(t,e,n){ng[t]||(ng[t]=!0)}function HE(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ll(t){bt(!1)}function GE(t){let{basename:e="/",children:n=null,location:i,navigationType:a=si.Pop,navigator:c,static:f=!1,future:p}=t;Ba()&&bt(!1);let y=e.replace(/^\/*/,"/"),m=G.useMemo(()=>({basename:y,navigator:c,static:f,future:wa({v7_relativeSplatPath:!1},p)}),[y,p,c,f]);typeof i=="string"&&(i=so(i));let{pathname:v="/",search:_="",hash:I="",state:O=null,key:P="default"}=i,L=G.useMemo(()=>{let K=Rh(v,y);return K==null?null:{location:{pathname:K,search:_,hash:I,state:O,key:P},navigationType:a}},[y,v,_,I,O,P,a]);return L==null?null:G.createElement(ss.Provider,{value:m},G.createElement(Yc.Provider,{children:n,value:L}))}function XE(t){let{children:e,location:n}=t;return OE(uf(e),n)}new Promise(()=>{});function uf(t,e){e===void 0&&(e=[]);let n=[];return G.Children.forEach(t,(i,a)=>{if(!G.isValidElement(i))return;let c=[...e,a];if(i.type===G.Fragment){n.push.apply(n,uf(i.props.children,c));return}i.type!==Ll&&bt(!1),!i.props.index||!i.props.children||bt(!1);let f={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=uf(i.props.children,c)),n.push(f)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function df(){return df=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},df.apply(this,arguments)}function YE(t,e){if(t==null)return{};var n={},i=Object.keys(t),a,c;for(c=0;c<i.length;c++)a=i[c],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function KE(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function qE(t,e){return t.button===0&&(!e||e==="_self")&&!KE(t)}const ZE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],QE="6";try{window.__reactRouterVersion=QE}catch{}const $E="startTransition",rg=Vw[$E];function JE(t){let{basename:e,children:n,future:i,window:a}=t,c=G.useRef();c.current==null&&(c.current=tE({window:a,v5Compat:!0}));let f=c.current,[p,y]=G.useState({action:f.action,location:f.location}),{v7_startTransition:m}=i||{},v=G.useCallback(_=>{m&&rg?rg(()=>y(_)):y(_)},[y,m]);return G.useLayoutEffect(()=>f.listen(v),[f,v]),G.useEffect(()=>HE(i),[i]),G.createElement(GE,{basename:e,children:n,location:p.location,navigationType:p.action,navigator:f,future:i})}const ev=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ig=G.forwardRef(function(e,n){let{onClick:i,relative:a,reloadDocument:c,replace:f,state:p,target:y,to:m,preventScrollReset:v,viewTransition:_}=e,I=YE(e,ZE),{basename:O}=G.useContext(ss),P,L=!1;if(typeof m=="string"&&tv.test(m)&&(P=m,ev))try{let N=new URL(window.location.href),U=m.startsWith("//")?new URL(N.protocol+m):new URL(m),J=Rh(U.pathname,O);U.origin===N.origin&&J!=null?m=J+U.search+U.hash:L=!0}catch{}let K=bE(m,{relative:a}),k=nv(m,{replace:f,state:p,target:y,preventScrollReset:v,relative:a,viewTransition:_});function R(N){i&&i(N),N.defaultPrevented||k(N)}return G.createElement("a",df({},I,{href:P||K,onClick:L||c?i:R,ref:n,target:y}))});var sg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(sg||(sg={}));var og;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(og||(og={}));function nv(t,e){let{target:n,replace:i,state:a,preventScrollReset:c,relative:f,viewTransition:p}=e===void 0?{}:e,y=NE(),m=Fa(),v=z2(t,{relative:f});return G.useCallback(_=>{if(qE(_,n)){_.preventDefault();let I=i!==void 0?i:lc(m)===lc(v);y(t,{replace:I,state:a,preventScrollReset:c,relative:f,viewTransition:p})}},[m,y,v,i,a,n,t,c,f,p])}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),gn=(t,e)=>{const n=G.forwardRef(({color:i="currentColor",size:a=24,strokeWidth:c=2,absoluteStrokeWidth:f,className:p="",children:y,...m},v)=>G.createElement("svg",{ref:v,...rv,width:a,height:a,stroke:i,strokeWidth:f?Number(c)*24/Number(a):c,className:["lucide",`lucide-${iv(t)}`,p].join(" "),...m},[...e.map(([_,I])=>G.createElement(_,I)),...Array.isArray(y)?y:[y]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=gn("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=gn("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=gn("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=gn("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=gn("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=gn("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=gn("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=gn("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=gn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=gn("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=gn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=gn("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=gn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=gn("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=gn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var lg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne=function(t,e){if(!t)throw oo(e)},oo=function(t){return new Error("Firebase Database ("+K2.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let a=t.charCodeAt(i);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},dv=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const a=t[n++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const c=t[n++];e[i++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=t[n++],f=t[n++],p=t[n++],y=((a&7)<<18|(c&63)<<12|(f&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(y>>10)),e[i++]=String.fromCharCode(56320+(y&1023))}else{const c=t[n++],f=t[n++];e[i++]=String.fromCharCode((a&15)<<12|(c&63)<<6|f&63)}}return e.join("")},Dh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<t.length;a+=3){const c=t[a],f=a+1<t.length,p=f?t[a+1]:0,y=a+2<t.length,m=y?t[a+2]:0,v=c>>2,_=(c&3)<<4|p>>4;let I=(p&15)<<2|m>>6,O=m&63;y||(O=64,f||(I=64)),i.push(n[v],n[_],n[I],n[O])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(q2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dv(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<t.length;){const c=n[t.charAt(a++)],p=a<t.length?n[t.charAt(a)]:0;++a;const m=a<t.length?n[t.charAt(a)]:64;++a;const _=a<t.length?n[t.charAt(a)]:64;if(++a,c==null||p==null||m==null||_==null)throw new fv;const I=c<<2|p>>4;if(i.push(I),m!==64){const O=p<<4&240|m>>2;if(i.push(O),_!==64){const P=m<<6&192|_;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Z2=function(t){const e=q2(t);return Dh.encodeByteArray(e,!0)},uc=function(t){return Z2(t).replace(/\./g,"")},pf=function(t){try{return Dh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(t){return Q2(void 0,t)}function Q2(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!gv(n)||(t[n]=Q2(t[n],e[n]));return t}function gv(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv=()=>pv().__FIREBASE_DEFAULTS__,xv=()=>{if(typeof process>"u"||typeof lg>"u")return;const t=lg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yv=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pf(t[1]);return e&&JSON.parse(e)},$2=()=>{try{return mv()||xv()||yv()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},wv=t=>{var e,n;return(n=(e=$2())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},_v=t=>{const e=wv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},J2=()=>{var t;return(t=$2())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",a=t.iat||0,c=t.sub||t.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},t);return[uc(JSON.stringify(n)),uc(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ex(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ev())}function vv(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Sv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Av(){return K2.NODE_ADMIN===!0}function tx(){try{return typeof indexedDB=="object"}catch{return!1}}function nx(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}function Iv(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="FirebaseError";class as extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Tv,Object.setPrototypeOf(this,as.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kc.prototype.create)}}class Kc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],f=c?bv(c,i):"Error",p=`${this.serviceName}: ${f} (${a}).`;return new as(a,p,i)}}function bv(t,e){return t.replace(Nv,(n,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const Nv=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(t){return JSON.parse(t)}function Mt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=function(t){let e={},n={},i={},a="";try{const c=t.split(".");e=Ca(pf(c[0])||""),n=Ca(pf(c[1])||""),a=c[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:a}},Rv=function(t){const e=rx(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Ov=function(t){const e=rx(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Zs(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function cg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function dc(t,e,n){const i={};for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=e.call(n,t[a],a,t));return i}function fc(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const a of n){if(!i.includes(a))return!1;const c=t[a],f=e[a];if(ug(c)&&ug(f)){if(!fc(c,f))return!1}else if(c!==f)return!1}for(const a of i)if(!n.includes(a))return!1;return!0}function ug(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)i[_]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let _=0;_<16;_++)i[_]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let _=16;_<80;_++){const I=i[_-3]^i[_-8]^i[_-14]^i[_-16];i[_]=(I<<1|I>>>31)&4294967295}let a=this.chain_[0],c=this.chain_[1],f=this.chain_[2],p=this.chain_[3],y=this.chain_[4],m,v;for(let _=0;_<80;_++){_<40?_<20?(m=p^c&(f^p),v=1518500249):(m=c^f^p,v=1859775393):_<60?(m=c&f|p&(c|f),v=2400959708):(m=c^f^p,v=3395469782);const I=(a<<5|a>>>27)+m+y+v+i[_]&4294967295;y=p,p=f,f=(c<<30|c>>>2)&4294967295,c=a,a=I}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+y&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let a=0;const c=this.buf_;let f=this.inbuf_;for(;a<n;){if(f===0)for(;a<=i;)this.compress_(e,a),a+=this.blockSize;if(typeof e=="string"){for(;a<n;)if(c[f]=e.charCodeAt(a),++f,++a,f===this.blockSize){this.compress_(c),f=0;break}}else for(;a<n;)if(c[f]=e[a],++f,++a,f===this.blockSize){this.compress_(c),f=0;break}}this.inbuf_=f,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let a=0;a<5;a++)for(let c=24;c>=0;c-=8)e[i]=this.chain_[a]>>c&255,++i;return e}}function qc(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let a=t.charCodeAt(i);if(a>=55296&&a<=56319){const c=a-55296;i++,ne(i<t.length,"Surrogate pair missing trail surrogate.");const f=t.charCodeAt(i)-56320;a=65536+(c<<10)+f}a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):a<65536?(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},Zc=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=1e3,Lv=2,Bv=4*60*60*1e3,Fv=.5;function dg(t,e=Pv,n=Lv){const i=e*Math.pow(n,t),a=Math.round(Fv*i*(Math.random()-.5)*2);return Math.min(Bv,i+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(t){return t&&t._delegate?t._delegate:t}class Fr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Ua;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Wv(e))try{this.getOrInitializeService({instanceIdentifier:Bi})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});i.resolve(c)}catch{}}}}clearInstance(e=Bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bi){return this.instances.has(e)}getOptions(e=Bi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);i===p&&f.resolve(a)}return a}onInit(e,n){var i;const a=this.normalizeInstanceIdentifier(n),c=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;c.add(e),this.onInitCallbacks.set(a,c);const f=this.instances.get(a);return f&&e(f,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const a of i)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:jv(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Bi){return this.component?this.component.multipleInstances?e:Bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jv(t){return t===Bi?void 0:t}function Wv(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Uv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Je||(Je={}));const Vv={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},Hv=Je.INFO,Gv={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},Xv=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),a=Gv[e];if(a)console[a](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mh{constructor(e){this.name=e,this._logLevel=Hv,this._logHandler=Xv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Vv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const Yv=(t,e)=>e.some(n=>t instanceof n);let fg,hg;function Kv(){return fg||(fg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qv(){return hg||(hg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ix=new WeakMap,mf=new WeakMap,sx=new WeakMap,td=new WeakMap,Ph=new WeakMap;function Zv(t){const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("success",c),t.removeEventListener("error",f)},c=()=>{n(mi(t.result)),a()},f=()=>{i(t.error),a()};t.addEventListener("success",c),t.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&ix.set(n,t)}).catch(()=>{}),Ph.set(e,t),e}function Qv(t){if(mf.has(t))return;const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("complete",c),t.removeEventListener("error",f),t.removeEventListener("abort",f)},c=()=>{n(),a()},f=()=>{i(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",c),t.addEventListener("error",f),t.addEventListener("abort",f)});mf.set(t,e)}let xf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return mf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||sx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $v(t){xf=t(xf)}function Jv(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(nd(this),e,...n);return sx.set(i,e.sort?e.sort():[e]),mi(i)}:qv().includes(t)?function(...e){return t.apply(nd(this),e),mi(ix.get(this))}:function(...e){return mi(t.apply(nd(this),e))}}function e3(t){return typeof t=="function"?Jv(t):(t instanceof IDBTransaction&&Qv(t),Yv(t,Kv())?new Proxy(t,xf):t)}function mi(t){if(t instanceof IDBRequest)return Zv(t);if(td.has(t))return td.get(t);const e=e3(t);return e!==t&&(td.set(t,e),Ph.set(e,t)),e}const nd=t=>Ph.get(t);function ox(t,e,{blocked:n,upgrade:i,blocking:a,terminated:c}={}){const f=indexedDB.open(t,e),p=mi(f);return i&&f.addEventListener("upgradeneeded",y=>{i(mi(f.result),y.oldVersion,y.newVersion,mi(f.transaction),y)}),n&&f.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),p.then(y=>{c&&y.addEventListener("close",()=>c()),a&&y.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),p}const t3=["get","getKey","getAll","getAllKeys","count"],n3=["put","add","delete","clear"],rd=new Map;function gg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(rd.get(e))return rd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,a=n3.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||t3.includes(n)))return;const c=async function(f,...p){const y=this.transaction(f,a?"readwrite":"readonly");let m=y.store;return i&&(m=m.index(p.shift())),(await Promise.all([m[n](...p),a&&y.done]))[0]};return rd.set(e,c),c}$v(t=>({...t,get:(e,n,i)=>gg(e,n)||t.get(e,n,i),has:(e,n)=>!!gg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(i3(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function i3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yf="@firebase/app",pg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur=new Mh("@firebase/app"),s3="@firebase/app-compat",o3="@firebase/analytics-compat",a3="@firebase/analytics",l3="@firebase/app-check-compat",c3="@firebase/app-check",u3="@firebase/auth",d3="@firebase/auth-compat",f3="@firebase/database",h3="@firebase/data-connect",g3="@firebase/database-compat",p3="@firebase/functions",m3="@firebase/functions-compat",x3="@firebase/installations",y3="@firebase/installations-compat",w3="@firebase/messaging",_3="@firebase/messaging-compat",C3="@firebase/performance",E3="@firebase/performance-compat",v3="@firebase/remote-config",S3="@firebase/remote-config-compat",A3="@firebase/storage",I3="@firebase/storage-compat",T3="@firebase/firestore",b3="@firebase/vertexai-preview",N3="@firebase/firestore-compat",R3="firebase",O3="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="[DEFAULT]",k3={[yf]:"fire-core",[s3]:"fire-core-compat",[a3]:"fire-analytics",[o3]:"fire-analytics-compat",[c3]:"fire-app-check",[l3]:"fire-app-check-compat",[u3]:"fire-auth",[d3]:"fire-auth-compat",[f3]:"fire-rtdb",[h3]:"fire-data-connect",[g3]:"fire-rtdb-compat",[p3]:"fire-fn",[m3]:"fire-fn-compat",[x3]:"fire-iid",[y3]:"fire-iid-compat",[w3]:"fire-fcm",[_3]:"fire-fcm-compat",[C3]:"fire-perf",[E3]:"fire-perf-compat",[v3]:"fire-rc",[S3]:"fire-rc-compat",[A3]:"fire-gcs",[I3]:"fire-gcs-compat",[T3]:"fire-fst",[N3]:"fire-fst-compat",[b3]:"fire-vertex","fire-js":"fire-js",[R3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=new Map,D3=new Map,_f=new Map;function mg(t,e){try{t.container.addComponent(e)}catch(n){Ur.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ei(t){const e=t.name;if(_f.has(e))return Ur.debug(`There were multiple attempts to register component ${e}.`),!1;_f.set(e,t);for(const n of hc.values())mg(n,t);for(const n of D3.values())mg(n,t);return!0}function ja(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xi=new Kc("app","Firebase",M3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3=O3;function ax(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:wf,automaticDataCollectionEnabled:!1},e),a=i.name;if(typeof a!="string"||!a)throw xi.create("bad-app-name",{appName:String(a)});if(n||(n=J2()),!n)throw xi.create("no-options");const c=hc.get(a);if(c){if(fc(n,c.options)&&fc(i,c.config))return c;throw xi.create("duplicate-app",{appName:a})}const f=new zv(a);for(const y of _f.values())f.addComponent(y);const p=new P3(n,i,f);return hc.set(a,p),p}function lx(t=wf){const e=hc.get(t);if(!e&&t===wf&&J2())return ax();if(!e)throw xi.create("no-app",{appName:t});return e}function vr(t,e,n){var i;let a=(i=k3[t])!==null&&i!==void 0?i:t;n&&(a+=`-${n}`);const c=a.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const p=[`Unable to register library "${a}" with version "${e}":`];c&&p.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&f&&p.push("and"),f&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ur.warn(p.join(" "));return}Ei(new Fr(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3="firebase-heartbeat-database",F3=1,Ea="firebase-heartbeat-store";let id=null;function cx(){return id||(id=ox(B3,F3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ea)}catch(n){console.warn(n)}}}}).catch(t=>{throw xi.create("idb-open",{originalErrorMessage:t.message})})),id}async function U3(t){try{const n=(await cx()).transaction(Ea),i=await n.objectStore(Ea).get(ux(t));return await n.done,i}catch(e){if(e instanceof as)Ur.warn(e.message);else{const n=xi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ur.warn(n.message)}}}async function xg(t,e){try{const i=(await cx()).transaction(Ea,"readwrite");await i.objectStore(Ea).put(e,ux(t)),await i.done}catch(n){if(n instanceof as)Ur.warn(n.message);else{const i=xi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ur.warn(i.message)}}}function ux(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3=1024,W3=30*24*60*60*1e3;class z3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new H3(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=yg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(f=>{const p=new Date(f.date).valueOf();return Date.now()-p<=W3}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Ur.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=yg(),{heartbeatsToSend:i,unsentEntries:a}=V3(this._heartbeatsCache.heartbeats),c=uc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Ur.warn(n),""}}}function yg(){return new Date().toISOString().substring(0,10)}function V3(t,e=j3){const n=[];let i=t.slice();for(const a of t){const c=n.find(f=>f.agent===a.agent);if(c){if(c.dates.push(a.date),wg(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),wg(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class H3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tx()?nx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await U3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return xg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return xg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function wg(t){return uc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G3(t){Ei(new Fr("platform-logger",e=>new r3(e),"PRIVATE")),Ei(new Fr("heartbeat",e=>new z3(e),"PRIVATE")),vr(yf,pg,t),vr(yf,pg,"esm2017"),vr("fire-js","")}G3("");var _g={};const Cg="@firebase/database",Eg="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dx="";function X3(t){dx=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Mt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ca(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Sr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Y3(e)}}catch{}return new K3},zi=fx("localStorage"),q3=fx("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new Mh("@firebase/database"),Z3=function(){let t=1;return function(){return t++}}(),hx=function(t){const e=Mv(t),n=new Dv;n.update(e);const i=n.digest();return Dh.encodeByteArray(i)},Wa=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Wa.apply(null,i):typeof i=="object"?e+=Mt(i):e+=i,e+=" "}return e};let Ko=null,vg=!0;const Q3=function(t,e){ne(!0,"Can't turn on custom loggers persistently."),Ws.logLevel=Je.VERBOSE,Ko=Ws.log.bind(Ws)},Yt=function(...t){if(vg===!0&&(vg=!1,Ko===null&&q3.get("logging_enabled")===!0&&Q3()),Ko){const e=Wa.apply(null,t);Ko(e)}},za=function(t){return function(...e){Yt(t,...e)}},Cf=function(...t){const e="FIREBASE INTERNAL ERROR: "+Wa(...t);Ws.error(e)},jr=function(...t){const e=`FIREBASE FATAL ERROR: ${Wa(...t)}`;throw Ws.error(e),new Error(e)},dn=function(...t){const e="FIREBASE WARNING: "+Wa(...t);Ws.warn(e)},$3=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&dn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Lh=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},J3=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Qs="[MIN_NAME]",$i="[MAX_NAME]",ls=function(t,e){if(t===e)return 0;if(t===Qs||e===$i)return-1;if(e===Qs||t===$i)return 1;{const n=Sg(t),i=Sg(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},eS=function(t,e){return t===e?0:t<e?-1:1},Ro=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Mt(e))},Bh=function(t){if(typeof t!="object"||t===null)return Mt(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=Mt(e[i]),n+=":",n+=Bh(t[e[i]]);return n+="}",n},gx=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let a=0;a<n;a+=e)a+e>n?i.push(t.substring(a,n)):i.push(t.substring(a,a+e));return i};function Zt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const px=function(t){ne(!Lh(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let a,c,f,p,y;t===0?(c=0,f=0,a=1/t===-1/0?1:0):(a=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(p=Math.min(Math.floor(Math.log(t)/Math.LN2),i),c=p+i,f=Math.round(t*Math.pow(2,n-p)-Math.pow(2,n))):(c=0,f=Math.round(t/Math.pow(2,1-i-n))));const m=[];for(y=n;y;y-=1)m.push(f%2?1:0),f=Math.floor(f/2);for(y=e;y;y-=1)m.push(c%2?1:0),c=Math.floor(c/2);m.push(a?1:0),m.reverse();const v=m.join("");let _="";for(y=0;y<64;y+=8){let I=parseInt(v.substr(y,8),2).toString(16);I.length===1&&(I="0"+I),_=_+I}return _.toLowerCase()},tS=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},nS=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function rS(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const iS=new RegExp("^-?(0*)\\d{1,10}$"),sS=-2147483648,oS=2147483647,Sg=function(t){if(iS.test(t)){const e=Number(t);if(e>=sS&&e<=oS)return e}return null},ao=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw dn("Exception was thrown by user callback.",n),e},Math.floor(0))}},aS=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},qo=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){dn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(a=>this.auth_=a)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Yt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',dn(e)}}class Bl{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Bl.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh="5",mx="v",xx="s",yx="r",wx="f",_x=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Cx="ls",Ex="p",Ef="ac",vx="websocket",Sx="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n,i,a,c=!1,f="",p=!1,y=!1){this.secure=n,this.namespace=i,this.webSocketOnly=a,this.nodeAdmin=c,this.persistenceKey=f,this.includeNamespaceInQueryParams=p,this.isUsingEmulator=y,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=zi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&zi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function uS(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Ix(t,e,n){ne(typeof e=="string","typeof type must == string"),ne(typeof n=="object","typeof params must == object");let i;if(e===vx)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Sx)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);uS(t)&&(n.ns=t.namespace);const a=[];return Zt(n,(c,f)=>{a.push(c+"="+f)}),i+a.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(){this.counters_={}}incrementCounter(e,n=1){Sr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return hv(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd={},od={};function Uh(t){const e=t.toString();return sd[e]||(sd[e]=new dS),sd[e]}function fS(t,e){const n=t.toString();return od[n]||(od[n]=e()),od[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<i.length;++a)i[a]&&ao(()=>{this.onMessage_(i[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="start",gS="close",pS="pLPCommand",mS="pRTLPCB",Tx="id",bx="pw",Nx="ser",xS="cb",yS="seg",wS="ts",_S="d",CS="dframe",Rx=1870,Ox=30,ES=Rx-Ox,vS=25e3,SS=3e4;class Ds{constructor(e,n,i,a,c,f,p){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.transportSessionId=f,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=za(e),this.stats_=Uh(n),this.urlFn=y=>(this.appCheckToken&&(y[Ef]=this.appCheckToken),Ix(n,Sx,y))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new hS(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(SS)),J3(()=>{if(this.isClosed_)return;this.scriptTagHolder=new jh((...c)=>{const[f,p,y,m,v]=c;if(this.incrementIncomingBytes_(c),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,f===Ag)this.id=p,this.password=y;else if(f===gS)p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+f)},(...c)=>{const[f,p]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(f,p)},()=>{this.onClosed_()},this.urlFn);const i={};i[Ag]="t",i[Nx]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[xS]=this.scriptTagHolder.uniqueCallbackIdentifier),i[mx]=Fh,this.transportSessionId&&(i[xx]=this.transportSessionId),this.lastSessionId&&(i[Cx]=this.lastSessionId),this.applicationId&&(i[Ex]=this.applicationId),this.appCheckToken&&(i[Ef]=this.appCheckToken),typeof location<"u"&&location.hostname&&_x.test(location.hostname)&&(i[yx]=wx);const a=this.urlFn(i);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ds.forceAllow_=!0}static forceDisallow(){Ds.forceDisallow_=!0}static isAvailable(){return Ds.forceAllow_?!0:!Ds.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!tS()&&!nS()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Z2(n),a=gx(i,ES);for(let c=0;c<a.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[c]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[CS]="t",i[Tx]=e,i[bx]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Mt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class jh{constructor(e,n,i,a){this.onDisconnect=i,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Z3(),window[pS+this.uniqueCallbackIdentifier]=e,window[mS+this.uniqueCallbackIdentifier]=n,this.myIFrame=jh.createIFrame_();let c="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(c='<script>document.domain="'+document.domain+'";<\/script>');const f="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(f),this.myIFrame.doc.close()}catch(p){Yt("frame writing exception"),p.stack&&Yt(p.stack),Yt(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Yt("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Tx]=this.myID,e[bx]=this.myPW,e[Nx]=this.currentSerial;let n=this.urlFn(e),i="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Ox+i.length<=Rx;){const f=this.pendingSegs.shift();i=i+"&"+yS+a+"="+f.seg+"&"+wS+a+"="+f.ts+"&"+_S+a+"="+f.d,a++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},a=setTimeout(i,Math.floor(vS)),c=()=>{clearTimeout(a),i()};this.addTag(e,c)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const a=i.readyState;(!a||a==="loaded"||a==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Yt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=16384,IS=45e3;let gc=null;typeof MozWebSocket<"u"?gc=MozWebSocket:typeof WebSocket<"u"&&(gc=WebSocket);class nr{constructor(e,n,i,a,c,f,p){this.connId=e,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=za(this.connId),this.stats_=Uh(n),this.connURL=nr.connectionURL_(n,f,p,a,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,a,c){const f={};return f[mx]=Fh,typeof location<"u"&&location.hostname&&_x.test(location.hostname)&&(f[yx]=wx),n&&(f[xx]=n),i&&(f[Cx]=i),a&&(f[Ef]=a),c&&(f[Ex]=c),Ix(e,vx,f)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,zi.set("previous_websocket_failure",!0);try{let i;Av(),this.mySock=new gc(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){nr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&gc!==null&&!nr.forceDisallow_}static previouslyFailed(){return zi.isInMemoryStorage||zi.get("previous_websocket_failure")===!0}markConnectionHealthy(){zi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=Ca(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ne(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=Mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=gx(n,AS);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(IS))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}nr.responsesRequiredToBeHealthy=2;nr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ds,nr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=nr&&nr.isAvailable();let i=n&&!nr.previouslyFailed();if(e.webSocketOnly&&(n||dn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[nr];else{const a=this.transports_=[];for(const c of va.ALL_TRANSPORTS)c&&c.isAvailable()&&a.push(c);va.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}va.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=6e4,bS=5e3,NS=10*1024,RS=100*1024,ad="t",Ig="d",OS="s",Tg="r",kS="e",bg="o",Ng="a",Rg="n",Og="p",DS="h";class MS{constructor(e,n,i,a,c,f,p,y,m,v){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=a,this.authToken_=c,this.onMessage_=f,this.onReady_=p,this.onDisconnect_=y,this.onKill_=m,this.lastSessionId=v,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=za("c:"+this.id+":"),this.transportManager_=new va(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const a=e.healthyTimeout||0;a>0&&(this.healthyTimeout_=qo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>RS?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>NS?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ad in e){const n=e[ad];n===Ng?this.upgradeIfSecondaryHealthy_():n===Tg?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===bg&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ro("t",e),i=Ro("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Og,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Ng,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Rg,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ro("t",e),i=Ro("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ro(ad,e);if(Ig in e){const i=e[Ig];if(n===DS){const a=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(n===Rg){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===OS?this.onConnectionShutdown_(i):n===Tg?this.onReset_(i):n===kS?Cf("Server Error: "+i):n===bg?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Cf("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,a=e.h;this.sessionId=e.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Fh!==i&&dn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),qo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(TS))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(bS))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Og,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(zi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{put(e,n,i,a){}merge(e,n,i,a){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e){this.allowedEvents_=e,this.listeners_={},ne(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let a=0;a<i.length;a++)i[a].callback.apply(i[a].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const a=this.getInitialEvent(e);a&&n.apply(i,a)}off(e,n,i){this.validateEventType_(e);const a=this.listeners_[e]||[];for(let c=0;c<a.length;c++)if(a[c].callback===n&&(!i||i===a[c].context)){a.splice(c,1);return}}validateEventType_(e){ne(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends Dx{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ex()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new pc}getInitialEvent(e){return ne(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg=32,Dg=768;class He{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[i]=this.pieces_[a],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Be(){return new He("")}function ke(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function vi(t){return t.pieces_.length-t.pieceNum_}function et(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new He(t.pieces_,e)}function Wh(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function PS(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Sa(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Mx(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new He(e,0)}function _t(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof He)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let a=0;a<i.length;a++)i[a].length>0&&n.push(i[a])}return new He(n,0)}function Ne(t){return t.pieceNum_>=t.pieces_.length}function cn(t,e){const n=ke(t),i=ke(e);if(n===null)return e;if(n===i)return cn(et(t),et(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function LS(t,e){const n=Sa(t,0),i=Sa(e,0);for(let a=0;a<n.length&&a<i.length;a++){const c=ls(n[a],i[a]);if(c!==0)return c}return n.length===i.length?0:n.length<i.length?-1:1}function Px(t,e){if(vi(t)!==vi(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function Hn(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(vi(t)>vi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class BS{constructor(e,n){this.errorPrefix_=n,this.parts_=Sa(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Zc(this.parts_[i]);Lx(this)}}function FS(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Zc(e),Lx(t)}function US(t){const e=t.parts_.pop();t.byteLength_-=Zc(e),t.parts_.length>0&&(t.byteLength_-=1)}function Lx(t){if(t.byteLength_>Dg)throw new Error(t.errorPrefix_+"has a key path longer than "+Dg+" bytes ("+t.byteLength_+").");if(t.parts_.length>kg)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+kg+") or object contains a cycle "+Fi(t))}function Fi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh extends Dx{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new zh}getInitialEvent(e){return ne(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=1e3,jS=60*5*1e3,Mg=30*1e3,WS=1.3,zS=3e4,VS="server_kill",Pg=3;class Dr extends kx{constructor(e,n,i,a,c,f,p,y){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=f,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=Dr.nextPersistentConnectionId_++,this.log_=za("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Oo,this.maxReconnectDelay_=jS,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");zh.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&pc.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const a=++this.requestNumber_,c={r:a,a:e,b:n};this.log_(Mt(c)),ne(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(e){this.initConnection_();const n=new Ua,a={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:f=>{const p=f.d;f.s==="ok"?n.resolve(p):n.reject(p)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),n.promise}listen(e,n,i,a){this.initConnection_();const c=e._queryIdentifier,f=e._path.toString();this.log_("Listen called for "+f+" "+c),this.listens.has(f)||this.listens.set(f,new Map),ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ne(!this.listens.get(f).has(c),"listen() called twice for same path/queryId.");const p={onComplete:a,hashFn:n,query:e,tag:i};this.listens.get(f).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),a=n._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i},f="q";e.tag&&(c.q=n._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest(f,c,p=>{const y=p.d,m=p.s;Dr.warnOnListenWarnings_(y,n),(this.listens.get(i)&&this.listens.get(i).get(a))===e&&(this.log_("listen response",p),m!=="ok"&&this.removeListen_(i,a),e.onComplete&&e.onComplete(m,y))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Sr(e,"w")){const i=Zs(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+n._queryParams.getIndex().toString()+'"',c=n._path.toString();dn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Ov(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Mg)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Rv(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,a=>{const c=a.s,f=a.d||"error";this.authToken_===e&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),a=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,e._queryObject,n)}sendUnlisten_(e,n,i,a){this.log_("Unlisten on "+e+" for "+n);const c={p:e},f="n";a&&(c.q=i,c.t=a),this.sendRequest(f,c)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,a){const c={p:n,d:i};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(e,n,i,a){this.putInternal("p",e,n,i,a)}merge(e,n,i,a){this.putInternal("m",e,n,i,a)}putInternal(e,n,i,a,c){this.initConnection_();const f={p:n,d:i};c!==void 0&&(f.h=c),this.outstandingPuts_.push({action:e,request:f,onComplete:a}),this.outstandingPutCount_++;const p=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(p):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,c=>{this.log_(n+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const c=i.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Mt(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Cf("Unrecognized action received from server: "+Mt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ne(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Oo,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Oo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>zS&&(this.reconnectDelay_=Oo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*WS)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+Dr.nextConnectionId_++,c=this.lastSessionId;let f=!1,p=null;const y=function(){p?p.close():(f=!0,i())},m=function(_){ne(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(_)};this.realtime_={close:y,sendRequest:m};const v=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,I]=await Promise.all([this.authTokenProvider_.getToken(v),this.appCheckTokenProvider_.getToken(v)]);f?Yt("getToken() completed but was canceled"):(Yt("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=I&&I.token,p=new MS(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,O=>{dn(O+" ("+this.repoInfo_.toString()+")"),this.interrupt(VS)},c))}catch(_){this.log_("Failed to get token: "+_),f||(this.repoInfo_.nodeAdmin&&dn(_),y())}}}interrupt(e){Yt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Yt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],cg(this.interruptReasons_)&&(this.reconnectDelay_=Oo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(c=>Bh(c)).join("$"):i="default";const a=this.removeListen_(e,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(e,n){const i=new He(e).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(n),c.delete(n),c.size===0&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(e,n){Yt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Pg&&(this.reconnectDelay_=Mg,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Yt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Pg&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+dx.replace(/\./g,"-")]=1,ex()?e["framework.cordova"]=1:Sv()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=pc.getInstance().currentlyOnline();return cg(this.interruptReasons_)&&e}}Dr.nextPersistentConnectionId_=0;Dr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ie(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new Ie(Qs,e),a=new Ie(Qs,n);return this.compare(i,a)!==0}minPost(){return Ie.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let El;class Bx extends Qc{static get __EMPTY_NODE(){return El}static set __EMPTY_NODE(e){El=e}compare(e,n){return ls(e.name,n.name)}isDefinedOn(e){throw oo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ie.MIN}maxPost(){return new Ie($i,El)}makePost(e,n){return ne(typeof e=="string","KeyIndex indexValue must always be a string."),new Ie(e,El)}toString(){return".key"}}const zs=new Bx;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n,i,a,c=null){this.isReverse_=a,this.resultGenerator_=c,this.nodeStack_=[];let f=1;for(;!e.isEmpty();)if(e=e,f=n?i(e.key,n):1,a&&(f*=-1),f<0)this.isReverse_?e=e.left:e=e.right;else if(f===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class jt{constructor(e,n,i,a,c){this.key=e,this.value=n,this.color=i??jt.RED,this.left=a??vn.EMPTY_NODE,this.right=c??vn.EMPTY_NODE}copy(e,n,i,a,c){return new jt(e??this.key,n??this.value,i??this.color,a??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let a=this;const c=i(e,a.key);return c<0?a=a.copy(null,null,null,a.left.insert(e,n,i),null):c===0?a=a.copy(null,n,null,null,null):a=a.copy(null,null,null,null,a.right.insert(e,n,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return vn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,a;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return vn.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}jt.RED=!0;jt.BLACK=!1;class HS{copy(e,n,i,a,c){return this}insert(e,n,i){return new jt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class vn{constructor(e,n=vn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new vn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,jt.BLACK,null,null))}remove(e){return new vn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,jt.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,a=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return a?a.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(a=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new vl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new vl(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new vl(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new vl(this.root_,null,this.comparator_,!0,e)}}vn.EMPTY_NODE=new HS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(t,e){return ls(t.name,e.name)}function Vh(t,e){return ls(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vf;function XS(t){vf=t}const Fx=function(t){return typeof t=="number"?"number:"+px(t):"string:"+t},Ux=function(t){if(t.isLeafNode()){const e=t.val();ne(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Sr(e,".sv"),"Priority must be a string or number.")}else ne(t===vf||t.isEmpty(),"priority of unexpected type.");ne(t===vf||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lg;class Ft{constructor(e,n=Ft.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ne(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Ux(this.priorityNode_)}static set __childrenNodeConstructor(e){Lg=e}static get __childrenNodeConstructor(){return Lg}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ft(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ft.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ne(e)?this:ke(e)===".priority"?this.priorityNode_:Ft.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Ft.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=ke(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(ne(i!==".priority"||vi(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Ft.__childrenNodeConstructor.EMPTY_NODE.updateChild(et(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Fx(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=px(this.value_):e+=this.value_,this.lazyHash_=hx(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ft.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ft.__childrenNodeConstructor?-1:(ne(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,a=Ft.VALUE_TYPE_ORDER.indexOf(n),c=Ft.VALUE_TYPE_ORDER.indexOf(i);return ne(a>=0,"Unknown leaf type: "+n),ne(c>=0,"Unknown leaf type: "+i),a===c?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ft.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jx,Wx;function YS(t){jx=t}function KS(t){Wx=t}class qS extends Qc{compare(e,n){const i=e.node.getPriority(),a=n.node.getPriority(),c=i.compareTo(a);return c===0?ls(e.name,n.name):c}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ie.MIN}maxPost(){return new Ie($i,new Ft("[PRIORITY-POST]",Wx))}makePost(e,n){const i=jx(e);return new Ie(n,new Ft("[PRIORITY-POST]",i))}toString(){return".priority"}}const Ct=new qS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=Math.log(2);class QS{constructor(e){const n=c=>parseInt(Math.log(c)/ZS,10),i=c=>parseInt(Array(c+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const a=i(this.count);this.bits_=e+1&a}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const mc=function(t,e,n,i){t.sort(e);const a=function(y,m){const v=m-y;let _,I;if(v===0)return null;if(v===1)return _=t[y],I=n?n(_):_,new jt(I,_.node,jt.BLACK,null,null);{const O=parseInt(v/2,10)+y,P=a(y,O),L=a(O+1,m);return _=t[O],I=n?n(_):_,new jt(I,_.node,jt.BLACK,P,L)}},c=function(y){let m=null,v=null,_=t.length;const I=function(P,L){const K=_-P,k=_;_-=P;const R=a(K+1,k),N=t[K],U=n?n(N):N;O(new jt(U,N.node,L,null,R))},O=function(P){m?(m.left=P,m=P):(v=P,m=P)};for(let P=0;P<y.count;++P){const L=y.nextBitIsOne(),K=Math.pow(2,y.count-(P+1));L?I(K,jt.BLACK):(I(K,jt.BLACK),I(K,jt.RED))}return v},f=new QS(t.length),p=c(f);return new vn(i||e,p)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld;const _s={};class Or{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return ne(_s&&Ct,"ChildrenNode.ts has not been loaded"),ld=ld||new Or({".priority":_s},{".priority":Ct}),ld}get(e){const n=Zs(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof vn?n:null}hasIndex(e){return Sr(this.indexSet_,e.toString())}addIndex(e,n){ne(e!==zs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let a=!1;const c=n.getIterator(Ie.Wrap);let f=c.getNext();for(;f;)a=a||e.isDefinedOn(f.node),i.push(f),f=c.getNext();let p;a?p=mc(i,e.getCompare()):p=_s;const y=e.toString(),m=Object.assign({},this.indexSet_);m[y]=e;const v=Object.assign({},this.indexes_);return v[y]=p,new Or(v,m)}addToIndexes(e,n){const i=dc(this.indexes_,(a,c)=>{const f=Zs(this.indexSet_,c);if(ne(f,"Missing index implementation for "+c),a===_s)if(f.isDefinedOn(e.node)){const p=[],y=n.getIterator(Ie.Wrap);let m=y.getNext();for(;m;)m.name!==e.name&&p.push(m),m=y.getNext();return p.push(e),mc(p,f.getCompare())}else return _s;else{const p=n.get(e.name);let y=a;return p&&(y=y.remove(new Ie(e.name,p))),y.insert(e,e.node)}});return new Or(i,this.indexSet_)}removeFromIndexes(e,n){const i=dc(this.indexes_,a=>{if(a===_s)return a;{const c=n.get(e.name);return c?a.remove(new Ie(e.name,c)):a}});return new Or(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ko;class _e{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Ux(this.priorityNode_),this.children_.isEmpty()&&ne(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ko||(ko=new _e(new vn(Vh),null,Or.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ko}updatePriority(e){return this.children_.isEmpty()?this:new _e(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ko:n}}getChild(e){const n=ke(e);return n===null?this:this.getImmediateChild(n).getChild(et(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ne(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new Ie(e,n);let a,c;n.isEmpty()?(a=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(e,n),c=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?ko:this.priorityNode_;return new _e(a,f,c)}}updateChild(e,n){const i=ke(e);if(i===null)return n;{ne(ke(e)!==".priority"||vi(e)===1,".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(et(e),n);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,a=0,c=!0;if(this.forEachChild(Ct,(f,p)=>{n[f]=p.val(e),i++,c&&_e.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):c=!1}),!e&&c&&a<2*i){const f=[];for(const p in n)f[p]=n[p];return f}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Fx(this.getPriority().val())+":"),this.forEachChild(Ct,(n,i)=>{const a=i.hash();a!==""&&(e+=":"+n+":"+a)}),this.lazyHash_=e===""?"":hx(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new Ie(e,n));return c?c.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ie(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ie(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(a=>n(a.name,a.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,a=>a);{const a=this.children_.getIteratorFrom(e.name,Ie.Wrap);let c=a.peek();for(;c!=null&&n.compare(c,e)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,a=>a);{const a=this.children_.getReverseIteratorFrom(e.name,Ie.Wrap);let c=a.peek();for(;c!=null&&n.compare(c,e)>0;)a.getNext(),c=a.peek();return a}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Va?-1:0}withIndex(e){if(e===zs||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new _e(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===zs||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(Ct),a=n.getIterator(Ct);let c=i.getNext(),f=a.getNext();for(;c&&f;){if(c.name!==f.name||!c.node.equals(f.node))return!1;c=i.getNext(),f=a.getNext()}return c===null&&f===null}else return!1;else return!1}}resolveIndex_(e){return e===zs?null:this.indexMap_.get(e.toString())}}_e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class $S extends _e{constructor(){super(new vn(Vh),_e.EMPTY_NODE,Or.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return _e.EMPTY_NODE}isEmpty(){return!1}}const Va=new $S;Object.defineProperties(Ie,{MIN:{value:new Ie(Qs,_e.EMPTY_NODE)},MAX:{value:new Ie($i,Va)}});Bx.__EMPTY_NODE=_e.EMPTY_NODE;Ft.__childrenNodeConstructor=_e;XS(Va);KS(Va);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=!0;function Dt(t,e=null){if(t===null)return _e.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ne(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Ft(n,Dt(e))}if(!(t instanceof Array)&&JS){const n=[];let i=!1;if(Zt(t,(f,p)=>{if(f.substring(0,1)!=="."){const y=Dt(p);y.isEmpty()||(i=i||!y.getPriority().isEmpty(),n.push(new Ie(f,y)))}}),n.length===0)return _e.EMPTY_NODE;const c=mc(n,GS,f=>f.name,Vh);if(i){const f=mc(n,Ct.getCompare());return new _e(c,Dt(e),new Or({".priority":f},{".priority":Ct}))}else return new _e(c,Dt(e),Or.Default)}else{let n=_e.EMPTY_NODE;return Zt(t,(i,a)=>{if(Sr(t,i)&&i.substring(0,1)!=="."){const c=Dt(a);(c.isLeafNode()||!c.isEmpty())&&(n=n.updateImmediateChild(i,c))}}),n.updatePriority(Dt(e))}}YS(Dt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA extends Qc{constructor(e){super(),this.indexPath_=e,ne(!Ne(e)&&ke(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),a=this.extractChild(n.node),c=i.compareTo(a);return c===0?ls(e.name,n.name):c}makePost(e,n){const i=Dt(e),a=_e.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ie(n,a)}maxPost(){const e=_e.EMPTY_NODE.updateChild(this.indexPath_,Va);return new Ie($i,e)}toString(){return Sa(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA extends Qc{compare(e,n){const i=e.node.compareTo(n.node);return i===0?ls(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ie.MIN}maxPost(){return Ie.MAX}makePost(e,n){const i=Dt(e);return new Ie(n,i)}toString(){return".value"}}const nA=new tA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(t){return{type:"value",snapshotNode:t}}function $s(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Aa(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ia(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function rA(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e){this.index_=e}updateChild(e,n,i,a,c,f){ne(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(n);return p.getChild(a).equals(i.getChild(a))&&p.isEmpty()===i.isEmpty()||(f!=null&&(i.isEmpty()?e.hasChild(n)?f.trackChildChange(Aa(n,p)):ne(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?f.trackChildChange($s(n,i)):f.trackChildChange(Ia(n,i,p))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Ct,(a,c)=>{n.hasChild(a)||i.trackChildChange(Aa(a,c))}),n.isLeafNode()||n.forEachChild(Ct,(a,c)=>{if(e.hasChild(a)){const f=e.getImmediateChild(a);f.equals(c)||i.trackChildChange(Ia(a,c,f))}else i.trackChildChange($s(a,c))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?_e.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.indexedFilter_=new Hh(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ta.getStartPost_(e),this.endPost_=Ta.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,a,c,f){return this.matches(new Ie(n,i))||(i=_e.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,a,c,f)}updateFullNode(e,n,i){n.isLeafNode()&&(n=_e.EMPTY_NODE);let a=n.withIndex(this.index_);a=a.updatePriority(_e.EMPTY_NODE);const c=this;return n.forEachChild(Ct,(f,p)=>{c.matches(new Ie(f,p))||(a=a.updateImmediateChild(f,_e.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,a,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Ta(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,a,c,f){return this.rangedFilter_.matches(new Ie(n,i))||(i=_e.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,a,c,f):this.fullLimitUpdateChild_(e,n,i,c,f)}updateFullNode(e,n,i){let a;if(n.isLeafNode()||n.isEmpty())a=_e.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){a=_e.EMPTY_NODE.withIndex(this.index_);let c;this.reverse_?c=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let f=0;for(;c.hasNext()&&f<this.limit_;){const p=c.getNext();if(this.withinDirectionalStart(p))if(this.withinDirectionalEnd(p))a=a.updateImmediateChild(p.name,p.node),f++;else break;else continue}}else{a=n.withIndex(this.index_),a=a.updatePriority(_e.EMPTY_NODE);let c;this.reverse_?c=a.getReverseIterator(this.index_):c=a.getIterator(this.index_);let f=0;for(;c.hasNext();){const p=c.getNext();f<this.limit_&&this.withinDirectionalStart(p)&&this.withinDirectionalEnd(p)?f++:a=a.updateImmediateChild(p.name,_e.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,a,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,a,c){let f;if(this.reverse_){const _=this.index_.getCompare();f=(I,O)=>_(O,I)}else f=this.index_.getCompare();const p=e;ne(p.numChildren()===this.limit_,"");const y=new Ie(n,i),m=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),v=this.rangedFilter_.matches(y);if(p.hasChild(n)){const _=p.getImmediateChild(n);let I=a.getChildAfterChild(this.index_,m,this.reverse_);for(;I!=null&&(I.name===n||p.hasChild(I.name));)I=a.getChildAfterChild(this.index_,I,this.reverse_);const O=I==null?1:f(I,y);if(v&&!i.isEmpty()&&O>=0)return c!=null&&c.trackChildChange(Ia(n,i,_)),p.updateImmediateChild(n,i);{c!=null&&c.trackChildChange(Aa(n,_));const L=p.updateImmediateChild(n,_e.EMPTY_NODE);return I!=null&&this.rangedFilter_.matches(I)?(c!=null&&c.trackChildChange($s(I.name,I.node)),L.updateImmediateChild(I.name,I.node)):L}}else return i.isEmpty()?e:v&&f(m,y)>=0?(c!=null&&(c.trackChildChange(Aa(m.name,m.node)),c.trackChildChange($s(n,i))),p.updateImmediateChild(n,i).updateImmediateChild(m.name,_e.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ct}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ne(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ne(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Qs}hasEnd(){return this.endSet_}getIndexEndValue(){return ne(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ne(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:$i}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ne(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ct}copy(){const e=new Gh;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function sA(t){return t.loadsAllData()?new Hh(t.getIndex()):t.hasLimit()?new iA(t):new Ta(t)}function Bg(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ct?n="$priority":t.index_===nA?n="$value":t.index_===zs?n="$key":(ne(t.index_ instanceof eA,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Mt(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=Mt(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+Mt(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=Mt(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+Mt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Fg(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ct&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc extends kx{constructor(e,n,i,a){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=a,this.log_=za("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ne(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,a){const c=e._path.toString();this.log_("Listen called for "+c+" "+e._queryIdentifier);const f=xc.getListenId_(e,i),p={};this.listens_[f]=p;const y=Bg(e._queryParams);this.restRequest_(c+".json",y,(m,v)=>{let _=v;if(m===404&&(_=null,m=null),m===null&&this.onDataUpdate_(c,_,!1,i),Zs(this.listens_,f)===p){let I;m?m===401?I="permission_denied":I="rest_error:"+m:I="ok",a(I,null)}})}unlisten(e,n){const i=xc.getListenId_(e,n);delete this.listens_[i]}get(e){const n=Bg(e._queryParams),i=e._path.toString(),a=new Ua;return this.restRequest_(i+".json",n,(c,f)=>{let p=f;c===404&&(p=null,c=null),c===null?(this.onDataUpdate_(i,p,!1,null),a.resolve(p)):a.reject(new Error(p))}),a.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,c])=>{a&&a.accessToken&&(n.auth=a.accessToken),c&&c.token&&(n.ac=c.token);const f=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+kv(n);this.log_("Sending REST request for "+f);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(i&&p.readyState===4){this.log_("REST Response for "+f+" received. status:",p.status,"response:",p.responseText);let y=null;if(p.status>=200&&p.status<300){try{y=Ca(p.responseText)}catch{dn("Failed to parse JSON response for "+f+": "+p.responseText)}i(null,y)}else p.status!==401&&p.status!==404&&dn("Got unsuccessful REST response for "+f+" Status: "+p.status),i(p.status);i=null}},p.open("GET",f,!0),p.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this.rootNode_=_e.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(){return{value:null,children:new Map}}function Vx(t,e,n){if(Ne(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=ke(e);t.children.has(i)||t.children.set(i,yc());const a=t.children.get(i);e=et(e),Vx(a,e,n)}}function Sf(t,e,n){t.value!==null?n(e,t.value):aA(t,(i,a)=>{const c=new He(e.toString()+"/"+i);Sf(a,c,n)})}function aA(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Zt(this.last_,(i,a)=>{n[i]=n[i]-a}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug=10*1e3,cA=30*1e3,uA=5*60*1e3;class dA{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new lA(e);const i=Ug+(cA-Ug)*Math.random();qo(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;Zt(e,(a,c)=>{c>0&&Sr(this.statsToReport_,a)&&(n[a]=c,i=!0)}),i&&this.server_.reportStats(n),qo(this.reportStats_.bind(this),Math.floor(Math.random()*2*uA))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(rr||(rr={}));function Xh(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Yh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Kh(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=rr.ACK_USER_WRITE,this.source=Xh()}operationForChild(e){if(Ne(this.path)){if(this.affectedTree.value!=null)return ne(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new He(e));return new wc(Be(),n,this.revert)}}else return ne(ke(this.path)===e,"operationForChild called for unrelated child."),new wc(et(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n){this.source=e,this.path=n,this.type=rr.LISTEN_COMPLETE}operationForChild(e){return Ne(this.path)?new ba(this.source,Be()):new ba(this.source,et(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=rr.OVERWRITE}operationForChild(e){return Ne(this.path)?new Ji(this.source,Be(),this.snap.getImmediateChild(e)):new Ji(this.source,et(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=rr.MERGE}operationForChild(e){if(Ne(this.path)){const n=this.children.subtree(new He(e));return n.isEmpty()?null:n.value?new Ji(this.source,Be(),n.value):new Js(this.source,Be(),n)}else return ne(ke(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Js(this.source,et(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ne(e))return this.isFullyInitialized()&&!this.filtered_;const n=ke(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function hA(t,e,n,i){const a=[],c=[];return e.forEach(f=>{f.type==="child_changed"&&t.index_.indexedValueChanged(f.oldSnap,f.snapshotNode)&&c.push(rA(f.childName,f.snapshotNode))}),Do(t,a,"child_removed",e,i,n),Do(t,a,"child_added",e,i,n),Do(t,a,"child_moved",c,i,n),Do(t,a,"child_changed",e,i,n),Do(t,a,"value",e,i,n),a}function Do(t,e,n,i,a,c){const f=i.filter(p=>p.type===n);f.sort((p,y)=>pA(t,p,y)),f.forEach(p=>{const y=gA(t,p,c);a.forEach(m=>{m.respondsTo(p.type)&&e.push(m.createEvent(y,t.query_))})})}function gA(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function pA(t,e,n){if(e.childName==null||n.childName==null)throw oo("Should only compare child_ events.");const i=new Ie(e.childName,e.snapshotNode),a=new Ie(n.childName,n.snapshotNode);return t.index_.compare(i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t,e){return{eventCache:t,serverCache:e}}function Zo(t,e,n,i){return $c(new Si(e,n,i),t.serverCache)}function Hx(t,e,n,i){return $c(t.eventCache,new Si(e,n,i))}function _c(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function es(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cd;const mA=()=>(cd||(cd=new vn(eS)),cd);class $e{constructor(e,n=mA()){this.value=e,this.children=n}static fromObject(e){let n=new $e(null);return Zt(e,(i,a)=>{n=n.set(new He(i),a)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Be(),value:this.value};if(Ne(e))return null;{const i=ke(e),a=this.children.get(i);if(a!==null){const c=a.findRootMostMatchingPathAndValue(et(e),n);return c!=null?{path:_t(new He(i),c.path),value:c.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ne(e))return this;{const n=ke(e),i=this.children.get(n);return i!==null?i.subtree(et(e)):new $e(null)}}set(e,n){if(Ne(e))return new $e(n,this.children);{const i=ke(e),c=(this.children.get(i)||new $e(null)).set(et(e),n),f=this.children.insert(i,c);return new $e(this.value,f)}}remove(e){if(Ne(e))return this.children.isEmpty()?new $e(null):new $e(null,this.children);{const n=ke(e),i=this.children.get(n);if(i){const a=i.remove(et(e));let c;return a.isEmpty()?c=this.children.remove(n):c=this.children.insert(n,a),this.value===null&&c.isEmpty()?new $e(null):new $e(this.value,c)}else return this}}get(e){if(Ne(e))return this.value;{const n=ke(e),i=this.children.get(n);return i?i.get(et(e)):null}}setTree(e,n){if(Ne(e))return n;{const i=ke(e),c=(this.children.get(i)||new $e(null)).setTree(et(e),n);let f;return c.isEmpty()?f=this.children.remove(i):f=this.children.insert(i,c),new $e(this.value,f)}}fold(e){return this.fold_(Be(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((a,c)=>{i[a]=c.fold_(_t(e,a),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,Be(),n)}findOnPath_(e,n,i){const a=this.value?i(n,this.value):!1;if(a)return a;if(Ne(e))return null;{const c=ke(e),f=this.children.get(c);return f?f.findOnPath_(et(e),_t(n,c),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Be(),n)}foreachOnPath_(e,n,i){if(Ne(e))return this;{this.value&&i(n,this.value);const a=ke(e),c=this.children.get(a);return c?c.foreachOnPath_(et(e),_t(n,a),i):new $e(null)}}foreach(e){this.foreach_(Be(),e)}foreach_(e,n){this.children.inorderTraversal((i,a)=>{a.foreach_(_t(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.writeTree_=e}static empty(){return new or(new $e(null))}}function Qo(t,e,n){if(Ne(e))return new or(new $e(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const a=i.path;let c=i.value;const f=cn(a,e);return c=c.updateChild(f,n),new or(t.writeTree_.set(a,c))}else{const a=new $e(n),c=t.writeTree_.setTree(e,a);return new or(c)}}}function Af(t,e,n){let i=t;return Zt(n,(a,c)=>{i=Qo(i,_t(e,a),c)}),i}function jg(t,e){if(Ne(e))return or.empty();{const n=t.writeTree_.setTree(e,new $e(null));return new or(n)}}function If(t,e){return cs(t,e)!=null}function cs(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(cn(n.path,e)):null}function Wg(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ct,(i,a)=>{e.push(new Ie(i,a))}):t.writeTree_.children.inorderTraversal((i,a)=>{a.value!=null&&e.push(new Ie(i,a.value))}),e}function yi(t,e){if(Ne(e))return t;{const n=cs(t,e);return n!=null?new or(new $e(n)):new or(t.writeTree_.subtree(e))}}function Tf(t){return t.writeTree_.isEmpty()}function eo(t,e){return Gx(Be(),t.writeTree_,e)}function Gx(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((a,c)=>{a===".priority"?(ne(c.value!==null,"Priority writes must always be leaf nodes"),i=c.value):n=Gx(_t(t,a),c,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(_t(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(t,e){return qx(e,t)}function xA(t,e,n,i,a){ne(i>t.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:a}),a&&(t.visibleWrites=Qo(t.visibleWrites,e,n)),t.lastWriteId=i}function yA(t,e,n,i){ne(i>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:i,visible:!0}),t.visibleWrites=Af(t.visibleWrites,e,n),t.lastWriteId=i}function wA(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function _A(t,e){const n=t.allWrites.findIndex(p=>p.writeId===e);ne(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let a=i.visible,c=!1,f=t.allWrites.length-1;for(;a&&f>=0;){const p=t.allWrites[f];p.visible&&(f>=n&&CA(p,i.path)?a=!1:Hn(i.path,p.path)&&(c=!0)),f--}if(a){if(c)return EA(t),!0;if(i.snap)t.visibleWrites=jg(t.visibleWrites,i.path);else{const p=i.children;Zt(p,y=>{t.visibleWrites=jg(t.visibleWrites,_t(i.path,y))})}return!0}else return!1}function CA(t,e){if(t.snap)return Hn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Hn(_t(t.path,n),e))return!0;return!1}function EA(t){t.visibleWrites=Xx(t.allWrites,vA,Be()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function vA(t){return t.visible}function Xx(t,e,n){let i=or.empty();for(let a=0;a<t.length;++a){const c=t[a];if(e(c)){const f=c.path;let p;if(c.snap)Hn(n,f)?(p=cn(n,f),i=Qo(i,p,c.snap)):Hn(f,n)&&(p=cn(f,n),i=Qo(i,Be(),c.snap.getChild(p)));else if(c.children){if(Hn(n,f))p=cn(n,f),i=Af(i,p,c.children);else if(Hn(f,n))if(p=cn(f,n),Ne(p))i=Af(i,Be(),c.children);else{const y=Zs(c.children,ke(p));if(y){const m=y.getChild(et(p));i=Qo(i,Be(),m)}}}else throw oo("WriteRecord should have .snap or .children")}}return i}function Yx(t,e,n,i,a){if(!i&&!a){const c=cs(t.visibleWrites,e);if(c!=null)return c;{const f=yi(t.visibleWrites,e);if(Tf(f))return n;if(n==null&&!If(f,Be()))return null;{const p=n||_e.EMPTY_NODE;return eo(f,p)}}}else{const c=yi(t.visibleWrites,e);if(!a&&Tf(c))return n;if(!a&&n==null&&!If(c,Be()))return null;{const f=function(m){return(m.visible||a)&&(!i||!~i.indexOf(m.writeId))&&(Hn(m.path,e)||Hn(e,m.path))},p=Xx(t.allWrites,f,e),y=n||_e.EMPTY_NODE;return eo(p,y)}}}function SA(t,e,n){let i=_e.EMPTY_NODE;const a=cs(t.visibleWrites,e);if(a)return a.isLeafNode()||a.forEachChild(Ct,(c,f)=>{i=i.updateImmediateChild(c,f)}),i;if(n){const c=yi(t.visibleWrites,e);return n.forEachChild(Ct,(f,p)=>{const y=eo(yi(c,new He(f)),p);i=i.updateImmediateChild(f,y)}),Wg(c).forEach(f=>{i=i.updateImmediateChild(f.name,f.node)}),i}else{const c=yi(t.visibleWrites,e);return Wg(c).forEach(f=>{i=i.updateImmediateChild(f.name,f.node)}),i}}function AA(t,e,n,i,a){ne(i||a,"Either existingEventSnap or existingServerSnap must exist");const c=_t(e,n);if(If(t.visibleWrites,c))return null;{const f=yi(t.visibleWrites,c);return Tf(f)?a.getChild(n):eo(f,a.getChild(n))}}function IA(t,e,n,i){const a=_t(e,n),c=cs(t.visibleWrites,a);if(c!=null)return c;if(i.isCompleteForChild(n)){const f=yi(t.visibleWrites,a);return eo(f,i.getNode().getImmediateChild(n))}else return null}function TA(t,e){return cs(t.visibleWrites,e)}function bA(t,e,n,i,a,c,f){let p;const y=yi(t.visibleWrites,e),m=cs(y,Be());if(m!=null)p=m;else if(n!=null)p=eo(y,n);else return[];if(p=p.withIndex(f),!p.isEmpty()&&!p.isLeafNode()){const v=[],_=f.getCompare(),I=c?p.getReverseIteratorFrom(i,f):p.getIteratorFrom(i,f);let O=I.getNext();for(;O&&v.length<a;)_(O,i)!==0&&v.push(O),O=I.getNext();return v}else return[]}function NA(){return{visibleWrites:or.empty(),allWrites:[],lastWriteId:-1}}function Cc(t,e,n,i){return Yx(t.writeTree,t.treePath,e,n,i)}function qh(t,e){return SA(t.writeTree,t.treePath,e)}function zg(t,e,n,i){return AA(t.writeTree,t.treePath,e,n,i)}function Ec(t,e){return TA(t.writeTree,_t(t.treePath,e))}function RA(t,e,n,i,a,c){return bA(t.writeTree,t.treePath,e,n,i,a,c)}function Zh(t,e,n){return IA(t.writeTree,t.treePath,e,n)}function Kx(t,e){return qx(_t(t.treePath,e),t.writeTree)}function qx(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;ne(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ne(i!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(i);if(a){const c=a.type;if(n==="child_added"&&c==="child_removed")this.changeMap.set(i,Ia(i,e.snapshotNode,a.snapshotNode));else if(n==="child_removed"&&c==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&c==="child_changed")this.changeMap.set(i,Aa(i,a.oldSnap));else if(n==="child_changed"&&c==="child_added")this.changeMap.set(i,$s(i,e.snapshotNode));else if(n==="child_changed"&&c==="child_changed")this.changeMap.set(i,Ia(i,e.snapshotNode,a.oldSnap));else throw oo("Illegal combination of changes: "+e+" occurred after "+a)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const Zx=new kA;class Qh{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Si(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Zh(this.writes_,e,i)}}getChildAfterChild(e,n,i){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:es(this.viewCache_),c=RA(this.writes_,a,n,1,i,e);return c.length===0?null:c[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(t){return{filter:t}}function MA(t,e){ne(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ne(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function PA(t,e,n,i,a){const c=new OA;let f,p;if(n.type===rr.OVERWRITE){const m=n;m.source.fromUser?f=bf(t,e,m.path,m.snap,i,a,c):(ne(m.source.fromServer,"Unknown source."),p=m.source.tagged||e.serverCache.isFiltered()&&!Ne(m.path),f=vc(t,e,m.path,m.snap,i,a,p,c))}else if(n.type===rr.MERGE){const m=n;m.source.fromUser?f=BA(t,e,m.path,m.children,i,a,c):(ne(m.source.fromServer,"Unknown source."),p=m.source.tagged||e.serverCache.isFiltered(),f=Nf(t,e,m.path,m.children,i,a,p,c))}else if(n.type===rr.ACK_USER_WRITE){const m=n;m.revert?f=jA(t,e,m.path,i,a,c):f=FA(t,e,m.path,m.affectedTree,i,a,c)}else if(n.type===rr.LISTEN_COMPLETE)f=UA(t,e,n.path,i,c);else throw oo("Unknown operation type: "+n.type);const y=c.getChanges();return LA(e,f,y),{viewCache:f,changes:y}}function LA(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const a=i.getNode().isLeafNode()||i.getNode().isEmpty(),c=_c(t);(n.length>0||!t.eventCache.isFullyInitialized()||a&&!i.getNode().equals(c)||!i.getNode().getPriority().equals(c.getPriority()))&&n.push(zx(_c(e)))}}function Qx(t,e,n,i,a,c){const f=e.eventCache;if(Ec(i,n)!=null)return e;{let p,y;if(Ne(n))if(ne(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=es(e),v=m instanceof _e?m:_e.EMPTY_NODE,_=qh(i,v);p=t.filter.updateFullNode(e.eventCache.getNode(),_,c)}else{const m=Cc(i,es(e));p=t.filter.updateFullNode(e.eventCache.getNode(),m,c)}else{const m=ke(n);if(m===".priority"){ne(vi(n)===1,"Can't have a priority with additional path components");const v=f.getNode();y=e.serverCache.getNode();const _=zg(i,n,v,y);_!=null?p=t.filter.updatePriority(v,_):p=f.getNode()}else{const v=et(n);let _;if(f.isCompleteForChild(m)){y=e.serverCache.getNode();const I=zg(i,n,f.getNode(),y);I!=null?_=f.getNode().getImmediateChild(m).updateChild(v,I):_=f.getNode().getImmediateChild(m)}else _=Zh(i,m,e.serverCache);_!=null?p=t.filter.updateChild(f.getNode(),m,_,v,a,c):p=f.getNode()}}return Zo(e,p,f.isFullyInitialized()||Ne(n),t.filter.filtersNodes())}}function vc(t,e,n,i,a,c,f,p){const y=e.serverCache;let m;const v=f?t.filter:t.filter.getIndexedFilter();if(Ne(n))m=v.updateFullNode(y.getNode(),i,null);else if(v.filtersNodes()&&!y.isFiltered()){const O=y.getNode().updateChild(n,i);m=v.updateFullNode(y.getNode(),O,null)}else{const O=ke(n);if(!y.isCompleteForPath(n)&&vi(n)>1)return e;const P=et(n),K=y.getNode().getImmediateChild(O).updateChild(P,i);O===".priority"?m=v.updatePriority(y.getNode(),K):m=v.updateChild(y.getNode(),O,K,P,Zx,null)}const _=Hx(e,m,y.isFullyInitialized()||Ne(n),v.filtersNodes()),I=new Qh(a,_,c);return Qx(t,_,n,a,I,p)}function bf(t,e,n,i,a,c,f){const p=e.eventCache;let y,m;const v=new Qh(a,e,c);if(Ne(n))m=t.filter.updateFullNode(e.eventCache.getNode(),i,f),y=Zo(e,m,!0,t.filter.filtersNodes());else{const _=ke(n);if(_===".priority")m=t.filter.updatePriority(e.eventCache.getNode(),i),y=Zo(e,m,p.isFullyInitialized(),p.isFiltered());else{const I=et(n),O=p.getNode().getImmediateChild(_);let P;if(Ne(I))P=i;else{const L=v.getCompleteChild(_);L!=null?Wh(I)===".priority"&&L.getChild(Mx(I)).isEmpty()?P=L:P=L.updateChild(I,i):P=_e.EMPTY_NODE}if(O.equals(P))y=e;else{const L=t.filter.updateChild(p.getNode(),_,P,I,v,f);y=Zo(e,L,p.isFullyInitialized(),t.filter.filtersNodes())}}}return y}function Vg(t,e){return t.eventCache.isCompleteForChild(e)}function BA(t,e,n,i,a,c,f){let p=e;return i.foreach((y,m)=>{const v=_t(n,y);Vg(e,ke(v))&&(p=bf(t,p,v,m,a,c,f))}),i.foreach((y,m)=>{const v=_t(n,y);Vg(e,ke(v))||(p=bf(t,p,v,m,a,c,f))}),p}function Hg(t,e,n){return n.foreach((i,a)=>{e=e.updateChild(i,a)}),e}function Nf(t,e,n,i,a,c,f,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y=e,m;Ne(n)?m=i:m=new $e(null).setTree(n,i);const v=e.serverCache.getNode();return m.children.inorderTraversal((_,I)=>{if(v.hasChild(_)){const O=e.serverCache.getNode().getImmediateChild(_),P=Hg(t,O,I);y=vc(t,y,new He(_),P,a,c,f,p)}}),m.children.inorderTraversal((_,I)=>{const O=!e.serverCache.isCompleteForChild(_)&&I.value===null;if(!v.hasChild(_)&&!O){const P=e.serverCache.getNode().getImmediateChild(_),L=Hg(t,P,I);y=vc(t,y,new He(_),L,a,c,f,p)}}),y}function FA(t,e,n,i,a,c,f){if(Ec(a,n)!=null)return e;const p=e.serverCache.isFiltered(),y=e.serverCache;if(i.value!=null){if(Ne(n)&&y.isFullyInitialized()||y.isCompleteForPath(n))return vc(t,e,n,y.getNode().getChild(n),a,c,p,f);if(Ne(n)){let m=new $e(null);return y.getNode().forEachChild(zs,(v,_)=>{m=m.set(new He(v),_)}),Nf(t,e,n,m,a,c,p,f)}else return e}else{let m=new $e(null);return i.foreach((v,_)=>{const I=_t(n,v);y.isCompleteForPath(I)&&(m=m.set(v,y.getNode().getChild(I)))}),Nf(t,e,n,m,a,c,p,f)}}function UA(t,e,n,i,a){const c=e.serverCache,f=Hx(e,c.getNode(),c.isFullyInitialized()||Ne(n),c.isFiltered());return Qx(t,f,n,i,Zx,a)}function jA(t,e,n,i,a,c){let f;if(Ec(i,n)!=null)return e;{const p=new Qh(i,e,a),y=e.eventCache.getNode();let m;if(Ne(n)||ke(n)===".priority"){let v;if(e.serverCache.isFullyInitialized())v=Cc(i,es(e));else{const _=e.serverCache.getNode();ne(_ instanceof _e,"serverChildren would be complete if leaf node"),v=qh(i,_)}v=v,m=t.filter.updateFullNode(y,v,c)}else{const v=ke(n);let _=Zh(i,v,e.serverCache);_==null&&e.serverCache.isCompleteForChild(v)&&(_=y.getImmediateChild(v)),_!=null?m=t.filter.updateChild(y,v,_,et(n),p,c):e.eventCache.getNode().hasChild(v)?m=t.filter.updateChild(y,v,_e.EMPTY_NODE,et(n),p,c):m=y,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(f=Cc(i,es(e)),f.isLeafNode()&&(m=t.filter.updateFullNode(m,f,c)))}return f=e.serverCache.isFullyInitialized()||Ec(i,Be())!=null,Zo(e,m,f,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,a=new Hh(i.getIndex()),c=sA(i);this.processor_=DA(c);const f=n.serverCache,p=n.eventCache,y=a.updateFullNode(_e.EMPTY_NODE,f.getNode(),null),m=c.updateFullNode(_e.EMPTY_NODE,p.getNode(),null),v=new Si(y,f.isFullyInitialized(),a.filtersNodes()),_=new Si(m,p.isFullyInitialized(),c.filtersNodes());this.viewCache_=$c(_,v),this.eventGenerator_=new fA(this.query_)}get query(){return this.query_}}function zA(t){return t.viewCache_.serverCache.getNode()}function VA(t){return _c(t.viewCache_)}function HA(t,e){const n=es(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ne(e)&&!n.getImmediateChild(ke(e)).isEmpty())?n.getChild(e):null}function Gg(t){return t.eventRegistrations_.length===0}function GA(t,e){t.eventRegistrations_.push(e)}function Xg(t,e,n){const i=[];if(n){ne(e==null,"A cancel should cancel all event registrations.");const a=t.query._path;t.eventRegistrations_.forEach(c=>{const f=c.createCancelEvent(n,a);f&&i.push(f)})}if(e){let a=[];for(let c=0;c<t.eventRegistrations_.length;++c){const f=t.eventRegistrations_[c];if(!f.matches(e))a.push(f);else if(e.hasAnyCallback()){a=a.concat(t.eventRegistrations_.slice(c+1));break}}t.eventRegistrations_=a}else t.eventRegistrations_=[];return i}function Yg(t,e,n,i){e.type===rr.MERGE&&e.source.queryId!==null&&(ne(es(t.viewCache_),"We should always have a full cache before handling merges"),ne(_c(t.viewCache_),"Missing event cache, even though we have a server cache"));const a=t.viewCache_,c=PA(t.processor_,a,e,n,i);return MA(t.processor_,c.viewCache),ne(c.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=c.viewCache,$x(t,c.changes,c.viewCache.eventCache.getNode(),null)}function XA(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ct,(c,f)=>{i.push($s(c,f))}),n.isFullyInitialized()&&i.push(zx(n.getNode())),$x(t,i,n.getNode(),e)}function $x(t,e,n,i){const a=i?[i]:t.eventRegistrations_;return hA(t.eventGenerator_,e,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sc;class Jx{constructor(){this.views=new Map}}function YA(t){ne(!Sc,"__referenceConstructor has already been defined"),Sc=t}function KA(){return ne(Sc,"Reference.ts has not been loaded"),Sc}function qA(t){return t.views.size===0}function $h(t,e,n,i){const a=e.source.queryId;if(a!==null){const c=t.views.get(a);return ne(c!=null,"SyncTree gave us an op for an invalid query."),Yg(c,e,n,i)}else{let c=[];for(const f of t.views.values())c=c.concat(Yg(f,e,n,i));return c}}function ey(t,e,n,i,a){const c=e._queryIdentifier,f=t.views.get(c);if(!f){let p=Cc(n,a?i:null),y=!1;p?y=!0:i instanceof _e?(p=qh(n,i),y=!1):(p=_e.EMPTY_NODE,y=!1);const m=$c(new Si(p,y,!1),new Si(i,a,!1));return new WA(e,m)}return f}function ZA(t,e,n,i,a,c){const f=ey(t,e,i,a,c);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,f),GA(f,n),XA(f,n)}function QA(t,e,n,i){const a=e._queryIdentifier,c=[];let f=[];const p=Ai(t);if(a==="default")for(const[y,m]of t.views.entries())f=f.concat(Xg(m,n,i)),Gg(m)&&(t.views.delete(y),m.query._queryParams.loadsAllData()||c.push(m.query));else{const y=t.views.get(a);y&&(f=f.concat(Xg(y,n,i)),Gg(y)&&(t.views.delete(a),y.query._queryParams.loadsAllData()||c.push(y.query)))}return p&&!Ai(t)&&c.push(new(KA())(e._repo,e._path)),{removed:c,events:f}}function ty(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function wi(t,e){let n=null;for(const i of t.views.values())n=n||HA(i,e);return n}function ny(t,e){if(e._queryParams.loadsAllData())return eu(t);{const i=e._queryIdentifier;return t.views.get(i)}}function ry(t,e){return ny(t,e)!=null}function Ai(t){return eu(t)!=null}function eu(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ac;function $A(t){ne(!Ac,"__referenceConstructor has already been defined"),Ac=t}function JA(){return ne(Ac,"Reference.ts has not been loaded"),Ac}let eI=1;class Kg{constructor(e){this.listenProvider_=e,this.syncPointTree_=new $e(null),this.pendingWriteTree_=NA(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function iy(t,e,n,i,a){return xA(t.pendingWriteTree_,e,n,i,a),a?lo(t,new Ji(Xh(),e,n)):[]}function tI(t,e,n,i){yA(t.pendingWriteTree_,e,n,i);const a=$e.fromObject(n);return lo(t,new Js(Xh(),e,a))}function oi(t,e,n=!1){const i=wA(t.pendingWriteTree_,e);if(_A(t.pendingWriteTree_,e)){let c=new $e(null);return i.snap!=null?c=c.set(Be(),!0):Zt(i.children,f=>{c=c.set(new He(f),!0)}),lo(t,new wc(i.path,c,n))}else return[]}function Ha(t,e,n){return lo(t,new Ji(Yh(),e,n))}function nI(t,e,n){const i=$e.fromObject(n);return lo(t,new Js(Yh(),e,i))}function rI(t,e){return lo(t,new ba(Yh(),e))}function iI(t,e,n){const i=e1(t,n);if(i){const a=t1(i),c=a.path,f=a.queryId,p=cn(c,e),y=new ba(Kh(f),p);return n1(t,c,y)}else return[]}function sy(t,e,n,i,a=!1){const c=e._path,f=t.syncPointTree_.get(c);let p=[];if(f&&(e._queryIdentifier==="default"||ry(f,e))){const y=QA(f,e,n,i);qA(f)&&(t.syncPointTree_=t.syncPointTree_.remove(c));const m=y.removed;if(p=y.events,!a){const v=m.findIndex(I=>I._queryParams.loadsAllData())!==-1,_=t.syncPointTree_.findOnPath(c,(I,O)=>Ai(O));if(v&&!_){const I=t.syncPointTree_.subtree(c);if(!I.isEmpty()){const O=lI(I);for(let P=0;P<O.length;++P){const L=O[P],K=L.query,k=cy(t,L);t.listenProvider_.startListening($o(K),Na(t,K),k.hashFn,k.onComplete)}}}!_&&m.length>0&&!i&&(v?t.listenProvider_.stopListening($o(e),null):m.forEach(I=>{const O=t.queryToTagMap.get(tu(I));t.listenProvider_.stopListening($o(I),O)}))}cI(t,m)}return p}function oy(t,e,n,i){const a=e1(t,i);if(a!=null){const c=t1(a),f=c.path,p=c.queryId,y=cn(f,e),m=new Ji(Kh(p),y,n);return n1(t,f,m)}else return[]}function sI(t,e,n,i){const a=e1(t,i);if(a){const c=t1(a),f=c.path,p=c.queryId,y=cn(f,e),m=$e.fromObject(n),v=new Js(Kh(p),y,m);return n1(t,f,v)}else return[]}function oI(t,e,n,i=!1){const a=e._path;let c=null,f=!1;t.syncPointTree_.foreachOnPath(a,(I,O)=>{const P=cn(I,a);c=c||wi(O,P),f=f||Ai(O)});let p=t.syncPointTree_.get(a);p?(f=f||Ai(p),c=c||wi(p,Be())):(p=new Jx,t.syncPointTree_=t.syncPointTree_.set(a,p));let y;c!=null?y=!0:(y=!1,c=_e.EMPTY_NODE,t.syncPointTree_.subtree(a).foreachChild((O,P)=>{const L=wi(P,Be());L&&(c=c.updateImmediateChild(O,L))}));const m=ry(p,e);if(!m&&!e._queryParams.loadsAllData()){const I=tu(e);ne(!t.queryToTagMap.has(I),"View does not exist, but we have a tag");const O=uI();t.queryToTagMap.set(I,O),t.tagToQueryMap.set(O,I)}const v=Jc(t.pendingWriteTree_,a);let _=ZA(p,e,n,v,c,y);if(!m&&!f&&!i){const I=ny(p,e);_=_.concat(dI(t,e,I))}return _}function Jh(t,e,n){const a=t.pendingWriteTree_,c=t.syncPointTree_.findOnPath(e,(f,p)=>{const y=cn(f,e),m=wi(p,y);if(m)return m});return Yx(a,e,c,n,!0)}function aI(t,e){const n=e._path;let i=null;t.syncPointTree_.foreachOnPath(n,(m,v)=>{const _=cn(m,n);i=i||wi(v,_)});let a=t.syncPointTree_.get(n);a?i=i||wi(a,Be()):(a=new Jx,t.syncPointTree_=t.syncPointTree_.set(n,a));const c=i!=null,f=c?new Si(i,!0,!1):null,p=Jc(t.pendingWriteTree_,e._path),y=ey(a,e,p,c?f.getNode():_e.EMPTY_NODE,c);return VA(y)}function lo(t,e){return ay(e,t.syncPointTree_,null,Jc(t.pendingWriteTree_,Be()))}function ay(t,e,n,i){if(Ne(t.path))return ly(t,e,n,i);{const a=e.get(Be());n==null&&a!=null&&(n=wi(a,Be()));let c=[];const f=ke(t.path),p=t.operationForChild(f),y=e.children.get(f);if(y&&p){const m=n?n.getImmediateChild(f):null,v=Kx(i,f);c=c.concat(ay(p,y,m,v))}return a&&(c=c.concat($h(a,t,i,n))),c}}function ly(t,e,n,i){const a=e.get(Be());n==null&&a!=null&&(n=wi(a,Be()));let c=[];return e.children.inorderTraversal((f,p)=>{const y=n?n.getImmediateChild(f):null,m=Kx(i,f),v=t.operationForChild(f);v&&(c=c.concat(ly(v,p,y,m)))}),a&&(c=c.concat($h(a,t,i,n))),c}function cy(t,e){const n=e.query,i=Na(t,n);return{hashFn:()=>(zA(e)||_e.EMPTY_NODE).hash(),onComplete:a=>{if(a==="ok")return i?iI(t,n._path,i):rI(t,n._path);{const c=rS(a,n);return sy(t,n,null,c)}}}}function Na(t,e){const n=tu(e);return t.queryToTagMap.get(n)}function tu(t){return t._path.toString()+"$"+t._queryIdentifier}function e1(t,e){return t.tagToQueryMap.get(e)}function t1(t){const e=t.indexOf("$");return ne(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new He(t.substr(0,e))}}function n1(t,e,n){const i=t.syncPointTree_.get(e);ne(i,"Missing sync point for query tag that we're tracking");const a=Jc(t.pendingWriteTree_,e);return $h(i,n,a,null)}function lI(t){return t.fold((e,n,i)=>{if(n&&Ai(n))return[eu(n)];{let a=[];return n&&(a=ty(n)),Zt(i,(c,f)=>{a=a.concat(f)}),a}})}function $o(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(JA())(t._repo,t._path):t}function cI(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const a=tu(i),c=t.queryToTagMap.get(a);t.queryToTagMap.delete(a),t.tagToQueryMap.delete(c)}}}function uI(){return eI++}function dI(t,e,n){const i=e._path,a=Na(t,e),c=cy(t,n),f=t.listenProvider_.startListening($o(e),a,c.hashFn,c.onComplete),p=t.syncPointTree_.subtree(i);if(a)ne(!Ai(p.value),"If we're adding a query, it shouldn't be shadowed");else{const y=p.fold((m,v,_)=>{if(!Ne(m)&&v&&Ai(v))return[eu(v).query];{let I=[];return v&&(I=I.concat(ty(v).map(O=>O.query))),Zt(_,(O,P)=>{I=I.concat(P)}),I}});for(let m=0;m<y.length;++m){const v=y[m];t.listenProvider_.stopListening($o(v),Na(t,v))}}return f}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new r1(n)}node(){return this.node_}}class i1{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=_t(this.path_,e);return new i1(this.syncTree_,n)}node(){return Jh(this.syncTree_,this.path_)}}const fI=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},qg=function(t,e,n){if(!t||typeof t!="object")return t;if(ne(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return hI(t[".sv"],e,n);if(typeof t[".sv"]=="object")return gI(t[".sv"],e);ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},hI=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ne(!1,"Unexpected server value: "+t)}},gI=function(t,e,n){t.hasOwnProperty("increment")||ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&ne(!1,"Unexpected increment value: "+i);const a=e.node();if(ne(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return i;const f=a.getValue();return typeof f!="number"?i:f+i},uy=function(t,e,n,i){return s1(e,new i1(n,t),i)},dy=function(t,e,n){return s1(t,new r1(e),n)};function s1(t,e,n){const i=t.getPriority().val(),a=qg(i,e.getImmediateChild(".priority"),n);let c;if(t.isLeafNode()){const f=t,p=qg(f.getValue(),e,n);return p!==f.getValue()||a!==f.getPriority().val()?new Ft(p,Dt(a)):t}else{const f=t;return c=f,a!==f.getPriority().val()&&(c=c.updatePriority(new Ft(a))),f.forEachChild(Ct,(p,y)=>{const m=s1(y,e.getImmediateChild(p),n);m!==y&&(c=c.updateImmediateChild(p,m))}),c}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function a1(t,e){let n=e instanceof He?e:new He(e),i=t,a=ke(n);for(;a!==null;){const c=Zs(i.node.children,a)||{children:{},childCount:0};i=new o1(a,i,c),n=et(n),a=ke(n)}return i}function co(t){return t.node.value}function fy(t,e){t.node.value=e,Rf(t)}function hy(t){return t.node.childCount>0}function pI(t){return co(t)===void 0&&!hy(t)}function nu(t,e){Zt(t.node.children,(n,i)=>{e(new o1(n,t,i))})}function gy(t,e,n,i){n&&e(t),nu(t,a=>{gy(a,e,!0)})}function mI(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Ga(t){return new He(t.parent===null?t.name:Ga(t.parent)+"/"+t.name)}function Rf(t){t.parent!==null&&xI(t.parent,t.name,t)}function xI(t,e,n){const i=pI(n),a=Sr(t.node.children,e);i&&a?(delete t.node.children[e],t.node.childCount--,Rf(t)):!i&&!a&&(t.node.children[e]=n.node,t.node.childCount++,Rf(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=/[\[\].#$\/\u0000-\u001F\u007F]/,wI=/[\[\].#$\u0000-\u001F\u007F]/,ud=10*1024*1024,l1=function(t){return typeof t=="string"&&t.length!==0&&!yI.test(t)},py=function(t){return typeof t=="string"&&t.length!==0&&!wI.test(t)},_I=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),py(t)},CI=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Lh(t)||t&&typeof t=="object"&&Sr(t,".sv")},my=function(t,e,n,i){i&&e===void 0||ru(qc(t,"value"),e,n)},ru=function(t,e,n){const i=n instanceof He?new BS(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Fi(i));if(typeof e=="function")throw new Error(t+"contains a function "+Fi(i)+" with contents = "+e.toString());if(Lh(e))throw new Error(t+"contains "+e.toString()+" "+Fi(i));if(typeof e=="string"&&e.length>ud/3&&Zc(e)>ud)throw new Error(t+"contains a string greater than "+ud+" utf8 bytes "+Fi(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let a=!1,c=!1;if(Zt(e,(f,p)=>{if(f===".value")a=!0;else if(f!==".priority"&&f!==".sv"&&(c=!0,!l1(f)))throw new Error(t+" contains an invalid key ("+f+") "+Fi(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);FS(i,f),ru(t,p,i),US(i)}),a&&c)throw new Error(t+' contains ".value" child '+Fi(i)+" in addition to actual children.")}},EI=function(t,e){let n,i;for(n=0;n<e.length;n++){i=e[n];const c=Sa(i);for(let f=0;f<c.length;f++)if(!(c[f]===".priority"&&f===c.length-1)){if(!l1(c[f]))throw new Error(t+"contains an invalid key ("+c[f]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(LS);let a=null;for(n=0;n<e.length;n++){if(i=e[n],a!==null&&Hn(a,i))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+i.toString());a=i}},vI=function(t,e,n,i){const a=qc(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(a+" must be an object containing the children to replace.");const c=[];Zt(e,(f,p)=>{const y=new He(f);if(ru(a,p,_t(n,y)),Wh(y)===".priority"&&!CI(p))throw new Error(a+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(y)}),EI(a,c)},xy=function(t,e,n,i){if(!py(n))throw new Error(qc(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},SI=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),xy(t,e,n)},c1=function(t,e){if(ke(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},AI=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!l1(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!_I(n))throw new Error(qc(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function u1(t,e){let n=null;for(let i=0;i<e.length;i++){const a=e[i],c=a.getPath();n!==null&&!Px(c,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:c}),n.events.push(a)}n&&t.eventLists_.push(n)}function Kn(t,e,n){u1(t,n),TI(t,i=>Hn(i,e)||Hn(e,i))}function TI(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const a=t.eventLists_[i];if(a){const c=a.path;e(c)?(bI(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function bI(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();Ko&&Yt("event: "+n.toString()),ao(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="repo_interrupt",RI=25;class OI{constructor(e,n,i,a){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new II,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=yc(),this.transactionQueueTree_=new o1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function kI(t,e,n){if(t.stats_=Uh(t.repoInfo_),t.forceRestClient_||aS())t.server_=new xc(t.repoInfo_,(i,a,c,f)=>{Zg(t,i,a,c,f)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Qg(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Mt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Dr(t.repoInfo_,e,(i,a,c,f)=>{Zg(t,i,a,c,f)},i=>{Qg(t,i)},i=>{DI(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=fS(t.repoInfo_,()=>new dA(t.stats_,t.server_)),t.infoData_=new oA,t.infoSyncTree_=new Kg({startListening:(i,a,c,f)=>{let p=[];const y=t.infoData_.getNode(i._path);return y.isEmpty()||(p=Ha(t.infoSyncTree_,i._path,y),setTimeout(()=>{f("ok")},0)),p},stopListening:()=>{}}),d1(t,"connected",!1),t.serverSyncTree_=new Kg({startListening:(i,a,c,f)=>(t.server_.listen(i,c,a,(p,y)=>{const m=f(p,y);Kn(t.eventQueue_,i._path,m)}),[]),stopListening:(i,a)=>{t.server_.unlisten(i,a)}})}function yy(t){const n=t.infoData_.getNode(new He(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function iu(t){return fI({timestamp:yy(t)})}function Zg(t,e,n,i,a){t.dataUpdateCount++;const c=new He(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let f=[];if(a)if(i){const y=dc(n,m=>Dt(m));f=sI(t.serverSyncTree_,c,y,a)}else{const y=Dt(n);f=oy(t.serverSyncTree_,c,y,a)}else if(i){const y=dc(n,m=>Dt(m));f=nI(t.serverSyncTree_,c,y)}else{const y=Dt(n);f=Ha(t.serverSyncTree_,c,y)}let p=c;f.length>0&&(p=to(t,c)),Kn(t.eventQueue_,p,f)}function Qg(t,e){d1(t,"connected",e),e===!1&&BI(t)}function DI(t,e){Zt(e,(n,i)=>{d1(t,n,i)})}function d1(t,e,n){const i=new He("/.info/"+e),a=Dt(n);t.infoData_.updateSnapshot(i,a);const c=Ha(t.infoSyncTree_,i,a);Kn(t.eventQueue_,i,c)}function f1(t){return t.nextWriteId_++}function MI(t,e,n){const i=aI(t.serverSyncTree_,e);return i!=null?Promise.resolve(i):t.server_.get(e).then(a=>{const c=Dt(a).withIndex(e._queryParams.getIndex());oI(t.serverSyncTree_,e,n,!0);let f;if(e._queryParams.loadsAllData())f=Ha(t.serverSyncTree_,e._path,c);else{const p=Na(t.serverSyncTree_,e);f=oy(t.serverSyncTree_,e._path,c,p)}return Kn(t.eventQueue_,e._path,f),sy(t.serverSyncTree_,e,n,null,!0),c},a=>(Xa(t,"get for query "+Mt(e)+" failed: "+a),Promise.reject(new Error(a))))}function PI(t,e,n,i,a){Xa(t,"set",{path:e.toString(),value:n,priority:i});const c=iu(t),f=Dt(n,i),p=Jh(t.serverSyncTree_,e),y=dy(f,p,c),m=f1(t),v=iy(t.serverSyncTree_,e,y,m,!0);u1(t.eventQueue_,v),t.server_.put(e.toString(),f.val(!0),(I,O)=>{const P=I==="ok";P||dn("set at "+e+" failed: "+I);const L=oi(t.serverSyncTree_,m,!P);Kn(t.eventQueue_,e,L),Of(t,a,I,O)});const _=g1(t,e);to(t,_),Kn(t.eventQueue_,_,[])}function LI(t,e,n,i){Xa(t,"update",{path:e.toString(),value:n});let a=!0;const c=iu(t),f={};if(Zt(n,(p,y)=>{a=!1,f[p]=uy(_t(e,p),Dt(y),t.serverSyncTree_,c)}),a)Yt("update() called with empty data.  Don't do anything."),Of(t,i,"ok",void 0);else{const p=f1(t),y=tI(t.serverSyncTree_,e,f,p);u1(t.eventQueue_,y),t.server_.merge(e.toString(),n,(m,v)=>{const _=m==="ok";_||dn("update at "+e+" failed: "+m);const I=oi(t.serverSyncTree_,p,!_),O=I.length>0?to(t,e):e;Kn(t.eventQueue_,O,I),Of(t,i,m,v)}),Zt(n,m=>{const v=g1(t,_t(e,m));to(t,v)}),Kn(t.eventQueue_,e,[])}}function BI(t){Xa(t,"onDisconnectEvents");const e=iu(t),n=yc();Sf(t.onDisconnect_,Be(),(a,c)=>{const f=uy(a,c,t.serverSyncTree_,e);Vx(n,a,f)});let i=[];Sf(n,Be(),(a,c)=>{i=i.concat(Ha(t.serverSyncTree_,a,c));const f=g1(t,a);to(t,f)}),t.onDisconnect_=yc(),Kn(t.eventQueue_,Be(),i)}function FI(t){t.persistentConnection_&&t.persistentConnection_.interrupt(NI)}function Xa(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Yt(n,...e)}function Of(t,e,n,i){e&&ao(()=>{if(n==="ok")e(null);else{const a=(n||"error").toUpperCase();let c=a;i&&(c+=": "+i);const f=new Error(c);f.code=a,e(f)}})}function wy(t,e,n){return Jh(t.serverSyncTree_,e,n)||_e.EMPTY_NODE}function h1(t,e=t.transactionQueueTree_){if(e||su(t,e),co(e)){const n=Cy(t,e);ne(n.length>0,"Sending zero length transaction queue"),n.every(a=>a.status===0)&&UI(t,Ga(e),n)}else hy(e)&&nu(e,n=>{h1(t,n)})}function UI(t,e,n){const i=n.map(m=>m.currentWriteId),a=wy(t,e,i);let c=a;const f=a.hash();for(let m=0;m<n.length;m++){const v=n[m];ne(v.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=1,v.retryCount++;const _=cn(e,v.path);c=c.updateChild(_,v.currentOutputSnapshotRaw)}const p=c.val(!0),y=e;t.server_.put(y.toString(),p,m=>{Xa(t,"transaction put response",{path:y.toString(),status:m});let v=[];if(m==="ok"){const _=[];for(let I=0;I<n.length;I++)n[I].status=2,v=v.concat(oi(t.serverSyncTree_,n[I].currentWriteId)),n[I].onComplete&&_.push(()=>n[I].onComplete(null,!0,n[I].currentOutputSnapshotResolved)),n[I].unwatcher();su(t,a1(t.transactionQueueTree_,e)),h1(t,t.transactionQueueTree_),Kn(t.eventQueue_,e,v);for(let I=0;I<_.length;I++)ao(_[I])}else{if(m==="datastale")for(let _=0;_<n.length;_++)n[_].status===3?n[_].status=4:n[_].status=0;else{dn("transaction at "+y.toString()+" failed: "+m);for(let _=0;_<n.length;_++)n[_].status=4,n[_].abortReason=m}to(t,e)}},f)}function to(t,e){const n=_y(t,e),i=Ga(n),a=Cy(t,n);return jI(t,a,i),i}function jI(t,e,n){if(e.length===0)return;const i=[];let a=[];const f=e.filter(p=>p.status===0).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const y=e[p],m=cn(n,y.path);let v=!1,_;if(ne(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),y.status===4)v=!0,_=y.abortReason,a=a.concat(oi(t.serverSyncTree_,y.currentWriteId,!0));else if(y.status===0)if(y.retryCount>=RI)v=!0,_="maxretry",a=a.concat(oi(t.serverSyncTree_,y.currentWriteId,!0));else{const I=wy(t,y.path,f);y.currentInputSnapshot=I;const O=e[p].update(I.val());if(O!==void 0){ru("transaction failed: Data returned ",O,y.path);let P=Dt(O);typeof O=="object"&&O!=null&&Sr(O,".priority")||(P=P.updatePriority(I.getPriority()));const K=y.currentWriteId,k=iu(t),R=dy(P,I,k);y.currentOutputSnapshotRaw=P,y.currentOutputSnapshotResolved=R,y.currentWriteId=f1(t),f.splice(f.indexOf(K),1),a=a.concat(iy(t.serverSyncTree_,y.path,R,y.currentWriteId,y.applyLocally)),a=a.concat(oi(t.serverSyncTree_,K,!0))}else v=!0,_="nodata",a=a.concat(oi(t.serverSyncTree_,y.currentWriteId,!0))}Kn(t.eventQueue_,n,a),a=[],v&&(e[p].status=2,function(I){setTimeout(I,Math.floor(0))}(e[p].unwatcher),e[p].onComplete&&(_==="nodata"?i.push(()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot)):i.push(()=>e[p].onComplete(new Error(_),!1,null))))}su(t,t.transactionQueueTree_);for(let p=0;p<i.length;p++)ao(i[p]);h1(t,t.transactionQueueTree_)}function _y(t,e){let n,i=t.transactionQueueTree_;for(n=ke(e);n!==null&&co(i)===void 0;)i=a1(i,n),e=et(e),n=ke(e);return i}function Cy(t,e){const n=[];return Ey(t,e,n),n.sort((i,a)=>i.order-a.order),n}function Ey(t,e,n){const i=co(e);if(i)for(let a=0;a<i.length;a++)n.push(i[a]);nu(e,a=>{Ey(t,a,n)})}function su(t,e){const n=co(e);if(n){let i=0;for(let a=0;a<n.length;a++)n[a].status!==2&&(n[i]=n[a],i++);n.length=i,fy(e,n.length>0?n:void 0)}nu(e,i=>{su(t,i)})}function g1(t,e){const n=Ga(_y(t,e)),i=a1(t.transactionQueueTree_,e);return mI(i,a=>{dd(t,a)}),dd(t,i),gy(i,a=>{dd(t,a)}),n}function dd(t,e){const n=co(e);if(n){const i=[];let a=[],c=-1;for(let f=0;f<n.length;f++)n[f].status===3||(n[f].status===1?(ne(c===f-1,"All SENT items should be at beginning of queue."),c=f,n[f].status=3,n[f].abortReason="set"):(ne(n[f].status===0,"Unexpected transaction status in abort"),n[f].unwatcher(),a=a.concat(oi(t.serverSyncTree_,n[f].currentWriteId,!0)),n[f].onComplete&&i.push(n[f].onComplete.bind(null,new Error("set"),!1,null))));c===-1?fy(e,void 0):n.length=c+1,Kn(t.eventQueue_,Ga(e),a);for(let f=0;f<i.length;f++)ao(i[f])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let a=n[i];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}e+="/"+a}return e}function zI(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):dn(`Invalid query segment '${n}' in query '${t}'`)}return e}const $g=function(t,e){const n=VI(t),i=n.namespace;n.domain==="firebase.com"&&jr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&jr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||$3();const a=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Ax(n.host,n.secure,i,a,e,"",i!==n.subdomain),path:new He(n.pathString)}},VI=function(t){let e="",n="",i="",a="",c="",f=!0,p="https",y=443;if(typeof t=="string"){let m=t.indexOf("//");m>=0&&(p=t.substring(0,m-1),t=t.substring(m+2));let v=t.indexOf("/");v===-1&&(v=t.length);let _=t.indexOf("?");_===-1&&(_=t.length),e=t.substring(0,Math.min(v,_)),v<_&&(a=WI(t.substring(v,_)));const I=zI(t.substring(Math.min(t.length,_)));m=e.indexOf(":"),m>=0?(f=p==="https"||p==="wss",y=parseInt(e.substring(m+1),10)):m=e.length;const O=e.slice(0,m);if(O.toLowerCase()==="localhost")n="localhost";else if(O.split(".").length<=2)n=O;else{const P=e.indexOf(".");i=e.substring(0,P).toLowerCase(),n=e.substring(P+1),c=i}"ns"in I&&(c=I.ns)}return{host:e,port:y,domain:n,subdomain:i,secure:f,scheme:p,pathString:a,namespace:c}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",HI=function(){let t=0;const e=[];return function(n){const i=n===t;t=n;let a;const c=new Array(8);for(a=7;a>=0;a--)c[a]=Jg.charAt(n%64),n=Math.floor(n/64);ne(n===0,"Cannot push at time == 0");let f=c.join("");if(i){for(a=11;a>=0&&e[a]===63;a--)e[a]=0;e[a]++}else for(a=0;a<12;a++)e[a]=Math.floor(Math.random()*64);for(a=0;a<12;a++)f+=Jg.charAt(e[a]);return ne(f.length===20,"nextPushId: Length should be 20."),f}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,n,i,a){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=a}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Mt(this.snapshot.exportVal())}}class XI{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ne(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,n,i,a){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=a}get key(){return Ne(this._path)?null:Wh(this._path)}get ref(){return new Vr(this._repo,this._path)}get _queryIdentifier(){const e=Fg(this._queryParams),n=Bh(e);return n==="{}"?"default":n}get _queryObject(){return Fg(this._queryParams)}isEqual(e){if(e=zr(e),!(e instanceof p1))return!1;const n=this._repo===e._repo,i=Px(this._path,e._path),a=this._queryIdentifier===e._queryIdentifier;return n&&i&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+PS(this._path)}}class Vr extends p1{constructor(e,n){super(e,n,new Gh,!1)}get parent(){const e=Mx(this._path);return e===null?null:new Vr(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ra{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new He(e),i=Oa(this.ref,e);return new Ra(this._node.getChild(n),i,Ct)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,a)=>e(new Ra(a,Oa(this.ref,i),Ct)))}hasChild(e){const n=new He(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ot(t,e){return t=zr(t),t._checkNotDeleted("ref"),e!==void 0?Oa(t._root,e):t._root}function Oa(t,e){return t=zr(t),ke(t._path)===null?SI("child","path",e):xy("child","path",e),new Vr(t._repo,_t(t._path,e))}function Jo(t,e){t=zr(t),c1("push",t._path),my("push",e,t._path,!0);const n=yy(t._repo),i=HI(n),a=Oa(t,i),c=Oa(t,i);let f;return f=Promise.resolve(c),a.then=f.then.bind(f),a.catch=f.then.bind(f,void 0),a}function KI(t){return c1("remove",t._path),Vi(t,null)}function Vi(t,e){t=zr(t),c1("set",t._path),my("set",e,t._path,!1);const n=new Ua;return PI(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Fo(t,e){vI("update",e,t._path);const n=new Ua;return LI(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function tn(t){t=zr(t);const e=new YI(()=>{}),n=new m1(e);return MI(t._repo,t,n).then(i=>new Ra(i,new Vr(t._repo,t._path),t._queryParams.getIndex()))}class m1{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new GI("value",this,new Ra(e.snapshotNode,new Vr(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new XI(this,e,n):null}matches(e){return e instanceof m1?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}YA(Vr);$A(Vr);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI="FIREBASE_DATABASE_EMULATOR_HOST",kf={};let ZI=!1;function QI(t,e,n,i){t.repoInfo_=new Ax(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function $I(t,e,n,i,a){let c=i||t.options.databaseURL;c===void 0&&(t.options.projectId||jr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Yt("Using default host for project ",t.options.projectId),c=`${t.options.projectId}-default-rtdb.firebaseio.com`);let f=$g(c,a),p=f.repoInfo,y;typeof process<"u"&&_g&&(y=_g[qI]),y?(c=`http://${y}?ns=${p.namespace}`,f=$g(c,a),p=f.repoInfo):f.repoInfo.secure;const m=new cS(t.name,t.options,e);AI("Invalid Firebase Database URL",f),Ne(f.path)||jr("Database URL must point to the root of a Firebase Database (not including a child path).");const v=e8(p,t,m,new lS(t.name,n));return new t8(v,t)}function JI(t,e){const n=kf[e];(!n||n[t.key]!==t)&&jr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),FI(t),delete n[t.key]}function e8(t,e,n,i){let a=kf[e.name];a||(a={},kf[e.name]=a);let c=a[t.toURLString()];return c&&jr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new OI(t,ZI,n,i),a[t.toURLString()]=c,c}class t8{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(kI(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Vr(this._repo,Be())),this._rootInternal}_delete(){return this._rootInternal!==null&&(JI(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&jr("Cannot call "+e+" on a deleted database.")}}function n8(t=lx(),e){const n=ja(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=_v("database");i&&r8(n,...i)}return n}function r8(t,e,n,i={}){t=zr(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&jr("Cannot call useEmulator() after instance has already been initialized.");const a=t._repoInternal;let c;if(a.repoInfo_.nodeAdmin)i.mockUserToken&&jr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new Bl(Bl.OWNER);else if(i.mockUserToken){const f=typeof i.mockUserToken=="string"?i.mockUserToken:Cv(i.mockUserToken,t.app.options.projectId);c=new Bl(f)}QI(a,e,n,c)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(t){X3(L3),Ei(new Fr("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),c=e.getProvider("app-check-internal");return $I(i,a,c,n)},"PUBLIC").setMultipleInstances(!0)),vr(Cg,Eg,t),vr(Cg,Eg,"esm2017")}Dr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Dr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};i8();var s8="firebase",o8="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vr(s8,o8,"app");const vy="@firebase/installations",x1="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy=1e4,Ay=`w:${x1}`,Iy="FIS_v2",a8="https://firebaseinstallations.googleapis.com/v1",l8=60*60*1e3,c8="installations",u8="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ts=new Kc(c8,u8,d8);function Ty(t){return t instanceof as&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by({projectId:t}){return`${a8}/projects/${t}/installations`}function Ny(t){return{token:t.token,requestStatus:2,expiresIn:h8(t.expiresIn),creationTime:Date.now()}}async function Ry(t,e){const i=(await e.json()).error;return ts.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function Oy({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function f8(t,{refreshToken:e}){const n=Oy(t);return n.append("Authorization",g8(e)),n}async function ky(t){const e=await t();return e.status>=500&&e.status<600?t():e}function h8(t){return Number(t.replace("s","000"))}function g8(t){return`${Iy} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p8({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=by(t),a=Oy(t),c=e.getImmediate({optional:!0});if(c){const m=await c.getHeartbeatsHeader();m&&a.append("x-firebase-client",m)}const f={fid:n,authVersion:Iy,appId:t.appId,sdkVersion:Ay},p={method:"POST",headers:a,body:JSON.stringify(f)},y=await ky(()=>fetch(i,p));if(y.ok){const m=await y.json();return{fid:m.fid||n,registrationStatus:2,refreshToken:m.refreshToken,authToken:Ny(m.authToken)}}else throw await Ry("Create Installation",y)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x8=/^[cdef][\w-]{21}$/,Df="";function y8(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=w8(t);return x8.test(n)?n:Df}catch{return Df}}function w8(t){return m8(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=new Map;function Py(t,e){const n=ou(t);Ly(n,e),_8(n,e)}function Ly(t,e){const n=My.get(t);if(n)for(const i of n)i(e)}function _8(t,e){const n=C8();n&&n.postMessage({key:t,fid:e}),E8()}let Hi=null;function C8(){return!Hi&&"BroadcastChannel"in self&&(Hi=new BroadcastChannel("[Firebase] FID Change"),Hi.onmessage=t=>{Ly(t.data.key,t.data.fid)}),Hi}function E8(){My.size===0&&Hi&&(Hi.close(),Hi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v8="firebase-installations-database",S8=1,ns="firebase-installations-store";let fd=null;function y1(){return fd||(fd=ox(v8,S8,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ns)}}})),fd}async function Ic(t,e){const n=ou(t),a=(await y1()).transaction(ns,"readwrite"),c=a.objectStore(ns),f=await c.get(n);return await c.put(e,n),await a.done,(!f||f.fid!==e.fid)&&Py(t,e.fid),e}async function By(t){const e=ou(t),i=(await y1()).transaction(ns,"readwrite");await i.objectStore(ns).delete(e),await i.done}async function au(t,e){const n=ou(t),a=(await y1()).transaction(ns,"readwrite"),c=a.objectStore(ns),f=await c.get(n),p=e(f);return p===void 0?await c.delete(n):await c.put(p,n),await a.done,p&&(!f||f.fid!==p.fid)&&Py(t,p.fid),p}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w1(t){let e;const n=await au(t.appConfig,i=>{const a=A8(i),c=I8(t,a);return e=c.registrationPromise,c.installationEntry});return n.fid===Df?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function A8(t){const e=t||{fid:y8(),registrationStatus:0};return Fy(e)}function I8(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(ts.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=T8(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:b8(t)}:{installationEntry:e}}async function T8(t,e){try{const n=await p8(t,e);return Ic(t.appConfig,n)}catch(n){throw Ty(n)&&n.customData.serverCode===409?await By(t.appConfig):await Ic(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function b8(t){let e=await ep(t.appConfig);for(;e.registrationStatus===1;)await Dy(100),e=await ep(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await w1(t);return i||n}return e}function ep(t){return au(t,e=>{if(!e)throw ts.create("installation-not-found");return Fy(e)})}function Fy(t){return N8(t)?{fid:t.fid,registrationStatus:0}:t}function N8(t){return t.registrationStatus===1&&t.registrationTime+Sy<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R8({appConfig:t,heartbeatServiceProvider:e},n){const i=O8(t,n),a=f8(t,n),c=e.getImmediate({optional:!0});if(c){const m=await c.getHeartbeatsHeader();m&&a.append("x-firebase-client",m)}const f={installation:{sdkVersion:Ay,appId:t.appId}},p={method:"POST",headers:a,body:JSON.stringify(f)},y=await ky(()=>fetch(i,p));if(y.ok){const m=await y.json();return Ny(m)}else throw await Ry("Generate Auth Token",y)}function O8(t,{fid:e}){return`${by(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _1(t,e=!1){let n;const i=await au(t.appConfig,c=>{if(!Uy(c))throw ts.create("not-registered");const f=c.authToken;if(!e&&M8(f))return c;if(f.requestStatus===1)return n=k8(t,e),c;{if(!navigator.onLine)throw ts.create("app-offline");const p=L8(c);return n=D8(t,p),p}});return n?await n:i.authToken}async function k8(t,e){let n=await tp(t.appConfig);for(;n.authToken.requestStatus===1;)await Dy(100),n=await tp(t.appConfig);const i=n.authToken;return i.requestStatus===0?_1(t,e):i}function tp(t){return au(t,e=>{if(!Uy(e))throw ts.create("not-registered");const n=e.authToken;return B8(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function D8(t,e){try{const n=await R8(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Ic(t.appConfig,i),n}catch(n){if(Ty(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await By(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Ic(t.appConfig,i)}throw n}}function Uy(t){return t!==void 0&&t.registrationStatus===2}function M8(t){return t.requestStatus===2&&!P8(t)}function P8(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+l8}function L8(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function B8(t){return t.requestStatus===1&&t.requestTime+Sy<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F8(t){const e=t,{installationEntry:n,registrationPromise:i}=await w1(e);return i?i.catch(console.error):_1(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U8(t,e=!1){const n=t;return await j8(n),(await _1(n,e)).token}async function j8(t){const{registrationPromise:e}=await w1(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W8(t){if(!t||!t.options)throw hd("App Configuration");if(!t.name)throw hd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw hd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function hd(t){return ts.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="installations",z8="installations-internal",V8=t=>{const e=t.getProvider("app").getImmediate(),n=W8(e),i=ja(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},H8=t=>{const e=t.getProvider("app").getImmediate(),n=ja(e,jy).getImmediate();return{getId:()=>F8(n),getToken:a=>U8(n,a)}};function G8(){Ei(new Fr(jy,V8,"PUBLIC")),Ei(new Fr(z8,H8,"PRIVATE"))}G8();vr(vy,x1);vr(vy,x1,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc="analytics",X8="firebase_id",Y8="origin",K8=60*1e3,q8="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",C1="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn=new Mh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Dn=new Kc("analytics","Analytics",Z8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q8(t){if(!t.startsWith(C1)){const e=Dn.create("invalid-gtag-resource",{gtagURL:t});return Tn.warn(e.message),""}return t}function Wy(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function $8(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function J8(t,e){const n=$8("firebase-js-sdk-policy",{createScriptURL:Q8}),i=document.createElement("script"),a=`${C1}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(a):a,i.async=!0,document.head.appendChild(i)}function e4(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function t4(t,e,n,i,a,c){const f=i[a];try{if(f)await e[f];else{const y=(await Wy(n)).find(m=>m.measurementId===a);y&&await e[y.appId]}}catch(p){Tn.error(p)}t("config",a,c)}async function n4(t,e,n,i,a){try{let c=[];if(a&&a.send_to){let f=a.send_to;Array.isArray(f)||(f=[f]);const p=await Wy(n);for(const y of f){const m=p.find(_=>_.measurementId===y),v=m&&e[m.appId];if(v)c.push(v);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),t("event",i,a||{})}catch(c){Tn.error(c)}}function r4(t,e,n,i){async function a(c,...f){try{if(c==="event"){const[p,y]=f;await n4(t,e,n,p,y)}else if(c==="config"){const[p,y]=f;await t4(t,e,n,i,p,y)}else if(c==="consent"){const[p,y]=f;t("consent",p,y)}else if(c==="get"){const[p,y,m]=f;t("get",p,y,m)}else if(c==="set"){const[p]=f;t("set",p)}else t(c,...f)}catch(p){Tn.error(p)}}return a}function i4(t,e,n,i,a){let c=function(...f){window[i].push(arguments)};return window[a]&&typeof window[a]=="function"&&(c=window[a]),window[a]=r4(c,t,e,n),{gtagCore:c,wrappedGtag:window[a]}}function s4(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(C1)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=30,a4=1e3;class l4{constructor(e={},n=a4){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const zy=new l4;function c4(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function u4(t){var e;const{appId:n,apiKey:i}=t,a={method:"GET",headers:c4(i)},c=q8.replace("{app-id}",n),f=await fetch(c,a);if(f.status!==200&&f.status!==304){let p="";try{const y=await f.json();!((e=y.error)===null||e===void 0)&&e.message&&(p=y.error.message)}catch{}throw Dn.create("config-fetch-failed",{httpStatus:f.status,responseMessage:p})}return f.json()}async function d4(t,e=zy,n){const{appId:i,apiKey:a,measurementId:c}=t.options;if(!i)throw Dn.create("no-app-id");if(!a){if(c)return{measurementId:c,appId:i};throw Dn.create("no-api-key")}const f=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},p=new g4;return setTimeout(async()=>{p.abort()},K8),Vy({appId:i,apiKey:a,measurementId:c},f,p,e)}async function Vy(t,{throttleEndTimeMillis:e,backoffCount:n},i,a=zy){var c;const{appId:f,measurementId:p}=t;try{await f4(i,e)}catch(y){if(p)return Tn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${y==null?void 0:y.message}]`),{appId:f,measurementId:p};throw y}try{const y=await u4(t);return a.deleteThrottleMetadata(f),y}catch(y){const m=y;if(!h4(m)){if(a.deleteThrottleMetadata(f),p)return Tn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:f,measurementId:p};throw y}const v=Number((c=m==null?void 0:m.customData)===null||c===void 0?void 0:c.httpStatus)===503?dg(n,a.intervalMillis,o4):dg(n,a.intervalMillis),_={throttleEndTimeMillis:Date.now()+v,backoffCount:n+1};return a.setThrottleMetadata(f,_),Tn.debug(`Calling attemptFetch again in ${v} millis`),Vy(t,_,i,a)}}function f4(t,e){return new Promise((n,i)=>{const a=Math.max(e-Date.now(),0),c=setTimeout(n,a);t.addEventListener(()=>{clearTimeout(c),i(Dn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function h4(t){if(!(t instanceof as)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class g4{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function p4(t,e,n,i,a){if(a&&a.global){t("event",n,i);return}else{const c=await e,f=Object.assign(Object.assign({},i),{send_to:c});t("event",n,f)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m4(){if(tx())try{await nx()}catch(t){return Tn.warn(Dn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Tn.warn(Dn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function x4(t,e,n,i,a,c,f){var p;const y=d4(t);y.then(O=>{n[O.measurementId]=O.appId,t.options.measurementId&&O.measurementId!==t.options.measurementId&&Tn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${O.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(O=>Tn.error(O)),e.push(y);const m=m4().then(O=>{if(O)return i.getId()}),[v,_]=await Promise.all([y,m]);s4(c)||J8(c,v.measurementId),a("js",new Date);const I=(p=f==null?void 0:f.config)!==null&&p!==void 0?p:{};return I[Y8]="firebase",I.update=!0,_!=null&&(I[X8]=_),a("config",v.measurementId,I),v.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.app=e}_delete(){return delete ea[this.app.options.appId],Promise.resolve()}}let ea={},np=[];const rp={};let gd="dataLayer",w4="gtag",ip,Hy,sp=!1;function _4(){const t=[];if(vv()&&t.push("This is a browser extension environment."),Iv()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,a)=>`(${a+1}) ${i}`).join(" "),n=Dn.create("invalid-analytics-context",{errorInfo:e});Tn.warn(n.message)}}function C4(t,e,n){_4();const i=t.options.appId;if(!i)throw Dn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Tn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Dn.create("no-api-key");if(ea[i]!=null)throw Dn.create("already-exists",{id:i});if(!sp){e4(gd);const{wrappedGtag:c,gtagCore:f}=i4(ea,np,rp,gd,w4);Hy=c,ip=f,sp=!0}return ea[i]=x4(t,np,rp,e,ip,gd,n),new y4(t)}function E4(t=lx()){t=zr(t);const e=ja(t,Tc);return e.isInitialized()?e.getImmediate():v4(t)}function v4(t,e={}){const n=ja(t,Tc);if(n.isInitialized()){const a=n.getImmediate();if(fc(e,n.getOptions()))return a;throw Dn.create("already-initialized")}return n.initialize({options:e})}function S4(t,e,n,i){t=zr(t),p4(Hy,ea[t.app.options.appId],e,n,i).catch(a=>Tn.error(a))}const op="@firebase/analytics",ap="0.10.8";function A4(){Ei(new Fr(Tc,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return C4(i,a,n)},"PUBLIC")),Ei(new Fr("analytics-internal",t,"PRIVATE")),vr(op,ap),vr(op,ap,"esm2017");function t(e){try{const n=e.getProvider(Tc).getImmediate();return{logEvent:(i,a,c)=>S4(n,i,a,c)}}catch(n){throw Dn.create("interop-component-reg-failed",{reason:n})}}}A4();const I4={apiKey:"AIzaSyBVLs9aP79sEfYy9EjtUan6J5jOX21AoNU",authDomain:"iqos-d3074.firebaseapp.com",databaseURL:"https://iqos-d3074-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"iqos-d3074",storageBucket:"iqos-d3074.firebasestorage.app",messagingSenderId:"928334092425",appId:"1:928334092425:web:3b6d5898ab46d835854e58",measurementId:"G-JN7DT8HRGN"},Gy=ax(I4);E4(Gy);const at=n8(Gy),nn={createProduct:async t=>{try{const e=ot(at,"products"),n=Jo(e),i=t.useBarcode!==!1,a={id:n.key,...t,stock:i?0:t.stock,createdAt:Date.now(),updatedAt:Date.now()};if(await Vi(n,a),i){const c=ot(at,`productUnits/${n.key}`);await Vi(c,{})}return a}catch(e){throw new Error(`Error creating product: ${e.message}`)}},getUnitsWithBarcodeCount:async t=>{try{const e=ot(at,`productUnits/${t}`),n=await tn(e);return n.exists()?Object.values(n.val()).filter(a=>a.barcode).length:0}catch(e){throw new Error(`Error getting units count: ${e.message}`)}},getReadyStock:async t=>{try{const e=ot(at,`productUnits/${t}`),n=await tn(e);return n.exists()?Object.values(n.val()).filter(a=>a.barcode&&a.status==="in_stock").length:0}catch(e){throw new Error(`Error getting ready stock: ${e.message}`)}},updateProductStockFromUnits:async t=>{try{const e=ot(at,`productUnits/${t}`),n=await tn(e);let i=0;n.exists()&&(i=Object.values(n.val()).filter(f=>f&&f.status==="in_stock").length);const a=ot(at,`products/${t}`);return await Fo(a,{stock:i,updatedAt:Date.now()}),i}catch(e){throw new Error(`Error updating product stock: ${e.message}`)}},getAllProducts:async()=>{try{const t=ot(at,"products"),e=await tn(t);return e.exists()?Object.values(e.val()):[]}catch(t){throw new Error(`Error fetching products: ${t.message}`)}},getProductById:async t=>{try{const e=ot(at,`products/${t}`),n=await tn(e);return n.exists()?n.val():null}catch(e){throw new Error(`Error fetching product: ${e.message}`)}},getProductByBarcode:async t=>{try{const e=ot(at,"products"),n=await tn(e);if(n.exists()){const i=Object.values(n.val());for(const a of i){const c=ot(at,`productUnits/${a.id}`),f=await tn(c);if(f.exists()){const y=Object.values(f.val()).find(m=>m.barcode===t);if(y)return{...a,matchedUnitId:y.unitId}}}}return null}catch(e){throw new Error(`Error fetching product by barcode: ${e.message}`)}},addBarcodeToProduct:async(t,e)=>{try{if(!e)throw new Error("Barcode is required");const n=ot(at,`products/${t}`),i=await tn(n);if(!i.exists())throw new Error("Product not found");if(i.val().useBarcode===!1)throw new Error("Product tidak menggunakan barcode");const c=await tn(ot(at,"productUnits"));if(c.exists()){const m=Object.values(c.val());for(const v of m)if(Object.values(v||{}).some(I=>I&&I.barcode===e))throw new Error("Barcode sudah dipakai unit lain")}const f=ot(at,`productUnits/${t}`),p=await tn(f);let y;if(p.exists()){const m=p.val(),v=Object.values(m).find(_=>_&&!_.barcode&&_.status==="in_stock");v&&(y=ot(at,`productUnits/${t}/${v.unitId}`))}if(!y){const m=Jo(f);await Vi(m,{unitId:m.key,productId:t,barcode:null,status:"in_stock",createdAt:Date.now()}),y=m}return await Fo(y,{barcode:e,updatedAt:Date.now()}),await nn.updateProductStockFromUnits(t),!0}catch(n){throw new Error(`Error adding barcode: ${n.message}`)}},updateProduct:async(t,e)=>{try{const n=ot(at,`products/${t}`),i={...e,updatedAt:Date.now()};return await Fo(n,i),!0}catch(n){throw new Error(`Error updating product: ${n.message}`)}},deleteProduct:async t=>{try{const e=ot(at,`products/${t}`);return await KI(e),!0}catch(e){throw new Error(`Error deleting product: ${e.message}`)}},updateStock:async(t,e,n,i)=>{try{const a=ot(at,`products/${t}`),c=await tn(a);if(!c.exists())throw new Error("Product not found");const f=c.val(),p=f.stock+e;if(p<0)throw new Error("Insufficient stock");await Fo(a,{stock:p,updatedAt:Date.now()});const y=ot(at,"stockMovements"),m=Jo(y),v={id:m.key,productId:t,productName:f.name,type:e>0?"in":"out",quantity:Math.abs(e),reason:n,referenceId:i,createdAt:Date.now()};return await Vi(m,v),!0}catch(a){throw new Error(`Error updating stock: ${a.message}`)}}},Xy={createSale:async t=>{try{const e=ot(at,"sales"),n=Jo(e),i={id:n.key,...t,createdAt:Date.now(),status:"completed"};await Vi(n,i);for(const a of t.items)await nn.updateStock(a.productId,-a.quantity,"sale",n.key);return i}catch(e){throw new Error(`Error creating sale: ${e.message}`)}},getAllSales:async()=>{try{const t=ot(at,"sales"),e=await tn(t);return e.exists()?Object.values(e.val()):[]}catch(t){throw new Error(`Error fetching sales: ${t.message}`)}},getSaleById:async t=>{try{const e=ot(at,`sales/${t}`),n=await tn(e);return n.exists()?n.val():null}catch(e){throw new Error(`Error fetching sale: ${e.message}`)}}},T4={createProcurement:async t=>{try{const e=ot(at,"procurements"),n=Jo(e),i={id:n.key,...t,createdAt:Date.now(),status:"pending"};return await Vi(n,i),i}catch(e){throw new Error(`Error creating procurement: ${e.message}`)}},receiveProcurement:async t=>{try{const e=ot(at,`procurements/${t}`),n=await tn(e);if(!n.exists())throw new Error("Procurement not found");const i=n.val();await Fo(e,{status:"received",receivedAt:Date.now()});for(const a of i.items)await nn.updateStock(a.productId,a.quantity,"procurement",t);return!0}catch(e){throw new Error(`Error receiving procurement: ${e.message}`)}},getAllProcurements:async()=>{try{const t=ot(at,"procurements"),e=await tn(t);return e.exists()?Object.values(e.val()):[]}catch(t){throw new Error(`Error fetching procurements: ${t.message}`)}},getProcurementById:async t=>{try{const e=ot(at,`procurements/${t}`),n=await tn(e);return n.exists()?n.val():null}catch(e){throw new Error(`Error fetching procurement: ${e.message}`)}}};var se;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(se||(se={}));var lp=new Map([[se.QR_CODE,"QR_CODE"],[se.AZTEC,"AZTEC"],[se.CODABAR,"CODABAR"],[se.CODE_39,"CODE_39"],[se.CODE_93,"CODE_93"],[se.CODE_128,"CODE_128"],[se.DATA_MATRIX,"DATA_MATRIX"],[se.MAXICODE,"MAXICODE"],[se.ITF,"ITF"],[se.EAN_13,"EAN_13"],[se.EAN_8,"EAN_8"],[se.PDF_417,"PDF_417"],[se.RSS_14,"RSS_14"],[se.RSS_EXPANDED,"RSS_EXPANDED"],[se.UPC_A,"UPC_A"],[se.UPC_E,"UPC_E"],[se.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),cp;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(cp||(cp={}));function b4(t){return Object.values(se).includes(t)}var bc;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(bc||(bc={}));var N4=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[bc.SCAN_TYPE_CAMERA,bc.SCAN_TYPE_FILE],t}(),Yy=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!lp.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,lp.get(e))},t}(),up=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),Mf;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Mf||(Mf={}));var R4=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Mf.UNKWOWN_ERROR}},t}(),O4=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function Ir(t){return typeof t>"u"||t===null}var Ms=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),Ky=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var i=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],c=new Set(a),f=Object.keys(e),p=0,y=f;p<y.length;p++){var m=y[p];if(c.has(m))return n.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},t}(),Pf={exports:{}};(function(t,e){(function(n,i){i(e)})(Co,function(n){function i(C){return C==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,r){C.__proto__=r}||function(C,r){for(var s in r)r.hasOwnProperty(s)&&(C[s]=r[s])};function c(C,r){a(C,r);function s(){this.constructor=C}C.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}function f(C,r){var s=Object.setPrototypeOf;s?s(C,r):C.__proto__=r}function p(C,r){r===void 0&&(r=C.constructor);var s=Error.captureStackTrace;s&&s(C,r)}var y=function(C){c(r,C);function r(s){var o=this.constructor,l=C.call(this,s)||this;return Object.defineProperty(l,"name",{value:o.name,enumerable:!1}),f(l,o.prototype),p(l),l}return r}(Error);class m extends y{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}m.kind="Exception";class v extends m{}v.kind="ArgumentException";class _ extends m{}_.kind="IllegalArgumentException";class I{constructor(r){if(this.binarizer=r,r===null)throw new _("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,s){return this.binarizer.getBlackRow(r,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,s,o,l){const u=this.binarizer.getLuminanceSource().crop(r,s,o,l);return new I(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new I(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new I(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class O extends m{static getChecksumInstance(){return new O}}O.kind="ChecksumException";class P{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class L{static arraycopy(r,s,o,l,u){for(;u--;)o[l++]=r[s++]}static currentTimeMillis(){return Date.now()}}class K extends m{}K.kind="IndexOutOfBoundsException";class k extends K{constructor(r=void 0,s=void 0){super(s),this.index=r,this.message=s}}k.kind="ArrayIndexOutOfBoundsException";class R{static fill(r,s){for(let o=0,l=r.length;o<l;o++)r[o]=s}static fillWithin(r,s,o,l){R.rangeCheck(r.length,s,o);for(let u=s;u<o;u++)r[u]=l}static rangeCheck(r,s,o){if(s>o)throw new _("fromIndex("+s+") > toIndex("+o+")");if(s<0)throw new k(s);if(o>r)throw new k(o)}static asList(...r){return r}static create(r,s,o){return Array.from({length:r}).map(u=>Array.from({length:s}).fill(o))}static createInt32Array(r,s,o){return Array.from({length:r}).map(u=>Int32Array.from({length:s}).fill(o))}static equals(r,s){if(!r||!s||!r.length||!s.length||r.length!==s.length)return!1;for(let o=0,l=r.length;o<l;o++)if(r[o]!==s[o])return!1;return!0}static hashCode(r){if(r===null)return 0;let s=1;for(const o of r)s=31*s+o;return s}static fillUint8Array(r,s){for(let o=0;o!==r.length;o++)r[o]=s}static copyOf(r,s){return r.slice(0,s)}static copyOfUint8Array(r,s){if(r.length<=s){const o=new Uint8Array(s);return o.set(r),o}return r.slice(0,s)}static copyOfRange(r,s,o){const l=o-s,u=new Int32Array(l);return L.arraycopy(r,s,u,0,l),u}static binarySearch(r,s,o){o===void 0&&(o=R.numberComparator);let l=0,u=r.length-1;for(;l<=u;){const d=u+l>>1,h=o(s,r[d]);if(h>0)l=d+1;else if(h<0)u=d-1;else return d}return-l-1}static numberComparator(r,s){return r-s}}class N{static numberOfTrailingZeros(r){let s;if(r===0)return 32;let o=31;return s=r<<16,s!==0&&(o-=16,r=s),s=r<<8,s!==0&&(o-=8,r=s),s=r<<4,s!==0&&(o-=4,r=s),s=r<<2,s!==0&&(o-=2,r=s),o-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let s=1;return r>>>16||(s+=16,r<<=16),r>>>24||(s+=8,r<<=8),r>>>28||(s+=4,r<<=4),r>>>30||(s+=2,r<<=2),s-=r>>>31,s}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,s){return Math.trunc(r/s)}static parseInt(r,s=void 0){return parseInt(r,s)}}N.MIN_VALUE_32_BITS=-2147483648,N.MAX_VALUE=Number.MAX_SAFE_INTEGER;class U{constructor(r,s){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,s==null?this.bits=U.makeArray(r):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const s=U.makeArray(r);L.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const s=this.size;if(r>=s)return s;const o=this.bits;let l=Math.floor(r/32),u=o[l];u&=~((1<<(r&31))-1);const d=o.length;for(;u===0;){if(++l===d)return s;u=o[l]}const h=l*32+N.numberOfTrailingZeros(u);return h>s?s:h}getNextUnset(r){const s=this.size;if(r>=s)return s;const o=this.bits;let l=Math.floor(r/32),u=~o[l];u&=~((1<<(r&31))-1);const d=o.length;for(;u===0;){if(++l===d)return s;u=~o[l]}const h=l*32+N.numberOfTrailingZeros(u);return h>s?s:h}setBulk(r,s){this.bits[Math.floor(r/32)]=s}setRange(r,s){if(s<r||r<0||s>this.size)throw new _;if(s===r)return;s--;const o=Math.floor(r/32),l=Math.floor(s/32),u=this.bits;for(let d=o;d<=l;d++){const h=d>o?0:r&31,x=(2<<(d<l?31:s&31))-(1<<h);u[d]|=x}}clear(){const r=this.bits.length,s=this.bits;for(let o=0;o<r;o++)s[o]=0}isRange(r,s,o){if(s<r||r<0||s>this.size)throw new _;if(s===r)return!0;s--;const l=Math.floor(r/32),u=Math.floor(s/32),d=this.bits;for(let h=l;h<=u;h++){const g=h>l?0:r&31,w=(2<<(h<u?31:s&31))-(1<<g)&4294967295;if((d[h]&w)!==(o?w:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,s){if(s<0||s>32)throw new _("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let o=s;o>0;o--)this.appendBit((r>>o-1&1)===1)}appendBitArray(r){const s=r.size;this.ensureCapacity(this.size+s);for(let o=0;o<s;o++)this.appendBit(r.get(o))}xor(r){if(this.size!==r.size)throw new _("Sizes don't match");const s=this.bits;for(let o=0,l=s.length;o<l;o++)s[o]^=r.bits[o]}toBytes(r,s,o,l){for(let u=0;u<l;u++){let d=0;for(let h=0;h<8;h++)this.get(r)&&(d|=1<<7-h),r++;s[o+u]=d}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),o=s+1,l=this.bits;for(let u=0;u<o;u++){let d=l[u];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,r[s-u]=d}if(this.size!==o*32){const u=o*32-this.size;let d=r[0]>>>u;for(let h=1;h<o;h++){const g=r[h];d|=g<<32-u,r[h-1]=d,d=g>>>u}r[o-1]=d}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof U))return!1;const s=r;return this.size===s.size&&R.equals(this.bits,s.bits)}hashCode(){return 31*this.size+R.hashCode(this.bits)}toString(){let r="";for(let s=0,o=this.size;s<o;s++)s&7||(r+=" "),r+=this.get(s)?"X":".";return r}clone(){return new U(this.size,this.bits.slice())}}var J;(function(C){C[C.OTHER=0]="OTHER",C[C.PURE_BARCODE=1]="PURE_BARCODE",C[C.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",C[C.TRY_HARDER=3]="TRY_HARDER",C[C.CHARACTER_SET=4]="CHARACTER_SET",C[C.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",C[C.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",C[C.ASSUME_GS1=7]="ASSUME_GS1",C[C.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",C[C.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",C[C.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(J||(J={}));var q=J;class j extends m{static getFormatInstance(){return new j}}j.kind="FormatException";var te;(function(C){C[C.Cp437=0]="Cp437",C[C.ISO8859_1=1]="ISO8859_1",C[C.ISO8859_2=2]="ISO8859_2",C[C.ISO8859_3=3]="ISO8859_3",C[C.ISO8859_4=4]="ISO8859_4",C[C.ISO8859_5=5]="ISO8859_5",C[C.ISO8859_6=6]="ISO8859_6",C[C.ISO8859_7=7]="ISO8859_7",C[C.ISO8859_8=8]="ISO8859_8",C[C.ISO8859_9=9]="ISO8859_9",C[C.ISO8859_10=10]="ISO8859_10",C[C.ISO8859_11=11]="ISO8859_11",C[C.ISO8859_13=12]="ISO8859_13",C[C.ISO8859_14=13]="ISO8859_14",C[C.ISO8859_15=14]="ISO8859_15",C[C.ISO8859_16=15]="ISO8859_16",C[C.SJIS=16]="SJIS",C[C.Cp1250=17]="Cp1250",C[C.Cp1251=18]="Cp1251",C[C.Cp1252=19]="Cp1252",C[C.Cp1256=20]="Cp1256",C[C.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",C[C.UTF8=22]="UTF8",C[C.ASCII=23]="ASCII",C[C.Big5=24]="Big5",C[C.GB18030=25]="GB18030",C[C.EUC_KR=26]="EUC_KR"})(te||(te={}));class X{constructor(r,s,o,...l){this.valueIdentifier=r,this.name=o,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=l,X.VALUE_IDENTIFIER_TO_ECI.set(r,this),X.NAME_TO_ECI.set(o,this);const u=this.values;for(let d=0,h=u.length;d!==h;d++){const g=u[d];X.VALUES_TO_ECI.set(g,this)}for(const d of l)X.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new j("incorect value");const s=X.VALUES_TO_ECI.get(r);if(s===void 0)throw new j("incorect value");return s}static getCharacterSetECIByName(r){const s=X.NAME_TO_ECI.get(r);if(s===void 0)throw new j("incorect value");return s}equals(r){if(!(r instanceof X))return!1;const s=r;return this.getName()===s.getName()}}X.VALUE_IDENTIFIER_TO_ECI=new Map,X.VALUES_TO_ECI=new Map,X.NAME_TO_ECI=new Map,X.Cp437=new X(te.Cp437,Int32Array.from([0,2]),"Cp437"),X.ISO8859_1=new X(te.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),X.ISO8859_2=new X(te.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),X.ISO8859_3=new X(te.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),X.ISO8859_4=new X(te.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),X.ISO8859_5=new X(te.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),X.ISO8859_6=new X(te.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),X.ISO8859_7=new X(te.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),X.ISO8859_8=new X(te.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),X.ISO8859_9=new X(te.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),X.ISO8859_10=new X(te.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),X.ISO8859_11=new X(te.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),X.ISO8859_13=new X(te.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),X.ISO8859_14=new X(te.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),X.ISO8859_15=new X(te.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),X.ISO8859_16=new X(te.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),X.SJIS=new X(te.SJIS,20,"SJIS","Shift_JIS"),X.Cp1250=new X(te.Cp1250,21,"Cp1250","windows-1250"),X.Cp1251=new X(te.Cp1251,22,"Cp1251","windows-1251"),X.Cp1252=new X(te.Cp1252,23,"Cp1252","windows-1252"),X.Cp1256=new X(te.Cp1256,24,"Cp1256","windows-1256"),X.UnicodeBigUnmarked=new X(te.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),X.UTF8=new X(te.UTF8,26,"UTF8","UTF-8"),X.ASCII=new X(te.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),X.Big5=new X(te.Big5,28,"Big5"),X.GB18030=new X(te.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),X.EUC_KR=new X(te.EUC_KR,30,"EUC_KR","EUC-KR");class Ce extends m{}Ce.kind="UnsupportedOperationException";class je{static decode(r,s){const o=this.encodingName(s);return this.customDecoder?this.customDecoder(r,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(r,o):new TextDecoder(o).decode(r)}static shouldDecodeOnFallback(r){return!je.isBrowser()&&r==="ISO-8859-1"}static encode(r,s){const o=this.encodingName(s);return this.customEncoder?this.customEncoder(r,o):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof X?r:X.getCharacterSetECIByName(r)}static decodeFallback(r,s){const o=this.encodingCharacterSet(s);if(je.isDecodeFallbackSupported(o)){let l="";for(let u=0,d=r.length;u<d;u++){let h=r[u].toString(16);h.length<2&&(h="0"+h),l+="%"+h}return decodeURIComponent(l)}if(o.equals(X.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new Ce(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(X.UTF8)||r.equals(X.ISO8859_1)||r.equals(X.ASCII)}static encodeFallback(r){const o=btoa(unescape(encodeURIComponent(r))).split(""),l=[];for(let u=0;u<o.length;u++)l.push(o[u].charCodeAt(0));return new Uint8Array(l)}}class H{static castAsNonUtf8Char(r,s=null){const o=s?s.getName():this.ISO88591;return je.decode(new Uint8Array([r]),o)}static guessEncoding(r,s){if(s!=null&&s.get(q.CHARACTER_SET)!==void 0)return s.get(q.CHARACTER_SET).toString();const o=r.length;let l=!0,u=!0,d=!0,h=0,g=0,x=0,w=0,E=0,A=0,b=0,D=0,M=0,B=0,z=0;const $=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let ee=0;ee<o&&(l||u||d);ee++){const Z=r[ee]&255;d&&(h>0?Z&128?h--:d=!1:Z&128&&(Z&64?(h++,Z&32?(h++,Z&16?(h++,Z&8?d=!1:w++):x++):g++):d=!1)),l&&(Z>127&&Z<160?l=!1:Z>159&&(Z<192||Z===215||Z===247)&&z++),u&&(E>0?Z<64||Z===127||Z>252?u=!1:E--:Z===128||Z===160||Z>239?u=!1:Z>160&&Z<224?(A++,D=0,b++,b>M&&(M=b)):Z>127?(E++,b=0,D++,D>B&&(B=D)):(b=0,D=0))}return d&&h>0&&(d=!1),u&&E>0&&(u=!1),d&&($||g+x+w>0)?H.UTF8:u&&(H.ASSUME_SHIFT_JIS||M>=3||B>=3)?H.SHIFT_JIS:l&&u?M===2&&A===2||z*10>=o?H.SHIFT_JIS:H.ISO88591:l?H.ISO88591:u?H.SHIFT_JIS:d?H.UTF8:H.PLATFORM_DEFAULT_ENCODING}static format(r,...s){let o=-1;function l(d,h,g,x,w,E){if(d==="%%")return"%";if(s[++o]===void 0)return;d=x?parseInt(x.substr(1)):void 0;let A=w?parseInt(w.substr(1)):void 0,b;switch(E){case"s":b=s[o];break;case"c":b=s[o][0];break;case"f":b=parseFloat(s[o]).toFixed(d);break;case"p":b=parseFloat(s[o]).toPrecision(d);break;case"e":b=parseFloat(s[o]).toExponential(d);break;case"x":b=parseInt(s[o]).toString(A||16);break;case"d":b=parseFloat(parseInt(s[o],A||10).toPrecision(d)).toFixed(0);break}b=typeof b=="object"?JSON.stringify(b):(+b).toString(A);let D=parseInt(g),M=g&&g[0]+""=="0"?"0":" ";for(;b.length<D;)b=h!==void 0?b+M:M+b;return b}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,l)}static getBytes(r,s){return je.encode(r,s)}static getCharCode(r,s=0){return r.charCodeAt(s)}static getCharAt(r){return String.fromCharCode(r)}}H.SHIFT_JIS=X.SJIS.getName(),H.GB2312="GB2312",H.ISO88591=X.ISO8859_1.getName(),H.EUC_JP="EUC_JP",H.UTF8=X.UTF8.getName(),H.PLATFORM_DEFAULT_ENCODING=H.UTF8,H.ASSUME_SHIFT_JIS=!1;class ae{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=H.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,s,o){for(let l=s;s<s+o;l++)this.append(r[l]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+1)}substring(r,s){return this.value.substring(r,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+s.length)}}class ge{constructor(r,s,o,l){if(this.width=r,this.height=s,this.rowSize=o,this.bits=l,s==null&&(s=r),this.height=s,r<1||s<1)throw new _("Both dimensions must be greater than 0");o==null&&(o=Math.floor((r+31)/32)),this.rowSize=o,l==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const s=r.length,o=r[0].length,l=new ge(o,s);for(let u=0;u<s;u++){const d=r[u];for(let h=0;h<o;h++)d[h]&&l.set(h,u)}return l}static parseFromString(r,s,o){if(r===null)throw new _("stringRepresentation cannot be null");const l=new Array(r.length);let u=0,d=0,h=-1,g=0,x=0;for(;x<r.length;)if(r.charAt(x)===`
`||r.charAt(x)==="\r"){if(u>d){if(h===-1)h=u-d;else if(u-d!==h)throw new _("row lengths do not match");d=u,g++}x++}else if(r.substring(x,x+s.length)===s)x+=s.length,l[u]=!0,u++;else if(r.substring(x,x+o.length)===o)x+=o.length,l[u]=!1,u++;else throw new _("illegal character encountered: "+r.substring(x));if(u>d){if(h===-1)h=u-d;else if(u-d!==h)throw new _("row lengths do not match");g++}const w=new ge(h,g);for(let E=0;E<u;E++)l[E]&&w.set(Math.floor(E%h),Math.floor(E/h));return w}get(r,s){const o=s*this.rowSize+Math.floor(r/32);return(this.bits[o]>>>(r&31)&1)!==0}set(r,s){const o=s*this.rowSize+Math.floor(r/32);this.bits[o]|=1<<(r&31)&4294967295}unset(r,s){const o=s*this.rowSize+Math.floor(r/32);this.bits[o]&=~(1<<(r&31)&4294967295)}flip(r,s){const o=s*this.rowSize+Math.floor(r/32);this.bits[o]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new _("input matrix dimensions do not match");const s=new U(Math.floor(this.width/32)+1),o=this.rowSize,l=this.bits;for(let u=0,d=this.height;u<d;u++){const h=u*o,g=r.getRow(u,s).getBitArray();for(let x=0;x<o;x++)l[h+x]^=g[x]}}clear(){const r=this.bits,s=r.length;for(let o=0;o<s;o++)r[o]=0}setRegion(r,s,o,l){if(s<0||r<0)throw new _("Left and top must be nonnegative");if(l<1||o<1)throw new _("Height and width must be at least 1");const u=r+o,d=s+l;if(d>this.height||u>this.width)throw new _("The region must fit inside the matrix");const h=this.rowSize,g=this.bits;for(let x=s;x<d;x++){const w=x*h;for(let E=r;E<u;E++)g[w+Math.floor(E/32)]|=1<<(E&31)&4294967295}}getRow(r,s){s==null||s.getSize()<this.width?s=new U(this.width):s.clear();const o=this.rowSize,l=this.bits,u=r*o;for(let d=0;d<o;d++)s.setBulk(d*32,l[u+d]);return s}setRow(r,s){L.arraycopy(s.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),s=this.getHeight();let o=new U(r),l=new U(r);for(let u=0,d=Math.floor((s+1)/2);u<d;u++)o=this.getRow(u,o),l=this.getRow(s-1-u,l),o.reverse(),l.reverse(),this.setRow(u,l),this.setRow(s-1-u,o)}getEnclosingRectangle(){const r=this.width,s=this.height,o=this.rowSize,l=this.bits;let u=r,d=s,h=-1,g=-1;for(let x=0;x<s;x++)for(let w=0;w<o;w++){const E=l[x*o+w];if(E!==0){if(x<d&&(d=x),x>g&&(g=x),w*32<u){let A=0;for(;!(E<<31-A&4294967295);)A++;w*32+A<u&&(u=w*32+A)}if(w*32+31>h){let A=31;for(;!(E>>>A);)A--;w*32+A>h&&(h=w*32+A)}}}return h<u||g<d?null:Int32Array.from([u,d,h-u+1,g-d+1])}getTopLeftOnBit(){const r=this.rowSize,s=this.bits;let o=0;for(;o<s.length&&s[o]===0;)o++;if(o===s.length)return null;const l=o/r;let u=o%r*32;const d=s[o];let h=0;for(;!(d<<31-h&4294967295);)h++;return u+=h,Int32Array.from([u,l])}getBottomRightOnBit(){const r=this.rowSize,s=this.bits;let o=s.length-1;for(;o>=0&&s[o]===0;)o--;if(o<0)return null;const l=Math.floor(o/r);let u=Math.floor(o%r)*32;const d=s[o];let h=31;for(;!(d>>>h);)h--;return u+=h,Int32Array.from([u,l])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof ge))return!1;const s=r;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&R.equals(this.bits,s.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+R.hashCode(this.bits),r}toString(r="X ",s="  ",o=`
`){return this.buildToString(r,s,o)}buildToString(r,s,o){let l=new ae;for(let u=0,d=this.height;u<d;u++){for(let h=0,g=this.width;h<g;h++)l.append(this.get(h,u)?r:s);l.append(o)}return l.toString()}clone(){return new ge(this.width,this.height,this.rowSize,this.bits.slice())}}class V extends m{static getNotFoundInstance(){return new V}}V.kind="NotFoundException";class Te extends P{constructor(r){super(r),this.luminances=Te.EMPTY,this.buckets=new Int32Array(Te.LUMINANCE_BUCKETS)}getBlackRow(r,s){const o=this.getLuminanceSource(),l=o.getWidth();s==null||s.getSize()<l?s=new U(l):s.clear(),this.initArrays(l);const u=o.getRow(r,this.luminances),d=this.buckets;for(let g=0;g<l;g++)d[(u[g]&255)>>Te.LUMINANCE_SHIFT]++;const h=Te.estimateBlackPoint(d);if(l<3)for(let g=0;g<l;g++)(u[g]&255)<h&&s.set(g);else{let g=u[0]&255,x=u[1]&255;for(let w=1;w<l-1;w++){const E=u[w+1]&255;(x*4-g-E)/2<h&&s.set(w),g=x,x=E}}return s}getBlackMatrix(){const r=this.getLuminanceSource(),s=r.getWidth(),o=r.getHeight(),l=new ge(s,o);this.initArrays(s);const u=this.buckets;for(let g=1;g<5;g++){const x=Math.floor(o*g/5),w=r.getRow(x,this.luminances),E=Math.floor(s*4/5);for(let A=Math.floor(s/5);A<E;A++){const b=w[A]&255;u[b>>Te.LUMINANCE_SHIFT]++}}const d=Te.estimateBlackPoint(u),h=r.getMatrix();for(let g=0;g<o;g++){const x=g*s;for(let w=0;w<s;w++)(h[x+w]&255)<d&&l.set(w,g)}return l}createBinarizer(r){return new Te(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const s=this.buckets;for(let o=0;o<Te.LUMINANCE_BUCKETS;o++)s[o]=0}static estimateBlackPoint(r){const s=r.length;let o=0,l=0,u=0;for(let w=0;w<s;w++)r[w]>u&&(l=w,u=r[w]),r[w]>o&&(o=r[w]);let d=0,h=0;for(let w=0;w<s;w++){const E=w-l,A=r[w]*E*E;A>h&&(d=w,h=A)}if(l>d){const w=l;l=d,d=w}if(d-l<=s/16)throw new V;let g=d-1,x=-1;for(let w=d-1;w>l;w--){const E=w-l,A=E*E*(d-w)*(o-r[w]);A>x&&(g=w,x=A)}return g<<Te.LUMINANCE_SHIFT}}Te.LUMINANCE_BITS=5,Te.LUMINANCE_SHIFT=8-Te.LUMINANCE_BITS,Te.LUMINANCE_BUCKETS=1<<Te.LUMINANCE_BITS,Te.EMPTY=Uint8ClampedArray.from([0]);class xe extends Te{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),s=r.getWidth(),o=r.getHeight();if(s>=xe.MINIMUM_DIMENSION&&o>=xe.MINIMUM_DIMENSION){const l=r.getMatrix();let u=s>>xe.BLOCK_SIZE_POWER;s&xe.BLOCK_SIZE_MASK&&u++;let d=o>>xe.BLOCK_SIZE_POWER;o&xe.BLOCK_SIZE_MASK&&d++;const h=xe.calculateBlackPoints(l,u,d,s,o),g=new ge(s,o);xe.calculateThresholdForBlock(l,u,d,s,o,h,g),this.matrix=g}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new xe(r)}static calculateThresholdForBlock(r,s,o,l,u,d,h){const g=u-xe.BLOCK_SIZE,x=l-xe.BLOCK_SIZE;for(let w=0;w<o;w++){let E=w<<xe.BLOCK_SIZE_POWER;E>g&&(E=g);const A=xe.cap(w,2,o-3);for(let b=0;b<s;b++){let D=b<<xe.BLOCK_SIZE_POWER;D>x&&(D=x);const M=xe.cap(b,2,s-3);let B=0;for(let $=-2;$<=2;$++){const ee=d[A+$];B+=ee[M-2]+ee[M-1]+ee[M]+ee[M+1]+ee[M+2]}const z=B/25;xe.thresholdBlock(r,D,E,z,l,h)}}}static cap(r,s,o){return r<s?s:r>o?o:r}static thresholdBlock(r,s,o,l,u,d){for(let h=0,g=o*u+s;h<xe.BLOCK_SIZE;h++,g+=u)for(let x=0;x<xe.BLOCK_SIZE;x++)(r[g+x]&255)<=l&&d.set(s+x,o+h)}static calculateBlackPoints(r,s,o,l,u){const d=u-xe.BLOCK_SIZE,h=l-xe.BLOCK_SIZE,g=new Array(o);for(let x=0;x<o;x++){g[x]=new Int32Array(s);let w=x<<xe.BLOCK_SIZE_POWER;w>d&&(w=d);for(let E=0;E<s;E++){let A=E<<xe.BLOCK_SIZE_POWER;A>h&&(A=h);let b=0,D=255,M=0;for(let z=0,$=w*l+A;z<xe.BLOCK_SIZE;z++,$+=l){for(let ee=0;ee<xe.BLOCK_SIZE;ee++){const Z=r[$+ee]&255;b+=Z,Z<D&&(D=Z),Z>M&&(M=Z)}if(M-D>xe.MIN_DYNAMIC_RANGE)for(z++,$+=l;z<xe.BLOCK_SIZE;z++,$+=l)for(let ee=0;ee<xe.BLOCK_SIZE;ee++)b+=r[$+ee]&255}let B=b>>xe.BLOCK_SIZE_POWER*2;if(M-D<=xe.MIN_DYNAMIC_RANGE&&(B=D/2,x>0&&E>0)){const z=(g[x-1][E]+2*g[x][E-1]+g[x-1][E-1])/4;D<z&&(B=z)}g[x][E]=B}}return g}}xe.BLOCK_SIZE_POWER=3,xe.BLOCK_SIZE=1<<xe.BLOCK_SIZE_POWER,xe.BLOCK_SIZE_MASK=xe.BLOCK_SIZE-1,xe.MINIMUM_DIMENSION=xe.BLOCK_SIZE*5,xe.MIN_DYNAMIC_RANGE=24;class ie{constructor(r,s){this.width=r,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,s,o,l){throw new Ce("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Ce("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Ce("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let s=new ae;for(let o=0;o<this.height;o++){const l=this.getRow(o,r);for(let u=0;u<this.width;u++){const d=l[u]&255;let h;d<64?h="#":d<128?h="+":d<192?h=".":h=" ",s.append(h)}s.append(`
`)}return s.toString()}}class fe extends ie{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,s){const o=this.delegate.getRow(r,s),l=this.getWidth();for(let u=0;u<l;u++)o[u]=255-(o[u]&255);return o}getMatrix(){const r=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(s);for(let l=0;l<s;l++)o[l]=255-(r[l]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(r,s,o,l){return new fe(this.delegate.crop(r,s,o,l))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new fe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new fe(this.delegate.rotateCounterClockwise45())}}class ye extends ie{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=ye.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const s=r.getContext("2d").getImageData(0,0,r.width,r.height);return ye.toGrayscaleBuffer(s.data,r.width,r.height)}static toGrayscaleBuffer(r,s,o){const l=new Uint8ClampedArray(s*o);for(let u=0,d=0,h=r.length;u<h;u+=4,d++){let g;if(r[u+3]===0)g=255;else{const w=r[u],E=r[u+1],A=r[u+2];g=306*w+601*E+117*A+512>>10}l[d]=g}return l}getRow(r,s){if(r<0||r>=this.getHeight())throw new _("Requested row is outside the image: "+r);const o=this.getWidth(),l=r*o;return s===null?s=this.buffer.slice(l,l+o):(s.length<o&&(s=new Uint8ClampedArray(o)),s.set(this.buffer.slice(l,l+o))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,s,o,l){return super.crop(r,s,o,l),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const s=this.getTempCanvasElement(),o=s.getContext("2d"),l=r*ye.DEGREE_TO_RADIANS,u=this.canvas.width,d=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(l))*u+Math.abs(Math.sin(l))*d),g=Math.ceil(Math.abs(Math.sin(l))*u+Math.abs(Math.cos(l))*d);return s.width=h,s.height=g,o.translate(h/2,g/2),o.rotate(l),o.drawImage(this.canvas,u/-2,d/-2),this.buffer=ye.makeBufferFromCanvasImageData(s),this}invert(){return new fe(this)}}ye.DEGREE_TO_RADIANS=Math.PI/180;class Ge{constructor(r,s,o){this.deviceId=r,this.label=s,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var be=(globalThis||Co||self||window||void 0)&&(globalThis||Co||self||window||void 0).__awaiter||function(C,r,s,o){function l(u){return u instanceof s?u:new s(function(d){d(u)})}return new(s||(s=Promise))(function(u,d){function h(w){try{x(o.next(w))}catch(E){d(E)}}function g(w){try{x(o.throw(w))}catch(E){d(E)}}function x(w){w.done?u(w.value):l(w.value).then(h,g)}x((o=o.apply(C,r||[])).next())})};class pn{constructor(r,s=500,o){this.reader=r,this.timeBetweenScansMillis=s,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return be(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const o of r){const l=o.kind==="video"?"videoinput":o.kind;if(l!=="videoinput")continue;const u=o.deviceId||o.id,d=o.label||`Video device ${s.length+1}`,h=o.groupId,g={deviceId:u,label:d,kind:l,groupId:h};s.push(g)}return s})}getVideoInputDevices(){return be(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new Ge(s.deviceId,s.label))})}findDeviceById(r){return be(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(o=>o.deviceId===r):null})}decodeFromInputVideoDevice(r,s){return be(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,s)})}decodeOnceFromVideoDevice(r,s){return be(this,void 0,void 0,function*(){this.reset();let o;r?o={deviceId:{exact:r}}:o={facingMode:"environment"};const l={video:o};return yield this.decodeOnceFromConstraints(l,s)})}decodeOnceFromConstraints(r,s){return be(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(o,s)})}decodeOnceFromStream(r,s){return be(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(r,s);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(r,s,o){return be(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,s,o)})}decodeFromVideoDevice(r,s,o){return be(this,void 0,void 0,function*(){let l;r?l={deviceId:{exact:r}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeFromConstraints(u,s,o)})}decodeFromConstraints(r,s,o){return be(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(l,s,o)})}decodeFromStream(r,s,o){return be(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(r,s);return yield this.decodeContinuously(l,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,s){return be(this,void 0,void 0,function*(){const o=this.prepareVideoElement(s);return this.addVideoSource(o,r),this.videoElement=o,this.stream=r,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(r){return new Promise((s,o)=>this.playVideoOnLoad(r,()=>s()))}playVideoOnLoad(r,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",s),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return be(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,s){const o=document.getElementById(r);if(!o)throw new v(`element with id '${r}' not found`);if(o.nodeName.toLowerCase()!==s.toLowerCase())throw new v(`element with id '${r}' must be an ${s} element`);return o}decodeFromImage(r,s){if(!r&&!s)throw new v("either imageElement with a src set or an url must be provided");return s&&!r?this.decodeFromImageUrl(s):this.decodeFromImageElement(r)}decodeFromVideo(r,s){if(!r&&!s)throw new v("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,s,o){if(r===void 0&&s===void 0)throw new v("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrlContinuously(s,o):this.decodeFromVideoElementContinuously(r,o)}decodeFromImageElement(r){if(!r)throw new v("An image element must be provided.");this.reset();const s=this.prepareImageElement(r);this.imageElement=s;let o;return this.isImageLoaded(s)?o=this.decodeOnce(s,!1,!0):o=this._decodeOnLoadImage(s),o}decodeFromVideoElement(r){const s=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(r,s){const o=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(o,s)}_decodeFromVideoElementSetup(r){if(!r)throw new v("A video element must be provided.");this.reset();const s=this.prepareVideoElement(r);return this.videoElement=s,s}decodeFromImageUrl(r){if(!r)throw new v("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const o=this._decodeOnLoadImage(s);return s.src=r,o}decodeFromVideoUrl(r){if(!r)throw new v("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),o=this.decodeFromVideoElement(s);return s.src=r,o}decodeFromVideoUrlContinuously(r,s){if(!r)throw new v("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),l=this.decodeFromVideoElementContinuously(o,s);return o.src=r,l}_decodeOnLoadImage(r){return new Promise((s,o)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(s,o),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return be(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,s){return be(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,s)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let s;return typeof r>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(s=r),s}prepareVideoElement(r){let s;return!r&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(s=r),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(r,s=!0,o=!0){this._stopAsyncDecode=!1;const l=(u,d)=>{if(this._stopAsyncDecode){d(new V("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(r);u(h)}catch(h){const g=s&&h instanceof V,w=(h instanceof O||h instanceof j)&&o;if(g||w)return setTimeout(l,this._timeBetweenDecodingAttempts,u,d);d(h)}};return new Promise((u,d)=>l(u,d))}decodeContinuously(r,s){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const l=this.decode(r);s(l,null),setTimeout(o,this.timeBetweenScansMillis)}catch(l){s(null,l);const u=l instanceof O||l instanceof j,d=l instanceof V;(u||d)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(r){const s=this.createBinaryBitmap(r);return this.decodeBitmap(s)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,s,o){s||(s={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(r,s,o=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const s=this.getCaptureCanvas(r),o=new ye(s),l=new xe(o);return new I(l)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const s=this.createCaptureCanvas(r);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let o,l;return typeof r<"u"&&(r instanceof HTMLVideoElement?(o=r.videoWidth,l=r.videoHeight):r instanceof HTMLImageElement&&(o=r.naturalWidth||r.width,l=r.naturalHeight||r.height)),s.style.width=o+"px",s.style.height=l+"px",s.width=o,s.height=l,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,s){try{r.srcObject=s}catch{r.src=URL.createObjectURL(s)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class nt{constructor(r,s,o=s==null?0:8*s.length,l,u,d=L.currentTimeMillis()){this.text=r,this.rawBytes=s,this.numBits=o,this.resultPoints=l,this.format=u,this.timestamp=d,this.text=r,this.rawBytes=s,o==null?this.numBits=s==null?0:8*s.length:this.numBits=o,this.resultPoints=l,this.format=u,this.resultMetadata=null,d==null?this.timestamp=L.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,s)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const s=this.resultPoints;if(s===null)this.resultPoints=r;else if(r!==null&&r.length>0){const o=new Array(s.length+r.length);L.arraycopy(s,0,o,0,s.length),L.arraycopy(r,0,o,s.length,r.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var lr;(function(C){C[C.AZTEC=0]="AZTEC",C[C.CODABAR=1]="CODABAR",C[C.CODE_39=2]="CODE_39",C[C.CODE_93=3]="CODE_93",C[C.CODE_128=4]="CODE_128",C[C.DATA_MATRIX=5]="DATA_MATRIX",C[C.EAN_8=6]="EAN_8",C[C.EAN_13=7]="EAN_13",C[C.ITF=8]="ITF",C[C.MAXICODE=9]="MAXICODE",C[C.PDF_417=10]="PDF_417",C[C.QR_CODE=11]="QR_CODE",C[C.RSS_14=12]="RSS_14",C[C.RSS_EXPANDED=13]="RSS_EXPANDED",C[C.UPC_A=14]="UPC_A",C[C.UPC_E=15]="UPC_E",C[C.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(lr||(lr={}));var ue=lr,cr;(function(C){C[C.OTHER=0]="OTHER",C[C.ORIENTATION=1]="ORIENTATION",C[C.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",C[C.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",C[C.ISSUE_NUMBER=4]="ISSUE_NUMBER",C[C.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",C[C.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",C[C.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",C[C.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",C[C.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",C[C.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(cr||(cr={}));var Et=cr;class oe{constructor(r,s,o,l,u=-1,d=-1){this.rawBytes=r,this.text=s,this.byteSegments=o,this.ecLevel=l,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=d,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Xe{exp(r){return this.expTable[r]}log(r){if(r===0)throw new _;return this.logTable[r]}static addOrSubtract(r,s){return r^s}}class vt{constructor(r,s){if(s.length===0)throw new _;this.field=r;const o=s.length;if(o>1&&s[0]===0){let l=1;for(;l<o&&s[l]===0;)l++;l===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-l),L.arraycopy(s,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const s=this.coefficients;let o;if(r===1){o=0;for(let d=0,h=s.length;d!==h;d++){const g=s[d];o=Xe.addOrSubtract(o,g)}return o}o=s[0];const l=s.length,u=this.field;for(let d=1;d<l;d++)o=Xe.addOrSubtract(u.multiply(r,o),s[d]);return o}addOrSubtract(r){if(!this.field.equals(r.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,o=r.coefficients;if(s.length>o.length){const d=s;s=o,o=d}let l=new Int32Array(o.length);const u=o.length-s.length;L.arraycopy(o,0,l,0,u);for(let d=u;d<o.length;d++)l[d]=Xe.addOrSubtract(s[d-u],o[d]);return new vt(this.field,l)}multiply(r){if(!this.field.equals(r.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const s=this.coefficients,o=s.length,l=r.coefficients,u=l.length,d=new Int32Array(o+u-1),h=this.field;for(let g=0;g<o;g++){const x=s[g];for(let w=0;w<u;w++)d[g+w]=Xe.addOrSubtract(d[g+w],h.multiply(x,l[w]))}return new vt(h,d)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const s=this.coefficients.length,o=this.field,l=new Int32Array(s),u=this.coefficients;for(let d=0;d<s;d++)l[d]=o.multiply(u[d],r);return new vt(o,l)}multiplyByMonomial(r,s){if(r<0)throw new _;if(s===0)return this.field.getZero();const o=this.coefficients,l=o.length,u=new Int32Array(l+r),d=this.field;for(let h=0;h<l;h++)u[h]=d.multiply(o[h],s);return new vt(d,u)}divide(r){if(!this.field.equals(r.field))throw new _("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new _("Divide by 0");const s=this.field;let o=s.getZero(),l=this;const u=r.getCoefficient(r.getDegree()),d=s.inverse(u);for(;l.getDegree()>=r.getDegree()&&!l.isZero();){const h=l.getDegree()-r.getDegree(),g=s.multiply(l.getCoefficient(l.getDegree()),d),x=r.multiplyByMonomial(h,g),w=s.buildMonomial(h,g);o=o.addOrSubtract(w),l=l.addOrSubtract(x)}return[o,l]}toString(){let r="";for(let s=this.getDegree();s>=0;s--){let o=this.getCoefficient(s);if(o!==0){if(o<0?(r+=" - ",o=-o):r.length>0&&(r+=" + "),s===0||o!==1){const l=this.field.log(o);l===0?r+="1":l===1?r+="a":(r+="a^",r+=l)}s!==0&&(s===1?r+="x":(r+="x^",r+=s))}}return r}}class ur extends m{}ur.kind="ArithmeticException";class ve extends Xe{constructor(r,s,o){super(),this.primitive=r,this.size=s,this.generatorBase=o;const l=new Int32Array(s);let u=1;for(let h=0;h<s;h++)l[h]=u,u*=2,u>=s&&(u^=r,u&=s-1);this.expTable=l;const d=new Int32Array(s);for(let h=0;h<s-1;h++)d[l[h]]=h;this.logTable=d,this.zero=new vt(this,Int32Array.from([0])),this.one=new vt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new _;if(s===0)return this.zero;const o=new Int32Array(r+1);return o[0]=s,new vt(this,o)}inverse(r){if(r===0)throw new ur;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+N.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}ve.AZTEC_DATA_12=new ve(4201,4096,1),ve.AZTEC_DATA_10=new ve(1033,1024,1),ve.AZTEC_DATA_6=new ve(67,64,1),ve.AZTEC_PARAM=new ve(19,16,1),ve.QR_CODE_FIELD_256=new ve(285,256,0),ve.DATA_MATRIX_FIELD_256=new ve(301,256,1),ve.AZTEC_DATA_8=ve.DATA_MATRIX_FIELD_256,ve.MAXICODE_FIELD_64=ve.AZTEC_DATA_6;class Hr extends m{}Hr.kind="ReedSolomonException";class dr extends m{}dr.kind="IllegalStateException";class uo{constructor(r){this.field=r}decode(r,s){const o=this.field,l=new vt(o,r),u=new Int32Array(s);let d=!0;for(let b=0;b<s;b++){const D=l.evaluateAt(o.exp(b+o.getGeneratorBase()));u[u.length-1-b]=D,D!==0&&(d=!1)}if(d)return;const h=new vt(o,u),g=this.runEuclideanAlgorithm(o.buildMonomial(s,1),h,s),x=g[0],w=g[1],E=this.findErrorLocations(x),A=this.findErrorMagnitudes(w,E);for(let b=0;b<E.length;b++){const D=r.length-1-o.log(E[b]);if(D<0)throw new Hr("Bad error location");r[D]=ve.addOrSubtract(r[D],A[b])}}runEuclideanAlgorithm(r,s,o){if(r.getDegree()<s.getDegree()){const b=r;r=s,s=b}const l=this.field;let u=r,d=s,h=l.getZero(),g=l.getOne();for(;d.getDegree()>=(o/2|0);){let b=u,D=h;if(u=d,h=g,u.isZero())throw new Hr("r_{i-1} was zero");d=b;let M=l.getZero();const B=u.getCoefficient(u.getDegree()),z=l.inverse(B);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){const $=d.getDegree()-u.getDegree(),ee=l.multiply(d.getCoefficient(d.getDegree()),z);M=M.addOrSubtract(l.buildMonomial($,ee)),d=d.addOrSubtract(u.multiplyByMonomial($,ee))}if(g=M.multiply(h).addOrSubtract(D),d.getDegree()>=u.getDegree())throw new dr("Division algorithm failed to reduce polynomial?")}const x=g.getCoefficient(0);if(x===0)throw new Hr("sigmaTilde(0) was zero");const w=l.inverse(x),E=g.multiplyScalar(w),A=d.multiplyScalar(w);return[E,A]}findErrorLocations(r){const s=r.getDegree();if(s===1)return Int32Array.from([r.getCoefficient(1)]);const o=new Int32Array(s);let l=0;const u=this.field;for(let d=1;d<u.getSize()&&l<s;d++)r.evaluateAt(d)===0&&(o[l]=u.inverse(d),l++);if(l!==s)throw new Hr("Error locator degree does not match number of roots");return o}findErrorMagnitudes(r,s){const o=s.length,l=new Int32Array(o),u=this.field;for(let d=0;d<o;d++){const h=u.inverse(s[d]);let g=1;for(let x=0;x<o;x++)if(d!==x){const w=u.multiply(s[x],h),E=w&1?w&-2:w|1;g=u.multiply(g,E)}l[d]=u.multiply(r.evaluateAt(h),u.inverse(g)),u.getGeneratorBase()!==0&&(l[d]=u.multiply(l[d],h))}return l}}var zt;(function(C){C[C.UPPER=0]="UPPER",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.DIGIT=3]="DIGIT",C[C.PUNCT=4]="PUNCT",C[C.BINARY=5]="BINARY"})(zt||(zt={}));class Ze{decode(r){this.ddata=r;let s=r.getBits(),o=this.extractBits(s),l=this.correctBits(o),u=Ze.convertBoolArrayToByteArray(l),d=Ze.getEncodedData(l),h=new oe(u,d,null,null);return h.setNumBits(l.length),h}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let s=r.length,o=zt.UPPER,l=zt.UPPER,u="",d=0;for(;d<s;)if(l===zt.BINARY){if(s-d<5)break;let h=Ze.readCode(r,d,5);if(d+=5,h===0){if(s-d<11)break;h=Ze.readCode(r,d,11)+31,d+=11}for(let g=0;g<h;g++){if(s-d<8){d=s;break}const x=Ze.readCode(r,d,8);u+=H.castAsNonUtf8Char(x),d+=8}l=o}else{let h=l===zt.DIGIT?4:5;if(s-d<h)break;let g=Ze.readCode(r,d,h);d+=h;let x=Ze.getCharacter(l,g);x.startsWith("CTRL_")?(o=l,l=Ze.getTable(x.charAt(5)),x.charAt(6)==="L"&&(o=l)):(u+=x,l=o)}return u}static getTable(r){switch(r){case"L":return zt.LOWER;case"P":return zt.PUNCT;case"M":return zt.MIXED;case"D":return zt.DIGIT;case"B":return zt.BINARY;case"U":default:return zt.UPPER}}static getCharacter(r,s){switch(r){case zt.UPPER:return Ze.UPPER_TABLE[s];case zt.LOWER:return Ze.LOWER_TABLE[s];case zt.MIXED:return Ze.MIXED_TABLE[s];case zt.PUNCT:return Ze.PUNCT_TABLE[s];case zt.DIGIT:return Ze.DIGIT_TABLE[s];default:throw new dr("Bad table")}}correctBits(r){let s,o;this.ddata.getNbLayers()<=2?(o=6,s=ve.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,s=ve.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,s=ve.AZTEC_DATA_10):(o=12,s=ve.AZTEC_DATA_12);let l=this.ddata.getNbDatablocks(),u=r.length/o;if(u<l)throw new j;let d=r.length%o,h=new Int32Array(u);for(let A=0;A<u;A++,d+=o)h[A]=Ze.readCode(r,d,o);try{new uo(s).decode(h,u-l)}catch(A){throw new j(A)}let g=(1<<o)-1,x=0;for(let A=0;A<l;A++){let b=h[A];if(b===0||b===g)throw new j;(b===1||b===g-1)&&x++}let w=new Array(l*o-x),E=0;for(let A=0;A<l;A++){let b=h[A];if(b===1||b===g-1)w.fill(b>1,E,E+o-1),E+=o-1;else for(let D=o-1;D>=0;--D)w[E++]=(b&1<<D)!==0}return w}extractBits(r){let s=this.ddata.isCompact(),o=this.ddata.getNbLayers(),l=(s?11:14)+o*4,u=new Int32Array(l),d=new Array(this.totalBitsInLayer(o,s));if(s)for(let h=0;h<u.length;h++)u[h]=h;else{let h=l+1+2*N.truncDivision(N.truncDivision(l,2)-1,15),g=l/2,x=N.truncDivision(h,2);for(let w=0;w<g;w++){let E=w+N.truncDivision(w,15);u[g-w-1]=x-E-1,u[g+w]=x+E+1}}for(let h=0,g=0;h<o;h++){let x=(o-h)*4+(s?9:12),w=h*2,E=l-1-w;for(let A=0;A<x;A++){let b=A*2;for(let D=0;D<2;D++)d[g+b+D]=r.get(u[w+D],u[w+A]),d[g+2*x+b+D]=r.get(u[w+A],u[E-D]),d[g+4*x+b+D]=r.get(u[E-D],u[E-A]),d[g+6*x+b+D]=r.get(u[E-A],u[w+D])}g+=x*8}return d}static readCode(r,s,o){let l=0;for(let u=s;u<s+o;u++)l<<=1,r[u]&&(l|=1);return l}static readByte(r,s){let o=r.length-s;return o>=8?Ze.readCode(r,s,8):Ze.readCode(r,s,o)<<8-o}static convertBoolArrayToByteArray(r){let s=new Uint8Array((r.length+7)/8);for(let o=0;o<s.length;o++)s[o]=Ze.readByte(r,8*o);return s}totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}Ze.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ze.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ze.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ze.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ze.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Me{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,s,o,l){const u=r-o,d=s-l;return Math.sqrt(u*u+d*d)}static sum(r){let s=0;for(let o=0,l=r.length;o!==l;o++){const u=r[o];s+=u}return s}}class Ya{static floatToIntBits(r){return r}}Ya.MAX_VALUE=Number.MAX_SAFE_INTEGER;class de{constructor(r,s){this.x=r,this.y=s}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof de){const s=r;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*Ya.floatToIntBits(this.x)+Ya.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const s=this.distance(r[0],r[1]),o=this.distance(r[1],r[2]),l=this.distance(r[0],r[2]);let u,d,h;if(o>=s&&o>=l?(d=r[0],u=r[1],h=r[2]):l>=o&&l>=s?(d=r[1],u=r[0],h=r[2]):(d=r[2],u=r[0],h=r[1]),this.crossProductZ(u,d,h)<0){const g=u;u=h,h=g}r[0]=u,r[1]=d,r[2]=h}static distance(r,s){return Me.distance(r.x,r.y,s.x,s.y)}static crossProductZ(r,s,o){const l=s.x,u=s.y;return(o.x-l)*(r.y-u)-(o.y-u)*(r.x-l)}}class Ka{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class v1 extends Ka{constructor(r,s,o,l,u){super(r,s),this.compact=o,this.nbDatablocks=l,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ar{constructor(r,s,o,l){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),s==null&&(s=Ar.INIT_SIZE),o==null&&(o=r.getWidth()/2|0),l==null&&(l=r.getHeight()/2|0);const u=s/2|0;if(this.leftInit=o-u,this.rightInit=o+u,this.upInit=l-u,this.downInit=l+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new V}detect(){let r=this.leftInit,s=this.rightInit,o=this.upInit,l=this.downInit,u=!1,d=!0,h=!1,g=!1,x=!1,w=!1,E=!1;const A=this.width,b=this.height;for(;d;){d=!1;let D=!0;for(;(D||!g)&&s<A;)D=this.containsBlackPoint(o,l,s,!1),D?(s++,d=!0,g=!0):g||s++;if(s>=A){u=!0;break}let M=!0;for(;(M||!x)&&l<b;)M=this.containsBlackPoint(r,s,l,!0),M?(l++,d=!0,x=!0):x||l++;if(l>=b){u=!0;break}let B=!0;for(;(B||!w)&&r>=0;)B=this.containsBlackPoint(o,l,r,!1),B?(r--,d=!0,w=!0):w||r--;if(r<0){u=!0;break}let z=!0;for(;(z||!E)&&o>=0;)z=this.containsBlackPoint(r,s,o,!0),z?(o--,d=!0,E=!0):E||o--;if(o<0){u=!0;break}d&&(h=!0)}if(!u&&h){const D=s-r;let M=null;for(let ee=1;M===null&&ee<D;ee++)M=this.getBlackPointOnSegment(r,l-ee,r+ee,l);if(M==null)throw new V;let B=null;for(let ee=1;B===null&&ee<D;ee++)B=this.getBlackPointOnSegment(r,o+ee,r+ee,o);if(B==null)throw new V;let z=null;for(let ee=1;z===null&&ee<D;ee++)z=this.getBlackPointOnSegment(s,o+ee,s-ee,o);if(z==null)throw new V;let $=null;for(let ee=1;$===null&&ee<D;ee++)$=this.getBlackPointOnSegment(s,l-ee,s-ee,l);if($==null)throw new V;return this.centerEdges($,M,z,B)}else throw new V}getBlackPointOnSegment(r,s,o,l){const u=Me.round(Me.distance(r,s,o,l)),d=(o-r)/u,h=(l-s)/u,g=this.image;for(let x=0;x<u;x++){const w=Me.round(r+x*d),E=Me.round(s+x*h);if(g.get(w,E))return new de(w,E)}return null}centerEdges(r,s,o,l){const u=r.getX(),d=r.getY(),h=s.getX(),g=s.getY(),x=o.getX(),w=o.getY(),E=l.getX(),A=l.getY(),b=Ar.CORR;return u<this.width/2?[new de(E-b,A+b),new de(h+b,g+b),new de(x-b,w-b),new de(u+b,d-b)]:[new de(E+b,A+b),new de(h+b,g-b),new de(x-b,w+b),new de(u-b,d-b)]}containsBlackPoint(r,s,o,l){const u=this.image;if(l){for(let d=r;d<=s;d++)if(u.get(d,o))return!0}else for(let d=r;d<=s;d++)if(u.get(o,d))return!0;return!1}}Ar.INIT_SIZE=10,Ar.CORR=1;class lu{static checkAndNudgePoints(r,s){const o=r.getWidth(),l=r.getHeight();let u=!0;for(let d=0;d<s.length&&u;d+=2){const h=Math.floor(s[d]),g=Math.floor(s[d+1]);if(h<-1||h>o||g<-1||g>l)throw new V;u=!1,h===-1?(s[d]=0,u=!0):h===o&&(s[d]=o-1,u=!0),g===-1?(s[d+1]=0,u=!0):g===l&&(s[d+1]=l-1,u=!0)}u=!0;for(let d=s.length-2;d>=0&&u;d-=2){const h=Math.floor(s[d]),g=Math.floor(s[d+1]);if(h<-1||h>o||g<-1||g>l)throw new V;u=!1,h===-1?(s[d]=0,u=!0):h===o&&(s[d]=o-1,u=!0),g===-1?(s[d+1]=0,u=!0):g===l&&(s[d+1]=l-1,u=!0)}}}class qn{constructor(r,s,o,l,u,d,h,g,x){this.a11=r,this.a21=s,this.a31=o,this.a12=l,this.a22=u,this.a32=d,this.a13=h,this.a23=g,this.a33=x}static quadrilateralToQuadrilateral(r,s,o,l,u,d,h,g,x,w,E,A,b,D,M,B){const z=qn.quadrilateralToSquare(r,s,o,l,u,d,h,g);return qn.squareToQuadrilateral(x,w,E,A,b,D,M,B).times(z)}transformPoints(r){const s=r.length,o=this.a11,l=this.a12,u=this.a13,d=this.a21,h=this.a22,g=this.a23,x=this.a31,w=this.a32,E=this.a33;for(let A=0;A<s;A+=2){const b=r[A],D=r[A+1],M=u*b+g*D+E;r[A]=(o*b+d*D+x)/M,r[A+1]=(l*b+h*D+w)/M}}transformPointsWithValues(r,s){const o=this.a11,l=this.a12,u=this.a13,d=this.a21,h=this.a22,g=this.a23,x=this.a31,w=this.a32,E=this.a33,A=r.length;for(let b=0;b<A;b++){const D=r[b],M=s[b],B=u*D+g*M+E;r[b]=(o*D+d*M+x)/B,s[b]=(l*D+h*M+w)/B}}static squareToQuadrilateral(r,s,o,l,u,d,h,g){const x=r-o+u-h,w=s-l+d-g;if(x===0&&w===0)return new qn(o-r,u-o,r,l-s,d-l,s,0,0,1);{const E=o-u,A=h-u,b=l-d,D=g-d,M=E*D-A*b,B=(x*D-A*w)/M,z=(E*w-x*b)/M;return new qn(o-r+B*o,h-r+z*h,r,l-s+B*l,g-s+z*g,s,B,z,1)}}static quadrilateralToSquare(r,s,o,l,u,d,h,g){return qn.squareToQuadrilateral(r,s,o,l,u,d,h,g).buildAdjoint()}buildAdjoint(){return new qn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new qn(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class S1 extends lu{sampleGrid(r,s,o,l,u,d,h,g,x,w,E,A,b,D,M,B,z,$,ee){const Z=qn.quadrilateralToQuadrilateral(l,u,d,h,g,x,w,E,A,b,D,M,B,z,$,ee);return this.sampleGridWithTransform(r,s,o,Z)}sampleGridWithTransform(r,s,o,l){if(s<=0||o<=0)throw new V;const u=new ge(s,o),d=new Float32Array(2*s);for(let h=0;h<o;h++){const g=d.length,x=h+.5;for(let w=0;w<g;w+=2)d[w]=w/2+.5,d[w+1]=x;l.transformPoints(d),lu.checkAndNudgePoints(r,d);try{for(let w=0;w<g;w+=2)r.get(Math.floor(d[w]),Math.floor(d[w+1]))&&u.set(w/2,h)}catch{throw new V}}return u}}class Gr{static setGridSampler(r){Gr.gridSampler=r}static getInstance(){return Gr.gridSampler}}Gr.gridSampler=new S1;class on{constructor(r,s){this.x=r,this.y=s}toResultPoint(){return new de(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class A1{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let s=this.getMatrixCenter(),o=this.getBullsEyeCorners(s);if(r){let d=o[0];o[0]=o[2],o[2]=d}this.extractParameters(o);let l=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),u=this.getMatrixCornerPoints(o);return new v1(l,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new V;let s=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(r[0],r[1],s),this.sampleLine(r[1],r[2],s),this.sampleLine(r[2],r[3],s),this.sampleLine(r[3],r[0],s)]);this.shift=this.getRotation(o,s);let l=0;for(let d=0;d<4;d++){let h=o[(this.shift+d)%4];this.compact?(l<<=7,l+=h>>1&127):(l<<=10,l+=(h>>2&992)+(h>>1&31))}let u=this.getCorrectedParameterData(l,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(r,s){let o=0;r.forEach((l,u,d)=>{let h=(l>>s-2<<1)+(l&1);o=(o<<3)+h}),o=((o&1)<<11)+(o>>1);for(let l=0;l<4;l++)if(N.bitCount(o^this.EXPECTED_CORNER_BITS[l])<=2)return l;throw new V}getCorrectedParameterData(r,s){let o,l;s?(o=7,l=2):(o=10,l=4);let u=o-l,d=new Int32Array(o);for(let g=o-1;g>=0;--g)d[g]=r&15,r>>=4;try{new uo(ve.AZTEC_PARAM).decode(d,u)}catch{throw new V}let h=0;for(let g=0;g<l;g++)h=(h<<4)+d[g];return h}getBullsEyeCorners(r){let s=r,o=r,l=r,u=r,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let E=this.getFirstDifferent(s,d,1,-1),A=this.getFirstDifferent(o,d,1,1),b=this.getFirstDifferent(l,d,-1,1),D=this.getFirstDifferent(u,d,-1,-1);if(this.nbCenterLayers>2){let M=this.distancePoint(D,E)*this.nbCenterLayers/(this.distancePoint(u,s)*(this.nbCenterLayers+2));if(M<.75||M>1.25||!this.isWhiteOrBlackRectangle(E,A,b,D))break}s=E,o=A,l=b,u=D,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new V;this.compact=this.nbCenterLayers===5;let h=new de(s.getX()+.5,s.getY()-.5),g=new de(o.getX()+.5,o.getY()+.5),x=new de(l.getX()-.5,l.getY()+.5),w=new de(u.getX()-.5,u.getY()-.5);return this.expandSquare([h,g,x,w],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,s,o,l;try{let h=new Ar(this.image).detect();r=h[0],s=h[1],o=h[2],l=h[3]}catch{let g=this.image.getWidth()/2,x=this.image.getHeight()/2;r=this.getFirstDifferent(new on(g+7,x-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new on(g+7,x+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new on(g-7,x+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new on(g-7,x-7),!1,-1,-1).toResultPoint()}let u=Me.round((r.getX()+l.getX()+s.getX()+o.getX())/4),d=Me.round((r.getY()+l.getY()+s.getY()+o.getY())/4);try{let h=new Ar(this.image,15,u,d).detect();r=h[0],s=h[1],o=h[2],l=h[3]}catch{r=this.getFirstDifferent(new on(u+7,d-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new on(u+7,d+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new on(u-7,d+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new on(u-7,d-7),!1,-1,-1).toResultPoint()}return u=Me.round((r.getX()+l.getX()+s.getX()+o.getX())/4),d=Me.round((r.getY()+l.getY()+s.getY()+o.getY())/4),new on(u,d)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,s,o,l,u){let d=Gr.getInstance(),h=this.getDimension(),g=h/2-this.nbCenterLayers,x=h/2+this.nbCenterLayers;return d.sampleGrid(r,h,h,g,g,x,g,x,x,g,x,s.getX(),s.getY(),o.getX(),o.getY(),l.getX(),l.getY(),u.getX(),u.getY())}sampleLine(r,s,o){let l=0,u=this.distanceResultPoint(r,s),d=u/o,h=r.getX(),g=r.getY(),x=d*(s.getX()-r.getX())/u,w=d*(s.getY()-r.getY())/u;for(let E=0;E<o;E++)this.image.get(Me.round(h+E*x),Me.round(g+E*w))&&(l|=1<<o-E-1);return l}isWhiteOrBlackRectangle(r,s,o,l){let u=3;r=new on(r.getX()-u,r.getY()+u),s=new on(s.getX()-u,s.getY()-u),o=new on(o.getX()+u,o.getY()-u),l=new on(l.getX()+u,l.getY()+u);let d=this.getColor(l,r);if(d===0)return!1;let h=this.getColor(r,s);return h!==d||(h=this.getColor(s,o),h!==d)?!1:(h=this.getColor(o,l),h===d)}getColor(r,s){let o=this.distancePoint(r,s),l=(s.getX()-r.getX())/o,u=(s.getY()-r.getY())/o,d=0,h=r.getX(),g=r.getY(),x=this.image.get(r.getX(),r.getY()),w=Math.ceil(o);for(let A=0;A<w;A++)h+=l,g+=u,this.image.get(Me.round(h),Me.round(g))!==x&&d++;let E=d/o;return E>.1&&E<.9?0:E<=.1===x?1:-1}getFirstDifferent(r,s,o,l){let u=r.getX()+o,d=r.getY()+l;for(;this.isValid(u,d)&&this.image.get(u,d)===s;)u+=o,d+=l;for(u-=o,d-=l;this.isValid(u,d)&&this.image.get(u,d)===s;)u+=o;for(u-=o;this.isValid(u,d)&&this.image.get(u,d)===s;)d+=l;return d-=l,new on(u,d)}expandSquare(r,s,o){let l=o/(2*s),u=r[0].getX()-r[2].getX(),d=r[0].getY()-r[2].getY(),h=(r[0].getX()+r[2].getX())/2,g=(r[0].getY()+r[2].getY())/2,x=new de(h+l*u,g+l*d),w=new de(h-l*u,g-l*d);u=r[1].getX()-r[3].getX(),d=r[1].getY()-r[3].getY(),h=(r[1].getX()+r[3].getX())/2,g=(r[1].getY()+r[3].getY())/2;let E=new de(h+l*u,g+l*d),A=new de(h-l*u,g-l*d);return[x,E,w,A]}isValid(r,s){return r>=0&&r<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(r){let s=Me.round(r.getX()),o=Me.round(r.getY());return this.isValid(s,o)}distancePoint(r,s){return Me.distance(r.getX(),r.getY(),s.getX(),s.getY())}distanceResultPoint(r,s){return Me.distance(r.getX(),r.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(N.truncDivision(this.nbLayers-4,8)+1)+15}}class qa{decode(r,s=null){let o=null,l=new A1(r.getBlackMatrix()),u=null,d=null;try{let w=l.detectMirror(!1);u=w.getPoints(),this.reportFoundResultPoints(s,u),d=new Ze().decode(w)}catch(w){o=w}if(d==null)try{let w=l.detectMirror(!0);u=w.getPoints(),this.reportFoundResultPoints(s,u),d=new Ze().decode(w)}catch(w){throw o??w}let h=new nt(d.getText(),d.getRawBytes(),d.getNumBits(),u,ue.AZTEC,L.currentTimeMillis()),g=d.getByteSegments();g!=null&&h.putMetadata(Et.BYTE_SEGMENTS,g);let x=d.getECLevel();return x!=null&&h.putMetadata(Et.ERROR_CORRECTION_LEVEL,x),h}reportFoundResultPoints(r,s){if(r!=null){let o=r.get(q.NEED_RESULT_POINT_CALLBACK);o!=null&&s.forEach((l,u,d)=>{o.foundPossibleResultPoint(l)})}}reset(){}}class Qy extends pn{constructor(r=500){super(new qa,r)}}class It{decode(r,s){try{return this.doDecode(r,s)}catch{if(s&&s.get(q.TRY_HARDER)===!0&&r.isRotateSupported()){const u=r.rotateCounterClockwise(),d=this.doDecode(u,s),h=d.getResultMetadata();let g=270;h!==null&&h.get(Et.ORIENTATION)===!0&&(g=g+h.get(Et.ORIENTATION)%360),d.putMetadata(Et.ORIENTATION,g);const x=d.getResultPoints();if(x!==null){const w=u.getHeight();for(let E=0;E<x.length;E++)x[E]=new de(w-x[E].getY()-1,x[E].getX())}return d}else throw new V}}reset(){}doDecode(r,s){const o=r.getWidth(),l=r.getHeight();let u=new U(o);const d=s&&s.get(q.TRY_HARDER)===!0,h=Math.max(1,l>>(d?8:5));let g;d?g=l:g=15;const x=Math.trunc(l/2);for(let w=0;w<g;w++){const E=Math.trunc((w+1)/2),A=(w&1)===0,b=x+h*(A?E:-E);if(b<0||b>=l)break;try{u=r.getBlackRow(b,u)}catch{continue}for(let D=0;D<2;D++){if(D===1&&(u.reverse(),s&&s.get(q.NEED_RESULT_POINT_CALLBACK)===!0)){const M=new Map;s.forEach((B,z)=>M.set(z,B)),M.delete(q.NEED_RESULT_POINT_CALLBACK),s=M}try{const M=this.decodeRow(b,u,s);if(D===1){M.putMetadata(Et.ORIENTATION,180);const B=M.getResultPoints();B!==null&&(B[0]=new de(o-B[0].getX()-1,B[0].getY()),B[1]=new de(o-B[1].getX()-1,B[1].getY()))}return M}catch{}}}throw new V}static recordPattern(r,s,o){const l=o.length;for(let x=0;x<l;x++)o[x]=0;const u=r.getSize();if(s>=u)throw new V;let d=!r.get(s),h=0,g=s;for(;g<u;){if(r.get(g)!==d)o[h]++;else{if(++h===l)break;o[h]=1,d=!d}g++}if(!(h===l||h===l-1&&g===u))throw new V}static recordPatternInReverse(r,s,o){let l=o.length,u=r.get(s);for(;s>0&&l>=0;)r.get(--s)!==u&&(l--,u=!u);if(l>=0)throw new V;It.recordPattern(r,s+1,o)}static patternMatchVariance(r,s,o){const l=r.length;let u=0,d=0;for(let x=0;x<l;x++)u+=r[x],d+=s[x];if(u<d)return Number.POSITIVE_INFINITY;const h=u/d;o*=h;let g=0;for(let x=0;x<l;x++){const w=r[x],E=s[x]*h,A=w>E?w-E:E-w;if(A>o)return Number.POSITIVE_INFINITY;g+=A}return g/u}}class re extends It{static findStartPattern(r){const s=r.getSize(),o=r.getNextSet(0);let l=0,u=Int32Array.from([0,0,0,0,0,0]),d=o,h=!1;const g=6;for(let x=o;x<s;x++)if(r.get(x)!==h)u[l]++;else{if(l===g-1){let w=re.MAX_AVG_VARIANCE,E=-1;for(let A=re.CODE_START_A;A<=re.CODE_START_C;A++){const b=It.patternMatchVariance(u,re.CODE_PATTERNS[A],re.MAX_INDIVIDUAL_VARIANCE);b<w&&(w=b,E=A)}if(E>=0&&r.isRange(Math.max(0,d-(x-d)/2),d,!1))return Int32Array.from([d,x,E]);d+=u[0]+u[1],u=u.slice(2,u.length-1),u[l-1]=0,u[l]=0,l--}else l++;u[l]=1,h=!h}throw new V}static decodeCode(r,s,o){It.recordPattern(r,o,s);let l=re.MAX_AVG_VARIANCE,u=-1;for(let d=0;d<re.CODE_PATTERNS.length;d++){const h=re.CODE_PATTERNS[d],g=this.patternMatchVariance(s,h,re.MAX_INDIVIDUAL_VARIANCE);g<l&&(l=g,u=d)}if(u>=0)return u;throw new V}decodeRow(r,s,o){const l=o&&o.get(q.ASSUME_GS1)===!0,u=re.findStartPattern(s),d=u[2];let h=0;const g=new Uint8Array(20);g[h++]=d;let x;switch(d){case re.CODE_START_A:x=re.CODE_CODE_A;break;case re.CODE_START_B:x=re.CODE_CODE_B;break;case re.CODE_START_C:x=re.CODE_CODE_C;break;default:throw new j}let w=!1,E=!1,A="",b=u[0],D=u[1];const M=Int32Array.from([0,0,0,0,0,0]);let B=0,z=0,$=d,ee=0,Z=!0,Oe=!1,Ee=!1;for(;!w;){const ys=E;switch(E=!1,B=z,z=re.decodeCode(s,M,D),g[h++]=z,z!==re.CODE_STOP&&(Z=!0),z!==re.CODE_STOP&&(ee++,$+=ee*z),b=D,D+=M.reduce((Iw,Tw)=>Iw+Tw,0),z){case re.CODE_START_A:case re.CODE_START_B:case re.CODE_START_C:throw new j}switch(x){case re.CODE_CODE_A:if(z<64)Ee===Oe?A+=String.fromCharCode(32+z):A+=String.fromCharCode(32+z+128),Ee=!1;else if(z<96)Ee===Oe?A+=String.fromCharCode(z-64):A+=String.fromCharCode(z+64),Ee=!1;else switch(z!==re.CODE_STOP&&(Z=!1),z){case re.CODE_FNC_1:l&&(A.length===0?A+="]C1":A+="");break;case re.CODE_FNC_2:case re.CODE_FNC_3:break;case re.CODE_FNC_4_A:!Oe&&Ee?(Oe=!0,Ee=!1):Oe&&Ee?(Oe=!1,Ee=!1):Ee=!0;break;case re.CODE_SHIFT:E=!0,x=re.CODE_CODE_B;break;case re.CODE_CODE_B:x=re.CODE_CODE_B;break;case re.CODE_CODE_C:x=re.CODE_CODE_C;break;case re.CODE_STOP:w=!0;break}break;case re.CODE_CODE_B:if(z<96)Ee===Oe?A+=String.fromCharCode(32+z):A+=String.fromCharCode(32+z+128),Ee=!1;else switch(z!==re.CODE_STOP&&(Z=!1),z){case re.CODE_FNC_1:l&&(A.length===0?A+="]C1":A+="");break;case re.CODE_FNC_2:case re.CODE_FNC_3:break;case re.CODE_FNC_4_B:!Oe&&Ee?(Oe=!0,Ee=!1):Oe&&Ee?(Oe=!1,Ee=!1):Ee=!0;break;case re.CODE_SHIFT:E=!0,x=re.CODE_CODE_A;break;case re.CODE_CODE_A:x=re.CODE_CODE_A;break;case re.CODE_CODE_C:x=re.CODE_CODE_C;break;case re.CODE_STOP:w=!0;break}break;case re.CODE_CODE_C:if(z<100)z<10&&(A+="0"),A+=z;else switch(z!==re.CODE_STOP&&(Z=!1),z){case re.CODE_FNC_1:l&&(A.length===0?A+="]C1":A+="");break;case re.CODE_CODE_A:x=re.CODE_CODE_A;break;case re.CODE_CODE_B:x=re.CODE_CODE_B;break;case re.CODE_STOP:w=!0;break}break}ys&&(x=x===re.CODE_CODE_A?re.CODE_CODE_B:re.CODE_CODE_A)}const wn=D-b;if(D=s.getNextUnset(D),!s.isRange(D,Math.min(s.getSize(),D+(D-b)/2),!1))throw new V;if($-=ee*B,$%103!==B)throw new O;const Qn=A.length;if(Qn===0)throw new V;Qn>0&&Z&&(x===re.CODE_CODE_C?A=A.substring(0,Qn-2):A=A.substring(0,Qn-1));const _n=(u[1]+u[0])/2,qe=b+wn/2,Gt=g.length,bn=new Uint8Array(Gt);for(let ys=0;ys<Gt;ys++)bn[ys]=g[ys];const xs=[new de(_n,r),new de(qe,r)];return new nt(A,bn,0,xs,ue.CODE_128,new Date().getTime())}}re.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],re.MAX_AVG_VARIANCE=.25,re.MAX_INDIVIDUAL_VARIANCE=.7,re.CODE_SHIFT=98,re.CODE_CODE_C=99,re.CODE_CODE_B=100,re.CODE_CODE_A=101,re.CODE_FNC_1=102,re.CODE_FNC_2=97,re.CODE_FNC_3=96,re.CODE_FNC_4_A=101,re.CODE_FNC_4_B=100,re.CODE_START_A=103,re.CODE_START_B=104,re.CODE_START_C=105,re.CODE_STOP=106;class Nt extends It{constructor(r=!1,s=!1){super(),this.usingCheckDigit=r,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,s,o){let l=this.counters;l.fill(0),this.decodeRowResult="";let u=Nt.findAsteriskPattern(s,l),d=s.getNextSet(u[1]),h=s.getSize(),g,x;do{Nt.recordPattern(s,d,l);let M=Nt.toNarrowWidePattern(l);if(M<0)throw new V;g=Nt.patternToChar(M),this.decodeRowResult+=g,x=d;for(let B of l)d+=B;d=s.getNextSet(d)}while(g!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let w=0;for(let M of l)w+=M;let E=d-x-w;if(d!==h&&E*2<w)throw new V;if(this.usingCheckDigit){let M=this.decodeRowResult.length-1,B=0;for(let z=0;z<M;z++)B+=Nt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(z));if(this.decodeRowResult.charAt(M)!==Nt.ALPHABET_STRING.charAt(B%43))throw new O;this.decodeRowResult=this.decodeRowResult.substring(0,M)}if(this.decodeRowResult.length===0)throw new V;let A;this.extendedMode?A=Nt.decodeExtended(this.decodeRowResult):A=this.decodeRowResult;let b=(u[1]+u[0])/2,D=x+w/2;return new nt(A,null,0,[new de(b,r),new de(D,r)],ue.CODE_39,new Date().getTime())}static findAsteriskPattern(r,s){let o=r.getSize(),l=r.getNextSet(0),u=0,d=l,h=!1,g=s.length;for(let x=l;x<o;x++)if(r.get(x)!==h)s[u]++;else{if(u===g-1){if(this.toNarrowWidePattern(s)===Nt.ASTERISK_ENCODING&&r.isRange(Math.max(0,d-Math.floor((x-d)/2)),d,!1))return[d,x];d+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,h=!h}throw new V}static toNarrowWidePattern(r){let s=r.length,o=0,l;do{let u=2147483647;for(let g of r)g<u&&g>o&&(u=g);o=u,l=0;let d=0,h=0;for(let g=0;g<s;g++){let x=r[g];x>o&&(h|=1<<s-1-g,l++,d+=x)}if(l===3){for(let g=0;g<s&&l>0;g++){let x=r[g];if(x>o&&(l--,x*2>=d))return-1}return h}}while(l>3);return-1}static patternToChar(r){for(let s=0;s<Nt.CHARACTER_ENCODINGS.length;s++)if(Nt.CHARACTER_ENCODINGS[s]===r)return Nt.ALPHABET_STRING.charAt(s);if(r===Nt.ASTERISK_ENCODING)return"*";throw new V}static decodeExtended(r){let s=r.length,o="";for(let l=0;l<s;l++){let u=r.charAt(l);if(u==="+"||u==="$"||u==="%"||u==="/"){let d=r.charAt(l+1),h="\0";switch(u){case"+":if(d>="A"&&d<="Z")h=String.fromCharCode(d.charCodeAt(0)+32);else throw new j;break;case"$":if(d>="A"&&d<="Z")h=String.fromCharCode(d.charCodeAt(0)-64);else throw new j;break;case"%":if(d>="A"&&d<="E")h=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")h=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")h=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")h=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")h="\0";else if(d==="V")h="@";else if(d==="W")h="`";else if(d==="X"||d==="Y"||d==="Z")h="";else throw new j;break;case"/":if(d>="A"&&d<="O")h=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")h=":";else throw new j;break}o+=h,l++}else o+=u}return o}}Nt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Nt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Nt.ASTERISK_ENCODING=148;class Ye extends It{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,s,o){let l=this.decodeStart(s),u=this.decodeEnd(s),d=new ae;Ye.decodeMiddle(s,l[1],u[0],d);let h=d.toString(),g=null;o!=null&&(g=o.get(q.ALLOWED_LENGTHS)),g==null&&(g=Ye.DEFAULT_ALLOWED_LENGTHS);let x=h.length,w=!1,E=0;for(let D of g){if(x===D){w=!0;break}D>E&&(E=D)}if(!w&&x>E&&(w=!0),!w)throw new j;const A=[new de(l[1],r),new de(u[0],r)];return new nt(h,null,0,A,ue.ITF,new Date().getTime())}static decodeMiddle(r,s,o,l){let u=new Int32Array(10),d=new Int32Array(5),h=new Int32Array(5);for(u.fill(0),d.fill(0),h.fill(0);s<o;){It.recordPattern(r,s,u);for(let x=0;x<5;x++){let w=2*x;d[x]=u[w],h[x]=u[w+1]}let g=Ye.decodeDigit(d);l.append(g.toString()),g=this.decodeDigit(h),l.append(g.toString()),u.forEach(function(x){s+=x})}}decodeStart(r){let s=Ye.skipWhiteSpace(r),o=Ye.findGuardPattern(r,s,Ye.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(r,o[0]),o}validateQuietZone(r,s){let o=this.narrowLineWidth*10;o=o<s?o:s;for(let l=s-1;o>0&&l>=0&&!r.get(l);l--)o--;if(o!==0)throw new V}static skipWhiteSpace(r){const s=r.getSize(),o=r.getNextSet(0);if(o===s)throw new V;return o}decodeEnd(r){r.reverse();try{let s=Ye.skipWhiteSpace(r),o;try{o=Ye.findGuardPattern(r,s,Ye.END_PATTERN_REVERSED[0])}catch(u){u instanceof V&&(o=Ye.findGuardPattern(r,s,Ye.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,o[0]);let l=o[0];return o[0]=r.getSize()-o[1],o[1]=r.getSize()-l,o}finally{r.reverse()}}static findGuardPattern(r,s,o){let l=o.length,u=new Int32Array(l),d=r.getSize(),h=!1,g=0,x=s;u.fill(0);for(let w=s;w<d;w++)if(r.get(w)!==h)u[g]++;else{if(g===l-1){if(It.patternMatchVariance(u,o,Ye.MAX_INDIVIDUAL_VARIANCE)<Ye.MAX_AVG_VARIANCE)return[x,w];x+=u[0]+u[1],L.arraycopy(u,2,u,0,g-1),u[g-1]=0,u[g]=0,g--}else g++;u[g]=1,h=!h}throw new V}static decodeDigit(r){let s=Ye.MAX_AVG_VARIANCE,o=-1,l=Ye.PATTERNS.length;for(let u=0;u<l;u++){let d=Ye.PATTERNS[u],h=It.patternMatchVariance(r,d,Ye.MAX_INDIVIDUAL_VARIANCE);h<s?(s=h,o=u):h===s&&(o=-1)}if(o>=0)return o%10;throw new V}}Ye.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ye.MAX_AVG_VARIANCE=.38,Ye.MAX_INDIVIDUAL_VARIANCE=.5,Ye.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ye.START_PATTERN=Int32Array.from([1,1,1,1]),Ye.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class pt extends It{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let s=!1,o,l=0,u=Int32Array.from([0,0,0]);for(;!s;){u=Int32Array.from([0,0,0]),o=pt.findGuardPattern(r,l,!1,this.START_END_PATTERN,u);let d=o[0];l=o[1];let h=d-(l-d);h>=0&&(s=r.isRange(h,d,!1))}return o}static checkChecksum(r){return pt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let o=parseInt(r.charAt(s-1),10);return pt.getStandardUPCEANChecksum(r.substring(0,s-1))===o}static getStandardUPCEANChecksum(r){let s=r.length,o=0;for(let l=s-1;l>=0;l-=2){let u=r.charAt(l).charCodeAt(0)-48;if(u<0||u>9)throw new j;o+=u}o*=3;for(let l=s-2;l>=0;l-=2){let u=r.charAt(l).charCodeAt(0)-48;if(u<0||u>9)throw new j;o+=u}return(1e3-o)%10}static decodeEnd(r,s){return pt.findGuardPattern(r,s,!1,pt.START_END_PATTERN,new Int32Array(pt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,s,o,l){return this.findGuardPattern(r,s,o,l,new Int32Array(l.length))}static findGuardPattern(r,s,o,l,u){let d=r.getSize();s=o?r.getNextUnset(s):r.getNextSet(s);let h=0,g=s,x=l.length,w=o;for(let E=s;E<d;E++)if(r.get(E)!==w)u[h]++;else{if(h===x-1){if(It.patternMatchVariance(u,l,pt.MAX_INDIVIDUAL_VARIANCE)<pt.MAX_AVG_VARIANCE)return Int32Array.from([g,E]);g+=u[0]+u[1];let A=u.slice(2,u.length-1);for(let b=0;b<h-1;b++)u[b]=A[b];u[h-1]=0,u[h]=0,h--}else h++;u[h]=1,w=!w}throw new V}static decodeDigit(r,s,o,l){this.recordPattern(r,o,s);let u=this.MAX_AVG_VARIANCE,d=-1,h=l.length;for(let g=0;g<h;g++){let x=l[g],w=It.patternMatchVariance(s,x,pt.MAX_INDIVIDUAL_VARIANCE);w<u&&(u=w,d=g)}if(d>=0)return d;throw new V}}pt.MAX_AVG_VARIANCE=.48,pt.MAX_INDIVIDUAL_VARIANCE=.7,pt.START_END_PATTERN=Int32Array.from([1,1,1]),pt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),pt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),pt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class fo{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,o){let l=this.decodeRowStringBuffer,u=this.decodeMiddle(s,o,l),d=l.toString(),h=fo.parseExtensionString(d),g=[new de((o[0]+o[1])/2,r),new de(u,r)],x=new nt(d,null,0,g,ue.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&x.putAllMetadata(h),x}decodeMiddle(r,s,o){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=r.getSize(),d=s[1],h=0;for(let x=0;x<5&&d<u;x++){let w=pt.decodeDigit(r,l,d,pt.L_AND_G_PATTERNS);o+=String.fromCharCode(48+w%10);for(let E of l)d+=E;w>=10&&(h|=1<<4-x),x!==4&&(d=r.getNextSet(d),d=r.getNextUnset(d))}if(o.length!==5)throw new V;let g=this.determineCheckDigit(h);if(fo.extensionChecksum(o.toString())!==g)throw new V;return d}static extensionChecksum(r){let s=r.length,o=0;for(let l=s-2;l>=0;l-=2)o+=r.charAt(l).charCodeAt(0)-48;o*=3;for(let l=s-1;l>=0;l-=2)o+=r.charAt(l).charCodeAt(0)-48;return o*=3,o%10}determineCheckDigit(r){for(let s=0;s<10;s++)if(r===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new V}static parseExtensionString(r){if(r.length!==5)return null;let s=fo.parseExtension5String(r);return s==null?null:new Map([[Et.SUGGESTED_PRICE,s]])}static parseExtension5String(r){let s;switch(r.charAt(0)){case"0":s="£";break;case"5":s="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let o=parseInt(r.substring(1)),l=(o/100).toString(),u=o%100,d=u<10?"0"+u:u.toString();return s+l+"."+d}}class cu{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,o){let l=this.decodeRowStringBuffer,u=this.decodeMiddle(s,o,l),d=l.toString(),h=cu.parseExtensionString(d),g=[new de((o[0]+o[1])/2,r),new de(u,r)],x=new nt(d,null,0,g,ue.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&x.putAllMetadata(h),x}decodeMiddle(r,s,o){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=r.getSize(),d=s[1],h=0;for(let g=0;g<2&&d<u;g++){let x=pt.decodeDigit(r,l,d,pt.L_AND_G_PATTERNS);o+=String.fromCharCode(48+x%10);for(let w of l)d+=w;x>=10&&(h|=1<<1-g),g!==1&&(d=r.getNextSet(d),d=r.getNextUnset(d))}if(o.length!==2)throw new V;if(parseInt(o.toString())%4!==h)throw new V;return d}static parseExtensionString(r){return r.length!==2?null:new Map([[Et.ISSUE_NUMBER,parseInt(r)]])}}class I1{static decodeRow(r,s,o){let l=pt.findGuardPattern(s,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new fo().decodeRow(r,s,l)}catch{return new cu().decodeRow(r,s,l)}}}I1.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Fe extends pt{constructor(){super(),this.decodeRowStringBuffer="",Fe.L_AND_G_PATTERNS=Fe.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let s=Fe.L_PATTERNS[r-10],o=new Int32Array(s.length);for(let l=0;l<s.length;l++)o[l]=s[s.length-l-1];Fe.L_AND_G_PATTERNS[r]=o}}decodeRow(r,s,o){let l=Fe.findStartGuardPattern(s),u=o==null?null:o.get(q.NEED_RESULT_POINT_CALLBACK);if(u!=null){const Z=new de((l[0]+l[1])/2,r);u.foundPossibleResultPoint(Z)}let d=this.decodeMiddle(s,l,this.decodeRowStringBuffer),h=d.rowOffset,g=d.resultString;if(u!=null){const Z=new de(h,r);u.foundPossibleResultPoint(Z)}let x=this.decodeEnd(s,h);if(u!=null){const Z=new de((x[0]+x[1])/2,r);u.foundPossibleResultPoint(Z)}let w=x[1],E=w+(w-x[0]);if(E>=s.getSize()||!s.isRange(w,E,!1))throw new V;let A=g.toString();if(A.length<8)throw new j;if(!Fe.checkChecksum(A))throw new O;let b=(l[1]+l[0])/2,D=(x[1]+x[0])/2,M=this.getBarcodeFormat(),B=[new de(b,r),new de(D,r)],z=new nt(A,null,0,B,M,new Date().getTime()),$=0;try{let Z=I1.decodeRow(r,s,x[1]);z.putMetadata(Et.UPC_EAN_EXTENSION,Z.getText()),z.putAllMetadata(Z.getResultMetadata()),z.addResultPoints(Z.getResultPoints()),$=Z.getText().length}catch{}let ee=o==null?null:o.get(q.ALLOWED_EAN_EXTENSIONS);if(ee!=null){let Z=!1;for(let Oe in ee)if($.toString()===Oe){Z=!0;break}if(!Z)throw new V}return z}decodeEnd(r,s){return Fe.findGuardPattern(r,s,!1,Fe.START_END_PATTERN,new Int32Array(Fe.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return Fe.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let o=parseInt(r.charAt(s-1),10);return Fe.getStandardUPCEANChecksum(r.substring(0,s-1))===o}static getStandardUPCEANChecksum(r){let s=r.length,o=0;for(let l=s-1;l>=0;l-=2){let u=r.charAt(l).charCodeAt(0)-48;if(u<0||u>9)throw new j;o+=u}o*=3;for(let l=s-2;l>=0;l-=2){let u=r.charAt(l).charCodeAt(0)-48;if(u<0||u>9)throw new j;o+=u}return(1e3-o)%10}}class Ni extends Fe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,o){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=r.getSize(),d=s[1],h=0;for(let x=0;x<6&&d<u;x++){let w=Fe.decodeDigit(r,l,d,Fe.L_AND_G_PATTERNS);o+=String.fromCharCode(48+w%10);for(let E of l)d+=E;w>=10&&(h|=1<<5-x)}o=Ni.determineFirstDigit(o,h),d=Fe.findGuardPattern(r,d,!0,Fe.MIDDLE_PATTERN,new Int32Array(Fe.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<6&&d<u;x++){let w=Fe.decodeDigit(r,l,d,Fe.L_PATTERNS);o+=String.fromCharCode(48+w);for(let E of l)d+=E}return{rowOffset:d,resultString:o}}getBarcodeFormat(){return ue.EAN_13}static determineFirstDigit(r,s){for(let o=0;o<10;o++)if(s===this.FIRST_DIGIT_ENCODINGS[o])return r=String.fromCharCode(48+o)+r,r;throw new V}}Ni.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class T1 extends Fe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,o){const l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=r.getSize(),d=s[1];for(let g=0;g<4&&d<u;g++){let x=Fe.decodeDigit(r,l,d,Fe.L_PATTERNS);o+=String.fromCharCode(48+x);for(let w of l)d+=w}d=Fe.findGuardPattern(r,d,!0,Fe.MIDDLE_PATTERN,new Int32Array(Fe.MIDDLE_PATTERN.length).fill(0))[1];for(let g=0;g<4&&d<u;g++){let x=Fe.decodeDigit(r,l,d,Fe.L_PATTERNS);o+=String.fromCharCode(48+x);for(let w of l)d+=w}return{rowOffset:d,resultString:o}}getBarcodeFormat(){return ue.EAN_8}}class b1 extends Fe{constructor(){super(...arguments),this.ean13Reader=new Ni}getBarcodeFormat(){return ue.UPC_A}decode(r,s){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,s,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,s,o))}decodeMiddle(r,s,o){return this.ean13Reader.decodeMiddle(r,s,o)}maybeReturnResult(r){let s=r.getText();if(s.charAt(0)==="0"){let o=new nt(s.substring(1),null,null,r.getResultPoints(),ue.UPC_A);return r.getResultMetadata()!=null&&o.putAllMetadata(r.getResultMetadata()),o}else throw new V}reset(){this.ean13Reader.reset()}}class Zn extends Fe{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,s,o){const l=this.decodeMiddleCounters.map(x=>x);l[0]=0,l[1]=0,l[2]=0,l[3]=0;const u=r.getSize();let d=s[1],h=0;for(let x=0;x<6&&d<u;x++){const w=Zn.decodeDigit(r,l,d,Zn.L_AND_G_PATTERNS);o+=String.fromCharCode(48+w%10);for(let E of l)d+=E;w>=10&&(h|=1<<5-x)}let g=Zn.determineNumSysAndCheckDigit(o,h);return{rowOffset:d,resultString:g}}decodeEnd(r,s){return Zn.findGuardPatternWithoutCounters(r,s,!0,Zn.MIDDLE_END_PATTERN)}checkChecksum(r){return Fe.checkChecksum(Zn.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,s){for(let o=0;o<=1;o++)for(let l=0;l<10;l++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][l]){let u=String.fromCharCode(48+o),d=String.fromCharCode(48+l);return u+r+d}throw V.getNotFoundInstance()}getBarcodeFormat(){return ue.UPC_E}static convertUPCEtoUPCA(r){const s=r.slice(1,7).split("").map(u=>u.charCodeAt(0)),o=new ae;o.append(r.charAt(0));let l=s[5];switch(l){case 0:case 1:case 2:o.appendChars(s,0,2),o.append(l),o.append("0000"),o.appendChars(s,2,3);break;case 3:o.appendChars(s,0,3),o.append("00000"),o.appendChars(s,3,2);break;case 4:o.appendChars(s,0,4),o.append("00000"),o.append(s[4]);break;default:o.appendChars(s,0,5),o.append("0000"),o.append(l);break}return r.length>=8&&o.append(r.charAt(7)),o.toString()}}Zn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Zn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class uu extends It{constructor(r){super();let s=r==null?null:r.get(q.POSSIBLE_FORMATS),o=[];i(s)?(o.push(new Ni),o.push(new b1),o.push(new T1),o.push(new Zn)):(s.indexOf(ue.EAN_13)>-1&&o.push(new Ni),s.indexOf(ue.UPC_A)>-1&&o.push(new b1),s.indexOf(ue.EAN_8)>-1&&o.push(new T1),s.indexOf(ue.UPC_E)>-1&&o.push(new Zn)),this.readers=o}decodeRow(r,s,o){for(let l of this.readers)try{const u=l.decodeRow(r,s,o),d=u.getBarcodeFormat()===ue.EAN_13&&u.getText().charAt(0)==="0",h=o==null?null:o.get(q.POSSIBLE_FORMATS),g=h==null||h.includes(ue.UPC_A);if(d&&g){const x=u.getRawBytes(),w=new nt(u.getText().substring(1),x,x?x.length:null,u.getResultPoints(),ue.UPC_A);return w.putAllMetadata(u.getResultMetadata()),w}return u}catch{}throw new V}reset(){for(let r of this.readers)r.reset()}}class Qt extends It{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,s){for(let o=0;o<s.length;o++)if(It.patternMatchVariance(r,s[o],Qt.MAX_INDIVIDUAL_VARIANCE)<Qt.MAX_AVG_VARIANCE)return o;throw new V}static count(r){return Me.sum(new Int32Array(r))}static increment(r,s){let o=0,l=s[0];for(let u=1;u<r.length;u++)s[u]>l&&(l=s[u],o=u);r[o]++}static decrement(r,s){let o=0,l=s[0];for(let u=1;u<r.length;u++)s[u]<l&&(l=s[u],o=u);r[o]--}static isFinderPattern(r){let s=r[0]+r[1],o=s+r[2]+r[3],l=s/o;if(l>=Qt.MIN_FINDER_PATTERN_RATIO&&l<=Qt.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let h of r)h>d&&(d=h),h<u&&(u=h);return d<10*u}return!1}}Qt.MAX_AVG_VARIANCE=.2,Qt.MAX_INDIVIDUAL_VARIANCE=.45,Qt.MIN_FINDER_PATTERN_RATIO=9.5/12,Qt.MAX_FINDER_PATTERN_RATIO=12.5/14;class us{constructor(r,s){this.value=r,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof us))return!1;const s=r;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Za{constructor(r,s,o,l,u){this.value=r,this.startEnd=s,this.value=r,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new de(o,u)),this.resultPoints.push(new de(l,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof Za))return!1;const s=r;return this.value===s.value}hashCode(){return this.value}}class fr{constructor(){}static getRSSvalue(r,s,o){let l=0;for(let g of r)l+=g;let u=0,d=0,h=r.length;for(let g=0;g<h-1;g++){let x;for(x=1,d|=1<<g;x<r[g];x++,d&=~(1<<g)){let w=fr.combins(l-x-1,h-g-2);if(o&&d===0&&l-x-(h-g-1)>=h-g-1&&(w-=fr.combins(l-x-(h-g),h-g-2)),h-g-1>1){let E=0;for(let A=l-x-(h-g-2);A>s;A--)E+=fr.combins(l-x-A-1,h-g-3);w-=E*(h-1-g)}else l-x>s&&w--;u+=w}l-=x}return u}static combins(r,s){let o,l;r-s>s?(l=s,o=r-s):(l=r-s,o=s);let u=1,d=1;for(let h=r;h>o;h--)u*=h,d<=l&&(u/=d,d++);for(;d<=l;)u/=d,d++;return u}}class $y{static buildBitArray(r){let s=r.length*2-1;r[r.length-1].getRightChar()==null&&(s-=1);let o=12*s,l=new U(o),u=0,h=r[0].getRightChar().getValue();for(let g=11;g>=0;--g)h&1<<g&&l.set(u),u++;for(let g=1;g<r.length;++g){let x=r[g],w=x.getLeftChar().getValue();for(let E=11;E>=0;--E)w&1<<E&&l.set(u),u++;if(x.getRightChar()!=null){let E=x.getRightChar().getValue();for(let A=11;A>=0;--A)E&1<<A&&l.set(u),u++}}return l}}class Ri{constructor(r,s){s?this.decodedInformation=null:(this.finished=r,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class du{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class mn extends du{constructor(r,s){super(r),this.value=s}getValue(){return this.value}isFNC1(){return this.value===mn.FNC1}}mn.FNC1="$";class Oi extends du{constructor(r,s,o){super(r),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Bn extends du{constructor(r,s,o){if(super(r),s<0||s>10||o<0||o>10)throw new j;this.firstDigit=s,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Bn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Bn.FNC1}isAnyFNC1(){return this.firstDigit===Bn.FNC1||this.secondDigit===Bn.FNC1}}Bn.FNC1=10;class le{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new V;let s=r.substring(0,2);for(let u of le.TWO_DIGIT_DATA_LENGTH)if(u[0]===s)return u[1]===le.VARIABLE_LENGTH?le.processVariableAI(2,u[2],r):le.processFixedAI(2,u[1],r);if(r.length<3)throw new V;let o=r.substring(0,3);for(let u of le.THREE_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===le.VARIABLE_LENGTH?le.processVariableAI(3,u[2],r):le.processFixedAI(3,u[1],r);for(let u of le.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===le.VARIABLE_LENGTH?le.processVariableAI(4,u[2],r):le.processFixedAI(4,u[1],r);if(r.length<4)throw new V;let l=r.substring(0,4);for(let u of le.FOUR_DIGIT_DATA_LENGTH)if(u[0]===l)return u[1]===le.VARIABLE_LENGTH?le.processVariableAI(4,u[2],r):le.processFixedAI(4,u[1],r);throw new V}static processFixedAI(r,s,o){if(o.length<r)throw new V;let l=o.substring(0,r);if(o.length<r+s)throw new V;let u=o.substring(r,r+s),d=o.substring(r+s),h="("+l+")"+u,g=le.parseFieldsInGeneralPurpose(d);return g==null?h:h+g}static processVariableAI(r,s,o){let l=o.substring(0,r),u;o.length<r+s?u=o.length:u=r+s;let d=o.substring(r,u),h=o.substring(u),g="("+l+")"+d,x=le.parseFieldsInGeneralPurpose(h);return x==null?g:g+x}}le.VARIABLE_LENGTH=[],le.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",le.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",le.VARIABLE_LENGTH,20],["22",le.VARIABLE_LENGTH,29],["30",le.VARIABLE_LENGTH,8],["37",le.VARIABLE_LENGTH,8],["90",le.VARIABLE_LENGTH,30],["91",le.VARIABLE_LENGTH,30],["92",le.VARIABLE_LENGTH,30],["93",le.VARIABLE_LENGTH,30],["94",le.VARIABLE_LENGTH,30],["95",le.VARIABLE_LENGTH,30],["96",le.VARIABLE_LENGTH,30],["97",le.VARIABLE_LENGTH,3],["98",le.VARIABLE_LENGTH,30],["99",le.VARIABLE_LENGTH,30]],le.THREE_DIGIT_DATA_LENGTH=[["240",le.VARIABLE_LENGTH,30],["241",le.VARIABLE_LENGTH,30],["242",le.VARIABLE_LENGTH,6],["250",le.VARIABLE_LENGTH,30],["251",le.VARIABLE_LENGTH,30],["253",le.VARIABLE_LENGTH,17],["254",le.VARIABLE_LENGTH,20],["400",le.VARIABLE_LENGTH,30],["401",le.VARIABLE_LENGTH,30],["402",17],["403",le.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",le.VARIABLE_LENGTH,20],["421",le.VARIABLE_LENGTH,15],["422",3],["423",le.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],le.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",le.VARIABLE_LENGTH,15],["391",le.VARIABLE_LENGTH,18],["392",le.VARIABLE_LENGTH,15],["393",le.VARIABLE_LENGTH,18],["703",le.VARIABLE_LENGTH,30]],le.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",le.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",le.VARIABLE_LENGTH,20],["8003",le.VARIABLE_LENGTH,30],["8004",le.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",le.VARIABLE_LENGTH,30],["8008",le.VARIABLE_LENGTH,12],["8018",18],["8020",le.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",le.VARIABLE_LENGTH,70],["8200",le.VARIABLE_LENGTH,70]];class ds{constructor(r){this.buffer=new ae,this.information=r}decodeAllCodes(r,s){let o=s,l=null;do{let u=this.decodeGeneralPurposeField(o,l),d=le.parseFieldsInGeneralPurpose(u.getNewString());if(d!=null&&r.append(d),u.isRemaining()?l=""+u.getRemainingValue():l=null,o===u.getNewPosition())break;o=u.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let s=r;s<r+3;++s)if(this.information.get(s))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(r,4);return u===0?new Bn(this.information.getSize(),Bn.FNC1,Bn.FNC1):new Bn(this.information.getSize(),u-1,Bn.FNC1)}let s=this.extractNumericValueFromBitArray(r,7),o=(s-8)/11,l=(s-8)%11;return new Bn(r+7,o,l)}extractNumericValueFromBitArray(r,s){return ds.extractNumericValueFromBitArray(this.information,r,s)}static extractNumericValueFromBitArray(r,s,o){let l=0;for(let u=0;u<o;++u)r.get(s+u)&&(l|=1<<o-u-1);return l}decodeGeneralPurposeField(r,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(r);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new Oi(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new Oi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,s;do{let o=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),r=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),r=s.isFinished()):(s=this.parseNumericBlock(),r=s.isFinished()),!(o!==this.current.getPosition())&&!r)break}while(!r);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let s;return r.isSecondDigitFNC1()?s=new Oi(this.current.getPosition(),this.buffer.toString()):s=new Oi(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new Ri(!0,s)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let s=new Oi(this.current.getPosition(),this.buffer.toString());return new Ri(!0,s)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ri(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Oi(this.current.getPosition(),this.buffer.toString());return new Ri(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ri(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Oi(this.current.getPosition(),this.buffer.toString());return new Ri(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ri(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,7);if(o>=64&&o<116)return!0;if(r+8>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,8);return l>=232&&l<253}decodeIsoIec646(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new mn(r+5,mn.FNC1);if(s>=5&&s<15)return new mn(r+5,"0"+(s-5));let o=this.extractNumericValueFromBitArray(r,7);if(o>=64&&o<90)return new mn(r+7,""+(o+1));if(o>=90&&o<116)return new mn(r+7,""+(o+7));let l=this.extractNumericValueFromBitArray(r,8),u;switch(l){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new j}return new mn(r+8,u)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,6);return o>=16&&o<63}decodeAlphanumeric(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new mn(r+5,mn.FNC1);if(s>=5&&s<15)return new mn(r+5,"0"+(s-5));let o=this.extractNumericValueFromBitArray(r,6);if(o>=32&&o<58)return new mn(r+6,""+(o+33));let l;switch(o){case 58:l="*";break;case 59:l=",";break;case 60:l="-";break;case 61:l=".";break;case 62:l="/";break;default:throw new dr("Decoding invalid alphanumeric value: "+o)}return new mn(r+6,l)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<5&&s+r<this.information.getSize();++s)if(s===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+s))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let s=r;s<r+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<4&&s+r<this.information.getSize();++s)if(this.information.get(r+s))return!1;return!0}}class fu{constructor(r){this.information=r,this.generalDecoder=new ds(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class xn extends fu{constructor(r){super(r)}encodeCompressedGtin(r,s){r.append("(01)");let o=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,s,o)}encodeCompressedGtinWithoutAI(r,s,o){for(let l=0;l<4;++l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*l,10);u/100===0&&r.append("0"),u/10===0&&r.append("0"),r.append(u)}xn.appendCheckDigit(r,o)}static appendCheckDigit(r,s){let o=0;for(let l=0;l<13;l++){let u=r.charAt(l+s).charCodeAt(0)-48;o+=l&1?u:3*u}o=10-o%10,o===10&&(o=0),r.append(o)}}xn.GTIN_SIZE=40;class fs extends xn{constructor(r){super(r)}parseInformation(){let r=new ae;r.append("(01)");let s=r.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(fs.HEADER_SIZE,4);return r.append(o),this.encodeCompressedGtinWithoutAI(r,fs.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(r,fs.HEADER_SIZE+44)}}fs.HEADER_SIZE=4;class Qa extends fu{constructor(r){super(r)}parseInformation(){let r=new ae;return this.getGeneralDecoder().decodeAllCodes(r,Qa.HEADER_SIZE)}}Qa.HEADER_SIZE=5;class $a extends xn{constructor(r){super(r)}encodeCompressedWeight(r,s,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(s,o);this.addWeightCode(r,l);let u=this.checkWeight(l),d=1e5;for(let h=0;h<5;++h)u/d===0&&r.append("0"),d/=10;r.append(u)}}class hr extends $a{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=hr.HEADER_SIZE+$a.GTIN_SIZE+hr.WEIGHT_SIZE)throw new V;let r=new ae;return this.encodeCompressedGtin(r,hr.HEADER_SIZE),this.encodeCompressedWeight(r,hr.HEADER_SIZE+$a.GTIN_SIZE,hr.WEIGHT_SIZE),r.toString()}}hr.HEADER_SIZE=5,hr.WEIGHT_SIZE=15;class Jy extends hr{constructor(r){super(r)}addWeightCode(r,s){r.append("(3103)")}checkWeight(r){return r}}class ew extends hr{constructor(r){super(r)}addWeightCode(r,s){s<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class gr extends xn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<gr.HEADER_SIZE+xn.GTIN_SIZE)throw new V;let r=new ae;this.encodeCompressedGtin(r,gr.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(gr.HEADER_SIZE+xn.GTIN_SIZE,gr.LAST_DIGIT_SIZE);r.append("(392"),r.append(s),r.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(gr.HEADER_SIZE+xn.GTIN_SIZE+gr.LAST_DIGIT_SIZE,null);return r.append(o.getNewString()),r.toString()}}gr.HEADER_SIZE=8,gr.LAST_DIGIT_SIZE=2;class an extends xn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<an.HEADER_SIZE+xn.GTIN_SIZE)throw new V;let r=new ae;this.encodeCompressedGtin(r,an.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(an.HEADER_SIZE+xn.GTIN_SIZE,an.LAST_DIGIT_SIZE);r.append("(393"),r.append(s),r.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray(an.HEADER_SIZE+xn.GTIN_SIZE+an.LAST_DIGIT_SIZE,an.FIRST_THREE_DIGITS_SIZE);o/100==0&&r.append("0"),o/10==0&&r.append("0"),r.append(o);let l=this.getGeneralDecoder().decodeGeneralPurposeField(an.HEADER_SIZE+xn.GTIN_SIZE+an.LAST_DIGIT_SIZE+an.FIRST_THREE_DIGITS_SIZE,null);return r.append(l.getNewString()),r.toString()}}an.HEADER_SIZE=8,an.LAST_DIGIT_SIZE=2,an.FIRST_THREE_DIGITS_SIZE=10;class ct extends $a{constructor(r,s,o){super(r),this.dateCode=o,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=ct.HEADER_SIZE+ct.GTIN_SIZE+ct.WEIGHT_SIZE+ct.DATE_SIZE)throw new V;let r=new ae;return this.encodeCompressedGtin(r,ct.HEADER_SIZE),this.encodeCompressedWeight(r,ct.HEADER_SIZE+ct.GTIN_SIZE,ct.WEIGHT_SIZE),this.encodeCompressedDate(r,ct.HEADER_SIZE+ct.GTIN_SIZE+ct.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,s){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(s,ct.DATE_SIZE);if(o==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let l=o%32;o/=32;let u=o%12+1;o/=12;let d=o;d/10==0&&r.append("0"),r.append(d),u/10==0&&r.append("0"),r.append(u),l/10==0&&r.append("0"),r.append(l)}addWeightCode(r,s){r.append("("),r.append(this.firstAIdigits),r.append(s/1e5),r.append(")")}checkWeight(r){return r%1e5}}ct.HEADER_SIZE=8,ct.WEIGHT_SIZE=20,ct.DATE_SIZE=16;function N1(C){try{if(C.get(1))return new fs(C);if(!C.get(2))return new Qa(C);switch(ds.extractNumericValueFromBitArray(C,1,4)){case 4:return new Jy(C);case 5:return new ew(C)}switch(ds.extractNumericValueFromBitArray(C,1,5)){case 12:return new gr(C);case 13:return new an(C)}switch(ds.extractNumericValueFromBitArray(C,1,7)){case 56:return new ct(C,"310","11");case 57:return new ct(C,"320","11");case 58:return new ct(C,"310","13");case 59:return new ct(C,"320","13");case 60:return new ct(C,"310","15");case 61:return new ct(C,"320","15");case 62:return new ct(C,"310","17");case 63:return new ct(C,"320","17")}}catch(r){throw console.log(r),new dr("unknown decoder: "+C)}}class Xr{constructor(r,s,o,l){this.leftchar=r,this.rightchar=s,this.finderpattern=o,this.maybeLast=l}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,s){return r instanceof Xr?Xr.equalsOrNull(r.leftchar,s.leftchar)&&Xr.equalsOrNull(r.rightchar,s.rightchar)&&Xr.equalsOrNull(r.finderpattern,s.finderpattern):!1}static equalsOrNull(r,s){return r===null?s===null:Xr.equals(r,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class hu{constructor(r,s,o){this.pairs=r,this.rowNumber=s,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,s){return r instanceof hu?this.checkEqualitity(r,s)&&r.wasReversed===s.wasReversed:!1}checkEqualitity(r,s){if(!r||!s)return;let o;return r.forEach((l,u)=>{s.forEach(d=>{l.getLeftChar().getValue()===d.getLeftChar().getValue()&&l.getRightChar().getValue()===d.getRightChar().getValue()&&l.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(o=!0)})}),o}}class Y extends Qt{constructor(r){super(...arguments),this.pairs=new Array(Y.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,s,o){this.pairs.length=0,this.startFromEven=!1;try{return Y.constructResult(this.decodeRow2pairs(r,s))}catch(l){this.verbose&&console.log(l)}return this.pairs.length=0,this.startFromEven=!0,Y.constructResult(this.decodeRow2pairs(r,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,s){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,r))}catch(u){if(u instanceof V){if(!this.pairs.length)throw new V;o=!0}}if(this.checkChecksum())return this.pairs;let l;if(this.rows.length?l=!0:l=!1,this.storeRow(r,!1),l){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new V}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return r&&(this.rows=this.rows.reverse()),s}checkRows(r,s){for(let o=s;o<this.rows.length;o++){let l=this.rows[o];this.pairs.length=0;for(let d of r)this.pairs.push(d.getPairs());if(this.pairs.push(l.getPairs()),!Y.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(r);u.push(l);try{return this.checkRows(u,o+1)}catch(d){this.verbose&&console.log(d)}}throw new V}static isValidSequence(r){for(let s of Y.FINDER_PATTERN_SEQUENCES){if(r.length>s.length)continue;let o=!0;for(let l=0;l<r.length;l++)if(r[l].getFinderPattern().getValue()!=s[l]){o=!1;break}if(o)return!0}return!1}storeRow(r,s){let o=0,l=!1,u=!1;for(;o<this.rows.length;){let d=this.rows[o];if(d.getRowNumber()>r){u=d.isEquivalent(this.pairs);break}l=d.isEquivalent(this.pairs),o++}u||l||Y.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new hu(this.pairs,r,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,s){for(let o of s)if(o.getPairs().length!==r.length){for(let l of o.getPairs())for(let u of r)if(Xr.equals(l,u))break}}static isPartialRow(r,s){for(let o of s){let l=!0;for(let u of r){let d=!1;for(let h of o.getPairs())if(u.equals(h)){d=!0;break}if(!d){l=!1;break}}if(l)return!0}return!1}getRows(){return this.rows}static constructResult(r){let s=$y.buildBitArray(r),l=N1(s).parseInformation(),u=r[0].getFinderPattern().getResultPoints(),d=r[r.length-1].getFinderPattern().getResultPoints(),h=[u[0],u[1],d[0],d[1]];return new nt(l,null,null,h,ue.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),s=r.getLeftChar(),o=r.getRightChar();if(o==null)return!1;let l=o.getChecksumPortion(),u=2;for(let h=1;h<this.pairs.size();++h){let g=this.pairs.get(h);l+=g.getLeftChar().getChecksumPortion(),u++;let x=g.getRightChar();x!=null&&(l+=x.getChecksumPortion(),u++)}return l%=211,211*(u-4)+l==s.getValue()}static getNextSecondBar(r,s){let o;return r.get(s)?(o=r.getNextUnset(s),o=r.getNextSet(o)):(o=r.getNextSet(s),o=r.getNextUnset(o)),o}retrieveNextPair(r,s,o){let l=s.length%2==0;this.startFromEven&&(l=!l);let u,d=!0,h=-1;do this.findNextPair(r,s,h),u=this.parseFoundFinderPattern(r,o,l),u==null?h=Y.getNextSecondBar(r,this.startEnd[0]):d=!1;while(d);let g=this.decodeDataCharacter(r,u,l,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new V;let x;try{x=this.decodeDataCharacter(r,u,l,!1)}catch(w){x=null,this.verbose&&console.log(w)}return new Xr(g,x,u,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,s,o){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=r.getSize(),d;o>=0?d=o:this.isEmptyPair(s)?d=0:d=s[s.length-1].getFinderPattern().getStartEnd()[1];let h=s.length%2!=0;this.startFromEven&&(h=!h);let g=!1;for(;d<u&&(g=!r.get(d),!!g);)d++;let x=0,w=d;for(let E=d;E<u;E++)if(r.get(E)!=g)l[x]++;else{if(x==3){if(h&&Y.reverseCounters(l),Y.isFinderPattern(l)){this.startEnd[0]=w,this.startEnd[1]=E;return}h&&Y.reverseCounters(l),w+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,x--}else x++;l[x]=1,g=!g}throw new V}static reverseCounters(r){let s=r.length;for(let o=0;o<s/2;++o){let l=r[o];r[o]=r[s-o-1],r[s-o-1]=l}}parseFoundFinderPattern(r,s,o){let l,u,d;if(o){let x=this.startEnd[0]-1;for(;x>=0&&!r.get(x);)x--;x++,l=this.startEnd[0]-x,u=x,d=this.startEnd[1]}else u=this.startEnd[0],d=r.getNextUnset(this.startEnd[1]+1),l=d-this.startEnd[1];let h=this.getDecodeFinderCounters();L.arraycopy(h,0,h,1,h.length-1),h[0]=l;let g;try{g=this.parseFinderValue(h,Y.FINDER_PATTERNS)}catch{return null}return new Za(g,[u,d],u,d,s)}decodeDataCharacter(r,s,o,l){let u=this.getDataCharacterCounters();for(let qe=0;qe<u.length;qe++)u[qe]=0;if(l)Y.recordPatternInReverse(r,s.getStartEnd()[0],u);else{Y.recordPattern(r,s.getStartEnd()[1],u);for(let qe=0,Gt=u.length-1;qe<Gt;qe++,Gt--){let bn=u[qe];u[qe]=u[Gt],u[Gt]=bn}}let d=17,h=Me.sum(new Int32Array(u))/d,g=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(h-g)/g>.3)throw new V;let x=this.getOddCounts(),w=this.getEvenCounts(),E=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors();for(let qe=0;qe<u.length;qe++){let Gt=1*u[qe]/h,bn=Gt+.5;if(bn<1){if(Gt<.3)throw new V;bn=1}else if(bn>8){if(Gt>8.7)throw new V;bn=8}let xs=qe/2;qe&1?(w[xs]=bn,A[xs]=Gt-bn):(x[xs]=bn,E[xs]=Gt-bn)}this.adjustOddEvenCounts(d);let b=4*s.getValue()+(o?0:2)+(l?0:1)-1,D=0,M=0;for(let qe=x.length-1;qe>=0;qe--){if(Y.isNotA1left(s,o,l)){let Gt=Y.WEIGHTS[b][2*qe];M+=x[qe]*Gt}D+=x[qe]}let B=0;for(let qe=w.length-1;qe>=0;qe--)if(Y.isNotA1left(s,o,l)){let Gt=Y.WEIGHTS[b][2*qe+1];B+=w[qe]*Gt}let z=M+B;if(D&1||D>13||D<4)throw new V;let $=(13-D)/2,ee=Y.SYMBOL_WIDEST[$],Z=9-ee,Oe=fr.getRSSvalue(x,ee,!0),Ee=fr.getRSSvalue(w,Z,!1),wn=Y.EVEN_TOTAL_SUBSET[$],Qn=Y.GSUM[$],_n=Oe*wn+Ee+Qn;return new us(_n,z)}static isNotA1left(r,s,o){return!(r.getValue()==0&&s&&o)}adjustOddEvenCounts(r){let s=Me.sum(new Int32Array(this.getOddCounts())),o=Me.sum(new Int32Array(this.getEvenCounts())),l=!1,u=!1;s>13?u=!0:s<4&&(l=!0);let d=!1,h=!1;o>13?h=!0:o<4&&(d=!0);let g=s+o-r,x=(s&1)==1,w=(o&1)==0;if(g==1)if(x){if(w)throw new V;u=!0}else{if(!w)throw new V;h=!0}else if(g==-1)if(x){if(w)throw new V;l=!0}else{if(!w)throw new V;d=!0}else if(g==0){if(x){if(!w)throw new V;s<o?(l=!0,h=!0):(u=!0,d=!0)}else if(w)throw new V}else throw new V;if(l){if(u)throw new V;Y.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&Y.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(h)throw new V;Y.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&Y.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Y.SYMBOL_WIDEST=[7,5,4,3,1],Y.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Y.GSUM=[0,348,1388,2948,3988],Y.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Y.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Y.FINDER_PAT_A=0,Y.FINDER_PAT_B=1,Y.FINDER_PAT_C=2,Y.FINDER_PAT_D=3,Y.FINDER_PAT_E=4,Y.FINDER_PAT_F=5,Y.FINDER_PATTERN_SEQUENCES=[[Y.FINDER_PAT_A,Y.FINDER_PAT_A],[Y.FINDER_PAT_A,Y.FINDER_PAT_B,Y.FINDER_PAT_B],[Y.FINDER_PAT_A,Y.FINDER_PAT_C,Y.FINDER_PAT_B,Y.FINDER_PAT_D],[Y.FINDER_PAT_A,Y.FINDER_PAT_E,Y.FINDER_PAT_B,Y.FINDER_PAT_D,Y.FINDER_PAT_C],[Y.FINDER_PAT_A,Y.FINDER_PAT_E,Y.FINDER_PAT_B,Y.FINDER_PAT_D,Y.FINDER_PAT_D,Y.FINDER_PAT_F],[Y.FINDER_PAT_A,Y.FINDER_PAT_E,Y.FINDER_PAT_B,Y.FINDER_PAT_D,Y.FINDER_PAT_E,Y.FINDER_PAT_F,Y.FINDER_PAT_F],[Y.FINDER_PAT_A,Y.FINDER_PAT_A,Y.FINDER_PAT_B,Y.FINDER_PAT_B,Y.FINDER_PAT_C,Y.FINDER_PAT_C,Y.FINDER_PAT_D,Y.FINDER_PAT_D],[Y.FINDER_PAT_A,Y.FINDER_PAT_A,Y.FINDER_PAT_B,Y.FINDER_PAT_B,Y.FINDER_PAT_C,Y.FINDER_PAT_C,Y.FINDER_PAT_D,Y.FINDER_PAT_E,Y.FINDER_PAT_E],[Y.FINDER_PAT_A,Y.FINDER_PAT_A,Y.FINDER_PAT_B,Y.FINDER_PAT_B,Y.FINDER_PAT_C,Y.FINDER_PAT_C,Y.FINDER_PAT_D,Y.FINDER_PAT_E,Y.FINDER_PAT_F,Y.FINDER_PAT_F],[Y.FINDER_PAT_A,Y.FINDER_PAT_A,Y.FINDER_PAT_B,Y.FINDER_PAT_B,Y.FINDER_PAT_C,Y.FINDER_PAT_D,Y.FINDER_PAT_D,Y.FINDER_PAT_E,Y.FINDER_PAT_E,Y.FINDER_PAT_F,Y.FINDER_PAT_F]],Y.MAX_PAIRS=11;class tw extends us{constructor(r,s,o){super(r,s),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class mt extends Qt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,s,o){const l=this.decodePair(s,!1,r,o);mt.addOrTally(this.possibleLeftPairs,l),s.reverse();let u=this.decodePair(s,!0,r,o);mt.addOrTally(this.possibleRightPairs,u),s.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&mt.checkChecksum(d,h))return mt.constructResult(d,h)}throw new V}static addOrTally(r,s){if(s==null)return;let o=!1;for(let l of r)if(l.getValue()===s.getValue()){l.incrementCount(),o=!0;break}o||r.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,s){let o=4537077*r.getValue()+s.getValue(),l=new String(o).toString(),u=new ae;for(let x=13-l.length;x>0;x--)u.append("0");u.append(l);let d=0;for(let x=0;x<13;x++){let w=u.charAt(x).charCodeAt(0)-48;d+=x&1?w:3*w}d=10-d%10,d===10&&(d=0),u.append(d.toString());let h=r.getFinderPattern().getResultPoints(),g=s.getFinderPattern().getResultPoints();return new nt(u.toString(),null,0,[h[0],h[1],g[0],g[1]],ue.RSS_14,new Date().getTime())}static checkChecksum(r,s){let o=(r.getChecksumPortion()+16*s.getChecksumPortion())%79,l=9*r.getFinderPattern().getValue()+s.getFinderPattern().getValue();return l>72&&l--,l>8&&l--,o===l}decodePair(r,s,o,l){try{let u=this.findFinderPattern(r,s),d=this.parseFoundFinderPattern(r,o,s,u),h=l==null?null:l.get(q.NEED_RESULT_POINT_CALLBACK);if(h!=null){let w=(u[0]+u[1])/2;s&&(w=r.getSize()-1-w),h.foundPossibleResultPoint(new de(w,o))}let g=this.decodeDataCharacter(r,d,!0),x=this.decodeDataCharacter(r,d,!1);return new tw(1597*g.getValue()+x.getValue(),g.getChecksumPortion()+4*x.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(r,s,o){let l=this.getDataCharacterCounters();for(let B=0;B<l.length;B++)l[B]=0;if(o)It.recordPatternInReverse(r,s.getStartEnd()[0],l);else{It.recordPattern(r,s.getStartEnd()[1]+1,l);for(let B=0,z=l.length-1;B<z;B++,z--){let $=l[B];l[B]=l[z],l[z]=$}}let u=o?16:15,d=Me.sum(new Int32Array(l))/u,h=this.getOddCounts(),g=this.getEvenCounts(),x=this.getOddRoundingErrors(),w=this.getEvenRoundingErrors();for(let B=0;B<l.length;B++){let z=l[B]/d,$=Math.floor(z+.5);$<1?$=1:$>8&&($=8);let ee=Math.floor(B/2);B&1?(g[ee]=$,w[ee]=z-$):(h[ee]=$,x[ee]=z-$)}this.adjustOddEvenCounts(o,u);let E=0,A=0;for(let B=h.length-1;B>=0;B--)A*=9,A+=h[B],E+=h[B];let b=0,D=0;for(let B=g.length-1;B>=0;B--)b*=9,b+=g[B],D+=g[B];let M=A+3*b;if(o){if(E&1||E>12||E<4)throw new V;let B=(12-E)/2,z=mt.OUTSIDE_ODD_WIDEST[B],$=9-z,ee=fr.getRSSvalue(h,z,!1),Z=fr.getRSSvalue(g,$,!0),Oe=mt.OUTSIDE_EVEN_TOTAL_SUBSET[B],Ee=mt.OUTSIDE_GSUM[B];return new us(ee*Oe+Z+Ee,M)}else{if(D&1||D>10||D<4)throw new V;let B=(10-D)/2,z=mt.INSIDE_ODD_WIDEST[B],$=9-z,ee=fr.getRSSvalue(h,z,!0),Z=fr.getRSSvalue(g,$,!1),Oe=mt.INSIDE_ODD_TOTAL_SUBSET[B],Ee=mt.INSIDE_GSUM[B];return new us(Z*Oe+ee+Ee,M)}}findFinderPattern(r,s){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let l=r.getSize(),u=!1,d=0;for(;d<l&&(u=!r.get(d),s!==u);)d++;let h=0,g=d;for(let x=d;x<l;x++)if(r.get(x)!==u)o[h]++;else{if(h===3){if(Qt.isFinderPattern(o))return[g,x];g+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,h--}else h++;o[h]=1,u=!u}throw new V}parseFoundFinderPattern(r,s,o,l){let u=r.get(l[0]),d=l[0]-1;for(;d>=0&&u!==r.get(d);)d--;d++;const h=l[0]-d,g=this.getDecodeFinderCounters(),x=new Int32Array(g.length);L.arraycopy(g,0,x,1,g.length-1),x[0]=h;const w=this.parseFinderValue(x,mt.FINDER_PATTERNS);let E=d,A=l[1];return o&&(E=r.getSize()-1-E,A=r.getSize()-1-A),new Za(w,[d,l[1]],E,A,s)}adjustOddEvenCounts(r,s){let o=Me.sum(new Int32Array(this.getOddCounts())),l=Me.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1,h=!1,g=!1;r?(o>12?d=!0:o<4&&(u=!0),l>12?g=!0:l<4&&(h=!0)):(o>11?d=!0:o<5&&(u=!0),l>10?g=!0:l<4&&(h=!0));let x=o+l-s,w=(o&1)===(r?1:0),E=(l&1)===1;if(x===1)if(w){if(E)throw new V;d=!0}else{if(!E)throw new V;g=!0}else if(x===-1)if(w){if(E)throw new V;u=!0}else{if(!E)throw new V;h=!0}else if(x===0){if(w){if(!E)throw new V;o<l?(u=!0,g=!0):(d=!0,h=!0)}else if(E)throw new V}else throw new V;if(u){if(d)throw new V;Qt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&Qt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(g)throw new V;Qt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&Qt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}mt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],mt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],mt.OUTSIDE_GSUM=[0,161,961,2015,2715],mt.INSIDE_GSUM=[0,336,1036,1516],mt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],mt.INSIDE_ODD_WIDEST=[2,4,6,8],mt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class hs extends It{constructor(r,s){super(),this.readers=[],this.verbose=s===!0;const o=r?r.get(q.POSSIBLE_FORMATS):null,l=r&&r.get(q.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(ue.EAN_13)||o.includes(ue.UPC_A)||o.includes(ue.EAN_8)||o.includes(ue.UPC_E))&&this.readers.push(new uu(r)),o.includes(ue.CODE_39)&&this.readers.push(new Nt(l)),o.includes(ue.CODE_128)&&this.readers.push(new re),o.includes(ue.ITF)&&this.readers.push(new Ye),o.includes(ue.RSS_14)&&this.readers.push(new mt),o.includes(ue.RSS_EXPANDED)&&this.readers.push(new Y(this.verbose))):(this.readers.push(new uu(r)),this.readers.push(new Nt),this.readers.push(new uu(r)),this.readers.push(new re),this.readers.push(new Ye),this.readers.push(new mt),this.readers.push(new Y(this.verbose)))}decodeRow(r,s,o){for(let l=0;l<this.readers.length;l++)try{return this.readers[l].decodeRow(r,s,o)}catch{}throw new V}reset(){this.readers.forEach(r=>r.reset())}}class nw extends pn{constructor(r=500,s){super(new hs(s),r,s)}}class We{constructor(r,s,o){this.ecCodewords=r,this.ecBlocks=[s],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ue{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class De{constructor(r,s,o,l,u,d){this.versionNumber=r,this.symbolSizeRows=s,this.symbolSizeColumns=o,this.dataRegionSizeRows=l,this.dataRegionSizeColumns=u,this.ecBlocks=d;let h=0;const g=d.getECCodewords(),x=d.getECBlocks();for(let w of x)h+=w.getCount()*(w.getDataCodewords()+g);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,s){if(r&1||s&1)throw new j;for(let o of De.VERSIONS)if(o.symbolSizeRows===r&&o.symbolSizeColumns===s)return o;throw new j}toString(){return""+this.versionNumber}static buildVersions(){return[new De(1,10,10,8,8,new We(5,new Ue(1,3))),new De(2,12,12,10,10,new We(7,new Ue(1,5))),new De(3,14,14,12,12,new We(10,new Ue(1,8))),new De(4,16,16,14,14,new We(12,new Ue(1,12))),new De(5,18,18,16,16,new We(14,new Ue(1,18))),new De(6,20,20,18,18,new We(18,new Ue(1,22))),new De(7,22,22,20,20,new We(20,new Ue(1,30))),new De(8,24,24,22,22,new We(24,new Ue(1,36))),new De(9,26,26,24,24,new We(28,new Ue(1,44))),new De(10,32,32,14,14,new We(36,new Ue(1,62))),new De(11,36,36,16,16,new We(42,new Ue(1,86))),new De(12,40,40,18,18,new We(48,new Ue(1,114))),new De(13,44,44,20,20,new We(56,new Ue(1,144))),new De(14,48,48,22,22,new We(68,new Ue(1,174))),new De(15,52,52,24,24,new We(42,new Ue(2,102))),new De(16,64,64,14,14,new We(56,new Ue(2,140))),new De(17,72,72,16,16,new We(36,new Ue(4,92))),new De(18,80,80,18,18,new We(48,new Ue(4,114))),new De(19,88,88,20,20,new We(56,new Ue(4,144))),new De(20,96,96,22,22,new We(68,new Ue(4,174))),new De(21,104,104,24,24,new We(56,new Ue(6,136))),new De(22,120,120,18,18,new We(68,new Ue(6,175))),new De(23,132,132,20,20,new We(62,new Ue(8,163))),new De(24,144,144,22,22,new We(62,new Ue(8,156),new Ue(2,155))),new De(25,8,18,6,16,new We(7,new Ue(1,5))),new De(26,8,32,6,14,new We(11,new Ue(1,10))),new De(27,12,26,10,24,new We(14,new Ue(1,16))),new De(28,12,36,10,16,new We(18,new Ue(1,22))),new De(29,16,36,14,16,new We(24,new Ue(1,32))),new De(30,16,48,14,22,new We(28,new Ue(1,49)))]}}De.VERSIONS=De.buildVersions();class gu{constructor(r){const s=r.getHeight();if(s<8||s>144||s&1)throw new j;this.version=gu.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new ge(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const s=r.getHeight(),o=r.getWidth();return De.getVersionForDimensions(s,o)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let s=0,o=4,l=0;const u=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let h=!1,g=!1,x=!1,w=!1;do if(o===u&&l===0&&!h)r[s++]=this.readCorner1(u,d)&255,o-=2,l+=2,h=!0;else if(o===u-2&&l===0&&d&3&&!g)r[s++]=this.readCorner2(u,d)&255,o-=2,l+=2,g=!0;else if(o===u+4&&l===2&&!(d&7)&&!x)r[s++]=this.readCorner3(u,d)&255,o-=2,l+=2,x=!0;else if(o===u-2&&l===0&&(d&7)===4&&!w)r[s++]=this.readCorner4(u,d)&255,o-=2,l+=2,w=!0;else{do o<u&&l>=0&&!this.readMappingMatrix.get(l,o)&&(r[s++]=this.readUtah(o,l,u,d)&255),o-=2,l+=2;while(o>=0&&l<d);o+=1,l+=3;do o>=0&&l<d&&!this.readMappingMatrix.get(l,o)&&(r[s++]=this.readUtah(o,l,u,d)&255),o+=2,l-=2;while(o<u&&l>=0);o+=3,l+=1}while(o<u||l<d);if(s!==this.version.getTotalCodewords())throw new j;return r}readModule(r,s,o,l){return r<0&&(r+=o,s+=4-(o+4&7)),s<0&&(s+=l,r+=4-(l+4&7)),this.readMappingMatrix.set(s,r),this.mappingBitMatrix.get(s,r)}readUtah(r,s,o,l){let u=0;return this.readModule(r-2,s-2,o,l)&&(u|=1),u<<=1,this.readModule(r-2,s-1,o,l)&&(u|=1),u<<=1,this.readModule(r-1,s-2,o,l)&&(u|=1),u<<=1,this.readModule(r-1,s-1,o,l)&&(u|=1),u<<=1,this.readModule(r-1,s,o,l)&&(u|=1),u<<=1,this.readModule(r,s-2,o,l)&&(u|=1),u<<=1,this.readModule(r,s-1,o,l)&&(u|=1),u<<=1,this.readModule(r,s,o,l)&&(u|=1),u}readCorner1(r,s){let o=0;return this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,1,r,s)&&(o|=1),o<<=1,this.readModule(r-1,2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o<<=1,this.readModule(2,s-1,r,s)&&(o|=1),o<<=1,this.readModule(3,s-1,r,s)&&(o|=1),o}readCorner2(r,s){let o=0;return this.readModule(r-3,0,r,s)&&(o|=1),o<<=1,this.readModule(r-2,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(0,s-4,r,s)&&(o|=1),o<<=1,this.readModule(0,s-3,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o}readCorner3(r,s){let o=0;return this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,s-1,r,s)&&(o|=1),o<<=1,this.readModule(0,s-3,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-3,r,s)&&(o|=1),o<<=1,this.readModule(1,s-2,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o}readCorner4(r,s){let o=0;return this.readModule(r-3,0,r,s)&&(o|=1),o<<=1,this.readModule(r-2,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o<<=1,this.readModule(2,s-1,r,s)&&(o|=1),o<<=1,this.readModule(3,s-1,r,s)&&(o|=1),o}extractDataRegion(r){const s=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(r.getHeight()!==s)throw new _("Dimension of bitMatrix must match the version size");const l=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),d=s/l|0,h=o/u|0,g=d*l,x=h*u,w=new ge(x,g);for(let E=0;E<d;++E){const A=E*l;for(let b=0;b<h;++b){const D=b*u;for(let M=0;M<l;++M){const B=E*(l+2)+1+M,z=A+M;for(let $=0;$<u;++$){const ee=b*(u+2)+1+$;if(r.get(ee,B)){const Z=D+$;w.set(Z,z)}}}}}return w}}class pu{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s){const o=s.getECBlocks();let l=0;const u=o.getECBlocks();for(let M of u)l+=M.getCount();const d=new Array(l);let h=0;for(let M of u)for(let B=0;B<M.getCount();B++){const z=M.getDataCodewords(),$=o.getECCodewords()+z;d[h++]=new pu(z,new Uint8Array($))}const x=d[0].codewords.length-o.getECCodewords(),w=x-1;let E=0;for(let M=0;M<w;M++)for(let B=0;B<h;B++)d[B].codewords[M]=r[E++];const A=s.getVersionNumber()===24,b=A?8:h;for(let M=0;M<b;M++)d[M].codewords[x-1]=r[E++];const D=d[0].codewords.length;for(let M=x;M<D;M++)for(let B=0;B<h;B++){const z=A?(B+8)%h:B,$=A&&z>7?M-1:M;d[z].codewords[$]=r[E++]}if(E!==r.length)throw new _;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class mu{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new _(""+r);let s=0,o=this.bitOffset,l=this.byteOffset;const u=this.bytes;if(o>0){const d=8-o,h=r<d?r:d,g=d-h,x=255>>8-h<<g;s=(u[l]&x)>>g,r-=h,o+=h,o===8&&(o=0,l++)}if(r>0){for(;r>=8;)s=s<<8|u[l]&255,l++,r-=8;if(r>0){const d=8-r,h=255>>d<<d;s=s<<r|(u[l]&h)>>d,o+=r}}return this.bitOffset=o,this.byteOffset=l,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Rt;(function(C){C[C.PAD_ENCODE=0]="PAD_ENCODE",C[C.ASCII_ENCODE=1]="ASCII_ENCODE",C[C.C40_ENCODE=2]="C40_ENCODE",C[C.TEXT_ENCODE=3]="TEXT_ENCODE",C[C.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",C[C.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",C[C.BASE256_ENCODE=6]="BASE256_ENCODE"})(Rt||(Rt={}));class Yr{static decode(r){const s=new mu(r),o=new ae,l=new ae,u=new Array;let d=Rt.ASCII_ENCODE;do if(d===Rt.ASCII_ENCODE)d=this.decodeAsciiSegment(s,o,l);else{switch(d){case Rt.C40_ENCODE:this.decodeC40Segment(s,o);break;case Rt.TEXT_ENCODE:this.decodeTextSegment(s,o);break;case Rt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,o);break;case Rt.EDIFACT_ENCODE:this.decodeEdifactSegment(s,o);break;case Rt.BASE256_ENCODE:this.decodeBase256Segment(s,o,u);break;default:throw new j}d=Rt.ASCII_ENCODE}while(d!==Rt.PAD_ENCODE&&s.available()>0);return l.length()>0&&o.append(l.toString()),new oe(r,o.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(r,s,o){let l=!1;do{let u=r.readBits(8);if(u===0)throw new j;if(u<=128)return l&&(u+=128),s.append(String.fromCharCode(u-1)),Rt.ASCII_ENCODE;if(u===129)return Rt.PAD_ENCODE;if(u<=229){const d=u-130;d<10&&s.append("0"),s.append(""+d)}else switch(u){case 230:return Rt.C40_ENCODE;case 231:return Rt.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:l=!0;break;case 236:s.append("[)>05"),o.insert(0,"");break;case 237:s.append("[)>06"),o.insert(0,"");break;case 238:return Rt.ANSIX12_ENCODE;case 239:return Rt.TEXT_ENCODE;case 240:return Rt.EDIFACT_ENCODE;case 241:break;default:if(u!==254||r.available()!==0)throw new j;break}}while(r.available()>0);return Rt.ASCII_ENCODE}static decodeC40Segment(r,s){let o=!1;const l=[];let u=0;do{if(r.available()===8)return;const d=r.readBits(8);if(d===254)return;this.parseTwoBytes(d,r.readBits(8),l);for(let h=0;h<3;h++){const g=l[h];switch(u){case 0:if(g<3)u=g+1;else if(g<this.C40_BASIC_SET_CHARS.length){const x=this.C40_BASIC_SET_CHARS[g];o?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):s.append(x)}else throw new j;break;case 1:o?(s.append(String.fromCharCode(g+128)),o=!1):s.append(String.fromCharCode(g)),u=0;break;case 2:if(g<this.C40_SHIFT2_SET_CHARS.length){const x=this.C40_SHIFT2_SET_CHARS[g];o?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):s.append(x)}else switch(g){case 27:s.append("");break;case 30:o=!0;break;default:throw new j}u=0;break;case 3:o?(s.append(String.fromCharCode(g+224)),o=!1):s.append(String.fromCharCode(g+96)),u=0;break;default:throw new j}}}while(r.available()>0)}static decodeTextSegment(r,s){let o=!1,l=[],u=0;do{if(r.available()===8)return;const d=r.readBits(8);if(d===254)return;this.parseTwoBytes(d,r.readBits(8),l);for(let h=0;h<3;h++){const g=l[h];switch(u){case 0:if(g<3)u=g+1;else if(g<this.TEXT_BASIC_SET_CHARS.length){const x=this.TEXT_BASIC_SET_CHARS[g];o?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):s.append(x)}else throw new j;break;case 1:o?(s.append(String.fromCharCode(g+128)),o=!1):s.append(String.fromCharCode(g)),u=0;break;case 2:if(g<this.TEXT_SHIFT2_SET_CHARS.length){const x=this.TEXT_SHIFT2_SET_CHARS[g];o?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):s.append(x)}else switch(g){case 27:s.append("");break;case 30:o=!0;break;default:throw new j}u=0;break;case 3:if(g<this.TEXT_SHIFT3_SET_CHARS.length){const x=this.TEXT_SHIFT3_SET_CHARS[g];o?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):s.append(x),u=0}else throw new j;break;default:throw new j}}}while(r.available()>0)}static decodeAnsiX12Segment(r,s){const o=[];do{if(r.available()===8)return;const l=r.readBits(8);if(l===254)return;this.parseTwoBytes(l,r.readBits(8),o);for(let u=0;u<3;u++){const d=o[u];switch(d){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(d<14)s.append(String.fromCharCode(d+44));else if(d<40)s.append(String.fromCharCode(d+51));else throw new j;break}}}while(r.available()>0)}static parseTwoBytes(r,s,o){let l=(r<<8)+s-1,u=Math.floor(l/1600);o[0]=u,l-=u*1600,u=Math.floor(l/40),o[1]=u,o[2]=l-u*40}static decodeEdifactSegment(r,s){do{if(r.available()<=16)return;for(let o=0;o<4;o++){let l=r.readBits(6);if(l===31){const u=8-r.getBitOffset();u!==8&&r.readBits(u);return}l&32||(l|=64),s.append(String.fromCharCode(l))}}while(r.available()>0)}static decodeBase256Segment(r,s,o){let l=1+r.getByteOffset();const u=this.unrandomize255State(r.readBits(8),l++);let d;if(u===0?d=r.available()/8|0:u<250?d=u:d=250*(u-249)+this.unrandomize255State(r.readBits(8),l++),d<0)throw new j;const h=new Uint8Array(d);for(let g=0;g<d;g++){if(r.available()<8)throw new j;h[g]=this.unrandomize255State(r.readBits(8),l++)}o.push(h);try{s.append(je.decode(h,H.ISO88591))}catch(g){throw new dr("Platform does not support required encoding: "+g.message)}}static unrandomize255State(r,s){const o=149*s%255+1,l=r-o;return l>=0?l:l+256}}Yr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Yr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Yr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Yr.TEXT_SHIFT2_SET_CHARS=Yr.C40_SHIFT2_SET_CHARS,Yr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class rw{constructor(){this.rsDecoder=new uo(ve.DATA_MATRIX_FIELD_256)}decode(r){const s=new gu(r),o=s.getVersion(),l=s.readCodewords(),u=pu.getDataBlocks(l,o);let d=0;for(let x of u)d+=x.getNumDataCodewords();const h=new Uint8Array(d),g=u.length;for(let x=0;x<g;x++){const w=u[x],E=w.getCodewords(),A=w.getNumDataCodewords();this.correctErrors(E,A);for(let b=0;b<A;b++)h[b*g+x]=E[b]}return Yr.decode(h)}correctErrors(r,s){const o=new Int32Array(r);try{this.rsDecoder.decode(o,r.length-s)}catch{throw new O}for(let l=0;l<s;l++)r[l]=o[l]}}class St{constructor(r){this.image=r,this.rectangleDetector=new Ar(this.image)}detect(){const r=this.rectangleDetector.detect();let s=this.detectSolid1(r);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new V;s=this.shiftToModuleCenter(s);const o=s[0],l=s[1],u=s[2],d=s[3];let h=this.transitionsBetween(o,d)+1,g=this.transitionsBetween(u,d)+1;(h&1)===1&&(h+=1),(g&1)===1&&(g+=1),4*h<7*g&&4*g<7*h&&(h=g=Math.max(h,g));let x=St.sampleGrid(this.image,o,l,u,d,h,g);return new Ka(x,[o,l,u,d])}static shiftPoint(r,s,o){let l=(s.getX()-r.getX())/(o+1),u=(s.getY()-r.getY())/(o+1);return new de(r.getX()+l,r.getY()+u)}static moveAway(r,s,o){let l=r.getX(),u=r.getY();return l<s?l-=1:l+=1,u<o?u-=1:u+=1,new de(l,u)}detectSolid1(r){let s=r[0],o=r[1],l=r[3],u=r[2],d=this.transitionsBetween(s,o),h=this.transitionsBetween(o,l),g=this.transitionsBetween(l,u),x=this.transitionsBetween(u,s),w=d,E=[u,s,o,l];return w>h&&(w=h,E[0]=s,E[1]=o,E[2]=l,E[3]=u),w>g&&(w=g,E[0]=o,E[1]=l,E[2]=u,E[3]=s),w>x&&(E[0]=l,E[1]=u,E[2]=s,E[3]=o),E}detectSolid2(r){let s=r[0],o=r[1],l=r[2],u=r[3],d=this.transitionsBetween(s,u),h=St.shiftPoint(o,l,(d+1)*4),g=St.shiftPoint(l,o,(d+1)*4),x=this.transitionsBetween(h,s),w=this.transitionsBetween(g,u);return x<w?(r[0]=s,r[1]=o,r[2]=l,r[3]=u):(r[0]=o,r[1]=l,r[2]=u,r[3]=s),r}correctTopRight(r){let s=r[0],o=r[1],l=r[2],u=r[3],d=this.transitionsBetween(s,u),h=this.transitionsBetween(o,u),g=St.shiftPoint(s,o,(h+1)*4),x=St.shiftPoint(l,o,(d+1)*4);d=this.transitionsBetween(g,u),h=this.transitionsBetween(x,u);let w=new de(u.getX()+(l.getX()-o.getX())/(d+1),u.getY()+(l.getY()-o.getY())/(d+1)),E=new de(u.getX()+(s.getX()-o.getX())/(h+1),u.getY()+(s.getY()-o.getY())/(h+1));if(!this.isValid(w))return this.isValid(E)?E:null;if(!this.isValid(E))return w;let A=this.transitionsBetween(g,w)+this.transitionsBetween(x,w),b=this.transitionsBetween(g,E)+this.transitionsBetween(x,E);return A>b?w:E}shiftToModuleCenter(r){let s=r[0],o=r[1],l=r[2],u=r[3],d=this.transitionsBetween(s,u)+1,h=this.transitionsBetween(l,u)+1,g=St.shiftPoint(s,o,h*4),x=St.shiftPoint(l,o,d*4);d=this.transitionsBetween(g,u)+1,h=this.transitionsBetween(x,u)+1,(d&1)===1&&(d+=1),(h&1)===1&&(h+=1);let w=(s.getX()+o.getX()+l.getX()+u.getX())/4,E=(s.getY()+o.getY()+l.getY()+u.getY())/4;s=St.moveAway(s,w,E),o=St.moveAway(o,w,E),l=St.moveAway(l,w,E),u=St.moveAway(u,w,E);let A,b;return g=St.shiftPoint(s,o,h*4),g=St.shiftPoint(g,u,d*4),A=St.shiftPoint(o,s,h*4),A=St.shiftPoint(A,l,d*4),x=St.shiftPoint(l,u,h*4),x=St.shiftPoint(x,o,d*4),b=St.shiftPoint(u,l,h*4),b=St.shiftPoint(b,s,d*4),[g,A,x,b]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,s,o,l,u,d,h){return Gr.getInstance().sampleGrid(r,d,h,.5,.5,d-.5,.5,d-.5,h-.5,.5,h-.5,s.getX(),s.getY(),u.getX(),u.getY(),l.getX(),l.getY(),o.getX(),o.getY())}transitionsBetween(r,s){let o=Math.trunc(r.getX()),l=Math.trunc(r.getY()),u=Math.trunc(s.getX()),d=Math.trunc(s.getY()),h=Math.abs(d-l)>Math.abs(u-o);if(h){let M=o;o=l,l=M,M=u,u=d,d=M}let g=Math.abs(u-o),x=Math.abs(d-l),w=-g/2,E=l<d?1:-1,A=o<u?1:-1,b=0,D=this.image.get(h?l:o,h?o:l);for(let M=o,B=l;M!==u;M+=A){let z=this.image.get(h?B:M,h?M:B);if(z!==D&&(b++,D=z),w+=x,w>0){if(B===d)break;B+=E,w-=g}}return b}}class Kr{constructor(){this.decoder=new rw}decode(r,s=null){let o,l;if(s!=null&&s.has(q.PURE_BARCODE)){const x=Kr.extractPureBits(r.getBlackMatrix());o=this.decoder.decode(x),l=Kr.NO_POINTS}else{const x=new St(r.getBlackMatrix()).detect();o=this.decoder.decode(x.getBits()),l=x.getPoints()}const u=o.getRawBytes(),d=new nt(o.getText(),u,8*u.length,l,ue.DATA_MATRIX,L.currentTimeMillis()),h=o.getByteSegments();h!=null&&d.putMetadata(Et.BYTE_SEGMENTS,h);const g=o.getECLevel();return g!=null&&d.putMetadata(Et.ERROR_CORRECTION_LEVEL,g),d}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),o=r.getBottomRightOnBit();if(s==null||o==null)throw new V;const l=this.moduleSize(s,r);let u=s[1];const d=o[1];let h=s[0];const x=(o[0]-h+1)/l,w=(d-u+1)/l;if(x<=0||w<=0)throw new V;const E=l/2;u+=E,h+=E;const A=new ge(x,w);for(let b=0;b<w;b++){const D=u+b*l;for(let M=0;M<x;M++)r.get(h+M*l,D)&&A.set(M,b)}return A}static moduleSize(r,s){const o=s.getWidth();let l=r[0];const u=r[1];for(;l<o&&s.get(l,u);)l++;if(l===o)throw new V;const d=l-r[0];if(d===0)throw new V;return d}}Kr.NO_POINTS=[];class iw extends pn{constructor(r=500){super(new Kr,r)}}var gs;(function(C){C[C.L=0]="L",C[C.M=1]="M",C[C.Q=2]="Q",C[C.H=3]="H"})(gs||(gs={}));class Qe{constructor(r,s,o){this.value=r,this.stringValue=s,this.bits=o,Qe.FOR_BITS.set(o,this),Qe.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return Qe.L;case"M":return Qe.M;case"Q":return Qe.Q;case"H":return Qe.H;default:throw new v(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof Qe))return!1;const s=r;return this.value===s.value}static forBits(r){if(r<0||r>=Qe.FOR_BITS.size)throw new _;return Qe.FOR_BITS.get(r)}}Qe.FOR_BITS=new Map,Qe.FOR_VALUE=new Map,Qe.L=new Qe(gs.L,"L",1),Qe.M=new Qe(gs.M,"M",0),Qe.Q=new Qe(gs.Q,"Q",3),Qe.H=new Qe(gs.H,"H",2);class $t{constructor(r){this.errorCorrectionLevel=Qe.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,s){return N.bitCount(r^s)}static decodeFormatInformation(r,s){const o=$t.doDecodeFormatInformation(r,s);return o!==null?o:$t.doDecodeFormatInformation(r^$t.FORMAT_INFO_MASK_QR,s^$t.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,s){let o=Number.MAX_SAFE_INTEGER,l=0;for(const u of $t.FORMAT_INFO_DECODE_LOOKUP){const d=u[0];if(d===r||d===s)return new $t(u[1]);let h=$t.numBitsDiffering(r,d);h<o&&(l=u[1],o=h),r!==s&&(h=$t.numBitsDiffering(s,d),h<o&&(l=u[1],o=h))}return o<=3?new $t(l):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof $t))return!1;const s=r;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}$t.FORMAT_INFO_MASK_QR=21522,$t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class F{constructor(r,...s){this.ecCodewordsPerBlock=r,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const s=this.ecBlocks;for(const o of s)r+=o.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class T{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class he{constructor(r,s,...o){this.versionNumber=r,this.alignmentPatternCenters=s,this.ecBlocks=o;let l=0;const u=o[0].getECCodewordsPerBlock(),d=o[0].getECBlocks();for(const h of d)l+=h.getCount()*(h.getDataCodewords()+u);this.totalCodewords=l}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new j;try{return this.getVersionForNumber((r-17)/4)}catch{throw new j}}static getVersionForNumber(r){if(r<1||r>40)throw new _;return he.VERSIONS[r-1]}static decodeVersionInformation(r){let s=Number.MAX_SAFE_INTEGER,o=0;for(let l=0;l<he.VERSION_DECODE_INFO.length;l++){const u=he.VERSION_DECODE_INFO[l];if(u===r)return he.getVersionForNumber(l+7);const d=$t.numBitsDiffering(r,u);d<s&&(o=l+7,s=d)}return s<=3?he.getVersionForNumber(o):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),s=new ge(r);s.setRegion(0,0,9,9),s.setRegion(r-8,0,8,9),s.setRegion(0,r-8,9,8);const o=this.alignmentPatternCenters.length;for(let l=0;l<o;l++){const u=this.alignmentPatternCenters[l]-2;for(let d=0;d<o;d++)l===0&&(d===0||d===o-1)||l===o-1&&d===0||s.setRegion(this.alignmentPatternCenters[d]-2,u,5,5)}return s.setRegion(6,9,1,r-17),s.setRegion(9,6,r-17,1),this.versionNumber>6&&(s.setRegion(r-11,0,3,6),s.setRegion(0,r-11,6,3)),s}toString(){return""+this.versionNumber}}he.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),he.VERSIONS=[new he(1,new Int32Array(0),new F(7,new T(1,19)),new F(10,new T(1,16)),new F(13,new T(1,13)),new F(17,new T(1,9))),new he(2,Int32Array.from([6,18]),new F(10,new T(1,34)),new F(16,new T(1,28)),new F(22,new T(1,22)),new F(28,new T(1,16))),new he(3,Int32Array.from([6,22]),new F(15,new T(1,55)),new F(26,new T(1,44)),new F(18,new T(2,17)),new F(22,new T(2,13))),new he(4,Int32Array.from([6,26]),new F(20,new T(1,80)),new F(18,new T(2,32)),new F(26,new T(2,24)),new F(16,new T(4,9))),new he(5,Int32Array.from([6,30]),new F(26,new T(1,108)),new F(24,new T(2,43)),new F(18,new T(2,15),new T(2,16)),new F(22,new T(2,11),new T(2,12))),new he(6,Int32Array.from([6,34]),new F(18,new T(2,68)),new F(16,new T(4,27)),new F(24,new T(4,19)),new F(28,new T(4,15))),new he(7,Int32Array.from([6,22,38]),new F(20,new T(2,78)),new F(18,new T(4,31)),new F(18,new T(2,14),new T(4,15)),new F(26,new T(4,13),new T(1,14))),new he(8,Int32Array.from([6,24,42]),new F(24,new T(2,97)),new F(22,new T(2,38),new T(2,39)),new F(22,new T(4,18),new T(2,19)),new F(26,new T(4,14),new T(2,15))),new he(9,Int32Array.from([6,26,46]),new F(30,new T(2,116)),new F(22,new T(3,36),new T(2,37)),new F(20,new T(4,16),new T(4,17)),new F(24,new T(4,12),new T(4,13))),new he(10,Int32Array.from([6,28,50]),new F(18,new T(2,68),new T(2,69)),new F(26,new T(4,43),new T(1,44)),new F(24,new T(6,19),new T(2,20)),new F(28,new T(6,15),new T(2,16))),new he(11,Int32Array.from([6,30,54]),new F(20,new T(4,81)),new F(30,new T(1,50),new T(4,51)),new F(28,new T(4,22),new T(4,23)),new F(24,new T(3,12),new T(8,13))),new he(12,Int32Array.from([6,32,58]),new F(24,new T(2,92),new T(2,93)),new F(22,new T(6,36),new T(2,37)),new F(26,new T(4,20),new T(6,21)),new F(28,new T(7,14),new T(4,15))),new he(13,Int32Array.from([6,34,62]),new F(26,new T(4,107)),new F(22,new T(8,37),new T(1,38)),new F(24,new T(8,20),new T(4,21)),new F(22,new T(12,11),new T(4,12))),new he(14,Int32Array.from([6,26,46,66]),new F(30,new T(3,115),new T(1,116)),new F(24,new T(4,40),new T(5,41)),new F(20,new T(11,16),new T(5,17)),new F(24,new T(11,12),new T(5,13))),new he(15,Int32Array.from([6,26,48,70]),new F(22,new T(5,87),new T(1,88)),new F(24,new T(5,41),new T(5,42)),new F(30,new T(5,24),new T(7,25)),new F(24,new T(11,12),new T(7,13))),new he(16,Int32Array.from([6,26,50,74]),new F(24,new T(5,98),new T(1,99)),new F(28,new T(7,45),new T(3,46)),new F(24,new T(15,19),new T(2,20)),new F(30,new T(3,15),new T(13,16))),new he(17,Int32Array.from([6,30,54,78]),new F(28,new T(1,107),new T(5,108)),new F(28,new T(10,46),new T(1,47)),new F(28,new T(1,22),new T(15,23)),new F(28,new T(2,14),new T(17,15))),new he(18,Int32Array.from([6,30,56,82]),new F(30,new T(5,120),new T(1,121)),new F(26,new T(9,43),new T(4,44)),new F(28,new T(17,22),new T(1,23)),new F(28,new T(2,14),new T(19,15))),new he(19,Int32Array.from([6,30,58,86]),new F(28,new T(3,113),new T(4,114)),new F(26,new T(3,44),new T(11,45)),new F(26,new T(17,21),new T(4,22)),new F(26,new T(9,13),new T(16,14))),new he(20,Int32Array.from([6,34,62,90]),new F(28,new T(3,107),new T(5,108)),new F(26,new T(3,41),new T(13,42)),new F(30,new T(15,24),new T(5,25)),new F(28,new T(15,15),new T(10,16))),new he(21,Int32Array.from([6,28,50,72,94]),new F(28,new T(4,116),new T(4,117)),new F(26,new T(17,42)),new F(28,new T(17,22),new T(6,23)),new F(30,new T(19,16),new T(6,17))),new he(22,Int32Array.from([6,26,50,74,98]),new F(28,new T(2,111),new T(7,112)),new F(28,new T(17,46)),new F(30,new T(7,24),new T(16,25)),new F(24,new T(34,13))),new he(23,Int32Array.from([6,30,54,78,102]),new F(30,new T(4,121),new T(5,122)),new F(28,new T(4,47),new T(14,48)),new F(30,new T(11,24),new T(14,25)),new F(30,new T(16,15),new T(14,16))),new he(24,Int32Array.from([6,28,54,80,106]),new F(30,new T(6,117),new T(4,118)),new F(28,new T(6,45),new T(14,46)),new F(30,new T(11,24),new T(16,25)),new F(30,new T(30,16),new T(2,17))),new he(25,Int32Array.from([6,32,58,84,110]),new F(26,new T(8,106),new T(4,107)),new F(28,new T(8,47),new T(13,48)),new F(30,new T(7,24),new T(22,25)),new F(30,new T(22,15),new T(13,16))),new he(26,Int32Array.from([6,30,58,86,114]),new F(28,new T(10,114),new T(2,115)),new F(28,new T(19,46),new T(4,47)),new F(28,new T(28,22),new T(6,23)),new F(30,new T(33,16),new T(4,17))),new he(27,Int32Array.from([6,34,62,90,118]),new F(30,new T(8,122),new T(4,123)),new F(28,new T(22,45),new T(3,46)),new F(30,new T(8,23),new T(26,24)),new F(30,new T(12,15),new T(28,16))),new he(28,Int32Array.from([6,26,50,74,98,122]),new F(30,new T(3,117),new T(10,118)),new F(28,new T(3,45),new T(23,46)),new F(30,new T(4,24),new T(31,25)),new F(30,new T(11,15),new T(31,16))),new he(29,Int32Array.from([6,30,54,78,102,126]),new F(30,new T(7,116),new T(7,117)),new F(28,new T(21,45),new T(7,46)),new F(30,new T(1,23),new T(37,24)),new F(30,new T(19,15),new T(26,16))),new he(30,Int32Array.from([6,26,52,78,104,130]),new F(30,new T(5,115),new T(10,116)),new F(28,new T(19,47),new T(10,48)),new F(30,new T(15,24),new T(25,25)),new F(30,new T(23,15),new T(25,16))),new he(31,Int32Array.from([6,30,56,82,108,134]),new F(30,new T(13,115),new T(3,116)),new F(28,new T(2,46),new T(29,47)),new F(30,new T(42,24),new T(1,25)),new F(30,new T(23,15),new T(28,16))),new he(32,Int32Array.from([6,34,60,86,112,138]),new F(30,new T(17,115)),new F(28,new T(10,46),new T(23,47)),new F(30,new T(10,24),new T(35,25)),new F(30,new T(19,15),new T(35,16))),new he(33,Int32Array.from([6,30,58,86,114,142]),new F(30,new T(17,115),new T(1,116)),new F(28,new T(14,46),new T(21,47)),new F(30,new T(29,24),new T(19,25)),new F(30,new T(11,15),new T(46,16))),new he(34,Int32Array.from([6,34,62,90,118,146]),new F(30,new T(13,115),new T(6,116)),new F(28,new T(14,46),new T(23,47)),new F(30,new T(44,24),new T(7,25)),new F(30,new T(59,16),new T(1,17))),new he(35,Int32Array.from([6,30,54,78,102,126,150]),new F(30,new T(12,121),new T(7,122)),new F(28,new T(12,47),new T(26,48)),new F(30,new T(39,24),new T(14,25)),new F(30,new T(22,15),new T(41,16))),new he(36,Int32Array.from([6,24,50,76,102,128,154]),new F(30,new T(6,121),new T(14,122)),new F(28,new T(6,47),new T(34,48)),new F(30,new T(46,24),new T(10,25)),new F(30,new T(2,15),new T(64,16))),new he(37,Int32Array.from([6,28,54,80,106,132,158]),new F(30,new T(17,122),new T(4,123)),new F(28,new T(29,46),new T(14,47)),new F(30,new T(49,24),new T(10,25)),new F(30,new T(24,15),new T(46,16))),new he(38,Int32Array.from([6,32,58,84,110,136,162]),new F(30,new T(4,122),new T(18,123)),new F(28,new T(13,46),new T(32,47)),new F(30,new T(48,24),new T(14,25)),new F(30,new T(42,15),new T(32,16))),new he(39,Int32Array.from([6,26,54,82,110,138,166]),new F(30,new T(20,117),new T(4,118)),new F(28,new T(40,47),new T(7,48)),new F(30,new T(43,24),new T(22,25)),new F(30,new T(10,15),new T(67,16))),new he(40,Int32Array.from([6,30,58,86,114,142,170]),new F(30,new T(19,118),new T(6,119)),new F(28,new T(18,47),new T(31,48)),new F(30,new T(34,24),new T(34,25)),new F(30,new T(20,15),new T(61,16)))];var Lt;(function(C){C[C.DATA_MASK_000=0]="DATA_MASK_000",C[C.DATA_MASK_001=1]="DATA_MASK_001",C[C.DATA_MASK_010=2]="DATA_MASK_010",C[C.DATA_MASK_011=3]="DATA_MASK_011",C[C.DATA_MASK_100=4]="DATA_MASK_100",C[C.DATA_MASK_101=5]="DATA_MASK_101",C[C.DATA_MASK_110=6]="DATA_MASK_110",C[C.DATA_MASK_111=7]="DATA_MASK_111"})(Lt||(Lt={}));class Fn{constructor(r,s){this.value=r,this.isMasked=s}unmaskBitMatrix(r,s){for(let o=0;o<s;o++)for(let l=0;l<s;l++)this.isMasked(o,l)&&r.flip(l,o)}}Fn.values=new Map([[Lt.DATA_MASK_000,new Fn(Lt.DATA_MASK_000,(C,r)=>(C+r&1)===0)],[Lt.DATA_MASK_001,new Fn(Lt.DATA_MASK_001,(C,r)=>(C&1)===0)],[Lt.DATA_MASK_010,new Fn(Lt.DATA_MASK_010,(C,r)=>r%3===0)],[Lt.DATA_MASK_011,new Fn(Lt.DATA_MASK_011,(C,r)=>(C+r)%3===0)],[Lt.DATA_MASK_100,new Fn(Lt.DATA_MASK_100,(C,r)=>(Math.floor(C/2)+Math.floor(r/3)&1)===0)],[Lt.DATA_MASK_101,new Fn(Lt.DATA_MASK_101,(C,r)=>C*r%6===0)],[Lt.DATA_MASK_110,new Fn(Lt.DATA_MASK_110,(C,r)=>C*r%6<3)],[Lt.DATA_MASK_111,new Fn(Lt.DATA_MASK_111,(C,r)=>(C+r+C*r%3&1)===0)]]);class sw{constructor(r){const s=r.getHeight();if(s<21||(s&3)!==1)throw new j;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let u=0;u<6;u++)r=this.copyBit(u,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let u=5;u>=0;u--)r=this.copyBit(8,u,r);const s=this.bitMatrix.getHeight();let o=0;const l=s-7;for(let u=s-1;u>=l;u--)o=this.copyBit(8,u,o);for(let u=s-8;u<s;u++)o=this.copyBit(u,8,o);if(this.parsedFormatInfo=$t.decodeFormatInformation(r,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new j}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),s=Math.floor((r-17)/4);if(s<=6)return he.getVersionForNumber(s);let o=0;const l=r-11;for(let d=5;d>=0;d--)for(let h=r-9;h>=l;h--)o=this.copyBit(h,d,o);let u=he.decodeVersionInformation(o);if(u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;o=0;for(let d=5;d>=0;d--)for(let h=r-9;h>=l;h--)o=this.copyBit(d,h,o);if(u=he.decodeVersionInformation(o),u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;throw new j}copyBit(r,s,o){return(this.isMirror?this.bitMatrix.get(s,r):this.bitMatrix.get(r,s))?o<<1|1:o<<1}readCodewords(){const r=this.readFormatInformation(),s=this.readVersion(),o=Fn.values.get(r.getDataMask()),l=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,l);const u=s.buildFunctionPattern();let d=!0;const h=new Uint8Array(s.getTotalCodewords());let g=0,x=0,w=0;for(let E=l-1;E>0;E-=2){E===6&&E--;for(let A=0;A<l;A++){const b=d?l-1-A:A;for(let D=0;D<2;D++)u.get(E-D,b)||(w++,x<<=1,this.bitMatrix.get(E-D,b)&&(x|=1),w===8&&(h[g++]=x,w=0,x=0))}d=!d}if(g!==s.getTotalCodewords())throw new j;return h}remask(){if(this.parsedFormatInfo===null)return;const r=Fn.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let s=0,o=r.getWidth();s<o;s++)for(let l=s+1,u=r.getHeight();l<u;l++)r.get(s,l)!==r.get(l,s)&&(r.flip(l,s),r.flip(s,l))}}class xu{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s,o){if(r.length!==s.getTotalCodewords())throw new _;const l=s.getECBlocksForLevel(o);let u=0;const d=l.getECBlocks();for(const D of d)u+=D.getCount();const h=new Array(u);let g=0;for(const D of d)for(let M=0;M<D.getCount();M++){const B=D.getDataCodewords(),z=l.getECCodewordsPerBlock()+B;h[g++]=new xu(B,new Uint8Array(z))}const x=h[0].codewords.length;let w=h.length-1;for(;w>=0&&h[w].codewords.length!==x;)w--;w++;const E=x-l.getECCodewordsPerBlock();let A=0;for(let D=0;D<E;D++)for(let M=0;M<g;M++)h[M].codewords[D]=r[A++];for(let D=w;D<g;D++)h[D].codewords[E]=r[A++];const b=h[0].codewords.length;for(let D=E;D<b;D++)for(let M=0;M<g;M++){const B=M<w?D:D+1;h[M].codewords[B]=r[A++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Un;(function(C){C[C.TERMINATOR=0]="TERMINATOR",C[C.NUMERIC=1]="NUMERIC",C[C.ALPHANUMERIC=2]="ALPHANUMERIC",C[C.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",C[C.BYTE=4]="BYTE",C[C.ECI=5]="ECI",C[C.KANJI=6]="KANJI",C[C.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",C[C.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",C[C.HANZI=9]="HANZI"})(Un||(Un={}));class pe{constructor(r,s,o,l){this.value=r,this.stringValue=s,this.characterCountBitsForVersions=o,this.bits=l,pe.FOR_BITS.set(l,this),pe.FOR_VALUE.set(r,this)}static forBits(r){const s=pe.FOR_BITS.get(r);if(s===void 0)throw new _;return s}getCharacterCountBits(r){const s=r.getVersionNumber();let o;return s<=9?o=0:s<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof pe))return!1;const s=r;return this.value===s.value}toString(){return this.stringValue}}pe.FOR_BITS=new Map,pe.FOR_VALUE=new Map,pe.TERMINATOR=new pe(Un.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),pe.NUMERIC=new pe(Un.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),pe.ALPHANUMERIC=new pe(Un.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),pe.STRUCTURED_APPEND=new pe(Un.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),pe.BYTE=new pe(Un.BYTE,"BYTE",Int32Array.from([8,16,16]),4),pe.ECI=new pe(Un.ECI,"ECI",Int32Array.from([0,0,0]),7),pe.KANJI=new pe(Un.KANJI,"KANJI",Int32Array.from([8,10,12]),8),pe.FNC1_FIRST_POSITION=new pe(Un.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),pe.FNC1_SECOND_POSITION=new pe(Un.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),pe.HANZI=new pe(Un.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class dt{static decode(r,s,o,l){const u=new mu(r);let d=new ae;const h=new Array;let g=-1,x=-1;try{let w=null,E=!1,A;do{if(u.available()<4)A=pe.TERMINATOR;else{const b=u.readBits(4);A=pe.forBits(b)}switch(A){case pe.TERMINATOR:break;case pe.FNC1_FIRST_POSITION:case pe.FNC1_SECOND_POSITION:E=!0;break;case pe.STRUCTURED_APPEND:if(u.available()<16)throw new j;g=u.readBits(8),x=u.readBits(8);break;case pe.ECI:const b=dt.parseECIValue(u);if(w=X.getCharacterSetECIByValue(b),w===null)throw new j;break;case pe.HANZI:const D=u.readBits(4),M=u.readBits(A.getCharacterCountBits(s));D===dt.GB2312_SUBSET&&dt.decodeHanziSegment(u,d,M);break;default:const B=u.readBits(A.getCharacterCountBits(s));switch(A){case pe.NUMERIC:dt.decodeNumericSegment(u,d,B);break;case pe.ALPHANUMERIC:dt.decodeAlphanumericSegment(u,d,B,E);break;case pe.BYTE:dt.decodeByteSegment(u,d,B,w,h,l);break;case pe.KANJI:dt.decodeKanjiSegment(u,d,B);break;default:throw new j}break}}while(A!==pe.TERMINATOR)}catch{throw new j}return new oe(r,d.toString(),h.length===0?null:h,o===null?null:o.toString(),g,x)}static decodeHanziSegment(r,s,o){if(o*13>r.available())throw new j;const l=new Uint8Array(2*o);let u=0;for(;o>0;){const d=r.readBits(13);let h=d/96<<8&4294967295|d%96;h<959?h+=41377:h+=42657,l[u]=h>>8&255,l[u+1]=h&255,u+=2,o--}try{s.append(je.decode(l,H.GB2312))}catch(d){throw new j(d)}}static decodeKanjiSegment(r,s,o){if(o*13>r.available())throw new j;const l=new Uint8Array(2*o);let u=0;for(;o>0;){const d=r.readBits(13);let h=d/192<<8&4294967295|d%192;h<7936?h+=33088:h+=49472,l[u]=h>>8,l[u+1]=h,u+=2,o--}try{s.append(je.decode(l,H.SHIFT_JIS))}catch(d){throw new j(d)}}static decodeByteSegment(r,s,o,l,u,d){if(8*o>r.available())throw new j;const h=new Uint8Array(o);for(let x=0;x<o;x++)h[x]=r.readBits(8);let g;l===null?g=H.guessEncoding(h,d):g=l.getName();try{s.append(je.decode(h,g))}catch(x){throw new j(x)}u.push(h)}static toAlphaNumericChar(r){if(r>=dt.ALPHANUMERIC_CHARS.length)throw new j;return dt.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,s,o,l){const u=s.length();for(;o>1;){if(r.available()<11)throw new j;const d=r.readBits(11);s.append(dt.toAlphaNumericChar(Math.floor(d/45))),s.append(dt.toAlphaNumericChar(d%45)),o-=2}if(o===1){if(r.available()<6)throw new j;s.append(dt.toAlphaNumericChar(r.readBits(6)))}if(l)for(let d=u;d<s.length();d++)s.charAt(d)==="%"&&(d<s.length()-1&&s.charAt(d+1)==="%"?s.deleteCharAt(d+1):s.setCharAt(d,""))}static decodeNumericSegment(r,s,o){for(;o>=3;){if(r.available()<10)throw new j;const l=r.readBits(10);if(l>=1e3)throw new j;s.append(dt.toAlphaNumericChar(Math.floor(l/100))),s.append(dt.toAlphaNumericChar(Math.floor(l/10)%10)),s.append(dt.toAlphaNumericChar(l%10)),o-=3}if(o===2){if(r.available()<7)throw new j;const l=r.readBits(7);if(l>=100)throw new j;s.append(dt.toAlphaNumericChar(Math.floor(l/10))),s.append(dt.toAlphaNumericChar(l%10))}else if(o===1){if(r.available()<4)throw new j;const l=r.readBits(4);if(l>=10)throw new j;s.append(dt.toAlphaNumericChar(l))}}static parseECIValue(r){const s=r.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const o=r.readBits(8);return(s&63)<<8&4294967295|o}if((s&224)===192){const o=r.readBits(16);return(s&31)<<16&4294967295|o}throw new j}}dt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",dt.GB2312_SUBSET=1;class R1{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const s=r[0];r[0]=r[2],r[2]=s}}class ow{constructor(){this.rsDecoder=new uo(ve.QR_CODE_FIELD_256)}decodeBooleanArray(r,s){return this.decodeBitMatrix(ge.parseFromBooleanArray(r),s)}decodeBitMatrix(r,s){const o=new sw(r);let l=null;try{return this.decodeBitMatrixParser(o,s)}catch(u){l=u}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const u=this.decodeBitMatrixParser(o,s);return u.setOther(new R1(!0)),u}catch(u){throw l!==null?l:u}}decodeBitMatrixParser(r,s){const o=r.readVersion(),l=r.readFormatInformation().getErrorCorrectionLevel(),u=r.readCodewords(),d=xu.getDataBlocks(u,o,l);let h=0;for(const w of d)h+=w.getNumDataCodewords();const g=new Uint8Array(h);let x=0;for(const w of d){const E=w.getCodewords(),A=w.getNumDataCodewords();this.correctErrors(E,A);for(let b=0;b<A;b++)g[x++]=E[b]}return dt.decode(g,o,l,s)}correctErrors(r,s){const o=new Int32Array(r);try{this.rsDecoder.decode(o,r.length-s)}catch{throw new O}for(let l=0;l<s;l++)r[l]=o[l]}}class yu extends de{constructor(r,s,o){super(r,s),this.estimatedModuleSize=o}aboutEquals(r,s,o){if(Math.abs(s-this.getY())<=r&&Math.abs(o-this.getX())<=r){const l=Math.abs(r-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(r,s,o){const l=(this.getX()+s)/2,u=(this.getY()+r)/2,d=(this.estimatedModuleSize+o)/2;return new yu(l,u,d)}}class Ja{constructor(r,s,o,l,u,d,h){this.image=r,this.startX=s,this.startY=o,this.width=l,this.height=u,this.moduleSize=d,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,s=this.height,o=this.width,l=r+o,u=this.startY+s/2,d=new Int32Array(3),h=this.image;for(let g=0;g<s;g++){const x=u+(g&1?-Math.floor((g+1)/2):Math.floor((g+1)/2));d[0]=0,d[1]=0,d[2]=0;let w=r;for(;w<l&&!h.get(w,x);)w++;let E=0;for(;w<l;){if(h.get(w,x))if(E===1)d[1]++;else if(E===2){if(this.foundPatternCross(d)){const A=this.handlePossibleCenter(d,x,w);if(A!==null)return A}d[0]=d[2],d[1]=1,d[2]=0,E=1}else d[++E]++;else E===1&&E++,d[E]++;w++}if(this.foundPatternCross(d)){const A=this.handlePossibleCenter(d,x,l);if(A!==null)return A}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new V}static centerFromEnd(r,s){return s-r[2]-r[1]/2}foundPatternCross(r){const s=this.moduleSize,o=s/2;for(let l=0;l<3;l++)if(Math.abs(s-r[l])>=o)return!1;return!0}crossCheckVertical(r,s,o,l){const u=this.image,d=u.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let g=r;for(;g>=0&&u.get(s,g)&&h[1]<=o;)h[1]++,g--;if(g<0||h[1]>o)return NaN;for(;g>=0&&!u.get(s,g)&&h[0]<=o;)h[0]++,g--;if(h[0]>o)return NaN;for(g=r+1;g<d&&u.get(s,g)&&h[1]<=o;)h[1]++,g++;if(g===d||h[1]>o)return NaN;for(;g<d&&!u.get(s,g)&&h[2]<=o;)h[2]++,g++;if(h[2]>o)return NaN;const x=h[0]+h[1]+h[2];return 5*Math.abs(x-l)>=2*l?NaN:this.foundPatternCross(h)?Ja.centerFromEnd(h,g):NaN}handlePossibleCenter(r,s,o){const l=r[0]+r[1]+r[2],u=Ja.centerFromEnd(r,o),d=this.crossCheckVertical(s,u,2*r[1],l);if(!isNaN(d)){const h=(r[0]+r[1]+r[2])/3;for(const x of this.possibleCenters)if(x.aboutEquals(h,d,u))return x.combineEstimate(d,u,h);const g=new yu(u,d,h);this.possibleCenters.push(g),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(g)}return null}}class wu extends de{constructor(r,s,o,l){super(r,s),this.estimatedModuleSize=o,this.count=l,l===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,s,o){if(Math.abs(s-this.getY())<=r&&Math.abs(o-this.getX())<=r){const l=Math.abs(r-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(r,s,o){const l=this.count+1,u=(this.count*this.getX()+s)/l,d=(this.count*this.getY()+r)/l,h=(this.count*this.estimatedModuleSize+o)/l;return new wu(u,d,h,l)}}class aw{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Bt{constructor(r,s){this.image=r,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const s=r!=null&&r.get(q.TRY_HARDER)!==void 0,o=r!=null&&r.get(q.PURE_BARCODE)!==void 0,l=this.image,u=l.getHeight(),d=l.getWidth();let h=Math.floor(3*u/(4*Bt.MAX_MODULES));(h<Bt.MIN_SKIP||s)&&(h=Bt.MIN_SKIP);let g=!1;const x=new Int32Array(5);for(let E=h-1;E<u&&!g;E+=h){x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0;let A=0;for(let b=0;b<d;b++)if(l.get(b,E))(A&1)===1&&A++,x[A]++;else if(A&1)x[A]++;else if(A===4)if(Bt.foundPatternCross(x)){if(this.handlePossibleCenter(x,E,b,o)===!0)if(h=2,this.hasSkipped===!0)g=this.haveMultiplyConfirmedCenters();else{const M=this.findRowSkip();M>x[2]&&(E+=M-x[2]-h,b=d-1)}else{x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,A=3;continue}A=0,x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0}else x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,A=3;else x[++A]++;Bt.foundPatternCross(x)&&this.handlePossibleCenter(x,E,d,o)===!0&&(h=x[0],this.hasSkipped&&(g=this.haveMultiplyConfirmedCenters()))}const w=this.selectBestPatterns();return de.orderBestPatterns(w),new aw(w)}static centerFromEnd(r,s){return s-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let s=0;for(let u=0;u<5;u++){const d=r[u];if(d===0)return!1;s+=d}if(s<7)return!1;const o=s/7,l=o/2;return Math.abs(o-r[0])<l&&Math.abs(o-r[1])<l&&Math.abs(3*o-r[2])<3*l&&Math.abs(o-r[3])<l&&Math.abs(o-r[4])<l}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,s,o,l){const u=this.getCrossCheckStateCount();let d=0;const h=this.image;for(;r>=d&&s>=d&&h.get(s-d,r-d);)u[2]++,d++;if(r<d||s<d)return!1;for(;r>=d&&s>=d&&!h.get(s-d,r-d)&&u[1]<=o;)u[1]++,d++;if(r<d||s<d||u[1]>o)return!1;for(;r>=d&&s>=d&&h.get(s-d,r-d)&&u[0]<=o;)u[0]++,d++;if(u[0]>o)return!1;const g=h.getHeight(),x=h.getWidth();for(d=1;r+d<g&&s+d<x&&h.get(s+d,r+d);)u[2]++,d++;if(r+d>=g||s+d>=x)return!1;for(;r+d<g&&s+d<x&&!h.get(s+d,r+d)&&u[3]<o;)u[3]++,d++;if(r+d>=g||s+d>=x||u[3]>=o)return!1;for(;r+d<g&&s+d<x&&h.get(s+d,r+d)&&u[4]<o;)u[4]++,d++;if(u[4]>=o)return!1;const w=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(w-l)<2*l&&Bt.foundPatternCross(u)}crossCheckVertical(r,s,o,l){const u=this.image,d=u.getHeight(),h=this.getCrossCheckStateCount();let g=r;for(;g>=0&&u.get(s,g);)h[2]++,g--;if(g<0)return NaN;for(;g>=0&&!u.get(s,g)&&h[1]<=o;)h[1]++,g--;if(g<0||h[1]>o)return NaN;for(;g>=0&&u.get(s,g)&&h[0]<=o;)h[0]++,g--;if(h[0]>o)return NaN;for(g=r+1;g<d&&u.get(s,g);)h[2]++,g++;if(g===d)return NaN;for(;g<d&&!u.get(s,g)&&h[3]<o;)h[3]++,g++;if(g===d||h[3]>=o)return NaN;for(;g<d&&u.get(s,g)&&h[4]<o;)h[4]++,g++;if(h[4]>=o)return NaN;const x=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(x-l)>=2*l?NaN:Bt.foundPatternCross(h)?Bt.centerFromEnd(h,g):NaN}crossCheckHorizontal(r,s,o,l){const u=this.image,d=u.getWidth(),h=this.getCrossCheckStateCount();let g=r;for(;g>=0&&u.get(g,s);)h[2]++,g--;if(g<0)return NaN;for(;g>=0&&!u.get(g,s)&&h[1]<=o;)h[1]++,g--;if(g<0||h[1]>o)return NaN;for(;g>=0&&u.get(g,s)&&h[0]<=o;)h[0]++,g--;if(h[0]>o)return NaN;for(g=r+1;g<d&&u.get(g,s);)h[2]++,g++;if(g===d)return NaN;for(;g<d&&!u.get(g,s)&&h[3]<o;)h[3]++,g++;if(g===d||h[3]>=o)return NaN;for(;g<d&&u.get(g,s)&&h[4]<o;)h[4]++,g++;if(h[4]>=o)return NaN;const x=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(x-l)>=l?NaN:Bt.foundPatternCross(h)?Bt.centerFromEnd(h,g):NaN}handlePossibleCenter(r,s,o,l){const u=r[0]+r[1]+r[2]+r[3]+r[4];let d=Bt.centerFromEnd(r,o),h=this.crossCheckVertical(s,Math.floor(d),r[2],u);if(!isNaN(h)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(h),r[2],u),!isNaN(d)&&(!l||this.crossCheckDiagonal(Math.floor(h),Math.floor(d),r[2],u)))){const g=u/7;let x=!1;const w=this.possibleCenters;for(let E=0,A=w.length;E<A;E++){const b=w[E];if(b.aboutEquals(g,h,d)){w[E]=b.combineEstimate(h,d,g),x=!0;break}}if(!x){const E=new wu(d,h,g);w.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const o of this.possibleCenters)if(o.getCount()>=Bt.CENTER_QUORUM)if(s==null)s=o;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-o.getX())-Math.abs(s.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,s=0;const o=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=Bt.CENTER_QUORUM&&(r++,s+=d.getEstimatedModuleSize());if(r<3)return!1;const l=s/o;let u=0;for(const d of this.possibleCenters)u+=Math.abs(d.getEstimatedModuleSize()-l);return u<=.05*s}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new V;const s=this.possibleCenters;let o;if(r>3){let l=0,u=0;for(const g of this.possibleCenters){const x=g.getEstimatedModuleSize();l+=x,u+=x*x}o=l/r;let d=Math.sqrt(u/r-o*o);s.sort((g,x)=>{const w=Math.abs(x.getEstimatedModuleSize()-o),E=Math.abs(g.getEstimatedModuleSize()-o);return w<E?-1:w>E?1:0});const h=Math.max(.2*o,d);for(let g=0;g<s.length&&s.length>3;g++){const x=s[g];Math.abs(x.getEstimatedModuleSize()-o)>h&&(s.splice(g,1),g--)}}if(s.length>3){let l=0;for(const u of s)l+=u.getEstimatedModuleSize();o=l/s.length,s.sort((u,d)=>{if(d.getCount()===u.getCount()){const h=Math.abs(d.getEstimatedModuleSize()-o),g=Math.abs(u.getEstimatedModuleSize()-o);return h<g?1:h>g?-1:0}else return d.getCount()-u.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}Bt.CENTER_QUORUM=2,Bt.MIN_SKIP=3,Bt.MAX_MODULES=57;class ho{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(q.NEED_RESULT_POINT_CALLBACK);const o=new Bt(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(o)}processFinderPatternInfo(r){const s=r.getTopLeft(),o=r.getTopRight(),l=r.getBottomLeft(),u=this.calculateModuleSize(s,o,l);if(u<1)throw new V("No pattern found in proccess finder.");const d=ho.computeDimension(s,o,l,u),h=he.getProvisionalVersionForDimension(d),g=h.getDimensionForVersion()-7;let x=null;if(h.getAlignmentPatternCenters().length>0){const b=o.getX()-s.getX()+l.getX(),D=o.getY()-s.getY()+l.getY(),M=1-3/g,B=Math.floor(s.getX()+M*(b-s.getX())),z=Math.floor(s.getY()+M*(D-s.getY()));for(let $=4;$<=16;$<<=1)try{x=this.findAlignmentInRegion(u,B,z,$);break}catch(ee){if(!(ee instanceof V))throw ee}}const w=ho.createTransform(s,o,l,x,d),E=ho.sampleGrid(this.image,w,d);let A;return x===null?A=[l,s,o]:A=[l,s,o,x],new Ka(E,A)}static createTransform(r,s,o,l,u){const d=u-3.5;let h,g,x,w;return l!==null?(h=l.getX(),g=l.getY(),x=d-3,w=x):(h=s.getX()-r.getX()+o.getX(),g=s.getY()-r.getY()+o.getY(),x=d,w=d),qn.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,x,w,3.5,d,r.getX(),r.getY(),s.getX(),s.getY(),h,g,o.getX(),o.getY())}static sampleGrid(r,s,o){return Gr.getInstance().sampleGridWithTransform(r,o,o,s)}static computeDimension(r,s,o,l){const u=Me.round(de.distance(r,s)/l),d=Me.round(de.distance(r,o)/l);let h=Math.floor((u+d)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new V("Dimensions could be not found.")}return h}calculateModuleSize(r,s,o){return(this.calculateModuleSizeOneWay(r,s)+this.calculateModuleSizeOneWay(r,o))/2}calculateModuleSizeOneWay(r,s){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(s.getX()),Math.floor(s.getY())),l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(o)?l/7:isNaN(l)?o/7:(o+l)/14}sizeOfBlackWhiteBlackRunBothWays(r,s,o,l){let u=this.sizeOfBlackWhiteBlackRun(r,s,o,l),d=1,h=r-(o-r);h<0?(d=r/(r-h),h=0):h>=this.image.getWidth()&&(d=(this.image.getWidth()-1-r)/(h-r),h=this.image.getWidth()-1);let g=Math.floor(s-(l-s)*d);return d=1,g<0?(d=s/(s-g),g=0):g>=this.image.getHeight()&&(d=(this.image.getHeight()-1-s)/(g-s),g=this.image.getHeight()-1),h=Math.floor(r+(h-r)*d),u+=this.sizeOfBlackWhiteBlackRun(r,s,h,g),u-1}sizeOfBlackWhiteBlackRun(r,s,o,l){const u=Math.abs(l-s)>Math.abs(o-r);if(u){let b=r;r=s,s=b,b=o,o=l,l=b}const d=Math.abs(o-r),h=Math.abs(l-s);let g=-d/2;const x=r<o?1:-1,w=s<l?1:-1;let E=0;const A=o+x;for(let b=r,D=s;b!==A;b+=x){const M=u?D:b,B=u?b:D;if(E===1===this.image.get(M,B)){if(E===2)return Me.distance(b,D,r,s);E++}if(g+=h,g>0){if(D===l)break;D+=w,g-=d}}return E===2?Me.distance(o+x,l,r,s):NaN}findAlignmentInRegion(r,s,o,l){const u=Math.floor(l*r),d=Math.max(0,s-u),h=Math.min(this.image.getWidth()-1,s+u);if(h-d<r*3)throw new V("Alignment top exceeds estimated module size.");const g=Math.max(0,o-u),x=Math.min(this.image.getHeight()-1,o+u);if(x-g<r*3)throw new V("Alignment bottom exceeds estimated module size.");return new Ja(this.image,d,g,h-d,x-g,r,this.resultPointCallback).find()}}class qr{constructor(){this.decoder=new ow}getDecoder(){return this.decoder}decode(r,s){let o,l;if(s!=null&&s.get(q.PURE_BARCODE)!==void 0){const g=qr.extractPureBits(r.getBlackMatrix());o=this.decoder.decodeBitMatrix(g,s),l=qr.NO_POINTS}else{const g=new ho(r.getBlackMatrix()).detect(s);o=this.decoder.decodeBitMatrix(g.getBits(),s),l=g.getPoints()}o.getOther()instanceof R1&&o.getOther().applyMirroredCorrection(l);const u=new nt(o.getText(),o.getRawBytes(),void 0,l,ue.QR_CODE,void 0),d=o.getByteSegments();d!==null&&u.putMetadata(Et.BYTE_SEGMENTS,d);const h=o.getECLevel();return h!==null&&u.putMetadata(Et.ERROR_CORRECTION_LEVEL,h),o.hasStructuredAppend()&&(u.putMetadata(Et.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),u.putMetadata(Et.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),u}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),o=r.getBottomRightOnBit();if(s===null||o===null)throw new V;const l=this.moduleSize(s,r);let u=s[1],d=o[1],h=s[0],g=o[0];if(h>=g||u>=d)throw new V;if(d-u!==g-h&&(g=h+(d-u),g>=r.getWidth()))throw new V;const x=Math.round((g-h+1)/l),w=Math.round((d-u+1)/l);if(x<=0||w<=0)throw new V;if(w!==x)throw new V;const E=Math.floor(l/2);u+=E,h+=E;const A=h+Math.floor((x-1)*l)-g;if(A>0){if(A>E)throw new V;h-=A}const b=u+Math.floor((w-1)*l)-d;if(b>0){if(b>E)throw new V;u-=b}const D=new ge(x,w);for(let M=0;M<w;M++){const B=u+Math.floor(M*l);for(let z=0;z<x;z++)r.get(h+Math.floor(z*l),B)&&D.set(z,M)}return D}static moduleSize(r,s){const o=s.getHeight(),l=s.getWidth();let u=r[0],d=r[1],h=!0,g=0;for(;u<l&&d<o;){if(h!==s.get(u,d)){if(++g===5)break;h=!h}u++,d++}if(u===l||d===o)throw new V;return(u-r[0])/7}}qr.NO_POINTS=new Array;class we{PDF417Common(){}static getBitCountSum(r){return Me.sum(r)}static toIntArray(r){if(r==null||!r.length)return we.EMPTY_INT_ARRAY;const s=new Int32Array(r.length);let o=0;for(const l of r)s[o++]=l;return s}static getCodeword(r){const s=R.binarySearch(we.SYMBOL_TABLE,r&262143);return s<0?-1:(we.CODEWORD_TABLE[s]-1)%we.NUMBER_OF_CODEWORDS}}we.NUMBER_OF_CODEWORDS=929,we.MAX_CODEWORDS_IN_BARCODE=we.NUMBER_OF_CODEWORDS-1,we.MIN_ROWS_IN_BARCODE=3,we.MAX_ROWS_IN_BARCODE=90,we.MODULES_IN_CODEWORD=17,we.MODULES_IN_STOP_PATTERN=18,we.BARS_IN_MODULE=8,we.EMPTY_INT_ARRAY=new Int32Array([]),we.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),we.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class lw{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Se{static detectMultiple(r,s,o){let l=r.getBlackMatrix(),u=Se.detect(o,l);return u.length||(l=l.clone(),l.rotate180(),u=Se.detect(o,l)),new lw(l,u)}static detect(r,s){const o=new Array;let l=0,u=0,d=!1;for(;l<s.getHeight();){const h=Se.findVertices(s,l,u);if(h[0]==null&&h[3]==null){if(!d)break;d=!1,u=0;for(const g of o)g[1]!=null&&(l=Math.trunc(Math.max(l,g[1].getY()))),g[3]!=null&&(l=Math.max(l,Math.trunc(g[3].getY())));l+=Se.ROW_STEP;continue}if(d=!0,o.push(h),!r)break;h[2]!=null?(u=Math.trunc(h[2].getX()),l=Math.trunc(h[2].getY())):(u=Math.trunc(h[4].getX()),l=Math.trunc(h[4].getY()))}return o}static findVertices(r,s,o){const l=r.getHeight(),u=r.getWidth(),d=new Array(8);return Se.copyToResult(d,Se.findRowsWithPattern(r,l,u,s,o,Se.START_PATTERN),Se.INDEXES_START_PATTERN),d[4]!=null&&(o=Math.trunc(d[4].getX()),s=Math.trunc(d[4].getY())),Se.copyToResult(d,Se.findRowsWithPattern(r,l,u,s,o,Se.STOP_PATTERN),Se.INDEXES_STOP_PATTERN),d}static copyToResult(r,s,o){for(let l=0;l<o.length;l++)r[o[l]]=s[l]}static findRowsWithPattern(r,s,o,l,u,d){const h=new Array(4);let g=!1;const x=new Int32Array(d.length);for(;l<s;l+=Se.ROW_STEP){let E=Se.findGuardPattern(r,u,l,o,!1,d,x);if(E!=null){for(;l>0;){const A=Se.findGuardPattern(r,u,--l,o,!1,d,x);if(A!=null)E=A;else{l++;break}}h[0]=new de(E[0],l),h[1]=new de(E[1],l),g=!0;break}}let w=l+1;if(g){let E=0,A=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;w<s;w++){const b=Se.findGuardPattern(r,A[0],w,o,!1,d,x);if(b!=null&&Math.abs(A[0]-b[0])<Se.MAX_PATTERN_DRIFT&&Math.abs(A[1]-b[1])<Se.MAX_PATTERN_DRIFT)A=b,E=0;else{if(E>Se.SKIPPED_ROW_COUNT_MAX)break;E++}}w-=E+1,h[2]=new de(A[0],w),h[3]=new de(A[1],w)}return w-l<Se.BARCODE_MIN_HEIGHT&&R.fill(h,null),h}static findGuardPattern(r,s,o,l,u,d,h){R.fillWithin(h,0,h.length,0);let g=s,x=0;for(;r.get(g,o)&&g>0&&x++<Se.MAX_PIXEL_DRIFT;)g--;let w=g,E=0,A=d.length;for(let b=u;w<l;w++)if(r.get(w,o)!==b)h[E]++;else{if(E===A-1){if(Se.patternMatchVariance(h,d,Se.MAX_INDIVIDUAL_VARIANCE)<Se.MAX_AVG_VARIANCE)return new Int32Array([g,w]);g+=h[0]+h[1],L.arraycopy(h,2,h,0,E-1),h[E-1]=0,h[E]=0,E--}else E++;h[E]=1,b=!b}return E===A-1&&Se.patternMatchVariance(h,d,Se.MAX_INDIVIDUAL_VARIANCE)<Se.MAX_AVG_VARIANCE?new Int32Array([g,w-1]):null}static patternMatchVariance(r,s,o){let l=r.length,u=0,d=0;for(let x=0;x<l;x++)u+=r[x],d+=s[x];if(u<d)return 1/0;let h=u/d;o*=h;let g=0;for(let x=0;x<l;x++){let w=r[x],E=s[x]*h,A=w>E?w-E:E-w;if(A>o)return 1/0;g+=A}return g/u}}Se.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Se.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Se.MAX_AVG_VARIANCE=.42,Se.MAX_INDIVIDUAL_VARIANCE=.8,Se.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Se.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Se.MAX_PIXEL_DRIFT=3,Se.MAX_PATTERN_DRIFT=5,Se.SKIPPED_ROW_COUNT_MAX=25,Se.ROW_STEP=5,Se.BARCODE_MIN_HEIGHT=10;class Vt{constructor(r,s){if(s.length===0)throw new _;this.field=r;let o=s.length;if(o>1&&s[0]===0){let l=1;for(;l<o&&s[l]===0;)l++;l===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-l),L.arraycopy(s,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let l=0;for(let u of this.coefficients)l=this.field.add(l,u);return l}let s=this.coefficients[0],o=this.coefficients.length;for(let l=1;l<o;l++)s=this.field.add(this.field.multiply(r,s),this.coefficients[l]);return s}add(r){if(!this.field.equals(r.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,o=r.coefficients;if(s.length>o.length){let d=s;s=o,o=d}let l=new Int32Array(o.length),u=o.length-s.length;L.arraycopy(o,0,l,0,u);for(let d=u;d<o.length;d++)l[d]=this.field.add(s[d-u],o[d]);return new Vt(this.field,l)}subtract(r){if(!this.field.equals(r.field))throw new _("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof Vt?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new Vt(this.field,new Int32Array([0]));let s=this.coefficients,o=s.length,l=r.coefficients,u=l.length,d=new Int32Array(o+u-1);for(let h=0;h<o;h++){let g=s[h];for(let x=0;x<u;x++)d[h+x]=this.field.add(d[h+x],this.field.multiply(g,l[x]))}return new Vt(this.field,d)}negative(){let r=this.coefficients.length,s=new Int32Array(r);for(let o=0;o<r;o++)s[o]=this.field.subtract(0,this.coefficients[o]);return new Vt(this.field,s)}multiplyScalar(r){if(r===0)return new Vt(this.field,new Int32Array([0]));if(r===1)return this;let s=this.coefficients.length,o=new Int32Array(s);for(let l=0;l<s;l++)o[l]=this.field.multiply(this.coefficients[l],r);return new Vt(this.field,o)}multiplyByMonomial(r,s){if(r<0)throw new _;if(s===0)return new Vt(this.field,new Int32Array([0]));let o=this.coefficients.length,l=new Int32Array(o+r);for(let u=0;u<o;u++)l[u]=this.field.multiply(this.coefficients[u],s);return new Vt(this.field,l)}toString(){let r=new ae;for(let s=this.getDegree();s>=0;s--){let o=this.getCoefficient(s);o!==0&&(o<0?(r.append(" - "),o=-o):r.length()>0&&r.append(" + "),(s===0||o!==1)&&r.append(o),s!==0&&(s===1?r.append("x"):(r.append("x^"),r.append(s))))}return r.toString()}}class cw{add(r,s){return(r+s)%this.modulus}subtract(r,s){return(this.modulus+r-s)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new _;return this.logTable[r]}inverse(r){if(r===0)throw new ur;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class _u extends cw{constructor(r,s){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let o=1;for(let l=0;l<r;l++)this.expTable[l]=o,o=o*s%r;for(let l=0;l<r-1;l++)this.logTable[this.expTable[l]]=l;this.zero=new Vt(this,new Int32Array([0])),this.one=new Vt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new _;if(s===0)return this.zero;let o=new Int32Array(r+1);return o[0]=s,new Vt(this,o)}}_u.PDF417_GF=new _u(we.NUMBER_OF_CODEWORDS,3);class O1{constructor(){this.field=_u.PDF417_GF}decode(r,s,o){let l=new Vt(this.field,r),u=new Int32Array(s),d=!1;for(let D=s;D>0;D--){let M=l.evaluateAt(this.field.exp(D));u[s-D]=M,M!==0&&(d=!0)}if(!d)return 0;let h=this.field.getOne();if(o!=null)for(const D of o){let M=this.field.exp(r.length-1-D),B=new Vt(this.field,new Int32Array([this.field.subtract(0,M),1]));h=h.multiply(B)}let g=new Vt(this.field,u),x=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),g,s),w=x[0],E=x[1],A=this.findErrorLocations(w),b=this.findErrorMagnitudes(E,w,A);for(let D=0;D<A.length;D++){let M=r.length-1-this.field.log(A[D]);if(M<0)throw O.getChecksumInstance();r[M]=this.field.subtract(r[M],b[D])}return A.length}runEuclideanAlgorithm(r,s,o){if(r.getDegree()<s.getDegree()){let A=r;r=s,s=A}let l=r,u=s,d=this.field.getZero(),h=this.field.getOne();for(;u.getDegree()>=Math.round(o/2);){let A=l,b=d;if(l=u,d=h,l.isZero())throw O.getChecksumInstance();u=A;let D=this.field.getZero(),M=l.getCoefficient(l.getDegree()),B=this.field.inverse(M);for(;u.getDegree()>=l.getDegree()&&!u.isZero();){let z=u.getDegree()-l.getDegree(),$=this.field.multiply(u.getCoefficient(u.getDegree()),B);D=D.add(this.field.buildMonomial(z,$)),u=u.subtract(l.multiplyByMonomial(z,$))}h=D.multiply(d).subtract(b).negative()}let g=h.getCoefficient(0);if(g===0)throw O.getChecksumInstance();let x=this.field.inverse(g),w=h.multiply(x),E=u.multiply(x);return[w,E]}findErrorLocations(r){let s=r.getDegree(),o=new Int32Array(s),l=0;for(let u=1;u<this.field.getSize()&&l<s;u++)r.evaluateAt(u)===0&&(o[l]=this.field.inverse(u),l++);if(l!==s)throw O.getChecksumInstance();return o}findErrorMagnitudes(r,s,o){let l=s.getDegree(),u=new Int32Array(l);for(let x=1;x<=l;x++)u[l-x]=this.field.multiply(x,s.getCoefficient(x));let d=new Vt(this.field,u),h=o.length,g=new Int32Array(h);for(let x=0;x<h;x++){let w=this.field.inverse(o[x]),E=this.field.subtract(0,r.evaluateAt(w)),A=this.field.inverse(d.evaluateAt(w));g[x]=this.field.multiply(E,A)}return g}}class ki{constructor(r,s,o,l,u){r instanceof ki?this.constructor_2(r):this.constructor_1(r,s,o,l,u)}constructor_1(r,s,o,l,u){const d=s==null||o==null,h=l==null||u==null;if(d&&h)throw new V;d?(s=new de(0,l.getY()),o=new de(0,u.getY())):h&&(l=new de(r.getWidth()-1,s.getY()),u=new de(r.getWidth()-1,o.getY())),this.image=r,this.topLeft=s,this.bottomLeft=o,this.topRight=l,this.bottomRight=u,this.minX=Math.trunc(Math.min(s.getX(),o.getX())),this.maxX=Math.trunc(Math.max(l.getX(),u.getX())),this.minY=Math.trunc(Math.min(s.getY(),l.getY())),this.maxY=Math.trunc(Math.max(o.getY(),u.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,s){return r==null?s:s==null?r:new ki(r.image,r.topLeft,r.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(r,s,o){let l=this.topLeft,u=this.bottomLeft,d=this.topRight,h=this.bottomRight;if(r>0){let g=o?this.topLeft:this.topRight,x=Math.trunc(g.getY()-r);x<0&&(x=0);let w=new de(g.getX(),x);o?l=w:d=w}if(s>0){let g=o?this.bottomLeft:this.bottomRight,x=Math.trunc(g.getY()+s);x>=this.image.getHeight()&&(x=this.image.getHeight()-1);let w=new de(g.getX(),x);o?u=w:h=w}return new ki(this.image,l,u,d,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class uw{constructor(r,s,o,l){this.columnCount=r,this.errorCorrectionLevel=l,this.rowCountUpperPart=s,this.rowCountLowerPart=o,this.rowCount=s+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class go{constructor(){this.buffer=""}static form(r,s){let o=-1;function l(d,h,g,x,w,E){if(d==="%%")return"%";if(s[++o]===void 0)return;d=x?parseInt(x.substr(1)):void 0;let A=w?parseInt(w.substr(1)):void 0,b;switch(E){case"s":b=s[o];break;case"c":b=s[o][0];break;case"f":b=parseFloat(s[o]).toFixed(d);break;case"p":b=parseFloat(s[o]).toPrecision(d);break;case"e":b=parseFloat(s[o]).toExponential(d);break;case"x":b=parseInt(s[o]).toString(A||16);break;case"d":b=parseFloat(parseInt(s[o],A||10).toPrecision(d)).toFixed(0);break}b=typeof b=="object"?JSON.stringify(b):(+b).toString(A);let D=parseInt(g),M=g&&g[0]+""=="0"?"0":" ";for(;b.length<D;)b=h!==void 0?b+M:M+b;return b}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,l)}format(r,...s){this.buffer+=go.form(r,s)}toString(){return this.buffer}}class po{constructor(r){this.boundingBox=new ki(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let s=this.getCodeword(r);if(s!=null)return s;for(let o=1;o<po.MAX_NEARBY_DISTANCE;o++){let l=this.imageRowToCodewordIndex(r)-o;if(l>=0&&(s=this.codewords[l],s!=null)||(l=this.imageRowToCodewordIndex(r)+o,l<this.codewords.length&&(s=this.codewords[l],s!=null)))return s}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,s){this.codewords[this.imageRowToCodewordIndex(r)]=s}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new go;let s=0;for(const o of this.codewords){if(o==null){r.format("%3d:    |   %n",s++);continue}r.format("%3d: %3d|%3d%n",s++,o.getRowNumber(),o.getValue())}return r.toString()}}po.MAX_NEARBY_DISTANCE=5;class mo{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let s=this.values.get(r);s==null&&(s=0),s++,this.values.set(r,s)}getValue(){let r=-1,s=new Array;for(const[o,l]of this.values.entries()){const u={getKey:()=>o,getValue:()=>l};u.getValue()>r?(r=u.getValue(),s=[],s.push(u.getKey())):u.getValue()===r&&s.push(u.getKey())}return we.toIntArray(s)}getConfidence(r){return this.values.get(r)}}class k1 extends po{constructor(r,s){super(r),this._isLeft=s}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,r);let o=this.getBoundingBox(),l=this._isLeft?o.getTopLeft():o.getTopRight(),u=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.imageRowToCodewordIndex(Math.trunc(u.getY())),g=-1,x=1,w=0;for(let E=d;E<h;E++){if(s[E]==null)continue;let A=s[E],b=A.getRowNumber()-g;if(b===0)w++;else if(b===1)x=Math.max(x,w),w=1,g=A.getRowNumber();else if(b<0||A.getRowNumber()>=r.getRowCount()||b>E)s[E]=null;else{let D;x>2?D=(x-2)*b:D=b;let M=D>=E;for(let B=1;B<=D&&!M;B++)M=s[E-B]!=null;M?s[E]=null:(g=A.getRowNumber(),w=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let s=new Int32Array(r.getRowCount());for(let o of this.getCodewords())if(o!=null){let l=o.getRowNumber();if(l>=s.length)continue;s[l]++}return s}adjustIncompleteIndicatorColumnRowNumbers(r){let s=this.getBoundingBox(),o=this._isLeft?s.getTopLeft():s.getTopRight(),l=this._isLeft?s.getBottomLeft():s.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.getCodewords(),g=-1;for(let x=u;x<d;x++){if(h[x]==null)continue;let w=h[x];w.setRowNumberAsRowIndicatorColumn();let E=w.getRowNumber()-g;E===0||(E===1?g=w.getRowNumber():w.getRowNumber()>=r.getRowCount()?h[x]=null:g=w.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),s=new mo,o=new mo,l=new mo,u=new mo;for(let h of r){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let g=h.getValue()%30,x=h.getRowNumber();switch(this._isLeft||(x+=2),x%3){case 0:o.setValue(g*3+1);break;case 1:u.setValue(g/3),l.setValue(g%3);break;case 2:s.setValue(g+1);break}}if(s.getValue().length===0||o.getValue().length===0||l.getValue().length===0||u.getValue().length===0||s.getValue()[0]<1||o.getValue()[0]+l.getValue()[0]<we.MIN_ROWS_IN_BARCODE||o.getValue()[0]+l.getValue()[0]>we.MAX_ROWS_IN_BARCODE)return null;let d=new uw(s.getValue()[0],o.getValue()[0],l.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(r,d),d}removeIncorrectCodewords(r,s){for(let o=0;o<r.length;o++){let l=r[o];if(r[o]==null)continue;let u=l.getValue()%30,d=l.getRowNumber();if(d>s.getRowCount()){r[o]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:u*3+1!==s.getRowCountUpperPart()&&(r[o]=null);break;case 1:(Math.trunc(u/3)!==s.getErrorCorrectionLevel()||u%3!==s.getRowCountLowerPart())&&(r[o]=null);break;case 2:u+1!==s.getColumnCount()&&(r[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class xo{constructor(r,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=we.MAX_CODEWORDS_IN_BARCODE,s;do s=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let o=this.detectionResultColumns[s].getCodewords();for(let l=0;l<o.length;l++)o[l]!=null&&(o[l].hasValidRowNumber()||this.adjustRowNumbers(s,l,o))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<r.length;o++)if(r[o]!=null&&s[o]!=null&&r[o].getRowNumber()===s[o].getRowNumber())for(let l=1;l<=this.barcodeColumnCount;l++){let u=this.detectionResultColumns[l].getCodewords()[o];u!=null&&(u.setRowNumber(r[o].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[l].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<s.length;o++){if(s[o]==null)continue;let l=s[o].getRowNumber(),u=0;for(let d=this.barcodeColumnCount+1;d>0&&u<this.ADJUST_ROW_NUMBER_SKIP;d--){let h=this.detectionResultColumns[d].getCodewords()[o];h!=null&&(u=xo.adjustRowNumberIfValid(l,u,h),h.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,s=this.detectionResultColumns[0].getCodewords();for(let o=0;o<s.length;o++){if(s[o]==null)continue;let l=s[o].getRowNumber(),u=0;for(let d=1;d<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;d++){let h=this.detectionResultColumns[d].getCodewords()[o];h!=null&&(u=xo.adjustRowNumberIfValid(l,u,h),h.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,s,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(r)?(o.setRowNumber(r),s=0):++s),s}adjustRowNumbers(r,s,o){if(!this.detectionResultColumns[r-1])return;let l=o[s],u=this.detectionResultColumns[r-1].getCodewords(),d=u;this.detectionResultColumns[r+1]!=null&&(d=this.detectionResultColumns[r+1].getCodewords());let h=new Array(14);h[2]=u[s],h[3]=d[s],s>0&&(h[0]=o[s-1],h[4]=u[s-1],h[5]=d[s-1]),s>1&&(h[8]=o[s-2],h[10]=u[s-2],h[11]=d[s-2]),s<o.length-1&&(h[1]=o[s+1],h[6]=u[s+1],h[7]=d[s+1]),s<o.length-2&&(h[9]=o[s+2],h[12]=u[s+2],h[13]=d[s+2]);for(let g of h)if(xo.adjustRowNumber(l,g))return}static adjustRowNumber(r,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===r.getBucket()?(r.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,s){this.detectionResultColumns[r]=s}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new go;for(let o=0;o<r.getCodewords().length;o++){s.format("CW %3d:",o);for(let l=0;l<this.barcodeColumnCount+2;l++){if(this.detectionResultColumns[l]==null){s.format("    |   ");continue}let u=this.detectionResultColumns[l].getCodewords()[o];if(u==null){s.format("    |   ");continue}s.format(" %3d|%3d",u.getRowNumber(),u.getValue())}s.format("%n")}return s.toString()}}class yo{constructor(r,s,o,l){this.rowNumber=yo.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(s),this.bucket=Math.trunc(o),this.value=Math.trunc(l)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==yo.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}yo.BARCODE_ROW_UNKNOWN=-1;class yn{static initialize(){for(let r=0;r<we.SYMBOL_TABLE.length;r++){let s=we.SYMBOL_TABLE[r],o=s&1;for(let l=0;l<we.BARS_IN_MODULE;l++){let u=0;for(;(s&1)===o;)u+=1,s>>=1;o=s&1,yn.RATIOS_TABLE[r]||(yn.RATIOS_TABLE[r]=new Array(we.BARS_IN_MODULE)),yn.RATIOS_TABLE[r][we.BARS_IN_MODULE-l-1]=Math.fround(u/we.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let s=yn.getDecodedCodewordValue(yn.sampleBitCounts(r));return s!==-1?s:yn.getClosestDecodedValue(r)}static sampleBitCounts(r){let s=Me.sum(r),o=new Int32Array(we.BARS_IN_MODULE),l=0,u=0;for(let d=0;d<we.MODULES_IN_CODEWORD;d++){let h=s/(2*we.MODULES_IN_CODEWORD)+d*s/we.MODULES_IN_CODEWORD;u+r[l]<=h&&(u+=r[l],l++),o[l]++}return o}static getDecodedCodewordValue(r){let s=yn.getBitValue(r);return we.getCodeword(s)===-1?-1:s}static getBitValue(r){let s=0;for(let o=0;o<r.length;o++)for(let l=0;l<r[o];l++)s=s<<1|(o%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(r){let s=Me.sum(r),o=new Array(we.BARS_IN_MODULE);if(s>1)for(let d=0;d<o.length;d++)o[d]=Math.fround(r[d]/s);let l=Ya.MAX_VALUE,u=-1;this.bSymbolTableReady||yn.initialize();for(let d=0;d<yn.RATIOS_TABLE.length;d++){let h=0,g=yn.RATIOS_TABLE[d];for(let x=0;x<we.BARS_IN_MODULE;x++){let w=Math.fround(g[x]-o[x]);if(h+=Math.fround(w*w),h>=l)break}h<l&&(l=h,u=we.SYMBOL_TABLE[d])}return u}}yn.bSymbolTableReady=!1,yn.RATIOS_TABLE=new Array(we.SYMBOL_TABLE.length).map(C=>new Array(we.BARS_IN_MODULE));class D1{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class M1{static parseLong(r,s=void 0){return parseInt(r,s)}}class P1 extends m{}P1.kind="NullPointerException";class dw{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,s,o){if(r==null)throw new P1;if(s<0||s>r.length||o<0||s+o>r.length||s+o<0)throw new K;if(o===0)return;for(let l=0;l<o;l++)this.write(r[s+l])}flush(){}close(){}}class fw extends m{}class hw extends dw{constructor(r=32){if(super(),this.count=0,r<0)throw new _("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let o=this.buf.length<<1;if(o-r<0&&(o=r),o<0){if(r<0)throw new fw;o=N.MAX_VALUE}this.buf=R.copyOfUint8Array(this.buf,o)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,s,o){if(s<0||s>r.length||o<0||s+o-r.length>0)throw new K;this.ensureCapacity(this.count+o),L.arraycopy(r,s,this.buf,this.count,o),this.count+=o}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return R.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var Ve;(function(C){C[C.ALPHA=0]="ALPHA",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.PUNCT=3]="PUNCT",C[C.ALPHA_SHIFT=4]="ALPHA_SHIFT",C[C.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ve||(Ve={}));function L1(){if(typeof window<"u")return window.BigInt||null;if(typeof Co<"u")return Co.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let el;function Zr(C){if(typeof el>"u"&&(el=L1()),el===null)throw new Error("BigInt is not supported!");return el(C)}function gw(){let C=[];C[0]=Zr(1);let r=Zr(900);C[1]=r;for(let s=2;s<16;s++)C[s]=C[s-1]*r;return C}class W{static decode(r,s){let o=new ae(""),l=X.ISO8859_1;o.enableDecoding(l);let u=1,d=r[u++],h=new D1;for(;u<r[0];){switch(d){case W.TEXT_COMPACTION_MODE_LATCH:u=W.textCompaction(r,u,o);break;case W.BYTE_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH_6:u=W.byteCompaction(d,r,l,u,o);break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[u++]);break;case W.NUMERIC_COMPACTION_MODE_LATCH:u=W.numericCompaction(r,u,o);break;case W.ECI_CHARSET:X.getCharacterSetECIByValue(r[u++]);break;case W.ECI_GENERAL_PURPOSE:u+=2;break;case W.ECI_USER_DEFINED:u++;break;case W.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=W.decodeMacroBlock(r,u,h);break;case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case W.MACRO_PDF417_TERMINATOR:throw new j;default:u--,u=W.textCompaction(r,u,o);break}if(u<r.length)d=r[u++];else throw j.getFormatInstance()}if(o.length()===0)throw j.getFormatInstance();let g=new oe(null,o.toString(),null,s);return g.setOther(h),g}static decodeMacroBlock(r,s,o){if(s+W.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw j.getFormatInstance();let l=new Int32Array(W.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<W.NUMBER_OF_SEQUENCE_CODEWORDS;h++,s++)l[h]=r[s];o.setSegmentIndex(N.parseInt(W.decodeBase900toBase10(l,W.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new ae;s=W.textCompaction(r,s,u),o.setFileId(u.toString());let d=-1;for(r[s]===W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=s+1);s<r[0];)switch(r[s]){case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,r[s]){case W.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new ae;s=W.textCompaction(r,s+1,h),o.setFileName(h.toString());break;case W.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let g=new ae;s=W.textCompaction(r,s+1,g),o.setSender(g.toString());break;case W.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let x=new ae;s=W.textCompaction(r,s+1,x),o.setAddressee(x.toString());break;case W.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let w=new ae;s=W.numericCompaction(r,s+1,w),o.setSegmentCount(N.parseInt(w.toString()));break;case W.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let E=new ae;s=W.numericCompaction(r,s+1,E),o.setTimestamp(M1.parseLong(E.toString()));break;case W.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let A=new ae;s=W.numericCompaction(r,s+1,A),o.setChecksum(N.parseInt(A.toString()));break;case W.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let b=new ae;s=W.numericCompaction(r,s+1,b),o.setFileSize(M1.parseLong(b.toString()));break;default:throw j.getFormatInstance()}break;case W.MACRO_PDF417_TERMINATOR:s++,o.setLastSegment(!0);break;default:throw j.getFormatInstance()}if(d!==-1){let h=s-d;o.isLastSegment()&&h--,o.setOptionalData(R.copyOfRange(r,d,d+h))}return s}static textCompaction(r,s,o){let l=new Int32Array((r[0]-s)*2),u=new Int32Array((r[0]-s)*2),d=0,h=!1;for(;s<r[0]&&!h;){let g=r[s++];if(g<W.TEXT_COMPACTION_MODE_LATCH)l[d]=g/30,l[d+1]=g%30,d+=2;else switch(g){case W.TEXT_COMPACTION_MODE_LATCH:l[d++]=W.TEXT_COMPACTION_MODE_LATCH;break;case W.BYTE_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH_6:case W.NUMERIC_COMPACTION_MODE_LATCH:case W.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case W.MACRO_PDF417_TERMINATOR:s--,h=!0;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l[d]=W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,g=r[s++],u[d]=g,d++;break}}return W.decodeTextCompaction(l,u,d,o),s}static decodeTextCompaction(r,s,o,l){let u=Ve.ALPHA,d=Ve.ALPHA,h=0;for(;h<o;){let g=r[h],x="";switch(u){case Ve.ALPHA:if(g<26)x=String.fromCharCode(65+g);else switch(g){case 26:x=" ";break;case W.LL:u=Ve.LOWER;break;case W.ML:u=Ve.MIXED;break;case W.PS:d=u,u=Ve.PUNCT_SHIFT;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[h]);break;case W.TEXT_COMPACTION_MODE_LATCH:u=Ve.ALPHA;break}break;case Ve.LOWER:if(g<26)x=String.fromCharCode(97+g);else switch(g){case 26:x=" ";break;case W.AS:d=u,u=Ve.ALPHA_SHIFT;break;case W.ML:u=Ve.MIXED;break;case W.PS:d=u,u=Ve.PUNCT_SHIFT;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[h]);break;case W.TEXT_COMPACTION_MODE_LATCH:u=Ve.ALPHA;break}break;case Ve.MIXED:if(g<W.PL)x=W.MIXED_CHARS[g];else switch(g){case W.PL:u=Ve.PUNCT;break;case 26:x=" ";break;case W.LL:u=Ve.LOWER;break;case W.AL:u=Ve.ALPHA;break;case W.PS:d=u,u=Ve.PUNCT_SHIFT;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[h]);break;case W.TEXT_COMPACTION_MODE_LATCH:u=Ve.ALPHA;break}break;case Ve.PUNCT:if(g<W.PAL)x=W.PUNCT_CHARS[g];else switch(g){case W.PAL:u=Ve.ALPHA;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[h]);break;case W.TEXT_COMPACTION_MODE_LATCH:u=Ve.ALPHA;break}break;case Ve.ALPHA_SHIFT:if(u=d,g<26)x=String.fromCharCode(65+g);else switch(g){case 26:x=" ";break;case W.TEXT_COMPACTION_MODE_LATCH:u=Ve.ALPHA;break}break;case Ve.PUNCT_SHIFT:if(u=d,g<W.PAL)x=W.PUNCT_CHARS[g];else switch(g){case W.PAL:u=Ve.ALPHA;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[h]);break;case W.TEXT_COMPACTION_MODE_LATCH:u=Ve.ALPHA;break}break}x!==""&&l.append(x),h++}}static byteCompaction(r,s,o,l,u){let d=new hw,h=0,g=0,x=!1;switch(r){case W.BYTE_COMPACTION_MODE_LATCH:let w=new Int32Array(6),E=s[l++];for(;l<s[0]&&!x;)switch(w[h++]=E,g=900*g+E,E=s[l++],E){case W.TEXT_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH:case W.NUMERIC_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH_6:case W.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case W.MACRO_PDF417_TERMINATOR:l--,x=!0;break;default:if(h%5===0&&h>0){for(let A=0;A<6;++A)d.write(Number(Zr(g)>>Zr(8*(5-A))));g=0,h=0}break}l===s[0]&&E<W.TEXT_COMPACTION_MODE_LATCH&&(w[h++]=E);for(let A=0;A<h;A++)d.write(w[A]);break;case W.BYTE_COMPACTION_MODE_LATCH_6:for(;l<s[0]&&!x;){let A=s[l++];if(A<W.TEXT_COMPACTION_MODE_LATCH)h++,g=900*g+A;else switch(A){case W.TEXT_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH:case W.NUMERIC_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH_6:case W.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case W.MACRO_PDF417_TERMINATOR:l--,x=!0;break}if(h%5===0&&h>0){for(let b=0;b<6;++b)d.write(Number(Zr(g)>>Zr(8*(5-b))));g=0,h=0}}break}return u.append(je.decode(d.toByteArray(),o)),l}static numericCompaction(r,s,o){let l=0,u=!1,d=new Int32Array(W.MAX_NUMERIC_CODEWORDS);for(;s<r[0]&&!u;){let h=r[s++];if(s===r[0]&&(u=!0),h<W.TEXT_COMPACTION_MODE_LATCH)d[l]=h,l++;else switch(h){case W.TEXT_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH_6:case W.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case W.MACRO_PDF417_TERMINATOR:s--,u=!0;break}(l%W.MAX_NUMERIC_CODEWORDS===0||h===W.NUMERIC_COMPACTION_MODE_LATCH||u)&&l>0&&(o.append(W.decodeBase900toBase10(d,l)),l=0)}return s}static decodeBase900toBase10(r,s){let o=Zr(0);for(let u=0;u<s;u++)o+=W.EXP900[s-u-1]*Zr(r[u]);let l=o.toString();if(l.charAt(0)!=="1")throw new j;return l.substring(1)}}W.TEXT_COMPACTION_MODE_LATCH=900,W.BYTE_COMPACTION_MODE_LATCH=901,W.NUMERIC_COMPACTION_MODE_LATCH=902,W.BYTE_COMPACTION_MODE_LATCH_6=924,W.ECI_USER_DEFINED=925,W.ECI_GENERAL_PURPOSE=926,W.ECI_CHARSET=927,W.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,W.MACRO_PDF417_TERMINATOR=922,W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,W.MAX_NUMERIC_CODEWORDS=15,W.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,W.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,W.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,W.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,W.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,W.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,W.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,W.PL=25,W.LL=27,W.AS=27,W.ML=28,W.AL=28,W.PS=29,W.PAL=29,W.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,W.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",W.EXP900=L1()?gw():[],W.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ae{constructor(){}static decode(r,s,o,l,u,d,h){let g=new ki(r,s,o,l,u),x=null,w=null,E;for(let D=!0;;D=!1){if(s!=null&&(x=Ae.getRowIndicatorColumn(r,g,s,!0,d,h)),l!=null&&(w=Ae.getRowIndicatorColumn(r,g,l,!1,d,h)),E=Ae.merge(x,w),E==null)throw V.getNotFoundInstance();let M=E.getBoundingBox();if(D&&M!=null&&(M.getMinY()<g.getMinY()||M.getMaxY()>g.getMaxY()))g=M;else break}E.setBoundingBox(g);let A=E.getBarcodeColumnCount()+1;E.setDetectionResultColumn(0,x),E.setDetectionResultColumn(A,w);let b=x!=null;for(let D=1;D<=A;D++){let M=b?D:A-D;if(E.getDetectionResultColumn(M)!==void 0)continue;let B;M===0||M===A?B=new k1(g,M===0):B=new po(g),E.setDetectionResultColumn(M,B);let z=-1,$=z;for(let ee=g.getMinY();ee<=g.getMaxY();ee++){if(z=Ae.getStartColumn(E,M,ee,b),z<0||z>g.getMaxX()){if($===-1)continue;z=$}let Z=Ae.detectCodeword(r,g.getMinX(),g.getMaxX(),b,z,ee,d,h);Z!=null&&(B.setCodeword(ee,Z),$=z,d=Math.min(d,Z.getWidth()),h=Math.max(h,Z.getWidth()))}}return Ae.createDecoderResult(E)}static merge(r,s){if(r==null&&s==null)return null;let o=Ae.getBarcodeMetadata(r,s);if(o==null)return null;let l=ki.merge(Ae.adjustBoundingBox(r),Ae.adjustBoundingBox(s));return new xo(o,l)}static adjustBoundingBox(r){if(r==null)return null;let s=r.getRowHeights();if(s==null)return null;let o=Ae.getMax(s),l=0;for(let h of s)if(l+=o-h,h>0)break;let u=r.getCodewords();for(let h=0;l>0&&u[h]==null;h++)l--;let d=0;for(let h=s.length-1;h>=0&&(d+=o-s[h],!(s[h]>0));h--);for(let h=u.length-1;d>0&&u[h]==null;h--)d--;return r.getBoundingBox().addMissingRows(l,d,r.isLeft())}static getMax(r){let s=-1;for(let o of r)s=Math.max(s,o);return s}static getBarcodeMetadata(r,s){let o;if(r==null||(o=r.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let l;return s==null||(l=s.getBarcodeMetadata())==null?o:o.getColumnCount()!==l.getColumnCount()&&o.getErrorCorrectionLevel()!==l.getErrorCorrectionLevel()&&o.getRowCount()!==l.getRowCount()?null:o}static getRowIndicatorColumn(r,s,o,l,u,d){let h=new k1(s,l);for(let g=0;g<2;g++){let x=g===0?1:-1,w=Math.trunc(Math.trunc(o.getX()));for(let E=Math.trunc(Math.trunc(o.getY()));E<=s.getMaxY()&&E>=s.getMinY();E+=x){let A=Ae.detectCodeword(r,0,r.getWidth(),l,w,E,u,d);A!=null&&(h.setCodeword(E,A),l?w=A.getStartX():w=A.getEndX())}}return h}static adjustCodewordCount(r,s){let o=s[0][1],l=o.getValue(),u=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-Ae.getNumberOfECCodeWords(r.getBarcodeECLevel());if(l.length===0){if(u<1||u>we.MAX_CODEWORDS_IN_BARCODE)throw V.getNotFoundInstance();o.setValue(u)}else l[0]!==u&&o.setValue(u)}static createDecoderResult(r){let s=Ae.createBarcodeMatrix(r);Ae.adjustCodewordCount(r,s);let o=new Array,l=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),u=[],d=new Array;for(let g=0;g<r.getBarcodeRowCount();g++)for(let x=0;x<r.getBarcodeColumnCount();x++){let w=s[g][x+1].getValue(),E=g*r.getBarcodeColumnCount()+x;w.length===0?o.push(E):w.length===1?l[E]=w[0]:(d.push(E),u.push(w))}let h=new Array(u.length);for(let g=0;g<h.length;g++)h[g]=u[g];return Ae.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),l,we.toIntArray(o),we.toIntArray(d),h)}static createDecoderResultFromAmbiguousValues(r,s,o,l,u){let d=new Int32Array(l.length),h=100;for(;h-- >0;){for(let g=0;g<d.length;g++)s[l[g]]=u[g][d[g]];try{return Ae.decodeCodewords(s,r,o)}catch(g){if(!(g instanceof O))throw g}if(d.length===0)throw O.getChecksumInstance();for(let g=0;g<d.length;g++)if(d[g]<u[g].length-1){d[g]++;break}else if(d[g]=0,g===d.length-1)throw O.getChecksumInstance()}throw O.getChecksumInstance()}static createBarcodeMatrix(r){let s=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let l=0;l<s.length;l++)for(let u=0;u<s[l].length;u++)s[l][u]=new mo;let o=0;for(let l of r.getDetectionResultColumns()){if(l!=null){for(let u of l.getCodewords())if(u!=null){let d=u.getRowNumber();if(d>=0){if(d>=s.length)continue;s[d][o].setValue(u.getValue())}}}o++}return s}static isValidBarcodeColumn(r,s){return s>=0&&s<=r.getBarcodeColumnCount()+1}static getStartColumn(r,s,o,l){let u=l?1:-1,d=null;if(Ae.isValidBarcodeColumn(r,s-u)&&(d=r.getDetectionResultColumn(s-u).getCodeword(o)),d!=null)return l?d.getEndX():d.getStartX();if(d=r.getDetectionResultColumn(s).getCodewordNearby(o),d!=null)return l?d.getStartX():d.getEndX();if(Ae.isValidBarcodeColumn(r,s-u)&&(d=r.getDetectionResultColumn(s-u).getCodewordNearby(o)),d!=null)return l?d.getEndX():d.getStartX();let h=0;for(;Ae.isValidBarcodeColumn(r,s-u);){s-=u;for(let g of r.getDetectionResultColumn(s).getCodewords())if(g!=null)return(l?g.getEndX():g.getStartX())+u*h*(g.getEndX()-g.getStartX());h++}return l?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,s,o,l,u,d,h,g){u=Ae.adjustCodewordStartColumn(r,s,o,l,u,d);let x=Ae.getModuleBitCount(r,s,o,l,u,d);if(x==null)return null;let w,E=Me.sum(x);if(l)w=u+E;else{for(let D=0;D<x.length/2;D++){let M=x[D];x[D]=x[x.length-1-D],x[x.length-1-D]=M}w=u,u=w-E}if(!Ae.checkCodewordSkew(E,h,g))return null;let A=yn.getDecodedValue(x),b=we.getCodeword(A);return b===-1?null:new yo(u,w,Ae.getCodewordBucketNumber(A),b)}static getModuleBitCount(r,s,o,l,u,d){let h=u,g=new Int32Array(8),x=0,w=l?1:-1,E=l;for(;(l?h<o:h>=s)&&x<g.length;)r.get(h,d)===E?(g[x]++,h+=w):(x++,E=!E);return x===g.length||h===(l?o:s)&&x===g.length-1?g:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,s,o,l,u,d){let h=u,g=l?-1:1;for(let x=0;x<2;x++){for(;(l?h>=s:h<o)&&l===r.get(h,d);){if(Math.abs(u-h)>Ae.CODEWORD_SKEW_SIZE)return u;h+=g}g=-g,l=!l}return h}static checkCodewordSkew(r,s,o){return s-Ae.CODEWORD_SKEW_SIZE<=r&&r<=o+Ae.CODEWORD_SKEW_SIZE}static decodeCodewords(r,s,o){if(r.length===0)throw j.getFormatInstance();let l=1<<s+1,u=Ae.correctErrors(r,o,l);Ae.verifyCodewordCount(r,l);let d=W.decode(r,""+s);return d.setErrorsCorrected(u),d.setErasures(o.length),d}static correctErrors(r,s,o){if(s!=null&&s.length>o/2+Ae.MAX_ERRORS||o<0||o>Ae.MAX_EC_CODEWORDS)throw O.getChecksumInstance();return Ae.errorCorrection.decode(r,o,s)}static verifyCodewordCount(r,s){if(r.length<4)throw j.getFormatInstance();let o=r[0];if(o>r.length)throw j.getFormatInstance();if(o===0)if(s<r.length)r[0]=r.length-s;else throw j.getFormatInstance()}static getBitCountForCodeword(r){let s=new Int32Array(8),o=0,l=s.length-1;for(;!((r&1)!==o&&(o=r&1,l--,l<0));)s[l]++,r>>=1;return s}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return Ae.getCodewordBucketNumber(Ae.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let s=new go;for(let o=0;o<r.length;o++){s.format("Row %2d: ",o);for(let l=0;l<r[o].length;l++){let u=r[o][l];u.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}s.format("%n")}return s.toString()}}Ae.CODEWORD_SKEW_SIZE=2,Ae.MAX_ERRORS=3,Ae.MAX_EC_CODEWORDS=512,Ae.errorCorrection=new O1;class Ht{decode(r,s=null){let o=Ht.decode(r,s,!1);if(o==null||o.length===0||o[0]==null)throw V.getNotFoundInstance();return o[0]}decodeMultiple(r,s=null){try{return Ht.decode(r,s,!0)}catch(o){throw o instanceof j||o instanceof O?V.getNotFoundInstance():o}}static decode(r,s,o){const l=new Array,u=Se.detectMultiple(r,s,o);for(const d of u.getPoints()){const h=Ae.decode(u.getBits(),d[4],d[5],d[6],d[7],Ht.getMinCodewordWidth(d),Ht.getMaxCodewordWidth(d)),g=new nt(h.getText(),h.getRawBytes(),void 0,d,ue.PDF_417);g.putMetadata(Et.ERROR_CORRECTION_LEVEL,h.getECLevel());const x=h.getOther();x!=null&&g.putMetadata(Et.PDF417_EXTRA_METADATA,x),l.push(g)}return l.map(d=>d)}static getMaxWidth(r,s){return r==null||s==null?0:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMinWidth(r,s){return r==null||s==null?N.MAX_VALUE:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(Ht.getMaxWidth(r[0],r[4]),Ht.getMaxWidth(r[6],r[2])*we.MODULES_IN_CODEWORD/we.MODULES_IN_STOP_PATTERN),Math.max(Ht.getMaxWidth(r[1],r[5]),Ht.getMaxWidth(r[7],r[3])*we.MODULES_IN_CODEWORD/we.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(Ht.getMinWidth(r[0],r[4]),Ht.getMinWidth(r[6],r[2])*we.MODULES_IN_CODEWORD/we.MODULES_IN_STOP_PATTERN),Math.min(Ht.getMinWidth(r[1],r[5]),Ht.getMinWidth(r[7],r[3])*we.MODULES_IN_CODEWORD/we.MODULES_IN_STOP_PATTERN)))}reset(){}}class tl extends m{}tl.kind="ReaderException";class B1{constructor(r,s){this.verbose=r===!0,s&&this.setHints(s)}decode(r,s){return s&&this.setHints(s),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const s=!i(r)&&r.get(q.TRY_HARDER)===!0,o=i(r)?null:r.get(q.POSSIBLE_FORMATS),l=new Array;if(!i(o)){const u=o.some(d=>d===ue.UPC_A||d===ue.UPC_E||d===ue.EAN_13||d===ue.EAN_8||d===ue.CODABAR||d===ue.CODE_39||d===ue.CODE_93||d===ue.CODE_128||d===ue.ITF||d===ue.RSS_14||d===ue.RSS_EXPANDED);u&&!s&&l.push(new hs(r,this.verbose)),o.includes(ue.QR_CODE)&&l.push(new qr),o.includes(ue.DATA_MATRIX)&&l.push(new Kr),o.includes(ue.AZTEC)&&l.push(new qa),o.includes(ue.PDF_417)&&l.push(new Ht),u&&s&&l.push(new hs(r,this.verbose))}l.length===0&&(s||l.push(new hs(r,this.verbose)),l.push(new qr),l.push(new Kr),l.push(new qa),l.push(new Ht),s&&l.push(new hs(r,this.verbose))),this.readers=l}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new tl("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(r,this.hints)}catch(o){if(o instanceof tl)continue}throw new V("No MultiFormat Readers were able to detect the code.")}}class pw extends pn{constructor(r=null,s=500){const o=new B1;o.setHints(r),super(o,s)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class mw extends pn{constructor(r=500){super(new Ht,r)}}class xw extends pn{constructor(r=500){super(new qr,r)}}var Cu;(function(C){C[C.ERROR_CORRECTION=0]="ERROR_CORRECTION",C[C.CHARACTER_SET=1]="CHARACTER_SET",C[C.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",C[C.MIN_SIZE=3]="MIN_SIZE",C[C.MAX_SIZE=4]="MAX_SIZE",C[C.MARGIN=5]="MARGIN",C[C.PDF417_COMPACT=6]="PDF417_COMPACT",C[C.PDF417_COMPACTION=7]="PDF417_COMPACTION",C[C.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",C[C.AZTEC_LAYERS=9]="AZTEC_LAYERS",C[C.QR_VERSION=10]="QR_VERSION"})(Cu||(Cu={}));var Ot=Cu;class Eu{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new vt(r,Int32Array.from([1])))}buildGenerator(r){const s=this.cachedGenerators;if(r>=s.length){let o=s[s.length-1];const l=this.field;for(let u=s.length;u<=r;u++){const d=o.multiply(new vt(l,Int32Array.from([1,l.exp(u-1+l.getGeneratorBase())])));s.push(d),o=d}}return s[r]}encode(r,s){if(s===0)throw new _("No error correction bytes");const o=r.length-s;if(o<=0)throw new _("No data bytes provided");const l=this.buildGenerator(s),u=new Int32Array(o);L.arraycopy(r,0,u,0,o);let d=new vt(this.field,u);d=d.multiplyByMonomial(s,1);const g=d.divide(l)[1].getCoefficients(),x=s-g.length;for(let w=0;w<x;w++)r[o+w]=0;L.arraycopy(g,0,r,o+x,g.length)}}class xt{constructor(){}static applyMaskPenaltyRule1(r){return xt.applyMaskPenaltyRule1Internal(r,!0)+xt.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let s=0;const o=r.getArray(),l=r.getWidth(),u=r.getHeight();for(let d=0;d<u-1;d++){const h=o[d];for(let g=0;g<l-1;g++){const x=h[g];x===h[g+1]&&x===o[d+1][g]&&x===o[d+1][g+1]&&s++}}return xt.N2*s}static applyMaskPenaltyRule3(r){let s=0;const o=r.getArray(),l=r.getWidth(),u=r.getHeight();for(let d=0;d<u;d++)for(let h=0;h<l;h++){const g=o[d];h+6<l&&g[h]===1&&g[h+1]===0&&g[h+2]===1&&g[h+3]===1&&g[h+4]===1&&g[h+5]===0&&g[h+6]===1&&(xt.isWhiteHorizontal(g,h-4,h)||xt.isWhiteHorizontal(g,h+7,h+11))&&s++,d+6<u&&o[d][h]===1&&o[d+1][h]===0&&o[d+2][h]===1&&o[d+3][h]===1&&o[d+4][h]===1&&o[d+5][h]===0&&o[d+6][h]===1&&(xt.isWhiteVertical(o,h,d-4,d)||xt.isWhiteVertical(o,h,d+7,d+11))&&s++}return s*xt.N3}static isWhiteHorizontal(r,s,o){s=Math.max(s,0),o=Math.min(o,r.length);for(let l=s;l<o;l++)if(r[l]===1)return!1;return!0}static isWhiteVertical(r,s,o,l){o=Math.max(o,0),l=Math.min(l,r.length);for(let u=o;u<l;u++)if(r[u][s]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let s=0;const o=r.getArray(),l=r.getWidth(),u=r.getHeight();for(let g=0;g<u;g++){const x=o[g];for(let w=0;w<l;w++)x[w]===1&&s++}const d=r.getHeight()*r.getWidth();return Math.floor(Math.abs(s*2-d)*10/d)*xt.N4}static getDataMaskBit(r,s,o){let l,u;switch(r){case 0:l=o+s&1;break;case 1:l=o&1;break;case 2:l=s%3;break;case 3:l=(o+s)%3;break;case 4:l=Math.floor(o/2)+Math.floor(s/3)&1;break;case 5:u=o*s,l=(u&1)+u%3;break;case 6:u=o*s,l=(u&1)+u%3&1;break;case 7:u=o*s,l=u%3+(o+s&1)&1;break;default:throw new _("Invalid mask pattern: "+r)}return l===0}static applyMaskPenaltyRule1Internal(r,s){let o=0;const l=s?r.getHeight():r.getWidth(),u=s?r.getWidth():r.getHeight(),d=r.getArray();for(let h=0;h<l;h++){let g=0,x=-1;for(let w=0;w<u;w++){const E=s?d[h][w]:d[w][h];E===x?g++:(g>=5&&(o+=xt.N1+(g-5)),g=1,x=E)}g>=5&&(o+=xt.N1+(g-5))}return o}}xt.N1=3,xt.N2=3,xt.N3=40,xt.N4=10;class nl{constructor(r,s){this.width=r,this.height=s;const o=new Array(s);for(let l=0;l!==s;l++)o[l]=new Uint8Array(r);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(r,s){return this.bytes[s][r]}getArray(){return this.bytes}setNumber(r,s,o){this.bytes[s][r]=o}setBoolean(r,s,o){this.bytes[s][r]=o?1:0}clear(r){for(const s of this.bytes)R.fill(s,r)}equals(r){if(!(r instanceof nl))return!1;const s=r;if(this.width!==s.width||this.height!==s.height)return!1;for(let o=0,l=this.height;o<l;++o){const u=this.bytes[o],d=s.bytes[o];for(let h=0,g=this.width;h<g;++h)if(u[h]!==d[h])return!1}return!0}toString(){const r=new ae;for(let s=0,o=this.height;s<o;++s){const l=this.bytes[s];for(let u=0,d=this.width;u<d;++u)switch(l[u]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class Di{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new ae;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<Di.NUM_MASK_PATTERNS}}Di.NUM_MASK_PATTERNS=8;class Ke extends m{}Ke.kind="WriterException";class me{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,s,o,l,u){me.clearMatrix(u),me.embedBasicPatterns(o,u),me.embedTypeInfo(s,l,u),me.maybeEmbedVersionInfo(o,u),me.embedDataBits(r,l,u)}static embedBasicPatterns(r,s){me.embedPositionDetectionPatternsAndSeparators(s),me.embedDarkDotAtLeftBottomCorner(s),me.maybeEmbedPositionAdjustmentPatterns(r,s),me.embedTimingPatterns(s)}static embedTypeInfo(r,s,o){const l=new U;me.makeTypeInfoBits(r,s,l);for(let u=0,d=l.getSize();u<d;++u){const h=l.get(l.getSize()-1-u),g=me.TYPE_INFO_COORDINATES[u],x=g[0],w=g[1];if(o.setBoolean(x,w,h),u<8){const E=o.getWidth()-u-1;o.setBoolean(E,8,h)}else{const A=o.getHeight()-7+(u-8);o.setBoolean(8,A,h)}}}static maybeEmbedVersionInfo(r,s){if(r.getVersionNumber()<7)return;const o=new U;me.makeVersionInfoBits(r,o);let l=6*3-1;for(let u=0;u<6;++u)for(let d=0;d<3;++d){const h=o.get(l);l--,s.setBoolean(u,s.getHeight()-11+d,h),s.setBoolean(s.getHeight()-11+d,u,h)}}static embedDataBits(r,s,o){let l=0,u=-1,d=o.getWidth()-1,h=o.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);h>=0&&h<o.getHeight();){for(let g=0;g<2;++g){const x=d-g;if(!me.isEmpty(o.get(x,h)))continue;let w;l<r.getSize()?(w=r.get(l),++l):w=!1,s!==255&&xt.getDataMaskBit(s,x,h)&&(w=!w),o.setBoolean(x,h,w)}h+=u}u=-u,h+=u,d-=2}if(l!==r.getSize())throw new Ke("Not all bits consumed: "+l+"/"+r.getSize())}static findMSBSet(r){return 32-N.numberOfLeadingZeros(r)}static calculateBCHCode(r,s){if(s===0)throw new _("0 polynomial");const o=me.findMSBSet(s);for(r<<=o-1;me.findMSBSet(r)>=o;)r^=s<<me.findMSBSet(r)-o;return r}static makeTypeInfoBits(r,s,o){if(!Di.isValidMaskPattern(s))throw new Ke("Invalid mask pattern");const l=r.getBits()<<3|s;o.appendBits(l,5);const u=me.calculateBCHCode(l,me.TYPE_INFO_POLY);o.appendBits(u,10);const d=new U;if(d.appendBits(me.TYPE_INFO_MASK_PATTERN,15),o.xor(d),o.getSize()!==15)throw new Ke("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(r,s){s.appendBits(r.getVersionNumber(),6);const o=me.calculateBCHCode(r.getVersionNumber(),me.VERSION_INFO_POLY);if(s.appendBits(o,12),s.getSize()!==18)throw new Ke("should not happen but we got: "+s.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let s=8;s<r.getWidth()-8;++s){const o=(s+1)%2;me.isEmpty(r.get(s,6))&&r.setNumber(s,6,o),me.isEmpty(r.get(6,s))&&r.setNumber(6,s,o)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new Ke;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,s,o){for(let l=0;l<8;++l){if(!me.isEmpty(o.get(r+l,s)))throw new Ke;o.setNumber(r+l,s,0)}}static embedVerticalSeparationPattern(r,s,o){for(let l=0;l<7;++l){if(!me.isEmpty(o.get(r,s+l)))throw new Ke;o.setNumber(r,s+l,0)}}static embedPositionAdjustmentPattern(r,s,o){for(let l=0;l<5;++l){const u=me.POSITION_ADJUSTMENT_PATTERN[l];for(let d=0;d<5;++d)o.setNumber(r+d,s+l,u[d])}}static embedPositionDetectionPattern(r,s,o){for(let l=0;l<7;++l){const u=me.POSITION_DETECTION_PATTERN[l];for(let d=0;d<7;++d)o.setNumber(r+d,s+l,u[d])}}static embedPositionDetectionPatternsAndSeparators(r){const s=me.POSITION_DETECTION_PATTERN[0].length;me.embedPositionDetectionPattern(0,0,r),me.embedPositionDetectionPattern(r.getWidth()-s,0,r),me.embedPositionDetectionPattern(0,r.getWidth()-s,r);const o=8;me.embedHorizontalSeparationPattern(0,o-1,r),me.embedHorizontalSeparationPattern(r.getWidth()-o,o-1,r),me.embedHorizontalSeparationPattern(0,r.getWidth()-o,r);const l=7;me.embedVerticalSeparationPattern(l,0,r),me.embedVerticalSeparationPattern(r.getHeight()-l-1,0,r),me.embedVerticalSeparationPattern(l,r.getHeight()-l,r)}static maybeEmbedPositionAdjustmentPatterns(r,s){if(r.getVersionNumber()<2)return;const o=r.getVersionNumber()-1,l=me.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let u=0,d=l.length;u!==d;u++){const h=l[u];if(h>=0)for(let g=0;g!==d;g++){const x=l[g];x>=0&&me.isEmpty(s.get(x,h))&&me.embedPositionAdjustmentPattern(x-2,h-2,s)}}}}me.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),me.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),me.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),me.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),me.VERSION_INFO_POLY=7973,me.TYPE_INFO_POLY=1335,me.TYPE_INFO_MASK_PATTERN=21522;class yw{constructor(r,s){this.dataBytes=r,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class rt{constructor(){}static calculateMaskPenalty(r){return xt.applyMaskPenaltyRule1(r)+xt.applyMaskPenaltyRule2(r)+xt.applyMaskPenaltyRule3(r)+xt.applyMaskPenaltyRule4(r)}static encode(r,s,o=null){let l=rt.DEFAULT_BYTE_MODE_ENCODING;const u=o!==null&&o.get(Ot.CHARACTER_SET)!==void 0;u&&(l=o.get(Ot.CHARACTER_SET).toString());const d=this.chooseMode(r,l),h=new U;if(d===pe.BYTE&&(u||rt.DEFAULT_BYTE_MODE_ENCODING!==l)){const ee=X.getCharacterSetECIByName(l);ee!==void 0&&this.appendECI(ee,h)}this.appendModeInfo(d,h);const g=new U;this.appendBytes(r,d,g,l);let x;if(o!==null&&o.get(Ot.QR_VERSION)!==void 0){const ee=Number.parseInt(o.get(Ot.QR_VERSION).toString(),10);x=he.getVersionForNumber(ee);const Z=this.calculateBitsNeeded(d,h,g,x);if(!this.willFit(Z,x,s))throw new Ke("Data too big for requested version")}else x=this.recommendVersion(s,d,h,g);const w=new U;w.appendBitArray(h);const E=d===pe.BYTE?g.getSizeInBytes():r.length;this.appendLengthInfo(E,x,d,w),w.appendBitArray(g);const A=x.getECBlocksForLevel(s),b=x.getTotalCodewords()-A.getTotalECCodewords();this.terminateBits(b,w);const D=this.interleaveWithECBytes(w,x.getTotalCodewords(),b,A.getNumBlocks()),M=new Di;M.setECLevel(s),M.setMode(d),M.setVersion(x);const B=x.getDimensionForVersion(),z=new nl(B,B),$=this.chooseMaskPattern(D,s,x,z);return M.setMaskPattern($),me.buildMatrix(D,s,x,$,z),M.setMatrix(z),M}static recommendVersion(r,s,o,l){const u=this.calculateBitsNeeded(s,o,l,he.getVersionForNumber(1)),d=this.chooseVersion(u,r),h=this.calculateBitsNeeded(s,o,l,d);return this.chooseVersion(h,r)}static calculateBitsNeeded(r,s,o,l){return s.getSize()+r.getCharacterCountBits(l)+o.getSize()}static getAlphanumericCode(r){return r<rt.ALPHANUMERIC_TABLE.length?rt.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,s=null){if(X.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(r))return pe.KANJI;let o=!1,l=!1;for(let u=0,d=r.length;u<d;++u){const h=r.charAt(u);if(rt.isDigit(h))o=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)l=!0;else return pe.BYTE}return l?pe.ALPHANUMERIC:o?pe.NUMERIC:pe.BYTE}static isOnlyDoubleByteKanji(r){let s;try{s=je.encode(r,X.SJIS)}catch{return!1}const o=s.length;if(o%2!==0)return!1;for(let l=0;l<o;l+=2){const u=s[l]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(r,s,o,l){let u=Number.MAX_SAFE_INTEGER,d=-1;for(let h=0;h<Di.NUM_MASK_PATTERNS;h++){me.buildMatrix(r,s,o,h,l);let g=this.calculateMaskPenalty(l);g<u&&(u=g,d=h)}return d}static chooseVersion(r,s){for(let o=1;o<=40;o++){const l=he.getVersionForNumber(o);if(rt.willFit(r,l,s))return l}throw new Ke("Data too big")}static willFit(r,s,o){const l=s.getTotalCodewords(),d=s.getECBlocksForLevel(o).getTotalECCodewords(),h=l-d,g=(r+7)/8;return h>=g}static terminateBits(r,s){const o=r*8;if(s.getSize()>o)throw new Ke("data bits cannot fit in the QR Code"+s.getSize()+" > "+o);for(let d=0;d<4&&s.getSize()<o;++d)s.appendBit(!1);const l=s.getSize()&7;if(l>0)for(let d=l;d<8;d++)s.appendBit(!1);const u=r-s.getSizeInBytes();for(let d=0;d<u;++d)s.appendBits(d&1?17:236,8);if(s.getSize()!==o)throw new Ke("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,s,o,l,u,d){if(l>=o)throw new Ke("Block ID too large");const h=r%o,g=o-h,x=Math.floor(r/o),w=x+1,E=Math.floor(s/o),A=E+1,b=x-E,D=w-A;if(b!==D)throw new Ke("EC bytes mismatch");if(o!==g+h)throw new Ke("RS blocks mismatch");if(r!==(E+b)*g+(A+D)*h)throw new Ke("Total bytes mismatch");l<g?(u[0]=E,d[0]=b):(u[0]=A,d[0]=D)}static interleaveWithECBytes(r,s,o,l){if(r.getSizeInBytes()!==o)throw new Ke("Number of bits and data bytes does not match");let u=0,d=0,h=0;const g=new Array;for(let w=0;w<l;++w){const E=new Int32Array(1),A=new Int32Array(1);rt.getNumDataBytesAndNumECBytesForBlockID(s,o,l,w,E,A);const b=E[0],D=new Uint8Array(b);r.toBytes(8*u,D,0,b);const M=rt.generateECBytes(D,A[0]);g.push(new yw(D,M)),d=Math.max(d,b),h=Math.max(h,M.length),u+=E[0]}if(o!==u)throw new Ke("Data bytes does not match offset");const x=new U;for(let w=0;w<d;++w)for(const E of g){const A=E.getDataBytes();w<A.length&&x.appendBits(A[w],8)}for(let w=0;w<h;++w)for(const E of g){const A=E.getErrorCorrectionBytes();w<A.length&&x.appendBits(A[w],8)}if(s!==x.getSizeInBytes())throw new Ke("Interleaving error: "+s+" and "+x.getSizeInBytes()+" differ.");return x}static generateECBytes(r,s){const o=r.length,l=new Int32Array(o+s);for(let d=0;d<o;d++)l[d]=r[d]&255;new Eu(ve.QR_CODE_FIELD_256).encode(l,s);const u=new Uint8Array(s);for(let d=0;d<s;d++)u[d]=l[o+d];return u}static appendModeInfo(r,s){s.appendBits(r.getBits(),4)}static appendLengthInfo(r,s,o,l){const u=o.getCharacterCountBits(s);if(r>=1<<u)throw new Ke(r+" is bigger than "+((1<<u)-1));l.appendBits(r,u)}static appendBytes(r,s,o,l){switch(s){case pe.NUMERIC:rt.appendNumericBytes(r,o);break;case pe.ALPHANUMERIC:rt.appendAlphanumericBytes(r,o);break;case pe.BYTE:rt.append8BitBytes(r,o,l);break;case pe.KANJI:rt.appendKanjiBytes(r,o);break;default:throw new Ke("Invalid mode: "+s)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const s=rt.getDigit(r);return s>=0&&s<=9}static appendNumericBytes(r,s){const o=r.length;let l=0;for(;l<o;){const u=rt.getDigit(r.charAt(l));if(l+2<o){const d=rt.getDigit(r.charAt(l+1)),h=rt.getDigit(r.charAt(l+2));s.appendBits(u*100+d*10+h,10),l+=3}else if(l+1<o){const d=rt.getDigit(r.charAt(l+1));s.appendBits(u*10+d,7),l+=2}else s.appendBits(u,4),l++}}static appendAlphanumericBytes(r,s){const o=r.length;let l=0;for(;l<o;){const u=rt.getAlphanumericCode(r.charCodeAt(l));if(u===-1)throw new Ke;if(l+1<o){const d=rt.getAlphanumericCode(r.charCodeAt(l+1));if(d===-1)throw new Ke;s.appendBits(u*45+d,11),l+=2}else s.appendBits(u,6),l++}}static append8BitBytes(r,s,o){let l;try{l=je.encode(r,o)}catch(u){throw new Ke(u)}for(let u=0,d=l.length;u!==d;u++){const h=l[u];s.appendBits(h,8)}}static appendKanjiBytes(r,s){let o;try{o=je.encode(r,X.SJIS)}catch(u){throw new Ke(u)}const l=o.length;for(let u=0;u<l;u+=2){const d=o[u]&255,h=o[u+1]&255,g=d<<8&4294967295|h;let x=-1;if(g>=33088&&g<=40956?x=g-33088:g>=57408&&g<=60351&&(x=g-49472),x===-1)throw new Ke("Invalid byte sequence");const w=(x>>8)*192+(x&255);s.appendBits(w,13)}}static appendECI(r,s){s.appendBits(pe.ECI.getBits(),4),s.appendBits(r.getValue(),8)}}rt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),rt.DEFAULT_BYTE_MODE_ENCODING=X.UTF8.getName();class Mi{write(r,s,o,l=null){if(r.length===0)throw new _("Found empty contents");if(s<0||o<0)throw new _("Requested dimensions are too small: "+s+"x"+o);let u=Qe.L,d=Mi.QUIET_ZONE_SIZE;l!==null&&(l.get(Ot.ERROR_CORRECTION)!==void 0&&(u=Qe.fromString(l.get(Ot.ERROR_CORRECTION).toString())),l.get(Ot.MARGIN)!==void 0&&(d=Number.parseInt(l.get(Ot.MARGIN).toString(),10)));const h=rt.encode(r,u,l);return this.renderResult(h,s,o,d)}writeToDom(r,s,o,l,u=null){typeof r=="string"&&(r=document.querySelector(r));const d=this.write(s,o,l,u);r&&r.appendChild(d)}renderResult(r,s,o,l){const u=r.getMatrix();if(u===null)throw new dr;const d=u.getWidth(),h=u.getHeight(),g=d+l*2,x=h+l*2,w=Math.max(s,g),E=Math.max(o,x),A=Math.min(Math.floor(w/g),Math.floor(E/x)),b=Math.floor((w-d*A)/2),D=Math.floor((E-h*A)/2),M=this.createSVGElement(w,E);for(let B=0,z=D;B<h;B++,z+=A)for(let $=0,ee=b;$<d;$++,ee+=A)if(u.get($,B)===1){const Z=this.createSvgRectElement(ee,z,A,A);M.appendChild(Z)}return M}createSVGElement(r,s){const o=document.createElementNS(Mi.SVG_NS,"svg");return o.setAttributeNS(null,"height",r.toString()),o.setAttributeNS(null,"width",s.toString()),o}createSvgRectElement(r,s,o,l){const u=document.createElementNS(Mi.SVG_NS,"rect");return u.setAttributeNS(null,"x",r.toString()),u.setAttributeNS(null,"y",s.toString()),u.setAttributeNS(null,"height",o.toString()),u.setAttributeNS(null,"width",l.toString()),u.setAttributeNS(null,"fill","#000000"),u}}Mi.QUIET_ZONE_SIZE=4,Mi.SVG_NS="http://www.w3.org/2000/svg";class ps{encode(r,s,o,l,u){if(r.length===0)throw new _("Found empty contents");if(s!==ue.QR_CODE)throw new _("Can only encode QR_CODE, but got "+s);if(o<0||l<0)throw new _(`Requested dimensions are too small: ${o}x${l}`);let d=Qe.L,h=ps.QUIET_ZONE_SIZE;u!==null&&(u.get(Ot.ERROR_CORRECTION)!==void 0&&(d=Qe.fromString(u.get(Ot.ERROR_CORRECTION).toString())),u.get(Ot.MARGIN)!==void 0&&(h=Number.parseInt(u.get(Ot.MARGIN).toString(),10)));const g=rt.encode(r,d,u);return ps.renderResult(g,o,l,h)}static renderResult(r,s,o,l){const u=r.getMatrix();if(u===null)throw new dr;const d=u.getWidth(),h=u.getHeight(),g=d+l*2,x=h+l*2,w=Math.max(s,g),E=Math.max(o,x),A=Math.min(Math.floor(w/g),Math.floor(E/x)),b=Math.floor((w-d*A)/2),D=Math.floor((E-h*A)/2),M=new ge(w,E);for(let B=0,z=D;B<h;B++,z+=A)for(let $=0,ee=b;$<d;$++,ee+=A)u.get($,B)===1&&M.setRegion(ee,z,A,A);return M}}ps.QUIET_ZONE_SIZE=4;class ww{encode(r,s,o,l,u){let d;switch(s){case ue.QR_CODE:d=new ps;break;default:throw new _("No encoder available for format "+s)}return d.encode(r,s,o,l,u)}}class pr extends ie{constructor(r,s,o,l,u,d,h,g){if(super(d,h),this.yuvData=r,this.dataWidth=s,this.dataHeight=o,this.left=l,this.top=u,l+d>s||u+h>o)throw new _("Crop rectangle does not fit within image data.");g&&this.reverseHorizontal(d,h)}getRow(r,s){if(r<0||r>=this.getHeight())throw new _("Requested row is outside the image: "+r);const o=this.getWidth();(s==null||s.length<o)&&(s=new Uint8ClampedArray(o));const l=(r+this.top)*this.dataWidth+this.left;return L.arraycopy(this.yuvData,l,s,0,o),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.yuvData;const o=r*s,l=new Uint8ClampedArray(o);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return L.arraycopy(this.yuvData,u,l,0,o),l;for(let d=0;d<s;d++){const h=d*r;L.arraycopy(this.yuvData,u,l,h,r),u+=this.dataWidth}return l}isCropSupported(){return!0}crop(r,s,o,l){return new pr(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+s,o,l,!1)}renderThumbnail(){const r=this.getWidth()/pr.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/pr.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(r*s),l=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let d=0;d<s;d++){const h=d*r;for(let g=0;g<r;g++){const x=l[u+g*pr.THUMBNAIL_SCALE_FACTOR]&255;o[h+g]=4278190080|x*65793}u+=this.dataWidth*pr.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/pr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/pr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,s){const o=this.yuvData;for(let l=0,u=this.top*this.dataWidth+this.left;l<s;l++,u+=this.dataWidth){const d=u+r/2;for(let h=u,g=u+r-1;h<d;h++,g--){const x=o[h];o[h]=o[g],o[g]=x}}}invert(){return new fe(this)}}pr.THUMBNAIL_SCALE_FACTOR=2;class vu extends ie{constructor(r,s,o,l,u,d,h){if(super(s,o),this.dataWidth=l,this.dataHeight=u,this.left=d,this.top=h,r.BYTES_PER_ELEMENT===4){const g=s*o,x=new Uint8ClampedArray(g);for(let w=0;w<g;w++){const E=r[w],A=E>>16&255,b=E>>7&510,D=E&255;x[w]=(A+b+D)/4&255}this.luminances=x}else this.luminances=r;if(l===void 0&&(this.dataWidth=s),u===void 0&&(this.dataHeight=o),d===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+o>this.dataHeight)throw new _("Crop rectangle does not fit within image data.")}getRow(r,s){if(r<0||r>=this.getHeight())throw new _("Requested row is outside the image: "+r);const o=this.getWidth();(s==null||s.length<o)&&(s=new Uint8ClampedArray(o));const l=(r+this.top)*this.dataWidth+this.left;return L.arraycopy(this.luminances,l,s,0,o),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.luminances;const o=r*s,l=new Uint8ClampedArray(o);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return L.arraycopy(this.luminances,u,l,0,o),l;for(let d=0;d<s;d++){const h=d*r;L.arraycopy(this.luminances,u,l,h,r),u+=this.dataWidth}return l}isCropSupported(){return!0}crop(r,s,o,l){return new vu(this.luminances,o,l,this.dataWidth,this.dataHeight,this.left+r,this.top+s)}invert(){return new fe(this)}}class F1 extends X{static forName(r){return this.getCharacterSetECIByName(r)}}class Su{}Su.ISO_8859_1=X.ISO8859_1;class U1{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class j1{static singletonList(r){return[r]}static min(r,s){return r.sort(s)[0]}}class _w{constructor(r){this.previous=r}getPrevious(){return this.previous}}class ms extends _w{constructor(r,s,o){super(r),this.value=s,this.bitCount=o}appendTo(r,s){r.appendBits(this.value,this.bitCount)}add(r,s){return new ms(this,r,s)}addBinaryShift(r,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ms(this,r,s)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+N.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class Au extends ms{constructor(r,s,o){super(r,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=o}appendTo(r,s){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):o===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(s[this.binaryShiftStart+o],8)}addBinaryShift(r,s){return new Au(this,r,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Cw(C,r,s){return new Au(C,r,s)}function wo(C,r,s){return new ms(C,r,s)}const Ew=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Qr=0,rl=1,jn=2,W1=3,mr=4,vw=new ms(null,0,0),Iu=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Sw(C){for(let r of C)R.fill(r,-1);return C[Qr][mr]=0,C[rl][mr]=0,C[rl][Qr]=28,C[W1][mr]=0,C[jn][mr]=0,C[jn][Qr]=15,C}const z1=Sw(R.createInt32Array(6,6));class xr{constructor(r,s,o,l){this.token=r,this.mode=s,this.binaryShiftByteCount=o,this.bitCount=l}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,s){let o=this.bitCount,l=this.token;if(r!==this.mode){let d=Iu[this.mode][r];l=wo(l,d&65535,d>>16),o+=d>>16}let u=r===jn?4:5;return l=wo(l,s,u),new xr(l,r,0,o+u)}shiftAndAppend(r,s){let o=this.token,l=this.mode===jn?4:5;return o=wo(o,z1[this.mode][r],l),o=wo(o,s,5),new xr(o,this.mode,0,this.bitCount+l+5)}addBinaryShiftChar(r){let s=this.token,o=this.mode,l=this.bitCount;if(this.mode===mr||this.mode===jn){let h=Iu[o][Qr];s=wo(s,h&65535,h>>16),l+=h>>16,o=Qr}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new xr(s,o,this.binaryShiftByteCount+1,l+u);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(r+1)),d}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=Cw(s,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new xr(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let s=this.bitCount+(Iu[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?s+=xr.calculateBinaryShiftCost(r)-xr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(s+=10),s<=r.bitCount}toBitArray(r){let s=[];for(let l=this.endBinaryShift(r.length).token;l!==null;l=l.getPrevious())s.unshift(l);let o=new U;for(const l of s)l.appendTo(o,r);return o}toString(){return H.format("%s bits=%d bytes=%d",Ew[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}xr.INITIAL_STATE=new xr(vw,Qr,0,0);function Aw(C){const r=H.getCharCode(" "),s=H.getCharCode("."),o=H.getCharCode(",");C[Qr][r]=1;const l=H.getCharCode("Z"),u=H.getCharCode("A");for(let A=u;A<=l;A++)C[Qr][A]=A-u+2;C[rl][r]=1;const d=H.getCharCode("z"),h=H.getCharCode("a");for(let A=h;A<=d;A++)C[rl][A]=A-h+2;C[jn][r]=1;const g=H.getCharCode("9"),x=H.getCharCode("0");for(let A=x;A<=g;A++)C[jn][A]=A-x+2;C[jn][o]=12,C[jn][s]=13;const w=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let A=0;A<w.length;A++)C[W1][H.getCharCode(w[A])]=A;const E=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let A=0;A<E.length;A++)H.getCharCode(E[A])>0&&(C[mr][H.getCharCode(E[A])]=A);return C}const Tu=Aw(R.createInt32Array(5,256));class _o{constructor(r){this.text=r}encode(){const r=H.getCharCode(" "),s=H.getCharCode(`
`);let o=j1.singletonList(xr.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let d,h=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case H.getCharCode("\r"):d=h===s?2:0;break;case H.getCharCode("."):d=h===r?3:0;break;case H.getCharCode(","):d=h===r?4:0;break;case H.getCharCode(":"):d=h===r?5:0;break;default:d=0}d>0?(o=_o.updateStateListForPair(o,u,d),u++):o=this.updateStateListForChar(o,u)}return j1.min(o,(u,d)=>u.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,s){const o=[];for(let l of r)this.updateStateForChar(l,s,o);return _o.simplifyStates(o)}updateStateForChar(r,s,o){let l=this.text[s]&255,u=Tu[r.getMode()][l]>0,d=null;for(let h=0;h<=mr;h++){let g=Tu[h][l];if(g>0){if(d==null&&(d=r.endBinaryShift(s)),!u||h===r.getMode()||h===jn){const x=d.latchAndAppend(h,g);o.push(x)}if(!u&&z1[r.getMode()][h]>=0){const x=d.shiftAndAppend(h,g);o.push(x)}}}if(r.getBinaryShiftByteCount()>0||Tu[r.getMode()][l]===0){let h=r.addBinaryShiftChar(s);o.push(h)}}static updateStateListForPair(r,s,o){const l=[];for(let u of r)this.updateStateForPair(u,s,o,l);return this.simplifyStates(l)}static updateStateForPair(r,s,o,l){let u=r.endBinaryShift(s);if(l.push(u.latchAndAppend(mr,o)),r.getMode()!==mr&&l.push(u.shiftAndAppend(mr,o)),o===3||o===4){let d=u.latchAndAppend(jn,16-o).latchAndAppend(jn,1);l.push(d)}if(r.getBinaryShiftByteCount()>0){let d=r.addBinaryShiftChar(s).addBinaryShiftChar(s+1);l.push(d)}}static simplifyStates(r){let s=[];for(const o of r){let l=!0;for(const u of s){if(u.isBetterThanOrEqualTo(o)){l=!1;break}o.isBetterThanOrEqualTo(u)&&(s=s.filter(d=>d!==u))}l&&s.push(o)}return s}}class Pe{constructor(){}static encodeBytes(r){return Pe.encode(r,Pe.DEFAULT_EC_PERCENT,Pe.DEFAULT_AZTEC_LAYERS)}static encode(r,s,o){let l=new _o(r).encode(),u=N.truncDivision(l.getSize()*s,100)+11,d=l.getSize()+u,h,g,x,w,E;if(o!==Pe.DEFAULT_AZTEC_LAYERS){if(h=o<0,g=Math.abs(o),g>(h?Pe.MAX_NB_BITS_COMPACT:Pe.MAX_NB_BITS))throw new _(H.format("Illegal value %s for layers",o));x=Pe.totalBitsInLayer(g,h),w=Pe.WORD_SIZE[g];let Z=x-x%w;if(E=Pe.stuffBits(l,w),E.getSize()+u>Z)throw new _("Data to large for user specified layer");if(h&&E.getSize()>w*64)throw new _("Data to large for user specified layer")}else{w=0,E=null;for(let Z=0;;Z++){if(Z>Pe.MAX_NB_BITS)throw new _("Data too large for an Aztec code");if(h=Z<=3,g=h?Z+1:Z,x=Pe.totalBitsInLayer(g,h),d>x)continue;(E==null||w!==Pe.WORD_SIZE[g])&&(w=Pe.WORD_SIZE[g],E=Pe.stuffBits(l,w));let Oe=x-x%w;if(!(h&&E.getSize()>w*64)&&E.getSize()+u<=Oe)break}}let A=Pe.generateCheckWords(E,x,w),b=E.getSize()/w,D=Pe.generateModeMessage(h,g,b),M=(h?11:14)+g*4,B=new Int32Array(M),z;if(h){z=M;for(let Z=0;Z<B.length;Z++)B[Z]=Z}else{z=M+1+2*N.truncDivision(N.truncDivision(M,2)-1,15);let Z=N.truncDivision(M,2),Oe=N.truncDivision(z,2);for(let Ee=0;Ee<Z;Ee++){let wn=Ee+N.truncDivision(Ee,15);B[Z-Ee-1]=Oe-wn-1,B[Z+Ee]=Oe+wn+1}}let $=new ge(z);for(let Z=0,Oe=0;Z<g;Z++){let Ee=(g-Z)*4+(h?9:12);for(let wn=0;wn<Ee;wn++){let Qn=wn*2;for(let _n=0;_n<2;_n++)A.get(Oe+Qn+_n)&&$.set(B[Z*2+_n],B[Z*2+wn]),A.get(Oe+Ee*2+Qn+_n)&&$.set(B[Z*2+wn],B[M-1-Z*2-_n]),A.get(Oe+Ee*4+Qn+_n)&&$.set(B[M-1-Z*2-_n],B[M-1-Z*2-wn]),A.get(Oe+Ee*6+Qn+_n)&&$.set(B[M-1-Z*2-wn],B[Z*2+_n])}Oe+=Ee*8}if(Pe.drawModeMessage($,h,z,D),h)Pe.drawBullsEye($,N.truncDivision(z,2),5);else{Pe.drawBullsEye($,N.truncDivision(z,2),7);for(let Z=0,Oe=0;Z<N.truncDivision(M,2)-1;Z+=15,Oe+=16)for(let Ee=N.truncDivision(z,2)&1;Ee<z;Ee+=2)$.set(N.truncDivision(z,2)-Oe,Ee),$.set(N.truncDivision(z,2)+Oe,Ee),$.set(Ee,N.truncDivision(z,2)-Oe),$.set(Ee,N.truncDivision(z,2)+Oe)}let ee=new U1;return ee.setCompact(h),ee.setSize(z),ee.setLayers(g),ee.setCodeWords(b),ee.setMatrix($),ee}static drawBullsEye(r,s,o){for(let l=0;l<o;l+=2)for(let u=s-l;u<=s+l;u++)r.set(u,s-l),r.set(u,s+l),r.set(s-l,u),r.set(s+l,u);r.set(s-o,s-o),r.set(s-o+1,s-o),r.set(s-o,s-o+1),r.set(s+o,s-o),r.set(s+o,s-o+1),r.set(s+o,s+o-1)}static generateModeMessage(r,s,o){let l=new U;return r?(l.appendBits(s-1,2),l.appendBits(o-1,6),l=Pe.generateCheckWords(l,28,4)):(l.appendBits(s-1,5),l.appendBits(o-1,11),l=Pe.generateCheckWords(l,40,4)),l}static drawModeMessage(r,s,o,l){let u=N.truncDivision(o,2);if(s)for(let d=0;d<7;d++){let h=u-3+d;l.get(d)&&r.set(h,u-5),l.get(d+7)&&r.set(u+5,h),l.get(20-d)&&r.set(h,u+5),l.get(27-d)&&r.set(u-5,h)}else for(let d=0;d<10;d++){let h=u-5+d+N.truncDivision(d,5);l.get(d)&&r.set(h,u-7),l.get(d+10)&&r.set(u+7,h),l.get(29-d)&&r.set(h,u+7),l.get(39-d)&&r.set(u-7,h)}}static generateCheckWords(r,s,o){let l=r.getSize()/o,u=new Eu(Pe.getGF(o)),d=N.truncDivision(s,o),h=Pe.bitsToWords(r,o,d);u.encode(h,d-l);let g=s%o,x=new U;x.appendBits(0,g);for(const w of Array.from(h))x.appendBits(w,o);return x}static bitsToWords(r,s,o){let l=new Int32Array(o),u,d;for(u=0,d=r.getSize()/s;u<d;u++){let h=0;for(let g=0;g<s;g++)h|=r.get(u*s+g)?1<<s-g-1:0;l[u]=h}return l}static getGF(r){switch(r){case 4:return ve.AZTEC_PARAM;case 6:return ve.AZTEC_DATA_6;case 8:return ve.AZTEC_DATA_8;case 10:return ve.AZTEC_DATA_10;case 12:return ve.AZTEC_DATA_12;default:throw new _("Unsupported word size "+r)}}static stuffBits(r,s){let o=new U,l=r.getSize(),u=(1<<s)-2;for(let d=0;d<l;d+=s){let h=0;for(let g=0;g<s;g++)(d+g>=l||r.get(d+g))&&(h|=1<<s-1-g);(h&u)===u?(o.appendBits(h&u,s),d--):h&u?o.appendBits(h,s):(o.appendBits(h|1,s),d--)}return o}static totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}Pe.DEFAULT_EC_PERCENT=33,Pe.DEFAULT_AZTEC_LAYERS=0,Pe.MAX_NB_BITS=32,Pe.MAX_NB_BITS_COMPACT=4,Pe.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class il{encode(r,s,o,l){return this.encodeWithHints(r,s,o,l,null)}encodeWithHints(r,s,o,l,u){let d=Su.ISO_8859_1,h=Pe.DEFAULT_EC_PERCENT,g=Pe.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(Ot.CHARACTER_SET)&&(d=F1.forName(u.get(Ot.CHARACTER_SET).toString())),u.has(Ot.ERROR_CORRECTION)&&(h=N.parseInt(u.get(Ot.ERROR_CORRECTION).toString())),u.has(Ot.AZTEC_LAYERS)&&(g=N.parseInt(u.get(Ot.AZTEC_LAYERS).toString()))),il.encodeLayers(r,s,o,l,d,h,g)}static encodeLayers(r,s,o,l,u,d,h){if(s!==ue.AZTEC)throw new _("Can only encode AZTEC, but got "+s);let g=Pe.encode(H.getBytes(r,u),d,h);return il.renderResult(g,o,l)}static renderResult(r,s,o){let l=r.getMatrix();if(l==null)throw new dr;let u=l.getWidth(),d=l.getHeight(),h=Math.max(s,u),g=Math.max(o,d),x=Math.min(h/u,g/d),w=(h-u*x)/2,E=(g-d*x)/2,A=new ge(h,g);for(let b=0,D=E;b<d;b++,D+=x)for(let M=0,B=w;M<u;M++,B+=x)l.get(M,b)&&A.setRegion(B,D,x,x);return A}}n.AbstractExpandedDecoder=fu,n.ArgumentException=v,n.ArithmeticException=ur,n.AztecCode=U1,n.AztecCodeReader=qa,n.AztecCodeWriter=il,n.AztecDecoder=Ze,n.AztecDetector=A1,n.AztecDetectorResult=v1,n.AztecEncoder=Pe,n.AztecHighLevelEncoder=_o,n.AztecPoint=on,n.BarcodeFormat=ue,n.Binarizer=P,n.BinaryBitmap=I,n.BitArray=U,n.BitMatrix=ge,n.BitSource=mu,n.BrowserAztecCodeReader=Qy,n.BrowserBarcodeReader=nw,n.BrowserCodeReader=pn,n.BrowserDatamatrixCodeReader=iw,n.BrowserMultiFormatReader=pw,n.BrowserPDF417Reader=mw,n.BrowserQRCodeReader=xw,n.BrowserQRCodeSvgWriter=Mi,n.CharacterSetECI=X,n.ChecksumException=O,n.Code128Reader=re,n.Code39Reader=Nt,n.DataMatrixDecodedBitStreamParser=Yr,n.DataMatrixReader=Kr,n.DecodeHintType=q,n.DecoderResult=oe,n.DefaultGridSampler=S1,n.DetectorResult=Ka,n.EAN13Reader=Ni,n.EncodeHintType=Ot,n.Exception=m,n.FormatException=j,n.GenericGF=ve,n.GenericGFPoly=vt,n.GlobalHistogramBinarizer=Te,n.GridSampler=lu,n.GridSamplerInstance=Gr,n.HTMLCanvasElementLuminanceSource=ye,n.HybridBinarizer=xe,n.ITFReader=Ye,n.IllegalArgumentException=_,n.IllegalStateException=dr,n.InvertedLuminanceSource=fe,n.LuminanceSource=ie,n.MathUtils=Me,n.MultiFormatOneDReader=hs,n.MultiFormatReader=B1,n.MultiFormatWriter=ww,n.NotFoundException=V,n.OneDReader=It,n.PDF417DecodedBitStreamParser=W,n.PDF417DecoderErrorCorrection=O1,n.PDF417Reader=Ht,n.PDF417ResultMetadata=D1,n.PerspectiveTransform=qn,n.PlanarYUVLuminanceSource=pr,n.QRCodeByteMatrix=nl,n.QRCodeDataMask=Fn,n.QRCodeDecodedBitStreamParser=dt,n.QRCodeDecoderErrorCorrectionLevel=Qe,n.QRCodeDecoderFormatInformation=$t,n.QRCodeEncoder=rt,n.QRCodeEncoderQRCode=Di,n.QRCodeMaskUtil=xt,n.QRCodeMatrixUtil=me,n.QRCodeMode=pe,n.QRCodeReader=qr,n.QRCodeVersion=he,n.QRCodeWriter=ps,n.RGBLuminanceSource=vu,n.RSS14Reader=mt,n.RSSExpandedReader=Y,n.ReaderException=tl,n.ReedSolomonDecoder=uo,n.ReedSolomonEncoder=Eu,n.ReedSolomonException=Hr,n.Result=nt,n.ResultMetadataType=Et,n.ResultPoint=de,n.StringUtils=H,n.UnsupportedOperationException=Ce,n.VideoInputDevice=Ge,n.WhiteRectangleDetector=Ar,n.WriterException=Ke,n.ZXingArrays=R,n.ZXingCharset=F1,n.ZXingInteger=N,n.ZXingStandardCharsets=Su,n.ZXingStringBuilder=ae,n.ZXingStringEncoding=je,n.ZXingSystem=L,n.createAbstractExpandedDecoder=N1,Object.defineProperty(n,"__esModule",{value:!0})})})(Pf,Pf.exports);var st=Pf.exports;const k4=_p(st),D4=wp({__proto__:null,default:k4},[st]);var dp=function(){function t(e,n,i){if(this.formatMap=new Map([[se.QR_CODE,st.BarcodeFormat.QR_CODE],[se.AZTEC,st.BarcodeFormat.AZTEC],[se.CODABAR,st.BarcodeFormat.CODABAR],[se.CODE_39,st.BarcodeFormat.CODE_39],[se.CODE_93,st.BarcodeFormat.CODE_93],[se.CODE_128,st.BarcodeFormat.CODE_128],[se.DATA_MATRIX,st.BarcodeFormat.DATA_MATRIX],[se.MAXICODE,st.BarcodeFormat.MAXICODE],[se.ITF,st.BarcodeFormat.ITF],[se.EAN_13,st.BarcodeFormat.EAN_13],[se.EAN_8,st.BarcodeFormat.EAN_8],[se.PDF_417,st.BarcodeFormat.PDF_417],[se.RSS_14,st.BarcodeFormat.RSS_14],[se.RSS_EXPANDED,st.BarcodeFormat.RSS_EXPANDED],[se.UPC_A,st.BarcodeFormat.UPC_A],[se.UPC_E,st.BarcodeFormat.UPC_E],[se.UPC_EAN_EXTENSION,st.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!D4)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var a=this.createZXingFormats(e),c=new Map;c.set(st.DecodeHintType.POSSIBLE_FORMATS,a),c.set(st.DecodeHintType.TRY_HARDER,!1),this.hints=c}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(i,a){try{i(n.decode(e))}catch(c){a(c)}})},t.prototype.decode=function(e){var n=new st.MultiFormatReader(this.verbose,this.hints),i=new st.HTMLCanvasElementLuminanceSource(e),a=new st.BinaryBitmap(new st.HybridBinarizer(i)),c=n.decode(a);return{text:c.text,format:Yy.create(this.toHtml5QrcodeSupportedFormats(c.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,a){e.set(n,i)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],i=0,a=e;i<a.length;i++){var c=a[i];this.formatMap.has(c)?n.push(this.formatMap.get(c)):this.logger.logError("".concat(c," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),M4=function(t,e,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function p(v){try{m(i.next(v))}catch(_){f(_)}}function y(v){try{m(i.throw(v))}catch(_){f(_)}}function m(v){v.done?c(v.value):a(v.value).then(p,y)}m((i=i.apply(t,e||[])).next())})},P4=function(t,e){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(m){return function(v){return y([m,v])}}function y(m){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(i=1,a&&(c=m[0]&2?a.return:m[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,m[1])).done)return c;switch(a=0,c&&(m=[m[0]&2,c.value]),m[0]){case 0:case 1:c=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!c||m[1]>c[0]&&m[1]<c[3])){n.label=m[1];break}if(m[0]===6&&n.label<c[1]){n.label=c[1],c=m;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(m);break}c[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(v){m=[6,v],a=0}finally{i=c=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},fp=function(){function t(e,n,i){if(this.formatMap=new Map([[se.QR_CODE,"qr_code"],[se.AZTEC,"aztec"],[se.CODABAR,"codabar"],[se.CODE_39,"code_39"],[se.CODE_93,"code_93"],[se.CODE_128,"code_128"],[se.DATA_MATRIX,"data_matrix"],[se.ITF,"itf"],[se.EAN_13,"ean_13"],[se.EAN_8,"ean_8"],[se.PDF_417,"pdf417"],[se.UPC_A,"upc_a"],[se.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var a=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return M4(this,void 0,void 0,function(){var n,i;return P4(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=a.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:Yy.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,i=0,a=0,c=e;a<c.length;a++){var f=c[a],p=f.boundingBox.width*f.boundingBox.height;p>i&&(i=p,n=f)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],i=0,a=e;i<a.length;i++){var c=a[i];this.formatMap.has(c)?n.push(this.formatMap.get(c)):this.logger.warn("".concat(c," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,a){e.set(n,i)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),hp=function(t,e,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function p(v){try{m(i.next(v))}catch(_){f(_)}}function y(v){try{m(i.throw(v))}catch(_){f(_)}}function m(v){v.done?c(v.value):a(v.value).then(p,y)}m((i=i.apply(t,e||[])).next())})},gp=function(t,e){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(m){return function(v){return y([m,v])}}function y(m){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(i=1,a&&(c=m[0]&2?a.return:m[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,m[1])).done)return c;switch(a=0,c&&(m=[m[0]&2,c.value]),m[0]){case 0:case 1:c=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!c||m[1]>c[0]&&m[1]<c[3])){n.label=m[1];break}if(m[0]===6&&n.label<c[1]){n.label=c[1],c=m;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(m);break}c[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(v){m=[6,v],a=0}finally{i=c=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},L4=function(){function t(e,n,i,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&fp.isSupported()?(this.primaryDecoder=new fp(e,i,a),this.secondaryDecoder=new dp(e,i,a)):this.primaryDecoder=new dp(e,i,a)}return t.prototype.decodeAsync=function(e){return hp(this,void 0,void 0,function(){var n;return gp(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return hp(this,void 0,void 0,function(){var n,i;return gp(this,function(a){switch(a.label){case 0:n=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,a.sent()];case 3:if(i=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,i=this.executionResults;n<i.length;n++){var a=i[n];e+=a}var c=e/this.executionResults.length;console.log("".concat(c," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),E1=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Nc=function(t,e,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function p(v){try{m(i.next(v))}catch(_){f(_)}}function y(v){try{m(i.throw(v))}catch(_){f(_)}}function m(v){v.done?c(v.value):a(v.value).then(p,y)}m((i=i.apply(t,e||[])).next())})},Rc=function(t,e){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(m){return function(v){return y([m,v])}}function y(m){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(i=1,a&&(c=m[0]&2?a.return:m[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,m[1])).done)return c;switch(a=0,c&&(m=[m[0]&2,c.value]),m[0]){case 0:case 1:c=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!c||m[1]>c[0]&&m[1]<c[3])){n.label=m[1];break}if(m[0]===6&&n.label<c[1]){n.label=c[1],c=m;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(m);break}c[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(v){m=[6,v],a=0}finally{i=c=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},qy=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var i={advanced:[n]};return this.track.applyConstraints(i)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),B4=function(t){E1(e,t);function e(n,i){return t.call(this,n,i)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var i={};i[this.name]=n;var a={advanced:[i]};return this.track.applyConstraints(a)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(qy),F4=function(t){E1(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(B4),U4=function(t){E1(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(qy),j4=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new F4(this.track)},t.prototype.torchFeature=function(){return new U4(this.track)},t}(),W4=function(){function t(e,n,i){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=e.surface.clientWidth,a=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(i,a),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,i,a){return Nc(this,void 0,void 0,function(){var c,f;return Rc(this,function(p){switch(p.label){case 0:return c=new t(e,n,a),i.aspectRatio?(f={aspectRatio:i.aspectRatio},[4,c.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:p.sent(),p.label=2;case 2:return c.setupSurface(),[2,c]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,i=function(){setTimeout(e,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Nc(this,void 0,void 0,function(){return Rc(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,i){var a=e.mediaStream.getVideoTracks(),c=a.length,f=0;e.mediaStream.getVideoTracks().forEach(function(p){e.mediaStream.removeTrack(p),p.stop(),++f,f>=c&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new j4(this.getFirstTrackOrFail())},t}(),z4=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,i){return Nc(this,void 0,void 0,function(){return Rc(this,function(a){return[2,W4.create(e,this.mediaStream,n,i)]})})},t.create=function(e){return Nc(this,void 0,void 0,function(){var n,i;return Rc(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=a.sent(),[2,new t(i)]}})})},t}(),pp=function(t,e,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function p(v){try{m(i.next(v))}catch(_){f(_)}}function y(v){try{m(i.throw(v))}catch(_){f(_)}}function m(v){v.done?c(v.value):a(v.value).then(p,y)}m((i=i.apply(t,e||[])).next())})},mp=function(t,e){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(m){return function(v){return y([m,v])}}function y(m){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(i=1,a&&(c=m[0]&2?a.return:m[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,m[1])).done)return c;switch(a=0,c&&(m=[m[0]&2,c.value]),m[0]){case 0:case 1:c=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!c||m[1]>c[0]&&m[1]<c[3])){n.label=m[1];break}if(m[0]===6&&n.label<c[1]){n.label=c[1],c=m;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(m);break}c[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(v){m=[6,v],a=0}finally{i=c=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},V4=function(){function t(){}return t.failIfNotSupported=function(){return pp(this,void 0,void 0,function(){return mp(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return pp(this,void 0,void 0,function(){return mp(this,function(n){return[2,z4.create(e)]})})},t}(),H4=function(t,e,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function p(v){try{m(i.next(v))}catch(_){f(_)}}function y(v){try{m(i.throw(v))}catch(_){f(_)}}function m(v){v.done?c(v.value):a(v.value).then(p,y)}m((i=i.apply(t,e||[])).next())})},G4=function(t,e){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(m){return function(v){return y([m,v])}}function y(m){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(i=1,a&&(c=m[0]&2?a.return:m[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,m[1])).done)return c;switch(a=0,c&&(m=[m[0]&2,c.value]),m[0]){case 0:case 1:c=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!c||m[1]>c[0]&&m[1]<c[3])){n.label=m[1];break}if(m[0]===6&&n.label<c[1]){n.label=c[1],c=m;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(m);break}c[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(v){m=[6,v],a=0}finally{i=c=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},X4=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Ms.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Ms.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return H4(this,void 0,void 0,function(){var e,n,i,a,c,f,p;return G4(this,function(y){switch(y.label){case 0:return e=function(m){for(var v=m.getVideoTracks(),_=0,I=v;_<I.length;_++){var O=I[_];O.enabled=!1,O.stop(),m.removeTrack(O)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=y.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=y.sent(),a=[],c=0,f=i;c<f.length;c++)p=f[c],p.kind==="videoinput"&&a.push({id:p.deviceId,label:p.label});return e(n),[2,a]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var i=function(c){for(var f=[],p=0,y=c;p<y.length;p++){var m=y[p];m.kind==="video"&&f.push({id:m.id,label:m.label})}e(f)},a=MediaStreamTrack;a.getSources(i)})},t}(),yt;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(yt||(yt={}));var Y4=function(){function t(){this.state=yt.NOT_STARTED,this.onGoingTransactionNewState=yt.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===yt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=yt.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===yt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=yt.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==yt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case yt.UNKNOWN:throw"Transition from unknown is not allowed";case yt.NOT_STARTED:this.failIfNewStateIs(e,[yt.PAUSED]);break;case yt.SCANNING:break;case yt.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var i=0,a=n;i<a.length;i++){var c=a[i];if(e===c)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),K4=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===yt.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==yt.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===yt.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===yt.PAUSED},t}(),q4=function(){function t(){}return t.create=function(){return new K4(new Y4)},t}(),Z4=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Nn=function(t){Z4(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(N4),Q4=function(){function t(e,n){this.logger=n,this.fps=Nn.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Nn.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Ky.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Ir(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),xp=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new O4(this.verbose),this.qrcode=new L4(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=q4.create()}return t.prototype.start=function(e,n,i,a){var c=this;if(!e)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;a?f=a:f=this.verbose?this.logger.log:function(){};var p=Q4.create(n,this.logger);this.clearElement();var y=!1;p.videoConstraints&&(p.isMediaStreamConstraintsValid()?y=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=y,v=document.getElementById(this.elementId);v.clientWidth?v.clientWidth:Nn.DEFAULT_WIDTH,v.style.position="relative",this.shouldScan=!0,this.element=v;var _=this,I=this.stateManagerProxy.startTransition(yt.SCANNING);return new Promise(function(O,P){var L=m?p.videoConstraints:_.createVideoConstraints(e);if(!L){I.cancel(),P("videoConstraints should be defined");return}var K={};(!m||p.aspectRatio)&&(K.aspectRatio=p.aspectRatio);var k={onRenderSurfaceReady:function(R,N){_.setupUi(R,N,p),_.isScanning=!0,_.foreverScan(p,i,f)}};V4.failIfNotSupported().then(function(R){R.create(L).then(function(N){return N.render(c.element,K,k).then(function(U){_.renderedCamera=U,I.execute(),O(null)}).catch(function(U){I.cancel(),P(U)})}).catch(function(N){I.cancel(),P(Ms.errorGettingUserMedia(N))})}).catch(function(R){I.cancel(),P(Ms.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(yt.PAUSED),this.showPausedState(),(Ir(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(yt.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(yt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(e.element){var c=document.getElementById(Nn.SHADED_REGION_ELEMENT_ID);c&&e.element.removeChild(c)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),i(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),n.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(i){return i.decodedText})},t.prototype.scanFileV2=function(e,n){var i=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ir(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,c){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(e);var f=new Image;f.onload=function(){var p=f.width,y=f.height,m=document.getElementById(i.elementId),v=m.clientWidth?m.clientWidth:Nn.DEFAULT_WIDTH,_=Math.max(m.clientHeight?m.clientHeight:y,Nn.FILE_SCAN_MIN_HEIGHT),I=i.computeCanvasDrawConfig(p,y,v,_);if(n){var O=i.createCanvasElement(v,_,"qr-canvas-visible");O.style.display="inline-block",m.appendChild(O);var P=O.getContext("2d");if(!P)throw"Unable to get 2d context from canvas";P.canvas.width=v,P.canvas.height=_,P.drawImage(f,0,0,p,y,I.x,I.y,I.width,I.height)}var L=Nn.FILE_SCAN_HIDDEN_CANVAS_PADDING,K=Math.max(f.width,I.width),k=Math.max(f.height,I.height),R=K+2*L,N=k+2*L,U=i.createCanvasElement(R,N);m.appendChild(U);var J=U.getContext("2d");if(!J)throw"Unable to get 2d context from canvas";J.canvas.width=R,J.canvas.height=N,J.drawImage(f,0,0,p,y,L,L,K,k);try{i.qrcode.decodeRobustlyAsync(U).then(function(q){a(up.createFromQrcodeResult(q))}).catch(c)}catch(q){c("QR code parse error, error = ".concat(q))}},f.onerror=c,f.onabort=c,f.onstalled=c,f.onsuspend=c,f.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return X4.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!Ky.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[se.QR_CODE,se.AZTEC,se.CODABAR,se.CODE_39,se.CODE_93,se.CODE_128,se.DATA_MATRIX,se.MAXICODE,se.ITF,se.EAN_13,se.EAN_8,se.PDF_417,se.RSS_14,se.RSS_EXPANDED,se.UPC_A,se.UPC_E,se.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],a=0,c=e.formatsToSupport;a<c.length;a++){var f=c[a];b4(f)?i.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Ir(e))return!0;if(!Ir(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Ir(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return Ir(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,i){var a=this,c=i.qrbox;this.validateQrboxConfig(c);var f=this.toQrdimensions(e,n,c),p=function(m){if(m<Nn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Nn.MIN_QR_BOX_SIZE,"px.")},y=function(m){return m>e&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=e),m};p(f.width),p(f.height),f.width=y(f.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(e,n)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return i},t.prototype.setupUi=function(e,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,i);var a=Ir(i.qrbox)?{width:e,height:n}:i.qrbox;this.validateQrboxConfig(a);var c=this.toQrdimensions(e,n,a);c.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=i.isShadedBoxEnabled()&&c.height<=n,p={x:0,y:0,width:e,height:n},y=f?this.getShadedRegionBounds(e,n,c):p,m=this.createCanvasElement(y.width,y.height),v={willReadFrequently:!0},_=m.getContext("2d",v);_.canvas.width=y.width,_.canvas.height=y.height,this.element.append(m),f&&this.possiblyInsertShadingElement(this.element,e,n,c),this.createScannerPausedUiElement(this.element),this.qrRegion=y,this.context=_,this.canvasElement=m},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Ms.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return e(a.text,up.createFromQrcodeResult(a)),i.possiblyUpdateShaders(!0),!0}).catch(function(a){i.possiblyUpdateShaders(!1);var c=Ms.codeParseError(a);return n(c,R4.createFrom(c)),!1})},t.prototype.foreverScan=function(e,n,i){var a=this;if(this.shouldScan&&this.renderedCamera){var c=this.renderedCamera.getSurface(),f=c.videoWidth/c.clientWidth,p=c.videoHeight/c.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var y=this.qrRegion.width*f,m=this.qrRegion.height*p,v=this.qrRegion.x*f,_=this.qrRegion.y*p;this.context.drawImage(c,v,_,y,m,0,0,this.qrRegion.width,this.qrRegion.height);var I=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(e,n,i)},a.getTimeoutFps(e.fps))};this.scanContext(n,i).then(function(O){!O&&e.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(n,i).finally(function(){I()})):I()}).catch(function(O){a.logger.logError("Error happend while scanning context",O),I()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",i="deviceId",a={user:!0,environment:!0},c="exact",f=function(P){if(P in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(P,"'")},p=Object.keys(e);if(p.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(p.length," keys");var y=Object.keys(e)[0];if(y!==n&&y!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(y===n){var m=e.facingMode;if(typeof m=="string"){if(f(m))return{facingMode:m}}else if(typeof m=="object")if(c in m){if(f(m["".concat(c)]))return{facingMode:{exact:m["".concat(c)]}}}else throw"'facingMode' should be string or object with"+" ".concat(c," as key.");else{var v=typeof m;throw"Invalid type of 'facingMode' = ".concat(v)}}else{var _=e.deviceId;if(typeof _=="string")return{deviceId:_};if(typeof _=="object"){if(c in _)return{deviceId:{exact:_["".concat(c)]}};throw"'deviceId' should be string or object with"+" ".concat(c," as key.")}else{var I=typeof _;throw"Invalid type of 'deviceId' = ".concat(I)}}}var O=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(O)},t.prototype.computeCanvasDrawConfig=function(e,n,i,a){if(e<=i&&n<=a){var c=(i-e)/2,f=(a-n)/2;return{x:c,y:f,width:e,height:n}}else{var p=e,y=n;return e>i&&(n=i/e*n,e=i),n>a&&(e=a/n*e,n=a),this.logger.log("Image downsampled from "+"".concat(p,"X").concat(y)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,i,a)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Nn.BORDER_SHADER_MATCH_COLOR:Nn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,i){var a=e,c=n,f=document.createElement("canvas");return f.style.width="".concat(a,"px"),f.style.height="".concat(c,"px"),f.style.display="none",f.id=Ir(i)?"qr-canvas":i,f},t.prototype.getShadedRegionBounds=function(e,n,i){if(i.width>e||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},t.prototype.possiblyInsertShadingElement=function(e,n,i,a){if(!(n-a.width<1||i-a.height<1)){var c=document.createElement("div");c.style.position="absolute";var f=(n-a.width)/2,p=(i-a.height)/2;if(c.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderTop="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderBottom="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),c.style.boxSizing="border-box",c.style.top="0px",c.style.bottom="0px",c.style.left="0px",c.style.right="0px",c.id="".concat(Nn.SHADED_REGION_ELEMENT_ID),n-a.width<11||i-a.height<11)this.hasBorderShaders=!1;else{var y=5,m=40;this.insertShaderBorders(c,m,y,-y,null,0,!0),this.insertShaderBorders(c,m,y,-y,null,0,!1),this.insertShaderBorders(c,m,y,null,-y,0,!0),this.insertShaderBorders(c,m,y,null,-y,0,!1),this.insertShaderBorders(c,y,m+y,-y,null,-y,!0),this.insertShaderBorders(c,y,m+y,null,-y,-y,!0),this.insertShaderBorders(c,y,m+y,-y,null,-y,!1),this.insertShaderBorders(c,y,m+y,null,-y,-y,!1),this.hasBorderShaders=!0}e.append(c)}},t.prototype.insertShaderBorders=function(e,n,i,a,c,f,p){var y=document.createElement("div");y.style.position="absolute",y.style.backgroundColor=Nn.BORDER_SHADER_DEFAULT_COLOR,y.style.width="".concat(n,"px"),y.style.height="".concat(i,"px"),a!==null&&(y.style.top="".concat(a,"px")),c!==null&&(y.style.bottom="".concat(c,"px")),p?y.style.left="".concat(f,"px"):y.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(y),e.appendChild(y)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),yp;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(yp||(yp={}));const Zy=({onScan:t,onClose:e,isOpen:n})=>{const[i,a]=G.useState(!1),[c,f]=G.useState(""),[p,y]=G.useState(""),[m,v]=G.useState(!1),[_,I]=G.useState(""),O=G.useRef(null),P=G.useRef(`html5qr-${Math.random().toString(36).slice(2)}`);G.useEffect(()=>(n&&L(),()=>{K()}),[n]);const L=async()=>{try{y(""),v(!1),O.current||(O.current=new xp(P.current,!1));const N=await xp.getCameras();if(!N||N.length===0){y("Kamera tidak ditemukan.");return}const U=N.find(q=>/back|rear|environment/i.test(q.label))||N[0],J={fps:10,qrbox:{width:280,height:200},aspectRatio:1.777,rememberLastUsedCamera:!0,focusMode:"continuous",focusDistance:0,formatsToSupport:[se.CODE_128,se.EAN_13,se.EAN_8,se.UPC_A,se.UPC_E,se.QR_CODE]};await O.current.start(U.id,J,q=>{q&&(f(q),t(q),K())},q=>{}),v(!0),a(!0)}catch(N){console.error("Scanner init error:",N),y("Tidak dapat memulai pemindai: "+((N==null?void 0:N.message)||String(N)))}},K=async()=>{a(!1);try{O.current&&(await O.current.stop(),await O.current.clear())}catch{}},k=()=>{K(),e()},R=()=>{y(""),f(""),L()};return n?S.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50,padding:"1rem"},children:[S.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",width:"100%",maxWidth:"28rem",maxHeight:"90vh",overflow:"auto"},children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[S.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",margin:0},children:"Scan Barcode"}),S.jsx("button",{onClick:k,style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem"},children:S.jsx(uv,{size:24})})]}),S.jsx("div",{style:{position:"relative",width:"100%",height:"320px",backgroundColor:"#000",borderRadius:"0.5rem",overflow:"hidden",marginBottom:"1rem"},children:S.jsx("div",{id:P.current,style:{width:"100%",height:"100%"}})}),p&&S.jsxs("div",{style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"0.5rem",padding:"1rem",marginBottom:"1rem",display:"flex",alignItems:"center"},children:[S.jsx(sv,{size:20,style:{color:"#dc2626",marginRight:"0.5rem"}}),S.jsxs("div",{children:[S.jsx("p",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#991b1b",margin:0},children:p}),S.jsx("button",{onClick:R,style:{marginTop:"0.5rem",fontSize:"0.75rem",color:"#dc2626",background:"none",border:"none",cursor:"pointer",textDecoration:"underline"},children:"Coba Lagi"})]})]}),c&&S.jsxs("div",{style:{backgroundColor:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"0.5rem",padding:"1rem",marginBottom:"1rem",display:"flex",alignItems:"center"},children:[S.jsx(X2,{size:20,style:{color:"#059669",marginRight:"0.5rem"}}),S.jsxs("div",{children:[S.jsx("p",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#065f46",margin:0},children:"Barcode berhasil dipindai!"}),S.jsx("p",{style:{fontSize:"0.75rem",color:"#059669",marginTop:"0.25rem",margin:0},children:c})]})]}),S.jsxs("div",{style:{marginBottom:"1rem"},children:[S.jsx("label",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem",display:"block"},children:"Atau masukkan barcode secara manual:"}),S.jsx("input",{type:"text",value:_,onChange:N=>I(N.target.value),placeholder:"Masukkan kode barcode",style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem"}}),_&&S.jsx("button",{onClick:()=>{t(_),k()},style:{marginTop:"0.5rem",width:"100%",backgroundColor:"#10b981",color:"white",padding:"0.5rem",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Gunakan Kode Manual"})]}),S.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[S.jsx("button",{onClick:k,style:{flex:1,backgroundColor:"#6b7280",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Tutup"}),c&&S.jsx("button",{onClick:()=>{t(c),k()},style:{flex:1,backgroundColor:"#3b82f6",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Gunakan"})]})]}),S.jsx("style",{jsx:!0,children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
      `})]}):null},$4=()=>{const[t,e]=G.useState([]),[n,i]=G.useState({}),[a,c]=G.useState({}),[f,p]=G.useState(!0),[y,m]=G.useState(!1),[v,_]=G.useState(!1),[I,O]=G.useState(!1),[P,L]=G.useState(!1),[K,k]=G.useState(!1),[R,N]=G.useState(null),[U,J]=G.useState(null),[q,j]=G.useState(""),[te,X]=G.useState(null),[Ce,je]=G.useState(""),[H,ae]=G.useState([]),[ge,V]=G.useState(null),[Te,xe]=G.useState({name:"",category:"",price:"",stock:"",minStock:"",useBarcode:!0});G.useEffect(()=>{ie()},[]);const ie=async()=>{try{p(!0);const oe=await nn.getAllProducts();e(oe);const Xe={},vt={};for(const ve of oe)Xe[ve.id]=await nn.getUnitsWithBarcodeCount(ve.id),vt[ve.id]=await nn.getReadyStock(ve.id);i(Xe),c(vt);const ur=oe.filter(ve=>ve.stock<=ve.minStock);ae(ur)}catch(oe){console.error("Error loading products:",oe)}finally{p(!1)}},fe=oe=>{const{name:Xe,value:vt,type:ur,checked:ve}=oe.target;xe(Hr=>({...Hr,[Xe]:ur==="checkbox"?ve:vt}))},ye=async oe=>{oe.preventDefault();try{const Xe={...Te,price:parseFloat(Te.price),stock:Te.useBarcode?0:parseInt(Te.stock),minStock:parseInt(Te.minStock)};v&&te?await nn.updateProduct(te.id,Xe):await nn.createProduct(Xe),m(!1),_(!1),xe({name:"",category:"",price:"",stock:"",minStock:"",useBarcode:!0}),ie()}catch(Xe){console.error("Error saving product:",Xe)}},Ge=oe=>{X(oe),xe({name:oe.name,category:oe.category,price:oe.price.toString(),stock:oe.stock.toString(),minStock:oe.minStock.toString(),useBarcode:oe.useBarcode!==!1}),_(!0)},be=async oe=>{if(window.confirm("Apakah Anda yakin ingin menghapus produk ini?"))try{await nn.deleteProduct(oe),ie()}catch(Xe){console.error("Error deleting product:",Xe)}},pn=oe=>{O(!1),N(null)},nt=async oe=>{try{const Xe=await nn.getProductByBarcode(oe);Xe?(V(Xe),L(!0)):alert("Produk tidak ditemukan")}catch(Xe){console.error("Error checking stock:",Xe),alert("Error memeriksa stok")}O(!1),N(null)},lr=oe=>{J(oe),j(""),k(!0)},ue=async oe=>{try{if(!U)return;await nn.addBarcodeToProduct(U,oe),alert("Barcode berhasil di-assign"),J(null),N(null),O(!1),ie()}catch(Xe){alert(Xe.message||"Gagal assign barcode"),J(null),N(null),O(!1)}},cr=async()=>{if(!q.trim()){alert("Masukkan barcode");return}try{await nn.addBarcodeToProduct(U,q.trim()),alert("Barcode berhasil di-assign"),k(!1),J(null),j(""),ie()}catch(oe){alert(oe.message||"Gagal assign barcode")}},Et=t.filter(oe=>{const Xe=Ce.toLowerCase(),vt=oe.name.toLowerCase().includes(Xe),ur=oe.category.toLowerCase().includes(Xe);return vt||ur});return f?S.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"16rem"},children:S.jsx("div",{className:"spinner"})}):S.jsxs("div",{style:{padding:"1.5rem"},children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[S.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#111827",margin:0},children:"Manajemen Inventory"}),S.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[S.jsxs("button",{onClick:()=>{N("check"),V(null),O(!0)},style:{backgroundColor:"#10b981",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:[S.jsx(X2,{size:20}),"Check Stock"]}),S.jsxs("button",{onClick:()=>m(!0),style:{backgroundColor:"#3b82f6",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:[S.jsx(hf,{size:20}),"Tambah Produk"]})]})]}),H.length>0&&S.jsxs("div",{style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"0.5rem",padding:"1rem",marginBottom:"1.5rem",display:"flex",alignItems:"center"},children:[S.jsx(cc,{size:20,style:{color:"#dc2626",marginRight:"0.5rem"}}),S.jsxs("div",{children:[S.jsx("h3",{style:{fontWeight:"500",color:"#991b1b",margin:0,fontSize:"0.875rem"},children:"Stok Rendah!"}),S.jsxs("p",{style:{fontSize:"0.75rem",color:"#dc2626",marginTop:"0.25rem",margin:0},children:[H.length," produk memiliki stok di bawah minimum"]})]})]}),S.jsx("div",{style:{marginBottom:"1.5rem"},children:S.jsxs("div",{style:{position:"relative"},children:[S.jsx(Y2,{size:20,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),S.jsx("input",{type:"text",placeholder:"Cari produk...",value:Ce,onChange:oe=>je(oe.target.value),style:{width:"100%",paddingLeft:"2.5rem",paddingRight:"1rem",paddingTop:"0.5rem",paddingBottom:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.5rem",fontSize:"0.875rem"}})]})}),S.jsxs("div",{style:{background:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",overflow:"hidden"},children:[S.jsx("div",{style:{overflowX:"auto",WebkitOverflowScrolling:"touch",display:window.innerWidth<=768?"none":"block"},children:S.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:"600px"},children:[S.jsx("thead",{style:{backgroundColor:"#f9fafb"},children:S.jsxs("tr",{children:[S.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",borderBottom:"1px solid #e5e7eb"},children:"Produk"}),S.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",borderBottom:"1px solid #e5e7eb"},children:"Ready Stock"}),S.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",borderBottom:"1px solid #e5e7eb"},children:"Kategori"}),S.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",borderBottom:"1px solid #e5e7eb"},children:"Stok"}),S.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",borderBottom:"1px solid #e5e7eb"},children:"Harga"}),S.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",borderBottom:"1px solid #e5e7eb"},children:"Aksi"})]})}),S.jsx("tbody",{children:Et.map(oe=>S.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[S.jsx("td",{style:{padding:"1rem 1.5rem"},children:S.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[S.jsx(_a,{size:20,style:{color:"#9ca3af",marginRight:"0.75rem"}}),S.jsx("div",{children:S.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827"},children:oe.name})})]})}),S.jsxs("td",{style:{padding:"1rem 1.5rem",fontSize:"0.875rem",color:"#111827"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[S.jsx("span",{style:{fontWeight:"600",color:(a[oe.id]||0)>0?"#059669":"#dc2626"},children:a[oe.id]||0}),S.jsxs("span",{style:{color:"#6b7280",marginLeft:"0.25rem"},children:["/ ",oe.stock," unit"]})]}),S.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:oe.useBarcode!==!1?"Dengan barcode":"Tanpa barcode"})]}),S.jsx("td",{style:{padding:"1rem 1.5rem",fontSize:"0.875rem",color:"#111827"},children:oe.category}),S.jsxs("td",{style:{padding:"1rem 1.5rem"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[S.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:oe.stock<=oe.minStock?"#dc2626":"#111827"},children:oe.stock}),S.jsxs("span",{style:{fontSize:"0.875rem",color:"#6b7280",marginLeft:"0.25rem"},children:["/ ",oe.minStock," min"]})]}),S.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:oe.useBarcode!==!1?"Dihitung dari unit":"Manual"})]}),S.jsxs("td",{style:{padding:"1rem 1.5rem",fontSize:"0.875rem",color:"#111827"},children:["Rp ",oe.price.toLocaleString("id-ID")]}),S.jsx("td",{style:{padding:"1rem 1.5rem"},children:S.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[S.jsx("button",{onClick:()=>Ge(oe),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:"0.25rem"},children:S.jsx(ag,{size:16})}),oe.useBarcode!==!1&&S.jsx("button",{onClick:()=>lr(oe.id),style:{color:"#10b981",background:"none",border:"1px dashed #10b981",borderRadius:"0.375rem",cursor:"pointer",padding:"0.25rem 0.5rem",fontSize:"0.75rem"},title:"Assign barcode via scan",children:"Assign Barcode"}),S.jsx("button",{onClick:()=>be(oe.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem"},children:S.jsx(gf,{size:16})})]})})]},oe.id))})]})}),S.jsx("div",{style:{display:window.innerWidth<=768?"block":"none"},children:Et.map(oe=>S.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsxs("div",{style:{flex:1},children:[S.jsx("div",{style:{display:"flex",alignItems:"center",marginBottom:"0.5rem"},children:S.jsxs("div",{children:[S.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827"},children:oe.name}),S.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:oe.category})]})}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[S.jsxs("div",{children:[S.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:"600",color:(a[oe.id]||0)>0?"#059669":"#dc2626"},children:["Ready ",a[oe.id]||0]}),S.jsxs("span",{style:{fontSize:"0.75rem",color:"#6b7280",marginLeft:"0.25rem"},children:["/ ",oe.stock]})]}),S.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["Rp ",oe.price.toLocaleString("id-ID")]})]}),S.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:oe.useBarcode!==!1?"Dengan barcode":"Tanpa barcode"})]}),S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginLeft:"1rem"},children:[S.jsx("button",{onClick:()=>Ge(oe),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",fontSize:"0.75rem"},title:"Edit",children:S.jsx(ag,{size:14})}),oe.useBarcode!==!1&&S.jsx("button",{onClick:()=>lr(oe.id),style:{color:"#10b981",background:"none",border:"1px dashed #10b981",borderRadius:"0.25rem",cursor:"pointer",padding:"0.25rem",fontSize:"0.75rem"},title:"Assign Barcode",children:S.jsx(ff,{size:14})}),S.jsx("button",{onClick:()=>be(oe.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",fontSize:"0.75rem"},title:"Delete",children:S.jsx(gf,{size:14})})]})]},oe.id))})]}),(y||v)&&S.jsx("div",{className:"modal-overlay",children:S.jsxs("div",{className:"modal",children:[S.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",margin:0},children:y?"Tambah Produk":"Edit Produk"}),S.jsxs("form",{onSubmit:ye,children:[S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[S.jsxs("div",{children:[S.jsx("label",{className:"form-label",children:"Nama Produk"}),S.jsx("input",{type:"text",name:"name",value:Te.name,onChange:fe,required:!0,className:"form-input"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"form-label",children:"Kategori"}),S.jsxs("select",{name:"category",value:Te.category,onChange:fe,required:!0,className:"form-select",children:[S.jsx("option",{value:"",children:"Pilih Kategori"}),S.jsx("option",{value:"IQOS Device",children:"IQOS Device"}),S.jsx("option",{value:"HEETS",children:"HEETS"}),S.jsx("option",{value:"Aksesoris",children:"Aksesoris"}),S.jsx("option",{value:"Lainnya",children:"Lainnya"})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"form-label",children:"Harga"}),S.jsx("input",{type:"number",name:"price",value:Te.price,onChange:fe,required:!0,min:"0",step:"0.01",className:"form-input",placeholder:"Harga jual produk"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"form-label",children:"Gunakan Barcode"}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[S.jsx("input",{type:"checkbox",name:"useBarcode",checked:Te.useBarcode,onChange:fe,style:{width:"1rem",height:"1rem"}}),S.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Centang jika produk menggunakan barcode untuk tracking unit"})]}),Te.useBarcode&&S.jsxs("div",{style:{marginTop:"0.5rem",padding:"0.75rem",backgroundColor:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:"0.375rem",fontSize:"0.75rem",color:"#0369a1"},children:[S.jsx("strong",{children:"Info:"})," Stok akan dihitung otomatis dari jumlah unit yang memiliki barcode. Tidak perlu input stok awal secara manual."]}),!Te.useBarcode&&S.jsxs("div",{style:{marginTop:"0.5rem",padding:"0.75rem",backgroundColor:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"0.375rem",fontSize:"0.75rem",color:"#92400e"},children:[S.jsx("strong",{children:"Info:"})," Produk tanpa barcode menggunakan input stok manual. Anda perlu mengatur stok secara manual."]})]}),!Te.useBarcode&&S.jsxs("div",{children:[S.jsx("label",{className:"form-label",children:"Stok Awal"}),S.jsx("input",{type:"number",name:"stock",value:Te.stock,onChange:fe,required:!0,min:"0",className:"form-input",placeholder:"Jumlah stok awal"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"form-label",children:"Stok Minimum"}),S.jsx("input",{type:"number",name:"minStock",value:Te.minStock,onChange:fe,required:!0,min:"0",className:"form-input",placeholder:"Minimum stock untuk alert"})]})]}),S.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1.5rem"},children:[S.jsx("button",{type:"button",onClick:()=>{m(!1),_(!1),xe({name:"",category:"",price:"",stock:"",minStock:"",useBarcode:!0})},className:"btn btn-secondary",style:{flex:1},children:"Batal"}),S.jsx("button",{type:"submit",className:"btn btn-primary",style:{flex:1},children:y?"Tambah":"Update"})]})]})]})}),K&&U&&S.jsx("div",{className:"modal-overlay",children:S.jsxs("div",{className:"modal",children:[S.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",margin:0},children:"Assign Barcode ke Unit"}),S.jsxs("div",{style:{marginBottom:"1rem"},children:[S.jsx("label",{className:"form-label",children:"Input Barcode Manual"}),S.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[S.jsx("input",{type:"text",value:q,onChange:oe=>j(oe.target.value),placeholder:"Masukkan barcode...",className:"form-input",style:{flex:1}}),S.jsx("button",{onClick:cr,className:"btn btn-primary",style:{padding:"0.5rem 1rem"},children:"Assign"})]})]}),S.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem",padding:"1rem",backgroundColor:"#f8fafc",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[S.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0 0 0.5rem 0"},children:"Atau scan barcode dengan kamera"}),S.jsxs("button",{onClick:()=>{k(!1),N("assign"),O(!0)},style:{backgroundColor:"#10b981",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",margin:"0 auto"},children:[S.jsx(ff,{size:16}),"Scan Barcode"]})]}),S.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:S.jsx("button",{onClick:()=>{k(!1),J(null),j("")},className:"btn btn-secondary",style:{flex:1},children:"Tutup"})})]})}),P&&ge&&S.jsx("div",{className:"modal-overlay",children:S.jsxs("div",{className:"modal",children:[S.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",margin:0},children:"Informasi Stok Produk"}),S.jsxs("div",{style:{backgroundColor:ge.stock<=ge.minStock?"#fef2f2":"#f0fdf4",border:`1px solid ${ge.stock<=ge.minStock?"#fecaca":"#bbf7d0"}`,borderRadius:"0.5rem",padding:"1rem",marginBottom:"1rem"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"0.5rem"},children:[S.jsx(_a,{size:20,style:{color:ge.stock<=ge.minStock?"#dc2626":"#059669",marginRight:"0.5rem"}}),S.jsx("h4",{style:{fontSize:"1rem",fontWeight:"600",color:ge.stock<=ge.minStock?"#991b1b":"#065f46",margin:0},children:ge.name})]}),S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[S.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Unit ID:"}),S.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827"},children:ge.matchedUnitId||"-"})]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[S.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Kategori:"}),S.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827"},children:ge.category})]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[S.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Stok Saat Ini:"}),S.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:ge.stock<=ge.minStock?"#dc2626":"#059669"},children:[ge.stock," unit"]})]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[S.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Stok Minimum:"}),S.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827"},children:[ge.minStock," unit"]})]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[S.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Harga:"}),S.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827"},children:["Rp ",ge.price.toLocaleString("id-ID")]})]})]}),ge.stock<=ge.minStock&&S.jsx("div",{style:{marginTop:"0.75rem",padding:"0.5rem",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"0.25rem"},children:S.jsxs("p",{style:{fontSize:"0.75rem",color:"#991b1b",margin:0,display:"flex",alignItems:"center"},children:[S.jsx(cc,{size:14,style:{marginRight:"0.25rem"}}),"Stok rendah! Segera lakukan restocking."]})})]}),S.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[S.jsx("button",{onClick:()=>{L(!1),V(null)},className:"btn btn-secondary",style:{flex:1},children:"Tutup"}),S.jsx("button",{onClick:()=>{L(!1),V(null),O(!0)},className:"btn btn-primary",style:{flex:1},children:"Scan Lagi"})]})]})}),S.jsx(Zy,{isOpen:I,onScan:R==="assign"?ue:R==="check"?nt:pn,onClose:()=>{O(!1),N(null),J(null)}})]})},J4=()=>{const[t,e]=G.useState([]),[n,i]=G.useState({}),[a,c]=G.useState([]),[f,p]=G.useState(!0),[y,m]=G.useState(!1),[v,_]=G.useState(""),[I,O]=G.useState({name:"",phone:""}),[P,L]=G.useState("cash"),[K,k]=G.useState(!1),[R,N]=G.useState(null);G.useEffect(()=>{U()},[]);const U=async()=>{try{p(!0);const H=await nn.getAllProducts(),ae={};for(const V of H)ae[V.id]=await nn.getReadyStock(V.id);i(ae);const ge=H.filter(V=>ae[V.id]>0);e(ge)}catch(H){console.error("Error loading products:",H)}finally{p(!1)}},J=async H=>{try{const ae=await nn.getProductByBarcode(H);ae?a.some(ge=>ge.productId===ae.id)?alert("Item dengan barcode ini sudah ada di keranjang (maksimal 1 qty)."):q(ae):alert("Produk tidak ditemukan")}catch(ae){console.error("Error scanning barcode:",ae),alert("Error memindai barcode")}m(!1)},q=H=>{if(a.find(ge=>ge.productId===H.id)){alert("Satu barcode hanya boleh 1 qty di keranjang.");return}else{if((n[H.id]||0)<=0){alert("Stok siap jual habis");return}c([...a,{productId:H.id,productName:H.name,quantity:1,price:H.price,total:H.price}])}},j=H=>{c(a.filter(ae=>ae.productId!==H))},te=(H,ae)=>{if(ae<=0){j(H);return}c(a.map(ge=>ge.productId===H?{...ge,quantity:1,total:1*ge.price}:ge))},X=()=>a.reduce((H,ae)=>H+ae.total,0),Ce=async()=>{if(a.length===0){alert("Keranjang kosong");return}try{const H={items:a,totalAmount:X(),customerName:I.name,customerPhone:I.phone,paymentMethod:P},ae=await Xy.createSale(H);N(ae),k(!0),c([]),O({name:"",phone:""}),L("cash"),U()}catch(H){console.error("Error creating sale:",H),alert("Error melakukan penjualan")}},je=t.filter(H=>H.name.toLowerCase().includes(v.toLowerCase())||H.barcode.includes(v)||H.category.toLowerCase().includes(v.toLowerCase()));return f?S.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"16rem"},children:S.jsx("div",{className:"spinner"})}):S.jsxs("div",{style:{padding:"1.5rem"},children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[S.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#111827",margin:0},children:"Modul Penjualan"}),S.jsxs("button",{onClick:()=>m(!0),style:{backgroundColor:"#10b981",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:[S.jsx(ff,{size:20}),"Scan Barcode"]})]}),S.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"2fr 1fr",gap:"1rem"},children:[S.jsx("div",{children:S.jsxs("div",{style:{background:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",padding:"1.5rem"},children:[S.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",margin:0},children:"Daftar Produk"}),S.jsx("div",{style:{marginBottom:"1rem"},children:S.jsxs("div",{style:{position:"relative"},children:[S.jsx(Y2,{size:20,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),S.jsx("input",{type:"text",placeholder:"Cari produk...",value:v,onChange:H=>_(H.target.value),style:{width:"100%",paddingLeft:"2.5rem",paddingRight:"1rem",paddingTop:"0.5rem",paddingBottom:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.5rem",fontSize:"0.875rem"}})]})}),S.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",maxHeight:window.innerWidth<=768?"20rem":"24rem",overflowY:"auto"},children:je.map(H=>S.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"1rem",transition:"box-shadow 0.2s"},children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[S.jsx("h3",{style:{fontWeight:"500",color:"#111827",margin:0,fontSize:"0.875rem"},children:H.name}),S.jsx("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:H.category})]}),S.jsxs("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.5rem",margin:0},children:["Barcode: ",H.barcode]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsxs("span",{style:{fontWeight:"600",color:"#2563eb",fontSize:"0.875rem"},children:["Rp ",H.price.toLocaleString("id-ID")]}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[S.jsxs("span",{style:{fontSize:"0.75rem",color:(n[H.id]||0)>0?"#059669":"#dc2626"},children:["Ready: ",n[H.id]||0]}),S.jsx("button",{onClick:()=>q(H),disabled:(n[H.id]||0)<=0||a.some(ae=>ae.productId===H.id),style:{backgroundColor:(n[H.id]||0)<=0||a.some(ae=>ae.productId===H.id)?"#d1d5db":"#3b82f6",color:"white",padding:"0.25rem",borderRadius:"0.25rem",border:"none",cursor:(n[H.id]||0)<=0||a.some(ae=>ae.productId===H.id)?"not-allowed":"pointer",fontSize:"0.75rem"},title:a.some(ae=>ae.productId===H.id)?"Sudah di keranjang (maks 1)":"",children:S.jsx(hf,{size:16})})]})]})]},H.id))})]})}),S.jsx("div",{children:S.jsxs("div",{style:{background:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",padding:"1.5rem"},children:[S.jsxs("h2",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",margin:0,display:"flex",alignItems:"center"},children:[S.jsx(kh,{size:20,style:{marginRight:"0.5rem"}}),"Keranjang"]}),S.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1rem",maxHeight:"16rem",overflowY:"auto"},children:a.map(H=>S.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.75rem"},children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[S.jsx("h4",{style:{fontWeight:"500",fontSize:"0.75rem",color:"#111827",margin:0},children:H.productName}),S.jsx("button",{onClick:()=>j(H.productId),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem"},children:S.jsx(gf,{size:14})})]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[S.jsx("button",{onClick:()=>te(H.productId,H.quantity-1),style:{backgroundColor:"#e5e7eb",color:"#374151",padding:"0.25rem",borderRadius:"0.25rem",border:"none",cursor:"pointer",fontSize:"0.75rem"},"aria-label":"Kurangi qty (akan menghapus item)",children:S.jsx(av,{size:12})}),S.jsx("span",{style:{fontSize:"0.75rem",fontWeight:"500"},children:H.quantity}),S.jsx("button",{onClick:()=>{},disabled:!0,style:{backgroundColor:"#e5e7eb",color:"#9ca3af",padding:"0.25rem",borderRadius:"0.25rem",border:"none",cursor:"not-allowed",fontSize:"0.75rem"},title:"Qty maksimum 1 per barcode",children:S.jsx(hf,{size:12})})]}),S.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:"600"},children:["Rp ",H.total.toLocaleString("id-ID")]})]})]},H.productId))}),S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1rem"},children:[S.jsxs("div",{children:[S.jsx("label",{className:"form-label",children:"Nama Pelanggan"}),S.jsx("input",{type:"text",value:I.name,onChange:H=>O(ae=>({...ae,name:H.target.value})),className:"form-input",style:{fontSize:"0.75rem"}})]}),S.jsxs("div",{children:[S.jsx("label",{className:"form-label",children:"No. Telepon"}),S.jsx("input",{type:"text",value:I.phone,onChange:H=>O(ae=>({...ae,phone:H.target.value})),className:"form-input",style:{fontSize:"0.75rem"}})]}),S.jsxs("div",{children:[S.jsx("label",{className:"form-label",children:"Metode Pembayaran"}),S.jsxs("select",{value:P,onChange:H=>L(H.target.value),className:"form-select",style:{fontSize:"0.75rem"},children:[S.jsx("option",{value:"cash",children:"Tunai"}),S.jsx("option",{value:"card",children:"Kartu"}),S.jsx("option",{value:"transfer",children:"Transfer"})]})]})]}),S.jsxs("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:"1rem"},children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[S.jsx("span",{style:{fontSize:"1.125rem",fontWeight:"600"},children:"Total:"}),S.jsxs("span",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#2563eb"},children:["Rp ",X().toLocaleString("id-ID")]})]}),S.jsxs("button",{onClick:Ce,disabled:a.length===0,style:{width:"100%",backgroundColor:a.length===0?"#d1d5db":"#10b981",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",cursor:a.length===0?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:[S.jsx(lv,{size:20}),"Proses Penjualan"]})]})]})})]}),S.jsx(Zy,{isOpen:y,onScan:J,onClose:()=>m(!1)}),K&&R&&S.jsx("div",{className:"modal-overlay",children:S.jsxs("div",{className:"modal",children:[S.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",margin:0},children:"Struk Penjualan"}),S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"1rem"},children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[S.jsx("span",{children:"No. Transaksi:"}),S.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.75rem"},children:R.id})]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[S.jsx("span",{children:"Tanggal:"}),S.jsx("span",{children:new Date(R.createdAt).toLocaleString("id-ID")})]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[S.jsx("span",{children:"Pelanggan:"}),S.jsx("span",{children:R.customerName||"-"})]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[S.jsx("span",{children:"Pembayaran:"}),S.jsx("span",{style:{textTransform:"capitalize"},children:R.paymentMethod})]})]}),S.jsxs("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:"0.5rem",marginBottom:"1rem"},children:[S.jsx("h4",{style:{fontWeight:"500",marginBottom:"0.5rem",margin:0},children:"Item:"}),R.items.map((H,ae)=>S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.75rem"},children:[S.jsxs("span",{children:[H.productName," x",H.quantity]}),S.jsxs("span",{children:["Rp ",H.total.toLocaleString("id-ID")]})]},ae))]}),S.jsx("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:"0.5rem",marginBottom:"1rem"},children:S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:"600"},children:[S.jsx("span",{children:"Total:"}),S.jsxs("span",{children:["Rp ",R.totalAmount.toLocaleString("id-ID")]})]})}),S.jsx("button",{onClick:()=>k(!1),className:"btn btn-primary",style:{width:"100%"},children:"Tutup"})]})})]})},eT=()=>{const[t,e]=G.useState(!1),[n,i]=G.useState(!1),[a,c]=G.useState(!1);return G.useEffect(()=>{const f=()=>{const p=window.innerWidth;e(p<=768),i(p>768&&p<=1024),c(p>1024)};return f(),window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),{isMobile:t,isTablet:n,isDesktop:a}},tT=()=>{const{isMobile:t}=eT(),[e,n]=G.useState({totalProducts:0,lowStockProducts:0,totalSales:0,totalProcurements:0,totalRevenue:0,totalCost:0}),[i,a]=G.useState(!0),[c,f]=G.useState([]),[p,y]=G.useState([]);G.useEffect(()=>{m()},[]);const m=async()=>{try{a(!0);const[_,I,O]=await Promise.all([nn.getAllProducts(),Xy.getAllSales(),T4.getAllProcurements()]),P=_.filter(N=>N.stock<=N.minStock),L=I.reduce((N,U)=>N+U.totalAmount,0),K=O.reduce((N,U)=>N+U.totalAmount,0);n({totalProducts:_.length,lowStockProducts:P.length,totalSales:I.length,totalProcurements:O.length,totalRevenue:L,totalCost:K});const k=I.sort((N,U)=>U.createdAt-N.createdAt).slice(0,5),R=O.sort((N,U)=>U.createdAt-N.createdAt).slice(0,5);f(k),y(R)}catch(_){console.error("Error loading dashboard data:",_)}finally{a(!1)}},v=({title:_,value:I,icon:O,color:P})=>S.jsxs("div",{style:{background:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",padding:"1.5rem",display:"flex",alignItems:"center"},children:[S.jsx("div",{style:{padding:"0.75rem",borderRadius:"50%",backgroundColor:P,marginRight:"1rem"},children:S.jsx(O,{size:24,style:{color:"white"}})}),S.jsxs("div",{children:[S.jsx("p",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#6b7280",margin:0},children:_}),S.jsx("p",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#111827",margin:0},children:I})]})]});return i?S.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"16rem"},children:S.jsx("div",{className:"spinner"})}):S.jsxs("div",{style:{padding:"1.5rem"},children:[S.jsxs("div",{style:{marginBottom:"1.5rem"},children:[S.jsx("h1",{style:{fontSize:"1.875rem",fontWeight:"700",color:"#111827",margin:0},children:"Dashboard"}),S.jsx("p",{style:{color:"#6b7280",marginTop:"0.5rem",margin:0},children:"Ringkasan sistem inventory IQOS"})]}),S.jsxs("div",{style:{display:"grid",gridTemplateColumns:t?"1fr":"repeat(auto-fit, minmax(250px, 1fr))",gap:t?"1rem":"1.5rem",marginBottom:"1.5rem"},children:[S.jsx(v,{title:"Total Produk",value:e.totalProducts,icon:_a,color:"#3b82f6"}),S.jsx(v,{title:"Stok Rendah",value:e.lowStockProducts,icon:cc,color:"#ef4444"}),S.jsx(v,{title:"Total Penjualan",value:e.totalSales,icon:kh,color:"#10b981"}),S.jsx(v,{title:"Total Pengadaan",value:e.totalProcurements,icon:cv,color:"#8b5cf6"})]}),S.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[S.jsxs("div",{style:{background:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",padding:"1.5rem"},children:[S.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#111827",marginBottom:"1rem",margin:0},children:"Ringkasan Keuangan"}),S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsx("span",{style:{color:"#6b7280"},children:"Total Pendapatan"}),S.jsxs("span",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#059669"},children:["Rp ",e.totalRevenue.toLocaleString("id-ID")]})]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsx("span",{style:{color:"#6b7280"},children:"Total Biaya"}),S.jsxs("span",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#dc2626"},children:["Rp ",e.totalCost.toLocaleString("id-ID")]})]}),S.jsx("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:"1rem"},children:S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsx("span",{style:{color:"#111827",fontWeight:"500"},children:"Laba Bersih"}),S.jsxs("span",{style:{fontSize:"1.125rem",fontWeight:"600",color:e.totalRevenue-e.totalCost>=0?"#059669":"#dc2626"},children:["Rp ",(e.totalRevenue-e.totalCost).toLocaleString("id-ID")]})]})})]})]}),S.jsxs("div",{style:{background:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",padding:"1.5rem"},children:[S.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#111827",marginBottom:"1rem",margin:0},children:"Status Stok"}),S.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.lowStockProducts>0?S.jsxs("div",{style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"0.5rem",padding:"1rem",display:"flex",alignItems:"center"},children:[S.jsx(cc,{size:20,style:{color:"#dc2626",marginRight:"0.5rem"}}),S.jsxs("div",{children:[S.jsxs("p",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#991b1b",margin:0},children:[e.lowStockProducts," produk memiliki stok rendah"]}),S.jsx("p",{style:{fontSize:"0.75rem",color:"#dc2626",marginTop:"0.25rem",margin:0},children:"Segera lakukan pengadaan untuk produk-produk tersebut"})]})]}):S.jsxs("div",{style:{backgroundColor:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"0.5rem",padding:"1rem",display:"flex",alignItems:"center"},children:[S.jsx(_a,{size:20,style:{color:"#059669",marginRight:"0.5rem"}}),S.jsxs("div",{children:[S.jsx("p",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#065f46",margin:0},children:"Semua produk memiliki stok yang cukup"}),S.jsx("p",{style:{fontSize:"0.75rem",color:"#059669",marginTop:"0.25rem",margin:0},children:"Tidak ada produk dengan stok rendah"})]})]})})]})]}),S.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem"},children:[S.jsxs("div",{style:{background:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:[S.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid #e5e7eb"},children:S.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#111827",margin:0},children:"Penjualan Terbaru"})}),S.jsx("div",{style:{padding:"1.5rem"},children:c.length>0?S.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:c.map(_=>S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"0.5rem",borderBottom:"1px solid #f3f4f6"},children:[S.jsxs("div",{children:[S.jsx("p",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827",margin:0},children:_.customerName||"Pelanggan Umum"}),S.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",margin:0},children:new Date(_.createdAt).toLocaleDateString("id-ID")})]}),S.jsxs("div",{style:{textAlign:"right"},children:[S.jsxs("p",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#059669",margin:0},children:["Rp ",_.totalAmount.toLocaleString("id-ID")]}),S.jsxs("p",{style:{fontSize:"0.75rem",color:"#6b7280",margin:0},children:[_.items.length," item"]})]})]},_.id))}):S.jsx("p",{style:{color:"#6b7280",textAlign:"center",padding:"1rem",margin:0},children:"Belum ada penjualan"})})]}),S.jsxs("div",{style:{background:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:[S.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid #e5e7eb"},children:S.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#111827",margin:0},children:"Pengadaan Terbaru"})}),S.jsx("div",{style:{padding:"1.5rem"},children:p.length>0?S.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:p.map(_=>S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"0.5rem",borderBottom:"1px solid #f3f4f6"},children:[S.jsxs("div",{children:[S.jsx("p",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827",margin:0},children:_.supplierName}),S.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",margin:0},children:new Date(_.createdAt).toLocaleDateString("id-ID")})]}),S.jsxs("div",{style:{textAlign:"right"},children:[S.jsxs("p",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#2563eb",margin:0},children:["Rp ",_.totalAmount.toLocaleString("id-ID")]}),S.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",margin:0},children:_.status==="pending"?"Menunggu":"Diterima"})]})]},_.id))}):S.jsx("p",{style:{color:"#6b7280",textAlign:"center",padding:"1rem",margin:0},children:"Belum ada pengadaan"})})]})]})]})},nT=()=>{const t=Fa(),e=[{path:"/",icon:ov,label:"Dashboard"},{path:"/inventory",icon:_a,label:"Inventory"},{path:"/sales",icon:kh,label:"Penjualan"}];return S.jsx("nav",{className:"nav",children:S.jsxs("div",{className:"nav-container",children:[S.jsx(ig,{to:"/",className:"nav-brand",children:S.jsx("span",{className:"mobile-hidden",children:"IQOS"})}),S.jsx("ul",{className:"nav-menu",children:e.map(n=>{const i=n.icon,a=t.pathname===n.path;return S.jsx("li",{children:S.jsxs(ig,{to:n.path,className:`nav-link ${a?"active":""}`,children:[S.jsx(i,{size:18}),n.label]})},n.path)})})]})})},rT=()=>S.jsx(JE,{children:S.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f9fafb"},children:[S.jsx(nT,{}),S.jsx("main",{className:"container",children:S.jsxs(XE,{children:[S.jsx(Ll,{path:"/",element:S.jsx(tT,{})}),S.jsx(Ll,{path:"/inventory",element:S.jsx($4,{})}),S.jsx(Ll,{path:"/sales",element:S.jsx(J4,{})})]})})]})});pd.createRoot(document.getElementById("root")).render(S.jsx(Op.StrictMode,{children:S.jsx(rT,{})}));
