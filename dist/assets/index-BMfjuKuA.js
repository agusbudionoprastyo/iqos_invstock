function e2(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var da=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function t2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var n2={exports:{}},Du={},r2={exports:{}},Be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vl=Symbol.for("react.element"),n_=Symbol.for("react.portal"),r_=Symbol.for("react.fragment"),i_=Symbol.for("react.strict_mode"),s_=Symbol.for("react.profiler"),o_=Symbol.for("react.provider"),a_=Symbol.for("react.context"),l_=Symbol.for("react.forward_ref"),c_=Symbol.for("react.suspense"),u_=Symbol.for("react.memo"),d_=Symbol.for("react.lazy"),hg=Symbol.iterator;function f_(t){return t===null||typeof t!="object"?null:(t=hg&&t[hg]||t["@@iterator"],typeof t=="function"?t:null)}var i2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},s2=Object.assign,o2={};function Ho(t,e,n){this.props=t,this.context=e,this.refs=o2,this.updater=n||i2}Ho.prototype.isReactComponent={};Ho.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ho.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function a2(){}a2.prototype=Ho.prototype;function $h(t,e,n){this.props=t,this.context=e,this.refs=o2,this.updater=n||i2}var Kh=$h.prototype=new a2;Kh.constructor=$h;s2(Kh,Ho.prototype);Kh.isPureReactComponent=!0;var gg=Array.isArray,l2=Object.prototype.hasOwnProperty,qh={current:null},c2={key:!0,ref:!0,__self:!0,__source:!0};function u2(t,e,n){var i,o={},l=null,f=null;if(e!=null)for(i in e.ref!==void 0&&(f=e.ref),e.key!==void 0&&(l=""+e.key),e)l2.call(e,i)&&!c2.hasOwnProperty(i)&&(o[i]=e[i]);var p=arguments.length-2;if(p===1)o.children=n;else if(1<p){for(var w=Array(p),m=0;m<p;m++)w[m]=arguments[m+2];o.children=w}if(t&&t.defaultProps)for(i in p=t.defaultProps,p)o[i]===void 0&&(o[i]=p[i]);return{$$typeof:vl,type:t,key:l,ref:f,props:o,_owner:qh.current}}function h_(t,e){return{$$typeof:vl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zh(t){return typeof t=="object"&&t!==null&&t.$$typeof===vl}function g_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var pg=/\/+/g;function Pd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?g_(""+t.key):e.toString(36)}function wc(t,e,n,i,o){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var f=!1;if(t===null)f=!0;else switch(l){case"string":case"number":f=!0;break;case"object":switch(t.$$typeof){case vl:case n_:f=!0}}if(f)return f=t,o=o(f),t=i===""?"."+Pd(f,0):i,gg(o)?(n="",t!=null&&(n=t.replace(pg,"$&/")+"/"),wc(o,e,n,"",function(m){return m})):o!=null&&(Zh(o)&&(o=h_(o,n+(!o.key||f&&f.key===o.key?"":(""+o.key).replace(pg,"$&/")+"/")+t)),e.push(o)),1;if(f=0,i=i===""?".":i+":",gg(t))for(var p=0;p<t.length;p++){l=t[p];var w=i+Pd(l,p);f+=wc(l,e,n,w,o)}else if(w=f_(t),typeof w=="function")for(t=w.call(t),p=0;!(l=t.next()).done;)l=l.value,w=i+Pd(l,p++),f+=wc(l,e,n,w,o);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return f}function Zl(t,e,n){if(t==null)return t;var i=[],o=0;return wc(t,i,"","",function(l){return e.call(n,l,o++)}),i}function p_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nn={current:null},xc={transition:null},m_={ReactCurrentDispatcher:Nn,ReactCurrentBatchConfig:xc,ReactCurrentOwner:qh};function d2(){throw Error("act(...) is not supported in production builds of React.")}Be.Children={map:Zl,forEach:function(t,e,n){Zl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Zl(t,function(){e++}),e},toArray:function(t){return Zl(t,function(e){return e})||[]},only:function(t){if(!Zh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Be.Component=Ho;Be.Fragment=r_;Be.Profiler=s_;Be.PureComponent=$h;Be.StrictMode=i_;Be.Suspense=c_;Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m_;Be.act=d2;Be.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=s2({},t.props),o=t.key,l=t.ref,f=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,f=qh.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var p=t.type.defaultProps;for(w in e)l2.call(e,w)&&!c2.hasOwnProperty(w)&&(i[w]=e[w]===void 0&&p!==void 0?p[w]:e[w])}var w=arguments.length-2;if(w===1)i.children=n;else if(1<w){p=Array(w);for(var m=0;m<w;m++)p[m]=arguments[m+2];i.children=p}return{$$typeof:vl,type:t.type,key:o,ref:l,props:i,_owner:f}};Be.createContext=function(t){return t={$$typeof:a_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:o_,_context:t},t.Consumer=t};Be.createElement=u2;Be.createFactory=function(t){var e=u2.bind(null,t);return e.type=t,e};Be.createRef=function(){return{current:null}};Be.forwardRef=function(t){return{$$typeof:l_,render:t}};Be.isValidElement=Zh;Be.lazy=function(t){return{$$typeof:d_,_payload:{_status:-1,_result:t},_init:p_}};Be.memo=function(t,e){return{$$typeof:u_,type:t,compare:e===void 0?null:e}};Be.startTransition=function(t){var e=xc.transition;xc.transition={};try{t()}finally{xc.transition=e}};Be.unstable_act=d2;Be.useCallback=function(t,e){return Nn.current.useCallback(t,e)};Be.useContext=function(t){return Nn.current.useContext(t)};Be.useDebugValue=function(){};Be.useDeferredValue=function(t){return Nn.current.useDeferredValue(t)};Be.useEffect=function(t,e){return Nn.current.useEffect(t,e)};Be.useId=function(){return Nn.current.useId()};Be.useImperativeHandle=function(t,e,n){return Nn.current.useImperativeHandle(t,e,n)};Be.useInsertionEffect=function(t,e){return Nn.current.useInsertionEffect(t,e)};Be.useLayoutEffect=function(t,e){return Nn.current.useLayoutEffect(t,e)};Be.useMemo=function(t,e){return Nn.current.useMemo(t,e)};Be.useReducer=function(t,e,n){return Nn.current.useReducer(t,e,n)};Be.useRef=function(t){return Nn.current.useRef(t)};Be.useState=function(t){return Nn.current.useState(t)};Be.useSyncExternalStore=function(t,e,n){return Nn.current.useSyncExternalStore(t,e,n)};Be.useTransition=function(){return Nn.current.useTransition()};Be.version="18.3.1";r2.exports=Be;var Y=r2.exports;const f2=t2(Y),w_=e2({__proto__:null,default:f2},[Y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x_=Y,y_=Symbol.for("react.element"),v_=Symbol.for("react.fragment"),C_=Object.prototype.hasOwnProperty,__=x_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,E_={key:!0,ref:!0,__self:!0,__source:!0};function h2(t,e,n){var i,o={},l=null,f=null;n!==void 0&&(l=""+n),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(f=e.ref);for(i in e)C_.call(e,i)&&!E_.hasOwnProperty(i)&&(o[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)o[i]===void 0&&(o[i]=e[i]);return{$$typeof:y_,type:t,key:l,ref:f,props:o,_owner:__.current}}Du.Fragment=v_;Du.jsx=h2;Du.jsxs=h2;n2.exports=Du;var b=n2.exports,Af={},g2={exports:{}},er={},p2={exports:{}},m2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(se,me){var we=se.length;se.push(me);e:for(;0<we;){var G=we-1>>>1,oe=se[G];if(0<o(oe,me))se[G]=me,se[we]=oe,we=G;else break e}}function n(se){return se.length===0?null:se[0]}function i(se){if(se.length===0)return null;var me=se[0],we=se.pop();if(we!==me){se[0]=we;e:for(var G=0,oe=se.length,Xe=oe>>>1;G<Xe;){var ve=2*(G+1)-1,Et=se[ve],ce=ve+1,_n=se[ce];if(0>o(Et,we))ce<oe&&0>o(_n,Et)?(se[G]=_n,se[ce]=we,G=ce):(se[G]=Et,se[ve]=we,G=ve);else if(ce<oe&&0>o(_n,we))se[G]=_n,se[ce]=we,G=ce;else break e}}return me}function o(se,me){var we=se.sortIndex-me.sortIndex;return we!==0?we:se.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var f=Date,p=f.now();t.unstable_now=function(){return f.now()-p}}var w=[],m=[],E=1,v=null,S=3,R=!1,M=!1,B=!1,K=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(se){for(var me=n(m);me!==null;){if(me.callback===null)i(m);else if(me.startTime<=se)i(m),me.sortIndex=me.expirationTime,e(w,me);else break;me=n(m)}}function j(se){if(B=!1,N(se),!M)if(n(w)!==null)M=!0,at(te);else{var me=n(m);me!==null&&_e(j,me.startTime-se)}}function te(se,me){M=!1,B&&(B=!1,O(J),J=-1),R=!0;var we=S;try{for(N(me),v=n(w);v!==null&&(!(v.expirationTime>me)||se&&!Qe());){var G=v.callback;if(typeof G=="function"){v.callback=null,S=v.priorityLevel;var oe=G(v.expirationTime<=me);me=t.unstable_now(),typeof oe=="function"?v.callback=oe:v===n(w)&&i(w),N(me)}else i(w);v=n(w)}if(v!==null)var Xe=!0;else{var ve=n(m);ve!==null&&_e(j,ve.startTime-me),Xe=!1}return Xe}finally{v=null,S=we,R=!1}}var Z=!1,U=null,J=-1,$=5,Se=-1;function Qe(){return!(t.unstable_now()-Se<$)}function ge(){if(U!==null){var se=t.unstable_now();Se=se;var me=!0;try{me=U(!0,se)}finally{me?ke():(Z=!1,U=null)}}else Z=!1}var ke;if(typeof k=="function")ke=function(){k(ge)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,V=Ie.port2;Ie.port1.onmessage=ge,ke=function(){V.postMessage(null)}}else ke=function(){K(ge,0)};function at(se){U=se,Z||(Z=!0,ke())}function _e(se,me){J=K(function(){se(t.unstable_now())},me)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(se){se.callback=null},t.unstable_continueExecution=function(){M||R||(M=!0,at(te))},t.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<se?Math.floor(1e3/se):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_getFirstCallbackNode=function(){return n(w)},t.unstable_next=function(se){switch(S){case 1:case 2:case 3:var me=3;break;default:me=S}var we=S;S=me;try{return se()}finally{S=we}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(se,me){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var we=S;S=se;try{return me()}finally{S=we}},t.unstable_scheduleCallback=function(se,me,we){var G=t.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?G+we:G):we=G,se){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=we+oe,se={id:E++,callback:me,priorityLevel:se,startTime:we,expirationTime:oe,sortIndex:-1},we>G?(se.sortIndex=we,e(m,se),n(w)===null&&se===n(m)&&(B?(O(J),J=-1):B=!0,_e(j,we-G))):(se.sortIndex=oe,e(w,se),M||R||(M=!0,at(te))),se},t.unstable_shouldYield=Qe,t.unstable_wrapCallback=function(se){var me=S;return function(){var we=S;S=me;try{return se.apply(this,arguments)}finally{S=we}}}})(m2);p2.exports=m2;var b_=p2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A_=Y,Qn=b_;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w2=new Set,Ha={};function Ps(t,e){No(t,e),No(t+"Capture",e)}function No(t,e){for(Ha[t]=e,t=0;t<e.length;t++)w2.add(e[t])}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sf=Object.prototype.hasOwnProperty,S_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mg={},wg={};function I_(t){return Sf.call(wg,t)?!0:Sf.call(mg,t)?!1:S_.test(t)?wg[t]=!0:(mg[t]=!0,!1)}function T_(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function N_(t,e,n,i){if(e===null||typeof e>"u"||T_(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kn(t,e,n,i,o,l,f){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=f}var hn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){hn[t]=new kn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];hn[e]=new kn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){hn[t]=new kn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){hn[t]=new kn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){hn[t]=new kn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){hn[t]=new kn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){hn[t]=new kn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){hn[t]=new kn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){hn[t]=new kn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qh=/[\-:]([a-z])/g;function Jh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qh,Jh);hn[e]=new kn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qh,Jh);hn[e]=new kn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qh,Jh);hn[e]=new kn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){hn[t]=new kn(t,1,!1,t.toLowerCase(),null,!1,!1)});hn.xlinkHref=new kn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){hn[t]=new kn(t,1,!1,t.toLowerCase(),null,!0,!0)});function e0(t,e,n,i){var o=hn.hasOwnProperty(e)?hn[e]:null;(o!==null?o.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(N_(e,n,o,i)&&(n=null),i||o===null?I_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,i=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var gi=A_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ql=Symbol.for("react.element"),ro=Symbol.for("react.portal"),io=Symbol.for("react.fragment"),t0=Symbol.for("react.strict_mode"),If=Symbol.for("react.profiler"),x2=Symbol.for("react.provider"),y2=Symbol.for("react.context"),n0=Symbol.for("react.forward_ref"),Tf=Symbol.for("react.suspense"),Nf=Symbol.for("react.suspense_list"),r0=Symbol.for("react.memo"),Ai=Symbol.for("react.lazy"),v2=Symbol.for("react.offscreen"),xg=Symbol.iterator;function fa(t){return t===null||typeof t!="object"?null:(t=xg&&t[xg]||t["@@iterator"],typeof t=="function"?t:null)}var It=Object.assign,Md;function ba(t){if(Md===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Md=e&&e[1]||""}return`
`+Md+t}var Bd=!1;function Ld(t,e){if(!t||Bd)return"";Bd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var i=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){i=m}t.call(e.prototype)}else{try{throw Error()}catch(m){i=m}t()}}catch(m){if(m&&i&&typeof m.stack=="string"){for(var o=m.stack.split(`
`),l=i.stack.split(`
`),f=o.length-1,p=l.length-1;1<=f&&0<=p&&o[f]!==l[p];)p--;for(;1<=f&&0<=p;f--,p--)if(o[f]!==l[p]){if(f!==1||p!==1)do if(f--,p--,0>p||o[f]!==l[p]){var w=`
`+o[f].replace(" at new "," at ");return t.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",t.displayName)),w}while(1<=f&&0<=p);break}}}finally{Bd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ba(t):""}function k_(t){switch(t.tag){case 5:return ba(t.type);case 16:return ba("Lazy");case 13:return ba("Suspense");case 19:return ba("SuspenseList");case 0:case 2:case 15:return t=Ld(t.type,!1),t;case 11:return t=Ld(t.type.render,!1),t;case 1:return t=Ld(t.type,!0),t;default:return""}}function kf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case io:return"Fragment";case ro:return"Portal";case If:return"Profiler";case t0:return"StrictMode";case Tf:return"Suspense";case Nf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case y2:return(t.displayName||"Context")+".Consumer";case x2:return(t._context.displayName||"Context")+".Provider";case n0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case r0:return e=t.displayName||null,e!==null?e:kf(t.type)||"Memo";case Ai:e=t._payload,t=t._init;try{return kf(t(e))}catch{}}return null}function R_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kf(e);case 8:return e===t0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $i(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function C2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function O_(t){var e=C2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(f){i=""+f,l.call(this,f)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Jl(t){t._valueTracker||(t._valueTracker=O_(t))}function _2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=C2(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Rc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rf(t,e){var n=e.checked;return It({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function yg(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=$i(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function E2(t,e){e=e.checked,e!=null&&e0(t,"checked",e,!1)}function Of(t,e){E2(t,e);var n=$i(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Df(t,e.type,n):e.hasOwnProperty("defaultValue")&&Df(t,e.type,$i(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Df(t,e,n){(e!=="number"||Rc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Aa=Array.isArray;function yo(t,e,n,i){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&i&&(t[n].defaultSelected=!0)}else{for(n=""+$i(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,i&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Pf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return It({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Cg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(Aa(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$i(n)}}function b2(t,e){var n=$i(e.value),i=$i(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function _g(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function A2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?A2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ec,S2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ec=ec||document.createElement("div"),ec.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ec.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ga(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Na={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},D_=["Webkit","ms","Moz","O"];Object.keys(Na).forEach(function(t){D_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Na[e]=Na[t]})});function I2(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Na.hasOwnProperty(t)&&Na[t]?(""+e).trim():e+"px"}function T2(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,o=I2(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,o):t[n]=o}}var P_=It({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bf(t,e){if(e){if(P_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function Lf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ff=null;function i0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jf=null,vo=null,Co=null;function Eg(t){if(t=El(t)){if(typeof jf!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=Fu(e),jf(t.stateNode,t.type,e))}}function N2(t){vo?Co?Co.push(t):Co=[t]:vo=t}function k2(){if(vo){var t=vo,e=Co;if(Co=vo=null,Eg(t),e)for(t=0;t<e.length;t++)Eg(e[t])}}function R2(t,e){return t(e)}function O2(){}var Fd=!1;function D2(t,e,n){if(Fd)return t(e,n);Fd=!0;try{return R2(t,e,n)}finally{Fd=!1,(vo!==null||Co!==null)&&(O2(),k2())}}function Xa(t,e){var n=t.stateNode;if(n===null)return null;var i=Fu(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var Uf=!1;if(ai)try{var ha={};Object.defineProperty(ha,"passive",{get:function(){Uf=!0}}),window.addEventListener("test",ha,ha),window.removeEventListener("test",ha,ha)}catch{Uf=!1}function M_(t,e,n,i,o,l,f,p,w){var m=Array.prototype.slice.call(arguments,3);try{e.apply(n,m)}catch(E){this.onError(E)}}var ka=!1,Oc=null,Dc=!1,zf=null,B_={onError:function(t){ka=!0,Oc=t}};function L_(t,e,n,i,o,l,f,p,w){ka=!1,Oc=null,M_.apply(B_,arguments)}function F_(t,e,n,i,o,l,f,p,w){if(L_.apply(this,arguments),ka){if(ka){var m=Oc;ka=!1,Oc=null}else throw Error(ee(198));Dc||(Dc=!0,zf=m)}}function Ms(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function P2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function bg(t){if(Ms(t)!==t)throw Error(ee(188))}function j_(t){var e=t.alternate;if(!e){if(e=Ms(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,i=e;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return bg(o),t;if(l===i)return bg(o),e;l=l.sibling}throw Error(ee(188))}if(n.return!==i.return)n=o,i=l;else{for(var f=!1,p=o.child;p;){if(p===n){f=!0,n=o,i=l;break}if(p===i){f=!0,i=o,n=l;break}p=p.sibling}if(!f){for(p=l.child;p;){if(p===n){f=!0,n=l,i=o;break}if(p===i){f=!0,i=l,n=o;break}p=p.sibling}if(!f)throw Error(ee(189))}}if(n.alternate!==i)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function M2(t){return t=j_(t),t!==null?B2(t):null}function B2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=B2(t);if(e!==null)return e;t=t.sibling}return null}var L2=Qn.unstable_scheduleCallback,Ag=Qn.unstable_cancelCallback,U_=Qn.unstable_shouldYield,z_=Qn.unstable_requestPaint,Ft=Qn.unstable_now,W_=Qn.unstable_getCurrentPriorityLevel,s0=Qn.unstable_ImmediatePriority,F2=Qn.unstable_UserBlockingPriority,Pc=Qn.unstable_NormalPriority,V_=Qn.unstable_LowPriority,j2=Qn.unstable_IdlePriority,Pu=null,Xr=null;function H_(t){if(Xr&&typeof Xr.onCommitFiberRoot=="function")try{Xr.onCommitFiberRoot(Pu,t,void 0,(t.current.flags&128)===128)}catch{}}var kr=Math.clz32?Math.clz32:Y_,G_=Math.log,X_=Math.LN2;function Y_(t){return t>>>=0,t===0?32:31-(G_(t)/X_|0)|0}var tc=64,nc=4194304;function Sa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Mc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,o=t.suspendedLanes,l=t.pingedLanes,f=n&268435455;if(f!==0){var p=f&~o;p!==0?i=Sa(p):(l&=f,l!==0&&(i=Sa(l)))}else f=n&~o,f!==0?i=Sa(f):l!==0&&(i=Sa(l));if(i===0)return 0;if(e!==0&&e!==i&&!(e&o)&&(o=i&-i,l=e&-e,o>=l||o===16&&(l&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-kr(e),o=1<<n,i|=t[n],e&=~o;return i}function $_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function K_(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,l=t.pendingLanes;0<l;){var f=31-kr(l),p=1<<f,w=o[f];w===-1?(!(p&n)||p&i)&&(o[f]=$_(p,e)):w<=e&&(t.expiredLanes|=p),l&=~p}}function Wf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function U2(){var t=tc;return tc<<=1,!(tc&4194240)&&(tc=64),t}function jd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Cl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-kr(e),t[e]=n}function q_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-kr(n),l=1<<o;e[o]=0,i[o]=-1,t[o]=-1,n&=~l}}function o0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-kr(n),o=1<<i;o&e|t[i]&e&&(t[i]|=e),n&=~o}}var nt=0;function z2(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var W2,a0,V2,H2,G2,Vf=!1,rc=[],Mi=null,Bi=null,Li=null,Ya=new Map,$a=new Map,Ii=[],Z_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sg(t,e){switch(t){case"focusin":case"focusout":Mi=null;break;case"dragenter":case"dragleave":Bi=null;break;case"mouseover":case"mouseout":Li=null;break;case"pointerover":case"pointerout":Ya.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$a.delete(e.pointerId)}}function ga(t,e,n,i,o,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:l,targetContainers:[o]},e!==null&&(e=El(e),e!==null&&a0(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function Q_(t,e,n,i,o){switch(e){case"focusin":return Mi=ga(Mi,t,e,n,i,o),!0;case"dragenter":return Bi=ga(Bi,t,e,n,i,o),!0;case"mouseover":return Li=ga(Li,t,e,n,i,o),!0;case"pointerover":var l=o.pointerId;return Ya.set(l,ga(Ya.get(l)||null,t,e,n,i,o)),!0;case"gotpointercapture":return l=o.pointerId,$a.set(l,ga($a.get(l)||null,t,e,n,i,o)),!0}return!1}function X2(t){var e=ps(t.target);if(e!==null){var n=Ms(e);if(n!==null){if(e=n.tag,e===13){if(e=P2(n),e!==null){t.blockedOn=e,G2(t.priority,function(){V2(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Ff=i,n.target.dispatchEvent(i),Ff=null}else return e=El(n),e!==null&&a0(e),t.blockedOn=n,!1;e.shift()}return!0}function Ig(t,e,n){yc(t)&&n.delete(e)}function J_(){Vf=!1,Mi!==null&&yc(Mi)&&(Mi=null),Bi!==null&&yc(Bi)&&(Bi=null),Li!==null&&yc(Li)&&(Li=null),Ya.forEach(Ig),$a.forEach(Ig)}function pa(t,e){t.blockedOn===e&&(t.blockedOn=null,Vf||(Vf=!0,Qn.unstable_scheduleCallback(Qn.unstable_NormalPriority,J_)))}function Ka(t){function e(o){return pa(o,t)}if(0<rc.length){pa(rc[0],t);for(var n=1;n<rc.length;n++){var i=rc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Mi!==null&&pa(Mi,t),Bi!==null&&pa(Bi,t),Li!==null&&pa(Li,t),Ya.forEach(e),$a.forEach(e),n=0;n<Ii.length;n++)i=Ii[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ii.length&&(n=Ii[0],n.blockedOn===null);)X2(n),n.blockedOn===null&&Ii.shift()}var _o=gi.ReactCurrentBatchConfig,Bc=!0;function eE(t,e,n,i){var o=nt,l=_o.transition;_o.transition=null;try{nt=1,l0(t,e,n,i)}finally{nt=o,_o.transition=l}}function tE(t,e,n,i){var o=nt,l=_o.transition;_o.transition=null;try{nt=4,l0(t,e,n,i)}finally{nt=o,_o.transition=l}}function l0(t,e,n,i){if(Bc){var o=Hf(t,e,n,i);if(o===null)Kd(t,e,i,Lc,n),Sg(t,i);else if(Q_(o,t,e,n,i))i.stopPropagation();else if(Sg(t,i),e&4&&-1<Z_.indexOf(t)){for(;o!==null;){var l=El(o);if(l!==null&&W2(l),l=Hf(t,e,n,i),l===null&&Kd(t,e,i,Lc,n),l===o)break;o=l}o!==null&&i.stopPropagation()}else Kd(t,e,i,null,n)}}var Lc=null;function Hf(t,e,n,i){if(Lc=null,t=i0(i),t=ps(t),t!==null)if(e=Ms(t),e===null)t=null;else if(n=e.tag,n===13){if(t=P2(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Lc=t,null}function Y2(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(W_()){case s0:return 1;case F2:return 4;case Pc:case V_:return 16;case j2:return 536870912;default:return 16}default:return 16}}var Ni=null,c0=null,vc=null;function $2(){if(vc)return vc;var t,e=c0,n=e.length,i,o="value"in Ni?Ni.value:Ni.textContent,l=o.length;for(t=0;t<n&&e[t]===o[t];t++);var f=n-t;for(i=1;i<=f&&e[n-i]===o[l-i];i++);return vc=o.slice(t,1<i?1-i:void 0)}function Cc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ic(){return!0}function Tg(){return!1}function tr(t){function e(n,i,o,l,f){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=l,this.target=f,this.currentTarget=null;for(var p in t)t.hasOwnProperty(p)&&(n=t[p],this[p]=n?n(l):l[p]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ic:Tg,this.isPropagationStopped=Tg,this}return It(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ic)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ic)},persist:function(){},isPersistent:ic}),e}var Go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},u0=tr(Go),_l=It({},Go,{view:0,detail:0}),nE=tr(_l),Ud,zd,ma,Mu=It({},_l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:d0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ma&&(ma&&t.type==="mousemove"?(Ud=t.screenX-ma.screenX,zd=t.screenY-ma.screenY):zd=Ud=0,ma=t),Ud)},movementY:function(t){return"movementY"in t?t.movementY:zd}}),Ng=tr(Mu),rE=It({},Mu,{dataTransfer:0}),iE=tr(rE),sE=It({},_l,{relatedTarget:0}),Wd=tr(sE),oE=It({},Go,{animationName:0,elapsedTime:0,pseudoElement:0}),aE=tr(oE),lE=It({},Go,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cE=tr(lE),uE=It({},Go,{data:0}),kg=tr(uE),dE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hE[t])?!!e[t]:!1}function d0(){return gE}var pE=It({},_l,{key:function(t){if(t.key){var e=dE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Cc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:d0,charCode:function(t){return t.type==="keypress"?Cc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mE=tr(pE),wE=It({},Mu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rg=tr(wE),xE=It({},_l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:d0}),yE=tr(xE),vE=It({},Go,{propertyName:0,elapsedTime:0,pseudoElement:0}),CE=tr(vE),_E=It({},Mu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),EE=tr(_E),bE=[9,13,27,32],f0=ai&&"CompositionEvent"in window,Ra=null;ai&&"documentMode"in document&&(Ra=document.documentMode);var AE=ai&&"TextEvent"in window&&!Ra,K2=ai&&(!f0||Ra&&8<Ra&&11>=Ra),Og=" ",Dg=!1;function q2(t,e){switch(t){case"keyup":return bE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Z2(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var so=!1;function SE(t,e){switch(t){case"compositionend":return Z2(e);case"keypress":return e.which!==32?null:(Dg=!0,Og);case"textInput":return t=e.data,t===Og&&Dg?null:t;default:return null}}function IE(t,e){if(so)return t==="compositionend"||!f0&&q2(t,e)?(t=$2(),vc=c0=Ni=null,so=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return K2&&e.locale!=="ko"?null:e.data;default:return null}}var TE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!TE[t.type]:e==="textarea"}function Q2(t,e,n,i){N2(i),e=Fc(e,"onChange"),0<e.length&&(n=new u0("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Oa=null,qa=null;function NE(t){cw(t,0)}function Bu(t){var e=lo(t);if(_2(e))return t}function kE(t,e){if(t==="change")return e}var J2=!1;if(ai){var Vd;if(ai){var Hd="oninput"in document;if(!Hd){var Mg=document.createElement("div");Mg.setAttribute("oninput","return;"),Hd=typeof Mg.oninput=="function"}Vd=Hd}else Vd=!1;J2=Vd&&(!document.documentMode||9<document.documentMode)}function Bg(){Oa&&(Oa.detachEvent("onpropertychange",ew),qa=Oa=null)}function ew(t){if(t.propertyName==="value"&&Bu(qa)){var e=[];Q2(e,qa,t,i0(t)),D2(NE,e)}}function RE(t,e,n){t==="focusin"?(Bg(),Oa=e,qa=n,Oa.attachEvent("onpropertychange",ew)):t==="focusout"&&Bg()}function OE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bu(qa)}function DE(t,e){if(t==="click")return Bu(e)}function PE(t,e){if(t==="input"||t==="change")return Bu(e)}function ME(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Dr=typeof Object.is=="function"?Object.is:ME;function Za(t,e){if(Dr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!Sf.call(e,o)||!Dr(t[o],e[o]))return!1}return!0}function Lg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fg(t,e){var n=Lg(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Lg(n)}}function tw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?tw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function nw(){for(var t=window,e=Rc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Rc(t.document)}return e}function h0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function BE(t){var e=nw(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&tw(n.ownerDocument.documentElement,n)){if(i!==null&&h0(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,l=Math.min(i.start,o);i=i.end===void 0?l:Math.min(i.end,o),!t.extend&&l>i&&(o=i,i=l,l=o),o=Fg(n,l);var f=Fg(n,i);o&&f&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==f.node||t.focusOffset!==f.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),l>i?(t.addRange(e),t.extend(f.node,f.offset)):(e.setEnd(f.node,f.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var LE=ai&&"documentMode"in document&&11>=document.documentMode,oo=null,Gf=null,Da=null,Xf=!1;function jg(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xf||oo==null||oo!==Rc(i)||(i=oo,"selectionStart"in i&&h0(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Da&&Za(Da,i)||(Da=i,i=Fc(Gf,"onSelect"),0<i.length&&(e=new u0("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=oo)))}function sc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ao={animationend:sc("Animation","AnimationEnd"),animationiteration:sc("Animation","AnimationIteration"),animationstart:sc("Animation","AnimationStart"),transitionend:sc("Transition","TransitionEnd")},Gd={},rw={};ai&&(rw=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function Lu(t){if(Gd[t])return Gd[t];if(!ao[t])return t;var e=ao[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in rw)return Gd[t]=e[n];return t}var iw=Lu("animationend"),sw=Lu("animationiteration"),ow=Lu("animationstart"),aw=Lu("transitionend"),lw=new Map,Ug="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function es(t,e){lw.set(t,e),Ps(e,[t])}for(var Xd=0;Xd<Ug.length;Xd++){var Yd=Ug[Xd],FE=Yd.toLowerCase(),jE=Yd[0].toUpperCase()+Yd.slice(1);es(FE,"on"+jE)}es(iw,"onAnimationEnd");es(sw,"onAnimationIteration");es(ow,"onAnimationStart");es("dblclick","onDoubleClick");es("focusin","onFocus");es("focusout","onBlur");es(aw,"onTransitionEnd");No("onMouseEnter",["mouseout","mouseover"]);No("onMouseLeave",["mouseout","mouseover"]);No("onPointerEnter",["pointerout","pointerover"]);No("onPointerLeave",["pointerout","pointerover"]);Ps("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ps("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ps("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ps("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ps("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ps("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ia));function zg(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,F_(i,e,void 0,t),t.currentTarget=null}function cw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],o=i.event;i=i.listeners;e:{var l=void 0;if(e)for(var f=i.length-1;0<=f;f--){var p=i[f],w=p.instance,m=p.currentTarget;if(p=p.listener,w!==l&&o.isPropagationStopped())break e;zg(o,p,m),l=w}else for(f=0;f<i.length;f++){if(p=i[f],w=p.instance,m=p.currentTarget,p=p.listener,w!==l&&o.isPropagationStopped())break e;zg(o,p,m),l=w}}}if(Dc)throw t=zf,Dc=!1,zf=null,t}function xt(t,e){var n=e[Zf];n===void 0&&(n=e[Zf]=new Set);var i=t+"__bubble";n.has(i)||(uw(e,t,2,!1),n.add(i))}function $d(t,e,n){var i=0;e&&(i|=4),uw(n,t,i,e)}var oc="_reactListening"+Math.random().toString(36).slice(2);function Qa(t){if(!t[oc]){t[oc]=!0,w2.forEach(function(n){n!=="selectionchange"&&(UE.has(n)||$d(n,!1,t),$d(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[oc]||(e[oc]=!0,$d("selectionchange",!1,e))}}function uw(t,e,n,i){switch(Y2(e)){case 1:var o=eE;break;case 4:o=tE;break;default:o=l0}n=o.bind(null,e,n,t),o=void 0,!Uf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),i?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Kd(t,e,n,i,o){var l=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var p=i.stateNode.containerInfo;if(p===o||p.nodeType===8&&p.parentNode===o)break;if(f===4)for(f=i.return;f!==null;){var w=f.tag;if((w===3||w===4)&&(w=f.stateNode.containerInfo,w===o||w.nodeType===8&&w.parentNode===o))return;f=f.return}for(;p!==null;){if(f=ps(p),f===null)return;if(w=f.tag,w===5||w===6){i=l=f;continue e}p=p.parentNode}}i=i.return}D2(function(){var m=l,E=i0(n),v=[];e:{var S=lw.get(t);if(S!==void 0){var R=u0,M=t;switch(t){case"keypress":if(Cc(n)===0)break e;case"keydown":case"keyup":R=mE;break;case"focusin":M="focus",R=Wd;break;case"focusout":M="blur",R=Wd;break;case"beforeblur":case"afterblur":R=Wd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=Ng;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=iE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=yE;break;case iw:case sw:case ow:R=aE;break;case aw:R=CE;break;case"scroll":R=nE;break;case"wheel":R=EE;break;case"copy":case"cut":case"paste":R=cE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=Rg}var B=(e&4)!==0,K=!B&&t==="scroll",O=B?S!==null?S+"Capture":null:S;B=[];for(var k=m,N;k!==null;){N=k;var j=N.stateNode;if(N.tag===5&&j!==null&&(N=j,O!==null&&(j=Xa(k,O),j!=null&&B.push(Ja(k,j,N)))),K)break;k=k.return}0<B.length&&(S=new R(S,M,null,n,E),v.push({event:S,listeners:B}))}}if(!(e&7)){e:{if(S=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",S&&n!==Ff&&(M=n.relatedTarget||n.fromElement)&&(ps(M)||M[li]))break e;if((R||S)&&(S=E.window===E?E:(S=E.ownerDocument)?S.defaultView||S.parentWindow:window,R?(M=n.relatedTarget||n.toElement,R=m,M=M?ps(M):null,M!==null&&(K=Ms(M),M!==K||M.tag!==5&&M.tag!==6)&&(M=null)):(R=null,M=m),R!==M)){if(B=Ng,j="onMouseLeave",O="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(B=Rg,j="onPointerLeave",O="onPointerEnter",k="pointer"),K=R==null?S:lo(R),N=M==null?S:lo(M),S=new B(j,k+"leave",R,n,E),S.target=K,S.relatedTarget=N,j=null,ps(E)===m&&(B=new B(O,k+"enter",M,n,E),B.target=N,B.relatedTarget=K,j=B),K=j,R&&M)t:{for(B=R,O=M,k=0,N=B;N;N=eo(N))k++;for(N=0,j=O;j;j=eo(j))N++;for(;0<k-N;)B=eo(B),k--;for(;0<N-k;)O=eo(O),N--;for(;k--;){if(B===O||O!==null&&B===O.alternate)break t;B=eo(B),O=eo(O)}B=null}else B=null;R!==null&&Wg(v,S,R,B,!1),M!==null&&K!==null&&Wg(v,K,M,B,!0)}}e:{if(S=m?lo(m):window,R=S.nodeName&&S.nodeName.toLowerCase(),R==="select"||R==="input"&&S.type==="file")var te=kE;else if(Pg(S))if(J2)te=PE;else{te=OE;var Z=RE}else(R=S.nodeName)&&R.toLowerCase()==="input"&&(S.type==="checkbox"||S.type==="radio")&&(te=DE);if(te&&(te=te(t,m))){Q2(v,te,n,E);break e}Z&&Z(t,S,m),t==="focusout"&&(Z=S._wrapperState)&&Z.controlled&&S.type==="number"&&Df(S,"number",S.value)}switch(Z=m?lo(m):window,t){case"focusin":(Pg(Z)||Z.contentEditable==="true")&&(oo=Z,Gf=m,Da=null);break;case"focusout":Da=Gf=oo=null;break;case"mousedown":Xf=!0;break;case"contextmenu":case"mouseup":case"dragend":Xf=!1,jg(v,n,E);break;case"selectionchange":if(LE)break;case"keydown":case"keyup":jg(v,n,E)}var U;if(f0)e:{switch(t){case"compositionstart":var J="onCompositionStart";break e;case"compositionend":J="onCompositionEnd";break e;case"compositionupdate":J="onCompositionUpdate";break e}J=void 0}else so?q2(t,n)&&(J="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(J="onCompositionStart");J&&(K2&&n.locale!=="ko"&&(so||J!=="onCompositionStart"?J==="onCompositionEnd"&&so&&(U=$2()):(Ni=E,c0="value"in Ni?Ni.value:Ni.textContent,so=!0)),Z=Fc(m,J),0<Z.length&&(J=new kg(J,t,null,n,E),v.push({event:J,listeners:Z}),U?J.data=U:(U=Z2(n),U!==null&&(J.data=U)))),(U=AE?SE(t,n):IE(t,n))&&(m=Fc(m,"onBeforeInput"),0<m.length&&(E=new kg("onBeforeInput","beforeinput",null,n,E),v.push({event:E,listeners:m}),E.data=U))}cw(v,e)})}function Ja(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fc(t,e){for(var n=e+"Capture",i=[];t!==null;){var o=t,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=Xa(t,n),l!=null&&i.unshift(Ja(t,l,o)),l=Xa(t,e),l!=null&&i.push(Ja(t,l,o))),t=t.return}return i}function eo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Wg(t,e,n,i,o){for(var l=e._reactName,f=[];n!==null&&n!==i;){var p=n,w=p.alternate,m=p.stateNode;if(w!==null&&w===i)break;p.tag===5&&m!==null&&(p=m,o?(w=Xa(n,l),w!=null&&f.unshift(Ja(n,w,p))):o||(w=Xa(n,l),w!=null&&f.push(Ja(n,w,p)))),n=n.return}f.length!==0&&t.push({event:e,listeners:f})}var zE=/\r\n?/g,WE=/\u0000|\uFFFD/g;function Vg(t){return(typeof t=="string"?t:""+t).replace(zE,`
`).replace(WE,"")}function ac(t,e,n){if(e=Vg(e),Vg(t)!==e&&n)throw Error(ee(425))}function jc(){}var Yf=null,$f=null;function Kf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qf=typeof setTimeout=="function"?setTimeout:void 0,VE=typeof clearTimeout=="function"?clearTimeout:void 0,Hg=typeof Promise=="function"?Promise:void 0,HE=typeof queueMicrotask=="function"?queueMicrotask:typeof Hg<"u"?function(t){return Hg.resolve(null).then(t).catch(GE)}:qf;function GE(t){setTimeout(function(){throw t})}function qd(t,e){var n=e,i=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(i===0){t.removeChild(o),Ka(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=o}while(n);Ka(e)}function Fi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Gg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xo=Math.random().toString(36).slice(2),Gr="__reactFiber$"+Xo,el="__reactProps$"+Xo,li="__reactContainer$"+Xo,Zf="__reactEvents$"+Xo,XE="__reactListeners$"+Xo,YE="__reactHandles$"+Xo;function ps(t){var e=t[Gr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[li]||n[Gr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Gg(t);t!==null;){if(n=t[Gr])return n;t=Gg(t)}return e}t=n,n=t.parentNode}return null}function El(t){return t=t[Gr]||t[li],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function lo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function Fu(t){return t[el]||null}var Qf=[],co=-1;function ts(t){return{current:t}}function vt(t){0>co||(t.current=Qf[co],Qf[co]=null,co--)}function pt(t,e){co++,Qf[co]=t.current,t.current=e}var Ki={},vn=ts(Ki),Un=ts(!1),Es=Ki;function ko(t,e){var n=t.type.contextTypes;if(!n)return Ki;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in n)o[l]=e[l];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function zn(t){return t=t.childContextTypes,t!=null}function Uc(){vt(Un),vt(vn)}function Xg(t,e,n){if(vn.current!==Ki)throw Error(ee(168));pt(vn,e),pt(Un,n)}function dw(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var o in i)if(!(o in e))throw Error(ee(108,R_(t)||"Unknown",o));return It({},n,i)}function zc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ki,Es=vn.current,pt(vn,t),pt(Un,Un.current),!0}function Yg(t,e,n){var i=t.stateNode;if(!i)throw Error(ee(169));n?(t=dw(t,e,Es),i.__reactInternalMemoizedMergedChildContext=t,vt(Un),vt(vn),pt(vn,t)):vt(Un),pt(Un,n)}var ei=null,ju=!1,Zd=!1;function fw(t){ei===null?ei=[t]:ei.push(t)}function $E(t){ju=!0,fw(t)}function ns(){if(!Zd&&ei!==null){Zd=!0;var t=0,e=nt;try{var n=ei;for(nt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}ei=null,ju=!1}catch(o){throw ei!==null&&(ei=ei.slice(t+1)),L2(s0,ns),o}finally{nt=e,Zd=!1}}return null}var uo=[],fo=0,Wc=null,Vc=0,ur=[],dr=0,bs=null,ti=1,ni="";function ds(t,e){uo[fo++]=Vc,uo[fo++]=Wc,Wc=t,Vc=e}function hw(t,e,n){ur[dr++]=ti,ur[dr++]=ni,ur[dr++]=bs,bs=t;var i=ti;t=ni;var o=32-kr(i)-1;i&=~(1<<o),n+=1;var l=32-kr(e)+o;if(30<l){var f=o-o%5;l=(i&(1<<f)-1).toString(32),i>>=f,o-=f,ti=1<<32-kr(e)+o|n<<o|i,ni=l+t}else ti=1<<l|n<<o|i,ni=t}function g0(t){t.return!==null&&(ds(t,1),hw(t,1,0))}function p0(t){for(;t===Wc;)Wc=uo[--fo],uo[fo]=null,Vc=uo[--fo],uo[fo]=null;for(;t===bs;)bs=ur[--dr],ur[dr]=null,ni=ur[--dr],ur[dr]=null,ti=ur[--dr],ur[dr]=null}var qn=null,Kn=null,_t=!1,Ir=null;function gw(t,e){var n=hr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $g(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qn=t,Kn=Fi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qn=t,Kn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bs!==null?{id:ti,overflow:ni}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=hr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qn=t,Kn=null,!0):!1;default:return!1}}function Jf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function eh(t){if(_t){var e=Kn;if(e){var n=e;if(!$g(t,e)){if(Jf(t))throw Error(ee(418));e=Fi(n.nextSibling);var i=qn;e&&$g(t,e)?gw(i,n):(t.flags=t.flags&-4097|2,_t=!1,qn=t)}}else{if(Jf(t))throw Error(ee(418));t.flags=t.flags&-4097|2,_t=!1,qn=t}}}function Kg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qn=t}function lc(t){if(t!==qn)return!1;if(!_t)return Kg(t),_t=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Kf(t.type,t.memoizedProps)),e&&(e=Kn)){if(Jf(t))throw pw(),Error(ee(418));for(;e;)gw(t,e),e=Fi(e.nextSibling)}if(Kg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Kn=Fi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Kn=null}}else Kn=qn?Fi(t.stateNode.nextSibling):null;return!0}function pw(){for(var t=Kn;t;)t=Fi(t.nextSibling)}function Ro(){Kn=qn=null,_t=!1}function m0(t){Ir===null?Ir=[t]:Ir.push(t)}var KE=gi.ReactCurrentBatchConfig;function wa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var i=n.stateNode}if(!i)throw Error(ee(147,t));var o=i,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(f){var p=o.refs;f===null?delete p[l]:p[l]=f},e._stringRef=l,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function cc(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function qg(t){var e=t._init;return e(t._payload)}function mw(t){function e(O,k){if(t){var N=O.deletions;N===null?(O.deletions=[k],O.flags|=16):N.push(k)}}function n(O,k){if(!t)return null;for(;k!==null;)e(O,k),k=k.sibling;return null}function i(O,k){for(O=new Map;k!==null;)k.key!==null?O.set(k.key,k):O.set(k.index,k),k=k.sibling;return O}function o(O,k){return O=Wi(O,k),O.index=0,O.sibling=null,O}function l(O,k,N){return O.index=N,t?(N=O.alternate,N!==null?(N=N.index,N<k?(O.flags|=2,k):N):(O.flags|=2,k)):(O.flags|=1048576,k)}function f(O){return t&&O.alternate===null&&(O.flags|=2),O}function p(O,k,N,j){return k===null||k.tag!==6?(k=sf(N,O.mode,j),k.return=O,k):(k=o(k,N),k.return=O,k)}function w(O,k,N,j){var te=N.type;return te===io?E(O,k,N.props.children,j,N.key):k!==null&&(k.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===Ai&&qg(te)===k.type)?(j=o(k,N.props),j.ref=wa(O,k,N),j.return=O,j):(j=Tc(N.type,N.key,N.props,null,O.mode,j),j.ref=wa(O,k,N),j.return=O,j)}function m(O,k,N,j){return k===null||k.tag!==4||k.stateNode.containerInfo!==N.containerInfo||k.stateNode.implementation!==N.implementation?(k=of(N,O.mode,j),k.return=O,k):(k=o(k,N.children||[]),k.return=O,k)}function E(O,k,N,j,te){return k===null||k.tag!==7?(k=Cs(N,O.mode,j,te),k.return=O,k):(k=o(k,N),k.return=O,k)}function v(O,k,N){if(typeof k=="string"&&k!==""||typeof k=="number")return k=sf(""+k,O.mode,N),k.return=O,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ql:return N=Tc(k.type,k.key,k.props,null,O.mode,N),N.ref=wa(O,null,k),N.return=O,N;case ro:return k=of(k,O.mode,N),k.return=O,k;case Ai:var j=k._init;return v(O,j(k._payload),N)}if(Aa(k)||fa(k))return k=Cs(k,O.mode,N,null),k.return=O,k;cc(O,k)}return null}function S(O,k,N,j){var te=k!==null?k.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return te!==null?null:p(O,k,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ql:return N.key===te?w(O,k,N,j):null;case ro:return N.key===te?m(O,k,N,j):null;case Ai:return te=N._init,S(O,k,te(N._payload),j)}if(Aa(N)||fa(N))return te!==null?null:E(O,k,N,j,null);cc(O,N)}return null}function R(O,k,N,j,te){if(typeof j=="string"&&j!==""||typeof j=="number")return O=O.get(N)||null,p(k,O,""+j,te);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ql:return O=O.get(j.key===null?N:j.key)||null,w(k,O,j,te);case ro:return O=O.get(j.key===null?N:j.key)||null,m(k,O,j,te);case Ai:var Z=j._init;return R(O,k,N,Z(j._payload),te)}if(Aa(j)||fa(j))return O=O.get(N)||null,E(k,O,j,te,null);cc(k,j)}return null}function M(O,k,N,j){for(var te=null,Z=null,U=k,J=k=0,$=null;U!==null&&J<N.length;J++){U.index>J?($=U,U=null):$=U.sibling;var Se=S(O,U,N[J],j);if(Se===null){U===null&&(U=$);break}t&&U&&Se.alternate===null&&e(O,U),k=l(Se,k,J),Z===null?te=Se:Z.sibling=Se,Z=Se,U=$}if(J===N.length)return n(O,U),_t&&ds(O,J),te;if(U===null){for(;J<N.length;J++)U=v(O,N[J],j),U!==null&&(k=l(U,k,J),Z===null?te=U:Z.sibling=U,Z=U);return _t&&ds(O,J),te}for(U=i(O,U);J<N.length;J++)$=R(U,O,J,N[J],j),$!==null&&(t&&$.alternate!==null&&U.delete($.key===null?J:$.key),k=l($,k,J),Z===null?te=$:Z.sibling=$,Z=$);return t&&U.forEach(function(Qe){return e(O,Qe)}),_t&&ds(O,J),te}function B(O,k,N,j){var te=fa(N);if(typeof te!="function")throw Error(ee(150));if(N=te.call(N),N==null)throw Error(ee(151));for(var Z=te=null,U=k,J=k=0,$=null,Se=N.next();U!==null&&!Se.done;J++,Se=N.next()){U.index>J?($=U,U=null):$=U.sibling;var Qe=S(O,U,Se.value,j);if(Qe===null){U===null&&(U=$);break}t&&U&&Qe.alternate===null&&e(O,U),k=l(Qe,k,J),Z===null?te=Qe:Z.sibling=Qe,Z=Qe,U=$}if(Se.done)return n(O,U),_t&&ds(O,J),te;if(U===null){for(;!Se.done;J++,Se=N.next())Se=v(O,Se.value,j),Se!==null&&(k=l(Se,k,J),Z===null?te=Se:Z.sibling=Se,Z=Se);return _t&&ds(O,J),te}for(U=i(O,U);!Se.done;J++,Se=N.next())Se=R(U,O,J,Se.value,j),Se!==null&&(t&&Se.alternate!==null&&U.delete(Se.key===null?J:Se.key),k=l(Se,k,J),Z===null?te=Se:Z.sibling=Se,Z=Se);return t&&U.forEach(function(ge){return e(O,ge)}),_t&&ds(O,J),te}function K(O,k,N,j){if(typeof N=="object"&&N!==null&&N.type===io&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Ql:e:{for(var te=N.key,Z=k;Z!==null;){if(Z.key===te){if(te=N.type,te===io){if(Z.tag===7){n(O,Z.sibling),k=o(Z,N.props.children),k.return=O,O=k;break e}}else if(Z.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===Ai&&qg(te)===Z.type){n(O,Z.sibling),k=o(Z,N.props),k.ref=wa(O,Z,N),k.return=O,O=k;break e}n(O,Z);break}else e(O,Z);Z=Z.sibling}N.type===io?(k=Cs(N.props.children,O.mode,j,N.key),k.return=O,O=k):(j=Tc(N.type,N.key,N.props,null,O.mode,j),j.ref=wa(O,k,N),j.return=O,O=j)}return f(O);case ro:e:{for(Z=N.key;k!==null;){if(k.key===Z)if(k.tag===4&&k.stateNode.containerInfo===N.containerInfo&&k.stateNode.implementation===N.implementation){n(O,k.sibling),k=o(k,N.children||[]),k.return=O,O=k;break e}else{n(O,k);break}else e(O,k);k=k.sibling}k=of(N,O.mode,j),k.return=O,O=k}return f(O);case Ai:return Z=N._init,K(O,k,Z(N._payload),j)}if(Aa(N))return M(O,k,N,j);if(fa(N))return B(O,k,N,j);cc(O,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,k!==null&&k.tag===6?(n(O,k.sibling),k=o(k,N),k.return=O,O=k):(n(O,k),k=sf(N,O.mode,j),k.return=O,O=k),f(O)):n(O,k)}return K}var Oo=mw(!0),ww=mw(!1),Hc=ts(null),Gc=null,ho=null,w0=null;function x0(){w0=ho=Gc=null}function y0(t){var e=Hc.current;vt(Hc),t._currentValue=e}function th(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Eo(t,e){Gc=t,w0=ho=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Fn=!0),t.firstContext=null)}function mr(t){var e=t._currentValue;if(w0!==t)if(t={context:t,memoizedValue:e,next:null},ho===null){if(Gc===null)throw Error(ee(308));ho=t,Gc.dependencies={lanes:0,firstContext:t}}else ho=ho.next=t;return e}var ms=null;function v0(t){ms===null?ms=[t]:ms.push(t)}function xw(t,e,n,i){var o=e.interleaved;return o===null?(n.next=n,v0(e)):(n.next=o.next,o.next=n),e.interleaved=n,ci(t,i)}function ci(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Si=!1;function C0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ii(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ji(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ge&2){var o=i.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),i.pending=e,ci(t,n)}return o=i.interleaved,o===null?(e.next=e,v0(i)):(e.next=o.next,o.next=e),i.interleaved=e,ci(t,n)}function _c(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,o0(t,n)}}function Zg(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?o=l=f:l=l.next=f,n=n.next}while(n!==null);l===null?o=l=e:l=l.next=e}else o=l=e;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xc(t,e,n,i){var o=t.updateQueue;Si=!1;var l=o.firstBaseUpdate,f=o.lastBaseUpdate,p=o.shared.pending;if(p!==null){o.shared.pending=null;var w=p,m=w.next;w.next=null,f===null?l=m:f.next=m,f=w;var E=t.alternate;E!==null&&(E=E.updateQueue,p=E.lastBaseUpdate,p!==f&&(p===null?E.firstBaseUpdate=m:p.next=m,E.lastBaseUpdate=w))}if(l!==null){var v=o.baseState;f=0,E=m=w=null,p=l;do{var S=p.lane,R=p.eventTime;if((i&S)===S){E!==null&&(E=E.next={eventTime:R,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var M=t,B=p;switch(S=e,R=n,B.tag){case 1:if(M=B.payload,typeof M=="function"){v=M.call(R,v,S);break e}v=M;break e;case 3:M.flags=M.flags&-65537|128;case 0:if(M=B.payload,S=typeof M=="function"?M.call(R,v,S):M,S==null)break e;v=It({},v,S);break e;case 2:Si=!0}}p.callback!==null&&p.lane!==0&&(t.flags|=64,S=o.effects,S===null?o.effects=[p]:S.push(p))}else R={eventTime:R,lane:S,tag:p.tag,payload:p.payload,callback:p.callback,next:null},E===null?(m=E=R,w=v):E=E.next=R,f|=S;if(p=p.next,p===null){if(p=o.shared.pending,p===null)break;S=p,p=S.next,S.next=null,o.lastBaseUpdate=S,o.shared.pending=null}}while(!0);if(E===null&&(w=v),o.baseState=w,o.firstBaseUpdate=m,o.lastBaseUpdate=E,e=o.shared.interleaved,e!==null){o=e;do f|=o.lane,o=o.next;while(o!==e)}else l===null&&(o.shared.lanes=0);Ss|=f,t.lanes=f,t.memoizedState=v}}function Qg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],o=i.callback;if(o!==null){if(i.callback=null,i=n,typeof o!="function")throw Error(ee(191,o));o.call(i)}}}var bl={},Yr=ts(bl),tl=ts(bl),nl=ts(bl);function ws(t){if(t===bl)throw Error(ee(174));return t}function _0(t,e){switch(pt(nl,e),pt(tl,t),pt(Yr,bl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Mf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Mf(e,t)}vt(Yr),pt(Yr,e)}function Do(){vt(Yr),vt(tl),vt(nl)}function vw(t){ws(nl.current);var e=ws(Yr.current),n=Mf(e,t.type);e!==n&&(pt(tl,t),pt(Yr,n))}function E0(t){tl.current===t&&(vt(Yr),vt(tl))}var At=ts(0);function Yc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qd=[];function b0(){for(var t=0;t<Qd.length;t++)Qd[t]._workInProgressVersionPrimary=null;Qd.length=0}var Ec=gi.ReactCurrentDispatcher,Jd=gi.ReactCurrentBatchConfig,As=0,St=null,Yt=null,tn=null,$c=!1,Pa=!1,rl=0,qE=0;function wn(){throw Error(ee(321))}function A0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Dr(t[n],e[n]))return!1;return!0}function S0(t,e,n,i,o,l){if(As=l,St=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ec.current=t===null||t.memoizedState===null?e3:t3,t=n(i,o),Pa){l=0;do{if(Pa=!1,rl=0,25<=l)throw Error(ee(301));l+=1,tn=Yt=null,e.updateQueue=null,Ec.current=n3,t=n(i,o)}while(Pa)}if(Ec.current=Kc,e=Yt!==null&&Yt.next!==null,As=0,tn=Yt=St=null,$c=!1,e)throw Error(ee(300));return t}function I0(){var t=rl!==0;return rl=0,t}function Vr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?St.memoizedState=tn=t:tn=tn.next=t,tn}function wr(){if(Yt===null){var t=St.alternate;t=t!==null?t.memoizedState:null}else t=Yt.next;var e=tn===null?St.memoizedState:tn.next;if(e!==null)tn=e,Yt=t;else{if(t===null)throw Error(ee(310));Yt=t,t={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},tn===null?St.memoizedState=tn=t:tn=tn.next=t}return tn}function il(t,e){return typeof e=="function"?e(t):e}function ef(t){var e=wr(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=Yt,o=i.baseQueue,l=n.pending;if(l!==null){if(o!==null){var f=o.next;o.next=l.next,l.next=f}i.baseQueue=o=l,n.pending=null}if(o!==null){l=o.next,i=i.baseState;var p=f=null,w=null,m=l;do{var E=m.lane;if((As&E)===E)w!==null&&(w=w.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),i=m.hasEagerState?m.eagerState:t(i,m.action);else{var v={lane:E,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};w===null?(p=w=v,f=i):w=w.next=v,St.lanes|=E,Ss|=E}m=m.next}while(m!==null&&m!==l);w===null?f=i:w.next=p,Dr(i,e.memoizedState)||(Fn=!0),e.memoizedState=i,e.baseState=f,e.baseQueue=w,n.lastRenderedState=i}if(t=n.interleaved,t!==null){o=t;do l=o.lane,St.lanes|=l,Ss|=l,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function tf(t){var e=wr(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=n.dispatch,o=n.pending,l=e.memoizedState;if(o!==null){n.pending=null;var f=o=o.next;do l=t(l,f.action),f=f.next;while(f!==o);Dr(l,e.memoizedState)||(Fn=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),n.lastRenderedState=l}return[l,i]}function Cw(){}function _w(t,e){var n=St,i=wr(),o=e(),l=!Dr(i.memoizedState,o);if(l&&(i.memoizedState=o,Fn=!0),i=i.queue,T0(Aw.bind(null,n,i,t),[t]),i.getSnapshot!==e||l||tn!==null&&tn.memoizedState.tag&1){if(n.flags|=2048,sl(9,bw.bind(null,n,i,o,e),void 0,null),rn===null)throw Error(ee(349));As&30||Ew(n,e,o)}return o}function Ew(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function bw(t,e,n,i){e.value=n,e.getSnapshot=i,Sw(e)&&Iw(t)}function Aw(t,e,n){return n(function(){Sw(e)&&Iw(t)})}function Sw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Dr(t,n)}catch{return!0}}function Iw(t){var e=ci(t,1);e!==null&&Rr(e,t,1,-1)}function Jg(t){var e=Vr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:il,lastRenderedState:t},e.queue=t,t=t.dispatch=JE.bind(null,St,t),[e.memoizedState,t]}function sl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Tw(){return wr().memoizedState}function bc(t,e,n,i){var o=Vr();St.flags|=t,o.memoizedState=sl(1|e,n,void 0,i===void 0?null:i)}function Uu(t,e,n,i){var o=wr();i=i===void 0?null:i;var l=void 0;if(Yt!==null){var f=Yt.memoizedState;if(l=f.destroy,i!==null&&A0(i,f.deps)){o.memoizedState=sl(e,n,l,i);return}}St.flags|=t,o.memoizedState=sl(1|e,n,l,i)}function ep(t,e){return bc(8390656,8,t,e)}function T0(t,e){return Uu(2048,8,t,e)}function Nw(t,e){return Uu(4,2,t,e)}function kw(t,e){return Uu(4,4,t,e)}function Rw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ow(t,e,n){return n=n!=null?n.concat([t]):null,Uu(4,4,Rw.bind(null,e,t),n)}function N0(){}function Dw(t,e){var n=wr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&A0(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Pw(t,e){var n=wr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&A0(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Mw(t,e,n){return As&21?(Dr(n,e)||(n=U2(),St.lanes|=n,Ss|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Fn=!0),t.memoizedState=n)}function ZE(t,e){var n=nt;nt=n!==0&&4>n?n:4,t(!0);var i=Jd.transition;Jd.transition={};try{t(!1),e()}finally{nt=n,Jd.transition=i}}function Bw(){return wr().memoizedState}function QE(t,e,n){var i=zi(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Lw(t))Fw(e,n);else if(n=xw(t,e,n,i),n!==null){var o=Sn();Rr(n,t,i,o),jw(n,e,i)}}function JE(t,e,n){var i=zi(t),o={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lw(t))Fw(e,o);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var f=e.lastRenderedState,p=l(f,n);if(o.hasEagerState=!0,o.eagerState=p,Dr(p,f)){var w=e.interleaved;w===null?(o.next=o,v0(e)):(o.next=w.next,w.next=o),e.interleaved=o;return}}catch{}finally{}n=xw(t,e,o,i),n!==null&&(o=Sn(),Rr(n,t,i,o),jw(n,e,i))}}function Lw(t){var e=t.alternate;return t===St||e!==null&&e===St}function Fw(t,e){Pa=$c=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jw(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,o0(t,n)}}var Kc={readContext:mr,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useInsertionEffect:wn,useLayoutEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useMutableSource:wn,useSyncExternalStore:wn,useId:wn,unstable_isNewReconciler:!1},e3={readContext:mr,useCallback:function(t,e){return Vr().memoizedState=[t,e===void 0?null:e],t},useContext:mr,useEffect:ep,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bc(4194308,4,Rw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bc(4194308,4,t,e)},useInsertionEffect:function(t,e){return bc(4,2,t,e)},useMemo:function(t,e){var n=Vr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Vr();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=QE.bind(null,St,t),[i.memoizedState,t]},useRef:function(t){var e=Vr();return t={current:t},e.memoizedState=t},useState:Jg,useDebugValue:N0,useDeferredValue:function(t){return Vr().memoizedState=t},useTransition:function(){var t=Jg(!1),e=t[0];return t=ZE.bind(null,t[1]),Vr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=St,o=Vr();if(_t){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),rn===null)throw Error(ee(349));As&30||Ew(i,e,n)}o.memoizedState=n;var l={value:n,getSnapshot:e};return o.queue=l,ep(Aw.bind(null,i,l,t),[t]),i.flags|=2048,sl(9,bw.bind(null,i,l,n,e),void 0,null),n},useId:function(){var t=Vr(),e=rn.identifierPrefix;if(_t){var n=ni,i=ti;n=(i&~(1<<32-kr(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=rl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},t3={readContext:mr,useCallback:Dw,useContext:mr,useEffect:T0,useImperativeHandle:Ow,useInsertionEffect:Nw,useLayoutEffect:kw,useMemo:Pw,useReducer:ef,useRef:Tw,useState:function(){return ef(il)},useDebugValue:N0,useDeferredValue:function(t){var e=wr();return Mw(e,Yt.memoizedState,t)},useTransition:function(){var t=ef(il)[0],e=wr().memoizedState;return[t,e]},useMutableSource:Cw,useSyncExternalStore:_w,useId:Bw,unstable_isNewReconciler:!1},n3={readContext:mr,useCallback:Dw,useContext:mr,useEffect:T0,useImperativeHandle:Ow,useInsertionEffect:Nw,useLayoutEffect:kw,useMemo:Pw,useReducer:tf,useRef:Tw,useState:function(){return tf(il)},useDebugValue:N0,useDeferredValue:function(t){var e=wr();return Yt===null?e.memoizedState=t:Mw(e,Yt.memoizedState,t)},useTransition:function(){var t=tf(il)[0],e=wr().memoizedState;return[t,e]},useMutableSource:Cw,useSyncExternalStore:_w,useId:Bw,unstable_isNewReconciler:!1};function Ar(t,e){if(t&&t.defaultProps){e=It({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function nh(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:It({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var zu={isMounted:function(t){return(t=t._reactInternals)?Ms(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Sn(),o=zi(t),l=ii(i,o);l.payload=e,n!=null&&(l.callback=n),e=ji(t,l,o),e!==null&&(Rr(e,t,o,i),_c(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Sn(),o=zi(t),l=ii(i,o);l.tag=1,l.payload=e,n!=null&&(l.callback=n),e=ji(t,l,o),e!==null&&(Rr(e,t,o,i),_c(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Sn(),i=zi(t),o=ii(n,i);o.tag=2,e!=null&&(o.callback=e),e=ji(t,o,i),e!==null&&(Rr(e,t,i,n),_c(e,t,i))}};function tp(t,e,n,i,o,l,f){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,l,f):e.prototype&&e.prototype.isPureReactComponent?!Za(n,i)||!Za(o,l):!0}function Uw(t,e,n){var i=!1,o=Ki,l=e.contextType;return typeof l=="object"&&l!==null?l=mr(l):(o=zn(e)?Es:vn.current,i=e.contextTypes,l=(i=i!=null)?ko(t,o):Ki),e=new e(n,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zu,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=l),e}function np(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&zu.enqueueReplaceState(e,e.state,null)}function rh(t,e,n,i){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},C0(t);var l=e.contextType;typeof l=="object"&&l!==null?o.context=mr(l):(l=zn(e)?Es:vn.current,o.context=ko(t,l)),o.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(nh(t,e,l,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&zu.enqueueReplaceState(o,o.state,null),Xc(t,n,o,i),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function Po(t,e){try{var n="",i=e;do n+=k_(i),i=i.return;while(i);var o=n}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:o,digest:null}}function nf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ih(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var r3=typeof WeakMap=="function"?WeakMap:Map;function zw(t,e,n){n=ii(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Zc||(Zc=!0,gh=i),ih(t,e)},n}function Ww(t,e,n){n=ii(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var o=e.value;n.payload=function(){return i(o)},n.callback=function(){ih(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){ih(t,e),typeof i!="function"&&(Ui===null?Ui=new Set([this]):Ui.add(this));var f=e.stack;this.componentDidCatch(e.value,{componentStack:f!==null?f:""})}),n}function rp(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new r3;var o=new Set;i.set(e,o)}else o=i.get(e),o===void 0&&(o=new Set,i.set(e,o));o.has(n)||(o.add(n),t=w3.bind(null,t,e,n),e.then(t,t))}function ip(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sp(t,e,n,i,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ii(-1,1),e.tag=2,ji(n,e,1))),n.lanes|=1),t)}var i3=gi.ReactCurrentOwner,Fn=!1;function bn(t,e,n,i){e.child=t===null?ww(e,null,n,i):Oo(e,t.child,n,i)}function op(t,e,n,i,o){n=n.render;var l=e.ref;return Eo(e,o),i=S0(t,e,n,i,l,o),n=I0(),t!==null&&!Fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,ui(t,e,o)):(_t&&n&&g0(e),e.flags|=1,bn(t,e,i,o),e.child)}function ap(t,e,n,i,o){if(t===null){var l=n.type;return typeof l=="function"&&!L0(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=l,Vw(t,e,l,i,o)):(t=Tc(n.type,null,i,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&o)){var f=l.memoizedProps;if(n=n.compare,n=n!==null?n:Za,n(f,i)&&t.ref===e.ref)return ui(t,e,o)}return e.flags|=1,t=Wi(l,i),t.ref=e.ref,t.return=e,e.child=t}function Vw(t,e,n,i,o){if(t!==null){var l=t.memoizedProps;if(Za(l,i)&&t.ref===e.ref)if(Fn=!1,e.pendingProps=i=l,(t.lanes&o)!==0)t.flags&131072&&(Fn=!0);else return e.lanes=t.lanes,ui(t,e,o)}return sh(t,e,n,i,o)}function Hw(t,e,n){var i=e.pendingProps,o=i.children,l=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(po,$n),$n|=n;else{if(!(n&1073741824))return t=l!==null?l.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pt(po,$n),$n|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:n,pt(po,$n),$n|=i}else l!==null?(i=l.baseLanes|n,e.memoizedState=null):i=n,pt(po,$n),$n|=i;return bn(t,e,o,n),e.child}function Gw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function sh(t,e,n,i,o){var l=zn(n)?Es:vn.current;return l=ko(e,l),Eo(e,o),n=S0(t,e,n,i,l,o),i=I0(),t!==null&&!Fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,ui(t,e,o)):(_t&&i&&g0(e),e.flags|=1,bn(t,e,n,o),e.child)}function lp(t,e,n,i,o){if(zn(n)){var l=!0;zc(e)}else l=!1;if(Eo(e,o),e.stateNode===null)Ac(t,e),Uw(e,n,i),rh(e,n,i,o),i=!0;else if(t===null){var f=e.stateNode,p=e.memoizedProps;f.props=p;var w=f.context,m=n.contextType;typeof m=="object"&&m!==null?m=mr(m):(m=zn(n)?Es:vn.current,m=ko(e,m));var E=n.getDerivedStateFromProps,v=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function";v||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(p!==i||w!==m)&&np(e,f,i,m),Si=!1;var S=e.memoizedState;f.state=S,Xc(e,i,f,o),w=e.memoizedState,p!==i||S!==w||Un.current||Si?(typeof E=="function"&&(nh(e,n,E,i),w=e.memoizedState),(p=Si||tp(e,n,p,i,S,w,m))?(v||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(e.flags|=4194308)):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=w),f.props=i,f.state=w,f.context=m,i=p):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{f=e.stateNode,yw(t,e),p=e.memoizedProps,m=e.type===e.elementType?p:Ar(e.type,p),f.props=m,v=e.pendingProps,S=f.context,w=n.contextType,typeof w=="object"&&w!==null?w=mr(w):(w=zn(n)?Es:vn.current,w=ko(e,w));var R=n.getDerivedStateFromProps;(E=typeof R=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(p!==v||S!==w)&&np(e,f,i,w),Si=!1,S=e.memoizedState,f.state=S,Xc(e,i,f,o);var M=e.memoizedState;p!==v||S!==M||Un.current||Si?(typeof R=="function"&&(nh(e,n,R,i),M=e.memoizedState),(m=Si||tp(e,n,m,i,S,M,w)||!1)?(E||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,M,w),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,M,w)),typeof f.componentDidUpdate=="function"&&(e.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof f.componentDidUpdate!="function"||p===t.memoizedProps&&S===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&S===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=M),f.props=i,f.state=M,f.context=w,i=m):(typeof f.componentDidUpdate!="function"||p===t.memoizedProps&&S===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&S===t.memoizedState||(e.flags|=1024),i=!1)}return oh(t,e,n,i,l,o)}function oh(t,e,n,i,o,l){Gw(t,e);var f=(e.flags&128)!==0;if(!i&&!f)return o&&Yg(e,n,!1),ui(t,e,l);i=e.stateNode,i3.current=e;var p=f&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&f?(e.child=Oo(e,t.child,null,l),e.child=Oo(e,null,p,l)):bn(t,e,p,l),e.memoizedState=i.state,o&&Yg(e,n,!0),e.child}function Xw(t){var e=t.stateNode;e.pendingContext?Xg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Xg(t,e.context,!1),_0(t,e.containerInfo)}function cp(t,e,n,i,o){return Ro(),m0(o),e.flags|=256,bn(t,e,n,i),e.child}var ah={dehydrated:null,treeContext:null,retryLane:0};function lh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Yw(t,e,n){var i=e.pendingProps,o=At.current,l=!1,f=(e.flags&128)!==0,p;if((p=f)||(p=t!==null&&t.memoizedState===null?!1:(o&2)!==0),p?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),pt(At,o&1),t===null)return eh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(f=i.children,t=i.fallback,l?(i=e.mode,l=e.child,f={mode:"hidden",children:f},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=f):l=Hu(f,i,0,null),t=Cs(t,i,n,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=lh(n),e.memoizedState=ah,t):k0(e,f));if(o=t.memoizedState,o!==null&&(p=o.dehydrated,p!==null))return s3(t,e,f,i,p,o,n);if(l){l=i.fallback,f=e.mode,o=t.child,p=o.sibling;var w={mode:"hidden",children:i.children};return!(f&1)&&e.child!==o?(i=e.child,i.childLanes=0,i.pendingProps=w,e.deletions=null):(i=Wi(o,w),i.subtreeFlags=o.subtreeFlags&14680064),p!==null?l=Wi(p,l):(l=Cs(l,f,n,null),l.flags|=2),l.return=e,i.return=e,i.sibling=l,e.child=i,i=l,l=e.child,f=t.child.memoizedState,f=f===null?lh(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},l.memoizedState=f,l.childLanes=t.childLanes&~n,e.memoizedState=ah,i}return l=t.child,t=l.sibling,i=Wi(l,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function k0(t,e){return e=Hu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function uc(t,e,n,i){return i!==null&&m0(i),Oo(e,t.child,null,n),t=k0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function s3(t,e,n,i,o,l,f){if(n)return e.flags&256?(e.flags&=-257,i=nf(Error(ee(422))),uc(t,e,f,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=i.fallback,o=e.mode,i=Hu({mode:"visible",children:i.children},o,0,null),l=Cs(l,o,f,null),l.flags|=2,i.return=e,l.return=e,i.sibling=l,e.child=i,e.mode&1&&Oo(e,t.child,null,f),e.child.memoizedState=lh(f),e.memoizedState=ah,l);if(!(e.mode&1))return uc(t,e,f,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var p=i.dgst;return i=p,l=Error(ee(419)),i=nf(l,i,void 0),uc(t,e,f,i)}if(p=(f&t.childLanes)!==0,Fn||p){if(i=rn,i!==null){switch(f&-f){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|f)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,ci(t,o),Rr(i,t,o,-1))}return B0(),i=nf(Error(ee(421))),uc(t,e,f,i)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=x3.bind(null,t),o._reactRetry=e,null):(t=l.treeContext,Kn=Fi(o.nextSibling),qn=e,_t=!0,Ir=null,t!==null&&(ur[dr++]=ti,ur[dr++]=ni,ur[dr++]=bs,ti=t.id,ni=t.overflow,bs=e),e=k0(e,i.children),e.flags|=4096,e)}function up(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),th(t.return,e,n)}function rf(t,e,n,i,o){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=o)}function $w(t,e,n){var i=e.pendingProps,o=i.revealOrder,l=i.tail;if(bn(t,e,i.children,n),i=At.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&up(t,n,e);else if(t.tag===19)up(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(pt(At,i),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&Yc(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),rf(e,!1,o,n,l);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&Yc(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}rf(e,!0,n,null,l);break;case"together":rf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ac(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ui(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ss|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=Wi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function o3(t,e,n){switch(e.tag){case 3:Xw(e),Ro();break;case 5:vw(e);break;case 1:zn(e.type)&&zc(e);break;case 4:_0(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,o=e.memoizedProps.value;pt(Hc,i._currentValue),i._currentValue=o;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(pt(At,At.current&1),e.flags|=128,null):n&e.child.childLanes?Yw(t,e,n):(pt(At,At.current&1),t=ui(t,e,n),t!==null?t.sibling:null);pt(At,At.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return $w(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),pt(At,At.current),i)break;return null;case 22:case 23:return e.lanes=0,Hw(t,e,n)}return ui(t,e,n)}var Kw,ch,qw,Zw;Kw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ch=function(){};qw=function(t,e,n,i){var o=t.memoizedProps;if(o!==i){t=e.stateNode,ws(Yr.current);var l=null;switch(n){case"input":o=Rf(t,o),i=Rf(t,i),l=[];break;case"select":o=It({},o,{value:void 0}),i=It({},i,{value:void 0}),l=[];break;case"textarea":o=Pf(t,o),i=Pf(t,i),l=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=jc)}Bf(n,i);var f;n=null;for(m in o)if(!i.hasOwnProperty(m)&&o.hasOwnProperty(m)&&o[m]!=null)if(m==="style"){var p=o[m];for(f in p)p.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Ha.hasOwnProperty(m)?l||(l=[]):(l=l||[]).push(m,null));for(m in i){var w=i[m];if(p=o!=null?o[m]:void 0,i.hasOwnProperty(m)&&w!==p&&(w!=null||p!=null))if(m==="style")if(p){for(f in p)!p.hasOwnProperty(f)||w&&w.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in w)w.hasOwnProperty(f)&&p[f]!==w[f]&&(n||(n={}),n[f]=w[f])}else n||(l||(l=[]),l.push(m,n)),n=w;else m==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,p=p?p.__html:void 0,w!=null&&p!==w&&(l=l||[]).push(m,w)):m==="children"?typeof w!="string"&&typeof w!="number"||(l=l||[]).push(m,""+w):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Ha.hasOwnProperty(m)?(w!=null&&m==="onScroll"&&xt("scroll",t),l||p===w||(l=[])):(l=l||[]).push(m,w))}n&&(l=l||[]).push("style",n);var m=l;(e.updateQueue=m)&&(e.flags|=4)}};Zw=function(t,e,n,i){n!==i&&(e.flags|=4)};function xa(t,e){if(!_t)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function xn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function a3(t,e,n){var i=e.pendingProps;switch(p0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xn(e),null;case 1:return zn(e.type)&&Uc(),xn(e),null;case 3:return i=e.stateNode,Do(),vt(Un),vt(vn),b0(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(lc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ir!==null&&(wh(Ir),Ir=null))),ch(t,e),xn(e),null;case 5:E0(e);var o=ws(nl.current);if(n=e.type,t!==null&&e.stateNode!=null)qw(t,e,n,i,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ee(166));return xn(e),null}if(t=ws(Yr.current),lc(e)){i=e.stateNode,n=e.type;var l=e.memoizedProps;switch(i[Gr]=e,i[el]=l,t=(e.mode&1)!==0,n){case"dialog":xt("cancel",i),xt("close",i);break;case"iframe":case"object":case"embed":xt("load",i);break;case"video":case"audio":for(o=0;o<Ia.length;o++)xt(Ia[o],i);break;case"source":xt("error",i);break;case"img":case"image":case"link":xt("error",i),xt("load",i);break;case"details":xt("toggle",i);break;case"input":yg(i,l),xt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},xt("invalid",i);break;case"textarea":Cg(i,l),xt("invalid",i)}Bf(n,l),o=null;for(var f in l)if(l.hasOwnProperty(f)){var p=l[f];f==="children"?typeof p=="string"?i.textContent!==p&&(l.suppressHydrationWarning!==!0&&ac(i.textContent,p,t),o=["children",p]):typeof p=="number"&&i.textContent!==""+p&&(l.suppressHydrationWarning!==!0&&ac(i.textContent,p,t),o=["children",""+p]):Ha.hasOwnProperty(f)&&p!=null&&f==="onScroll"&&xt("scroll",i)}switch(n){case"input":Jl(i),vg(i,l,!0);break;case"textarea":Jl(i),_g(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=jc)}i=o,e.updateQueue=i,i!==null&&(e.flags|=4)}else{f=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=A2(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=f.createElement(n,{is:i.is}):(t=f.createElement(n),n==="select"&&(f=t,i.multiple?f.multiple=!0:i.size&&(f.size=i.size))):t=f.createElementNS(t,n),t[Gr]=e,t[el]=i,Kw(t,e,!1,!1),e.stateNode=t;e:{switch(f=Lf(n,i),n){case"dialog":xt("cancel",t),xt("close",t),o=i;break;case"iframe":case"object":case"embed":xt("load",t),o=i;break;case"video":case"audio":for(o=0;o<Ia.length;o++)xt(Ia[o],t);o=i;break;case"source":xt("error",t),o=i;break;case"img":case"image":case"link":xt("error",t),xt("load",t),o=i;break;case"details":xt("toggle",t),o=i;break;case"input":yg(t,i),o=Rf(t,i),xt("invalid",t);break;case"option":o=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},o=It({},i,{value:void 0}),xt("invalid",t);break;case"textarea":Cg(t,i),o=Pf(t,i),xt("invalid",t);break;default:o=i}Bf(n,o),p=o;for(l in p)if(p.hasOwnProperty(l)){var w=p[l];l==="style"?T2(t,w):l==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&S2(t,w)):l==="children"?typeof w=="string"?(n!=="textarea"||w!=="")&&Ga(t,w):typeof w=="number"&&Ga(t,""+w):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ha.hasOwnProperty(l)?w!=null&&l==="onScroll"&&xt("scroll",t):w!=null&&e0(t,l,w,f))}switch(n){case"input":Jl(t),vg(t,i,!1);break;case"textarea":Jl(t),_g(t);break;case"option":i.value!=null&&t.setAttribute("value",""+$i(i.value));break;case"select":t.multiple=!!i.multiple,l=i.value,l!=null?yo(t,!!i.multiple,l,!1):i.defaultValue!=null&&yo(t,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=jc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xn(e),null;case 6:if(t&&e.stateNode!=null)Zw(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ee(166));if(n=ws(nl.current),ws(Yr.current),lc(e)){if(i=e.stateNode,n=e.memoizedProps,i[Gr]=e,(l=i.nodeValue!==n)&&(t=qn,t!==null))switch(t.tag){case 3:ac(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ac(i.nodeValue,n,(t.mode&1)!==0)}l&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Gr]=e,e.stateNode=i}return xn(e),null;case 13:if(vt(At),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_t&&Kn!==null&&e.mode&1&&!(e.flags&128))pw(),Ro(),e.flags|=98560,l=!1;else if(l=lc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!l)throw Error(ee(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(ee(317));l[Gr]=e}else Ro(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xn(e),l=!1}else Ir!==null&&(wh(Ir),Ir=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||At.current&1?qt===0&&(qt=3):B0())),e.updateQueue!==null&&(e.flags|=4),xn(e),null);case 4:return Do(),ch(t,e),t===null&&Qa(e.stateNode.containerInfo),xn(e),null;case 10:return y0(e.type._context),xn(e),null;case 17:return zn(e.type)&&Uc(),xn(e),null;case 19:if(vt(At),l=e.memoizedState,l===null)return xn(e),null;if(i=(e.flags&128)!==0,f=l.rendering,f===null)if(i)xa(l,!1);else{if(qt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(f=Yc(t),f!==null){for(e.flags|=128,xa(l,!1),i=f.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)l=n,t=i,l.flags&=14680066,f=l.alternate,f===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,t=f.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pt(At,At.current&1|2),e.child}t=t.sibling}l.tail!==null&&Ft()>Mo&&(e.flags|=128,i=!0,xa(l,!1),e.lanes=4194304)}else{if(!i)if(t=Yc(f),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),xa(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!_t)return xn(e),null}else 2*Ft()-l.renderingStartTime>Mo&&n!==1073741824&&(e.flags|=128,i=!0,xa(l,!1),e.lanes=4194304);l.isBackwards?(f.sibling=e.child,e.child=f):(n=l.last,n!==null?n.sibling=f:e.child=f,l.last=f)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Ft(),e.sibling=null,n=At.current,pt(At,i?n&1|2:n&1),e):(xn(e),null);case 22:case 23:return M0(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?$n&1073741824&&(xn(e),e.subtreeFlags&6&&(e.flags|=8192)):xn(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function l3(t,e){switch(p0(e),e.tag){case 1:return zn(e.type)&&Uc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Do(),vt(Un),vt(vn),b0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return E0(e),null;case 13:if(vt(At),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));Ro()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return vt(At),null;case 4:return Do(),null;case 10:return y0(e.type._context),null;case 22:case 23:return M0(),null;case 24:return null;default:return null}}var dc=!1,yn=!1,c3=typeof WeakSet=="function"?WeakSet:Set,de=null;function go(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ot(t,e,i)}else n.current=null}function uh(t,e,n){try{n()}catch(i){Ot(t,e,i)}}var dp=!1;function u3(t,e){if(Yf=Bc,t=nw(),h0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var f=0,p=-1,w=-1,m=0,E=0,v=t,S=null;t:for(;;){for(var R;v!==n||o!==0&&v.nodeType!==3||(p=f+o),v!==l||i!==0&&v.nodeType!==3||(w=f+i),v.nodeType===3&&(f+=v.nodeValue.length),(R=v.firstChild)!==null;)S=v,v=R;for(;;){if(v===t)break t;if(S===n&&++m===o&&(p=f),S===l&&++E===i&&(w=f),(R=v.nextSibling)!==null)break;v=S,S=v.parentNode}v=R}n=p===-1||w===-1?null:{start:p,end:w}}else n=null}n=n||{start:0,end:0}}else n=null;for($f={focusedElem:t,selectionRange:n},Bc=!1,de=e;de!==null;)if(e=de,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,de=t;else for(;de!==null;){e=de;try{var M=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(M!==null){var B=M.memoizedProps,K=M.memoizedState,O=e.stateNode,k=O.getSnapshotBeforeUpdate(e.elementType===e.type?B:Ar(e.type,B),K);O.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(j){Ot(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,de=t;break}de=e.return}return M=dp,dp=!1,M}function Ma(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&t)===t){var l=o.destroy;o.destroy=void 0,l!==void 0&&uh(e,n,l)}o=o.next}while(o!==i)}}function Wu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function dh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Qw(t){var e=t.alternate;e!==null&&(t.alternate=null,Qw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Gr],delete e[el],delete e[Zf],delete e[XE],delete e[YE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Jw(t){return t.tag===5||t.tag===3||t.tag===4}function fp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fh(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jc));else if(i!==4&&(t=t.child,t!==null))for(fh(t,e,n),t=t.sibling;t!==null;)fh(t,e,n),t=t.sibling}function hh(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(hh(t,e,n),t=t.sibling;t!==null;)hh(t,e,n),t=t.sibling}var cn=null,Sr=!1;function bi(t,e,n){for(n=n.child;n!==null;)ex(t,e,n),n=n.sibling}function ex(t,e,n){if(Xr&&typeof Xr.onCommitFiberUnmount=="function")try{Xr.onCommitFiberUnmount(Pu,n)}catch{}switch(n.tag){case 5:yn||go(n,e);case 6:var i=cn,o=Sr;cn=null,bi(t,e,n),cn=i,Sr=o,cn!==null&&(Sr?(t=cn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):cn.removeChild(n.stateNode));break;case 18:cn!==null&&(Sr?(t=cn,n=n.stateNode,t.nodeType===8?qd(t.parentNode,n):t.nodeType===1&&qd(t,n),Ka(t)):qd(cn,n.stateNode));break;case 4:i=cn,o=Sr,cn=n.stateNode.containerInfo,Sr=!0,bi(t,e,n),cn=i,Sr=o;break;case 0:case 11:case 14:case 15:if(!yn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var l=o,f=l.destroy;l=l.tag,f!==void 0&&(l&2||l&4)&&uh(n,e,f),o=o.next}while(o!==i)}bi(t,e,n);break;case 1:if(!yn&&(go(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(p){Ot(n,e,p)}bi(t,e,n);break;case 21:bi(t,e,n);break;case 22:n.mode&1?(yn=(i=yn)||n.memoizedState!==null,bi(t,e,n),yn=i):bi(t,e,n);break;default:bi(t,e,n)}}function hp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new c3),e.forEach(function(i){var o=y3.bind(null,t,i);n.has(i)||(n.add(i),i.then(o,o))})}}function br(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];try{var l=t,f=e,p=f;e:for(;p!==null;){switch(p.tag){case 5:cn=p.stateNode,Sr=!1;break e;case 3:cn=p.stateNode.containerInfo,Sr=!0;break e;case 4:cn=p.stateNode.containerInfo,Sr=!0;break e}p=p.return}if(cn===null)throw Error(ee(160));ex(l,f,o),cn=null,Sr=!1;var w=o.alternate;w!==null&&(w.return=null),o.return=null}catch(m){Ot(o,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tx(e,t),e=e.sibling}function tx(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(br(e,t),Wr(t),i&4){try{Ma(3,t,t.return),Wu(3,t)}catch(B){Ot(t,t.return,B)}try{Ma(5,t,t.return)}catch(B){Ot(t,t.return,B)}}break;case 1:br(e,t),Wr(t),i&512&&n!==null&&go(n,n.return);break;case 5:if(br(e,t),Wr(t),i&512&&n!==null&&go(n,n.return),t.flags&32){var o=t.stateNode;try{Ga(o,"")}catch(B){Ot(t,t.return,B)}}if(i&4&&(o=t.stateNode,o!=null)){var l=t.memoizedProps,f=n!==null?n.memoizedProps:l,p=t.type,w=t.updateQueue;if(t.updateQueue=null,w!==null)try{p==="input"&&l.type==="radio"&&l.name!=null&&E2(o,l),Lf(p,f);var m=Lf(p,l);for(f=0;f<w.length;f+=2){var E=w[f],v=w[f+1];E==="style"?T2(o,v):E==="dangerouslySetInnerHTML"?S2(o,v):E==="children"?Ga(o,v):e0(o,E,v,m)}switch(p){case"input":Of(o,l);break;case"textarea":b2(o,l);break;case"select":var S=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var R=l.value;R!=null?yo(o,!!l.multiple,R,!1):S!==!!l.multiple&&(l.defaultValue!=null?yo(o,!!l.multiple,l.defaultValue,!0):yo(o,!!l.multiple,l.multiple?[]:"",!1))}o[el]=l}catch(B){Ot(t,t.return,B)}}break;case 6:if(br(e,t),Wr(t),i&4){if(t.stateNode===null)throw Error(ee(162));o=t.stateNode,l=t.memoizedProps;try{o.nodeValue=l}catch(B){Ot(t,t.return,B)}}break;case 3:if(br(e,t),Wr(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ka(e.containerInfo)}catch(B){Ot(t,t.return,B)}break;case 4:br(e,t),Wr(t);break;case 13:br(e,t),Wr(t),o=t.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(D0=Ft())),i&4&&hp(t);break;case 22:if(E=n!==null&&n.memoizedState!==null,t.mode&1?(yn=(m=yn)||E,br(e,t),yn=m):br(e,t),Wr(t),i&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!E&&t.mode&1)for(de=t,E=t.child;E!==null;){for(v=de=E;de!==null;){switch(S=de,R=S.child,S.tag){case 0:case 11:case 14:case 15:Ma(4,S,S.return);break;case 1:go(S,S.return);var M=S.stateNode;if(typeof M.componentWillUnmount=="function"){i=S,n=S.return;try{e=i,M.props=e.memoizedProps,M.state=e.memoizedState,M.componentWillUnmount()}catch(B){Ot(i,n,B)}}break;case 5:go(S,S.return);break;case 22:if(S.memoizedState!==null){pp(v);continue}}R!==null?(R.return=S,de=R):pp(v)}E=E.sibling}e:for(E=null,v=t;;){if(v.tag===5){if(E===null){E=v;try{o=v.stateNode,m?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(p=v.stateNode,w=v.memoizedProps.style,f=w!=null&&w.hasOwnProperty("display")?w.display:null,p.style.display=I2("display",f))}catch(B){Ot(t,t.return,B)}}}else if(v.tag===6){if(E===null)try{v.stateNode.nodeValue=m?"":v.memoizedProps}catch(B){Ot(t,t.return,B)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;E===v&&(E=null),v=v.return}E===v&&(E=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:br(e,t),Wr(t),i&4&&hp(t);break;case 21:break;default:br(e,t),Wr(t)}}function Wr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Jw(n)){var i=n;break e}n=n.return}throw Error(ee(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(Ga(o,""),i.flags&=-33);var l=fp(t);hh(t,l,o);break;case 3:case 4:var f=i.stateNode.containerInfo,p=fp(t);fh(t,p,f);break;default:throw Error(ee(161))}}catch(w){Ot(t,t.return,w)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function d3(t,e,n){de=t,nx(t)}function nx(t,e,n){for(var i=(t.mode&1)!==0;de!==null;){var o=de,l=o.child;if(o.tag===22&&i){var f=o.memoizedState!==null||dc;if(!f){var p=o.alternate,w=p!==null&&p.memoizedState!==null||yn;p=dc;var m=yn;if(dc=f,(yn=w)&&!m)for(de=o;de!==null;)f=de,w=f.child,f.tag===22&&f.memoizedState!==null?mp(o):w!==null?(w.return=f,de=w):mp(o);for(;l!==null;)de=l,nx(l),l=l.sibling;de=o,dc=p,yn=m}gp(t)}else o.subtreeFlags&8772&&l!==null?(l.return=o,de=l):gp(t)}}function gp(t){for(;de!==null;){var e=de;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yn||Wu(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!yn)if(n===null)i.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:Ar(e.type,n.memoizedProps);i.componentDidUpdate(o,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&Qg(e,l,i);break;case 3:var f=e.updateQueue;if(f!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Qg(e,f,n)}break;case 5:var p=e.stateNode;if(n===null&&e.flags&4){n=p;var w=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&n.focus();break;case"img":w.src&&(n.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var E=m.memoizedState;if(E!==null){var v=E.dehydrated;v!==null&&Ka(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}yn||e.flags&512&&dh(e)}catch(S){Ot(e,e.return,S)}}if(e===t){de=null;break}if(n=e.sibling,n!==null){n.return=e.return,de=n;break}de=e.return}}function pp(t){for(;de!==null;){var e=de;if(e===t){de=null;break}var n=e.sibling;if(n!==null){n.return=e.return,de=n;break}de=e.return}}function mp(t){for(;de!==null;){var e=de;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wu(4,e)}catch(w){Ot(e,n,w)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var o=e.return;try{i.componentDidMount()}catch(w){Ot(e,o,w)}}var l=e.return;try{dh(e)}catch(w){Ot(e,l,w)}break;case 5:var f=e.return;try{dh(e)}catch(w){Ot(e,f,w)}}}catch(w){Ot(e,e.return,w)}if(e===t){de=null;break}var p=e.sibling;if(p!==null){p.return=e.return,de=p;break}de=e.return}}var f3=Math.ceil,qc=gi.ReactCurrentDispatcher,R0=gi.ReactCurrentOwner,pr=gi.ReactCurrentBatchConfig,Ge=0,rn=null,zt=null,fn=0,$n=0,po=ts(0),qt=0,ol=null,Ss=0,Vu=0,O0=0,Ba=null,Ln=null,D0=0,Mo=1/0,Jr=null,Zc=!1,gh=null,Ui=null,fc=!1,ki=null,Qc=0,La=0,ph=null,Sc=-1,Ic=0;function Sn(){return Ge&6?Ft():Sc!==-1?Sc:Sc=Ft()}function zi(t){return t.mode&1?Ge&2&&fn!==0?fn&-fn:KE.transition!==null?(Ic===0&&(Ic=U2()),Ic):(t=nt,t!==0||(t=window.event,t=t===void 0?16:Y2(t.type)),t):1}function Rr(t,e,n,i){if(50<La)throw La=0,ph=null,Error(ee(185));Cl(t,n,i),(!(Ge&2)||t!==rn)&&(t===rn&&(!(Ge&2)&&(Vu|=n),qt===4&&Ti(t,fn)),Wn(t,i),n===1&&Ge===0&&!(e.mode&1)&&(Mo=Ft()+500,ju&&ns()))}function Wn(t,e){var n=t.callbackNode;K_(t,e);var i=Mc(t,t===rn?fn:0);if(i===0)n!==null&&Ag(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Ag(n),e===1)t.tag===0?$E(wp.bind(null,t)):fw(wp.bind(null,t)),HE(function(){!(Ge&6)&&ns()}),n=null;else{switch(z2(i)){case 1:n=s0;break;case 4:n=F2;break;case 16:n=Pc;break;case 536870912:n=j2;break;default:n=Pc}n=ux(n,rx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rx(t,e){if(Sc=-1,Ic=0,Ge&6)throw Error(ee(327));var n=t.callbackNode;if(bo()&&t.callbackNode!==n)return null;var i=Mc(t,t===rn?fn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Jc(t,i);else{e=i;var o=Ge;Ge|=2;var l=sx();(rn!==t||fn!==e)&&(Jr=null,Mo=Ft()+500,vs(t,e));do try{p3();break}catch(p){ix(t,p)}while(!0);x0(),qc.current=l,Ge=o,zt!==null?e=0:(rn=null,fn=0,e=qt)}if(e!==0){if(e===2&&(o=Wf(t),o!==0&&(i=o,e=mh(t,o))),e===1)throw n=ol,vs(t,0),Ti(t,i),Wn(t,Ft()),n;if(e===6)Ti(t,i);else{if(o=t.current.alternate,!(i&30)&&!h3(o)&&(e=Jc(t,i),e===2&&(l=Wf(t),l!==0&&(i=l,e=mh(t,l))),e===1))throw n=ol,vs(t,0),Ti(t,i),Wn(t,Ft()),n;switch(t.finishedWork=o,t.finishedLanes=i,e){case 0:case 1:throw Error(ee(345));case 2:fs(t,Ln,Jr);break;case 3:if(Ti(t,i),(i&130023424)===i&&(e=D0+500-Ft(),10<e)){if(Mc(t,0)!==0)break;if(o=t.suspendedLanes,(o&i)!==i){Sn(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=qf(fs.bind(null,t,Ln,Jr),e);break}fs(t,Ln,Jr);break;case 4:if(Ti(t,i),(i&4194240)===i)break;for(e=t.eventTimes,o=-1;0<i;){var f=31-kr(i);l=1<<f,f=e[f],f>o&&(o=f),i&=~l}if(i=o,i=Ft()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*f3(i/1960))-i,10<i){t.timeoutHandle=qf(fs.bind(null,t,Ln,Jr),i);break}fs(t,Ln,Jr);break;case 5:fs(t,Ln,Jr);break;default:throw Error(ee(329))}}}return Wn(t,Ft()),t.callbackNode===n?rx.bind(null,t):null}function mh(t,e){var n=Ba;return t.current.memoizedState.isDehydrated&&(vs(t,e).flags|=256),t=Jc(t,e),t!==2&&(e=Ln,Ln=n,e!==null&&wh(e)),t}function wh(t){Ln===null?Ln=t:Ln.push.apply(Ln,t)}function h3(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var o=n[i],l=o.getSnapshot;o=o.value;try{if(!Dr(l(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ti(t,e){for(e&=~O0,e&=~Vu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-kr(e),i=1<<n;t[n]=-1,e&=~i}}function wp(t){if(Ge&6)throw Error(ee(327));bo();var e=Mc(t,0);if(!(e&1))return Wn(t,Ft()),null;var n=Jc(t,e);if(t.tag!==0&&n===2){var i=Wf(t);i!==0&&(e=i,n=mh(t,i))}if(n===1)throw n=ol,vs(t,0),Ti(t,e),Wn(t,Ft()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fs(t,Ln,Jr),Wn(t,Ft()),null}function P0(t,e){var n=Ge;Ge|=1;try{return t(e)}finally{Ge=n,Ge===0&&(Mo=Ft()+500,ju&&ns())}}function Is(t){ki!==null&&ki.tag===0&&!(Ge&6)&&bo();var e=Ge;Ge|=1;var n=pr.transition,i=nt;try{if(pr.transition=null,nt=1,t)return t()}finally{nt=i,pr.transition=n,Ge=e,!(Ge&6)&&ns()}}function M0(){$n=po.current,vt(po)}function vs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,VE(n)),zt!==null)for(n=zt.return;n!==null;){var i=n;switch(p0(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Uc();break;case 3:Do(),vt(Un),vt(vn),b0();break;case 5:E0(i);break;case 4:Do();break;case 13:vt(At);break;case 19:vt(At);break;case 10:y0(i.type._context);break;case 22:case 23:M0()}n=n.return}if(rn=t,zt=t=Wi(t.current,null),fn=$n=e,qt=0,ol=null,O0=Vu=Ss=0,Ln=Ba=null,ms!==null){for(e=0;e<ms.length;e++)if(n=ms[e],i=n.interleaved,i!==null){n.interleaved=null;var o=i.next,l=n.pending;if(l!==null){var f=l.next;l.next=o,i.next=f}n.pending=i}ms=null}return t}function ix(t,e){do{var n=zt;try{if(x0(),Ec.current=Kc,$c){for(var i=St.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}$c=!1}if(As=0,tn=Yt=St=null,Pa=!1,rl=0,R0.current=null,n===null||n.return===null){qt=1,ol=e,zt=null;break}e:{var l=t,f=n.return,p=n,w=e;if(e=fn,p.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var m=w,E=p,v=E.tag;if(!(E.mode&1)&&(v===0||v===11||v===15)){var S=E.alternate;S?(E.updateQueue=S.updateQueue,E.memoizedState=S.memoizedState,E.lanes=S.lanes):(E.updateQueue=null,E.memoizedState=null)}var R=ip(f);if(R!==null){R.flags&=-257,sp(R,f,p,l,e),R.mode&1&&rp(l,m,e),e=R,w=m;var M=e.updateQueue;if(M===null){var B=new Set;B.add(w),e.updateQueue=B}else M.add(w);break e}else{if(!(e&1)){rp(l,m,e),B0();break e}w=Error(ee(426))}}else if(_t&&p.mode&1){var K=ip(f);if(K!==null){!(K.flags&65536)&&(K.flags|=256),sp(K,f,p,l,e),m0(Po(w,p));break e}}l=w=Po(w,p),qt!==4&&(qt=2),Ba===null?Ba=[l]:Ba.push(l),l=f;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var O=zw(l,w,e);Zg(l,O);break e;case 1:p=w;var k=l.type,N=l.stateNode;if(!(l.flags&128)&&(typeof k.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Ui===null||!Ui.has(N)))){l.flags|=65536,e&=-e,l.lanes|=e;var j=Ww(l,p,e);Zg(l,j);break e}}l=l.return}while(l!==null)}ax(n)}catch(te){e=te,zt===n&&n!==null&&(zt=n=n.return);continue}break}while(!0)}function sx(){var t=qc.current;return qc.current=Kc,t===null?Kc:t}function B0(){(qt===0||qt===3||qt===2)&&(qt=4),rn===null||!(Ss&268435455)&&!(Vu&268435455)||Ti(rn,fn)}function Jc(t,e){var n=Ge;Ge|=2;var i=sx();(rn!==t||fn!==e)&&(Jr=null,vs(t,e));do try{g3();break}catch(o){ix(t,o)}while(!0);if(x0(),Ge=n,qc.current=i,zt!==null)throw Error(ee(261));return rn=null,fn=0,qt}function g3(){for(;zt!==null;)ox(zt)}function p3(){for(;zt!==null&&!U_();)ox(zt)}function ox(t){var e=cx(t.alternate,t,$n);t.memoizedProps=t.pendingProps,e===null?ax(t):zt=e,R0.current=null}function ax(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=l3(n,e),n!==null){n.flags&=32767,zt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qt=6,zt=null;return}}else if(n=a3(n,e,$n),n!==null){zt=n;return}if(e=e.sibling,e!==null){zt=e;return}zt=e=t}while(e!==null);qt===0&&(qt=5)}function fs(t,e,n){var i=nt,o=pr.transition;try{pr.transition=null,nt=1,m3(t,e,n,i)}finally{pr.transition=o,nt=i}return null}function m3(t,e,n,i){do bo();while(ki!==null);if(Ge&6)throw Error(ee(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var l=n.lanes|n.childLanes;if(q_(t,l),t===rn&&(zt=rn=null,fn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fc||(fc=!0,ux(Pc,function(){return bo(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=pr.transition,pr.transition=null;var f=nt;nt=1;var p=Ge;Ge|=4,R0.current=null,u3(t,n),tx(n,t),BE($f),Bc=!!Yf,$f=Yf=null,t.current=n,d3(n),z_(),Ge=p,nt=f,pr.transition=l}else t.current=n;if(fc&&(fc=!1,ki=t,Qc=o),l=t.pendingLanes,l===0&&(Ui=null),H_(n.stateNode),Wn(t,Ft()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],i(o.value,{componentStack:o.stack,digest:o.digest});if(Zc)throw Zc=!1,t=gh,gh=null,t;return Qc&1&&t.tag!==0&&bo(),l=t.pendingLanes,l&1?t===ph?La++:(La=0,ph=t):La=0,ns(),null}function bo(){if(ki!==null){var t=z2(Qc),e=pr.transition,n=nt;try{if(pr.transition=null,nt=16>t?16:t,ki===null)var i=!1;else{if(t=ki,ki=null,Qc=0,Ge&6)throw Error(ee(331));var o=Ge;for(Ge|=4,de=t.current;de!==null;){var l=de,f=l.child;if(de.flags&16){var p=l.deletions;if(p!==null){for(var w=0;w<p.length;w++){var m=p[w];for(de=m;de!==null;){var E=de;switch(E.tag){case 0:case 11:case 15:Ma(8,E,l)}var v=E.child;if(v!==null)v.return=E,de=v;else for(;de!==null;){E=de;var S=E.sibling,R=E.return;if(Qw(E),E===m){de=null;break}if(S!==null){S.return=R,de=S;break}de=R}}}var M=l.alternate;if(M!==null){var B=M.child;if(B!==null){M.child=null;do{var K=B.sibling;B.sibling=null,B=K}while(B!==null)}}de=l}}if(l.subtreeFlags&2064&&f!==null)f.return=l,de=f;else e:for(;de!==null;){if(l=de,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Ma(9,l,l.return)}var O=l.sibling;if(O!==null){O.return=l.return,de=O;break e}de=l.return}}var k=t.current;for(de=k;de!==null;){f=de;var N=f.child;if(f.subtreeFlags&2064&&N!==null)N.return=f,de=N;else e:for(f=k;de!==null;){if(p=de,p.flags&2048)try{switch(p.tag){case 0:case 11:case 15:Wu(9,p)}}catch(te){Ot(p,p.return,te)}if(p===f){de=null;break e}var j=p.sibling;if(j!==null){j.return=p.return,de=j;break e}de=p.return}}if(Ge=o,ns(),Xr&&typeof Xr.onPostCommitFiberRoot=="function")try{Xr.onPostCommitFiberRoot(Pu,t)}catch{}i=!0}return i}finally{nt=n,pr.transition=e}}return!1}function xp(t,e,n){e=Po(n,e),e=zw(t,e,1),t=ji(t,e,1),e=Sn(),t!==null&&(Cl(t,1,e),Wn(t,e))}function Ot(t,e,n){if(t.tag===3)xp(t,t,n);else for(;e!==null;){if(e.tag===3){xp(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ui===null||!Ui.has(i))){t=Po(n,t),t=Ww(e,t,1),e=ji(e,t,1),t=Sn(),e!==null&&(Cl(e,1,t),Wn(e,t));break}}e=e.return}}function w3(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Sn(),t.pingedLanes|=t.suspendedLanes&n,rn===t&&(fn&n)===n&&(qt===4||qt===3&&(fn&130023424)===fn&&500>Ft()-D0?vs(t,0):O0|=n),Wn(t,e)}function lx(t,e){e===0&&(t.mode&1?(e=nc,nc<<=1,!(nc&130023424)&&(nc=4194304)):e=1);var n=Sn();t=ci(t,e),t!==null&&(Cl(t,e,n),Wn(t,n))}function x3(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lx(t,n)}function y3(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ee(314))}i!==null&&i.delete(e),lx(t,n)}var cx;cx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Un.current)Fn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Fn=!1,o3(t,e,n);Fn=!!(t.flags&131072)}else Fn=!1,_t&&e.flags&1048576&&hw(e,Vc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ac(t,e),t=e.pendingProps;var o=ko(e,vn.current);Eo(e,n),o=S0(null,e,i,t,o,n);var l=I0();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zn(i)?(l=!0,zc(e)):l=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,C0(e),o.updater=zu,e.stateNode=o,o._reactInternals=e,rh(e,i,t,n),e=oh(null,e,i,!0,l,n)):(e.tag=0,_t&&l&&g0(e),bn(null,e,o,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Ac(t,e),t=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=C3(i),t=Ar(i,t),o){case 0:e=sh(null,e,i,t,n);break e;case 1:e=lp(null,e,i,t,n);break e;case 11:e=op(null,e,i,t,n);break e;case 14:e=ap(null,e,i,Ar(i.type,t),n);break e}throw Error(ee(306,i,""))}return e;case 0:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Ar(i,o),sh(t,e,i,o,n);case 1:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Ar(i,o),lp(t,e,i,o,n);case 3:e:{if(Xw(e),t===null)throw Error(ee(387));i=e.pendingProps,l=e.memoizedState,o=l.element,yw(t,e),Xc(e,i,null,n);var f=e.memoizedState;if(i=f.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){o=Po(Error(ee(423)),e),e=cp(t,e,i,n,o);break e}else if(i!==o){o=Po(Error(ee(424)),e),e=cp(t,e,i,n,o);break e}else for(Kn=Fi(e.stateNode.containerInfo.firstChild),qn=e,_t=!0,Ir=null,n=ww(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ro(),i===o){e=ui(t,e,n);break e}bn(t,e,i,n)}e=e.child}return e;case 5:return vw(e),t===null&&eh(e),i=e.type,o=e.pendingProps,l=t!==null?t.memoizedProps:null,f=o.children,Kf(i,o)?f=null:l!==null&&Kf(i,l)&&(e.flags|=32),Gw(t,e),bn(t,e,f,n),e.child;case 6:return t===null&&eh(e),null;case 13:return Yw(t,e,n);case 4:return _0(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Oo(e,null,i,n):bn(t,e,i,n),e.child;case 11:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Ar(i,o),op(t,e,i,o,n);case 7:return bn(t,e,e.pendingProps,n),e.child;case 8:return bn(t,e,e.pendingProps.children,n),e.child;case 12:return bn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,o=e.pendingProps,l=e.memoizedProps,f=o.value,pt(Hc,i._currentValue),i._currentValue=f,l!==null)if(Dr(l.value,f)){if(l.children===o.children&&!Un.current){e=ui(t,e,n);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var p=l.dependencies;if(p!==null){f=l.child;for(var w=p.firstContext;w!==null;){if(w.context===i){if(l.tag===1){w=ii(-1,n&-n),w.tag=2;var m=l.updateQueue;if(m!==null){m=m.shared;var E=m.pending;E===null?w.next=w:(w.next=E.next,E.next=w),m.pending=w}}l.lanes|=n,w=l.alternate,w!==null&&(w.lanes|=n),th(l.return,n,e),p.lanes|=n;break}w=w.next}}else if(l.tag===10)f=l.type===e.type?null:l.child;else if(l.tag===18){if(f=l.return,f===null)throw Error(ee(341));f.lanes|=n,p=f.alternate,p!==null&&(p.lanes|=n),th(f,n,e),f=l.sibling}else f=l.child;if(f!==null)f.return=l;else for(f=l;f!==null;){if(f===e){f=null;break}if(l=f.sibling,l!==null){l.return=f.return,f=l;break}f=f.return}l=f}bn(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,i=e.pendingProps.children,Eo(e,n),o=mr(o),i=i(o),e.flags|=1,bn(t,e,i,n),e.child;case 14:return i=e.type,o=Ar(i,e.pendingProps),o=Ar(i.type,o),ap(t,e,i,o,n);case 15:return Vw(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Ar(i,o),Ac(t,e),e.tag=1,zn(i)?(t=!0,zc(e)):t=!1,Eo(e,n),Uw(e,i,o),rh(e,i,o,n),oh(null,e,i,!0,t,n);case 19:return $w(t,e,n);case 22:return Hw(t,e,n)}throw Error(ee(156,e.tag))};function ux(t,e){return L2(t,e)}function v3(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(t,e,n,i){return new v3(t,e,n,i)}function L0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function C3(t){if(typeof t=="function")return L0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===n0)return 11;if(t===r0)return 14}return 2}function Wi(t,e){var n=t.alternate;return n===null?(n=hr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Tc(t,e,n,i,o,l){var f=2;if(i=t,typeof t=="function")L0(t)&&(f=1);else if(typeof t=="string")f=5;else e:switch(t){case io:return Cs(n.children,o,l,e);case t0:f=8,o|=8;break;case If:return t=hr(12,n,e,o|2),t.elementType=If,t.lanes=l,t;case Tf:return t=hr(13,n,e,o),t.elementType=Tf,t.lanes=l,t;case Nf:return t=hr(19,n,e,o),t.elementType=Nf,t.lanes=l,t;case v2:return Hu(n,o,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case x2:f=10;break e;case y2:f=9;break e;case n0:f=11;break e;case r0:f=14;break e;case Ai:f=16,i=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=hr(f,n,e,o),e.elementType=t,e.type=i,e.lanes=l,e}function Cs(t,e,n,i){return t=hr(7,t,i,e),t.lanes=n,t}function Hu(t,e,n,i){return t=hr(22,t,i,e),t.elementType=v2,t.lanes=n,t.stateNode={isHidden:!1},t}function sf(t,e,n){return t=hr(6,t,null,e),t.lanes=n,t}function of(t,e,n){return e=hr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _3(t,e,n,i,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jd(0),this.expirationTimes=jd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jd(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function F0(t,e,n,i,o,l,f,p,w){return t=new _3(t,e,n,p,w),e===1?(e=1,l===!0&&(e|=8)):e=0,l=hr(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},C0(l),t}function E3(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ro,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function dx(t){if(!t)return Ki;t=t._reactInternals;e:{if(Ms(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(zn(n))return dw(t,n,e)}return e}function fx(t,e,n,i,o,l,f,p,w){return t=F0(n,i,!0,t,o,l,f,p,w),t.context=dx(null),n=t.current,i=Sn(),o=zi(n),l=ii(i,o),l.callback=e??null,ji(n,l,o),t.current.lanes=o,Cl(t,o,i),Wn(t,i),t}function Gu(t,e,n,i){var o=e.current,l=Sn(),f=zi(o);return n=dx(n),e.context===null?e.context=n:e.pendingContext=n,e=ii(l,f),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ji(o,e,f),t!==null&&(Rr(t,o,f,l),_c(t,o,f)),f}function eu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function j0(t,e){yp(t,e),(t=t.alternate)&&yp(t,e)}function b3(){return null}var hx=typeof reportError=="function"?reportError:function(t){console.error(t)};function U0(t){this._internalRoot=t}Xu.prototype.render=U0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));Gu(t,e,null,null)};Xu.prototype.unmount=U0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Is(function(){Gu(null,t,null,null)}),e[li]=null}};function Xu(t){this._internalRoot=t}Xu.prototype.unstable_scheduleHydration=function(t){if(t){var e=H2();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ii.length&&e!==0&&e<Ii[n].priority;n++);Ii.splice(n,0,t),n===0&&X2(t)}};function z0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vp(){}function A3(t,e,n,i,o){if(o){if(typeof i=="function"){var l=i;i=function(){var m=eu(f);l.call(m)}}var f=fx(e,i,t,0,null,!1,!1,"",vp);return t._reactRootContainer=f,t[li]=f.current,Qa(t.nodeType===8?t.parentNode:t),Is(),f}for(;o=t.lastChild;)t.removeChild(o);if(typeof i=="function"){var p=i;i=function(){var m=eu(w);p.call(m)}}var w=F0(t,0,!1,null,null,!1,!1,"",vp);return t._reactRootContainer=w,t[li]=w.current,Qa(t.nodeType===8?t.parentNode:t),Is(function(){Gu(e,w,n,i)}),w}function $u(t,e,n,i,o){var l=n._reactRootContainer;if(l){var f=l;if(typeof o=="function"){var p=o;o=function(){var w=eu(f);p.call(w)}}Gu(e,f,t,o)}else f=A3(n,e,t,o,i);return eu(f)}W2=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Sa(e.pendingLanes);n!==0&&(o0(e,n|1),Wn(e,Ft()),!(Ge&6)&&(Mo=Ft()+500,ns()))}break;case 13:Is(function(){var i=ci(t,1);if(i!==null){var o=Sn();Rr(i,t,1,o)}}),j0(t,1)}};a0=function(t){if(t.tag===13){var e=ci(t,134217728);if(e!==null){var n=Sn();Rr(e,t,134217728,n)}j0(t,134217728)}};V2=function(t){if(t.tag===13){var e=zi(t),n=ci(t,e);if(n!==null){var i=Sn();Rr(n,t,e,i)}j0(t,e)}};H2=function(){return nt};G2=function(t,e){var n=nt;try{return nt=t,e()}finally{nt=n}};jf=function(t,e,n){switch(e){case"input":if(Of(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var o=Fu(i);if(!o)throw Error(ee(90));_2(i),Of(i,o)}}}break;case"textarea":b2(t,n);break;case"select":e=n.value,e!=null&&yo(t,!!n.multiple,e,!1)}};R2=P0;O2=Is;var S3={usingClientEntryPoint:!1,Events:[El,lo,Fu,N2,k2,P0]},ya={findFiberByHostInstance:ps,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},I3={bundleType:ya.bundleType,version:ya.version,rendererPackageName:ya.rendererPackageName,rendererConfig:ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=M2(t),t===null?null:t.stateNode},findFiberByHostInstance:ya.findFiberByHostInstance||b3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hc.isDisabled&&hc.supportsFiber)try{Pu=hc.inject(I3),Xr=hc}catch{}}er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S3;er.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!z0(e))throw Error(ee(200));return E3(t,e,null,n)};er.createRoot=function(t,e){if(!z0(t))throw Error(ee(299));var n=!1,i="",o=hx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=F0(t,1,!1,null,null,n,!1,i,o),t[li]=e.current,Qa(t.nodeType===8?t.parentNode:t),new U0(e)};er.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=M2(e),t=t===null?null:t.stateNode,t};er.flushSync=function(t){return Is(t)};er.hydrate=function(t,e,n){if(!Yu(e))throw Error(ee(200));return $u(null,t,e,!0,n)};er.hydrateRoot=function(t,e,n){if(!z0(t))throw Error(ee(405));var i=n!=null&&n.hydratedSources||null,o=!1,l="",f=hx;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),e=fx(e,null,t,1,n??null,o,!1,l,f),t[li]=e.current,Qa(t),i)for(t=0;t<i.length;t++)n=i[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new Xu(e)};er.render=function(t,e,n){if(!Yu(e))throw Error(ee(200));return $u(null,t,e,!1,n)};er.unmountComponentAtNode=function(t){if(!Yu(t))throw Error(ee(40));return t._reactRootContainer?(Is(function(){$u(null,null,t,!1,function(){t._reactRootContainer=null,t[li]=null})}),!0):!1};er.unstable_batchedUpdates=P0;er.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Yu(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return $u(t,e,n,!1,i)};er.version="18.3.1-next-f1338f8080-20240426";function gx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gx)}catch(t){console.error(t)}}gx(),g2.exports=er;var T3=g2.exports,Cp=T3;Af.createRoot=Cp.createRoot,Af.hydrateRoot=Cp.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function al(){return al=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},al.apply(this,arguments)}var Ri;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ri||(Ri={}));const _p="popstate";function N3(t){t===void 0&&(t={});function e(i,o){let{pathname:l,search:f,hash:p}=i.location;return xh("",{pathname:l,search:f,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:tu(o)}return R3(e,n,null,t)}function Wt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function px(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function k3(){return Math.random().toString(36).substr(2,8)}function Ep(t,e){return{usr:t.state,key:t.key,idx:e}}function xh(t,e,n,i){return n===void 0&&(n=null),al({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Yo(e):e,{state:n,key:e&&e.key||i||k3()})}function tu(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Yo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function R3(t,e,n,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,f=o.history,p=Ri.Pop,w=null,m=E();m==null&&(m=0,f.replaceState(al({},f.state,{idx:m}),""));function E(){return(f.state||{idx:null}).idx}function v(){p=Ri.Pop;let K=E(),O=K==null?null:K-m;m=K,w&&w({action:p,location:B.location,delta:O})}function S(K,O){p=Ri.Push;let k=xh(B.location,K,O);m=E()+1;let N=Ep(k,m),j=B.createHref(k);try{f.pushState(N,"",j)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;o.location.assign(j)}l&&w&&w({action:p,location:B.location,delta:1})}function R(K,O){p=Ri.Replace;let k=xh(B.location,K,O);m=E();let N=Ep(k,m),j=B.createHref(k);f.replaceState(N,"",j),l&&w&&w({action:p,location:B.location,delta:0})}function M(K){let O=o.location.origin!=="null"?o.location.origin:o.location.href,k=typeof K=="string"?K:tu(K);return k=k.replace(/ $/,"%20"),Wt(O,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,O)}let B={get action(){return p},get location(){return t(o,f)},listen(K){if(w)throw new Error("A history only accepts one active listener");return o.addEventListener(_p,v),w=K,()=>{o.removeEventListener(_p,v),w=null}},createHref(K){return e(o,K)},createURL:M,encodeLocation(K){let O=M(K);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:S,replace:R,go(K){return f.go(K)}};return B}var bp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(bp||(bp={}));function O3(t,e,n){return n===void 0&&(n="/"),D3(t,e,n)}function D3(t,e,n,i){let o=typeof e=="string"?Yo(e):e,l=W0(o.pathname||"/",n);if(l==null)return null;let f=mx(t);P3(f);let p=null;for(let w=0;p==null&&w<f.length;++w){let m=X3(l);p=V3(f[w],m)}return p}function mx(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let o=(l,f,p)=>{let w={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:f,route:l};w.relativePath.startsWith("/")&&(Wt(w.relativePath.startsWith(i),'Absolute route path "'+w.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),w.relativePath=w.relativePath.slice(i.length));let m=Vi([i,w.relativePath]),E=n.concat(w);l.children&&l.children.length>0&&(Wt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),mx(l.children,e,E,m)),!(l.path==null&&!l.index)&&e.push({path:m,score:z3(m,l.index),routesMeta:E})};return t.forEach((l,f)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))o(l,f);else for(let w of wx(l.path))o(l,f,w)}),e}function wx(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),l=n.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let f=wx(i.join("/")),p=[];return p.push(...f.map(w=>w===""?l:[l,w].join("/"))),o&&p.push(...f),p.map(w=>t.startsWith("/")&&w===""?"/":w)}function P3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:W3(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const M3=/^:[\w-]+$/,B3=3,L3=2,F3=1,j3=10,U3=-2,Ap=t=>t==="*";function z3(t,e){let n=t.split("/"),i=n.length;return n.some(Ap)&&(i+=U3),e&&(i+=L3),n.filter(o=>!Ap(o)).reduce((o,l)=>o+(M3.test(l)?B3:l===""?F3:j3),i)}function W3(t,e){return t.length===e.length&&t.slice(0,-1).every((i,o)=>i===e[o])?t[t.length-1]-e[e.length-1]:0}function V3(t,e,n){let{routesMeta:i}=t,o={},l="/",f=[];for(let p=0;p<i.length;++p){let w=i[p],m=p===i.length-1,E=l==="/"?e:e.slice(l.length)||"/",v=H3({path:w.relativePath,caseSensitive:w.caseSensitive,end:m},E),S=w.route;if(!v)return null;Object.assign(o,v.params),f.push({params:o,pathname:Vi([l,v.pathname]),pathnameBase:q3(Vi([l,v.pathnameBase])),route:S}),v.pathnameBase!=="/"&&(l=Vi([l,v.pathnameBase]))}return f}function H3(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=G3(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let l=o[0],f=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((m,E,v)=>{let{paramName:S,isOptional:R}=E;if(S==="*"){let B=p[v]||"";f=l.slice(0,l.length-B.length).replace(/(.)\/+$/,"$1")}const M=p[v];return R&&!M?m[S]=void 0:m[S]=(M||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:f,pattern:t}}function G3(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),px(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,p,w)=>(i.push({paramName:p,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function X3(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return px(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function W0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function Y3(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:o=""}=typeof t=="string"?Yo(t):t;return{pathname:n?n.startsWith("/")?n:$3(n,e):e,search:Z3(i),hash:Q3(o)}}function $3(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function af(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function K3(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xx(t,e){let n=K3(t);return e?n.map((i,o)=>o===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function yx(t,e,n,i){i===void 0&&(i=!1);let o;typeof t=="string"?o=Yo(t):(o=al({},t),Wt(!o.pathname||!o.pathname.includes("?"),af("?","pathname","search",o)),Wt(!o.pathname||!o.pathname.includes("#"),af("#","pathname","hash",o)),Wt(!o.search||!o.search.includes("#"),af("#","search","hash",o)));let l=t===""||o.pathname==="",f=l?"/":o.pathname,p;if(f==null)p=n;else{let v=e.length-1;if(!i&&f.startsWith("..")){let S=f.split("/");for(;S[0]==="..";)S.shift(),v-=1;o.pathname=S.join("/")}p=v>=0?e[v]:"/"}let w=Y3(o,p),m=f&&f!=="/"&&f.endsWith("/"),E=(l||f===".")&&n.endsWith("/");return!w.pathname.endsWith("/")&&(m||E)&&(w.pathname+="/"),w}const Vi=t=>t.join("/").replace(/\/\/+/g,"/"),q3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Z3=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Q3=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function J3(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const vx=["post","put","patch","delete"];new Set(vx);const eb=["get",...vx];new Set(eb);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ll(){return ll=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ll.apply(this,arguments)}const V0=Y.createContext(null),tb=Y.createContext(null),Bs=Y.createContext(null),Ku=Y.createContext(null),Ls=Y.createContext({outlet:null,matches:[],isDataRoute:!1}),Cx=Y.createContext(null);function nb(t,e){let{relative:n}=e===void 0?{}:e;Al()||Wt(!1);let{basename:i,navigator:o}=Y.useContext(Bs),{hash:l,pathname:f,search:p}=Ex(t,{relative:n}),w=f;return i!=="/"&&(w=f==="/"?i:Vi([i,f])),o.createHref({pathname:w,search:p,hash:l})}function Al(){return Y.useContext(Ku)!=null}function Sl(){return Al()||Wt(!1),Y.useContext(Ku).location}function _x(t){Y.useContext(Bs).static||Y.useLayoutEffect(t)}function rb(){let{isDataRoute:t}=Y.useContext(Ls);return t?mb():ib()}function ib(){Al()||Wt(!1);let t=Y.useContext(V0),{basename:e,future:n,navigator:i}=Y.useContext(Bs),{matches:o}=Y.useContext(Ls),{pathname:l}=Sl(),f=JSON.stringify(xx(o,n.v7_relativeSplatPath)),p=Y.useRef(!1);return _x(()=>{p.current=!0}),Y.useCallback(function(m,E){if(E===void 0&&(E={}),!p.current)return;if(typeof m=="number"){i.go(m);return}let v=yx(m,JSON.parse(f),l,E.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Vi([e,v.pathname])),(E.replace?i.replace:i.push)(v,E.state,E)},[e,i,f,l,t])}function Ex(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=Y.useContext(Bs),{matches:o}=Y.useContext(Ls),{pathname:l}=Sl(),f=JSON.stringify(xx(o,i.v7_relativeSplatPath));return Y.useMemo(()=>yx(t,JSON.parse(f),l,n==="path"),[t,f,l,n])}function sb(t,e){return ob(t,e)}function ob(t,e,n,i){Al()||Wt(!1);let{navigator:o}=Y.useContext(Bs),{matches:l}=Y.useContext(Ls),f=l[l.length-1],p=f?f.params:{};f&&f.pathname;let w=f?f.pathnameBase:"/";f&&f.route;let m=Sl(),E;if(e){var v;let K=typeof e=="string"?Yo(e):e;w==="/"||(v=K.pathname)!=null&&v.startsWith(w)||Wt(!1),E=K}else E=m;let S=E.pathname||"/",R=S;if(w!=="/"){let K=w.replace(/^\//,"").split("/");R="/"+S.replace(/^\//,"").split("/").slice(K.length).join("/")}let M=O3(t,{pathname:R}),B=db(M&&M.map(K=>Object.assign({},K,{params:Object.assign({},p,K.params),pathname:Vi([w,o.encodeLocation?o.encodeLocation(K.pathname).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?w:Vi([w,o.encodeLocation?o.encodeLocation(K.pathnameBase).pathname:K.pathnameBase])})),l,n,i);return e&&B?Y.createElement(Ku.Provider,{value:{location:ll({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:Ri.Pop}},B):B}function ab(){let t=pb(),e=J3(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),n?Y.createElement("pre",{style:o},n):null,null)}const lb=Y.createElement(ab,null);class cb extends Y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?Y.createElement(Ls.Provider,{value:this.props.routeContext},Y.createElement(Cx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ub(t){let{routeContext:e,match:n,children:i}=t,o=Y.useContext(V0);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),Y.createElement(Ls.Provider,{value:e},i)}function db(t,e,n,i){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var l;if(!n)return null;if(n.errors)t=n.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let f=t,p=(o=n)==null?void 0:o.errors;if(p!=null){let E=f.findIndex(v=>v.route.id&&(p==null?void 0:p[v.route.id])!==void 0);E>=0||Wt(!1),f=f.slice(0,Math.min(f.length,E+1))}let w=!1,m=-1;if(n&&i&&i.v7_partialHydration)for(let E=0;E<f.length;E++){let v=f[E];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=E),v.route.id){let{loaderData:S,errors:R}=n,M=v.route.loader&&S[v.route.id]===void 0&&(!R||R[v.route.id]===void 0);if(v.route.lazy||M){w=!0,m>=0?f=f.slice(0,m+1):f=[f[0]];break}}}return f.reduceRight((E,v,S)=>{let R,M=!1,B=null,K=null;n&&(R=p&&v.route.id?p[v.route.id]:void 0,B=v.route.errorElement||lb,w&&(m<0&&S===0?(wb("route-fallback"),M=!0,K=null):m===S&&(M=!0,K=v.route.hydrateFallbackElement||null)));let O=e.concat(f.slice(0,S+1)),k=()=>{let N;return R?N=B:M?N=K:v.route.Component?N=Y.createElement(v.route.Component,null):v.route.element?N=v.route.element:N=E,Y.createElement(ub,{match:v,routeContext:{outlet:E,matches:O,isDataRoute:n!=null},children:N})};return n&&(v.route.ErrorBoundary||v.route.errorElement||S===0)?Y.createElement(cb,{location:n.location,revalidation:n.revalidation,component:B,error:R,children:k(),routeContext:{outlet:null,matches:O,isDataRoute:!0}}):k()},null)}var bx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(bx||{}),Ax=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ax||{});function fb(t){let e=Y.useContext(V0);return e||Wt(!1),e}function hb(t){let e=Y.useContext(tb);return e||Wt(!1),e}function gb(t){let e=Y.useContext(Ls);return e||Wt(!1),e}function Sx(t){let e=gb(),n=e.matches[e.matches.length-1];return n.route.id||Wt(!1),n.route.id}function pb(){var t;let e=Y.useContext(Cx),n=hb(),i=Sx();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function mb(){let{router:t}=fb(bx.UseNavigateStable),e=Sx(Ax.UseNavigateStable),n=Y.useRef(!1);return _x(()=>{n.current=!0}),Y.useCallback(function(o,l){l===void 0&&(l={}),n.current&&(typeof o=="number"?t.navigate(o):t.navigate(o,ll({fromRouteId:e},l)))},[t,e])}const Sp={};function wb(t,e,n){Sp[t]||(Sp[t]=!0)}function xb(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Nc(t){Wt(!1)}function yb(t){let{basename:e="/",children:n=null,location:i,navigationType:o=Ri.Pop,navigator:l,static:f=!1,future:p}=t;Al()&&Wt(!1);let w=e.replace(/^\/*/,"/"),m=Y.useMemo(()=>({basename:w,navigator:l,static:f,future:ll({v7_relativeSplatPath:!1},p)}),[w,p,l,f]);typeof i=="string"&&(i=Yo(i));let{pathname:E="/",search:v="",hash:S="",state:R=null,key:M="default"}=i,B=Y.useMemo(()=>{let K=W0(E,w);return K==null?null:{location:{pathname:K,search:v,hash:S,state:R,key:M},navigationType:o}},[w,E,v,S,R,M,o]);return B==null?null:Y.createElement(Bs.Provider,{value:m},Y.createElement(Ku.Provider,{children:n,value:B}))}function vb(t){let{children:e,location:n}=t;return sb(yh(e),n)}new Promise(()=>{});function yh(t,e){e===void 0&&(e=[]);let n=[];return Y.Children.forEach(t,(i,o)=>{if(!Y.isValidElement(i))return;let l=[...e,o];if(i.type===Y.Fragment){n.push.apply(n,yh(i.props.children,l));return}i.type!==Nc&&Wt(!1),!i.props.index||!i.props.children||Wt(!1);let f={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=yh(i.props.children,l)),n.push(f)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vh(){return vh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},vh.apply(this,arguments)}function Cb(t,e){if(t==null)return{};var n={},i=Object.keys(t),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function _b(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Eb(t,e){return t.button===0&&(!e||e==="_self")&&!_b(t)}const bb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ab="6";try{window.__reactRouterVersion=Ab}catch{}const Sb="startTransition",Ip=w_[Sb];function Ib(t){let{basename:e,children:n,future:i,window:o}=t,l=Y.useRef();l.current==null&&(l.current=N3({window:o,v5Compat:!0}));let f=l.current,[p,w]=Y.useState({action:f.action,location:f.location}),{v7_startTransition:m}=i||{},E=Y.useCallback(v=>{m&&Ip?Ip(()=>w(v)):w(v)},[w,m]);return Y.useLayoutEffect(()=>f.listen(E),[f,E]),Y.useEffect(()=>xb(i),[i]),Y.createElement(yb,{basename:e,children:n,location:p.location,navigationType:p.action,navigator:f,future:i})}const Tb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Nb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tp=Y.forwardRef(function(e,n){let{onClick:i,relative:o,reloadDocument:l,replace:f,state:p,target:w,to:m,preventScrollReset:E,viewTransition:v}=e,S=Cb(e,bb),{basename:R}=Y.useContext(Bs),M,B=!1;if(typeof m=="string"&&Nb.test(m)&&(M=m,Tb))try{let N=new URL(window.location.href),j=m.startsWith("//")?new URL(N.protocol+m):new URL(m),te=W0(j.pathname,R);j.origin===N.origin&&te!=null?m=te+j.search+j.hash:B=!0}catch{}let K=nb(m,{relative:o}),O=kb(m,{replace:f,state:p,target:w,preventScrollReset:E,relative:o,viewTransition:v});function k(N){i&&i(N),N.defaultPrevented||O(N)}return Y.createElement("a",vh({},S,{href:M||K,onClick:B||l?i:k,ref:n,target:w}))});var Np;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Np||(Np={}));var kp;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(kp||(kp={}));function kb(t,e){let{target:n,replace:i,state:o,preventScrollReset:l,relative:f,viewTransition:p}=e===void 0?{}:e,w=rb(),m=Sl(),E=Ex(t,{relative:f});return Y.useCallback(v=>{if(Eb(v,n)){v.preventDefault();let S=i!==void 0?i:tu(m)===tu(E);w(t,{replace:S,state:o,preventScrollReset:l,relative:f,viewTransition:p})}},[m,w,E,i,o,n,t,l,f,p])}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Gn=(t,e)=>{const n=Y.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:f,className:p="",children:w,...m},E)=>Y.createElement("svg",{ref:E,...Rb,width:o,height:o,stroke:i,strokeWidth:f?Number(l)*24/Number(o):l,className:["lucide",`lucide-${Ob(t)}`,p].join(" "),...m},[...e.map(([v,S])=>Y.createElement(v,S)),...Array.isArray(w)?w:[w]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=Gn("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=Gn("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=Gn("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=Gn("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=Gn("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=Gn("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=Gn("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=Gn("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=Gn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=Gn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=Gn("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=Gn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bb=Gn("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lb=Gn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Op={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie=function(t,e){if(!t)throw $o(e)},$o=function(t){return new Error("Firebase Database ("+Nx.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Fb=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const o=t[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=t[n++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=t[n++],f=t[n++],p=t[n++],w=((o&7)<<18|(l&63)<<12|(f&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(w>>10)),e[i++]=String.fromCharCode(56320+(w&1023))}else{const l=t[n++],f=t[n++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|f&63)}}return e.join("")},G0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<t.length;o+=3){const l=t[o],f=o+1<t.length,p=f?t[o+1]:0,w=o+2<t.length,m=w?t[o+2]:0,E=l>>2,v=(l&3)<<4|p>>4;let S=(p&15)<<2|m>>6,R=m&63;w||(R=64,f||(S=64)),i.push(n[E],n[v],n[S],n[R])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Fb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<t.length;){const l=n[t.charAt(o++)],p=o<t.length?n[t.charAt(o)]:0;++o;const m=o<t.length?n[t.charAt(o)]:64;++o;const v=o<t.length?n[t.charAt(o)]:64;if(++o,l==null||p==null||m==null||v==null)throw new jb;const S=l<<2|p>>4;if(i.push(S),m!==64){const R=p<<4&240|m>>2;if(i.push(R),v!==64){const M=m<<6&192|v;i.push(M)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class jb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Rx=function(t){const e=kx(t);return G0.encodeByteArray(e,!0)},ru=function(t){return Rx(t).replace(/\./g,"")},bh=function(t){try{return G0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(t){return Ox(void 0,t)}function Ox(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!zb(n)||(t[n]=Ox(t[n],e[n]));return t}function zb(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb=()=>Wb().__FIREBASE_DEFAULTS__,Hb=()=>{if(typeof process>"u"||typeof Op>"u")return;const t=Op.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Gb=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bh(t[1]);return e&&JSON.parse(e)},Dx=()=>{try{return Vb()||Hb()||Gb()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Xb=t=>{var e,n;return(n=(e=Dx())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Yb=t=>{const e=Xb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Px=()=>{var t;return(t=Dx())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ru(JSON.stringify(n)),ru(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Mx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kb())}function qb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Zb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Qb(){return Nx.NODE_ADMIN===!0}function Bx(){try{return typeof indexedDB=="object"}catch{return!1}}function Lx(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}function Jb(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="FirebaseError";class Fs extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=eA,Object.setPrototypeOf(this,Fs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qu.prototype.create)}}class qu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,l=this.errors[e],f=l?tA(l,i):"Error",p=`${this.serviceName}: ${f} (${o}).`;return new Fs(o,p,i)}}function tA(t,e){return t.replace(nA,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const nA=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(t){return JSON.parse(t)}function Kt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=function(t){let e={},n={},i={},o="";try{const l=t.split(".");e=cl(bh(l[0])||""),n=cl(bh(l[1])||""),o=l[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:o}},rA=function(t){const e=Fx(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},iA=function(t){const e=Fx(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Bo(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Dp(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function iu(t,e,n){const i={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(i[o]=e.call(n,t[o],o,t));return i}function su(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const l=t[o],f=e[o];if(Pp(l)&&Pp(f)){if(!su(l,f))return!1}else if(l!==f)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function Pp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let v=0;v<16;v++)i[v]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let v=0;v<16;v++)i[v]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let v=16;v<80;v++){const S=i[v-3]^i[v-8]^i[v-14]^i[v-16];i[v]=(S<<1|S>>>31)&4294967295}let o=this.chain_[0],l=this.chain_[1],f=this.chain_[2],p=this.chain_[3],w=this.chain_[4],m,E;for(let v=0;v<80;v++){v<40?v<20?(m=p^l&(f^p),E=1518500249):(m=l^f^p,E=1859775393):v<60?(m=l&f|p&(l|f),E=2400959708):(m=l^f^p,E=3395469782);const S=(o<<5|o>>>27)+m+w+E+i[v]&4294967295;w=p,p=f,f=(l<<30|l>>>2)&4294967295,l=o,o=S}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+w&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let o=0;const l=this.buf_;let f=this.inbuf_;for(;o<n;){if(f===0)for(;o<=i;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<n;)if(l[f]=e.charCodeAt(o),++f,++o,f===this.blockSize){this.compress_(l),f=0;break}}else for(;o<n;)if(l[f]=e[o],++f,++o,f===this.blockSize){this.compress_(l),f=0;break}}this.inbuf_=f,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let o=0;o<5;o++)for(let l=24;l>=0;l-=8)e[i]=this.chain_[o]>>l&255,++i;return e}}function Zu(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);if(o>=55296&&o<=56319){const l=o-55296;i++,ie(i<t.length,"Surrogate pair missing trail surrogate.");const f=t.charCodeAt(i)-56320;o=65536+(l<<10)+f}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Qu=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=1e3,cA=2,uA=4*60*60*1e3,dA=.5;function Mp(t,e=lA,n=cA){const i=e*Math.pow(n,t),o=Math.round(dA*i*(Math.random()-.5)*2);return Math.min(uA,i+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t){return t&&t._delegate?t._delegate:t}class di{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Il;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gA(e))try{this.getOrInitializeService({instanceIdentifier:hs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hs){return this.instances.has(e)}getOptions(e=hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[l,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);i===p&&f.resolve(o)}return o}onInit(e,n){var i;const o=this.normalizeInstanceIdentifier(n),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const f=this.instances.get(o);return f&&e(f,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:hA(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=hs){return this.component?this.component.multipleInstances?e:hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hA(t){return t===hs?void 0:t}function gA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ht||(ht={}));const mA={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},wA=ht.INFO,xA={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},yA=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),o=xA[e];if(o)console[o](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class X0{constructor(e){this.name=e,this._logLevel=wA,this._logHandler=yA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ht))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...e),this._logHandler(this,ht.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...e),this._logHandler(this,ht.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ht.INFO,...e),this._logHandler(this,ht.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ht.WARN,...e),this._logHandler(this,ht.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...e),this._logHandler(this,ht.ERROR,...e)}}const vA=(t,e)=>e.some(n=>t instanceof n);let Bp,Lp;function CA(){return Bp||(Bp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _A(){return Lp||(Lp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jx=new WeakMap,Ah=new WeakMap,Ux=new WeakMap,lf=new WeakMap,Y0=new WeakMap;function EA(t){const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("success",l),t.removeEventListener("error",f)},l=()=>{n(Hi(t.result)),o()},f=()=>{i(t.error),o()};t.addEventListener("success",l),t.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&jx.set(n,t)}).catch(()=>{}),Y0.set(e,t),e}function bA(t){if(Ah.has(t))return;const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",f),t.removeEventListener("abort",f)},l=()=>{n(),o()},f=()=>{i(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",l),t.addEventListener("error",f),t.addEventListener("abort",f)});Ah.set(t,e)}let Sh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ah.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ux.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function AA(t){Sh=t(Sh)}function SA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(cf(this),e,...n);return Ux.set(i,e.sort?e.sort():[e]),Hi(i)}:_A().includes(t)?function(...e){return t.apply(cf(this),e),Hi(jx.get(this))}:function(...e){return Hi(t.apply(cf(this),e))}}function IA(t){return typeof t=="function"?SA(t):(t instanceof IDBTransaction&&bA(t),vA(t,CA())?new Proxy(t,Sh):t)}function Hi(t){if(t instanceof IDBRequest)return EA(t);if(lf.has(t))return lf.get(t);const e=IA(t);return e!==t&&(lf.set(t,e),Y0.set(e,t)),e}const cf=t=>Y0.get(t);function zx(t,e,{blocked:n,upgrade:i,blocking:o,terminated:l}={}){const f=indexedDB.open(t,e),p=Hi(f);return i&&f.addEventListener("upgradeneeded",w=>{i(Hi(f.result),w.oldVersion,w.newVersion,Hi(f.transaction),w)}),n&&f.addEventListener("blocked",w=>n(w.oldVersion,w.newVersion,w)),p.then(w=>{l&&w.addEventListener("close",()=>l()),o&&w.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),p}const TA=["get","getKey","getAll","getAllKeys","count"],NA=["put","add","delete","clear"],uf=new Map;function Fp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(uf.get(e))return uf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=NA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||TA.includes(n)))return;const l=async function(f,...p){const w=this.transaction(f,o?"readwrite":"readonly");let m=w.store;return i&&(m=m.index(p.shift())),(await Promise.all([m[n](...p),o&&w.done]))[0]};return uf.set(e,l),l}AA(t=>({...t,get:(e,n,i)=>Fp(e,n)||t.get(e,n,i),has:(e,n)=>!!Fp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(RA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function RA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ih="@firebase/app",jp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=new X0("@firebase/app"),OA="@firebase/app-compat",DA="@firebase/analytics-compat",PA="@firebase/analytics",MA="@firebase/app-check-compat",BA="@firebase/app-check",LA="@firebase/auth",FA="@firebase/auth-compat",jA="@firebase/database",UA="@firebase/data-connect",zA="@firebase/database-compat",WA="@firebase/functions",VA="@firebase/functions-compat",HA="@firebase/installations",GA="@firebase/installations-compat",XA="@firebase/messaging",YA="@firebase/messaging-compat",$A="@firebase/performance",KA="@firebase/performance-compat",qA="@firebase/remote-config",ZA="@firebase/remote-config-compat",QA="@firebase/storage",JA="@firebase/storage-compat",eS="@firebase/firestore",tS="@firebase/vertexai-preview",nS="@firebase/firestore-compat",rS="firebase",iS="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th="[DEFAULT]",sS={[Ih]:"fire-core",[OA]:"fire-core-compat",[PA]:"fire-analytics",[DA]:"fire-analytics-compat",[BA]:"fire-app-check",[MA]:"fire-app-check-compat",[LA]:"fire-auth",[FA]:"fire-auth-compat",[jA]:"fire-rtdb",[UA]:"fire-data-connect",[zA]:"fire-rtdb-compat",[WA]:"fire-fn",[VA]:"fire-fn-compat",[HA]:"fire-iid",[GA]:"fire-iid-compat",[XA]:"fire-fcm",[YA]:"fire-fcm-compat",[$A]:"fire-perf",[KA]:"fire-perf-compat",[qA]:"fire-rc",[ZA]:"fire-rc-compat",[QA]:"fire-gcs",[JA]:"fire-gcs-compat",[eS]:"fire-fst",[nS]:"fire-fst-compat",[tS]:"fire-vertex","fire-js":"fire-js",[rS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=new Map,oS=new Map,Nh=new Map;function Up(t,e){try{t.container.addComponent(e)}catch(n){fi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qi(t){const e=t.name;if(Nh.has(e))return fi.debug(`There were multiple attempts to register component ${e}.`),!1;Nh.set(e,t);for(const n of ou.values())Up(n,t);for(const n of oS.values())Up(n,t);return!0}function Tl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gi=new qu("app","Firebase",aS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new di("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=iS;function Wx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Th,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Gi.create("bad-app-name",{appName:String(o)});if(n||(n=Px()),!n)throw Gi.create("no-options");const l=ou.get(o);if(l){if(su(n,l.options)&&su(i,l.config))return l;throw Gi.create("duplicate-app",{appName:o})}const f=new pA(o);for(const w of Nh.values())f.addComponent(w);const p=new lS(n,i,f);return ou.set(o,p),p}function Vx(t=Th){const e=ou.get(t);if(!e&&t===Th&&Px())return Wx();if(!e)throw Gi.create("no-app",{appName:t});return e}function $r(t,e,n){var i;let o=(i=sS[t])!==null&&i!==void 0?i:t;n&&(o+=`-${n}`);const l=o.match(/\s|\//),f=e.match(/\s|\//);if(l||f){const p=[`Unable to register library "${o}" with version "${e}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&f&&p.push("and"),f&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fi.warn(p.join(" "));return}qi(new di(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="firebase-heartbeat-database",dS=1,ul="firebase-heartbeat-store";let df=null;function Hx(){return df||(df=zx(uS,dS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ul)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gi.create("idb-open",{originalErrorMessage:t.message})})),df}async function fS(t){try{const n=(await Hx()).transaction(ul),i=await n.objectStore(ul).get(Gx(t));return await n.done,i}catch(e){if(e instanceof Fs)fi.warn(e.message);else{const n=Gi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fi.warn(n.message)}}}async function zp(t,e){try{const i=(await Hx()).transaction(ul,"readwrite");await i.objectStore(ul).put(e,Gx(t)),await i.done}catch(n){if(n instanceof Fs)fi.warn(n.message);else{const i=Gi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fi.warn(i.message)}}}function Gx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=1024,gS=30*24*60*60*1e3;class pS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wS(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Wp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(f=>f.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(f=>{const p=new Date(f.date).valueOf();return Date.now()-p<=gS}),this._storage.overwrite(this._heartbeatsCache))}catch(i){fi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Wp(),{heartbeatsToSend:i,unsentEntries:o}=mS(this._heartbeatsCache.heartbeats),l=ru(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return fi.warn(n),""}}}function Wp(){return new Date().toISOString().substring(0,10)}function mS(t,e=hS){const n=[];let i=t.slice();for(const o of t){const l=n.find(f=>f.agent===o.agent);if(l){if(l.dates.push(o.date),Vp(n)>e){l.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Vp(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class wS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Bx()?Lx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return zp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return zp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Vp(t){return ru(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(t){qi(new di("platform-logger",e=>new kA(e),"PRIVATE")),qi(new di("heartbeat",e=>new pS(e),"PRIVATE")),$r(Ih,jp,t),$r(Ih,jp,"esm2017"),$r("fire-js","")}xS("");var Hp={};const Gp="@firebase/database",Xp="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xx="";function yS(t){Xx=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Kt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:cl(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return qr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new vS(e)}}catch{}return new CS},xs=Yx("localStorage"),_S=Yx("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=new X0("@firebase/database"),ES=function(){let t=1;return function(){return t++}}(),$x=function(t){const e=aA(t),n=new oA;n.update(e);const i=n.digest();return G0.encodeByteArray(i)},Nl=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Nl.apply(null,i):typeof i=="object"?e+=Kt(i):e+=i,e+=" "}return e};let Fa=null,Yp=!0;const bS=function(t,e){ie(!0,"Can't turn on custom loggers persistently."),Ao.logLevel=ht.VERBOSE,Fa=Ao.log.bind(Ao)},dn=function(...t){if(Yp===!0&&(Yp=!1,Fa===null&&_S.get("logging_enabled")===!0&&bS()),Fa){const e=Nl.apply(null,t);Fa(e)}},kl=function(t){return function(...e){dn(t,...e)}},kh=function(...t){const e="FIREBASE INTERNAL ERROR: "+Nl(...t);Ao.error(e)},hi=function(...t){const e=`FIREBASE FATAL ERROR: ${Nl(...t)}`;throw Ao.error(e),new Error(e)},In=function(...t){const e="FIREBASE WARNING: "+Nl(...t);Ao.warn(e)},AS=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&In("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},$0=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},SS=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Lo="[MIN_NAME]",Ts="[MAX_NAME]",js=function(t,e){if(t===e)return 0;if(t===Lo||e===Ts)return-1;if(e===Lo||t===Ts)return 1;{const n=$p(t),i=$p(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},IS=function(t,e){return t===e?0:t<e?-1:1},va=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Kt(e))},K0=function(t){if(typeof t!="object"||t===null)return Kt(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=Kt(e[i]),n+=":",n+=K0(t[e[i]]);return n+="}",n},Kx=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let o=0;o<n;o+=e)o+e>n?i.push(t.substring(o,n)):i.push(t.substring(o,o+e));return i};function gn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const qx=function(t){ie(!$0(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let o,l,f,p,w;t===0?(l=0,f=0,o=1/t===-1/0?1:0):(o=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(p=Math.min(Math.floor(Math.log(t)/Math.LN2),i),l=p+i,f=Math.round(t*Math.pow(2,n-p)-Math.pow(2,n))):(l=0,f=Math.round(t/Math.pow(2,1-i-n))));const m=[];for(w=n;w;w-=1)m.push(f%2?1:0),f=Math.floor(f/2);for(w=e;w;w-=1)m.push(l%2?1:0),l=Math.floor(l/2);m.push(o?1:0),m.reverse();const E=m.join("");let v="";for(w=0;w<64;w+=8){let S=parseInt(E.substr(w,8),2).toString(16);S.length===1&&(S="0"+S),v=v+S}return v.toLowerCase()},TS=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},NS=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function kS(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const RS=new RegExp("^-?(0*)\\d{1,10}$"),OS=-2147483648,DS=2147483647,$p=function(t){if(RS.test(t)){const e=Number(t);if(e>=OS&&e<=DS)return e}return null},Ko=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw In("Exception was thrown by user callback.",n),e},Math.floor(0))}},PS=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ja=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){In(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(dn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',In(e)}}class kc{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}kc.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="5",Zx="v",Qx="s",Jx="r",ey="f",ty=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ny="ls",ry="p",Rh="ac",iy="websocket",sy="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,n,i,o,l=!1,f="",p=!1,w=!1){this.secure=n,this.namespace=i,this.webSocketOnly=o,this.nodeAdmin=l,this.persistenceKey=f,this.includeNamespaceInQueryParams=p,this.isUsingEmulator=w,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=xs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&xs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function LS(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function ay(t,e,n){ie(typeof e=="string","typeof type must == string"),ie(typeof n=="object","typeof params must == object");let i;if(e===iy)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===sy)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);LS(t)&&(n.ns=t.namespace);const o=[];return gn(n,(l,f)=>{o.push(l+"="+f)}),i+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(){this.counters_={}}incrementCounter(e,n=1){qr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Ub(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff={},hf={};function Z0(t){const e=t.toString();return ff[e]||(ff[e]=new FS),ff[e]}function jS(t,e){const n=t.toString();return hf[n]||(hf[n]=e()),hf[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<i.length;++o)i[o]&&Ko(()=>{this.onMessage_(i[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="start",zS="close",WS="pLPCommand",VS="pRTLPCB",ly="id",cy="pw",uy="ser",HS="cb",GS="seg",XS="ts",YS="d",$S="dframe",dy=1870,fy=30,KS=dy-fy,qS=25e3,ZS=3e4;class mo{constructor(e,n,i,o,l,f,p){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.transportSessionId=f,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=kl(e),this.stats_=Z0(n),this.urlFn=w=>(this.appCheckToken&&(w[Rh]=this.appCheckToken),ay(n,sy,w))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new US(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(ZS)),SS(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Q0((...l)=>{const[f,p,w,m,E]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,f===Kp)this.id=p,this.password=w;else if(f===zS)p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+f)},(...l)=>{const[f,p]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(f,p)},()=>{this.onClosed_()},this.urlFn);const i={};i[Kp]="t",i[uy]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[HS]=this.scriptTagHolder.uniqueCallbackIdentifier),i[Zx]=q0,this.transportSessionId&&(i[Qx]=this.transportSessionId),this.lastSessionId&&(i[ny]=this.lastSessionId),this.applicationId&&(i[ry]=this.applicationId),this.appCheckToken&&(i[Rh]=this.appCheckToken),typeof location<"u"&&location.hostname&&ty.test(location.hostname)&&(i[Jx]=ey);const o=this.urlFn(i);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){mo.forceAllow_=!0}static forceDisallow(){mo.forceDisallow_=!0}static isAvailable(){return mo.forceAllow_?!0:!mo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!TS()&&!NS()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Kt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Rx(n),o=Kx(i,KS);for(let l=0;l<o.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[l]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[$S]="t",i[ly]=e,i[cy]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Kt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Q0{constructor(e,n,i,o){this.onDisconnect=i,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=ES(),window[WS+this.uniqueCallbackIdentifier]=e,window[VS+this.uniqueCallbackIdentifier]=n,this.myIFrame=Q0.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const f="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(f),this.myIFrame.doc.close()}catch(p){dn("frame writing exception"),p.stack&&dn(p.stack),dn(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||dn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[ly]=this.myID,e[cy]=this.myPW,e[uy]=this.currentSerial;let n=this.urlFn(e),i="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+fy+i.length<=dy;){const f=this.pendingSegs.shift();i=i+"&"+GS+o+"="+f.seg+"&"+XS+o+"="+f.ts+"&"+YS+o+"="+f.d,o++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},o=setTimeout(i,Math.floor(qS)),l=()=>{clearTimeout(o),i()};this.addTag(e,l)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const o=i.readyState;(!o||o==="loaded"||o==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{dn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=16384,JS=45e3;let au=null;typeof MozWebSocket<"u"?au=MozWebSocket:typeof WebSocket<"u"&&(au=WebSocket);class Tr{constructor(e,n,i,o,l,f,p){this.connId=e,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=kl(this.connId),this.stats_=Z0(n),this.connURL=Tr.connectionURL_(n,f,p,o,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,o,l){const f={};return f[Zx]=q0,typeof location<"u"&&location.hostname&&ty.test(location.hostname)&&(f[Jx]=ey),n&&(f[Qx]=n),i&&(f[ny]=i),o&&(f[Rh]=o),l&&(f[ry]=l),ay(e,iy,f)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,xs.set("previous_websocket_failure",!0);try{let i;Qb(),this.mySock=new au(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){Tr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&au!==null&&!Tr.forceDisallow_}static previouslyFailed(){return xs.isInMemoryStorage||xs.get("previous_websocket_failure")===!0}markConnectionHealthy(){xs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=cl(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ie(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=Kt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Kx(n,QS);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(JS))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Tr.responsesRequiredToBeHealthy=2;Tr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[mo,Tr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Tr&&Tr.isAvailable();let i=n&&!Tr.previouslyFailed();if(e.webSocketOnly&&(n||In("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Tr];else{const o=this.transports_=[];for(const l of dl.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l);dl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}dl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=6e4,tI=5e3,nI=10*1024,rI=100*1024,gf="t",qp="d",iI="s",Zp="r",sI="e",Qp="o",Jp="a",em="n",tm="p",oI="h";class aI{constructor(e,n,i,o,l,f,p,w,m,E){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=o,this.authToken_=l,this.onMessage_=f,this.onReady_=p,this.onDisconnect_=w,this.onKill_=m,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=kl("c:"+this.id+":"),this.transportManager_=new dl(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=ja(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>rI?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>nI?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(gf in e){const n=e[gf];n===Jp?this.upgradeIfSecondaryHealthy_():n===Zp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Qp&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=va("t",e),i=va("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:tm,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Jp,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:em,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=va("t",e),i=va("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=va(gf,e);if(qp in e){const i=e[qp];if(n===oI){const o=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(n===em){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===iI?this.onConnectionShutdown_(i):n===Zp?this.onReset_(i):n===sI?kh("Server Error: "+i):n===Qp?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):kh("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),q0!==i&&In("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),ja(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(eI))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ja(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(tI))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:tm,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(xs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{put(e,n,i,o){}merge(e,n,i,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gy=class{constructor(e){this.allowedEvents_=e,this.listeners_={},ie(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let o=0;o<i.length;o++)i[o].callback.apply(i[o].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const o=this.getInitialEvent(e);o&&n.apply(i,o)}off(e,n,i){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let l=0;l<o.length;l++)if(o[l].callback===n&&(!i||i===o[l].context)){o.splice(l,1);return}}validateEventType_(e){ie(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu extends gy{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Mx()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new lu}getInitialEvent(e){return ie(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm=32,rm=768;class ot{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[i]=this.pieces_[o],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ye(){return new ot("")}function Fe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Zi(t){return t.pieces_.length-t.pieceNum_}function gt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ot(t.pieces_,e)}function J0(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function lI(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function fl(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function py(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ot(e,0)}function Dt(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof ot)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let o=0;o<i.length;o++)i[o].length>0&&n.push(i[o])}return new ot(n,0)}function Me(t){return t.pieceNum_>=t.pieces_.length}function An(t,e){const n=Fe(t),i=Fe(e);if(n===null)return e;if(n===i)return An(gt(t),gt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function cI(t,e){const n=fl(t,0),i=fl(e,0);for(let o=0;o<n.length&&o<i.length;o++){const l=js(n[o],i[o]);if(l!==0)return l}return n.length===i.length?0:n.length<i.length?-1:1}function my(t,e){if(Zi(t)!==Zi(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function gr(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(Zi(t)>Zi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class uI{constructor(e,n){this.errorPrefix_=n,this.parts_=fl(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Qu(this.parts_[i]);wy(this)}}function dI(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Qu(e),wy(t)}function fI(t){const e=t.parts_.pop();t.byteLength_-=Qu(e),t.parts_.length>0&&(t.byteLength_-=1)}function wy(t){if(t.byteLength_>rm)throw new Error(t.errorPrefix_+"has a key path longer than "+rm+" bytes ("+t.byteLength_+").");if(t.parts_.length>nm)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+nm+") or object contains a cycle "+gs(t))}function gs(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1 extends gy{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new e1}getInitialEvent(e){return ie(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=1e3,hI=60*5*1e3,im=30*1e3,gI=1.3,pI=3e4,mI="server_kill",sm=3;class si extends hy{constructor(e,n,i,o,l,f,p,w){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=p,this.authOverride_=w,this.id=si.nextPersistentConnectionId_++,this.log_=kl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ca,this.maxReconnectDelay_=hI,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");e1.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&lu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const o=++this.requestNumber_,l={r:o,a:e,b:n};this.log_(Kt(l)),ie(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[o]=i)}get(e){this.initConnection_();const n=new Il,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:f=>{const p=f.d;f.s==="ok"?n.resolve(p):n.reject(p)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),n.promise}listen(e,n,i,o){this.initConnection_();const l=e._queryIdentifier,f=e._path.toString();this.log_("Listen called for "+f+" "+l),this.listens.has(f)||this.listens.set(f,new Map),ie(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ie(!this.listens.get(f).has(l),"listen() called twice for same path/queryId.");const p={onComplete:o,hashFn:n,query:e,tag:i};this.listens.get(f).set(l,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+i+" for "+o);const l={p:i},f="q";e.tag&&(l.q=n._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest(f,l,p=>{const w=p.d,m=p.s;si.warnOnListenWarnings_(w,n),(this.listens.get(i)&&this.listens.get(i).get(o))===e&&(this.log_("listen response",p),m!=="ok"&&this.removeListen_(i,o),e.onComplete&&e.onComplete(m,w))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&qr(e,"w")){const i=Bo(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',l=n._path.toString();In(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||iA(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=im)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=rA(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,o=>{const l=o.s,f=o.d||"error";this.authToken_===e&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),ie(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,e._queryObject,n)}sendUnlisten_(e,n,i,o){this.log_("Unlisten on "+e+" for "+n);const l={p:e},f="n";o&&(l.q=i,l.t=o),this.sendRequest(f,l)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,o){const l={p:n,d:i};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,f=>{o&&setTimeout(()=>{o(f.s,f.d)},Math.floor(0))})}put(e,n,i,o){this.putInternal("p",e,n,i,o)}merge(e,n,i,o){this.putInternal("m",e,n,i,o)}putInternal(e,n,i,o,l){this.initConnection_();const f={p:n,d:i};l!==void 0&&(f.h=l),this.outstandingPuts_.push({action:e,request:f,onComplete:o}),this.outstandingPutCount_++;const p=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(p):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,l=>{this.log_(n+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const l=i.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Kt(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):kh("Unrecognized action received from server: "+Kt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ie(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ca,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ca,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>pI&&(this.reconnectDelay_=Ca),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*gI)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+si.nextConnectionId_++,l=this.lastSessionId;let f=!1,p=null;const w=function(){p?p.close():(f=!0,i())},m=function(v){ie(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(v)};this.realtime_={close:w,sendRequest:m};const E=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,S]=await Promise.all([this.authTokenProvider_.getToken(E),this.appCheckTokenProvider_.getToken(E)]);f?dn("getToken() completed but was canceled"):(dn("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=S&&S.token,p=new aI(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,R=>{In(R+" ("+this.repoInfo_.toString()+")"),this.interrupt(mI)},l))}catch(v){this.log_("Failed to get token: "+v),f||(this.repoInfo_.nodeAdmin&&In(v),w())}}}interrupt(e){dn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){dn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Dp(this.interruptReasons_)&&(this.reconnectDelay_=Ca,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(l=>K0(l)).join("$"):i="default";const o=this.removeListen_(e,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,n){const i=new ot(e).toString();let o;if(this.listens.has(i)){const l=this.listens.get(i);o=l.get(n),l.delete(n),l.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(e,n){dn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=sm&&(this.reconnectDelay_=im,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){dn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=sm&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Xx.replace(/\./g,"-")]=1,Mx()?e["framework.cordova"]=1:Zb()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=lu.getInstance().currentlyOnline();return Dp(this.interruptReasons_)&&e}}si.nextPersistentConnectionId_=0;si.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Pe(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new Pe(Lo,e),o=new Pe(Lo,n);return this.compare(i,o)!==0}minPost(){return Pe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gc;class xy extends Ju{static get __EMPTY_NODE(){return gc}static set __EMPTY_NODE(e){gc=e}compare(e,n){return js(e.name,n.name)}isDefinedOn(e){throw $o("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Pe.MIN}maxPost(){return new Pe(Ts,gc)}makePost(e,n){return ie(typeof e=="string","KeyIndex indexValue must always be a string."),new Pe(e,gc)}toString(){return".key"}}const So=new xy;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n,i,o,l=null){this.isReverse_=o,this.resultGenerator_=l,this.nodeStack_=[];let f=1;for(;!e.isEmpty();)if(e=e,f=n?i(e.key,n):1,o&&(f*=-1),f<0)this.isReverse_?e=e.left:e=e.right;else if(f===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class nn{constructor(e,n,i,o,l){this.key=e,this.value=n,this.color=i??nn.RED,this.left=o??jn.EMPTY_NODE,this.right=l??jn.EMPTY_NODE}copy(e,n,i,o,l){return new nn(e??this.key,n??this.value,i??this.color,o??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const l=i(e,o.key);return l<0?o=o.copy(null,null,null,o.left.insert(e,n,i),null):l===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return jn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,o;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return jn.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}nn.RED=!0;nn.BLACK=!1;class wI{copy(e,n,i,o,l){return this}insert(e,n,i){return new nn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class jn{constructor(e,n=jn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new jn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,nn.BLACK,null,null))}remove(e){return new jn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,nn.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,o=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return o?o.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(o=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new pc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new pc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new pc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new pc(this.root_,null,this.comparator_,!0,e)}}jn.EMPTY_NODE=new wI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(t,e){return js(t.name,e.name)}function t1(t,e){return js(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oh;function yI(t){Oh=t}const yy=function(t){return typeof t=="number"?"number:"+qx(t):"string:"+t},vy=function(t){if(t.isLeafNode()){const e=t.val();ie(typeof e=="string"||typeof e=="number"||typeof e=="object"&&qr(e,".sv"),"Priority must be a string or number.")}else ie(t===Oh||t.isEmpty(),"priority of unexpected type.");ie(t===Oh||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let om;class en{constructor(e,n=en.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ie(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),vy(this.priorityNode_)}static set __childrenNodeConstructor(e){om=e}static get __childrenNodeConstructor(){return om}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new en(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:en.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Me(e)?this:Fe(e)===".priority"?this.priorityNode_:en.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:en.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=Fe(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(ie(i!==".priority"||Zi(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,en.__childrenNodeConstructor.EMPTY_NODE.updateChild(gt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+yy(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=qx(this.value_):e+=this.value_,this.lazyHash_=$x(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===en.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof en.__childrenNodeConstructor?-1:(ie(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,o=en.VALUE_TYPE_ORDER.indexOf(n),l=en.VALUE_TYPE_ORDER.indexOf(i);return ie(o>=0,"Unknown leaf type: "+n),ie(l>=0,"Unknown leaf type: "+i),o===l?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}en.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cy,_y;function vI(t){Cy=t}function CI(t){_y=t}class _I extends Ju{compare(e,n){const i=e.node.getPriority(),o=n.node.getPriority(),l=i.compareTo(o);return l===0?js(e.name,n.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Pe.MIN}maxPost(){return new Pe(Ts,new en("[PRIORITY-POST]",_y))}makePost(e,n){const i=Cy(e);return new Pe(n,new en("[PRIORITY-POST]",i))}toString(){return".priority"}}const Pt=new _I;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=Math.log(2);class bI{constructor(e){const n=l=>parseInt(Math.log(l)/EI,10),i=l=>parseInt(Array(l+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const o=i(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const cu=function(t,e,n,i){t.sort(e);const o=function(w,m){const E=m-w;let v,S;if(E===0)return null;if(E===1)return v=t[w],S=n?n(v):v,new nn(S,v.node,nn.BLACK,null,null);{const R=parseInt(E/2,10)+w,M=o(w,R),B=o(R+1,m);return v=t[R],S=n?n(v):v,new nn(S,v.node,nn.BLACK,M,B)}},l=function(w){let m=null,E=null,v=t.length;const S=function(M,B){const K=v-M,O=v;v-=M;const k=o(K+1,O),N=t[K],j=n?n(N):N;R(new nn(j,N.node,B,null,k))},R=function(M){m?(m.left=M,m=M):(E=M,m=M)};for(let M=0;M<w.count;++M){const B=w.nextBitIsOne(),K=Math.pow(2,w.count-(M+1));B?S(K,nn.BLACK):(S(K,nn.BLACK),S(K,nn.RED))}return E},f=new bI(t.length),p=l(f);return new jn(i||e,p)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pf;const to={};class ri{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return ie(to&&Pt,"ChildrenNode.ts has not been loaded"),pf=pf||new ri({".priority":to},{".priority":Pt}),pf}get(e){const n=Bo(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof jn?n:null}hasIndex(e){return qr(this.indexSet_,e.toString())}addIndex(e,n){ie(e!==So,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let o=!1;const l=n.getIterator(Pe.Wrap);let f=l.getNext();for(;f;)o=o||e.isDefinedOn(f.node),i.push(f),f=l.getNext();let p;o?p=cu(i,e.getCompare()):p=to;const w=e.toString(),m=Object.assign({},this.indexSet_);m[w]=e;const E=Object.assign({},this.indexes_);return E[w]=p,new ri(E,m)}addToIndexes(e,n){const i=iu(this.indexes_,(o,l)=>{const f=Bo(this.indexSet_,l);if(ie(f,"Missing index implementation for "+l),o===to)if(f.isDefinedOn(e.node)){const p=[],w=n.getIterator(Pe.Wrap);let m=w.getNext();for(;m;)m.name!==e.name&&p.push(m),m=w.getNext();return p.push(e),cu(p,f.getCompare())}else return to;else{const p=n.get(e.name);let w=o;return p&&(w=w.remove(new Pe(e.name,p))),w.insert(e,e.node)}});return new ri(i,this.indexSet_)}removeFromIndexes(e,n){const i=iu(this.indexes_,o=>{if(o===to)return o;{const l=n.get(e.name);return l?o.remove(new Pe(e.name,l)):o}});return new ri(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _a;class Ae{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&vy(this.priorityNode_),this.children_.isEmpty()&&ie(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return _a||(_a=new Ae(new jn(t1),null,ri.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_a}updatePriority(e){return this.children_.isEmpty()?this:new Ae(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?_a:n}}getChild(e){const n=Fe(e);return n===null?this:this.getImmediateChild(n).getChild(gt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ie(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new Pe(e,n);let o,l;n.isEmpty()?(o=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(e,n),l=this.indexMap_.addToIndexes(i,this.children_));const f=o.isEmpty()?_a:this.priorityNode_;return new Ae(o,f,l)}}updateChild(e,n){const i=Fe(e);if(i===null)return n;{ie(Fe(e)!==".priority"||Zi(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(gt(e),n);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,o=0,l=!0;if(this.forEachChild(Pt,(f,p)=>{n[f]=p.val(e),i++,l&&Ae.INTEGER_REGEXP_.test(f)?o=Math.max(o,Number(f)):l=!1}),!e&&l&&o<2*i){const f=[];for(const p in n)f[p]=n[p];return f}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+yy(this.getPriority().val())+":"),this.forEachChild(Pt,(n,i)=>{const o=i.hash();o!==""&&(e+=":"+n+":"+o)}),this.lazyHash_=e===""?"":$x(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const o=this.resolveIndex_(i);if(o){const l=o.getPredecessorKey(new Pe(e,n));return l?l.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Pe(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Pe(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,Pe.Wrap);let l=o.peek();for(;l!=null&&n.compare(l,e)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,Pe.Wrap);let l=o.peek();for(;l!=null&&n.compare(l,e)>0;)o.getNext(),l=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Rl?-1:0}withIndex(e){if(e===So||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Ae(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===So||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(Pt),o=n.getIterator(Pt);let l=i.getNext(),f=o.getNext();for(;l&&f;){if(l.name!==f.name||!l.node.equals(f.node))return!1;l=i.getNext(),f=o.getNext()}return l===null&&f===null}else return!1;else return!1}}resolveIndex_(e){return e===So?null:this.indexMap_.get(e.toString())}}Ae.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class AI extends Ae{constructor(){super(new jn(t1),Ae.EMPTY_NODE,ri.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ae.EMPTY_NODE}isEmpty(){return!1}}const Rl=new AI;Object.defineProperties(Pe,{MIN:{value:new Pe(Lo,Ae.EMPTY_NODE)},MAX:{value:new Pe(Ts,Rl)}});xy.__EMPTY_NODE=Ae.EMPTY_NODE;en.__childrenNodeConstructor=Ae;yI(Rl);CI(Rl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI=!0;function $t(t,e=null){if(t===null)return Ae.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ie(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new en(n,$t(e))}if(!(t instanceof Array)&&SI){const n=[];let i=!1;if(gn(t,(f,p)=>{if(f.substring(0,1)!=="."){const w=$t(p);w.isEmpty()||(i=i||!w.getPriority().isEmpty(),n.push(new Pe(f,w)))}}),n.length===0)return Ae.EMPTY_NODE;const l=cu(n,xI,f=>f.name,t1);if(i){const f=cu(n,Pt.getCompare());return new Ae(l,$t(e),new ri({".priority":f},{".priority":Pt}))}else return new Ae(l,$t(e),ri.Default)}else{let n=Ae.EMPTY_NODE;return gn(t,(i,o)=>{if(qr(t,i)&&i.substring(0,1)!=="."){const l=$t(o);(l.isLeafNode()||!l.isEmpty())&&(n=n.updateImmediateChild(i,l))}}),n.updatePriority($t(e))}}vI($t);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II extends Ju{constructor(e){super(),this.indexPath_=e,ie(!Me(e)&&Fe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),o=this.extractChild(n.node),l=i.compareTo(o);return l===0?js(e.name,n.name):l}makePost(e,n){const i=$t(e),o=Ae.EMPTY_NODE.updateChild(this.indexPath_,i);return new Pe(n,o)}maxPost(){const e=Ae.EMPTY_NODE.updateChild(this.indexPath_,Rl);return new Pe(Ts,e)}toString(){return fl(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI extends Ju{compare(e,n){const i=e.node.compareTo(n.node);return i===0?js(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Pe.MIN}maxPost(){return Pe.MAX}makePost(e,n){const i=$t(e);return new Pe(n,i)}toString(){return".value"}}const NI=new TI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(t){return{type:"value",snapshotNode:t}}function Fo(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function hl(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function gl(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function kI(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.index_=e}updateChild(e,n,i,o,l,f){ie(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(n);return p.getChild(o).equals(i.getChild(o))&&p.isEmpty()===i.isEmpty()||(f!=null&&(i.isEmpty()?e.hasChild(n)?f.trackChildChange(hl(n,p)):ie(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?f.trackChildChange(Fo(n,i)):f.trackChildChange(gl(n,i,p))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Pt,(o,l)=>{n.hasChild(o)||i.trackChildChange(hl(o,l))}),n.isLeafNode()||n.forEachChild(Pt,(o,l)=>{if(e.hasChild(o)){const f=e.getImmediateChild(o);f.equals(l)||i.trackChildChange(gl(o,l,f))}else i.trackChildChange(Fo(o,l))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Ae.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e){this.indexedFilter_=new n1(e.getIndex()),this.index_=e.getIndex(),this.startPost_=pl.getStartPost_(e),this.endPost_=pl.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,o,l,f){return this.matches(new Pe(n,i))||(i=Ae.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,o,l,f)}updateFullNode(e,n,i){n.isLeafNode()&&(n=Ae.EMPTY_NODE);let o=n.withIndex(this.index_);o=o.updatePriority(Ae.EMPTY_NODE);const l=this;return n.forEachChild(Pt,(f,p)=>{l.matches(new Pe(f,p))||(o=o.updateImmediateChild(f,Ae.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new pl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,o,l,f){return this.rangedFilter_.matches(new Pe(n,i))||(i=Ae.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,o,l,f):this.fullLimitUpdateChild_(e,n,i,l,f)}updateFullNode(e,n,i){let o;if(n.isLeafNode()||n.isEmpty())o=Ae.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){o=Ae.EMPTY_NODE.withIndex(this.index_);let l;this.reverse_?l=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let f=0;for(;l.hasNext()&&f<this.limit_;){const p=l.getNext();if(this.withinDirectionalStart(p))if(this.withinDirectionalEnd(p))o=o.updateImmediateChild(p.name,p.node),f++;else break;else continue}}else{o=n.withIndex(this.index_),o=o.updatePriority(Ae.EMPTY_NODE);let l;this.reverse_?l=o.getReverseIterator(this.index_):l=o.getIterator(this.index_);let f=0;for(;l.hasNext();){const p=l.getNext();f<this.limit_&&this.withinDirectionalStart(p)&&this.withinDirectionalEnd(p)?f++:o=o.updateImmediateChild(p.name,Ae.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,o,l){let f;if(this.reverse_){const v=this.index_.getCompare();f=(S,R)=>v(R,S)}else f=this.index_.getCompare();const p=e;ie(p.numChildren()===this.limit_,"");const w=new Pe(n,i),m=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),E=this.rangedFilter_.matches(w);if(p.hasChild(n)){const v=p.getImmediateChild(n);let S=o.getChildAfterChild(this.index_,m,this.reverse_);for(;S!=null&&(S.name===n||p.hasChild(S.name));)S=o.getChildAfterChild(this.index_,S,this.reverse_);const R=S==null?1:f(S,w);if(E&&!i.isEmpty()&&R>=0)return l!=null&&l.trackChildChange(gl(n,i,v)),p.updateImmediateChild(n,i);{l!=null&&l.trackChildChange(hl(n,v));const B=p.updateImmediateChild(n,Ae.EMPTY_NODE);return S!=null&&this.rangedFilter_.matches(S)?(l!=null&&l.trackChildChange(Fo(S.name,S.node)),B.updateImmediateChild(S.name,S.node)):B}}else return i.isEmpty()?e:E&&f(m,w)>=0?(l!=null&&(l.trackChildChange(hl(m.name,m.node)),l.trackChildChange(Fo(n,i))),p.updateImmediateChild(n,i).updateImmediateChild(m.name,Ae.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Pt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ie(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ie(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Lo}hasEnd(){return this.endSet_}getIndexEndValue(){return ie(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ie(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ts}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ie(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Pt}copy(){const e=new r1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function OI(t){return t.loadsAllData()?new n1(t.getIndex()):t.hasLimit()?new RI(t):new pl(t)}function am(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Pt?n="$priority":t.index_===NI?n="$value":t.index_===So?n="$key":(ie(t.index_ instanceof II,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Kt(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=Kt(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+Kt(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=Kt(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+Kt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function lm(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Pt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends hy{constructor(e,n,i,o){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=o,this.log_=kl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ie(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,o){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const f=uu.getListenId_(e,i),p={};this.listens_[f]=p;const w=am(e._queryParams);this.restRequest_(l+".json",w,(m,E)=>{let v=E;if(m===404&&(v=null,m=null),m===null&&this.onDataUpdate_(l,v,!1,i),Bo(this.listens_,f)===p){let S;m?m===401?S="permission_denied":S="rest_error:"+m:S="ok",o(S,null)}})}unlisten(e,n){const i=uu.getListenId_(e,n);delete this.listens_[i]}get(e){const n=am(e._queryParams),i=e._path.toString(),o=new Il;return this.restRequest_(i+".json",n,(l,f)=>{let p=f;l===404&&(p=null,l=null),l===null?(this.onDataUpdate_(i,p,!1,null),o.resolve(p)):o.reject(new Error(p))}),o.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,l])=>{o&&o.accessToken&&(n.auth=o.accessToken),l&&l.token&&(n.ac=l.token);const f=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+sA(n);this.log_("Sending REST request for "+f);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(i&&p.readyState===4){this.log_("REST Response for "+f+" received. status:",p.status,"response:",p.responseText);let w=null;if(p.status>=200&&p.status<300){try{w=cl(p.responseText)}catch{In("Failed to parse JSON response for "+f+": "+p.responseText)}i(null,w)}else p.status!==401&&p.status!==404&&In("Got unsuccessful REST response for "+f+" Status: "+p.status),i(p.status);i=null}},p.open("GET",f,!0),p.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.rootNode_=Ae.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(){return{value:null,children:new Map}}function by(t,e,n){if(Me(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=Fe(e);t.children.has(i)||t.children.set(i,du());const o=t.children.get(i);e=gt(e),by(o,e,n)}}function Dh(t,e,n){t.value!==null?n(e,t.value):PI(t,(i,o)=>{const l=new ot(e.toString()+"/"+i);Dh(o,l,n)})}function PI(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&gn(this.last_,(i,o)=>{n[i]=n[i]-o}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm=10*1e3,BI=30*1e3,LI=5*60*1e3;class FI{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new MI(e);const i=cm+(BI-cm)*Math.random();ja(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;gn(e,(o,l)=>{l>0&&qr(this.statsToReport_,o)&&(n[o]=l,i=!0)}),i&&this.server_.reportStats(n),ja(this.reportStats_.bind(this),Math.floor(Math.random()*2*LI))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Nr||(Nr={}));function i1(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function s1(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function o1(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=Nr.ACK_USER_WRITE,this.source=i1()}operationForChild(e){if(Me(this.path)){if(this.affectedTree.value!=null)return ie(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ot(e));return new fu(Ye(),n,this.revert)}}else return ie(Fe(this.path)===e,"operationForChild called for unrelated child."),new fu(gt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,n){this.source=e,this.path=n,this.type=Nr.LISTEN_COMPLETE}operationForChild(e){return Me(this.path)?new ml(this.source,Ye()):new ml(this.source,gt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=Nr.OVERWRITE}operationForChild(e){return Me(this.path)?new Ns(this.source,Ye(),this.snap.getImmediateChild(e)):new Ns(this.source,gt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=Nr.MERGE}operationForChild(e){if(Me(this.path)){const n=this.children.subtree(new ot(e));return n.isEmpty()?null:n.value?new Ns(this.source,Ye(),n.value):new jo(this.source,Ye(),n)}else return ie(Fe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new jo(this.source,gt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Me(e))return this.isFullyInitialized()&&!this.filtered_;const n=Fe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function UI(t,e,n,i){const o=[],l=[];return e.forEach(f=>{f.type==="child_changed"&&t.index_.indexedValueChanged(f.oldSnap,f.snapshotNode)&&l.push(kI(f.childName,f.snapshotNode))}),Ea(t,o,"child_removed",e,i,n),Ea(t,o,"child_added",e,i,n),Ea(t,o,"child_moved",l,i,n),Ea(t,o,"child_changed",e,i,n),Ea(t,o,"value",e,i,n),o}function Ea(t,e,n,i,o,l){const f=i.filter(p=>p.type===n);f.sort((p,w)=>WI(t,p,w)),f.forEach(p=>{const w=zI(t,p,l);o.forEach(m=>{m.respondsTo(p.type)&&e.push(m.createEvent(w,t.query_))})})}function zI(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function WI(t,e,n){if(e.childName==null||n.childName==null)throw $o("Should only compare child_ events.");const i=new Pe(e.childName,e.snapshotNode),o=new Pe(n.childName,n.snapshotNode);return t.index_.compare(i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t,e){return{eventCache:t,serverCache:e}}function Ua(t,e,n,i){return ed(new Qi(e,n,i),t.serverCache)}function Ay(t,e,n,i){return ed(t.eventCache,new Qi(e,n,i))}function hu(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ks(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mf;const VI=()=>(mf||(mf=new jn(IS)),mf);class ft{constructor(e,n=VI()){this.value=e,this.children=n}static fromObject(e){let n=new ft(null);return gn(e,(i,o)=>{n=n.set(new ot(i),o)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ye(),value:this.value};if(Me(e))return null;{const i=Fe(e),o=this.children.get(i);if(o!==null){const l=o.findRootMostMatchingPathAndValue(gt(e),n);return l!=null?{path:Dt(new ot(i),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Me(e))return this;{const n=Fe(e),i=this.children.get(n);return i!==null?i.subtree(gt(e)):new ft(null)}}set(e,n){if(Me(e))return new ft(n,this.children);{const i=Fe(e),l=(this.children.get(i)||new ft(null)).set(gt(e),n),f=this.children.insert(i,l);return new ft(this.value,f)}}remove(e){if(Me(e))return this.children.isEmpty()?new ft(null):new ft(null,this.children);{const n=Fe(e),i=this.children.get(n);if(i){const o=i.remove(gt(e));let l;return o.isEmpty()?l=this.children.remove(n):l=this.children.insert(n,o),this.value===null&&l.isEmpty()?new ft(null):new ft(this.value,l)}else return this}}get(e){if(Me(e))return this.value;{const n=Fe(e),i=this.children.get(n);return i?i.get(gt(e)):null}}setTree(e,n){if(Me(e))return n;{const i=Fe(e),l=(this.children.get(i)||new ft(null)).setTree(gt(e),n);let f;return l.isEmpty()?f=this.children.remove(i):f=this.children.insert(i,l),new ft(this.value,f)}}fold(e){return this.fold_(Ye(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((o,l)=>{i[o]=l.fold_(Dt(e,o),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,Ye(),n)}findOnPath_(e,n,i){const o=this.value?i(n,this.value):!1;if(o)return o;if(Me(e))return null;{const l=Fe(e),f=this.children.get(l);return f?f.findOnPath_(gt(e),Dt(n,l),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ye(),n)}foreachOnPath_(e,n,i){if(Me(e))return this;{this.value&&i(n,this.value);const o=Fe(e),l=this.children.get(o);return l?l.foreachOnPath_(gt(e),Dt(n,o),i):new ft(null)}}foreach(e){this.foreach_(Ye(),e)}foreach_(e,n){this.children.inorderTraversal((i,o)=>{o.foreach_(Dt(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e){this.writeTree_=e}static empty(){return new Or(new ft(null))}}function za(t,e,n){if(Me(e))return new Or(new ft(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const o=i.path;let l=i.value;const f=An(o,e);return l=l.updateChild(f,n),new Or(t.writeTree_.set(o,l))}else{const o=new ft(n),l=t.writeTree_.setTree(e,o);return new Or(l)}}}function Ph(t,e,n){let i=t;return gn(n,(o,l)=>{i=za(i,Dt(e,o),l)}),i}function um(t,e){if(Me(e))return Or.empty();{const n=t.writeTree_.setTree(e,new ft(null));return new Or(n)}}function Mh(t,e){return Us(t,e)!=null}function Us(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(An(n.path,e)):null}function dm(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Pt,(i,o)=>{e.push(new Pe(i,o))}):t.writeTree_.children.inorderTraversal((i,o)=>{o.value!=null&&e.push(new Pe(i,o.value))}),e}function Xi(t,e){if(Me(e))return t;{const n=Us(t,e);return n!=null?new Or(new ft(n)):new Or(t.writeTree_.subtree(e))}}function Bh(t){return t.writeTree_.isEmpty()}function Uo(t,e){return Sy(Ye(),t.writeTree_,e)}function Sy(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((o,l)=>{o===".priority"?(ie(l.value!==null,"Priority writes must always be leaf nodes"),i=l.value):n=Sy(Dt(t,o),l,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(Dt(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(t,e){return ky(e,t)}function HI(t,e,n,i,o){ie(i>t.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:o}),o&&(t.visibleWrites=za(t.visibleWrites,e,n)),t.lastWriteId=i}function GI(t,e,n,i){ie(i>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:i,visible:!0}),t.visibleWrites=Ph(t.visibleWrites,e,n),t.lastWriteId=i}function XI(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function YI(t,e){const n=t.allWrites.findIndex(p=>p.writeId===e);ie(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let o=i.visible,l=!1,f=t.allWrites.length-1;for(;o&&f>=0;){const p=t.allWrites[f];p.visible&&(f>=n&&$I(p,i.path)?o=!1:gr(i.path,p.path)&&(l=!0)),f--}if(o){if(l)return KI(t),!0;if(i.snap)t.visibleWrites=um(t.visibleWrites,i.path);else{const p=i.children;gn(p,w=>{t.visibleWrites=um(t.visibleWrites,Dt(i.path,w))})}return!0}else return!1}function $I(t,e){if(t.snap)return gr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&gr(Dt(t.path,n),e))return!0;return!1}function KI(t){t.visibleWrites=Iy(t.allWrites,qI,Ye()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function qI(t){return t.visible}function Iy(t,e,n){let i=Or.empty();for(let o=0;o<t.length;++o){const l=t[o];if(e(l)){const f=l.path;let p;if(l.snap)gr(n,f)?(p=An(n,f),i=za(i,p,l.snap)):gr(f,n)&&(p=An(f,n),i=za(i,Ye(),l.snap.getChild(p)));else if(l.children){if(gr(n,f))p=An(n,f),i=Ph(i,p,l.children);else if(gr(f,n))if(p=An(f,n),Me(p))i=Ph(i,Ye(),l.children);else{const w=Bo(l.children,Fe(p));if(w){const m=w.getChild(gt(p));i=za(i,Ye(),m)}}}else throw $o("WriteRecord should have .snap or .children")}}return i}function Ty(t,e,n,i,o){if(!i&&!o){const l=Us(t.visibleWrites,e);if(l!=null)return l;{const f=Xi(t.visibleWrites,e);if(Bh(f))return n;if(n==null&&!Mh(f,Ye()))return null;{const p=n||Ae.EMPTY_NODE;return Uo(f,p)}}}else{const l=Xi(t.visibleWrites,e);if(!o&&Bh(l))return n;if(!o&&n==null&&!Mh(l,Ye()))return null;{const f=function(m){return(m.visible||o)&&(!i||!~i.indexOf(m.writeId))&&(gr(m.path,e)||gr(e,m.path))},p=Iy(t.allWrites,f,e),w=n||Ae.EMPTY_NODE;return Uo(p,w)}}}function ZI(t,e,n){let i=Ae.EMPTY_NODE;const o=Us(t.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(Pt,(l,f)=>{i=i.updateImmediateChild(l,f)}),i;if(n){const l=Xi(t.visibleWrites,e);return n.forEachChild(Pt,(f,p)=>{const w=Uo(Xi(l,new ot(f)),p);i=i.updateImmediateChild(f,w)}),dm(l).forEach(f=>{i=i.updateImmediateChild(f.name,f.node)}),i}else{const l=Xi(t.visibleWrites,e);return dm(l).forEach(f=>{i=i.updateImmediateChild(f.name,f.node)}),i}}function QI(t,e,n,i,o){ie(i||o,"Either existingEventSnap or existingServerSnap must exist");const l=Dt(e,n);if(Mh(t.visibleWrites,l))return null;{const f=Xi(t.visibleWrites,l);return Bh(f)?o.getChild(n):Uo(f,o.getChild(n))}}function JI(t,e,n,i){const o=Dt(e,n),l=Us(t.visibleWrites,o);if(l!=null)return l;if(i.isCompleteForChild(n)){const f=Xi(t.visibleWrites,o);return Uo(f,i.getNode().getImmediateChild(n))}else return null}function e8(t,e){return Us(t.visibleWrites,e)}function t8(t,e,n,i,o,l,f){let p;const w=Xi(t.visibleWrites,e),m=Us(w,Ye());if(m!=null)p=m;else if(n!=null)p=Uo(w,n);else return[];if(p=p.withIndex(f),!p.isEmpty()&&!p.isLeafNode()){const E=[],v=f.getCompare(),S=l?p.getReverseIteratorFrom(i,f):p.getIteratorFrom(i,f);let R=S.getNext();for(;R&&E.length<o;)v(R,i)!==0&&E.push(R),R=S.getNext();return E}else return[]}function n8(){return{visibleWrites:Or.empty(),allWrites:[],lastWriteId:-1}}function gu(t,e,n,i){return Ty(t.writeTree,t.treePath,e,n,i)}function a1(t,e){return ZI(t.writeTree,t.treePath,e)}function fm(t,e,n,i){return QI(t.writeTree,t.treePath,e,n,i)}function pu(t,e){return e8(t.writeTree,Dt(t.treePath,e))}function r8(t,e,n,i,o,l){return t8(t.writeTree,t.treePath,e,n,i,o,l)}function l1(t,e,n){return JI(t.writeTree,t.treePath,e,n)}function Ny(t,e){return ky(Dt(t.treePath,e),t.writeTree)}function ky(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;ie(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ie(i!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(i);if(o){const l=o.type;if(n==="child_added"&&l==="child_removed")this.changeMap.set(i,gl(i,e.snapshotNode,o.snapshotNode));else if(n==="child_removed"&&l==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&l==="child_changed")this.changeMap.set(i,hl(i,o.oldSnap));else if(n==="child_changed"&&l==="child_added")this.changeMap.set(i,Fo(i,e.snapshotNode));else if(n==="child_changed"&&l==="child_changed")this.changeMap.set(i,gl(i,e.snapshotNode,o.oldSnap));else throw $o("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const Ry=new s8;class c1{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Qi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return l1(this.writes_,e,i)}}getChildAfterChild(e,n,i){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ks(this.viewCache_),l=r8(this.writes_,o,n,1,i,e);return l.length===0?null:l[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o8(t){return{filter:t}}function a8(t,e){ie(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ie(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function l8(t,e,n,i,o){const l=new i8;let f,p;if(n.type===Nr.OVERWRITE){const m=n;m.source.fromUser?f=Lh(t,e,m.path,m.snap,i,o,l):(ie(m.source.fromServer,"Unknown source."),p=m.source.tagged||e.serverCache.isFiltered()&&!Me(m.path),f=mu(t,e,m.path,m.snap,i,o,p,l))}else if(n.type===Nr.MERGE){const m=n;m.source.fromUser?f=u8(t,e,m.path,m.children,i,o,l):(ie(m.source.fromServer,"Unknown source."),p=m.source.tagged||e.serverCache.isFiltered(),f=Fh(t,e,m.path,m.children,i,o,p,l))}else if(n.type===Nr.ACK_USER_WRITE){const m=n;m.revert?f=h8(t,e,m.path,i,o,l):f=d8(t,e,m.path,m.affectedTree,i,o,l)}else if(n.type===Nr.LISTEN_COMPLETE)f=f8(t,e,n.path,i,l);else throw $o("Unknown operation type: "+n.type);const w=l.getChanges();return c8(e,f,w),{viewCache:f,changes:w}}function c8(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const o=i.getNode().isLeafNode()||i.getNode().isEmpty(),l=hu(t);(n.length>0||!t.eventCache.isFullyInitialized()||o&&!i.getNode().equals(l)||!i.getNode().getPriority().equals(l.getPriority()))&&n.push(Ey(hu(e)))}}function Oy(t,e,n,i,o,l){const f=e.eventCache;if(pu(i,n)!=null)return e;{let p,w;if(Me(n))if(ie(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=ks(e),E=m instanceof Ae?m:Ae.EMPTY_NODE,v=a1(i,E);p=t.filter.updateFullNode(e.eventCache.getNode(),v,l)}else{const m=gu(i,ks(e));p=t.filter.updateFullNode(e.eventCache.getNode(),m,l)}else{const m=Fe(n);if(m===".priority"){ie(Zi(n)===1,"Can't have a priority with additional path components");const E=f.getNode();w=e.serverCache.getNode();const v=fm(i,n,E,w);v!=null?p=t.filter.updatePriority(E,v):p=f.getNode()}else{const E=gt(n);let v;if(f.isCompleteForChild(m)){w=e.serverCache.getNode();const S=fm(i,n,f.getNode(),w);S!=null?v=f.getNode().getImmediateChild(m).updateChild(E,S):v=f.getNode().getImmediateChild(m)}else v=l1(i,m,e.serverCache);v!=null?p=t.filter.updateChild(f.getNode(),m,v,E,o,l):p=f.getNode()}}return Ua(e,p,f.isFullyInitialized()||Me(n),t.filter.filtersNodes())}}function mu(t,e,n,i,o,l,f,p){const w=e.serverCache;let m;const E=f?t.filter:t.filter.getIndexedFilter();if(Me(n))m=E.updateFullNode(w.getNode(),i,null);else if(E.filtersNodes()&&!w.isFiltered()){const R=w.getNode().updateChild(n,i);m=E.updateFullNode(w.getNode(),R,null)}else{const R=Fe(n);if(!w.isCompleteForPath(n)&&Zi(n)>1)return e;const M=gt(n),K=w.getNode().getImmediateChild(R).updateChild(M,i);R===".priority"?m=E.updatePriority(w.getNode(),K):m=E.updateChild(w.getNode(),R,K,M,Ry,null)}const v=Ay(e,m,w.isFullyInitialized()||Me(n),E.filtersNodes()),S=new c1(o,v,l);return Oy(t,v,n,o,S,p)}function Lh(t,e,n,i,o,l,f){const p=e.eventCache;let w,m;const E=new c1(o,e,l);if(Me(n))m=t.filter.updateFullNode(e.eventCache.getNode(),i,f),w=Ua(e,m,!0,t.filter.filtersNodes());else{const v=Fe(n);if(v===".priority")m=t.filter.updatePriority(e.eventCache.getNode(),i),w=Ua(e,m,p.isFullyInitialized(),p.isFiltered());else{const S=gt(n),R=p.getNode().getImmediateChild(v);let M;if(Me(S))M=i;else{const B=E.getCompleteChild(v);B!=null?J0(S)===".priority"&&B.getChild(py(S)).isEmpty()?M=B:M=B.updateChild(S,i):M=Ae.EMPTY_NODE}if(R.equals(M))w=e;else{const B=t.filter.updateChild(p.getNode(),v,M,S,E,f);w=Ua(e,B,p.isFullyInitialized(),t.filter.filtersNodes())}}}return w}function hm(t,e){return t.eventCache.isCompleteForChild(e)}function u8(t,e,n,i,o,l,f){let p=e;return i.foreach((w,m)=>{const E=Dt(n,w);hm(e,Fe(E))&&(p=Lh(t,p,E,m,o,l,f))}),i.foreach((w,m)=>{const E=Dt(n,w);hm(e,Fe(E))||(p=Lh(t,p,E,m,o,l,f))}),p}function gm(t,e,n){return n.foreach((i,o)=>{e=e.updateChild(i,o)}),e}function Fh(t,e,n,i,o,l,f,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w=e,m;Me(n)?m=i:m=new ft(null).setTree(n,i);const E=e.serverCache.getNode();return m.children.inorderTraversal((v,S)=>{if(E.hasChild(v)){const R=e.serverCache.getNode().getImmediateChild(v),M=gm(t,R,S);w=mu(t,w,new ot(v),M,o,l,f,p)}}),m.children.inorderTraversal((v,S)=>{const R=!e.serverCache.isCompleteForChild(v)&&S.value===null;if(!E.hasChild(v)&&!R){const M=e.serverCache.getNode().getImmediateChild(v),B=gm(t,M,S);w=mu(t,w,new ot(v),B,o,l,f,p)}}),w}function d8(t,e,n,i,o,l,f){if(pu(o,n)!=null)return e;const p=e.serverCache.isFiltered(),w=e.serverCache;if(i.value!=null){if(Me(n)&&w.isFullyInitialized()||w.isCompleteForPath(n))return mu(t,e,n,w.getNode().getChild(n),o,l,p,f);if(Me(n)){let m=new ft(null);return w.getNode().forEachChild(So,(E,v)=>{m=m.set(new ot(E),v)}),Fh(t,e,n,m,o,l,p,f)}else return e}else{let m=new ft(null);return i.foreach((E,v)=>{const S=Dt(n,E);w.isCompleteForPath(S)&&(m=m.set(E,w.getNode().getChild(S)))}),Fh(t,e,n,m,o,l,p,f)}}function f8(t,e,n,i,o){const l=e.serverCache,f=Ay(e,l.getNode(),l.isFullyInitialized()||Me(n),l.isFiltered());return Oy(t,f,n,i,Ry,o)}function h8(t,e,n,i,o,l){let f;if(pu(i,n)!=null)return e;{const p=new c1(i,e,o),w=e.eventCache.getNode();let m;if(Me(n)||Fe(n)===".priority"){let E;if(e.serverCache.isFullyInitialized())E=gu(i,ks(e));else{const v=e.serverCache.getNode();ie(v instanceof Ae,"serverChildren would be complete if leaf node"),E=a1(i,v)}E=E,m=t.filter.updateFullNode(w,E,l)}else{const E=Fe(n);let v=l1(i,E,e.serverCache);v==null&&e.serverCache.isCompleteForChild(E)&&(v=w.getImmediateChild(E)),v!=null?m=t.filter.updateChild(w,E,v,gt(n),p,l):e.eventCache.getNode().hasChild(E)?m=t.filter.updateChild(w,E,Ae.EMPTY_NODE,gt(n),p,l):m=w,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(f=gu(i,ks(e)),f.isLeafNode()&&(m=t.filter.updateFullNode(m,f,l)))}return f=e.serverCache.isFullyInitialized()||pu(i,Ye())!=null,Ua(e,m,f,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,o=new n1(i.getIndex()),l=OI(i);this.processor_=o8(l);const f=n.serverCache,p=n.eventCache,w=o.updateFullNode(Ae.EMPTY_NODE,f.getNode(),null),m=l.updateFullNode(Ae.EMPTY_NODE,p.getNode(),null),E=new Qi(w,f.isFullyInitialized(),o.filtersNodes()),v=new Qi(m,p.isFullyInitialized(),l.filtersNodes());this.viewCache_=ed(v,E),this.eventGenerator_=new jI(this.query_)}get query(){return this.query_}}function p8(t){return t.viewCache_.serverCache.getNode()}function m8(t){return hu(t.viewCache_)}function w8(t,e){const n=ks(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Me(e)&&!n.getImmediateChild(Fe(e)).isEmpty())?n.getChild(e):null}function pm(t){return t.eventRegistrations_.length===0}function x8(t,e){t.eventRegistrations_.push(e)}function mm(t,e,n){const i=[];if(n){ie(e==null,"A cancel should cancel all event registrations.");const o=t.query._path;t.eventRegistrations_.forEach(l=>{const f=l.createCancelEvent(n,o);f&&i.push(f)})}if(e){let o=[];for(let l=0;l<t.eventRegistrations_.length;++l){const f=t.eventRegistrations_[l];if(!f.matches(e))o.push(f);else if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(l+1));break}}t.eventRegistrations_=o}else t.eventRegistrations_=[];return i}function wm(t,e,n,i){e.type===Nr.MERGE&&e.source.queryId!==null&&(ie(ks(t.viewCache_),"We should always have a full cache before handling merges"),ie(hu(t.viewCache_),"Missing event cache, even though we have a server cache"));const o=t.viewCache_,l=l8(t.processor_,o,e,n,i);return a8(t.processor_,l.viewCache),ie(l.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=l.viewCache,Dy(t,l.changes,l.viewCache.eventCache.getNode(),null)}function y8(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Pt,(l,f)=>{i.push(Fo(l,f))}),n.isFullyInitialized()&&i.push(Ey(n.getNode())),Dy(t,i,n.getNode(),e)}function Dy(t,e,n,i){const o=i?[i]:t.eventRegistrations_;return UI(t.eventGenerator_,e,n,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wu;class Py{constructor(){this.views=new Map}}function v8(t){ie(!wu,"__referenceConstructor has already been defined"),wu=t}function C8(){return ie(wu,"Reference.ts has not been loaded"),wu}function _8(t){return t.views.size===0}function u1(t,e,n,i){const o=e.source.queryId;if(o!==null){const l=t.views.get(o);return ie(l!=null,"SyncTree gave us an op for an invalid query."),wm(l,e,n,i)}else{let l=[];for(const f of t.views.values())l=l.concat(wm(f,e,n,i));return l}}function My(t,e,n,i,o){const l=e._queryIdentifier,f=t.views.get(l);if(!f){let p=gu(n,o?i:null),w=!1;p?w=!0:i instanceof Ae?(p=a1(n,i),w=!1):(p=Ae.EMPTY_NODE,w=!1);const m=ed(new Qi(p,w,!1),new Qi(i,o,!1));return new g8(e,m)}return f}function E8(t,e,n,i,o,l){const f=My(t,e,i,o,l);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,f),x8(f,n),y8(f,n)}function b8(t,e,n,i){const o=e._queryIdentifier,l=[];let f=[];const p=Ji(t);if(o==="default")for(const[w,m]of t.views.entries())f=f.concat(mm(m,n,i)),pm(m)&&(t.views.delete(w),m.query._queryParams.loadsAllData()||l.push(m.query));else{const w=t.views.get(o);w&&(f=f.concat(mm(w,n,i)),pm(w)&&(t.views.delete(o),w.query._queryParams.loadsAllData()||l.push(w.query)))}return p&&!Ji(t)&&l.push(new(C8())(e._repo,e._path)),{removed:l,events:f}}function By(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Yi(t,e){let n=null;for(const i of t.views.values())n=n||w8(i,e);return n}function Ly(t,e){if(e._queryParams.loadsAllData())return nd(t);{const i=e._queryIdentifier;return t.views.get(i)}}function Fy(t,e){return Ly(t,e)!=null}function Ji(t){return nd(t)!=null}function nd(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xu;function A8(t){ie(!xu,"__referenceConstructor has already been defined"),xu=t}function S8(){return ie(xu,"Reference.ts has not been loaded"),xu}let I8=1;class xm{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ft(null),this.pendingWriteTree_=n8(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function jy(t,e,n,i,o){return HI(t.pendingWriteTree_,e,n,i,o),o?qo(t,new Ns(i1(),e,n)):[]}function T8(t,e,n,i){GI(t.pendingWriteTree_,e,n,i);const o=ft.fromObject(n);return qo(t,new jo(i1(),e,o))}function Oi(t,e,n=!1){const i=XI(t.pendingWriteTree_,e);if(YI(t.pendingWriteTree_,e)){let l=new ft(null);return i.snap!=null?l=l.set(Ye(),!0):gn(i.children,f=>{l=l.set(new ot(f),!0)}),qo(t,new fu(i.path,l,n))}else return[]}function Ol(t,e,n){return qo(t,new Ns(s1(),e,n))}function N8(t,e,n){const i=ft.fromObject(n);return qo(t,new jo(s1(),e,i))}function k8(t,e){return qo(t,new ml(s1(),e))}function R8(t,e,n){const i=f1(t,n);if(i){const o=h1(i),l=o.path,f=o.queryId,p=An(l,e),w=new ml(o1(f),p);return g1(t,l,w)}else return[]}function Uy(t,e,n,i,o=!1){const l=e._path,f=t.syncPointTree_.get(l);let p=[];if(f&&(e._queryIdentifier==="default"||Fy(f,e))){const w=b8(f,e,n,i);_8(f)&&(t.syncPointTree_=t.syncPointTree_.remove(l));const m=w.removed;if(p=w.events,!o){const E=m.findIndex(S=>S._queryParams.loadsAllData())!==-1,v=t.syncPointTree_.findOnPath(l,(S,R)=>Ji(R));if(E&&!v){const S=t.syncPointTree_.subtree(l);if(!S.isEmpty()){const R=M8(S);for(let M=0;M<R.length;++M){const B=R[M],K=B.query,O=Hy(t,B);t.listenProvider_.startListening(Wa(K),wl(t,K),O.hashFn,O.onComplete)}}}!v&&m.length>0&&!i&&(E?t.listenProvider_.stopListening(Wa(e),null):m.forEach(S=>{const R=t.queryToTagMap.get(rd(S));t.listenProvider_.stopListening(Wa(S),R)}))}B8(t,m)}return p}function zy(t,e,n,i){const o=f1(t,i);if(o!=null){const l=h1(o),f=l.path,p=l.queryId,w=An(f,e),m=new Ns(o1(p),w,n);return g1(t,f,m)}else return[]}function O8(t,e,n,i){const o=f1(t,i);if(o){const l=h1(o),f=l.path,p=l.queryId,w=An(f,e),m=ft.fromObject(n),E=new jo(o1(p),w,m);return g1(t,f,E)}else return[]}function D8(t,e,n,i=!1){const o=e._path;let l=null,f=!1;t.syncPointTree_.foreachOnPath(o,(S,R)=>{const M=An(S,o);l=l||Yi(R,M),f=f||Ji(R)});let p=t.syncPointTree_.get(o);p?(f=f||Ji(p),l=l||Yi(p,Ye())):(p=new Py,t.syncPointTree_=t.syncPointTree_.set(o,p));let w;l!=null?w=!0:(w=!1,l=Ae.EMPTY_NODE,t.syncPointTree_.subtree(o).foreachChild((R,M)=>{const B=Yi(M,Ye());B&&(l=l.updateImmediateChild(R,B))}));const m=Fy(p,e);if(!m&&!e._queryParams.loadsAllData()){const S=rd(e);ie(!t.queryToTagMap.has(S),"View does not exist, but we have a tag");const R=L8();t.queryToTagMap.set(S,R),t.tagToQueryMap.set(R,S)}const E=td(t.pendingWriteTree_,o);let v=E8(p,e,n,E,l,w);if(!m&&!f&&!i){const S=Ly(p,e);v=v.concat(F8(t,e,S))}return v}function d1(t,e,n){const o=t.pendingWriteTree_,l=t.syncPointTree_.findOnPath(e,(f,p)=>{const w=An(f,e),m=Yi(p,w);if(m)return m});return Ty(o,e,l,n,!0)}function P8(t,e){const n=e._path;let i=null;t.syncPointTree_.foreachOnPath(n,(m,E)=>{const v=An(m,n);i=i||Yi(E,v)});let o=t.syncPointTree_.get(n);o?i=i||Yi(o,Ye()):(o=new Py,t.syncPointTree_=t.syncPointTree_.set(n,o));const l=i!=null,f=l?new Qi(i,!0,!1):null,p=td(t.pendingWriteTree_,e._path),w=My(o,e,p,l?f.getNode():Ae.EMPTY_NODE,l);return m8(w)}function qo(t,e){return Wy(e,t.syncPointTree_,null,td(t.pendingWriteTree_,Ye()))}function Wy(t,e,n,i){if(Me(t.path))return Vy(t,e,n,i);{const o=e.get(Ye());n==null&&o!=null&&(n=Yi(o,Ye()));let l=[];const f=Fe(t.path),p=t.operationForChild(f),w=e.children.get(f);if(w&&p){const m=n?n.getImmediateChild(f):null,E=Ny(i,f);l=l.concat(Wy(p,w,m,E))}return o&&(l=l.concat(u1(o,t,i,n))),l}}function Vy(t,e,n,i){const o=e.get(Ye());n==null&&o!=null&&(n=Yi(o,Ye()));let l=[];return e.children.inorderTraversal((f,p)=>{const w=n?n.getImmediateChild(f):null,m=Ny(i,f),E=t.operationForChild(f);E&&(l=l.concat(Vy(E,p,w,m)))}),o&&(l=l.concat(u1(o,t,i,n))),l}function Hy(t,e){const n=e.query,i=wl(t,n);return{hashFn:()=>(p8(e)||Ae.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return i?R8(t,n._path,i):k8(t,n._path);{const l=kS(o,n);return Uy(t,n,null,l)}}}}function wl(t,e){const n=rd(e);return t.queryToTagMap.get(n)}function rd(t){return t._path.toString()+"$"+t._queryIdentifier}function f1(t,e){return t.tagToQueryMap.get(e)}function h1(t){const e=t.indexOf("$");return ie(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ot(t.substr(0,e))}}function g1(t,e,n){const i=t.syncPointTree_.get(e);ie(i,"Missing sync point for query tag that we're tracking");const o=td(t.pendingWriteTree_,e);return u1(i,n,o,null)}function M8(t){return t.fold((e,n,i)=>{if(n&&Ji(n))return[nd(n)];{let o=[];return n&&(o=By(n)),gn(i,(l,f)=>{o=o.concat(f)}),o}})}function Wa(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(S8())(t._repo,t._path):t}function B8(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const o=rd(i),l=t.queryToTagMap.get(o);t.queryToTagMap.delete(o),t.tagToQueryMap.delete(l)}}}function L8(){return I8++}function F8(t,e,n){const i=e._path,o=wl(t,e),l=Hy(t,n),f=t.listenProvider_.startListening(Wa(e),o,l.hashFn,l.onComplete),p=t.syncPointTree_.subtree(i);if(o)ie(!Ji(p.value),"If we're adding a query, it shouldn't be shadowed");else{const w=p.fold((m,E,v)=>{if(!Me(m)&&E&&Ji(E))return[nd(E).query];{let S=[];return E&&(S=S.concat(By(E).map(R=>R.query))),gn(v,(R,M)=>{S=S.concat(M)}),S}});for(let m=0;m<w.length;++m){const E=w[m];t.listenProvider_.stopListening(Wa(E),wl(t,E))}}return f}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new p1(n)}node(){return this.node_}}class m1{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Dt(this.path_,e);return new m1(this.syncTree_,n)}node(){return d1(this.syncTree_,this.path_)}}const j8=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},ym=function(t,e,n){if(!t||typeof t!="object")return t;if(ie(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return U8(t[".sv"],e,n);if(typeof t[".sv"]=="object")return z8(t[".sv"],e);ie(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},U8=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ie(!1,"Unexpected server value: "+t)}},z8=function(t,e,n){t.hasOwnProperty("increment")||ie(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&ie(!1,"Unexpected increment value: "+i);const o=e.node();if(ie(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return i;const f=o.getValue();return typeof f!="number"?i:f+i},Gy=function(t,e,n,i){return w1(e,new m1(n,t),i)},Xy=function(t,e,n){return w1(t,new p1(e),n)};function w1(t,e,n){const i=t.getPriority().val(),o=ym(i,e.getImmediateChild(".priority"),n);let l;if(t.isLeafNode()){const f=t,p=ym(f.getValue(),e,n);return p!==f.getValue()||o!==f.getPriority().val()?new en(p,$t(o)):t}else{const f=t;return l=f,o!==f.getPriority().val()&&(l=l.updatePriority(new en(o))),f.forEachChild(Pt,(p,w)=>{const m=w1(w,e.getImmediateChild(p),n);m!==w&&(l=l.updateImmediateChild(p,m))}),l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function y1(t,e){let n=e instanceof ot?e:new ot(e),i=t,o=Fe(n);for(;o!==null;){const l=Bo(i.node.children,o)||{children:{},childCount:0};i=new x1(o,i,l),n=gt(n),o=Fe(n)}return i}function Zo(t){return t.node.value}function Yy(t,e){t.node.value=e,jh(t)}function $y(t){return t.node.childCount>0}function W8(t){return Zo(t)===void 0&&!$y(t)}function id(t,e){gn(t.node.children,(n,i)=>{e(new x1(n,t,i))})}function Ky(t,e,n,i){n&&e(t),id(t,o=>{Ky(o,e,!0)})}function V8(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Dl(t){return new ot(t.parent===null?t.name:Dl(t.parent)+"/"+t.name)}function jh(t){t.parent!==null&&H8(t.parent,t.name,t)}function H8(t,e,n){const i=W8(n),o=qr(t.node.children,e);i&&o?(delete t.node.children[e],t.node.childCount--,jh(t)):!i&&!o&&(t.node.children[e]=n.node,t.node.childCount++,jh(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8=/[\[\].#$\/\u0000-\u001F\u007F]/,X8=/[\[\].#$\u0000-\u001F\u007F]/,wf=10*1024*1024,v1=function(t){return typeof t=="string"&&t.length!==0&&!G8.test(t)},qy=function(t){return typeof t=="string"&&t.length!==0&&!X8.test(t)},Y8=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),qy(t)},$8=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!$0(t)||t&&typeof t=="object"&&qr(t,".sv")},Zy=function(t,e,n,i){i&&e===void 0||sd(Zu(t,"value"),e,n)},sd=function(t,e,n){const i=n instanceof ot?new uI(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+gs(i));if(typeof e=="function")throw new Error(t+"contains a function "+gs(i)+" with contents = "+e.toString());if($0(e))throw new Error(t+"contains "+e.toString()+" "+gs(i));if(typeof e=="string"&&e.length>wf/3&&Qu(e)>wf)throw new Error(t+"contains a string greater than "+wf+" utf8 bytes "+gs(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,l=!1;if(gn(e,(f,p)=>{if(f===".value")o=!0;else if(f!==".priority"&&f!==".sv"&&(l=!0,!v1(f)))throw new Error(t+" contains an invalid key ("+f+") "+gs(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);dI(i,f),sd(t,p,i),fI(i)}),o&&l)throw new Error(t+' contains ".value" child '+gs(i)+" in addition to actual children.")}},K8=function(t,e){let n,i;for(n=0;n<e.length;n++){i=e[n];const l=fl(i);for(let f=0;f<l.length;f++)if(!(l[f]===".priority"&&f===l.length-1)){if(!v1(l[f]))throw new Error(t+"contains an invalid key ("+l[f]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(cI);let o=null;for(n=0;n<e.length;n++){if(i=e[n],o!==null&&gr(o,i))throw new Error(t+"contains a path "+o.toString()+" that is ancestor of another path "+i.toString());o=i}},q8=function(t,e,n,i){const o=Zu(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const l=[];gn(e,(f,p)=>{const w=new ot(f);if(sd(o,p,Dt(n,w)),J0(w)===".priority"&&!$8(p))throw new Error(o+"contains an invalid value for '"+w.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(w)}),K8(o,l)},Qy=function(t,e,n,i){if(!qy(n))throw new Error(Zu(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Z8=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Qy(t,e,n)},C1=function(t,e){if(Fe(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Q8=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!v1(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Y8(n))throw new Error(Zu(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function _1(t,e){let n=null;for(let i=0;i<e.length;i++){const o=e[i],l=o.getPath();n!==null&&!my(l,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:l}),n.events.push(o)}n&&t.eventLists_.push(n)}function xr(t,e,n){_1(t,n),e4(t,i=>gr(i,e)||gr(e,i))}function e4(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const o=t.eventLists_[i];if(o){const l=o.path;e(l)?(t4(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function t4(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();Fa&&dn("event: "+n.toString()),Ko(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4="repo_interrupt",r4=25;class i4{constructor(e,n,i,o){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new J8,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=du(),this.transactionQueueTree_=new x1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function s4(t,e,n){if(t.stats_=Z0(t.repoInfo_),t.forceRestClient_||PS())t.server_=new uu(t.repoInfo_,(i,o,l,f)=>{vm(t,i,o,l,f)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Cm(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Kt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new si(t.repoInfo_,e,(i,o,l,f)=>{vm(t,i,o,l,f)},i=>{Cm(t,i)},i=>{o4(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=jS(t.repoInfo_,()=>new FI(t.stats_,t.server_)),t.infoData_=new DI,t.infoSyncTree_=new xm({startListening:(i,o,l,f)=>{let p=[];const w=t.infoData_.getNode(i._path);return w.isEmpty()||(p=Ol(t.infoSyncTree_,i._path,w),setTimeout(()=>{f("ok")},0)),p},stopListening:()=>{}}),E1(t,"connected",!1),t.serverSyncTree_=new xm({startListening:(i,o,l,f)=>(t.server_.listen(i,l,o,(p,w)=>{const m=f(p,w);xr(t.eventQueue_,i._path,m)}),[]),stopListening:(i,o)=>{t.server_.unlisten(i,o)}})}function Jy(t){const n=t.infoData_.getNode(new ot(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function od(t){return j8({timestamp:Jy(t)})}function vm(t,e,n,i,o){t.dataUpdateCount++;const l=new ot(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let f=[];if(o)if(i){const w=iu(n,m=>$t(m));f=O8(t.serverSyncTree_,l,w,o)}else{const w=$t(n);f=zy(t.serverSyncTree_,l,w,o)}else if(i){const w=iu(n,m=>$t(m));f=N8(t.serverSyncTree_,l,w)}else{const w=$t(n);f=Ol(t.serverSyncTree_,l,w)}let p=l;f.length>0&&(p=zo(t,l)),xr(t.eventQueue_,p,f)}function Cm(t,e){E1(t,"connected",e),e===!1&&u4(t)}function o4(t,e){gn(e,(n,i)=>{E1(t,n,i)})}function E1(t,e,n){const i=new ot("/.info/"+e),o=$t(n);t.infoData_.updateSnapshot(i,o);const l=Ol(t.infoSyncTree_,i,o);xr(t.eventQueue_,i,l)}function b1(t){return t.nextWriteId_++}function a4(t,e,n){const i=P8(t.serverSyncTree_,e);return i!=null?Promise.resolve(i):t.server_.get(e).then(o=>{const l=$t(o).withIndex(e._queryParams.getIndex());D8(t.serverSyncTree_,e,n,!0);let f;if(e._queryParams.loadsAllData())f=Ol(t.serverSyncTree_,e._path,l);else{const p=wl(t.serverSyncTree_,e);f=zy(t.serverSyncTree_,e._path,l,p)}return xr(t.eventQueue_,e._path,f),Uy(t.serverSyncTree_,e,n,null,!0),l},o=>(Pl(t,"get for query "+Kt(e)+" failed: "+o),Promise.reject(new Error(o))))}function l4(t,e,n,i,o){Pl(t,"set",{path:e.toString(),value:n,priority:i});const l=od(t),f=$t(n,i),p=d1(t.serverSyncTree_,e),w=Xy(f,p,l),m=b1(t),E=jy(t.serverSyncTree_,e,w,m,!0);_1(t.eventQueue_,E),t.server_.put(e.toString(),f.val(!0),(S,R)=>{const M=S==="ok";M||In("set at "+e+" failed: "+S);const B=Oi(t.serverSyncTree_,m,!M);xr(t.eventQueue_,e,B),Uh(t,o,S,R)});const v=S1(t,e);zo(t,v),xr(t.eventQueue_,v,[])}function c4(t,e,n,i){Pl(t,"update",{path:e.toString(),value:n});let o=!0;const l=od(t),f={};if(gn(n,(p,w)=>{o=!1,f[p]=Gy(Dt(e,p),$t(w),t.serverSyncTree_,l)}),o)dn("update() called with empty data.  Don't do anything."),Uh(t,i,"ok",void 0);else{const p=b1(t),w=T8(t.serverSyncTree_,e,f,p);_1(t.eventQueue_,w),t.server_.merge(e.toString(),n,(m,E)=>{const v=m==="ok";v||In("update at "+e+" failed: "+m);const S=Oi(t.serverSyncTree_,p,!v),R=S.length>0?zo(t,e):e;xr(t.eventQueue_,R,S),Uh(t,i,m,E)}),gn(n,m=>{const E=S1(t,Dt(e,m));zo(t,E)}),xr(t.eventQueue_,e,[])}}function u4(t){Pl(t,"onDisconnectEvents");const e=od(t),n=du();Dh(t.onDisconnect_,Ye(),(o,l)=>{const f=Gy(o,l,t.serverSyncTree_,e);by(n,o,f)});let i=[];Dh(n,Ye(),(o,l)=>{i=i.concat(Ol(t.serverSyncTree_,o,l));const f=S1(t,o);zo(t,f)}),t.onDisconnect_=du(),xr(t.eventQueue_,Ye(),i)}function d4(t){t.persistentConnection_&&t.persistentConnection_.interrupt(n4)}function Pl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),dn(n,...e)}function Uh(t,e,n,i){e&&Ko(()=>{if(n==="ok")e(null);else{const o=(n||"error").toUpperCase();let l=o;i&&(l+=": "+i);const f=new Error(l);f.code=o,e(f)}})}function ev(t,e,n){return d1(t.serverSyncTree_,e,n)||Ae.EMPTY_NODE}function A1(t,e=t.transactionQueueTree_){if(e||ad(t,e),Zo(e)){const n=nv(t,e);ie(n.length>0,"Sending zero length transaction queue"),n.every(o=>o.status===0)&&f4(t,Dl(e),n)}else $y(e)&&id(e,n=>{A1(t,n)})}function f4(t,e,n){const i=n.map(m=>m.currentWriteId),o=ev(t,e,i);let l=o;const f=o.hash();for(let m=0;m<n.length;m++){const E=n[m];ie(E.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const v=An(e,E.path);l=l.updateChild(v,E.currentOutputSnapshotRaw)}const p=l.val(!0),w=e;t.server_.put(w.toString(),p,m=>{Pl(t,"transaction put response",{path:w.toString(),status:m});let E=[];if(m==="ok"){const v=[];for(let S=0;S<n.length;S++)n[S].status=2,E=E.concat(Oi(t.serverSyncTree_,n[S].currentWriteId)),n[S].onComplete&&v.push(()=>n[S].onComplete(null,!0,n[S].currentOutputSnapshotResolved)),n[S].unwatcher();ad(t,y1(t.transactionQueueTree_,e)),A1(t,t.transactionQueueTree_),xr(t.eventQueue_,e,E);for(let S=0;S<v.length;S++)Ko(v[S])}else{if(m==="datastale")for(let v=0;v<n.length;v++)n[v].status===3?n[v].status=4:n[v].status=0;else{In("transaction at "+w.toString()+" failed: "+m);for(let v=0;v<n.length;v++)n[v].status=4,n[v].abortReason=m}zo(t,e)}},f)}function zo(t,e){const n=tv(t,e),i=Dl(n),o=nv(t,n);return h4(t,o,i),i}function h4(t,e,n){if(e.length===0)return;const i=[];let o=[];const f=e.filter(p=>p.status===0).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const w=e[p],m=An(n,w.path);let E=!1,v;if(ie(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),w.status===4)E=!0,v=w.abortReason,o=o.concat(Oi(t.serverSyncTree_,w.currentWriteId,!0));else if(w.status===0)if(w.retryCount>=r4)E=!0,v="maxretry",o=o.concat(Oi(t.serverSyncTree_,w.currentWriteId,!0));else{const S=ev(t,w.path,f);w.currentInputSnapshot=S;const R=e[p].update(S.val());if(R!==void 0){sd("transaction failed: Data returned ",R,w.path);let M=$t(R);typeof R=="object"&&R!=null&&qr(R,".priority")||(M=M.updatePriority(S.getPriority()));const K=w.currentWriteId,O=od(t),k=Xy(M,S,O);w.currentOutputSnapshotRaw=M,w.currentOutputSnapshotResolved=k,w.currentWriteId=b1(t),f.splice(f.indexOf(K),1),o=o.concat(jy(t.serverSyncTree_,w.path,k,w.currentWriteId,w.applyLocally)),o=o.concat(Oi(t.serverSyncTree_,K,!0))}else E=!0,v="nodata",o=o.concat(Oi(t.serverSyncTree_,w.currentWriteId,!0))}xr(t.eventQueue_,n,o),o=[],E&&(e[p].status=2,function(S){setTimeout(S,Math.floor(0))}(e[p].unwatcher),e[p].onComplete&&(v==="nodata"?i.push(()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot)):i.push(()=>e[p].onComplete(new Error(v),!1,null))))}ad(t,t.transactionQueueTree_);for(let p=0;p<i.length;p++)Ko(i[p]);A1(t,t.transactionQueueTree_)}function tv(t,e){let n,i=t.transactionQueueTree_;for(n=Fe(e);n!==null&&Zo(i)===void 0;)i=y1(i,n),e=gt(e),n=Fe(e);return i}function nv(t,e){const n=[];return rv(t,e,n),n.sort((i,o)=>i.order-o.order),n}function rv(t,e,n){const i=Zo(e);if(i)for(let o=0;o<i.length;o++)n.push(i[o]);id(e,o=>{rv(t,o,n)})}function ad(t,e){const n=Zo(e);if(n){let i=0;for(let o=0;o<n.length;o++)n[o].status!==2&&(n[i]=n[o],i++);n.length=i,Yy(e,n.length>0?n:void 0)}id(e,i=>{ad(t,i)})}function S1(t,e){const n=Dl(tv(t,e)),i=y1(t.transactionQueueTree_,e);return V8(i,o=>{xf(t,o)}),xf(t,i),Ky(i,o=>{xf(t,o)}),n}function xf(t,e){const n=Zo(e);if(n){const i=[];let o=[],l=-1;for(let f=0;f<n.length;f++)n[f].status===3||(n[f].status===1?(ie(l===f-1,"All SENT items should be at beginning of queue."),l=f,n[f].status=3,n[f].abortReason="set"):(ie(n[f].status===0,"Unexpected transaction status in abort"),n[f].unwatcher(),o=o.concat(Oi(t.serverSyncTree_,n[f].currentWriteId,!0)),n[f].onComplete&&i.push(n[f].onComplete.bind(null,new Error("set"),!1,null))));l===-1?Yy(e,void 0):n.length=l+1,xr(t.eventQueue_,Dl(e),o);for(let f=0;f<i.length;f++)Ko(i[f])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let o=n[i];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function p4(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):In(`Invalid query segment '${n}' in query '${t}'`)}return e}const _m=function(t,e){const n=m4(t),i=n.namespace;n.domain==="firebase.com"&&hi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&hi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||AS();const o=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new oy(n.host,n.secure,i,o,e,"",i!==n.subdomain),path:new ot(n.pathString)}},m4=function(t){let e="",n="",i="",o="",l="",f=!0,p="https",w=443;if(typeof t=="string"){let m=t.indexOf("//");m>=0&&(p=t.substring(0,m-1),t=t.substring(m+2));let E=t.indexOf("/");E===-1&&(E=t.length);let v=t.indexOf("?");v===-1&&(v=t.length),e=t.substring(0,Math.min(E,v)),E<v&&(o=g4(t.substring(E,v)));const S=p4(t.substring(Math.min(t.length,v)));m=e.indexOf(":"),m>=0?(f=p==="https"||p==="wss",w=parseInt(e.substring(m+1),10)):m=e.length;const R=e.slice(0,m);if(R.toLowerCase()==="localhost")n="localhost";else if(R.split(".").length<=2)n=R;else{const M=e.indexOf(".");i=e.substring(0,M).toLowerCase(),n=e.substring(M+1),l=i}"ns"in S&&(l=S.ns)}return{host:e,port:w,domain:n,subdomain:i,secure:f,scheme:p,pathString:o,namespace:l}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",w4=function(){let t=0;const e=[];return function(n){const i=n===t;t=n;let o;const l=new Array(8);for(o=7;o>=0;o--)l[o]=Em.charAt(n%64),n=Math.floor(n/64);ie(n===0,"Cannot push at time == 0");let f=l.join("");if(i){for(o=11;o>=0&&e[o]===63;o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(Math.random()*64);for(o=0;o<12;o++)f+=Em.charAt(e[o]);return ie(f.length===20,"nextPushId: Length should be 20."),f}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,n,i,o){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Kt(this.snapshot.exportVal())}}class y4{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ie(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,n,i,o){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=o}get key(){return Me(this._path)?null:J0(this._path)}get ref(){return new mi(this._repo,this._path)}get _queryIdentifier(){const e=lm(this._queryParams),n=K0(e);return n==="{}"?"default":n}get _queryObject(){return lm(this._queryParams)}isEqual(e){if(e=pi(e),!(e instanceof I1))return!1;const n=this._repo===e._repo,i=my(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return n&&i&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+lI(this._path)}}class mi extends I1{constructor(e,n){super(e,n,new r1,!1)}get parent(){const e=py(this._path);return e===null?null:new mi(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class xl{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ot(e),i=yl(this.ref,e);return new xl(this._node.getChild(n),i,Pt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,o)=>e(new xl(o,yl(this.ref,i),Pt)))}hasChild(e){const n=new ot(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ve(t,e){return t=pi(t),t._checkNotDeleted("ref"),e!==void 0?yl(t._root,e):t._root}function yl(t,e){return t=pi(t),Fe(t._path)===null?Z8("child","path",e):Qy("child","path",e),new mi(t._repo,Dt(t._path,e))}function wo(t,e){t=pi(t),C1("push",t._path),Zy("push",e,t._path,!0);const n=Jy(t._repo),i=w4(n),o=yl(t,i),l=yl(t,i);let f;return f=Promise.resolve(l),o.then=f.then.bind(f),o.catch=f.then.bind(f,void 0),o}function C4(t){return C1("remove",t._path),fr(t,null)}function fr(t,e){t=pi(t),C1("set",t._path),Zy("set",e,t._path,!1);const n=new Il;return l4(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function no(t,e){q8("update",e,t._path);const n=new Il;return c4(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function Jt(t){t=pi(t);const e=new v4(()=>{}),n=new T1(e);return a4(t._repo,t,n).then(i=>new xl(i,new mi(t._repo,t._path),t._queryParams.getIndex()))}class T1{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new x4("value",this,new xl(e.snapshotNode,new mi(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new y4(this,e,n):null}matches(e){return e instanceof T1?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}v8(mi);A8(mi);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4="FIREBASE_DATABASE_EMULATOR_HOST",zh={};let E4=!1;function b4(t,e,n,i){t.repoInfo_=new oy(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function A4(t,e,n,i,o){let l=i||t.options.databaseURL;l===void 0&&(t.options.projectId||hi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),dn("Using default host for project ",t.options.projectId),l=`${t.options.projectId}-default-rtdb.firebaseio.com`);let f=_m(l,o),p=f.repoInfo,w;typeof process<"u"&&Hp&&(w=Hp[_4]),w?(l=`http://${w}?ns=${p.namespace}`,f=_m(l,o),p=f.repoInfo):f.repoInfo.secure;const m=new BS(t.name,t.options,e);Q8("Invalid Firebase Database URL",f),Me(f.path)||hi("Database URL must point to the root of a Firebase Database (not including a child path).");const E=I4(p,t,m,new MS(t.name,n));return new T4(E,t)}function S4(t,e){const n=zh[e];(!n||n[t.key]!==t)&&hi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),d4(t),delete n[t.key]}function I4(t,e,n,i){let o=zh[e.name];o||(o={},zh[e.name]=o);let l=o[t.toURLString()];return l&&hi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new i4(t,E4,n,i),o[t.toURLString()]=l,l}class T4{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(s4(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new mi(this._repo,Ye())),this._rootInternal}_delete(){return this._rootInternal!==null&&(S4(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&hi("Cannot call "+e+" on a deleted database.")}}function N4(t=Vx(),e){const n=Tl(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=Yb("database");i&&k4(n,...i)}return n}function k4(t,e,n,i={}){t=pi(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&hi("Cannot call useEmulator() after instance has already been initialized.");const o=t._repoInternal;let l;if(o.repoInfo_.nodeAdmin)i.mockUserToken&&hi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new kc(kc.OWNER);else if(i.mockUserToken){const f=typeof i.mockUserToken=="string"?i.mockUserToken:$b(i.mockUserToken,t.app.options.projectId);l=new kc(f)}b4(o,e,n,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(t){yS(cS),qi(new di("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return A4(i,o,l,n)},"PUBLIC").setMultipleInstances(!0)),$r(Gp,Xp,t),$r(Gp,Xp,"esm2017")}si.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};si.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};R4();var O4="firebase",D4="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$r(O4,D4,"app");const iv="@firebase/installations",N1="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=1e4,ov=`w:${N1}`,av="FIS_v2",P4="https://firebaseinstallations.googleapis.com/v1",M4=60*60*1e3,B4="installations",L4="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Rs=new qu(B4,L4,F4);function lv(t){return t instanceof Fs&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv({projectId:t}){return`${P4}/projects/${t}/installations`}function uv(t){return{token:t.token,requestStatus:2,expiresIn:U4(t.expiresIn),creationTime:Date.now()}}async function dv(t,e){const i=(await e.json()).error;return Rs.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function fv({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function j4(t,{refreshToken:e}){const n=fv(t);return n.append("Authorization",z4(e)),n}async function hv(t){const e=await t();return e.status>=500&&e.status<600?t():e}function U4(t){return Number(t.replace("s","000"))}function z4(t){return`${av} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=cv(t),o=fv(t),l=e.getImmediate({optional:!0});if(l){const m=await l.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const f={fid:n,authVersion:av,appId:t.appId,sdkVersion:ov},p={method:"POST",headers:o,body:JSON.stringify(f)},w=await hv(()=>fetch(i,p));if(w.ok){const m=await w.json();return{fid:m.fid||n,registrationStatus:2,refreshToken:m.refreshToken,authToken:uv(m.authToken)}}else throw await dv("Create Installation",w)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V4(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=/^[cdef][\w-]{21}$/,Wh="";function G4(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=X4(t);return H4.test(n)?n:Wh}catch{return Wh}}function X4(t){return V4(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=new Map;function mv(t,e){const n=ld(t);wv(n,e),Y4(n,e)}function wv(t,e){const n=pv.get(t);if(n)for(const i of n)i(e)}function Y4(t,e){const n=$4();n&&n.postMessage({key:t,fid:e}),K4()}let ys=null;function $4(){return!ys&&"BroadcastChannel"in self&&(ys=new BroadcastChannel("[Firebase] FID Change"),ys.onmessage=t=>{wv(t.data.key,t.data.fid)}),ys}function K4(){pv.size===0&&ys&&(ys.close(),ys=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4="firebase-installations-database",Z4=1,Os="firebase-installations-store";let yf=null;function k1(){return yf||(yf=zx(q4,Z4,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Os)}}})),yf}async function yu(t,e){const n=ld(t),o=(await k1()).transaction(Os,"readwrite"),l=o.objectStore(Os),f=await l.get(n);return await l.put(e,n),await o.done,(!f||f.fid!==e.fid)&&mv(t,e.fid),e}async function xv(t){const e=ld(t),i=(await k1()).transaction(Os,"readwrite");await i.objectStore(Os).delete(e),await i.done}async function cd(t,e){const n=ld(t),o=(await k1()).transaction(Os,"readwrite"),l=o.objectStore(Os),f=await l.get(n),p=e(f);return p===void 0?await l.delete(n):await l.put(p,n),await o.done,p&&(!f||f.fid!==p.fid)&&mv(t,p.fid),p}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R1(t){let e;const n=await cd(t.appConfig,i=>{const o=Q4(i),l=J4(t,o);return e=l.registrationPromise,l.installationEntry});return n.fid===Wh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Q4(t){const e=t||{fid:G4(),registrationStatus:0};return yv(e)}function J4(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Rs.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=eT(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:tT(t)}:{installationEntry:e}}async function eT(t,e){try{const n=await W4(t,e);return yu(t.appConfig,n)}catch(n){throw lv(n)&&n.customData.serverCode===409?await xv(t.appConfig):await yu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function tT(t){let e=await bm(t.appConfig);for(;e.registrationStatus===1;)await gv(100),e=await bm(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await R1(t);return i||n}return e}function bm(t){return cd(t,e=>{if(!e)throw Rs.create("installation-not-found");return yv(e)})}function yv(t){return nT(t)?{fid:t.fid,registrationStatus:0}:t}function nT(t){return t.registrationStatus===1&&t.registrationTime+sv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rT({appConfig:t,heartbeatServiceProvider:e},n){const i=iT(t,n),o=j4(t,n),l=e.getImmediate({optional:!0});if(l){const m=await l.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const f={installation:{sdkVersion:ov,appId:t.appId}},p={method:"POST",headers:o,body:JSON.stringify(f)},w=await hv(()=>fetch(i,p));if(w.ok){const m=await w.json();return uv(m)}else throw await dv("Generate Auth Token",w)}function iT(t,{fid:e}){return`${cv(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O1(t,e=!1){let n;const i=await cd(t.appConfig,l=>{if(!vv(l))throw Rs.create("not-registered");const f=l.authToken;if(!e&&aT(f))return l;if(f.requestStatus===1)return n=sT(t,e),l;{if(!navigator.onLine)throw Rs.create("app-offline");const p=cT(l);return n=oT(t,p),p}});return n?await n:i.authToken}async function sT(t,e){let n=await Am(t.appConfig);for(;n.authToken.requestStatus===1;)await gv(100),n=await Am(t.appConfig);const i=n.authToken;return i.requestStatus===0?O1(t,e):i}function Am(t){return cd(t,e=>{if(!vv(e))throw Rs.create("not-registered");const n=e.authToken;return uT(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function oT(t,e){try{const n=await rT(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await yu(t.appConfig,i),n}catch(n){if(lv(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await xv(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await yu(t.appConfig,i)}throw n}}function vv(t){return t!==void 0&&t.registrationStatus===2}function aT(t){return t.requestStatus===2&&!lT(t)}function lT(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+M4}function cT(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function uT(t){return t.requestStatus===1&&t.requestTime+sv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dT(t){const e=t,{installationEntry:n,registrationPromise:i}=await R1(e);return i?i.catch(console.error):O1(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fT(t,e=!1){const n=t;return await hT(n),(await O1(n,e)).token}async function hT(t){const{registrationPromise:e}=await R1(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(t){if(!t||!t.options)throw vf("App Configuration");if(!t.name)throw vf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw vf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function vf(t){return Rs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="installations",pT="installations-internal",mT=t=>{const e=t.getProvider("app").getImmediate(),n=gT(e),i=Tl(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},wT=t=>{const e=t.getProvider("app").getImmediate(),n=Tl(e,Cv).getImmediate();return{getId:()=>dT(n),getToken:o=>fT(n,o)}};function xT(){qi(new di(Cv,mT,"PUBLIC")),qi(new di(pT,wT,"PRIVATE"))}xT();$r(iv,N1);$r(iv,N1,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu="analytics",yT="firebase_id",vT="origin",CT=60*1e3,_T="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",D1="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn=new X0("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Zn=new qu("analytics","Analytics",ET);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(t){if(!t.startsWith(D1)){const e=Zn.create("invalid-gtag-resource",{gtagURL:t});return Vn.warn(e.message),""}return t}function _v(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function AT(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function ST(t,e){const n=AT("firebase-js-sdk-policy",{createScriptURL:bT}),i=document.createElement("script"),o=`${D1}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(o):o,i.async=!0,document.head.appendChild(i)}function IT(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function TT(t,e,n,i,o,l){const f=i[o];try{if(f)await e[f];else{const w=(await _v(n)).find(m=>m.measurementId===o);w&&await e[w.appId]}}catch(p){Vn.error(p)}t("config",o,l)}async function NT(t,e,n,i,o){try{let l=[];if(o&&o.send_to){let f=o.send_to;Array.isArray(f)||(f=[f]);const p=await _v(n);for(const w of f){const m=p.find(v=>v.measurementId===w),E=m&&e[m.appId];if(E)l.push(E);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),t("event",i,o||{})}catch(l){Vn.error(l)}}function kT(t,e,n,i){async function o(l,...f){try{if(l==="event"){const[p,w]=f;await NT(t,e,n,p,w)}else if(l==="config"){const[p,w]=f;await TT(t,e,n,i,p,w)}else if(l==="consent"){const[p,w]=f;t("consent",p,w)}else if(l==="get"){const[p,w,m]=f;t("get",p,w,m)}else if(l==="set"){const[p]=f;t("set",p)}else t(l,...f)}catch(p){Vn.error(p)}}return o}function RT(t,e,n,i,o){let l=function(...f){window[i].push(arguments)};return window[o]&&typeof window[o]=="function"&&(l=window[o]),window[o]=kT(l,t,e,n),{gtagCore:l,wrappedGtag:window[o]}}function OT(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(D1)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=30,PT=1e3;class MT{constructor(e={},n=PT){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Ev=new MT;function BT(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function LT(t){var e;const{appId:n,apiKey:i}=t,o={method:"GET",headers:BT(i)},l=_T.replace("{app-id}",n),f=await fetch(l,o);if(f.status!==200&&f.status!==304){let p="";try{const w=await f.json();!((e=w.error)===null||e===void 0)&&e.message&&(p=w.error.message)}catch{}throw Zn.create("config-fetch-failed",{httpStatus:f.status,responseMessage:p})}return f.json()}async function FT(t,e=Ev,n){const{appId:i,apiKey:o,measurementId:l}=t.options;if(!i)throw Zn.create("no-app-id");if(!o){if(l)return{measurementId:l,appId:i};throw Zn.create("no-api-key")}const f=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},p=new zT;return setTimeout(async()=>{p.abort()},CT),bv({appId:i,apiKey:o,measurementId:l},f,p,e)}async function bv(t,{throttleEndTimeMillis:e,backoffCount:n},i,o=Ev){var l;const{appId:f,measurementId:p}=t;try{await jT(i,e)}catch(w){if(p)return Vn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${w==null?void 0:w.message}]`),{appId:f,measurementId:p};throw w}try{const w=await LT(t);return o.deleteThrottleMetadata(f),w}catch(w){const m=w;if(!UT(m)){if(o.deleteThrottleMetadata(f),p)return Vn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:f,measurementId:p};throw w}const E=Number((l=m==null?void 0:m.customData)===null||l===void 0?void 0:l.httpStatus)===503?Mp(n,o.intervalMillis,DT):Mp(n,o.intervalMillis),v={throttleEndTimeMillis:Date.now()+E,backoffCount:n+1};return o.setThrottleMetadata(f,v),Vn.debug(`Calling attemptFetch again in ${E} millis`),bv(t,v,i,o)}}function jT(t,e){return new Promise((n,i)=>{const o=Math.max(e-Date.now(),0),l=setTimeout(n,o);t.addEventListener(()=>{clearTimeout(l),i(Zn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function UT(t){if(!(t instanceof Fs)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class zT{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function WT(t,e,n,i,o){if(o&&o.global){t("event",n,i);return}else{const l=await e,f=Object.assign(Object.assign({},i),{send_to:l});t("event",n,f)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VT(){if(Bx())try{await Lx()}catch(t){return Vn.warn(Zn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Vn.warn(Zn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function HT(t,e,n,i,o,l,f){var p;const w=FT(t);w.then(R=>{n[R.measurementId]=R.appId,t.options.measurementId&&R.measurementId!==t.options.measurementId&&Vn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${R.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(R=>Vn.error(R)),e.push(w);const m=VT().then(R=>{if(R)return i.getId()}),[E,v]=await Promise.all([w,m]);OT(l)||ST(l,E.measurementId),o("js",new Date);const S=(p=f==null?void 0:f.config)!==null&&p!==void 0?p:{};return S[vT]="firebase",S.update=!0,v!=null&&(S[yT]=v),o("config",E.measurementId,S),E.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e){this.app=e}_delete(){return delete Va[this.app.options.appId],Promise.resolve()}}let Va={},Sm=[];const Im={};let Cf="dataLayer",XT="gtag",Tm,Av,Nm=!1;function YT(){const t=[];if(qb()&&t.push("This is a browser extension environment."),Jb()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,o)=>`(${o+1}) ${i}`).join(" "),n=Zn.create("invalid-analytics-context",{errorInfo:e});Vn.warn(n.message)}}function $T(t,e,n){YT();const i=t.options.appId;if(!i)throw Zn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Vn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Zn.create("no-api-key");if(Va[i]!=null)throw Zn.create("already-exists",{id:i});if(!Nm){IT(Cf);const{wrappedGtag:l,gtagCore:f}=RT(Va,Sm,Im,Cf,XT);Av=l,Tm=f,Nm=!0}return Va[i]=HT(t,Sm,Im,e,Tm,Cf,n),new GT(t)}function KT(t=Vx()){t=pi(t);const e=Tl(t,vu);return e.isInitialized()?e.getImmediate():qT(t)}function qT(t,e={}){const n=Tl(t,vu);if(n.isInitialized()){const o=n.getImmediate();if(su(e,n.getOptions()))return o;throw Zn.create("already-initialized")}return n.initialize({options:e})}function ZT(t,e,n,i){t=pi(t),WT(Av,Va[t.app.options.appId],e,n,i).catch(o=>Vn.error(o))}const km="@firebase/analytics",Rm="0.10.8";function QT(){qi(new di(vu,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return $T(i,o,n)},"PUBLIC")),qi(new di("analytics-internal",t,"PRIVATE")),$r(km,Rm),$r(km,Rm,"esm2017");function t(e){try{const n=e.getProvider(vu).getImmediate();return{logEvent:(i,o,l)=>ZT(n,i,o,l)}}catch(n){throw Zn.create("interop-component-reg-failed",{reason:n})}}}QT();const JT={apiKey:"AIzaSyBVLs9aP79sEfYy9EjtUan6J5jOX21AoNU",authDomain:"iqos-d3074.firebaseapp.com",databaseURL:"https://iqos-d3074-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"iqos-d3074",storageBucket:"iqos-d3074.firebasestorage.app",messagingSenderId:"928334092425",appId:"1:928334092425:web:3b6d5898ab46d835854e58",measurementId:"G-JN7DT8HRGN"},Sv=Wx(JT);KT(Sv);const He=N4(Sv),un={createProduct:async t=>{try{const e=Ve(He,"products"),n=wo(e),i=t.useBarcode!==!1,o={id:n.key,...t,stock:i?0:t.stock,createdAt:Date.now(),updatedAt:Date.now()};if(await fr(n,o),i){const l=Ve(He,`productUnits/${n.key}`);await fr(l,{})}return o}catch(e){throw new Error(`Error creating product: ${e.message}`)}},getUnitsWithBarcodeCount:async t=>{try{const e=Ve(He,`productUnits/${t}`),n=await Jt(e);return n.exists()?Object.values(n.val()).filter(o=>o.barcode).length:0}catch(e){throw new Error(`Error getting units count: ${e.message}`)}},getReadyStock:async t=>{try{const e=Ve(He,`products/${t}`),n=await Jt(e);if(!n.exists())return 0;const i=n.val();if(i.useBarcode===!1)return i.stock||0;const o=Ve(He,`productUnits/${t}`),l=await Jt(o);return l.exists()?Object.values(l.val()).filter(p=>p.barcode&&p.status==="in_stock").length:0}catch(e){throw new Error(`Error getting ready stock: ${e.message}`)}},updateProductStockFromUnits:async t=>{try{const e=Ve(He,`productUnits/${t}`),n=await Jt(e);let i=0;n.exists()&&(i=Object.values(n.val()).filter(f=>f&&f.status==="in_stock").length);const o=Ve(He,`products/${t}`);return await no(o,{stock:i,updatedAt:Date.now()}),i}catch(e){throw new Error(`Error updating product stock: ${e.message}`)}},getAllProducts:async()=>{try{const t=Ve(He,"products"),e=await Jt(t);return e.exists()?Object.values(e.val()):[]}catch(t){throw new Error(`Error fetching products: ${t.message}`)}},getProductById:async t=>{try{const e=Ve(He,`products/${t}`),n=await Jt(e);return n.exists()?n.val():null}catch(e){throw new Error(`Error fetching product: ${e.message}`)}},getProductByBarcode:async t=>{try{const e=Ve(He,"products"),n=await Jt(e);if(n.exists()){const i=Object.values(n.val());for(const o of i){const l=Ve(He,`productUnits/${o.id}`),f=await Jt(l);if(f.exists()){const w=Object.values(f.val()).find(m=>m.barcode===t);if(w)return{...o,matchedUnitId:w.unitId}}}}return null}catch(e){throw new Error(`Error fetching product by barcode: ${e.message}`)}},addBarcodeToProduct:async(t,e)=>{try{if(!e)throw new Error("Barcode is required");const n=Ve(He,`products/${t}`),i=await Jt(n);if(!i.exists())throw new Error("Product not found");if(i.val().useBarcode===!1)throw new Error("Product tidak menggunakan barcode");const l=await Jt(Ve(He,"productUnits"));if(l.exists()){const m=Object.values(l.val());for(const E of m)if(Object.values(E||{}).some(S=>S&&S.barcode===e))throw new Error("Barcode sudah dipakai unit lain")}const f=Ve(He,`productUnits/${t}`),p=await Jt(f);let w;if(p.exists()){const m=p.val(),E=Object.values(m).find(v=>v&&!v.barcode&&v.status==="in_stock");E&&(w=Ve(He,`productUnits/${t}/${E.unitId}`))}if(!w){const m=wo(f);await fr(m,{unitId:m.key,productId:t,barcode:null,status:"in_stock",createdAt:Date.now()}),w=m}return await no(w,{barcode:e,updatedAt:Date.now()}),await un.updateProductStockFromUnits(t),!0}catch(n){throw new Error(`Error adding barcode: ${n.message}`)}},updateProduct:async(t,e)=>{try{const n=Ve(He,`products/${t}`),i={...e,updatedAt:Date.now()};return await no(n,i),!0}catch(n){throw new Error(`Error updating product: ${n.message}`)}},deleteProduct:async t=>{try{const e=Ve(He,`products/${t}`);return await C4(e),!0}catch(e){throw new Error(`Error deleting product: ${e.message}`)}},updateStock:async(t,e,n,i)=>{try{const o=Ve(He,`products/${t}`),l=await Jt(o);if(!l.exists())throw new Error("Product not found");const f=l.val(),p=f.stock+e;if(p<0)throw new Error("Insufficient stock");await no(o,{stock:p,updatedAt:Date.now()});const w=Ve(He,"stockMovements"),m=wo(w),E={id:m.key,productId:t,productName:f.name,type:e>0?"in":"out",quantity:Math.abs(e),reason:n,referenceId:i,createdAt:Date.now()};return await fr(m,E),!0}catch(o){throw new Error(`Error updating stock: ${o.message}`)}},updateStockAndMarkUnitsSold:async(t,e,n)=>{try{const i=Ve(He,`products/${t}`),o=await Jt(i);if(!o.exists())throw new Error("Product not found");const l=o.val();if(l.useBarcode!==!1){const m=Ve(He,`productUnits/${t}`),E=await Jt(m);if(E.exists()){const v=E.val(),S=Object.values(v).filter(M=>M.status==="in_stock");if(S.length<e)throw new Error(`Insufficient units available. Available: ${S.length}, Requested: ${e}`);let R=0;for(const[M,B]of Object.entries(v))B.status==="in_stock"&&R<e&&(await no(Ve(He,`productUnits/${t}/${M}`),{status:"sold",soldAt:Date.now(),saleId:n,updatedAt:Date.now()}),R++);await un.updateProductStockFromUnits(t)}}else{const m=l.stock-e;if(m<0)throw new Error("Insufficient stock");await no(i,{stock:m,updatedAt:Date.now()})}const f=Ve(He,"stockMovements"),p=wo(f),w={id:p.key,productId:t,productName:l.name,type:"out",quantity:e,reason:"sale",referenceId:n,createdAt:Date.now()};return await fr(p,w),!0}catch(i){throw new Error(`Error updating stock: ${i.message}`)}}},Iv={createSale:async t=>{try{const e=Ve(He,"sales"),n=wo(e),i={id:n.key,...t,createdAt:Date.now(),status:"completed"};await fr(n,i);for(const o of t.items)await un.updateStockAndMarkUnitsSold(o.productId,o.quantity,n.key);return i}catch(e){throw new Error(`Error creating sale: ${e.message}`)}},getAllSales:async()=>{try{const t=Ve(He,"sales"),e=await Jt(t);return e.exists()?Object.values(e.val()):[]}catch(t){throw new Error(`Error fetching sales: ${t.message}`)}},getSaleById:async t=>{try{const e=Ve(He,`sales/${t}`),n=await Jt(e);return n.exists()?n.val():null}catch(e){throw new Error(`Error fetching sale: ${e.message}`)}}};var le;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(le||(le={}));var Om=new Map([[le.QR_CODE,"QR_CODE"],[le.AZTEC,"AZTEC"],[le.CODABAR,"CODABAR"],[le.CODE_39,"CODE_39"],[le.CODE_93,"CODE_93"],[le.CODE_128,"CODE_128"],[le.DATA_MATRIX,"DATA_MATRIX"],[le.MAXICODE,"MAXICODE"],[le.ITF,"ITF"],[le.EAN_13,"EAN_13"],[le.EAN_8,"EAN_8"],[le.PDF_417,"PDF_417"],[le.RSS_14,"RSS_14"],[le.RSS_EXPANDED,"RSS_EXPANDED"],[le.UPC_A,"UPC_A"],[le.UPC_E,"UPC_E"],[le.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Dm;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Dm||(Dm={}));function e6(t){return Object.values(le).includes(t)}var Cu;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Cu||(Cu={}));var t6=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Cu.SCAN_TYPE_CAMERA,Cu.SCAN_TYPE_FILE],t}(),Tv=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!Om.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,Om.get(e))},t}(),Pm=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),Vh;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Vh||(Vh={}));var n6=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Vh.UNKWOWN_ERROR}},t}(),r6=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function Qr(t){return typeof t>"u"||t===null}var xo=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),Nv=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var i=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var o=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(o),f=Object.keys(e),p=0,w=f;p<w.length;p++){var m=w[p];if(l.has(m))return n.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},t}(),Hh={exports:{}};(function(t,e){(function(n,i){i(e)})(da,function(n){function i(C){return C==null}var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,r){C.__proto__=r}||function(C,r){for(var s in r)r.hasOwnProperty(s)&&(C[s]=r[s])};function l(C,r){o(C,r);function s(){this.constructor=C}C.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}function f(C,r){var s=Object.setPrototypeOf;s?s(C,r):C.__proto__=r}function p(C,r){r===void 0&&(r=C.constructor);var s=Error.captureStackTrace;s&&s(C,r)}var w=function(C){l(r,C);function r(s){var a=this.constructor,c=C.call(this,s)||this;return Object.defineProperty(c,"name",{value:a.name,enumerable:!1}),f(c,a.prototype),p(c),c}return r}(Error);class m extends w{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}m.kind="Exception";class E extends m{}E.kind="ArgumentException";class v extends m{}v.kind="IllegalArgumentException";class S{constructor(r){if(this.binarizer=r,r===null)throw new v("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,s){return this.binarizer.getBlackRow(r,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,s,a,c){const u=this.binarizer.getLuminanceSource().crop(r,s,a,c);return new S(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new S(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new S(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class R extends m{static getChecksumInstance(){return new R}}R.kind="ChecksumException";class M{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class B{static arraycopy(r,s,a,c,u){for(;u--;)a[c++]=r[s++]}static currentTimeMillis(){return Date.now()}}class K extends m{}K.kind="IndexOutOfBoundsException";class O extends K{constructor(r=void 0,s=void 0){super(s),this.index=r,this.message=s}}O.kind="ArrayIndexOutOfBoundsException";class k{static fill(r,s){for(let a=0,c=r.length;a<c;a++)r[a]=s}static fillWithin(r,s,a,c){k.rangeCheck(r.length,s,a);for(let u=s;u<a;u++)r[u]=c}static rangeCheck(r,s,a){if(s>a)throw new v("fromIndex("+s+") > toIndex("+a+")");if(s<0)throw new O(s);if(a>r)throw new O(a)}static asList(...r){return r}static create(r,s,a){return Array.from({length:r}).map(u=>Array.from({length:s}).fill(a))}static createInt32Array(r,s,a){return Array.from({length:r}).map(u=>Int32Array.from({length:s}).fill(a))}static equals(r,s){if(!r||!s||!r.length||!s.length||r.length!==s.length)return!1;for(let a=0,c=r.length;a<c;a++)if(r[a]!==s[a])return!1;return!0}static hashCode(r){if(r===null)return 0;let s=1;for(const a of r)s=31*s+a;return s}static fillUint8Array(r,s){for(let a=0;a!==r.length;a++)r[a]=s}static copyOf(r,s){return r.slice(0,s)}static copyOfUint8Array(r,s){if(r.length<=s){const a=new Uint8Array(s);return a.set(r),a}return r.slice(0,s)}static copyOfRange(r,s,a){const c=a-s,u=new Int32Array(c);return B.arraycopy(r,s,u,0,c),u}static binarySearch(r,s,a){a===void 0&&(a=k.numberComparator);let c=0,u=r.length-1;for(;c<=u;){const d=u+c>>1,h=a(s,r[d]);if(h>0)c=d+1;else if(h<0)u=d-1;else return d}return-c-1}static numberComparator(r,s){return r-s}}class N{static numberOfTrailingZeros(r){let s;if(r===0)return 32;let a=31;return s=r<<16,s!==0&&(a-=16,r=s),s=r<<8,s!==0&&(a-=8,r=s),s=r<<4,s!==0&&(a-=4,r=s),s=r<<2,s!==0&&(a-=2,r=s),a-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let s=1;return r>>>16||(s+=16,r<<=16),r>>>24||(s+=8,r<<=8),r>>>28||(s+=4,r<<=4),r>>>30||(s+=2,r<<=2),s-=r>>>31,s}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,s){return Math.trunc(r/s)}static parseInt(r,s=void 0){return parseInt(r,s)}}N.MIN_VALUE_32_BITS=-2147483648,N.MAX_VALUE=Number.MAX_SAFE_INTEGER;class j{constructor(r,s){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,s==null?this.bits=j.makeArray(r):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const s=j.makeArray(r);B.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const s=this.size;if(r>=s)return s;const a=this.bits;let c=Math.floor(r/32),u=a[c];u&=~((1<<(r&31))-1);const d=a.length;for(;u===0;){if(++c===d)return s;u=a[c]}const h=c*32+N.numberOfTrailingZeros(u);return h>s?s:h}getNextUnset(r){const s=this.size;if(r>=s)return s;const a=this.bits;let c=Math.floor(r/32),u=~a[c];u&=~((1<<(r&31))-1);const d=a.length;for(;u===0;){if(++c===d)return s;u=~a[c]}const h=c*32+N.numberOfTrailingZeros(u);return h>s?s:h}setBulk(r,s){this.bits[Math.floor(r/32)]=s}setRange(r,s){if(s<r||r<0||s>this.size)throw new v;if(s===r)return;s--;const a=Math.floor(r/32),c=Math.floor(s/32),u=this.bits;for(let d=a;d<=c;d++){const h=d>a?0:r&31,x=(2<<(d<c?31:s&31))-(1<<h);u[d]|=x}}clear(){const r=this.bits.length,s=this.bits;for(let a=0;a<r;a++)s[a]=0}isRange(r,s,a){if(s<r||r<0||s>this.size)throw new v;if(s===r)return!0;s--;const c=Math.floor(r/32),u=Math.floor(s/32),d=this.bits;for(let h=c;h<=u;h++){const g=h>c?0:r&31,y=(2<<(h<u?31:s&31))-(1<<g)&4294967295;if((d[h]&y)!==(a?y:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,s){if(s<0||s>32)throw new v("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let a=s;a>0;a--)this.appendBit((r>>a-1&1)===1)}appendBitArray(r){const s=r.size;this.ensureCapacity(this.size+s);for(let a=0;a<s;a++)this.appendBit(r.get(a))}xor(r){if(this.size!==r.size)throw new v("Sizes don't match");const s=this.bits;for(let a=0,c=s.length;a<c;a++)s[a]^=r.bits[a]}toBytes(r,s,a,c){for(let u=0;u<c;u++){let d=0;for(let h=0;h<8;h++)this.get(r)&&(d|=1<<7-h),r++;s[a+u]=d}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),a=s+1,c=this.bits;for(let u=0;u<a;u++){let d=c[u];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,r[s-u]=d}if(this.size!==a*32){const u=a*32-this.size;let d=r[0]>>>u;for(let h=1;h<a;h++){const g=r[h];d|=g<<32-u,r[h-1]=d,d=g>>>u}r[a-1]=d}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof j))return!1;const s=r;return this.size===s.size&&k.equals(this.bits,s.bits)}hashCode(){return 31*this.size+k.hashCode(this.bits)}toString(){let r="";for(let s=0,a=this.size;s<a;s++)s&7||(r+=" "),r+=this.get(s)?"X":".";return r}clone(){return new j(this.size,this.bits.slice())}}var te;(function(C){C[C.OTHER=0]="OTHER",C[C.PURE_BARCODE=1]="PURE_BARCODE",C[C.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",C[C.TRY_HARDER=3]="TRY_HARDER",C[C.CHARACTER_SET=4]="CHARACTER_SET",C[C.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",C[C.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",C[C.ASSUME_GS1=7]="ASSUME_GS1",C[C.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",C[C.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",C[C.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(te||(te={}));var Z=te;class U extends m{static getFormatInstance(){return new U}}U.kind="FormatException";var J;(function(C){C[C.Cp437=0]="Cp437",C[C.ISO8859_1=1]="ISO8859_1",C[C.ISO8859_2=2]="ISO8859_2",C[C.ISO8859_3=3]="ISO8859_3",C[C.ISO8859_4=4]="ISO8859_4",C[C.ISO8859_5=5]="ISO8859_5",C[C.ISO8859_6=6]="ISO8859_6",C[C.ISO8859_7=7]="ISO8859_7",C[C.ISO8859_8=8]="ISO8859_8",C[C.ISO8859_9=9]="ISO8859_9",C[C.ISO8859_10=10]="ISO8859_10",C[C.ISO8859_11=11]="ISO8859_11",C[C.ISO8859_13=12]="ISO8859_13",C[C.ISO8859_14=13]="ISO8859_14",C[C.ISO8859_15=14]="ISO8859_15",C[C.ISO8859_16=15]="ISO8859_16",C[C.SJIS=16]="SJIS",C[C.Cp1250=17]="Cp1250",C[C.Cp1251=18]="Cp1251",C[C.Cp1252=19]="Cp1252",C[C.Cp1256=20]="Cp1256",C[C.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",C[C.UTF8=22]="UTF8",C[C.ASCII=23]="ASCII",C[C.Big5=24]="Big5",C[C.GB18030=25]="GB18030",C[C.EUC_KR=26]="EUC_KR"})(J||(J={}));class ${constructor(r,s,a,...c){this.valueIdentifier=r,this.name=a,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=c,$.VALUE_IDENTIFIER_TO_ECI.set(r,this),$.NAME_TO_ECI.set(a,this);const u=this.values;for(let d=0,h=u.length;d!==h;d++){const g=u[d];$.VALUES_TO_ECI.set(g,this)}for(const d of c)$.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new U("incorect value");const s=$.VALUES_TO_ECI.get(r);if(s===void 0)throw new U("incorect value");return s}static getCharacterSetECIByName(r){const s=$.NAME_TO_ECI.get(r);if(s===void 0)throw new U("incorect value");return s}equals(r){if(!(r instanceof $))return!1;const s=r;return this.getName()===s.getName()}}$.VALUE_IDENTIFIER_TO_ECI=new Map,$.VALUES_TO_ECI=new Map,$.NAME_TO_ECI=new Map,$.Cp437=new $(J.Cp437,Int32Array.from([0,2]),"Cp437"),$.ISO8859_1=new $(J.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),$.ISO8859_2=new $(J.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),$.ISO8859_3=new $(J.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),$.ISO8859_4=new $(J.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),$.ISO8859_5=new $(J.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),$.ISO8859_6=new $(J.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),$.ISO8859_7=new $(J.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),$.ISO8859_8=new $(J.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),$.ISO8859_9=new $(J.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),$.ISO8859_10=new $(J.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),$.ISO8859_11=new $(J.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),$.ISO8859_13=new $(J.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),$.ISO8859_14=new $(J.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),$.ISO8859_15=new $(J.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),$.ISO8859_16=new $(J.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),$.SJIS=new $(J.SJIS,20,"SJIS","Shift_JIS"),$.Cp1250=new $(J.Cp1250,21,"Cp1250","windows-1250"),$.Cp1251=new $(J.Cp1251,22,"Cp1251","windows-1251"),$.Cp1252=new $(J.Cp1252,23,"Cp1252","windows-1252"),$.Cp1256=new $(J.Cp1256,24,"Cp1256","windows-1256"),$.UnicodeBigUnmarked=new $(J.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),$.UTF8=new $(J.UTF8,26,"UTF8","UTF-8"),$.ASCII=new $(J.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),$.Big5=new $(J.Big5,28,"Big5"),$.GB18030=new $(J.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),$.EUC_KR=new $(J.EUC_KR,30,"EUC_KR","EUC-KR");class Se extends m{}Se.kind="UnsupportedOperationException";class Qe{static decode(r,s){const a=this.encodingName(s);return this.customDecoder?this.customDecoder(r,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(r,a):new TextDecoder(a).decode(r)}static shouldDecodeOnFallback(r){return!Qe.isBrowser()&&r==="ISO-8859-1"}static encode(r,s){const a=this.encodingName(s);return this.customEncoder?this.customEncoder(r,a):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof $?r:$.getCharacterSetECIByName(r)}static decodeFallback(r,s){const a=this.encodingCharacterSet(s);if(Qe.isDecodeFallbackSupported(a)){let c="";for(let u=0,d=r.length;u<d;u++){let h=r[u].toString(16);h.length<2&&(h="0"+h),c+="%"+h}return decodeURIComponent(c)}if(a.equals($.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new Se(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals($.UTF8)||r.equals($.ISO8859_1)||r.equals($.ASCII)}static encodeFallback(r){const a=btoa(unescape(encodeURIComponent(r))).split(""),c=[];for(let u=0;u<a.length;u++)c.push(a[u].charCodeAt(0));return new Uint8Array(c)}}class ge{static castAsNonUtf8Char(r,s=null){const a=s?s.getName():this.ISO88591;return Qe.decode(new Uint8Array([r]),a)}static guessEncoding(r,s){if(s!=null&&s.get(Z.CHARACTER_SET)!==void 0)return s.get(Z.CHARACTER_SET).toString();const a=r.length;let c=!0,u=!0,d=!0,h=0,g=0,x=0,y=0,_=0,A=0,T=0,D=0,P=0,L=0,W=0;const ne=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let re=0;re<a&&(c||u||d);re++){const Q=r[re]&255;d&&(h>0?Q&128?h--:d=!1:Q&128&&(Q&64?(h++,Q&32?(h++,Q&16?(h++,Q&8?d=!1:y++):x++):g++):d=!1)),c&&(Q>127&&Q<160?c=!1:Q>159&&(Q<192||Q===215||Q===247)&&W++),u&&(_>0?Q<64||Q===127||Q>252?u=!1:_--:Q===128||Q===160||Q>239?u=!1:Q>160&&Q<224?(A++,D=0,T++,T>P&&(P=T)):Q>127?(_++,T=0,D++,D>L&&(L=D)):(T=0,D=0))}return d&&h>0&&(d=!1),u&&_>0&&(u=!1),d&&(ne||g+x+y>0)?ge.UTF8:u&&(ge.ASSUME_SHIFT_JIS||P>=3||L>=3)?ge.SHIFT_JIS:c&&u?P===2&&A===2||W*10>=a?ge.SHIFT_JIS:ge.ISO88591:c?ge.ISO88591:u?ge.SHIFT_JIS:d?ge.UTF8:ge.PLATFORM_DEFAULT_ENCODING}static format(r,...s){let a=-1;function c(d,h,g,x,y,_){if(d==="%%")return"%";if(s[++a]===void 0)return;d=x?parseInt(x.substr(1)):void 0;let A=y?parseInt(y.substr(1)):void 0,T;switch(_){case"s":T=s[a];break;case"c":T=s[a][0];break;case"f":T=parseFloat(s[a]).toFixed(d);break;case"p":T=parseFloat(s[a]).toPrecision(d);break;case"e":T=parseFloat(s[a]).toExponential(d);break;case"x":T=parseInt(s[a]).toString(A||16);break;case"d":T=parseFloat(parseInt(s[a],A||10).toPrecision(d)).toFixed(0);break}T=typeof T=="object"?JSON.stringify(T):(+T).toString(A);let D=parseInt(g),P=g&&g[0]+""=="0"?"0":" ";for(;T.length<D;)T=h!==void 0?T+P:P+T;return T}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,c)}static getBytes(r,s){return Qe.encode(r,s)}static getCharCode(r,s=0){return r.charCodeAt(s)}static getCharAt(r){return String.fromCharCode(r)}}ge.SHIFT_JIS=$.SJIS.getName(),ge.GB2312="GB2312",ge.ISO88591=$.ISO8859_1.getName(),ge.EUC_JP="EUC_JP",ge.UTF8=$.UTF8.getName(),ge.PLATFORM_DEFAULT_ENCODING=ge.UTF8,ge.ASSUME_SHIFT_JIS=!1;class ke{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=ge.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,s,a){for(let c=s;s<s+a;c++)this.append(r[c]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+1)}substring(r,s){return this.value.substring(r,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+s.length)}}class Ie{constructor(r,s,a,c){if(this.width=r,this.height=s,this.rowSize=a,this.bits=c,s==null&&(s=r),this.height=s,r<1||s<1)throw new v("Both dimensions must be greater than 0");a==null&&(a=Math.floor((r+31)/32)),this.rowSize=a,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const s=r.length,a=r[0].length,c=new Ie(a,s);for(let u=0;u<s;u++){const d=r[u];for(let h=0;h<a;h++)d[h]&&c.set(h,u)}return c}static parseFromString(r,s,a){if(r===null)throw new v("stringRepresentation cannot be null");const c=new Array(r.length);let u=0,d=0,h=-1,g=0,x=0;for(;x<r.length;)if(r.charAt(x)===`
`||r.charAt(x)==="\r"){if(u>d){if(h===-1)h=u-d;else if(u-d!==h)throw new v("row lengths do not match");d=u,g++}x++}else if(r.substring(x,x+s.length)===s)x+=s.length,c[u]=!0,u++;else if(r.substring(x,x+a.length)===a)x+=a.length,c[u]=!1,u++;else throw new v("illegal character encountered: "+r.substring(x));if(u>d){if(h===-1)h=u-d;else if(u-d!==h)throw new v("row lengths do not match");g++}const y=new Ie(h,g);for(let _=0;_<u;_++)c[_]&&y.set(Math.floor(_%h),Math.floor(_/h));return y}get(r,s){const a=s*this.rowSize+Math.floor(r/32);return(this.bits[a]>>>(r&31)&1)!==0}set(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]|=1<<(r&31)&4294967295}unset(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]&=~(1<<(r&31)&4294967295)}flip(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new v("input matrix dimensions do not match");const s=new j(Math.floor(this.width/32)+1),a=this.rowSize,c=this.bits;for(let u=0,d=this.height;u<d;u++){const h=u*a,g=r.getRow(u,s).getBitArray();for(let x=0;x<a;x++)c[h+x]^=g[x]}}clear(){const r=this.bits,s=r.length;for(let a=0;a<s;a++)r[a]=0}setRegion(r,s,a,c){if(s<0||r<0)throw new v("Left and top must be nonnegative");if(c<1||a<1)throw new v("Height and width must be at least 1");const u=r+a,d=s+c;if(d>this.height||u>this.width)throw new v("The region must fit inside the matrix");const h=this.rowSize,g=this.bits;for(let x=s;x<d;x++){const y=x*h;for(let _=r;_<u;_++)g[y+Math.floor(_/32)]|=1<<(_&31)&4294967295}}getRow(r,s){s==null||s.getSize()<this.width?s=new j(this.width):s.clear();const a=this.rowSize,c=this.bits,u=r*a;for(let d=0;d<a;d++)s.setBulk(d*32,c[u+d]);return s}setRow(r,s){B.arraycopy(s.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),s=this.getHeight();let a=new j(r),c=new j(r);for(let u=0,d=Math.floor((s+1)/2);u<d;u++)a=this.getRow(u,a),c=this.getRow(s-1-u,c),a.reverse(),c.reverse(),this.setRow(u,c),this.setRow(s-1-u,a)}getEnclosingRectangle(){const r=this.width,s=this.height,a=this.rowSize,c=this.bits;let u=r,d=s,h=-1,g=-1;for(let x=0;x<s;x++)for(let y=0;y<a;y++){const _=c[x*a+y];if(_!==0){if(x<d&&(d=x),x>g&&(g=x),y*32<u){let A=0;for(;!(_<<31-A&4294967295);)A++;y*32+A<u&&(u=y*32+A)}if(y*32+31>h){let A=31;for(;!(_>>>A);)A--;y*32+A>h&&(h=y*32+A)}}}return h<u||g<d?null:Int32Array.from([u,d,h-u+1,g-d+1])}getTopLeftOnBit(){const r=this.rowSize,s=this.bits;let a=0;for(;a<s.length&&s[a]===0;)a++;if(a===s.length)return null;const c=a/r;let u=a%r*32;const d=s[a];let h=0;for(;!(d<<31-h&4294967295);)h++;return u+=h,Int32Array.from([u,c])}getBottomRightOnBit(){const r=this.rowSize,s=this.bits;let a=s.length-1;for(;a>=0&&s[a]===0;)a--;if(a<0)return null;const c=Math.floor(a/r);let u=Math.floor(a%r)*32;const d=s[a];let h=31;for(;!(d>>>h);)h--;return u+=h,Int32Array.from([u,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof Ie))return!1;const s=r;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&k.equals(this.bits,s.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+k.hashCode(this.bits),r}toString(r="X ",s="  ",a=`
`){return this.buildToString(r,s,a)}buildToString(r,s,a){let c=new ke;for(let u=0,d=this.height;u<d;u++){for(let h=0,g=this.width;h<g;h++)c.append(this.get(h,u)?r:s);c.append(a)}return c.toString()}clone(){return new Ie(this.width,this.height,this.rowSize,this.bits.slice())}}class V extends m{static getNotFoundInstance(){return new V}}V.kind="NotFoundException";class at extends M{constructor(r){super(r),this.luminances=at.EMPTY,this.buckets=new Int32Array(at.LUMINANCE_BUCKETS)}getBlackRow(r,s){const a=this.getLuminanceSource(),c=a.getWidth();s==null||s.getSize()<c?s=new j(c):s.clear(),this.initArrays(c);const u=a.getRow(r,this.luminances),d=this.buckets;for(let g=0;g<c;g++)d[(u[g]&255)>>at.LUMINANCE_SHIFT]++;const h=at.estimateBlackPoint(d);if(c<3)for(let g=0;g<c;g++)(u[g]&255)<h&&s.set(g);else{let g=u[0]&255,x=u[1]&255;for(let y=1;y<c-1;y++){const _=u[y+1]&255;(x*4-g-_)/2<h&&s.set(y),g=x,x=_}}return s}getBlackMatrix(){const r=this.getLuminanceSource(),s=r.getWidth(),a=r.getHeight(),c=new Ie(s,a);this.initArrays(s);const u=this.buckets;for(let g=1;g<5;g++){const x=Math.floor(a*g/5),y=r.getRow(x,this.luminances),_=Math.floor(s*4/5);for(let A=Math.floor(s/5);A<_;A++){const T=y[A]&255;u[T>>at.LUMINANCE_SHIFT]++}}const d=at.estimateBlackPoint(u),h=r.getMatrix();for(let g=0;g<a;g++){const x=g*s;for(let y=0;y<s;y++)(h[x+y]&255)<d&&c.set(y,g)}return c}createBinarizer(r){return new at(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const s=this.buckets;for(let a=0;a<at.LUMINANCE_BUCKETS;a++)s[a]=0}static estimateBlackPoint(r){const s=r.length;let a=0,c=0,u=0;for(let y=0;y<s;y++)r[y]>u&&(c=y,u=r[y]),r[y]>a&&(a=r[y]);let d=0,h=0;for(let y=0;y<s;y++){const _=y-c,A=r[y]*_*_;A>h&&(d=y,h=A)}if(c>d){const y=c;c=d,d=y}if(d-c<=s/16)throw new V;let g=d-1,x=-1;for(let y=d-1;y>c;y--){const _=y-c,A=_*_*(d-y)*(a-r[y]);A>x&&(g=y,x=A)}return g<<at.LUMINANCE_SHIFT}}at.LUMINANCE_BITS=5,at.LUMINANCE_SHIFT=8-at.LUMINANCE_BITS,at.LUMINANCE_BUCKETS=1<<at.LUMINANCE_BITS,at.EMPTY=Uint8ClampedArray.from([0]);class _e extends at{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),s=r.getWidth(),a=r.getHeight();if(s>=_e.MINIMUM_DIMENSION&&a>=_e.MINIMUM_DIMENSION){const c=r.getMatrix();let u=s>>_e.BLOCK_SIZE_POWER;s&_e.BLOCK_SIZE_MASK&&u++;let d=a>>_e.BLOCK_SIZE_POWER;a&_e.BLOCK_SIZE_MASK&&d++;const h=_e.calculateBlackPoints(c,u,d,s,a),g=new Ie(s,a);_e.calculateThresholdForBlock(c,u,d,s,a,h,g),this.matrix=g}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new _e(r)}static calculateThresholdForBlock(r,s,a,c,u,d,h){const g=u-_e.BLOCK_SIZE,x=c-_e.BLOCK_SIZE;for(let y=0;y<a;y++){let _=y<<_e.BLOCK_SIZE_POWER;_>g&&(_=g);const A=_e.cap(y,2,a-3);for(let T=0;T<s;T++){let D=T<<_e.BLOCK_SIZE_POWER;D>x&&(D=x);const P=_e.cap(T,2,s-3);let L=0;for(let ne=-2;ne<=2;ne++){const re=d[A+ne];L+=re[P-2]+re[P-1]+re[P]+re[P+1]+re[P+2]}const W=L/25;_e.thresholdBlock(r,D,_,W,c,h)}}}static cap(r,s,a){return r<s?s:r>a?a:r}static thresholdBlock(r,s,a,c,u,d){for(let h=0,g=a*u+s;h<_e.BLOCK_SIZE;h++,g+=u)for(let x=0;x<_e.BLOCK_SIZE;x++)(r[g+x]&255)<=c&&d.set(s+x,a+h)}static calculateBlackPoints(r,s,a,c,u){const d=u-_e.BLOCK_SIZE,h=c-_e.BLOCK_SIZE,g=new Array(a);for(let x=0;x<a;x++){g[x]=new Int32Array(s);let y=x<<_e.BLOCK_SIZE_POWER;y>d&&(y=d);for(let _=0;_<s;_++){let A=_<<_e.BLOCK_SIZE_POWER;A>h&&(A=h);let T=0,D=255,P=0;for(let W=0,ne=y*c+A;W<_e.BLOCK_SIZE;W++,ne+=c){for(let re=0;re<_e.BLOCK_SIZE;re++){const Q=r[ne+re]&255;T+=Q,Q<D&&(D=Q),Q>P&&(P=Q)}if(P-D>_e.MIN_DYNAMIC_RANGE)for(W++,ne+=c;W<_e.BLOCK_SIZE;W++,ne+=c)for(let re=0;re<_e.BLOCK_SIZE;re++)T+=r[ne+re]&255}let L=T>>_e.BLOCK_SIZE_POWER*2;if(P-D<=_e.MIN_DYNAMIC_RANGE&&(L=D/2,x>0&&_>0)){const W=(g[x-1][_]+2*g[x][_-1]+g[x-1][_-1])/4;D<W&&(L=W)}g[x][_]=L}}return g}}_e.BLOCK_SIZE_POWER=3,_e.BLOCK_SIZE=1<<_e.BLOCK_SIZE_POWER,_e.BLOCK_SIZE_MASK=_e.BLOCK_SIZE-1,_e.MINIMUM_DIMENSION=_e.BLOCK_SIZE*5,_e.MIN_DYNAMIC_RANGE=24;class se{constructor(r,s){this.width=r,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,s,a,c){throw new Se("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Se("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Se("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let s=new ke;for(let a=0;a<this.height;a++){const c=this.getRow(a,r);for(let u=0;u<this.width;u++){const d=c[u]&255;let h;d<64?h="#":d<128?h="+":d<192?h=".":h=" ",s.append(h)}s.append(`
`)}return s.toString()}}class me extends se{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,s){const a=this.delegate.getRow(r,s),c=this.getWidth();for(let u=0;u<c;u++)a[u]=255-(a[u]&255);return a}getMatrix(){const r=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(s);for(let c=0;c<s;c++)a[c]=255-(r[c]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(r,s,a,c){return new me(this.delegate.crop(r,s,a,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new me(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new me(this.delegate.rotateCounterClockwise45())}}class we extends se{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=we.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const s=r.getContext("2d").getImageData(0,0,r.width,r.height);return we.toGrayscaleBuffer(s.data,r.width,r.height)}static toGrayscaleBuffer(r,s,a){const c=new Uint8ClampedArray(s*a);for(let u=0,d=0,h=r.length;u<h;u+=4,d++){let g;if(r[u+3]===0)g=255;else{const y=r[u],_=r[u+1],A=r[u+2];g=306*y+601*_+117*A+512>>10}c[d]=g}return c}getRow(r,s){if(r<0||r>=this.getHeight())throw new v("Requested row is outside the image: "+r);const a=this.getWidth(),c=r*a;return s===null?s=this.buffer.slice(c,c+a):(s.length<a&&(s=new Uint8ClampedArray(a)),s.set(this.buffer.slice(c,c+a))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,s,a,c){return super.crop(r,s,a,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const s=this.getTempCanvasElement(),a=s.getContext("2d"),c=r*we.DEGREE_TO_RADIANS,u=this.canvas.width,d=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(c))*u+Math.abs(Math.sin(c))*d),g=Math.ceil(Math.abs(Math.sin(c))*u+Math.abs(Math.cos(c))*d);return s.width=h,s.height=g,a.translate(h/2,g/2),a.rotate(c),a.drawImage(this.canvas,u/-2,d/-2),this.buffer=we.makeBufferFromCanvasImageData(s),this}invert(){return new me(this)}}we.DEGREE_TO_RADIANS=Math.PI/180;class G{constructor(r,s,a){this.deviceId=r,this.label=s,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var oe=(globalThis||da||self||window||void 0)&&(globalThis||da||self||window||void 0).__awaiter||function(C,r,s,a){function c(u){return u instanceof s?u:new s(function(d){d(u)})}return new(s||(s=Promise))(function(u,d){function h(y){try{x(a.next(y))}catch(_){d(_)}}function g(y){try{x(a.throw(y))}catch(_){d(_)}}function x(y){y.done?u(y.value):c(y.value).then(h,g)}x((a=a.apply(C,r||[])).next())})};class Xe{constructor(r,s=500,a){this.reader=r,this.timeBetweenScansMillis=s,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return oe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const a of r){const c=a.kind==="video"?"videoinput":a.kind;if(c!=="videoinput")continue;const u=a.deviceId||a.id,d=a.label||`Video device ${s.length+1}`,h=a.groupId,g={deviceId:u,label:d,kind:c,groupId:h};s.push(g)}return s})}getVideoInputDevices(){return oe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new G(s.deviceId,s.label))})}findDeviceById(r){return oe(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(a=>a.deviceId===r):null})}decodeFromInputVideoDevice(r,s){return oe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,s)})}decodeOnceFromVideoDevice(r,s){return oe(this,void 0,void 0,function*(){this.reset();let a;r?a={deviceId:{exact:r}}:a={facingMode:"environment"};const c={video:a};return yield this.decodeOnceFromConstraints(c,s)})}decodeOnceFromConstraints(r,s){return oe(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(a,s)})}decodeOnceFromStream(r,s){return oe(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(r,s);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(r,s,a){return oe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,s,a)})}decodeFromVideoDevice(r,s,a){return oe(this,void 0,void 0,function*(){let c;r?c={deviceId:{exact:r}}:c={facingMode:"environment"};const u={video:c};return yield this.decodeFromConstraints(u,s,a)})}decodeFromConstraints(r,s,a){return oe(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(c,s,a)})}decodeFromStream(r,s,a){return oe(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(r,s);return yield this.decodeContinuously(c,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,s){return oe(this,void 0,void 0,function*(){const a=this.prepareVideoElement(s);return this.addVideoSource(a,r),this.videoElement=a,this.stream=r,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(r){return new Promise((s,a)=>this.playVideoOnLoad(r,()=>s()))}playVideoOnLoad(r,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",s),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return oe(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,s){const a=document.getElementById(r);if(!a)throw new E(`element with id '${r}' not found`);if(a.nodeName.toLowerCase()!==s.toLowerCase())throw new E(`element with id '${r}' must be an ${s} element`);return a}decodeFromImage(r,s){if(!r&&!s)throw new E("either imageElement with a src set or an url must be provided");return s&&!r?this.decodeFromImageUrl(s):this.decodeFromImageElement(r)}decodeFromVideo(r,s){if(!r&&!s)throw new E("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,s,a){if(r===void 0&&s===void 0)throw new E("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrlContinuously(s,a):this.decodeFromVideoElementContinuously(r,a)}decodeFromImageElement(r){if(!r)throw new E("An image element must be provided.");this.reset();const s=this.prepareImageElement(r);this.imageElement=s;let a;return this.isImageLoaded(s)?a=this.decodeOnce(s,!1,!0):a=this._decodeOnLoadImage(s),a}decodeFromVideoElement(r){const s=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(r,s){const a=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(a,s)}_decodeFromVideoElementSetup(r){if(!r)throw new E("A video element must be provided.");this.reset();const s=this.prepareVideoElement(r);return this.videoElement=s,s}decodeFromImageUrl(r){if(!r)throw new E("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const a=this._decodeOnLoadImage(s);return s.src=r,a}decodeFromVideoUrl(r){if(!r)throw new E("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),a=this.decodeFromVideoElement(s);return s.src=r,a}decodeFromVideoUrlContinuously(r,s){if(!r)throw new E("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(a,s);return a.src=r,c}_decodeOnLoadImage(r){return new Promise((s,a)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(s,a),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return oe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,s){return oe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,s)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let s;return typeof r>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(s=r),s}prepareVideoElement(r){let s;return!r&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(s=r),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(r,s=!0,a=!0){this._stopAsyncDecode=!1;const c=(u,d)=>{if(this._stopAsyncDecode){d(new V("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(r);u(h)}catch(h){const g=s&&h instanceof V,y=(h instanceof R||h instanceof U)&&a;if(g||y)return setTimeout(c,this._timeBetweenDecodingAttempts,u,d);d(h)}};return new Promise((u,d)=>c(u,d))}decodeContinuously(r,s){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(r);s(c,null),setTimeout(a,this.timeBetweenScansMillis)}catch(c){s(null,c);const u=c instanceof R||c instanceof U,d=c instanceof V;(u||d)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(r){const s=this.createBinaryBitmap(r);return this.decodeBitmap(s)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,s,a){s||(s={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(r,s,a=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const s=this.getCaptureCanvas(r),a=new we(s),c=new _e(a);return new S(c)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const s=this.createCaptureCanvas(r);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let a,c;return typeof r<"u"&&(r instanceof HTMLVideoElement?(a=r.videoWidth,c=r.videoHeight):r instanceof HTMLImageElement&&(a=r.naturalWidth||r.width,c=r.naturalHeight||r.height)),s.style.width=a+"px",s.style.height=c+"px",s.width=a,s.height=c,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,s){try{r.srcObject=s}catch{r.src=URL.createObjectURL(s)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class ve{constructor(r,s,a=s==null?0:8*s.length,c,u,d=B.currentTimeMillis()){this.text=r,this.rawBytes=s,this.numBits=a,this.resultPoints=c,this.format=u,this.timestamp=d,this.text=r,this.rawBytes=s,a==null?this.numBits=s==null?0:8*s.length:this.numBits=a,this.resultPoints=c,this.format=u,this.resultMetadata=null,d==null?this.timestamp=B.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,s)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const s=this.resultPoints;if(s===null)this.resultPoints=r;else if(r!==null&&r.length>0){const a=new Array(s.length+r.length);B.arraycopy(s,0,a,0,s.length),B.arraycopy(r,0,a,s.length,r.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Et;(function(C){C[C.AZTEC=0]="AZTEC",C[C.CODABAR=1]="CODABAR",C[C.CODE_39=2]="CODE_39",C[C.CODE_93=3]="CODE_93",C[C.CODE_128=4]="CODE_128",C[C.DATA_MATRIX=5]="DATA_MATRIX",C[C.EAN_8=6]="EAN_8",C[C.EAN_13=7]="EAN_13",C[C.ITF=8]="ITF",C[C.MAXICODE=9]="MAXICODE",C[C.PDF_417=10]="PDF_417",C[C.QR_CODE=11]="QR_CODE",C[C.RSS_14=12]="RSS_14",C[C.RSS_EXPANDED=13]="RSS_EXPANDED",C[C.UPC_A=14]="UPC_A",C[C.UPC_E=15]="UPC_E",C[C.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Et||(Et={}));var ce=Et,_n;(function(C){C[C.OTHER=0]="OTHER",C[C.ORIENTATION=1]="ORIENTATION",C[C.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",C[C.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",C[C.ISSUE_NUMBER=4]="ISSUE_NUMBER",C[C.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",C[C.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",C[C.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",C[C.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",C[C.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",C[C.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(_n||(_n={}));var Oe=_n;class Pr{constructor(r,s,a,c,u=-1,d=-1){this.rawBytes=r,this.text=s,this.byteSegments=a,this.ecLevel=c,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=d,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class vr{exp(r){return this.expTable[r]}log(r){if(r===0)throw new v;return this.logTable[r]}static addOrSubtract(r,s){return r^s}}class Mt{constructor(r,s){if(s.length===0)throw new v;this.field=r;const a=s.length;if(a>1&&s[0]===0){let c=1;for(;c<a&&s[c]===0;)c++;c===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-c),B.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const s=this.coefficients;let a;if(r===1){a=0;for(let d=0,h=s.length;d!==h;d++){const g=s[d];a=vr.addOrSubtract(a,g)}return a}a=s[0];const c=s.length,u=this.field;for(let d=1;d<c;d++)a=vr.addOrSubtract(u.multiply(r,a),s[d]);return a}addOrSubtract(r){if(!this.field.equals(r.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,a=r.coefficients;if(s.length>a.length){const d=s;s=a,a=d}let c=new Int32Array(a.length);const u=a.length-s.length;B.arraycopy(a,0,c,0,u);for(let d=u;d<a.length;d++)c[d]=vr.addOrSubtract(s[d-u],a[d]);return new Mt(this.field,c)}multiply(r){if(!this.field.equals(r.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const s=this.coefficients,a=s.length,c=r.coefficients,u=c.length,d=new Int32Array(a+u-1),h=this.field;for(let g=0;g<a;g++){const x=s[g];for(let y=0;y<u;y++)d[g+y]=vr.addOrSubtract(d[g+y],h.multiply(x,c[y]))}return new Mt(h,d)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const s=this.coefficients.length,a=this.field,c=new Int32Array(s),u=this.coefficients;for(let d=0;d<s;d++)c[d]=a.multiply(u[d],r);return new Mt(a,c)}multiplyByMonomial(r,s){if(r<0)throw new v;if(s===0)return this.field.getZero();const a=this.coefficients,c=a.length,u=new Int32Array(c+r),d=this.field;for(let h=0;h<c;h++)u[h]=d.multiply(a[h],s);return new Mt(d,u)}divide(r){if(!this.field.equals(r.field))throw new v("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new v("Divide by 0");const s=this.field;let a=s.getZero(),c=this;const u=r.getCoefficient(r.getDegree()),d=s.inverse(u);for(;c.getDegree()>=r.getDegree()&&!c.isZero();){const h=c.getDegree()-r.getDegree(),g=s.multiply(c.getCoefficient(c.getDegree()),d),x=r.multiplyByMonomial(h,g),y=s.buildMonomial(h,g);a=a.addOrSubtract(y),c=c.addOrSubtract(x)}return[a,c]}toString(){let r="";for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);if(a!==0){if(a<0?(r+=" - ",a=-a):r.length>0&&(r+=" + "),s===0||a!==1){const c=this.field.log(a);c===0?r+="1":c===1?r+="a":(r+="a^",r+=c)}s!==0&&(s===1?r+="x":(r+="x^",r+=s))}}return r}}class Vs extends m{}Vs.kind="ArithmeticException";class ze extends vr{constructor(r,s,a){super(),this.primitive=r,this.size=s,this.generatorBase=a;const c=new Int32Array(s);let u=1;for(let h=0;h<s;h++)c[h]=u,u*=2,u>=s&&(u^=r,u&=s-1);this.expTable=c;const d=new Int32Array(s);for(let h=0;h<s-1;h++)d[c[h]]=h;this.logTable=d,this.zero=new Mt(this,Int32Array.from([0])),this.one=new Mt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new v;if(s===0)return this.zero;const a=new Int32Array(r+1);return a[0]=s,new Mt(this,a)}inverse(r){if(r===0)throw new Vs;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+N.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}ze.AZTEC_DATA_12=new ze(4201,4096,1),ze.AZTEC_DATA_10=new ze(1033,1024,1),ze.AZTEC_DATA_6=new ze(67,64,1),ze.AZTEC_PARAM=new ze(19,16,1),ze.QR_CODE_FIELD_256=new ze(285,256,0),ze.DATA_MATRIX_FIELD_256=new ze(301,256,1),ze.AZTEC_DATA_8=ze.DATA_MATRIX_FIELD_256,ze.MAXICODE_FIELD_64=ze.AZTEC_DATA_6;class Zr extends m{}Zr.kind="ReedSolomonException";class ir extends m{}ir.kind="IllegalStateException";class wi{constructor(r){this.field=r}decode(r,s){const a=this.field,c=new Mt(a,r),u=new Int32Array(s);let d=!0;for(let T=0;T<s;T++){const D=c.evaluateAt(a.exp(T+a.getGeneratorBase()));u[u.length-1-T]=D,D!==0&&(d=!1)}if(d)return;const h=new Mt(a,u),g=this.runEuclideanAlgorithm(a.buildMonomial(s,1),h,s),x=g[0],y=g[1],_=this.findErrorLocations(x),A=this.findErrorMagnitudes(y,_);for(let T=0;T<_.length;T++){const D=r.length-1-a.log(_[T]);if(D<0)throw new Zr("Bad error location");r[D]=ze.addOrSubtract(r[D],A[T])}}runEuclideanAlgorithm(r,s,a){if(r.getDegree()<s.getDegree()){const T=r;r=s,s=T}const c=this.field;let u=r,d=s,h=c.getZero(),g=c.getOne();for(;d.getDegree()>=(a/2|0);){let T=u,D=h;if(u=d,h=g,u.isZero())throw new Zr("r_{i-1} was zero");d=T;let P=c.getZero();const L=u.getCoefficient(u.getDegree()),W=c.inverse(L);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){const ne=d.getDegree()-u.getDegree(),re=c.multiply(d.getCoefficient(d.getDegree()),W);P=P.addOrSubtract(c.buildMonomial(ne,re)),d=d.addOrSubtract(u.multiplyByMonomial(ne,re))}if(g=P.multiply(h).addOrSubtract(D),d.getDegree()>=u.getDegree())throw new ir("Division algorithm failed to reduce polynomial?")}const x=g.getCoefficient(0);if(x===0)throw new Zr("sigmaTilde(0) was zero");const y=c.inverse(x),_=g.multiplyScalar(y),A=d.multiplyScalar(y);return[_,A]}findErrorLocations(r){const s=r.getDegree();if(s===1)return Int32Array.from([r.getCoefficient(1)]);const a=new Int32Array(s);let c=0;const u=this.field;for(let d=1;d<u.getSize()&&c<s;d++)r.evaluateAt(d)===0&&(a[c]=u.inverse(d),c++);if(c!==s)throw new Zr("Error locator degree does not match number of roots");return a}findErrorMagnitudes(r,s){const a=s.length,c=new Int32Array(a),u=this.field;for(let d=0;d<a;d++){const h=u.inverse(s[d]);let g=1;for(let x=0;x<a;x++)if(d!==x){const y=u.multiply(s[x],h),_=y&1?y&-2:y|1;g=u.multiply(g,_)}c[d]=u.multiply(r.evaluateAt(h),u.inverse(g)),u.getGeneratorBase()!==0&&(c[d]=u.multiply(c[d],h))}return c}}var Vt;(function(C){C[C.UPPER=0]="UPPER",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.DIGIT=3]="DIGIT",C[C.PUNCT=4]="PUNCT",C[C.BINARY=5]="BINARY"})(Vt||(Vt={}));class rt{decode(r){this.ddata=r;let s=r.getBits(),a=this.extractBits(s),c=this.correctBits(a),u=rt.convertBoolArrayToByteArray(c),d=rt.getEncodedData(c),h=new Pr(u,d,null,null);return h.setNumBits(c.length),h}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let s=r.length,a=Vt.UPPER,c=Vt.UPPER,u="",d=0;for(;d<s;)if(c===Vt.BINARY){if(s-d<5)break;let h=rt.readCode(r,d,5);if(d+=5,h===0){if(s-d<11)break;h=rt.readCode(r,d,11)+31,d+=11}for(let g=0;g<h;g++){if(s-d<8){d=s;break}const x=rt.readCode(r,d,8);u+=ge.castAsNonUtf8Char(x),d+=8}c=a}else{let h=c===Vt.DIGIT?4:5;if(s-d<h)break;let g=rt.readCode(r,d,h);d+=h;let x=rt.getCharacter(c,g);x.startsWith("CTRL_")?(a=c,c=rt.getTable(x.charAt(5)),x.charAt(6)==="L"&&(a=c)):(u+=x,c=a)}return u}static getTable(r){switch(r){case"L":return Vt.LOWER;case"P":return Vt.PUNCT;case"M":return Vt.MIXED;case"D":return Vt.DIGIT;case"B":return Vt.BINARY;case"U":default:return Vt.UPPER}}static getCharacter(r,s){switch(r){case Vt.UPPER:return rt.UPPER_TABLE[s];case Vt.LOWER:return rt.LOWER_TABLE[s];case Vt.MIXED:return rt.MIXED_TABLE[s];case Vt.PUNCT:return rt.PUNCT_TABLE[s];case Vt.DIGIT:return rt.DIGIT_TABLE[s];default:throw new ir("Bad table")}}correctBits(r){let s,a;this.ddata.getNbLayers()<=2?(a=6,s=ze.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,s=ze.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,s=ze.AZTEC_DATA_10):(a=12,s=ze.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),u=r.length/a;if(u<c)throw new U;let d=r.length%a,h=new Int32Array(u);for(let A=0;A<u;A++,d+=a)h[A]=rt.readCode(r,d,a);try{new wi(s).decode(h,u-c)}catch(A){throw new U(A)}let g=(1<<a)-1,x=0;for(let A=0;A<c;A++){let T=h[A];if(T===0||T===g)throw new U;(T===1||T===g-1)&&x++}let y=new Array(c*a-x),_=0;for(let A=0;A<c;A++){let T=h[A];if(T===1||T===g-1)y.fill(T>1,_,_+a-1),_+=a-1;else for(let D=a-1;D>=0;--D)y[_++]=(T&1<<D)!==0}return y}extractBits(r){let s=this.ddata.isCompact(),a=this.ddata.getNbLayers(),c=(s?11:14)+a*4,u=new Int32Array(c),d=new Array(this.totalBitsInLayer(a,s));if(s)for(let h=0;h<u.length;h++)u[h]=h;else{let h=c+1+2*N.truncDivision(N.truncDivision(c,2)-1,15),g=c/2,x=N.truncDivision(h,2);for(let y=0;y<g;y++){let _=y+N.truncDivision(y,15);u[g-y-1]=x-_-1,u[g+y]=x+_+1}}for(let h=0,g=0;h<a;h++){let x=(a-h)*4+(s?9:12),y=h*2,_=c-1-y;for(let A=0;A<x;A++){let T=A*2;for(let D=0;D<2;D++)d[g+T+D]=r.get(u[y+D],u[y+A]),d[g+2*x+T+D]=r.get(u[y+A],u[_-D]),d[g+4*x+T+D]=r.get(u[_-D],u[_-A]),d[g+6*x+T+D]=r.get(u[_-A],u[y+D])}g+=x*8}return d}static readCode(r,s,a){let c=0;for(let u=s;u<s+a;u++)c<<=1,r[u]&&(c|=1);return c}static readByte(r,s){let a=r.length-s;return a>=8?rt.readCode(r,s,8):rt.readCode(r,s,a)<<8-a}static convertBoolArrayToByteArray(r){let s=new Uint8Array((r.length+7)/8);for(let a=0;a<s.length;a++)s[a]=rt.readByte(r,8*a);return s}totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}rt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],rt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],rt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],rt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],rt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class je{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,s,a,c){const u=r-a,d=s-c;return Math.sqrt(u*u+d*d)}static sum(r){let s=0;for(let a=0,c=r.length;a!==c;a++){const u=r[a];s+=u}return s}}class Hs{static floatToIntBits(r){return r}}Hs.MAX_VALUE=Number.MAX_SAFE_INTEGER;class fe{constructor(r,s){this.x=r,this.y=s}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof fe){const s=r;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*Hs.floatToIntBits(this.x)+Hs.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const s=this.distance(r[0],r[1]),a=this.distance(r[1],r[2]),c=this.distance(r[0],r[2]);let u,d,h;if(a>=s&&a>=c?(d=r[0],u=r[1],h=r[2]):c>=a&&c>=s?(d=r[1],u=r[0],h=r[2]):(d=r[2],u=r[0],h=r[1]),this.crossProductZ(u,d,h)<0){const g=u;u=h,h=g}r[0]=u,r[1]=d,r[2]=h}static distance(r,s){return je.distance(r.x,r.y,s.x,s.y)}static crossProductZ(r,s,a){const c=s.x,u=s.y;return(a.x-c)*(r.y-u)-(a.y-u)*(r.x-c)}}class rs{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class zl extends rs{constructor(r,s,a,c,u){super(r,s),this.compact=a,this.nbDatablocks=c,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Cr{constructor(r,s,a,c){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),s==null&&(s=Cr.INIT_SIZE),a==null&&(a=r.getWidth()/2|0),c==null&&(c=r.getHeight()/2|0);const u=s/2|0;if(this.leftInit=a-u,this.rightInit=a+u,this.upInit=c-u,this.downInit=c+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new V}detect(){let r=this.leftInit,s=this.rightInit,a=this.upInit,c=this.downInit,u=!1,d=!0,h=!1,g=!1,x=!1,y=!1,_=!1;const A=this.width,T=this.height;for(;d;){d=!1;let D=!0;for(;(D||!g)&&s<A;)D=this.containsBlackPoint(a,c,s,!1),D?(s++,d=!0,g=!0):g||s++;if(s>=A){u=!0;break}let P=!0;for(;(P||!x)&&c<T;)P=this.containsBlackPoint(r,s,c,!0),P?(c++,d=!0,x=!0):x||c++;if(c>=T){u=!0;break}let L=!0;for(;(L||!y)&&r>=0;)L=this.containsBlackPoint(a,c,r,!1),L?(r--,d=!0,y=!0):y||r--;if(r<0){u=!0;break}let W=!0;for(;(W||!_)&&a>=0;)W=this.containsBlackPoint(r,s,a,!0),W?(a--,d=!0,_=!0):_||a--;if(a<0){u=!0;break}d&&(h=!0)}if(!u&&h){const D=s-r;let P=null;for(let re=1;P===null&&re<D;re++)P=this.getBlackPointOnSegment(r,c-re,r+re,c);if(P==null)throw new V;let L=null;for(let re=1;L===null&&re<D;re++)L=this.getBlackPointOnSegment(r,a+re,r+re,a);if(L==null)throw new V;let W=null;for(let re=1;W===null&&re<D;re++)W=this.getBlackPointOnSegment(s,a+re,s-re,a);if(W==null)throw new V;let ne=null;for(let re=1;ne===null&&re<D;re++)ne=this.getBlackPointOnSegment(s,c-re,s-re,c);if(ne==null)throw new V;return this.centerEdges(ne,P,W,L)}else throw new V}getBlackPointOnSegment(r,s,a,c){const u=je.round(je.distance(r,s,a,c)),d=(a-r)/u,h=(c-s)/u,g=this.image;for(let x=0;x<u;x++){const y=je.round(r+x*d),_=je.round(s+x*h);if(g.get(y,_))return new fe(y,_)}return null}centerEdges(r,s,a,c){const u=r.getX(),d=r.getY(),h=s.getX(),g=s.getY(),x=a.getX(),y=a.getY(),_=c.getX(),A=c.getY(),T=Cr.CORR;return u<this.width/2?[new fe(_-T,A+T),new fe(h+T,g+T),new fe(x-T,y-T),new fe(u+T,d-T)]:[new fe(_+T,A+T),new fe(h+T,g-T),new fe(x-T,y+T),new fe(u-T,d-T)]}containsBlackPoint(r,s,a,c){const u=this.image;if(c){for(let d=r;d<=s;d++)if(u.get(d,a))return!0}else for(let d=r;d<=s;d++)if(u.get(a,d))return!0;return!1}}Cr.INIT_SIZE=10,Cr.CORR=1;class X{static checkAndNudgePoints(r,s){const a=r.getWidth(),c=r.getHeight();let u=!0;for(let d=0;d<s.length&&u;d+=2){const h=Math.floor(s[d]),g=Math.floor(s[d+1]);if(h<-1||h>a||g<-1||g>c)throw new V;u=!1,h===-1?(s[d]=0,u=!0):h===a&&(s[d]=a-1,u=!0),g===-1?(s[d+1]=0,u=!0):g===c&&(s[d+1]=c-1,u=!0)}u=!0;for(let d=s.length-2;d>=0&&u;d-=2){const h=Math.floor(s[d]),g=Math.floor(s[d+1]);if(h<-1||h>a||g<-1||g>c)throw new V;u=!1,h===-1?(s[d]=0,u=!0):h===a&&(s[d]=a-1,u=!0),g===-1?(s[d+1]=0,u=!0):g===c&&(s[d+1]=c-1,u=!0)}}}class he{constructor(r,s,a,c,u,d,h,g,x){this.a11=r,this.a21=s,this.a31=a,this.a12=c,this.a22=u,this.a32=d,this.a13=h,this.a23=g,this.a33=x}static quadrilateralToQuadrilateral(r,s,a,c,u,d,h,g,x,y,_,A,T,D,P,L){const W=he.quadrilateralToSquare(r,s,a,c,u,d,h,g);return he.squareToQuadrilateral(x,y,_,A,T,D,P,L).times(W)}transformPoints(r){const s=r.length,a=this.a11,c=this.a12,u=this.a13,d=this.a21,h=this.a22,g=this.a23,x=this.a31,y=this.a32,_=this.a33;for(let A=0;A<s;A+=2){const T=r[A],D=r[A+1],P=u*T+g*D+_;r[A]=(a*T+d*D+x)/P,r[A+1]=(c*T+h*D+y)/P}}transformPointsWithValues(r,s){const a=this.a11,c=this.a12,u=this.a13,d=this.a21,h=this.a22,g=this.a23,x=this.a31,y=this.a32,_=this.a33,A=r.length;for(let T=0;T<A;T++){const D=r[T],P=s[T],L=u*D+g*P+_;r[T]=(a*D+d*P+x)/L,s[T]=(c*D+h*P+y)/L}}static squareToQuadrilateral(r,s,a,c,u,d,h,g){const x=r-a+u-h,y=s-c+d-g;if(x===0&&y===0)return new he(a-r,u-a,r,c-s,d-c,s,0,0,1);{const _=a-u,A=h-u,T=c-d,D=g-d,P=_*D-A*T,L=(x*D-A*y)/P,W=(_*y-x*T)/P;return new he(a-r+L*a,h-r+W*h,r,c-s+L*c,g-s+W*g,s,L,W,1)}}static quadrilateralToSquare(r,s,a,c,u,d,h,g){return he.squareToQuadrilateral(r,s,a,c,u,d,h,g).buildAdjoint()}buildAdjoint(){return new he(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new he(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class Je extends X{sampleGrid(r,s,a,c,u,d,h,g,x,y,_,A,T,D,P,L,W,ne,re){const Q=he.quadrilateralToQuadrilateral(c,u,d,h,g,x,y,_,A,T,D,P,L,W,ne,re);return this.sampleGridWithTransform(r,s,a,Q)}sampleGridWithTransform(r,s,a,c){if(s<=0||a<=0)throw new V;const u=new Ie(s,a),d=new Float32Array(2*s);for(let h=0;h<a;h++){const g=d.length,x=h+.5;for(let y=0;y<g;y+=2)d[y]=y/2+.5,d[y+1]=x;c.transformPoints(d),X.checkAndNudgePoints(r,d);try{for(let y=0;y<g;y+=2)r.get(Math.floor(d[y]),Math.floor(d[y+1]))&&u.set(y/2,h)}catch{throw new V}}return u}}class De{static setGridSampler(r){De.gridSampler=r}static getInstance(){return De.gridSampler}}De.gridSampler=new Je;class Ee{constructor(r,s){this.x=r,this.y=s}toResultPoint(){return new fe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class sr{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let s=this.getMatrixCenter(),a=this.getBullsEyeCorners(s);if(r){let d=a[0];a[0]=a[2],a[2]=d}this.extractParameters(a);let c=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),u=this.getMatrixCornerPoints(a);return new zl(c,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new V;let s=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(r[0],r[1],s),this.sampleLine(r[1],r[2],s),this.sampleLine(r[2],r[3],s),this.sampleLine(r[3],r[0],s)]);this.shift=this.getRotation(a,s);let c=0;for(let d=0;d<4;d++){let h=a[(this.shift+d)%4];this.compact?(c<<=7,c+=h>>1&127):(c<<=10,c+=(h>>2&992)+(h>>1&31))}let u=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(r,s){let a=0;r.forEach((c,u,d)=>{let h=(c>>s-2<<1)+(c&1);a=(a<<3)+h}),a=((a&1)<<11)+(a>>1);for(let c=0;c<4;c++)if(N.bitCount(a^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new V}getCorrectedParameterData(r,s){let a,c;s?(a=7,c=2):(a=10,c=4);let u=a-c,d=new Int32Array(a);for(let g=a-1;g>=0;--g)d[g]=r&15,r>>=4;try{new wi(ze.AZTEC_PARAM).decode(d,u)}catch{throw new V}let h=0;for(let g=0;g<c;g++)h=(h<<4)+d[g];return h}getBullsEyeCorners(r){let s=r,a=r,c=r,u=r,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let _=this.getFirstDifferent(s,d,1,-1),A=this.getFirstDifferent(a,d,1,1),T=this.getFirstDifferent(c,d,-1,1),D=this.getFirstDifferent(u,d,-1,-1);if(this.nbCenterLayers>2){let P=this.distancePoint(D,_)*this.nbCenterLayers/(this.distancePoint(u,s)*(this.nbCenterLayers+2));if(P<.75||P>1.25||!this.isWhiteOrBlackRectangle(_,A,T,D))break}s=_,a=A,c=T,u=D,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new V;this.compact=this.nbCenterLayers===5;let h=new fe(s.getX()+.5,s.getY()-.5),g=new fe(a.getX()+.5,a.getY()+.5),x=new fe(c.getX()-.5,c.getY()+.5),y=new fe(u.getX()-.5,u.getY()-.5);return this.expandSquare([h,g,x,y],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,s,a,c;try{let h=new Cr(this.image).detect();r=h[0],s=h[1],a=h[2],c=h[3]}catch{let g=this.image.getWidth()/2,x=this.image.getHeight()/2;r=this.getFirstDifferent(new Ee(g+7,x-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Ee(g+7,x+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Ee(g-7,x+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Ee(g-7,x-7),!1,-1,-1).toResultPoint()}let u=je.round((r.getX()+c.getX()+s.getX()+a.getX())/4),d=je.round((r.getY()+c.getY()+s.getY()+a.getY())/4);try{let h=new Cr(this.image,15,u,d).detect();r=h[0],s=h[1],a=h[2],c=h[3]}catch{r=this.getFirstDifferent(new Ee(u+7,d-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Ee(u+7,d+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Ee(u-7,d+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Ee(u-7,d-7),!1,-1,-1).toResultPoint()}return u=je.round((r.getX()+c.getX()+s.getX()+a.getX())/4),d=je.round((r.getY()+c.getY()+s.getY()+a.getY())/4),new Ee(u,d)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,s,a,c,u){let d=De.getInstance(),h=this.getDimension(),g=h/2-this.nbCenterLayers,x=h/2+this.nbCenterLayers;return d.sampleGrid(r,h,h,g,g,x,g,x,x,g,x,s.getX(),s.getY(),a.getX(),a.getY(),c.getX(),c.getY(),u.getX(),u.getY())}sampleLine(r,s,a){let c=0,u=this.distanceResultPoint(r,s),d=u/a,h=r.getX(),g=r.getY(),x=d*(s.getX()-r.getX())/u,y=d*(s.getY()-r.getY())/u;for(let _=0;_<a;_++)this.image.get(je.round(h+_*x),je.round(g+_*y))&&(c|=1<<a-_-1);return c}isWhiteOrBlackRectangle(r,s,a,c){let u=3;r=new Ee(r.getX()-u,r.getY()+u),s=new Ee(s.getX()-u,s.getY()-u),a=new Ee(a.getX()+u,a.getY()-u),c=new Ee(c.getX()+u,c.getY()+u);let d=this.getColor(c,r);if(d===0)return!1;let h=this.getColor(r,s);return h!==d||(h=this.getColor(s,a),h!==d)?!1:(h=this.getColor(a,c),h===d)}getColor(r,s){let a=this.distancePoint(r,s),c=(s.getX()-r.getX())/a,u=(s.getY()-r.getY())/a,d=0,h=r.getX(),g=r.getY(),x=this.image.get(r.getX(),r.getY()),y=Math.ceil(a);for(let A=0;A<y;A++)h+=c,g+=u,this.image.get(je.round(h),je.round(g))!==x&&d++;let _=d/a;return _>.1&&_<.9?0:_<=.1===x?1:-1}getFirstDifferent(r,s,a,c){let u=r.getX()+a,d=r.getY()+c;for(;this.isValid(u,d)&&this.image.get(u,d)===s;)u+=a,d+=c;for(u-=a,d-=c;this.isValid(u,d)&&this.image.get(u,d)===s;)u+=a;for(u-=a;this.isValid(u,d)&&this.image.get(u,d)===s;)d+=c;return d-=c,new Ee(u,d)}expandSquare(r,s,a){let c=a/(2*s),u=r[0].getX()-r[2].getX(),d=r[0].getY()-r[2].getY(),h=(r[0].getX()+r[2].getX())/2,g=(r[0].getY()+r[2].getY())/2,x=new fe(h+c*u,g+c*d),y=new fe(h-c*u,g-c*d);u=r[1].getX()-r[3].getX(),d=r[1].getY()-r[3].getY(),h=(r[1].getX()+r[3].getX())/2,g=(r[1].getY()+r[3].getY())/2;let _=new fe(h+c*u,g+c*d),A=new fe(h-c*u,g-c*d);return[x,_,y,A]}isValid(r,s){return r>=0&&r<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(r){let s=je.round(r.getX()),a=je.round(r.getY());return this.isValid(s,a)}distancePoint(r,s){return je.distance(r.getX(),r.getY(),s.getX(),s.getY())}distanceResultPoint(r,s){return je.distance(r.getX(),r.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(N.truncDivision(this.nbLayers-4,8)+1)+15}}class Ut{decode(r,s=null){let a=null,c=new sr(r.getBlackMatrix()),u=null,d=null;try{let y=c.detectMirror(!1);u=y.getPoints(),this.reportFoundResultPoints(s,u),d=new rt().decode(y)}catch(y){a=y}if(d==null)try{let y=c.detectMirror(!0);u=y.getPoints(),this.reportFoundResultPoints(s,u),d=new rt().decode(y)}catch(y){throw a??y}let h=new ve(d.getText(),d.getRawBytes(),d.getNumBits(),u,ce.AZTEC,B.currentTimeMillis()),g=d.getByteSegments();g!=null&&h.putMetadata(Oe.BYTE_SEGMENTS,g);let x=d.getECLevel();return x!=null&&h.putMetadata(Oe.ERROR_CORRECTION_LEVEL,x),h}reportFoundResultPoints(r,s){if(r!=null){let a=r.get(Z.NEED_RESULT_POINT_CALLBACK);a!=null&&s.forEach((c,u,d)=>{a.foundPossibleResultPoint(c)})}}reset(){}}class Mr extends Xe{constructor(r=500){super(new Ut,r)}}class tt{decode(r,s){try{return this.doDecode(r,s)}catch{if(s&&s.get(Z.TRY_HARDER)===!0&&r.isRotateSupported()){const u=r.rotateCounterClockwise(),d=this.doDecode(u,s),h=d.getResultMetadata();let g=270;h!==null&&h.get(Oe.ORIENTATION)===!0&&(g=g+h.get(Oe.ORIENTATION)%360),d.putMetadata(Oe.ORIENTATION,g);const x=d.getResultPoints();if(x!==null){const y=u.getHeight();for(let _=0;_<x.length;_++)x[_]=new fe(y-x[_].getY()-1,x[_].getX())}return d}else throw new V}}reset(){}doDecode(r,s){const a=r.getWidth(),c=r.getHeight();let u=new j(a);const d=s&&s.get(Z.TRY_HARDER)===!0,h=Math.max(1,c>>(d?8:5));let g;d?g=c:g=15;const x=Math.trunc(c/2);for(let y=0;y<g;y++){const _=Math.trunc((y+1)/2),A=(y&1)===0,T=x+h*(A?_:-_);if(T<0||T>=c)break;try{u=r.getBlackRow(T,u)}catch{continue}for(let D=0;D<2;D++){if(D===1&&(u.reverse(),s&&s.get(Z.NEED_RESULT_POINT_CALLBACK)===!0)){const P=new Map;s.forEach((L,W)=>P.set(W,L)),P.delete(Z.NEED_RESULT_POINT_CALLBACK),s=P}try{const P=this.decodeRow(T,u,s);if(D===1){P.putMetadata(Oe.ORIENTATION,180);const L=P.getResultPoints();L!==null&&(L[0]=new fe(a-L[0].getX()-1,L[0].getY()),L[1]=new fe(a-L[1].getX()-1,L[1].getY()))}return P}catch{}}}throw new V}static recordPattern(r,s,a){const c=a.length;for(let x=0;x<c;x++)a[x]=0;const u=r.getSize();if(s>=u)throw new V;let d=!r.get(s),h=0,g=s;for(;g<u;){if(r.get(g)!==d)a[h]++;else{if(++h===c)break;a[h]=1,d=!d}g++}if(!(h===c||h===c-1&&g===u))throw new V}static recordPatternInReverse(r,s,a){let c=a.length,u=r.get(s);for(;s>0&&c>=0;)r.get(--s)!==u&&(c--,u=!u);if(c>=0)throw new V;tt.recordPattern(r,s+1,a)}static patternMatchVariance(r,s,a){const c=r.length;let u=0,d=0;for(let x=0;x<c;x++)u+=r[x],d+=s[x];if(u<d)return Number.POSITIVE_INFINITY;const h=u/d;a*=h;let g=0;for(let x=0;x<c;x++){const y=r[x],_=s[x]*h,A=y>_?y-_:_-y;if(A>a)return Number.POSITIVE_INFINITY;g+=A}return g/u}}class ae extends tt{static findStartPattern(r){const s=r.getSize(),a=r.getNextSet(0);let c=0,u=Int32Array.from([0,0,0,0,0,0]),d=a,h=!1;const g=6;for(let x=a;x<s;x++)if(r.get(x)!==h)u[c]++;else{if(c===g-1){let y=ae.MAX_AVG_VARIANCE,_=-1;for(let A=ae.CODE_START_A;A<=ae.CODE_START_C;A++){const T=tt.patternMatchVariance(u,ae.CODE_PATTERNS[A],ae.MAX_INDIVIDUAL_VARIANCE);T<y&&(y=T,_=A)}if(_>=0&&r.isRange(Math.max(0,d-(x-d)/2),d,!1))return Int32Array.from([d,x,_]);d+=u[0]+u[1],u=u.slice(2,u.length-1),u[c-1]=0,u[c]=0,c--}else c++;u[c]=1,h=!h}throw new V}static decodeCode(r,s,a){tt.recordPattern(r,a,s);let c=ae.MAX_AVG_VARIANCE,u=-1;for(let d=0;d<ae.CODE_PATTERNS.length;d++){const h=ae.CODE_PATTERNS[d],g=this.patternMatchVariance(s,h,ae.MAX_INDIVIDUAL_VARIANCE);g<c&&(c=g,u=d)}if(u>=0)return u;throw new V}decodeRow(r,s,a){const c=a&&a.get(Z.ASSUME_GS1)===!0,u=ae.findStartPattern(s),d=u[2];let h=0;const g=new Uint8Array(20);g[h++]=d;let x;switch(d){case ae.CODE_START_A:x=ae.CODE_CODE_A;break;case ae.CODE_START_B:x=ae.CODE_CODE_B;break;case ae.CODE_START_C:x=ae.CODE_CODE_C;break;default:throw new U}let y=!1,_=!1,A="",T=u[0],D=u[1];const P=Int32Array.from([0,0,0,0,0,0]);let L=0,W=0,ne=d,re=0,Q=!0,Le=!1,Te=!1;for(;!y;){const Js=_;switch(_=!1,L=W,W=ae.decodeCode(s,P,D),g[h++]=W,W!==ae.CODE_STOP&&(Q=!0),W!==ae.CODE_STOP&&(re++,ne+=re*W),T=D,D+=P.reduce((e_,t_)=>e_+t_,0),W){case ae.CODE_START_A:case ae.CODE_START_B:case ae.CODE_START_C:throw new U}switch(x){case ae.CODE_CODE_A:if(W<64)Te===Le?A+=String.fromCharCode(32+W):A+=String.fromCharCode(32+W+128),Te=!1;else if(W<96)Te===Le?A+=String.fromCharCode(W-64):A+=String.fromCharCode(W+64),Te=!1;else switch(W!==ae.CODE_STOP&&(Q=!1),W){case ae.CODE_FNC_1:c&&(A.length===0?A+="]C1":A+="");break;case ae.CODE_FNC_2:case ae.CODE_FNC_3:break;case ae.CODE_FNC_4_A:!Le&&Te?(Le=!0,Te=!1):Le&&Te?(Le=!1,Te=!1):Te=!0;break;case ae.CODE_SHIFT:_=!0,x=ae.CODE_CODE_B;break;case ae.CODE_CODE_B:x=ae.CODE_CODE_B;break;case ae.CODE_CODE_C:x=ae.CODE_CODE_C;break;case ae.CODE_STOP:y=!0;break}break;case ae.CODE_CODE_B:if(W<96)Te===Le?A+=String.fromCharCode(32+W):A+=String.fromCharCode(32+W+128),Te=!1;else switch(W!==ae.CODE_STOP&&(Q=!1),W){case ae.CODE_FNC_1:c&&(A.length===0?A+="]C1":A+="");break;case ae.CODE_FNC_2:case ae.CODE_FNC_3:break;case ae.CODE_FNC_4_B:!Le&&Te?(Le=!0,Te=!1):Le&&Te?(Le=!1,Te=!1):Te=!0;break;case ae.CODE_SHIFT:_=!0,x=ae.CODE_CODE_A;break;case ae.CODE_CODE_A:x=ae.CODE_CODE_A;break;case ae.CODE_CODE_C:x=ae.CODE_CODE_C;break;case ae.CODE_STOP:y=!0;break}break;case ae.CODE_CODE_C:if(W<100)W<10&&(A+="0"),A+=W;else switch(W!==ae.CODE_STOP&&(Q=!1),W){case ae.CODE_FNC_1:c&&(A.length===0?A+="]C1":A+="");break;case ae.CODE_CODE_A:x=ae.CODE_CODE_A;break;case ae.CODE_CODE_B:x=ae.CODE_CODE_B;break;case ae.CODE_STOP:y=!0;break}break}Js&&(x=x===ae.CODE_CODE_A?ae.CODE_CODE_B:ae.CODE_CODE_A)}const Mn=D-T;if(D=s.getNextUnset(D),!s.isRange(D,Math.min(s.getSize(),D+(D-T)/2),!1))throw new V;if(ne-=re*L,ne%103!==L)throw new R;const Er=A.length;if(Er===0)throw new V;Er>0&&Q&&(x===ae.CODE_CODE_C?A=A.substring(0,Er-2):A=A.substring(0,Er-1));const Bn=(u[1]+u[0])/2,ut=T+Mn/2,ln=g.length,Xn=new Uint8Array(ln);for(let Js=0;Js<ln;Js++)Xn[Js]=g[Js];const Qs=[new fe(Bn,r),new fe(ut,r)];return new ve(A,Xn,0,Qs,ce.CODE_128,new Date().getTime())}}ae.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ae.MAX_AVG_VARIANCE=.25,ae.MAX_INDIVIDUAL_VARIANCE=.7,ae.CODE_SHIFT=98,ae.CODE_CODE_C=99,ae.CODE_CODE_B=100,ae.CODE_CODE_A=101,ae.CODE_FNC_1=102,ae.CODE_FNC_2=97,ae.CODE_FNC_3=96,ae.CODE_FNC_4_A=101,ae.CODE_FNC_4_B=100,ae.CODE_START_A=103,ae.CODE_START_B=104,ae.CODE_START_C=105,ae.CODE_STOP=106;class Ht extends tt{constructor(r=!1,s=!1){super(),this.usingCheckDigit=r,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,s,a){let c=this.counters;c.fill(0),this.decodeRowResult="";let u=Ht.findAsteriskPattern(s,c),d=s.getNextSet(u[1]),h=s.getSize(),g,x;do{Ht.recordPattern(s,d,c);let P=Ht.toNarrowWidePattern(c);if(P<0)throw new V;g=Ht.patternToChar(P),this.decodeRowResult+=g,x=d;for(let L of c)d+=L;d=s.getNextSet(d)}while(g!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let y=0;for(let P of c)y+=P;let _=d-x-y;if(d!==h&&_*2<y)throw new V;if(this.usingCheckDigit){let P=this.decodeRowResult.length-1,L=0;for(let W=0;W<P;W++)L+=Ht.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(W));if(this.decodeRowResult.charAt(P)!==Ht.ALPHABET_STRING.charAt(L%43))throw new R;this.decodeRowResult=this.decodeRowResult.substring(0,P)}if(this.decodeRowResult.length===0)throw new V;let A;this.extendedMode?A=Ht.decodeExtended(this.decodeRowResult):A=this.decodeRowResult;let T=(u[1]+u[0])/2,D=x+y/2;return new ve(A,null,0,[new fe(T,r),new fe(D,r)],ce.CODE_39,new Date().getTime())}static findAsteriskPattern(r,s){let a=r.getSize(),c=r.getNextSet(0),u=0,d=c,h=!1,g=s.length;for(let x=c;x<a;x++)if(r.get(x)!==h)s[u]++;else{if(u===g-1){if(this.toNarrowWidePattern(s)===Ht.ASTERISK_ENCODING&&r.isRange(Math.max(0,d-Math.floor((x-d)/2)),d,!1))return[d,x];d+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,h=!h}throw new V}static toNarrowWidePattern(r){let s=r.length,a=0,c;do{let u=2147483647;for(let g of r)g<u&&g>a&&(u=g);a=u,c=0;let d=0,h=0;for(let g=0;g<s;g++){let x=r[g];x>a&&(h|=1<<s-1-g,c++,d+=x)}if(c===3){for(let g=0;g<s&&c>0;g++){let x=r[g];if(x>a&&(c--,x*2>=d))return-1}return h}}while(c>3);return-1}static patternToChar(r){for(let s=0;s<Ht.CHARACTER_ENCODINGS.length;s++)if(Ht.CHARACTER_ENCODINGS[s]===r)return Ht.ALPHABET_STRING.charAt(s);if(r===Ht.ASTERISK_ENCODING)return"*";throw new V}static decodeExtended(r){let s=r.length,a="";for(let c=0;c<s;c++){let u=r.charAt(c);if(u==="+"||u==="$"||u==="%"||u==="/"){let d=r.charAt(c+1),h="\0";switch(u){case"+":if(d>="A"&&d<="Z")h=String.fromCharCode(d.charCodeAt(0)+32);else throw new U;break;case"$":if(d>="A"&&d<="Z")h=String.fromCharCode(d.charCodeAt(0)-64);else throw new U;break;case"%":if(d>="A"&&d<="E")h=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")h=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")h=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")h=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")h="\0";else if(d==="V")h="@";else if(d==="W")h="`";else if(d==="X"||d==="Y"||d==="Z")h="";else throw new U;break;case"/":if(d>="A"&&d<="O")h=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")h=":";else throw new U;break}a+=h,c++}else a+=u}return a}}Ht.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Ht.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Ht.ASTERISK_ENCODING=148;class lt extends tt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,s,a){let c=this.decodeStart(s),u=this.decodeEnd(s),d=new ke;lt.decodeMiddle(s,c[1],u[0],d);let h=d.toString(),g=null;a!=null&&(g=a.get(Z.ALLOWED_LENGTHS)),g==null&&(g=lt.DEFAULT_ALLOWED_LENGTHS);let x=h.length,y=!1,_=0;for(let D of g){if(x===D){y=!0;break}D>_&&(_=D)}if(!y&&x>_&&(y=!0),!y)throw new U;const A=[new fe(c[1],r),new fe(u[0],r)];return new ve(h,null,0,A,ce.ITF,new Date().getTime())}static decodeMiddle(r,s,a,c){let u=new Int32Array(10),d=new Int32Array(5),h=new Int32Array(5);for(u.fill(0),d.fill(0),h.fill(0);s<a;){tt.recordPattern(r,s,u);for(let x=0;x<5;x++){let y=2*x;d[x]=u[y],h[x]=u[y+1]}let g=lt.decodeDigit(d);c.append(g.toString()),g=this.decodeDigit(h),c.append(g.toString()),u.forEach(function(x){s+=x})}}decodeStart(r){let s=lt.skipWhiteSpace(r),a=lt.findGuardPattern(r,s,lt.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a}validateQuietZone(r,s){let a=this.narrowLineWidth*10;a=a<s?a:s;for(let c=s-1;a>0&&c>=0&&!r.get(c);c--)a--;if(a!==0)throw new V}static skipWhiteSpace(r){const s=r.getSize(),a=r.getNextSet(0);if(a===s)throw new V;return a}decodeEnd(r){r.reverse();try{let s=lt.skipWhiteSpace(r),a;try{a=lt.findGuardPattern(r,s,lt.END_PATTERN_REVERSED[0])}catch(u){u instanceof V&&(a=lt.findGuardPattern(r,s,lt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);let c=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-c,a}finally{r.reverse()}}static findGuardPattern(r,s,a){let c=a.length,u=new Int32Array(c),d=r.getSize(),h=!1,g=0,x=s;u.fill(0);for(let y=s;y<d;y++)if(r.get(y)!==h)u[g]++;else{if(g===c-1){if(tt.patternMatchVariance(u,a,lt.MAX_INDIVIDUAL_VARIANCE)<lt.MAX_AVG_VARIANCE)return[x,y];x+=u[0]+u[1],B.arraycopy(u,2,u,0,g-1),u[g-1]=0,u[g]=0,g--}else g++;u[g]=1,h=!h}throw new V}static decodeDigit(r){let s=lt.MAX_AVG_VARIANCE,a=-1,c=lt.PATTERNS.length;for(let u=0;u<c;u++){let d=lt.PATTERNS[u],h=tt.patternMatchVariance(r,d,lt.MAX_INDIVIDUAL_VARIANCE);h<s?(s=h,a=u):h===s&&(a=-1)}if(a>=0)return a%10;throw new V}}lt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],lt.MAX_AVG_VARIANCE=.38,lt.MAX_INDIVIDUAL_VARIANCE=.5,lt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],lt.START_PATTERN=Int32Array.from([1,1,1,1]),lt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Tt extends tt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let s=!1,a,c=0,u=Int32Array.from([0,0,0]);for(;!s;){u=Int32Array.from([0,0,0]),a=Tt.findGuardPattern(r,c,!1,this.START_END_PATTERN,u);let d=a[0];c=a[1];let h=d-(c-d);h>=0&&(s=r.isRange(h,d,!1))}return a}static checkChecksum(r){return Tt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let a=parseInt(r.charAt(s-1),10);return Tt.getStandardUPCEANChecksum(r.substring(0,s-1))===a}static getStandardUPCEANChecksum(r){let s=r.length,a=0;for(let c=s-1;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new U;a+=u}a*=3;for(let c=s-2;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new U;a+=u}return(1e3-a)%10}static decodeEnd(r,s){return Tt.findGuardPattern(r,s,!1,Tt.START_END_PATTERN,new Int32Array(Tt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,s,a,c){return this.findGuardPattern(r,s,a,c,new Int32Array(c.length))}static findGuardPattern(r,s,a,c,u){let d=r.getSize();s=a?r.getNextUnset(s):r.getNextSet(s);let h=0,g=s,x=c.length,y=a;for(let _=s;_<d;_++)if(r.get(_)!==y)u[h]++;else{if(h===x-1){if(tt.patternMatchVariance(u,c,Tt.MAX_INDIVIDUAL_VARIANCE)<Tt.MAX_AVG_VARIANCE)return Int32Array.from([g,_]);g+=u[0]+u[1];let A=u.slice(2,u.length-1);for(let T=0;T<h-1;T++)u[T]=A[T];u[h-1]=0,u[h]=0,h--}else h++;u[h]=1,y=!y}throw new V}static decodeDigit(r,s,a,c){this.recordPattern(r,a,s);let u=this.MAX_AVG_VARIANCE,d=-1,h=c.length;for(let g=0;g<h;g++){let x=c[g],y=tt.patternMatchVariance(s,x,Tt.MAX_INDIVIDUAL_VARIANCE);y<u&&(u=y,d=g)}if(d>=0)return d;throw new V}}Tt.MAX_AVG_VARIANCE=.48,Tt.MAX_INDIVIDUAL_VARIANCE=.7,Tt.START_END_PATTERN=Int32Array.from([1,1,1]),Tt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Tt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Tt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class na{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(s,a,c),d=c.toString(),h=na.parseExtensionString(d),g=[new fe((a[0]+a[1])/2,r),new fe(u,r)],x=new ve(d,null,0,g,ce.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&x.putAllMetadata(h),x}decodeMiddle(r,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1],h=0;for(let x=0;x<5&&d<u;x++){let y=Tt.decodeDigit(r,c,d,Tt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+y%10);for(let _ of c)d+=_;y>=10&&(h|=1<<4-x),x!==4&&(d=r.getNextSet(d),d=r.getNextUnset(d))}if(a.length!==5)throw new V;let g=this.determineCheckDigit(h);if(na.extensionChecksum(a.toString())!==g)throw new V;return d}static extensionChecksum(r){let s=r.length,a=0;for(let c=s-2;c>=0;c-=2)a+=r.charAt(c).charCodeAt(0)-48;a*=3;for(let c=s-1;c>=0;c-=2)a+=r.charAt(c).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(r){for(let s=0;s<10;s++)if(r===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new V}static parseExtensionString(r){if(r.length!==5)return null;let s=na.parseExtension5String(r);return s==null?null:new Map([[Oe.SUGGESTED_PRICE,s]])}static parseExtension5String(r){let s;switch(r.charAt(0)){case"0":s="£";break;case"5":s="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let a=parseInt(r.substring(1)),c=(a/100).toString(),u=a%100,d=u<10?"0"+u:u.toString();return s+c+"."+d}}class pd{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(s,a,c),d=c.toString(),h=pd.parseExtensionString(d),g=[new fe((a[0]+a[1])/2,r),new fe(u,r)],x=new ve(d,null,0,g,ce.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&x.putAllMetadata(h),x}decodeMiddle(r,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1],h=0;for(let g=0;g<2&&d<u;g++){let x=Tt.decodeDigit(r,c,d,Tt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+x%10);for(let y of c)d+=y;x>=10&&(h|=1<<1-g),g!==1&&(d=r.getNextSet(d),d=r.getNextUnset(d))}if(a.length!==2)throw new V;if(parseInt(a.toString())%4!==h)throw new V;return d}static parseExtensionString(r){return r.length!==2?null:new Map([[Oe.ISSUE_NUMBER,parseInt(r)]])}}class q1{static decodeRow(r,s,a){let c=Tt.findGuardPattern(s,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new na().decodeRow(r,s,c)}catch{return new pd().decodeRow(r,s,c)}}}q1.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ke extends Tt{constructor(){super(),this.decodeRowStringBuffer="",Ke.L_AND_G_PATTERNS=Ke.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let s=Ke.L_PATTERNS[r-10],a=new Int32Array(s.length);for(let c=0;c<s.length;c++)a[c]=s[s.length-c-1];Ke.L_AND_G_PATTERNS[r]=a}}decodeRow(r,s,a){let c=Ke.findStartGuardPattern(s),u=a==null?null:a.get(Z.NEED_RESULT_POINT_CALLBACK);if(u!=null){const Q=new fe((c[0]+c[1])/2,r);u.foundPossibleResultPoint(Q)}let d=this.decodeMiddle(s,c,this.decodeRowStringBuffer),h=d.rowOffset,g=d.resultString;if(u!=null){const Q=new fe(h,r);u.foundPossibleResultPoint(Q)}let x=this.decodeEnd(s,h);if(u!=null){const Q=new fe((x[0]+x[1])/2,r);u.foundPossibleResultPoint(Q)}let y=x[1],_=y+(y-x[0]);if(_>=s.getSize()||!s.isRange(y,_,!1))throw new V;let A=g.toString();if(A.length<8)throw new U;if(!Ke.checkChecksum(A))throw new R;let T=(c[1]+c[0])/2,D=(x[1]+x[0])/2,P=this.getBarcodeFormat(),L=[new fe(T,r),new fe(D,r)],W=new ve(A,null,0,L,P,new Date().getTime()),ne=0;try{let Q=q1.decodeRow(r,s,x[1]);W.putMetadata(Oe.UPC_EAN_EXTENSION,Q.getText()),W.putAllMetadata(Q.getResultMetadata()),W.addResultPoints(Q.getResultPoints()),ne=Q.getText().length}catch{}let re=a==null?null:a.get(Z.ALLOWED_EAN_EXTENSIONS);if(re!=null){let Q=!1;for(let Le in re)if(ne.toString()===Le){Q=!0;break}if(!Q)throw new V}return W}decodeEnd(r,s){return Ke.findGuardPattern(r,s,!1,Ke.START_END_PATTERN,new Int32Array(Ke.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return Ke.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let a=parseInt(r.charAt(s-1),10);return Ke.getStandardUPCEANChecksum(r.substring(0,s-1))===a}static getStandardUPCEANChecksum(r){let s=r.length,a=0;for(let c=s-1;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new U;a+=u}a*=3;for(let c=s-2;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new U;a+=u}return(1e3-a)%10}}class is extends Ke{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1],h=0;for(let x=0;x<6&&d<u;x++){let y=Ke.decodeDigit(r,c,d,Ke.L_AND_G_PATTERNS);a+=String.fromCharCode(48+y%10);for(let _ of c)d+=_;y>=10&&(h|=1<<5-x)}a=is.determineFirstDigit(a,h),d=Ke.findGuardPattern(r,d,!0,Ke.MIDDLE_PATTERN,new Int32Array(Ke.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<6&&d<u;x++){let y=Ke.decodeDigit(r,c,d,Ke.L_PATTERNS);a+=String.fromCharCode(48+y);for(let _ of c)d+=_}return{rowOffset:d,resultString:a}}getBarcodeFormat(){return ce.EAN_13}static determineFirstDigit(r,s){for(let a=0;a<10;a++)if(s===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new V}}is.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Z1 extends Ke{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,a){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=s[1];for(let g=0;g<4&&d<u;g++){let x=Ke.decodeDigit(r,c,d,Ke.L_PATTERNS);a+=String.fromCharCode(48+x);for(let y of c)d+=y}d=Ke.findGuardPattern(r,d,!0,Ke.MIDDLE_PATTERN,new Int32Array(Ke.MIDDLE_PATTERN.length).fill(0))[1];for(let g=0;g<4&&d<u;g++){let x=Ke.decodeDigit(r,c,d,Ke.L_PATTERNS);a+=String.fromCharCode(48+x);for(let y of c)d+=y}return{rowOffset:d,resultString:a}}getBarcodeFormat(){return ce.EAN_8}}class Q1 extends Ke{constructor(){super(...arguments),this.ean13Reader=new is}getBarcodeFormat(){return ce.UPC_A}decode(r,s){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,s,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,s,a))}decodeMiddle(r,s,a){return this.ean13Reader.decodeMiddle(r,s,a)}maybeReturnResult(r){let s=r.getText();if(s.charAt(0)==="0"){let a=new ve(s.substring(1),null,null,r.getResultPoints(),ce.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new V}reset(){this.ean13Reader.reset()}}class _r extends Ke{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,s,a){const c=this.decodeMiddleCounters.map(x=>x);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const u=r.getSize();let d=s[1],h=0;for(let x=0;x<6&&d<u;x++){const y=_r.decodeDigit(r,c,d,_r.L_AND_G_PATTERNS);a+=String.fromCharCode(48+y%10);for(let _ of c)d+=_;y>=10&&(h|=1<<5-x)}let g=_r.determineNumSysAndCheckDigit(a,h);return{rowOffset:d,resultString:g}}decodeEnd(r,s){return _r.findGuardPatternWithoutCounters(r,s,!0,_r.MIDDLE_END_PATTERN)}checkChecksum(r){return Ke.checkChecksum(_r.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,s){for(let a=0;a<=1;a++)for(let c=0;c<10;c++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][c]){let u=String.fromCharCode(48+a),d=String.fromCharCode(48+c);return u+r+d}throw V.getNotFoundInstance()}getBarcodeFormat(){return ce.UPC_E}static convertUPCEtoUPCA(r){const s=r.slice(1,7).split("").map(u=>u.charCodeAt(0)),a=new ke;a.append(r.charAt(0));let c=s[5];switch(c){case 0:case 1:case 2:a.appendChars(s,0,2),a.append(c),a.append("0000"),a.appendChars(s,2,3);break;case 3:a.appendChars(s,0,3),a.append("00000"),a.appendChars(s,3,2);break;case 4:a.appendChars(s,0,4),a.append("00000"),a.append(s[4]);break;default:a.appendChars(s,0,5),a.append("0000"),a.append(c);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()}}_r.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),_r.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class md extends tt{constructor(r){super();let s=r==null?null:r.get(Z.POSSIBLE_FORMATS),a=[];i(s)?(a.push(new is),a.push(new Q1),a.push(new Z1),a.push(new _r)):(s.indexOf(ce.EAN_13)>-1&&a.push(new is),s.indexOf(ce.UPC_A)>-1&&a.push(new Q1),s.indexOf(ce.EAN_8)>-1&&a.push(new Z1),s.indexOf(ce.UPC_E)>-1&&a.push(new _r)),this.readers=a}decodeRow(r,s,a){for(let c of this.readers)try{const u=c.decodeRow(r,s,a),d=u.getBarcodeFormat()===ce.EAN_13&&u.getText().charAt(0)==="0",h=a==null?null:a.get(Z.POSSIBLE_FORMATS),g=h==null||h.includes(ce.UPC_A);if(d&&g){const x=u.getRawBytes(),y=new ve(u.getText().substring(1),x,x?x.length:null,u.getResultPoints(),ce.UPC_A);return y.putAllMetadata(u.getResultMetadata()),y}return u}catch{}throw new V}reset(){for(let r of this.readers)r.reset()}}class pn extends tt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,s){for(let a=0;a<s.length;a++)if(tt.patternMatchVariance(r,s[a],pn.MAX_INDIVIDUAL_VARIANCE)<pn.MAX_AVG_VARIANCE)return a;throw new V}static count(r){return je.sum(new Int32Array(r))}static increment(r,s){let a=0,c=s[0];for(let u=1;u<r.length;u++)s[u]>c&&(c=s[u],a=u);r[a]++}static decrement(r,s){let a=0,c=s[0];for(let u=1;u<r.length;u++)s[u]<c&&(c=s[u],a=u);r[a]--}static isFinderPattern(r){let s=r[0]+r[1],a=s+r[2]+r[3],c=s/a;if(c>=pn.MIN_FINDER_PATTERN_RATIO&&c<=pn.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let h of r)h>d&&(d=h),h<u&&(u=h);return d<10*u}return!1}}pn.MAX_AVG_VARIANCE=.2,pn.MAX_INDIVIDUAL_VARIANCE=.45,pn.MIN_FINDER_PATTERN_RATIO=9.5/12,pn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Gs{constructor(r,s){this.value=r,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof Gs))return!1;const s=r;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Wl{constructor(r,s,a,c,u){this.value=r,this.startEnd=s,this.value=r,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new fe(a,u)),this.resultPoints.push(new fe(c,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof Wl))return!1;const s=r;return this.value===s.value}hashCode(){return this.value}}class Br{constructor(){}static getRSSvalue(r,s,a){let c=0;for(let g of r)c+=g;let u=0,d=0,h=r.length;for(let g=0;g<h-1;g++){let x;for(x=1,d|=1<<g;x<r[g];x++,d&=~(1<<g)){let y=Br.combins(c-x-1,h-g-2);if(a&&d===0&&c-x-(h-g-1)>=h-g-1&&(y-=Br.combins(c-x-(h-g),h-g-2)),h-g-1>1){let _=0;for(let A=c-x-(h-g-2);A>s;A--)_+=Br.combins(c-x-A-1,h-g-3);y-=_*(h-1-g)}else c-x>s&&y--;u+=y}c-=x}return u}static combins(r,s){let a,c;r-s>s?(c=s,a=r-s):(c=r-s,a=s);let u=1,d=1;for(let h=r;h>a;h--)u*=h,d<=c&&(u/=d,d++);for(;d<=c;)u/=d,d++;return u}}class SC{static buildBitArray(r){let s=r.length*2-1;r[r.length-1].getRightChar()==null&&(s-=1);let a=12*s,c=new j(a),u=0,h=r[0].getRightChar().getValue();for(let g=11;g>=0;--g)h&1<<g&&c.set(u),u++;for(let g=1;g<r.length;++g){let x=r[g],y=x.getLeftChar().getValue();for(let _=11;_>=0;--_)y&1<<_&&c.set(u),u++;if(x.getRightChar()!=null){let _=x.getRightChar().getValue();for(let A=11;A>=0;--A)_&1<<A&&c.set(u),u++}}return c}}class ss{constructor(r,s){s?this.decodedInformation=null:(this.finished=r,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class wd{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class On extends wd{constructor(r,s){super(r),this.value=s}getValue(){return this.value}isFNC1(){return this.value===On.FNC1}}On.FNC1="$";class os extends wd{constructor(r,s,a){super(r),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class or extends wd{constructor(r,s,a){if(super(r),s<0||s>10||a<0||a>10)throw new U;this.firstDigit=s,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===or.FNC1}isSecondDigitFNC1(){return this.secondDigit===or.FNC1}isAnyFNC1(){return this.firstDigit===or.FNC1||this.secondDigit===or.FNC1}}or.FNC1=10;class ue{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new V;let s=r.substring(0,2);for(let u of ue.TWO_DIGIT_DATA_LENGTH)if(u[0]===s)return u[1]===ue.VARIABLE_LENGTH?ue.processVariableAI(2,u[2],r):ue.processFixedAI(2,u[1],r);if(r.length<3)throw new V;let a=r.substring(0,3);for(let u of ue.THREE_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===ue.VARIABLE_LENGTH?ue.processVariableAI(3,u[2],r):ue.processFixedAI(3,u[1],r);for(let u of ue.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===ue.VARIABLE_LENGTH?ue.processVariableAI(4,u[2],r):ue.processFixedAI(4,u[1],r);if(r.length<4)throw new V;let c=r.substring(0,4);for(let u of ue.FOUR_DIGIT_DATA_LENGTH)if(u[0]===c)return u[1]===ue.VARIABLE_LENGTH?ue.processVariableAI(4,u[2],r):ue.processFixedAI(4,u[1],r);throw new V}static processFixedAI(r,s,a){if(a.length<r)throw new V;let c=a.substring(0,r);if(a.length<r+s)throw new V;let u=a.substring(r,r+s),d=a.substring(r+s),h="("+c+")"+u,g=ue.parseFieldsInGeneralPurpose(d);return g==null?h:h+g}static processVariableAI(r,s,a){let c=a.substring(0,r),u;a.length<r+s?u=a.length:u=r+s;let d=a.substring(r,u),h=a.substring(u),g="("+c+")"+d,x=ue.parseFieldsInGeneralPurpose(h);return x==null?g:g+x}}ue.VARIABLE_LENGTH=[],ue.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ue.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ue.VARIABLE_LENGTH,20],["22",ue.VARIABLE_LENGTH,29],["30",ue.VARIABLE_LENGTH,8],["37",ue.VARIABLE_LENGTH,8],["90",ue.VARIABLE_LENGTH,30],["91",ue.VARIABLE_LENGTH,30],["92",ue.VARIABLE_LENGTH,30],["93",ue.VARIABLE_LENGTH,30],["94",ue.VARIABLE_LENGTH,30],["95",ue.VARIABLE_LENGTH,30],["96",ue.VARIABLE_LENGTH,30],["97",ue.VARIABLE_LENGTH,3],["98",ue.VARIABLE_LENGTH,30],["99",ue.VARIABLE_LENGTH,30]],ue.THREE_DIGIT_DATA_LENGTH=[["240",ue.VARIABLE_LENGTH,30],["241",ue.VARIABLE_LENGTH,30],["242",ue.VARIABLE_LENGTH,6],["250",ue.VARIABLE_LENGTH,30],["251",ue.VARIABLE_LENGTH,30],["253",ue.VARIABLE_LENGTH,17],["254",ue.VARIABLE_LENGTH,20],["400",ue.VARIABLE_LENGTH,30],["401",ue.VARIABLE_LENGTH,30],["402",17],["403",ue.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ue.VARIABLE_LENGTH,20],["421",ue.VARIABLE_LENGTH,15],["422",3],["423",ue.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ue.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ue.VARIABLE_LENGTH,15],["391",ue.VARIABLE_LENGTH,18],["392",ue.VARIABLE_LENGTH,15],["393",ue.VARIABLE_LENGTH,18],["703",ue.VARIABLE_LENGTH,30]],ue.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ue.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ue.VARIABLE_LENGTH,20],["8003",ue.VARIABLE_LENGTH,30],["8004",ue.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ue.VARIABLE_LENGTH,30],["8008",ue.VARIABLE_LENGTH,12],["8018",18],["8020",ue.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ue.VARIABLE_LENGTH,70],["8200",ue.VARIABLE_LENGTH,70]];class Xs{constructor(r){this.buffer=new ke,this.information=r}decodeAllCodes(r,s){let a=s,c=null;do{let u=this.decodeGeneralPurposeField(a,c),d=ue.parseFieldsInGeneralPurpose(u.getNewString());if(d!=null&&r.append(d),u.isRemaining()?c=""+u.getRemainingValue():c=null,a===u.getNewPosition())break;a=u.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let s=r;s<r+3;++s)if(this.information.get(s))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(r,4);return u===0?new or(this.information.getSize(),or.FNC1,or.FNC1):new or(this.information.getSize(),u-1,or.FNC1)}let s=this.extractNumericValueFromBitArray(r,7),a=(s-8)/11,c=(s-8)%11;return new or(r+7,a,c)}extractNumericValueFromBitArray(r,s){return Xs.extractNumericValueFromBitArray(this.information,r,s)}static extractNumericValueFromBitArray(r,s,a){let c=0;for(let u=0;u<a;++u)r.get(s+u)&&(c|=1<<a-u-1);return c}decodeGeneralPurposeField(r,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(r);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new os(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new os(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,s;do{let a=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),r=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),r=s.isFinished()):(s=this.parseNumericBlock(),r=s.isFinished()),!(a!==this.current.getPosition())&&!r)break}while(!r);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let s;return r.isSecondDigitFNC1()?s=new os(this.current.getPosition(),this.buffer.toString()):s=new os(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new ss(!0,s)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let s=new os(this.current.getPosition(),this.buffer.toString());return new ss(!0,s)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ss(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new os(this.current.getPosition(),this.buffer.toString());return new ss(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ss(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new os(this.current.getPosition(),this.buffer.toString());return new ss(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ss(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,7);if(a>=64&&a<116)return!0;if(r+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(r,8);return c>=232&&c<253}decodeIsoIec646(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new On(r+5,On.FNC1);if(s>=5&&s<15)return new On(r+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(r,7);if(a>=64&&a<90)return new On(r+7,""+(a+1));if(a>=90&&a<116)return new On(r+7,""+(a+7));let c=this.extractNumericValueFromBitArray(r,8),u;switch(c){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new U}return new On(r+8,u)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,6);return a>=16&&a<63}decodeAlphanumeric(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new On(r+5,On.FNC1);if(s>=5&&s<15)return new On(r+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(r,6);if(a>=32&&a<58)return new On(r+6,""+(a+33));let c;switch(a){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new ir("Decoding invalid alphanumeric value: "+a)}return new On(r+6,c)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<5&&s+r<this.information.getSize();++s)if(s===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+s))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let s=r;s<r+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<4&&s+r<this.information.getSize();++s)if(this.information.get(r+s))return!1;return!0}}class xd{constructor(r){this.information=r,this.generalDecoder=new Xs(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Dn extends xd{constructor(r){super(r)}encodeCompressedGtin(r,s){r.append("(01)");let a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,s,a)}encodeCompressedGtinWithoutAI(r,s,a){for(let c=0;c<4;++c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*c,10);u/100===0&&r.append("0"),u/10===0&&r.append("0"),r.append(u)}Dn.appendCheckDigit(r,a)}static appendCheckDigit(r,s){let a=0;for(let c=0;c<13;c++){let u=r.charAt(c+s).charCodeAt(0)-48;a+=c&1?u:3*u}a=10-a%10,a===10&&(a=0),r.append(a)}}Dn.GTIN_SIZE=40;class Ys extends Dn{constructor(r){super(r)}parseInformation(){let r=new ke;r.append("(01)");let s=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(Ys.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,Ys.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(r,Ys.HEADER_SIZE+44)}}Ys.HEADER_SIZE=4;class Vl extends xd{constructor(r){super(r)}parseInformation(){let r=new ke;return this.getGeneralDecoder().decodeAllCodes(r,Vl.HEADER_SIZE)}}Vl.HEADER_SIZE=5;class Hl extends Dn{constructor(r){super(r)}encodeCompressedWeight(r,s,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(s,a);this.addWeightCode(r,c);let u=this.checkWeight(c),d=1e5;for(let h=0;h<5;++h)u/d===0&&r.append("0"),d/=10;r.append(u)}}class Lr extends Hl{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=Lr.HEADER_SIZE+Hl.GTIN_SIZE+Lr.WEIGHT_SIZE)throw new V;let r=new ke;return this.encodeCompressedGtin(r,Lr.HEADER_SIZE),this.encodeCompressedWeight(r,Lr.HEADER_SIZE+Hl.GTIN_SIZE,Lr.WEIGHT_SIZE),r.toString()}}Lr.HEADER_SIZE=5,Lr.WEIGHT_SIZE=15;class IC extends Lr{constructor(r){super(r)}addWeightCode(r,s){r.append("(3103)")}checkWeight(r){return r}}class TC extends Lr{constructor(r){super(r)}addWeightCode(r,s){s<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class Fr extends Dn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Fr.HEADER_SIZE+Dn.GTIN_SIZE)throw new V;let r=new ke;this.encodeCompressedGtin(r,Fr.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Fr.HEADER_SIZE+Dn.GTIN_SIZE,Fr.LAST_DIGIT_SIZE);r.append("(392"),r.append(s),r.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(Fr.HEADER_SIZE+Dn.GTIN_SIZE+Fr.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()}}Fr.HEADER_SIZE=8,Fr.LAST_DIGIT_SIZE=2;class En extends Dn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<En.HEADER_SIZE+Dn.GTIN_SIZE)throw new V;let r=new ke;this.encodeCompressedGtin(r,En.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(En.HEADER_SIZE+Dn.GTIN_SIZE,En.LAST_DIGIT_SIZE);r.append("(393"),r.append(s),r.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(En.HEADER_SIZE+Dn.GTIN_SIZE+En.LAST_DIGIT_SIZE,En.FIRST_THREE_DIGITS_SIZE);a/100==0&&r.append("0"),a/10==0&&r.append("0"),r.append(a);let c=this.getGeneralDecoder().decodeGeneralPurposeField(En.HEADER_SIZE+Dn.GTIN_SIZE+En.LAST_DIGIT_SIZE+En.FIRST_THREE_DIGITS_SIZE,null);return r.append(c.getNewString()),r.toString()}}En.HEADER_SIZE=8,En.LAST_DIGIT_SIZE=2,En.FIRST_THREE_DIGITS_SIZE=10;class Ct extends Hl{constructor(r,s,a){super(r),this.dateCode=a,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=Ct.HEADER_SIZE+Ct.GTIN_SIZE+Ct.WEIGHT_SIZE+Ct.DATE_SIZE)throw new V;let r=new ke;return this.encodeCompressedGtin(r,Ct.HEADER_SIZE),this.encodeCompressedWeight(r,Ct.HEADER_SIZE+Ct.GTIN_SIZE,Ct.WEIGHT_SIZE),this.encodeCompressedDate(r,Ct.HEADER_SIZE+Ct.GTIN_SIZE+Ct.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,s){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(s,Ct.DATE_SIZE);if(a==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let c=a%32;a/=32;let u=a%12+1;a/=12;let d=a;d/10==0&&r.append("0"),r.append(d),u/10==0&&r.append("0"),r.append(u),c/10==0&&r.append("0"),r.append(c)}addWeightCode(r,s){r.append("("),r.append(this.firstAIdigits),r.append(s/1e5),r.append(")")}checkWeight(r){return r%1e5}}Ct.HEADER_SIZE=8,Ct.WEIGHT_SIZE=20,Ct.DATE_SIZE=16;function J1(C){try{if(C.get(1))return new Ys(C);if(!C.get(2))return new Vl(C);switch(Xs.extractNumericValueFromBitArray(C,1,4)){case 4:return new IC(C);case 5:return new TC(C)}switch(Xs.extractNumericValueFromBitArray(C,1,5)){case 12:return new Fr(C);case 13:return new En(C)}switch(Xs.extractNumericValueFromBitArray(C,1,7)){case 56:return new Ct(C,"310","11");case 57:return new Ct(C,"320","11");case 58:return new Ct(C,"310","13");case 59:return new Ct(C,"320","13");case 60:return new Ct(C,"310","15");case 61:return new Ct(C,"320","15");case 62:return new Ct(C,"310","17");case 63:return new Ct(C,"320","17")}}catch(r){throw console.log(r),new ir("unknown decoder: "+C)}}class xi{constructor(r,s,a,c){this.leftchar=r,this.rightchar=s,this.finderpattern=a,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,s){return r instanceof xi?xi.equalsOrNull(r.leftchar,s.leftchar)&&xi.equalsOrNull(r.rightchar,s.rightchar)&&xi.equalsOrNull(r.finderpattern,s.finderpattern):!1}static equalsOrNull(r,s){return r===null?s===null:xi.equals(r,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class yd{constructor(r,s,a){this.pairs=r,this.rowNumber=s,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,s){return r instanceof yd?this.checkEqualitity(r,s)&&r.wasReversed===s.wasReversed:!1}checkEqualitity(r,s){if(!r||!s)return;let a;return r.forEach((c,u)=>{s.forEach(d=>{c.getLeftChar().getValue()===d.getLeftChar().getValue()&&c.getRightChar().getValue()===d.getRightChar().getValue()&&c.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(a=!0)})}),a}}class q extends pn{constructor(r){super(...arguments),this.pairs=new Array(q.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,s,a){this.pairs.length=0,this.startFromEven=!1;try{return q.constructResult(this.decodeRow2pairs(r,s))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,q.constructResult(this.decodeRow2pairs(r,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,s){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,r))}catch(u){if(u instanceof V){if(!this.pairs.length)throw new V;a=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(r,!1),c){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new V}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return r&&(this.rows=this.rows.reverse()),s}checkRows(r,s){for(let a=s;a<this.rows.length;a++){let c=this.rows[a];this.pairs.length=0;for(let d of r)this.pairs.push(d.getPairs());if(this.pairs.push(c.getPairs()),!q.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(r);u.push(c);try{return this.checkRows(u,a+1)}catch(d){this.verbose&&console.log(d)}}throw new V}static isValidSequence(r){for(let s of q.FINDER_PATTERN_SEQUENCES){if(r.length>s.length)continue;let a=!0;for(let c=0;c<r.length;c++)if(r[c].getFinderPattern().getValue()!=s[c]){a=!1;break}if(a)return!0}return!1}storeRow(r,s){let a=0,c=!1,u=!1;for(;a<this.rows.length;){let d=this.rows[a];if(d.getRowNumber()>r){u=d.isEquivalent(this.pairs);break}c=d.isEquivalent(this.pairs),a++}u||c||q.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new yd(this.pairs,r,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,s){for(let a of s)if(a.getPairs().length!==r.length){for(let c of a.getPairs())for(let u of r)if(xi.equals(c,u))break}}static isPartialRow(r,s){for(let a of s){let c=!0;for(let u of r){let d=!1;for(let h of a.getPairs())if(u.equals(h)){d=!0;break}if(!d){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(r){let s=SC.buildBitArray(r),c=J1(s).parseInformation(),u=r[0].getFinderPattern().getResultPoints(),d=r[r.length-1].getFinderPattern().getResultPoints(),h=[u[0],u[1],d[0],d[1]];return new ve(c,null,null,h,ce.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),s=r.getLeftChar(),a=r.getRightChar();if(a==null)return!1;let c=a.getChecksumPortion(),u=2;for(let h=1;h<this.pairs.size();++h){let g=this.pairs.get(h);c+=g.getLeftChar().getChecksumPortion(),u++;let x=g.getRightChar();x!=null&&(c+=x.getChecksumPortion(),u++)}return c%=211,211*(u-4)+c==s.getValue()}static getNextSecondBar(r,s){let a;return r.get(s)?(a=r.getNextUnset(s),a=r.getNextSet(a)):(a=r.getNextSet(s),a=r.getNextUnset(a)),a}retrieveNextPair(r,s,a){let c=s.length%2==0;this.startFromEven&&(c=!c);let u,d=!0,h=-1;do this.findNextPair(r,s,h),u=this.parseFoundFinderPattern(r,a,c),u==null?h=q.getNextSecondBar(r,this.startEnd[0]):d=!1;while(d);let g=this.decodeDataCharacter(r,u,c,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new V;let x;try{x=this.decodeDataCharacter(r,u,c,!1)}catch(y){x=null,this.verbose&&console.log(y)}return new xi(g,x,u,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,s,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d;a>=0?d=a:this.isEmptyPair(s)?d=0:d=s[s.length-1].getFinderPattern().getStartEnd()[1];let h=s.length%2!=0;this.startFromEven&&(h=!h);let g=!1;for(;d<u&&(g=!r.get(d),!!g);)d++;let x=0,y=d;for(let _=d;_<u;_++)if(r.get(_)!=g)c[x]++;else{if(x==3){if(h&&q.reverseCounters(c),q.isFinderPattern(c)){this.startEnd[0]=y,this.startEnd[1]=_;return}h&&q.reverseCounters(c),y+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,x--}else x++;c[x]=1,g=!g}throw new V}static reverseCounters(r){let s=r.length;for(let a=0;a<s/2;++a){let c=r[a];r[a]=r[s-a-1],r[s-a-1]=c}}parseFoundFinderPattern(r,s,a){let c,u,d;if(a){let x=this.startEnd[0]-1;for(;x>=0&&!r.get(x);)x--;x++,c=this.startEnd[0]-x,u=x,d=this.startEnd[1]}else u=this.startEnd[0],d=r.getNextUnset(this.startEnd[1]+1),c=d-this.startEnd[1];let h=this.getDecodeFinderCounters();B.arraycopy(h,0,h,1,h.length-1),h[0]=c;let g;try{g=this.parseFinderValue(h,q.FINDER_PATTERNS)}catch{return null}return new Wl(g,[u,d],u,d,s)}decodeDataCharacter(r,s,a,c){let u=this.getDataCharacterCounters();for(let ut=0;ut<u.length;ut++)u[ut]=0;if(c)q.recordPatternInReverse(r,s.getStartEnd()[0],u);else{q.recordPattern(r,s.getStartEnd()[1],u);for(let ut=0,ln=u.length-1;ut<ln;ut++,ln--){let Xn=u[ut];u[ut]=u[ln],u[ln]=Xn}}let d=17,h=je.sum(new Int32Array(u))/d,g=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(h-g)/g>.3)throw new V;let x=this.getOddCounts(),y=this.getEvenCounts(),_=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors();for(let ut=0;ut<u.length;ut++){let ln=1*u[ut]/h,Xn=ln+.5;if(Xn<1){if(ln<.3)throw new V;Xn=1}else if(Xn>8){if(ln>8.7)throw new V;Xn=8}let Qs=ut/2;ut&1?(y[Qs]=Xn,A[Qs]=ln-Xn):(x[Qs]=Xn,_[Qs]=ln-Xn)}this.adjustOddEvenCounts(d);let T=4*s.getValue()+(a?0:2)+(c?0:1)-1,D=0,P=0;for(let ut=x.length-1;ut>=0;ut--){if(q.isNotA1left(s,a,c)){let ln=q.WEIGHTS[T][2*ut];P+=x[ut]*ln}D+=x[ut]}let L=0;for(let ut=y.length-1;ut>=0;ut--)if(q.isNotA1left(s,a,c)){let ln=q.WEIGHTS[T][2*ut+1];L+=y[ut]*ln}let W=P+L;if(D&1||D>13||D<4)throw new V;let ne=(13-D)/2,re=q.SYMBOL_WIDEST[ne],Q=9-re,Le=Br.getRSSvalue(x,re,!0),Te=Br.getRSSvalue(y,Q,!1),Mn=q.EVEN_TOTAL_SUBSET[ne],Er=q.GSUM[ne],Bn=Le*Mn+Te+Er;return new Gs(Bn,W)}static isNotA1left(r,s,a){return!(r.getValue()==0&&s&&a)}adjustOddEvenCounts(r){let s=je.sum(new Int32Array(this.getOddCounts())),a=je.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1;s>13?u=!0:s<4&&(c=!0);let d=!1,h=!1;a>13?h=!0:a<4&&(d=!0);let g=s+a-r,x=(s&1)==1,y=(a&1)==0;if(g==1)if(x){if(y)throw new V;u=!0}else{if(!y)throw new V;h=!0}else if(g==-1)if(x){if(y)throw new V;c=!0}else{if(!y)throw new V;d=!0}else if(g==0){if(x){if(!y)throw new V;s<a?(c=!0,h=!0):(u=!0,d=!0)}else if(y)throw new V}else throw new V;if(c){if(u)throw new V;q.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&q.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(h)throw new V;q.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&q.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}q.SYMBOL_WIDEST=[7,5,4,3,1],q.EVEN_TOTAL_SUBSET=[4,20,52,104,204],q.GSUM=[0,348,1388,2948,3988],q.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],q.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],q.FINDER_PAT_A=0,q.FINDER_PAT_B=1,q.FINDER_PAT_C=2,q.FINDER_PAT_D=3,q.FINDER_PAT_E=4,q.FINDER_PAT_F=5,q.FINDER_PATTERN_SEQUENCES=[[q.FINDER_PAT_A,q.FINDER_PAT_A],[q.FINDER_PAT_A,q.FINDER_PAT_B,q.FINDER_PAT_B],[q.FINDER_PAT_A,q.FINDER_PAT_C,q.FINDER_PAT_B,q.FINDER_PAT_D],[q.FINDER_PAT_A,q.FINDER_PAT_E,q.FINDER_PAT_B,q.FINDER_PAT_D,q.FINDER_PAT_C],[q.FINDER_PAT_A,q.FINDER_PAT_E,q.FINDER_PAT_B,q.FINDER_PAT_D,q.FINDER_PAT_D,q.FINDER_PAT_F],[q.FINDER_PAT_A,q.FINDER_PAT_E,q.FINDER_PAT_B,q.FINDER_PAT_D,q.FINDER_PAT_E,q.FINDER_PAT_F,q.FINDER_PAT_F],[q.FINDER_PAT_A,q.FINDER_PAT_A,q.FINDER_PAT_B,q.FINDER_PAT_B,q.FINDER_PAT_C,q.FINDER_PAT_C,q.FINDER_PAT_D,q.FINDER_PAT_D],[q.FINDER_PAT_A,q.FINDER_PAT_A,q.FINDER_PAT_B,q.FINDER_PAT_B,q.FINDER_PAT_C,q.FINDER_PAT_C,q.FINDER_PAT_D,q.FINDER_PAT_E,q.FINDER_PAT_E],[q.FINDER_PAT_A,q.FINDER_PAT_A,q.FINDER_PAT_B,q.FINDER_PAT_B,q.FINDER_PAT_C,q.FINDER_PAT_C,q.FINDER_PAT_D,q.FINDER_PAT_E,q.FINDER_PAT_F,q.FINDER_PAT_F],[q.FINDER_PAT_A,q.FINDER_PAT_A,q.FINDER_PAT_B,q.FINDER_PAT_B,q.FINDER_PAT_C,q.FINDER_PAT_D,q.FINDER_PAT_D,q.FINDER_PAT_E,q.FINDER_PAT_E,q.FINDER_PAT_F,q.FINDER_PAT_F]],q.MAX_PAIRS=11;class NC extends Gs{constructor(r,s,a){super(r,s),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Nt extends pn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,s,a){const c=this.decodePair(s,!1,r,a);Nt.addOrTally(this.possibleLeftPairs,c),s.reverse();let u=this.decodePair(s,!0,r,a);Nt.addOrTally(this.possibleRightPairs,u),s.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&Nt.checkChecksum(d,h))return Nt.constructResult(d,h)}throw new V}static addOrTally(r,s){if(s==null)return;let a=!1;for(let c of r)if(c.getValue()===s.getValue()){c.incrementCount(),a=!0;break}a||r.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,s){let a=4537077*r.getValue()+s.getValue(),c=new String(a).toString(),u=new ke;for(let x=13-c.length;x>0;x--)u.append("0");u.append(c);let d=0;for(let x=0;x<13;x++){let y=u.charAt(x).charCodeAt(0)-48;d+=x&1?y:3*y}d=10-d%10,d===10&&(d=0),u.append(d.toString());let h=r.getFinderPattern().getResultPoints(),g=s.getFinderPattern().getResultPoints();return new ve(u.toString(),null,0,[h[0],h[1],g[0],g[1]],ce.RSS_14,new Date().getTime())}static checkChecksum(r,s){let a=(r.getChecksumPortion()+16*s.getChecksumPortion())%79,c=9*r.getFinderPattern().getValue()+s.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,a===c}decodePair(r,s,a,c){try{let u=this.findFinderPattern(r,s),d=this.parseFoundFinderPattern(r,a,s,u),h=c==null?null:c.get(Z.NEED_RESULT_POINT_CALLBACK);if(h!=null){let y=(u[0]+u[1])/2;s&&(y=r.getSize()-1-y),h.foundPossibleResultPoint(new fe(y,a))}let g=this.decodeDataCharacter(r,d,!0),x=this.decodeDataCharacter(r,d,!1);return new NC(1597*g.getValue()+x.getValue(),g.getChecksumPortion()+4*x.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(r,s,a){let c=this.getDataCharacterCounters();for(let L=0;L<c.length;L++)c[L]=0;if(a)tt.recordPatternInReverse(r,s.getStartEnd()[0],c);else{tt.recordPattern(r,s.getStartEnd()[1]+1,c);for(let L=0,W=c.length-1;L<W;L++,W--){let ne=c[L];c[L]=c[W],c[W]=ne}}let u=a?16:15,d=je.sum(new Int32Array(c))/u,h=this.getOddCounts(),g=this.getEvenCounts(),x=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors();for(let L=0;L<c.length;L++){let W=c[L]/d,ne=Math.floor(W+.5);ne<1?ne=1:ne>8&&(ne=8);let re=Math.floor(L/2);L&1?(g[re]=ne,y[re]=W-ne):(h[re]=ne,x[re]=W-ne)}this.adjustOddEvenCounts(a,u);let _=0,A=0;for(let L=h.length-1;L>=0;L--)A*=9,A+=h[L],_+=h[L];let T=0,D=0;for(let L=g.length-1;L>=0;L--)T*=9,T+=g[L],D+=g[L];let P=A+3*T;if(a){if(_&1||_>12||_<4)throw new V;let L=(12-_)/2,W=Nt.OUTSIDE_ODD_WIDEST[L],ne=9-W,re=Br.getRSSvalue(h,W,!1),Q=Br.getRSSvalue(g,ne,!0),Le=Nt.OUTSIDE_EVEN_TOTAL_SUBSET[L],Te=Nt.OUTSIDE_GSUM[L];return new Gs(re*Le+Q+Te,P)}else{if(D&1||D>10||D<4)throw new V;let L=(10-D)/2,W=Nt.INSIDE_ODD_WIDEST[L],ne=9-W,re=Br.getRSSvalue(h,W,!0),Q=Br.getRSSvalue(g,ne,!1),Le=Nt.INSIDE_ODD_TOTAL_SUBSET[L],Te=Nt.INSIDE_GSUM[L];return new Gs(Q*Le+re+Te,P)}}findFinderPattern(r,s){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=r.getSize(),u=!1,d=0;for(;d<c&&(u=!r.get(d),s!==u);)d++;let h=0,g=d;for(let x=d;x<c;x++)if(r.get(x)!==u)a[h]++;else{if(h===3){if(pn.isFinderPattern(a))return[g,x];g+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,h--}else h++;a[h]=1,u=!u}throw new V}parseFoundFinderPattern(r,s,a,c){let u=r.get(c[0]),d=c[0]-1;for(;d>=0&&u!==r.get(d);)d--;d++;const h=c[0]-d,g=this.getDecodeFinderCounters(),x=new Int32Array(g.length);B.arraycopy(g,0,x,1,g.length-1),x[0]=h;const y=this.parseFinderValue(x,Nt.FINDER_PATTERNS);let _=d,A=c[1];return a&&(_=r.getSize()-1-_,A=r.getSize()-1-A),new Wl(y,[d,c[1]],_,A,s)}adjustOddEvenCounts(r,s){let a=je.sum(new Int32Array(this.getOddCounts())),c=je.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1,h=!1,g=!1;r?(a>12?d=!0:a<4&&(u=!0),c>12?g=!0:c<4&&(h=!0)):(a>11?d=!0:a<5&&(u=!0),c>10?g=!0:c<4&&(h=!0));let x=a+c-s,y=(a&1)===(r?1:0),_=(c&1)===1;if(x===1)if(y){if(_)throw new V;d=!0}else{if(!_)throw new V;g=!0}else if(x===-1)if(y){if(_)throw new V;u=!0}else{if(!_)throw new V;h=!0}else if(x===0){if(y){if(!_)throw new V;a<c?(u=!0,g=!0):(d=!0,h=!0)}else if(_)throw new V}else throw new V;if(u){if(d)throw new V;pn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&pn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(g)throw new V;pn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&pn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Nt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Nt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Nt.OUTSIDE_GSUM=[0,161,961,2015,2715],Nt.INSIDE_GSUM=[0,336,1036,1516],Nt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Nt.INSIDE_ODD_WIDEST=[2,4,6,8],Nt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class $s extends tt{constructor(r,s){super(),this.readers=[],this.verbose=s===!0;const a=r?r.get(Z.POSSIBLE_FORMATS):null,c=r&&r.get(Z.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(ce.EAN_13)||a.includes(ce.UPC_A)||a.includes(ce.EAN_8)||a.includes(ce.UPC_E))&&this.readers.push(new md(r)),a.includes(ce.CODE_39)&&this.readers.push(new Ht(c)),a.includes(ce.CODE_128)&&this.readers.push(new ae),a.includes(ce.ITF)&&this.readers.push(new lt),a.includes(ce.RSS_14)&&this.readers.push(new Nt),a.includes(ce.RSS_EXPANDED)&&this.readers.push(new q(this.verbose))):(this.readers.push(new md(r)),this.readers.push(new Ht),this.readers.push(new md(r)),this.readers.push(new ae),this.readers.push(new lt),this.readers.push(new Nt),this.readers.push(new q(this.verbose)))}decodeRow(r,s,a){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(r,s,a)}catch{}throw new V}reset(){this.readers.forEach(r=>r.reset())}}class kC extends Xe{constructor(r=500,s){super(new $s(s),r,s)}}class et{constructor(r,s,a){this.ecCodewords=r,this.ecBlocks=[s],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class qe{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ue{constructor(r,s,a,c,u,d){this.versionNumber=r,this.symbolSizeRows=s,this.symbolSizeColumns=a,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=u,this.ecBlocks=d;let h=0;const g=d.getECCodewords(),x=d.getECBlocks();for(let y of x)h+=y.getCount()*(y.getDataCodewords()+g);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,s){if(r&1||s&1)throw new U;for(let a of Ue.VERSIONS)if(a.symbolSizeRows===r&&a.symbolSizeColumns===s)return a;throw new U}toString(){return""+this.versionNumber}static buildVersions(){return[new Ue(1,10,10,8,8,new et(5,new qe(1,3))),new Ue(2,12,12,10,10,new et(7,new qe(1,5))),new Ue(3,14,14,12,12,new et(10,new qe(1,8))),new Ue(4,16,16,14,14,new et(12,new qe(1,12))),new Ue(5,18,18,16,16,new et(14,new qe(1,18))),new Ue(6,20,20,18,18,new et(18,new qe(1,22))),new Ue(7,22,22,20,20,new et(20,new qe(1,30))),new Ue(8,24,24,22,22,new et(24,new qe(1,36))),new Ue(9,26,26,24,24,new et(28,new qe(1,44))),new Ue(10,32,32,14,14,new et(36,new qe(1,62))),new Ue(11,36,36,16,16,new et(42,new qe(1,86))),new Ue(12,40,40,18,18,new et(48,new qe(1,114))),new Ue(13,44,44,20,20,new et(56,new qe(1,144))),new Ue(14,48,48,22,22,new et(68,new qe(1,174))),new Ue(15,52,52,24,24,new et(42,new qe(2,102))),new Ue(16,64,64,14,14,new et(56,new qe(2,140))),new Ue(17,72,72,16,16,new et(36,new qe(4,92))),new Ue(18,80,80,18,18,new et(48,new qe(4,114))),new Ue(19,88,88,20,20,new et(56,new qe(4,144))),new Ue(20,96,96,22,22,new et(68,new qe(4,174))),new Ue(21,104,104,24,24,new et(56,new qe(6,136))),new Ue(22,120,120,18,18,new et(68,new qe(6,175))),new Ue(23,132,132,20,20,new et(62,new qe(8,163))),new Ue(24,144,144,22,22,new et(62,new qe(8,156),new qe(2,155))),new Ue(25,8,18,6,16,new et(7,new qe(1,5))),new Ue(26,8,32,6,14,new et(11,new qe(1,10))),new Ue(27,12,26,10,24,new et(14,new qe(1,16))),new Ue(28,12,36,10,16,new et(18,new qe(1,22))),new Ue(29,16,36,14,16,new et(24,new qe(1,32))),new Ue(30,16,48,14,22,new et(28,new qe(1,49)))]}}Ue.VERSIONS=Ue.buildVersions();class vd{constructor(r){const s=r.getHeight();if(s<8||s>144||s&1)throw new U;this.version=vd.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new Ie(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const s=r.getHeight(),a=r.getWidth();return Ue.getVersionForDimensions(s,a)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let s=0,a=4,c=0;const u=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let h=!1,g=!1,x=!1,y=!1;do if(a===u&&c===0&&!h)r[s++]=this.readCorner1(u,d)&255,a-=2,c+=2,h=!0;else if(a===u-2&&c===0&&d&3&&!g)r[s++]=this.readCorner2(u,d)&255,a-=2,c+=2,g=!0;else if(a===u+4&&c===2&&!(d&7)&&!x)r[s++]=this.readCorner3(u,d)&255,a-=2,c+=2,x=!0;else if(a===u-2&&c===0&&(d&7)===4&&!y)r[s++]=this.readCorner4(u,d)&255,a-=2,c+=2,y=!0;else{do a<u&&c>=0&&!this.readMappingMatrix.get(c,a)&&(r[s++]=this.readUtah(a,c,u,d)&255),a-=2,c+=2;while(a>=0&&c<d);a+=1,c+=3;do a>=0&&c<d&&!this.readMappingMatrix.get(c,a)&&(r[s++]=this.readUtah(a,c,u,d)&255),a+=2,c-=2;while(a<u&&c>=0);a+=3,c+=1}while(a<u||c<d);if(s!==this.version.getTotalCodewords())throw new U;return r}readModule(r,s,a,c){return r<0&&(r+=a,s+=4-(a+4&7)),s<0&&(s+=c,r+=4-(c+4&7)),this.readMappingMatrix.set(s,r),this.mappingBitMatrix.get(s,r)}readUtah(r,s,a,c){let u=0;return this.readModule(r-2,s-2,a,c)&&(u|=1),u<<=1,this.readModule(r-2,s-1,a,c)&&(u|=1),u<<=1,this.readModule(r-1,s-2,a,c)&&(u|=1),u<<=1,this.readModule(r-1,s-1,a,c)&&(u|=1),u<<=1,this.readModule(r-1,s,a,c)&&(u|=1),u<<=1,this.readModule(r,s-2,a,c)&&(u|=1),u<<=1,this.readModule(r,s-1,a,c)&&(u|=1),u<<=1,this.readModule(r,s,a,c)&&(u|=1),u}readCorner1(r,s){let a=0;return this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,1,r,s)&&(a|=1),a<<=1,this.readModule(r-1,2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(2,s-1,r,s)&&(a|=1),a<<=1,this.readModule(3,s-1,r,s)&&(a|=1),a}readCorner2(r,s){let a=0;return this.readModule(r-3,0,r,s)&&(a|=1),a<<=1,this.readModule(r-2,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(0,s-4,r,s)&&(a|=1),a<<=1,this.readModule(0,s-3,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a}readCorner3(r,s){let a=0;return this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(0,s-3,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-3,r,s)&&(a|=1),a<<=1,this.readModule(1,s-2,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a}readCorner4(r,s){let a=0;return this.readModule(r-3,0,r,s)&&(a|=1),a<<=1,this.readModule(r-2,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(2,s-1,r,s)&&(a|=1),a<<=1,this.readModule(3,s-1,r,s)&&(a|=1),a}extractDataRegion(r){const s=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(r.getHeight()!==s)throw new v("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),d=s/c|0,h=a/u|0,g=d*c,x=h*u,y=new Ie(x,g);for(let _=0;_<d;++_){const A=_*c;for(let T=0;T<h;++T){const D=T*u;for(let P=0;P<c;++P){const L=_*(c+2)+1+P,W=A+P;for(let ne=0;ne<u;++ne){const re=T*(u+2)+1+ne;if(r.get(re,L)){const Q=D+ne;y.set(Q,W)}}}}}return y}}class Cd{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s){const a=s.getECBlocks();let c=0;const u=a.getECBlocks();for(let P of u)c+=P.getCount();const d=new Array(c);let h=0;for(let P of u)for(let L=0;L<P.getCount();L++){const W=P.getDataCodewords(),ne=a.getECCodewords()+W;d[h++]=new Cd(W,new Uint8Array(ne))}const x=d[0].codewords.length-a.getECCodewords(),y=x-1;let _=0;for(let P=0;P<y;P++)for(let L=0;L<h;L++)d[L].codewords[P]=r[_++];const A=s.getVersionNumber()===24,T=A?8:h;for(let P=0;P<T;P++)d[P].codewords[x-1]=r[_++];const D=d[0].codewords.length;for(let P=x;P<D;P++)for(let L=0;L<h;L++){const W=A?(L+8)%h:L,ne=A&&W>7?P-1:P;d[W].codewords[ne]=r[_++]}if(_!==r.length)throw new v;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class _d{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new v(""+r);let s=0,a=this.bitOffset,c=this.byteOffset;const u=this.bytes;if(a>0){const d=8-a,h=r<d?r:d,g=d-h,x=255>>8-h<<g;s=(u[c]&x)>>g,r-=h,a+=h,a===8&&(a=0,c++)}if(r>0){for(;r>=8;)s=s<<8|u[c]&255,c++,r-=8;if(r>0){const d=8-r,h=255>>d<<d;s=s<<r|(u[c]&h)>>d,a+=r}}return this.bitOffset=a,this.byteOffset=c,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Gt;(function(C){C[C.PAD_ENCODE=0]="PAD_ENCODE",C[C.ASCII_ENCODE=1]="ASCII_ENCODE",C[C.C40_ENCODE=2]="C40_ENCODE",C[C.TEXT_ENCODE=3]="TEXT_ENCODE",C[C.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",C[C.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",C[C.BASE256_ENCODE=6]="BASE256_ENCODE"})(Gt||(Gt={}));class yi{static decode(r){const s=new _d(r),a=new ke,c=new ke,u=new Array;let d=Gt.ASCII_ENCODE;do if(d===Gt.ASCII_ENCODE)d=this.decodeAsciiSegment(s,a,c);else{switch(d){case Gt.C40_ENCODE:this.decodeC40Segment(s,a);break;case Gt.TEXT_ENCODE:this.decodeTextSegment(s,a);break;case Gt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,a);break;case Gt.EDIFACT_ENCODE:this.decodeEdifactSegment(s,a);break;case Gt.BASE256_ENCODE:this.decodeBase256Segment(s,a,u);break;default:throw new U}d=Gt.ASCII_ENCODE}while(d!==Gt.PAD_ENCODE&&s.available()>0);return c.length()>0&&a.append(c.toString()),new Pr(r,a.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(r,s,a){let c=!1;do{let u=r.readBits(8);if(u===0)throw new U;if(u<=128)return c&&(u+=128),s.append(String.fromCharCode(u-1)),Gt.ASCII_ENCODE;if(u===129)return Gt.PAD_ENCODE;if(u<=229){const d=u-130;d<10&&s.append("0"),s.append(""+d)}else switch(u){case 230:return Gt.C40_ENCODE;case 231:return Gt.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:s.append("[)>05"),a.insert(0,"");break;case 237:s.append("[)>06"),a.insert(0,"");break;case 238:return Gt.ANSIX12_ENCODE;case 239:return Gt.TEXT_ENCODE;case 240:return Gt.EDIFACT_ENCODE;case 241:break;default:if(u!==254||r.available()!==0)throw new U;break}}while(r.available()>0);return Gt.ASCII_ENCODE}static decodeC40Segment(r,s){let a=!1;const c=[];let u=0;do{if(r.available()===8)return;const d=r.readBits(8);if(d===254)return;this.parseTwoBytes(d,r.readBits(8),c);for(let h=0;h<3;h++){const g=c[h];switch(u){case 0:if(g<3)u=g+1;else if(g<this.C40_BASIC_SET_CHARS.length){const x=this.C40_BASIC_SET_CHARS[g];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x)}else throw new U;break;case 1:a?(s.append(String.fromCharCode(g+128)),a=!1):s.append(String.fromCharCode(g)),u=0;break;case 2:if(g<this.C40_SHIFT2_SET_CHARS.length){const x=this.C40_SHIFT2_SET_CHARS[g];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x)}else switch(g){case 27:s.append("");break;case 30:a=!0;break;default:throw new U}u=0;break;case 3:a?(s.append(String.fromCharCode(g+224)),a=!1):s.append(String.fromCharCode(g+96)),u=0;break;default:throw new U}}}while(r.available()>0)}static decodeTextSegment(r,s){let a=!1,c=[],u=0;do{if(r.available()===8)return;const d=r.readBits(8);if(d===254)return;this.parseTwoBytes(d,r.readBits(8),c);for(let h=0;h<3;h++){const g=c[h];switch(u){case 0:if(g<3)u=g+1;else if(g<this.TEXT_BASIC_SET_CHARS.length){const x=this.TEXT_BASIC_SET_CHARS[g];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x)}else throw new U;break;case 1:a?(s.append(String.fromCharCode(g+128)),a=!1):s.append(String.fromCharCode(g)),u=0;break;case 2:if(g<this.TEXT_SHIFT2_SET_CHARS.length){const x=this.TEXT_SHIFT2_SET_CHARS[g];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x)}else switch(g){case 27:s.append("");break;case 30:a=!0;break;default:throw new U}u=0;break;case 3:if(g<this.TEXT_SHIFT3_SET_CHARS.length){const x=this.TEXT_SHIFT3_SET_CHARS[g];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x),u=0}else throw new U;break;default:throw new U}}}while(r.available()>0)}static decodeAnsiX12Segment(r,s){const a=[];do{if(r.available()===8)return;const c=r.readBits(8);if(c===254)return;this.parseTwoBytes(c,r.readBits(8),a);for(let u=0;u<3;u++){const d=a[u];switch(d){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(d<14)s.append(String.fromCharCode(d+44));else if(d<40)s.append(String.fromCharCode(d+51));else throw new U;break}}}while(r.available()>0)}static parseTwoBytes(r,s,a){let c=(r<<8)+s-1,u=Math.floor(c/1600);a[0]=u,c-=u*1600,u=Math.floor(c/40),a[1]=u,a[2]=c-u*40}static decodeEdifactSegment(r,s){do{if(r.available()<=16)return;for(let a=0;a<4;a++){let c=r.readBits(6);if(c===31){const u=8-r.getBitOffset();u!==8&&r.readBits(u);return}c&32||(c|=64),s.append(String.fromCharCode(c))}}while(r.available()>0)}static decodeBase256Segment(r,s,a){let c=1+r.getByteOffset();const u=this.unrandomize255State(r.readBits(8),c++);let d;if(u===0?d=r.available()/8|0:u<250?d=u:d=250*(u-249)+this.unrandomize255State(r.readBits(8),c++),d<0)throw new U;const h=new Uint8Array(d);for(let g=0;g<d;g++){if(r.available()<8)throw new U;h[g]=this.unrandomize255State(r.readBits(8),c++)}a.push(h);try{s.append(Qe.decode(h,ge.ISO88591))}catch(g){throw new ir("Platform does not support required encoding: "+g.message)}}static unrandomize255State(r,s){const a=149*s%255+1,c=r-a;return c>=0?c:c+256}}yi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],yi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],yi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],yi.TEXT_SHIFT2_SET_CHARS=yi.C40_SHIFT2_SET_CHARS,yi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class RC{constructor(){this.rsDecoder=new wi(ze.DATA_MATRIX_FIELD_256)}decode(r){const s=new vd(r),a=s.getVersion(),c=s.readCodewords(),u=Cd.getDataBlocks(c,a);let d=0;for(let x of u)d+=x.getNumDataCodewords();const h=new Uint8Array(d),g=u.length;for(let x=0;x<g;x++){const y=u[x],_=y.getCodewords(),A=y.getNumDataCodewords();this.correctErrors(_,A);for(let T=0;T<A;T++)h[T*g+x]=_[T]}return yi.decode(h)}correctErrors(r,s){const a=new Int32Array(r);try{this.rsDecoder.decode(a,r.length-s)}catch{throw new R}for(let c=0;c<s;c++)r[c]=a[c]}}class Bt{constructor(r){this.image=r,this.rectangleDetector=new Cr(this.image)}detect(){const r=this.rectangleDetector.detect();let s=this.detectSolid1(r);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new V;s=this.shiftToModuleCenter(s);const a=s[0],c=s[1],u=s[2],d=s[3];let h=this.transitionsBetween(a,d)+1,g=this.transitionsBetween(u,d)+1;(h&1)===1&&(h+=1),(g&1)===1&&(g+=1),4*h<7*g&&4*g<7*h&&(h=g=Math.max(h,g));let x=Bt.sampleGrid(this.image,a,c,u,d,h,g);return new rs(x,[a,c,u,d])}static shiftPoint(r,s,a){let c=(s.getX()-r.getX())/(a+1),u=(s.getY()-r.getY())/(a+1);return new fe(r.getX()+c,r.getY()+u)}static moveAway(r,s,a){let c=r.getX(),u=r.getY();return c<s?c-=1:c+=1,u<a?u-=1:u+=1,new fe(c,u)}detectSolid1(r){let s=r[0],a=r[1],c=r[3],u=r[2],d=this.transitionsBetween(s,a),h=this.transitionsBetween(a,c),g=this.transitionsBetween(c,u),x=this.transitionsBetween(u,s),y=d,_=[u,s,a,c];return y>h&&(y=h,_[0]=s,_[1]=a,_[2]=c,_[3]=u),y>g&&(y=g,_[0]=a,_[1]=c,_[2]=u,_[3]=s),y>x&&(_[0]=c,_[1]=u,_[2]=s,_[3]=a),_}detectSolid2(r){let s=r[0],a=r[1],c=r[2],u=r[3],d=this.transitionsBetween(s,u),h=Bt.shiftPoint(a,c,(d+1)*4),g=Bt.shiftPoint(c,a,(d+1)*4),x=this.transitionsBetween(h,s),y=this.transitionsBetween(g,u);return x<y?(r[0]=s,r[1]=a,r[2]=c,r[3]=u):(r[0]=a,r[1]=c,r[2]=u,r[3]=s),r}correctTopRight(r){let s=r[0],a=r[1],c=r[2],u=r[3],d=this.transitionsBetween(s,u),h=this.transitionsBetween(a,u),g=Bt.shiftPoint(s,a,(h+1)*4),x=Bt.shiftPoint(c,a,(d+1)*4);d=this.transitionsBetween(g,u),h=this.transitionsBetween(x,u);let y=new fe(u.getX()+(c.getX()-a.getX())/(d+1),u.getY()+(c.getY()-a.getY())/(d+1)),_=new fe(u.getX()+(s.getX()-a.getX())/(h+1),u.getY()+(s.getY()-a.getY())/(h+1));if(!this.isValid(y))return this.isValid(_)?_:null;if(!this.isValid(_))return y;let A=this.transitionsBetween(g,y)+this.transitionsBetween(x,y),T=this.transitionsBetween(g,_)+this.transitionsBetween(x,_);return A>T?y:_}shiftToModuleCenter(r){let s=r[0],a=r[1],c=r[2],u=r[3],d=this.transitionsBetween(s,u)+1,h=this.transitionsBetween(c,u)+1,g=Bt.shiftPoint(s,a,h*4),x=Bt.shiftPoint(c,a,d*4);d=this.transitionsBetween(g,u)+1,h=this.transitionsBetween(x,u)+1,(d&1)===1&&(d+=1),(h&1)===1&&(h+=1);let y=(s.getX()+a.getX()+c.getX()+u.getX())/4,_=(s.getY()+a.getY()+c.getY()+u.getY())/4;s=Bt.moveAway(s,y,_),a=Bt.moveAway(a,y,_),c=Bt.moveAway(c,y,_),u=Bt.moveAway(u,y,_);let A,T;return g=Bt.shiftPoint(s,a,h*4),g=Bt.shiftPoint(g,u,d*4),A=Bt.shiftPoint(a,s,h*4),A=Bt.shiftPoint(A,c,d*4),x=Bt.shiftPoint(c,u,h*4),x=Bt.shiftPoint(x,a,d*4),T=Bt.shiftPoint(u,c,h*4),T=Bt.shiftPoint(T,s,d*4),[g,A,x,T]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,s,a,c,u,d,h){return De.getInstance().sampleGrid(r,d,h,.5,.5,d-.5,.5,d-.5,h-.5,.5,h-.5,s.getX(),s.getY(),u.getX(),u.getY(),c.getX(),c.getY(),a.getX(),a.getY())}transitionsBetween(r,s){let a=Math.trunc(r.getX()),c=Math.trunc(r.getY()),u=Math.trunc(s.getX()),d=Math.trunc(s.getY()),h=Math.abs(d-c)>Math.abs(u-a);if(h){let P=a;a=c,c=P,P=u,u=d,d=P}let g=Math.abs(u-a),x=Math.abs(d-c),y=-g/2,_=c<d?1:-1,A=a<u?1:-1,T=0,D=this.image.get(h?c:a,h?a:c);for(let P=a,L=c;P!==u;P+=A){let W=this.image.get(h?L:P,h?P:L);if(W!==D&&(T++,D=W),y+=x,y>0){if(L===d)break;L+=_,y-=g}}return T}}class vi{constructor(){this.decoder=new RC}decode(r,s=null){let a,c;if(s!=null&&s.has(Z.PURE_BARCODE)){const x=vi.extractPureBits(r.getBlackMatrix());a=this.decoder.decode(x),c=vi.NO_POINTS}else{const x=new Bt(r.getBlackMatrix()).detect();a=this.decoder.decode(x.getBits()),c=x.getPoints()}const u=a.getRawBytes(),d=new ve(a.getText(),u,8*u.length,c,ce.DATA_MATRIX,B.currentTimeMillis()),h=a.getByteSegments();h!=null&&d.putMetadata(Oe.BYTE_SEGMENTS,h);const g=a.getECLevel();return g!=null&&d.putMetadata(Oe.ERROR_CORRECTION_LEVEL,g),d}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),a=r.getBottomRightOnBit();if(s==null||a==null)throw new V;const c=this.moduleSize(s,r);let u=s[1];const d=a[1];let h=s[0];const x=(a[0]-h+1)/c,y=(d-u+1)/c;if(x<=0||y<=0)throw new V;const _=c/2;u+=_,h+=_;const A=new Ie(x,y);for(let T=0;T<y;T++){const D=u+T*c;for(let P=0;P<x;P++)r.get(h+P*c,D)&&A.set(P,T)}return A}static moduleSize(r,s){const a=s.getWidth();let c=r[0];const u=r[1];for(;c<a&&s.get(c,u);)c++;if(c===a)throw new V;const d=c-r[0];if(d===0)throw new V;return d}}vi.NO_POINTS=[];class OC extends Xe{constructor(r=500){super(new vi,r)}}var Ks;(function(C){C[C.L=0]="L",C[C.M=1]="M",C[C.Q=2]="Q",C[C.H=3]="H"})(Ks||(Ks={}));class dt{constructor(r,s,a){this.value=r,this.stringValue=s,this.bits=a,dt.FOR_BITS.set(a,this),dt.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return dt.L;case"M":return dt.M;case"Q":return dt.Q;case"H":return dt.H;default:throw new E(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof dt))return!1;const s=r;return this.value===s.value}static forBits(r){if(r<0||r>=dt.FOR_BITS.size)throw new v;return dt.FOR_BITS.get(r)}}dt.FOR_BITS=new Map,dt.FOR_VALUE=new Map,dt.L=new dt(Ks.L,"L",1),dt.M=new dt(Ks.M,"M",0),dt.Q=new dt(Ks.Q,"Q",3),dt.H=new dt(Ks.H,"H",2);class mn{constructor(r){this.errorCorrectionLevel=dt.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,s){return N.bitCount(r^s)}static decodeFormatInformation(r,s){const a=mn.doDecodeFormatInformation(r,s);return a!==null?a:mn.doDecodeFormatInformation(r^mn.FORMAT_INFO_MASK_QR,s^mn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,s){let a=Number.MAX_SAFE_INTEGER,c=0;for(const u of mn.FORMAT_INFO_DECODE_LOOKUP){const d=u[0];if(d===r||d===s)return new mn(u[1]);let h=mn.numBitsDiffering(r,d);h<a&&(c=u[1],a=h),r!==s&&(h=mn.numBitsDiffering(s,d),h<a&&(c=u[1],a=h))}return a<=3?new mn(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof mn))return!1;const s=r;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}mn.FORMAT_INFO_MASK_QR=21522,mn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class F{constructor(r,...s){this.ecCodewordsPerBlock=r,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const s=this.ecBlocks;for(const a of s)r+=a.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class I{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class pe{constructor(r,s,...a){this.versionNumber=r,this.alignmentPatternCenters=s,this.ecBlocks=a;let c=0;const u=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();for(const h of d)c+=h.getCount()*(h.getDataCodewords()+u);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new U;try{return this.getVersionForNumber((r-17)/4)}catch{throw new U}}static getVersionForNumber(r){if(r<1||r>40)throw new v;return pe.VERSIONS[r-1]}static decodeVersionInformation(r){let s=Number.MAX_SAFE_INTEGER,a=0;for(let c=0;c<pe.VERSION_DECODE_INFO.length;c++){const u=pe.VERSION_DECODE_INFO[c];if(u===r)return pe.getVersionForNumber(c+7);const d=mn.numBitsDiffering(r,u);d<s&&(a=c+7,s=d)}return s<=3?pe.getVersionForNumber(a):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),s=new Ie(r);s.setRegion(0,0,9,9),s.setRegion(r-8,0,8,9),s.setRegion(0,r-8,9,8);const a=this.alignmentPatternCenters.length;for(let c=0;c<a;c++){const u=this.alignmentPatternCenters[c]-2;for(let d=0;d<a;d++)c===0&&(d===0||d===a-1)||c===a-1&&d===0||s.setRegion(this.alignmentPatternCenters[d]-2,u,5,5)}return s.setRegion(6,9,1,r-17),s.setRegion(9,6,r-17,1),this.versionNumber>6&&(s.setRegion(r-11,0,3,6),s.setRegion(0,r-11,6,3)),s}toString(){return""+this.versionNumber}}pe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),pe.VERSIONS=[new pe(1,new Int32Array(0),new F(7,new I(1,19)),new F(10,new I(1,16)),new F(13,new I(1,13)),new F(17,new I(1,9))),new pe(2,Int32Array.from([6,18]),new F(10,new I(1,34)),new F(16,new I(1,28)),new F(22,new I(1,22)),new F(28,new I(1,16))),new pe(3,Int32Array.from([6,22]),new F(15,new I(1,55)),new F(26,new I(1,44)),new F(18,new I(2,17)),new F(22,new I(2,13))),new pe(4,Int32Array.from([6,26]),new F(20,new I(1,80)),new F(18,new I(2,32)),new F(26,new I(2,24)),new F(16,new I(4,9))),new pe(5,Int32Array.from([6,30]),new F(26,new I(1,108)),new F(24,new I(2,43)),new F(18,new I(2,15),new I(2,16)),new F(22,new I(2,11),new I(2,12))),new pe(6,Int32Array.from([6,34]),new F(18,new I(2,68)),new F(16,new I(4,27)),new F(24,new I(4,19)),new F(28,new I(4,15))),new pe(7,Int32Array.from([6,22,38]),new F(20,new I(2,78)),new F(18,new I(4,31)),new F(18,new I(2,14),new I(4,15)),new F(26,new I(4,13),new I(1,14))),new pe(8,Int32Array.from([6,24,42]),new F(24,new I(2,97)),new F(22,new I(2,38),new I(2,39)),new F(22,new I(4,18),new I(2,19)),new F(26,new I(4,14),new I(2,15))),new pe(9,Int32Array.from([6,26,46]),new F(30,new I(2,116)),new F(22,new I(3,36),new I(2,37)),new F(20,new I(4,16),new I(4,17)),new F(24,new I(4,12),new I(4,13))),new pe(10,Int32Array.from([6,28,50]),new F(18,new I(2,68),new I(2,69)),new F(26,new I(4,43),new I(1,44)),new F(24,new I(6,19),new I(2,20)),new F(28,new I(6,15),new I(2,16))),new pe(11,Int32Array.from([6,30,54]),new F(20,new I(4,81)),new F(30,new I(1,50),new I(4,51)),new F(28,new I(4,22),new I(4,23)),new F(24,new I(3,12),new I(8,13))),new pe(12,Int32Array.from([6,32,58]),new F(24,new I(2,92),new I(2,93)),new F(22,new I(6,36),new I(2,37)),new F(26,new I(4,20),new I(6,21)),new F(28,new I(7,14),new I(4,15))),new pe(13,Int32Array.from([6,34,62]),new F(26,new I(4,107)),new F(22,new I(8,37),new I(1,38)),new F(24,new I(8,20),new I(4,21)),new F(22,new I(12,11),new I(4,12))),new pe(14,Int32Array.from([6,26,46,66]),new F(30,new I(3,115),new I(1,116)),new F(24,new I(4,40),new I(5,41)),new F(20,new I(11,16),new I(5,17)),new F(24,new I(11,12),new I(5,13))),new pe(15,Int32Array.from([6,26,48,70]),new F(22,new I(5,87),new I(1,88)),new F(24,new I(5,41),new I(5,42)),new F(30,new I(5,24),new I(7,25)),new F(24,new I(11,12),new I(7,13))),new pe(16,Int32Array.from([6,26,50,74]),new F(24,new I(5,98),new I(1,99)),new F(28,new I(7,45),new I(3,46)),new F(24,new I(15,19),new I(2,20)),new F(30,new I(3,15),new I(13,16))),new pe(17,Int32Array.from([6,30,54,78]),new F(28,new I(1,107),new I(5,108)),new F(28,new I(10,46),new I(1,47)),new F(28,new I(1,22),new I(15,23)),new F(28,new I(2,14),new I(17,15))),new pe(18,Int32Array.from([6,30,56,82]),new F(30,new I(5,120),new I(1,121)),new F(26,new I(9,43),new I(4,44)),new F(28,new I(17,22),new I(1,23)),new F(28,new I(2,14),new I(19,15))),new pe(19,Int32Array.from([6,30,58,86]),new F(28,new I(3,113),new I(4,114)),new F(26,new I(3,44),new I(11,45)),new F(26,new I(17,21),new I(4,22)),new F(26,new I(9,13),new I(16,14))),new pe(20,Int32Array.from([6,34,62,90]),new F(28,new I(3,107),new I(5,108)),new F(26,new I(3,41),new I(13,42)),new F(30,new I(15,24),new I(5,25)),new F(28,new I(15,15),new I(10,16))),new pe(21,Int32Array.from([6,28,50,72,94]),new F(28,new I(4,116),new I(4,117)),new F(26,new I(17,42)),new F(28,new I(17,22),new I(6,23)),new F(30,new I(19,16),new I(6,17))),new pe(22,Int32Array.from([6,26,50,74,98]),new F(28,new I(2,111),new I(7,112)),new F(28,new I(17,46)),new F(30,new I(7,24),new I(16,25)),new F(24,new I(34,13))),new pe(23,Int32Array.from([6,30,54,78,102]),new F(30,new I(4,121),new I(5,122)),new F(28,new I(4,47),new I(14,48)),new F(30,new I(11,24),new I(14,25)),new F(30,new I(16,15),new I(14,16))),new pe(24,Int32Array.from([6,28,54,80,106]),new F(30,new I(6,117),new I(4,118)),new F(28,new I(6,45),new I(14,46)),new F(30,new I(11,24),new I(16,25)),new F(30,new I(30,16),new I(2,17))),new pe(25,Int32Array.from([6,32,58,84,110]),new F(26,new I(8,106),new I(4,107)),new F(28,new I(8,47),new I(13,48)),new F(30,new I(7,24),new I(22,25)),new F(30,new I(22,15),new I(13,16))),new pe(26,Int32Array.from([6,30,58,86,114]),new F(28,new I(10,114),new I(2,115)),new F(28,new I(19,46),new I(4,47)),new F(28,new I(28,22),new I(6,23)),new F(30,new I(33,16),new I(4,17))),new pe(27,Int32Array.from([6,34,62,90,118]),new F(30,new I(8,122),new I(4,123)),new F(28,new I(22,45),new I(3,46)),new F(30,new I(8,23),new I(26,24)),new F(30,new I(12,15),new I(28,16))),new pe(28,Int32Array.from([6,26,50,74,98,122]),new F(30,new I(3,117),new I(10,118)),new F(28,new I(3,45),new I(23,46)),new F(30,new I(4,24),new I(31,25)),new F(30,new I(11,15),new I(31,16))),new pe(29,Int32Array.from([6,30,54,78,102,126]),new F(30,new I(7,116),new I(7,117)),new F(28,new I(21,45),new I(7,46)),new F(30,new I(1,23),new I(37,24)),new F(30,new I(19,15),new I(26,16))),new pe(30,Int32Array.from([6,26,52,78,104,130]),new F(30,new I(5,115),new I(10,116)),new F(28,new I(19,47),new I(10,48)),new F(30,new I(15,24),new I(25,25)),new F(30,new I(23,15),new I(25,16))),new pe(31,Int32Array.from([6,30,56,82,108,134]),new F(30,new I(13,115),new I(3,116)),new F(28,new I(2,46),new I(29,47)),new F(30,new I(42,24),new I(1,25)),new F(30,new I(23,15),new I(28,16))),new pe(32,Int32Array.from([6,34,60,86,112,138]),new F(30,new I(17,115)),new F(28,new I(10,46),new I(23,47)),new F(30,new I(10,24),new I(35,25)),new F(30,new I(19,15),new I(35,16))),new pe(33,Int32Array.from([6,30,58,86,114,142]),new F(30,new I(17,115),new I(1,116)),new F(28,new I(14,46),new I(21,47)),new F(30,new I(29,24),new I(19,25)),new F(30,new I(11,15),new I(46,16))),new pe(34,Int32Array.from([6,34,62,90,118,146]),new F(30,new I(13,115),new I(6,116)),new F(28,new I(14,46),new I(23,47)),new F(30,new I(44,24),new I(7,25)),new F(30,new I(59,16),new I(1,17))),new pe(35,Int32Array.from([6,30,54,78,102,126,150]),new F(30,new I(12,121),new I(7,122)),new F(28,new I(12,47),new I(26,48)),new F(30,new I(39,24),new I(14,25)),new F(30,new I(22,15),new I(41,16))),new pe(36,Int32Array.from([6,24,50,76,102,128,154]),new F(30,new I(6,121),new I(14,122)),new F(28,new I(6,47),new I(34,48)),new F(30,new I(46,24),new I(10,25)),new F(30,new I(2,15),new I(64,16))),new pe(37,Int32Array.from([6,28,54,80,106,132,158]),new F(30,new I(17,122),new I(4,123)),new F(28,new I(29,46),new I(14,47)),new F(30,new I(49,24),new I(10,25)),new F(30,new I(24,15),new I(46,16))),new pe(38,Int32Array.from([6,32,58,84,110,136,162]),new F(30,new I(4,122),new I(18,123)),new F(28,new I(13,46),new I(32,47)),new F(30,new I(48,24),new I(14,25)),new F(30,new I(42,15),new I(32,16))),new pe(39,Int32Array.from([6,26,54,82,110,138,166]),new F(30,new I(20,117),new I(4,118)),new F(28,new I(40,47),new I(7,48)),new F(30,new I(43,24),new I(22,25)),new F(30,new I(10,15),new I(67,16))),new pe(40,Int32Array.from([6,30,58,86,114,142,170]),new F(30,new I(19,118),new I(6,119)),new F(28,new I(18,47),new I(31,48)),new F(30,new I(34,24),new I(34,25)),new F(30,new I(20,15),new I(61,16)))];var Zt;(function(C){C[C.DATA_MASK_000=0]="DATA_MASK_000",C[C.DATA_MASK_001=1]="DATA_MASK_001",C[C.DATA_MASK_010=2]="DATA_MASK_010",C[C.DATA_MASK_011=3]="DATA_MASK_011",C[C.DATA_MASK_100=4]="DATA_MASK_100",C[C.DATA_MASK_101=5]="DATA_MASK_101",C[C.DATA_MASK_110=6]="DATA_MASK_110",C[C.DATA_MASK_111=7]="DATA_MASK_111"})(Zt||(Zt={}));class ar{constructor(r,s){this.value=r,this.isMasked=s}unmaskBitMatrix(r,s){for(let a=0;a<s;a++)for(let c=0;c<s;c++)this.isMasked(a,c)&&r.flip(c,a)}}ar.values=new Map([[Zt.DATA_MASK_000,new ar(Zt.DATA_MASK_000,(C,r)=>(C+r&1)===0)],[Zt.DATA_MASK_001,new ar(Zt.DATA_MASK_001,(C,r)=>(C&1)===0)],[Zt.DATA_MASK_010,new ar(Zt.DATA_MASK_010,(C,r)=>r%3===0)],[Zt.DATA_MASK_011,new ar(Zt.DATA_MASK_011,(C,r)=>(C+r)%3===0)],[Zt.DATA_MASK_100,new ar(Zt.DATA_MASK_100,(C,r)=>(Math.floor(C/2)+Math.floor(r/3)&1)===0)],[Zt.DATA_MASK_101,new ar(Zt.DATA_MASK_101,(C,r)=>C*r%6===0)],[Zt.DATA_MASK_110,new ar(Zt.DATA_MASK_110,(C,r)=>C*r%6<3)],[Zt.DATA_MASK_111,new ar(Zt.DATA_MASK_111,(C,r)=>(C+r+C*r%3&1)===0)]]);class DC{constructor(r){const s=r.getHeight();if(s<21||(s&3)!==1)throw new U;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let u=0;u<6;u++)r=this.copyBit(u,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let u=5;u>=0;u--)r=this.copyBit(8,u,r);const s=this.bitMatrix.getHeight();let a=0;const c=s-7;for(let u=s-1;u>=c;u--)a=this.copyBit(8,u,a);for(let u=s-8;u<s;u++)a=this.copyBit(u,8,a);if(this.parsedFormatInfo=mn.decodeFormatInformation(r,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new U}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),s=Math.floor((r-17)/4);if(s<=6)return pe.getVersionForNumber(s);let a=0;const c=r-11;for(let d=5;d>=0;d--)for(let h=r-9;h>=c;h--)a=this.copyBit(h,d,a);let u=pe.decodeVersionInformation(a);if(u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;a=0;for(let d=5;d>=0;d--)for(let h=r-9;h>=c;h--)a=this.copyBit(d,h,a);if(u=pe.decodeVersionInformation(a),u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;throw new U}copyBit(r,s,a){return(this.isMirror?this.bitMatrix.get(s,r):this.bitMatrix.get(r,s))?a<<1|1:a<<1}readCodewords(){const r=this.readFormatInformation(),s=this.readVersion(),a=ar.values.get(r.getDataMask()),c=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,c);const u=s.buildFunctionPattern();let d=!0;const h=new Uint8Array(s.getTotalCodewords());let g=0,x=0,y=0;for(let _=c-1;_>0;_-=2){_===6&&_--;for(let A=0;A<c;A++){const T=d?c-1-A:A;for(let D=0;D<2;D++)u.get(_-D,T)||(y++,x<<=1,this.bitMatrix.get(_-D,T)&&(x|=1),y===8&&(h[g++]=x,y=0,x=0))}d=!d}if(g!==s.getTotalCodewords())throw new U;return h}remask(){if(this.parsedFormatInfo===null)return;const r=ar.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let s=0,a=r.getWidth();s<a;s++)for(let c=s+1,u=r.getHeight();c<u;c++)r.get(s,c)!==r.get(c,s)&&(r.flip(c,s),r.flip(s,c))}}class Ed{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s,a){if(r.length!==s.getTotalCodewords())throw new v;const c=s.getECBlocksForLevel(a);let u=0;const d=c.getECBlocks();for(const D of d)u+=D.getCount();const h=new Array(u);let g=0;for(const D of d)for(let P=0;P<D.getCount();P++){const L=D.getDataCodewords(),W=c.getECCodewordsPerBlock()+L;h[g++]=new Ed(L,new Uint8Array(W))}const x=h[0].codewords.length;let y=h.length-1;for(;y>=0&&h[y].codewords.length!==x;)y--;y++;const _=x-c.getECCodewordsPerBlock();let A=0;for(let D=0;D<_;D++)for(let P=0;P<g;P++)h[P].codewords[D]=r[A++];for(let D=y;D<g;D++)h[D].codewords[_]=r[A++];const T=h[0].codewords.length;for(let D=_;D<T;D++)for(let P=0;P<g;P++){const L=P<y?D:D+1;h[P].codewords[L]=r[A++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var lr;(function(C){C[C.TERMINATOR=0]="TERMINATOR",C[C.NUMERIC=1]="NUMERIC",C[C.ALPHANUMERIC=2]="ALPHANUMERIC",C[C.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",C[C.BYTE=4]="BYTE",C[C.ECI=5]="ECI",C[C.KANJI=6]="KANJI",C[C.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",C[C.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",C[C.HANZI=9]="HANZI"})(lr||(lr={}));class xe{constructor(r,s,a,c){this.value=r,this.stringValue=s,this.characterCountBitsForVersions=a,this.bits=c,xe.FOR_BITS.set(c,this),xe.FOR_VALUE.set(r,this)}static forBits(r){const s=xe.FOR_BITS.get(r);if(s===void 0)throw new v;return s}getCharacterCountBits(r){const s=r.getVersionNumber();let a;return s<=9?a=0:s<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof xe))return!1;const s=r;return this.value===s.value}toString(){return this.stringValue}}xe.FOR_BITS=new Map,xe.FOR_VALUE=new Map,xe.TERMINATOR=new xe(lr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),xe.NUMERIC=new xe(lr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),xe.ALPHANUMERIC=new xe(lr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),xe.STRUCTURED_APPEND=new xe(lr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),xe.BYTE=new xe(lr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),xe.ECI=new xe(lr.ECI,"ECI",Int32Array.from([0,0,0]),7),xe.KANJI=new xe(lr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),xe.FNC1_FIRST_POSITION=new xe(lr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),xe.FNC1_SECOND_POSITION=new xe(lr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),xe.HANZI=new xe(lr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class bt{static decode(r,s,a,c){const u=new _d(r);let d=new ke;const h=new Array;let g=-1,x=-1;try{let y=null,_=!1,A;do{if(u.available()<4)A=xe.TERMINATOR;else{const T=u.readBits(4);A=xe.forBits(T)}switch(A){case xe.TERMINATOR:break;case xe.FNC1_FIRST_POSITION:case xe.FNC1_SECOND_POSITION:_=!0;break;case xe.STRUCTURED_APPEND:if(u.available()<16)throw new U;g=u.readBits(8),x=u.readBits(8);break;case xe.ECI:const T=bt.parseECIValue(u);if(y=$.getCharacterSetECIByValue(T),y===null)throw new U;break;case xe.HANZI:const D=u.readBits(4),P=u.readBits(A.getCharacterCountBits(s));D===bt.GB2312_SUBSET&&bt.decodeHanziSegment(u,d,P);break;default:const L=u.readBits(A.getCharacterCountBits(s));switch(A){case xe.NUMERIC:bt.decodeNumericSegment(u,d,L);break;case xe.ALPHANUMERIC:bt.decodeAlphanumericSegment(u,d,L,_);break;case xe.BYTE:bt.decodeByteSegment(u,d,L,y,h,c);break;case xe.KANJI:bt.decodeKanjiSegment(u,d,L);break;default:throw new U}break}}while(A!==xe.TERMINATOR)}catch{throw new U}return new Pr(r,d.toString(),h.length===0?null:h,a===null?null:a.toString(),g,x)}static decodeHanziSegment(r,s,a){if(a*13>r.available())throw new U;const c=new Uint8Array(2*a);let u=0;for(;a>0;){const d=r.readBits(13);let h=d/96<<8&4294967295|d%96;h<959?h+=41377:h+=42657,c[u]=h>>8&255,c[u+1]=h&255,u+=2,a--}try{s.append(Qe.decode(c,ge.GB2312))}catch(d){throw new U(d)}}static decodeKanjiSegment(r,s,a){if(a*13>r.available())throw new U;const c=new Uint8Array(2*a);let u=0;for(;a>0;){const d=r.readBits(13);let h=d/192<<8&4294967295|d%192;h<7936?h+=33088:h+=49472,c[u]=h>>8,c[u+1]=h,u+=2,a--}try{s.append(Qe.decode(c,ge.SHIFT_JIS))}catch(d){throw new U(d)}}static decodeByteSegment(r,s,a,c,u,d){if(8*a>r.available())throw new U;const h=new Uint8Array(a);for(let x=0;x<a;x++)h[x]=r.readBits(8);let g;c===null?g=ge.guessEncoding(h,d):g=c.getName();try{s.append(Qe.decode(h,g))}catch(x){throw new U(x)}u.push(h)}static toAlphaNumericChar(r){if(r>=bt.ALPHANUMERIC_CHARS.length)throw new U;return bt.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,s,a,c){const u=s.length();for(;a>1;){if(r.available()<11)throw new U;const d=r.readBits(11);s.append(bt.toAlphaNumericChar(Math.floor(d/45))),s.append(bt.toAlphaNumericChar(d%45)),a-=2}if(a===1){if(r.available()<6)throw new U;s.append(bt.toAlphaNumericChar(r.readBits(6)))}if(c)for(let d=u;d<s.length();d++)s.charAt(d)==="%"&&(d<s.length()-1&&s.charAt(d+1)==="%"?s.deleteCharAt(d+1):s.setCharAt(d,""))}static decodeNumericSegment(r,s,a){for(;a>=3;){if(r.available()<10)throw new U;const c=r.readBits(10);if(c>=1e3)throw new U;s.append(bt.toAlphaNumericChar(Math.floor(c/100))),s.append(bt.toAlphaNumericChar(Math.floor(c/10)%10)),s.append(bt.toAlphaNumericChar(c%10)),a-=3}if(a===2){if(r.available()<7)throw new U;const c=r.readBits(7);if(c>=100)throw new U;s.append(bt.toAlphaNumericChar(Math.floor(c/10))),s.append(bt.toAlphaNumericChar(c%10))}else if(a===1){if(r.available()<4)throw new U;const c=r.readBits(4);if(c>=10)throw new U;s.append(bt.toAlphaNumericChar(c))}}static parseECIValue(r){const s=r.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const a=r.readBits(8);return(s&63)<<8&4294967295|a}if((s&224)===192){const a=r.readBits(16);return(s&31)<<16&4294967295|a}throw new U}}bt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",bt.GB2312_SUBSET=1;class eg{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const s=r[0];r[0]=r[2],r[2]=s}}class PC{constructor(){this.rsDecoder=new wi(ze.QR_CODE_FIELD_256)}decodeBooleanArray(r,s){return this.decodeBitMatrix(Ie.parseFromBooleanArray(r),s)}decodeBitMatrix(r,s){const a=new DC(r);let c=null;try{return this.decodeBitMatrixParser(a,s)}catch(u){c=u}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const u=this.decodeBitMatrixParser(a,s);return u.setOther(new eg(!0)),u}catch(u){throw c!==null?c:u}}decodeBitMatrixParser(r,s){const a=r.readVersion(),c=r.readFormatInformation().getErrorCorrectionLevel(),u=r.readCodewords(),d=Ed.getDataBlocks(u,a,c);let h=0;for(const y of d)h+=y.getNumDataCodewords();const g=new Uint8Array(h);let x=0;for(const y of d){const _=y.getCodewords(),A=y.getNumDataCodewords();this.correctErrors(_,A);for(let T=0;T<A;T++)g[x++]=_[T]}return bt.decode(g,a,c,s)}correctErrors(r,s){const a=new Int32Array(r);try{this.rsDecoder.decode(a,r.length-s)}catch{throw new R}for(let c=0;c<s;c++)r[c]=a[c]}}class bd extends fe{constructor(r,s,a){super(r,s),this.estimatedModuleSize=a}aboutEquals(r,s,a){if(Math.abs(s-this.getY())<=r&&Math.abs(a-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,s,a){const c=(this.getX()+s)/2,u=(this.getY()+r)/2,d=(this.estimatedModuleSize+a)/2;return new bd(c,u,d)}}class Gl{constructor(r,s,a,c,u,d,h){this.image=r,this.startX=s,this.startY=a,this.width=c,this.height=u,this.moduleSize=d,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,s=this.height,a=this.width,c=r+a,u=this.startY+s/2,d=new Int32Array(3),h=this.image;for(let g=0;g<s;g++){const x=u+(g&1?-Math.floor((g+1)/2):Math.floor((g+1)/2));d[0]=0,d[1]=0,d[2]=0;let y=r;for(;y<c&&!h.get(y,x);)y++;let _=0;for(;y<c;){if(h.get(y,x))if(_===1)d[1]++;else if(_===2){if(this.foundPatternCross(d)){const A=this.handlePossibleCenter(d,x,y);if(A!==null)return A}d[0]=d[2],d[1]=1,d[2]=0,_=1}else d[++_]++;else _===1&&_++,d[_]++;y++}if(this.foundPatternCross(d)){const A=this.handlePossibleCenter(d,x,c);if(A!==null)return A}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new V}static centerFromEnd(r,s){return s-r[2]-r[1]/2}foundPatternCross(r){const s=this.moduleSize,a=s/2;for(let c=0;c<3;c++)if(Math.abs(s-r[c])>=a)return!1;return!0}crossCheckVertical(r,s,a,c){const u=this.image,d=u.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let g=r;for(;g>=0&&u.get(s,g)&&h[1]<=a;)h[1]++,g--;if(g<0||h[1]>a)return NaN;for(;g>=0&&!u.get(s,g)&&h[0]<=a;)h[0]++,g--;if(h[0]>a)return NaN;for(g=r+1;g<d&&u.get(s,g)&&h[1]<=a;)h[1]++,g++;if(g===d||h[1]>a)return NaN;for(;g<d&&!u.get(s,g)&&h[2]<=a;)h[2]++,g++;if(h[2]>a)return NaN;const x=h[0]+h[1]+h[2];return 5*Math.abs(x-c)>=2*c?NaN:this.foundPatternCross(h)?Gl.centerFromEnd(h,g):NaN}handlePossibleCenter(r,s,a){const c=r[0]+r[1]+r[2],u=Gl.centerFromEnd(r,a),d=this.crossCheckVertical(s,u,2*r[1],c);if(!isNaN(d)){const h=(r[0]+r[1]+r[2])/3;for(const x of this.possibleCenters)if(x.aboutEquals(h,d,u))return x.combineEstimate(d,u,h);const g=new bd(u,d,h);this.possibleCenters.push(g),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(g)}return null}}class Ad extends fe{constructor(r,s,a,c){super(r,s),this.estimatedModuleSize=a,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,s,a){if(Math.abs(s-this.getY())<=r&&Math.abs(a-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,s,a){const c=this.count+1,u=(this.count*this.getX()+s)/c,d=(this.count*this.getY()+r)/c,h=(this.count*this.estimatedModuleSize+a)/c;return new Ad(u,d,h,c)}}class MC{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Qt{constructor(r,s){this.image=r,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const s=r!=null&&r.get(Z.TRY_HARDER)!==void 0,a=r!=null&&r.get(Z.PURE_BARCODE)!==void 0,c=this.image,u=c.getHeight(),d=c.getWidth();let h=Math.floor(3*u/(4*Qt.MAX_MODULES));(h<Qt.MIN_SKIP||s)&&(h=Qt.MIN_SKIP);let g=!1;const x=new Int32Array(5);for(let _=h-1;_<u&&!g;_+=h){x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0;let A=0;for(let T=0;T<d;T++)if(c.get(T,_))(A&1)===1&&A++,x[A]++;else if(A&1)x[A]++;else if(A===4)if(Qt.foundPatternCross(x)){if(this.handlePossibleCenter(x,_,T,a)===!0)if(h=2,this.hasSkipped===!0)g=this.haveMultiplyConfirmedCenters();else{const P=this.findRowSkip();P>x[2]&&(_+=P-x[2]-h,T=d-1)}else{x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,A=3;continue}A=0,x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0}else x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,A=3;else x[++A]++;Qt.foundPatternCross(x)&&this.handlePossibleCenter(x,_,d,a)===!0&&(h=x[0],this.hasSkipped&&(g=this.haveMultiplyConfirmedCenters()))}const y=this.selectBestPatterns();return fe.orderBestPatterns(y),new MC(y)}static centerFromEnd(r,s){return s-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let s=0;for(let u=0;u<5;u++){const d=r[u];if(d===0)return!1;s+=d}if(s<7)return!1;const a=s/7,c=a/2;return Math.abs(a-r[0])<c&&Math.abs(a-r[1])<c&&Math.abs(3*a-r[2])<3*c&&Math.abs(a-r[3])<c&&Math.abs(a-r[4])<c}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,s,a,c){const u=this.getCrossCheckStateCount();let d=0;const h=this.image;for(;r>=d&&s>=d&&h.get(s-d,r-d);)u[2]++,d++;if(r<d||s<d)return!1;for(;r>=d&&s>=d&&!h.get(s-d,r-d)&&u[1]<=a;)u[1]++,d++;if(r<d||s<d||u[1]>a)return!1;for(;r>=d&&s>=d&&h.get(s-d,r-d)&&u[0]<=a;)u[0]++,d++;if(u[0]>a)return!1;const g=h.getHeight(),x=h.getWidth();for(d=1;r+d<g&&s+d<x&&h.get(s+d,r+d);)u[2]++,d++;if(r+d>=g||s+d>=x)return!1;for(;r+d<g&&s+d<x&&!h.get(s+d,r+d)&&u[3]<a;)u[3]++,d++;if(r+d>=g||s+d>=x||u[3]>=a)return!1;for(;r+d<g&&s+d<x&&h.get(s+d,r+d)&&u[4]<a;)u[4]++,d++;if(u[4]>=a)return!1;const y=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(y-c)<2*c&&Qt.foundPatternCross(u)}crossCheckVertical(r,s,a,c){const u=this.image,d=u.getHeight(),h=this.getCrossCheckStateCount();let g=r;for(;g>=0&&u.get(s,g);)h[2]++,g--;if(g<0)return NaN;for(;g>=0&&!u.get(s,g)&&h[1]<=a;)h[1]++,g--;if(g<0||h[1]>a)return NaN;for(;g>=0&&u.get(s,g)&&h[0]<=a;)h[0]++,g--;if(h[0]>a)return NaN;for(g=r+1;g<d&&u.get(s,g);)h[2]++,g++;if(g===d)return NaN;for(;g<d&&!u.get(s,g)&&h[3]<a;)h[3]++,g++;if(g===d||h[3]>=a)return NaN;for(;g<d&&u.get(s,g)&&h[4]<a;)h[4]++,g++;if(h[4]>=a)return NaN;const x=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(x-c)>=2*c?NaN:Qt.foundPatternCross(h)?Qt.centerFromEnd(h,g):NaN}crossCheckHorizontal(r,s,a,c){const u=this.image,d=u.getWidth(),h=this.getCrossCheckStateCount();let g=r;for(;g>=0&&u.get(g,s);)h[2]++,g--;if(g<0)return NaN;for(;g>=0&&!u.get(g,s)&&h[1]<=a;)h[1]++,g--;if(g<0||h[1]>a)return NaN;for(;g>=0&&u.get(g,s)&&h[0]<=a;)h[0]++,g--;if(h[0]>a)return NaN;for(g=r+1;g<d&&u.get(g,s);)h[2]++,g++;if(g===d)return NaN;for(;g<d&&!u.get(g,s)&&h[3]<a;)h[3]++,g++;if(g===d||h[3]>=a)return NaN;for(;g<d&&u.get(g,s)&&h[4]<a;)h[4]++,g++;if(h[4]>=a)return NaN;const x=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(x-c)>=c?NaN:Qt.foundPatternCross(h)?Qt.centerFromEnd(h,g):NaN}handlePossibleCenter(r,s,a,c){const u=r[0]+r[1]+r[2]+r[3]+r[4];let d=Qt.centerFromEnd(r,a),h=this.crossCheckVertical(s,Math.floor(d),r[2],u);if(!isNaN(h)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(h),r[2],u),!isNaN(d)&&(!c||this.crossCheckDiagonal(Math.floor(h),Math.floor(d),r[2],u)))){const g=u/7;let x=!1;const y=this.possibleCenters;for(let _=0,A=y.length;_<A;_++){const T=y[_];if(T.aboutEquals(g,h,d)){y[_]=T.combineEstimate(h,d,g),x=!0;break}}if(!x){const _=new Ad(d,h,g);y.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const a of this.possibleCenters)if(a.getCount()>=Qt.CENTER_QUORUM)if(s==null)s=a;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-a.getX())-Math.abs(s.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,s=0;const a=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=Qt.CENTER_QUORUM&&(r++,s+=d.getEstimatedModuleSize());if(r<3)return!1;const c=s/a;let u=0;for(const d of this.possibleCenters)u+=Math.abs(d.getEstimatedModuleSize()-c);return u<=.05*s}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new V;const s=this.possibleCenters;let a;if(r>3){let c=0,u=0;for(const g of this.possibleCenters){const x=g.getEstimatedModuleSize();c+=x,u+=x*x}a=c/r;let d=Math.sqrt(u/r-a*a);s.sort((g,x)=>{const y=Math.abs(x.getEstimatedModuleSize()-a),_=Math.abs(g.getEstimatedModuleSize()-a);return y<_?-1:y>_?1:0});const h=Math.max(.2*a,d);for(let g=0;g<s.length&&s.length>3;g++){const x=s[g];Math.abs(x.getEstimatedModuleSize()-a)>h&&(s.splice(g,1),g--)}}if(s.length>3){let c=0;for(const u of s)c+=u.getEstimatedModuleSize();a=c/s.length,s.sort((u,d)=>{if(d.getCount()===u.getCount()){const h=Math.abs(d.getEstimatedModuleSize()-a),g=Math.abs(u.getEstimatedModuleSize()-a);return h<g?1:h>g?-1:0}else return d.getCount()-u.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}Qt.CENTER_QUORUM=2,Qt.MIN_SKIP=3,Qt.MAX_MODULES=57;class ra{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(Z.NEED_RESULT_POINT_CALLBACK);const a=new Qt(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(a)}processFinderPatternInfo(r){const s=r.getTopLeft(),a=r.getTopRight(),c=r.getBottomLeft(),u=this.calculateModuleSize(s,a,c);if(u<1)throw new V("No pattern found in proccess finder.");const d=ra.computeDimension(s,a,c,u),h=pe.getProvisionalVersionForDimension(d),g=h.getDimensionForVersion()-7;let x=null;if(h.getAlignmentPatternCenters().length>0){const T=a.getX()-s.getX()+c.getX(),D=a.getY()-s.getY()+c.getY(),P=1-3/g,L=Math.floor(s.getX()+P*(T-s.getX())),W=Math.floor(s.getY()+P*(D-s.getY()));for(let ne=4;ne<=16;ne<<=1)try{x=this.findAlignmentInRegion(u,L,W,ne);break}catch(re){if(!(re instanceof V))throw re}}const y=ra.createTransform(s,a,c,x,d),_=ra.sampleGrid(this.image,y,d);let A;return x===null?A=[c,s,a]:A=[c,s,a,x],new rs(_,A)}static createTransform(r,s,a,c,u){const d=u-3.5;let h,g,x,y;return c!==null?(h=c.getX(),g=c.getY(),x=d-3,y=x):(h=s.getX()-r.getX()+a.getX(),g=s.getY()-r.getY()+a.getY(),x=d,y=d),he.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,x,y,3.5,d,r.getX(),r.getY(),s.getX(),s.getY(),h,g,a.getX(),a.getY())}static sampleGrid(r,s,a){return De.getInstance().sampleGridWithTransform(r,a,a,s)}static computeDimension(r,s,a,c){const u=je.round(fe.distance(r,s)/c),d=je.round(fe.distance(r,a)/c);let h=Math.floor((u+d)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new V("Dimensions could be not found.")}return h}calculateModuleSize(r,s,a){return(this.calculateModuleSizeOneWay(r,s)+this.calculateModuleSizeOneWay(r,a))/2}calculateModuleSizeOneWay(r,s){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(s.getX()),Math.floor(s.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(a)?c/7:isNaN(c)?a/7:(a+c)/14}sizeOfBlackWhiteBlackRunBothWays(r,s,a,c){let u=this.sizeOfBlackWhiteBlackRun(r,s,a,c),d=1,h=r-(a-r);h<0?(d=r/(r-h),h=0):h>=this.image.getWidth()&&(d=(this.image.getWidth()-1-r)/(h-r),h=this.image.getWidth()-1);let g=Math.floor(s-(c-s)*d);return d=1,g<0?(d=s/(s-g),g=0):g>=this.image.getHeight()&&(d=(this.image.getHeight()-1-s)/(g-s),g=this.image.getHeight()-1),h=Math.floor(r+(h-r)*d),u+=this.sizeOfBlackWhiteBlackRun(r,s,h,g),u-1}sizeOfBlackWhiteBlackRun(r,s,a,c){const u=Math.abs(c-s)>Math.abs(a-r);if(u){let T=r;r=s,s=T,T=a,a=c,c=T}const d=Math.abs(a-r),h=Math.abs(c-s);let g=-d/2;const x=r<a?1:-1,y=s<c?1:-1;let _=0;const A=a+x;for(let T=r,D=s;T!==A;T+=x){const P=u?D:T,L=u?T:D;if(_===1===this.image.get(P,L)){if(_===2)return je.distance(T,D,r,s);_++}if(g+=h,g>0){if(D===c)break;D+=y,g-=d}}return _===2?je.distance(a+x,c,r,s):NaN}findAlignmentInRegion(r,s,a,c){const u=Math.floor(c*r),d=Math.max(0,s-u),h=Math.min(this.image.getWidth()-1,s+u);if(h-d<r*3)throw new V("Alignment top exceeds estimated module size.");const g=Math.max(0,a-u),x=Math.min(this.image.getHeight()-1,a+u);if(x-g<r*3)throw new V("Alignment bottom exceeds estimated module size.");return new Gl(this.image,d,g,h-d,x-g,r,this.resultPointCallback).find()}}class Ci{constructor(){this.decoder=new PC}getDecoder(){return this.decoder}decode(r,s){let a,c;if(s!=null&&s.get(Z.PURE_BARCODE)!==void 0){const g=Ci.extractPureBits(r.getBlackMatrix());a=this.decoder.decodeBitMatrix(g,s),c=Ci.NO_POINTS}else{const g=new ra(r.getBlackMatrix()).detect(s);a=this.decoder.decodeBitMatrix(g.getBits(),s),c=g.getPoints()}a.getOther()instanceof eg&&a.getOther().applyMirroredCorrection(c);const u=new ve(a.getText(),a.getRawBytes(),void 0,c,ce.QR_CODE,void 0),d=a.getByteSegments();d!==null&&u.putMetadata(Oe.BYTE_SEGMENTS,d);const h=a.getECLevel();return h!==null&&u.putMetadata(Oe.ERROR_CORRECTION_LEVEL,h),a.hasStructuredAppend()&&(u.putMetadata(Oe.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),u.putMetadata(Oe.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),u}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),a=r.getBottomRightOnBit();if(s===null||a===null)throw new V;const c=this.moduleSize(s,r);let u=s[1],d=a[1],h=s[0],g=a[0];if(h>=g||u>=d)throw new V;if(d-u!==g-h&&(g=h+(d-u),g>=r.getWidth()))throw new V;const x=Math.round((g-h+1)/c),y=Math.round((d-u+1)/c);if(x<=0||y<=0)throw new V;if(y!==x)throw new V;const _=Math.floor(c/2);u+=_,h+=_;const A=h+Math.floor((x-1)*c)-g;if(A>0){if(A>_)throw new V;h-=A}const T=u+Math.floor((y-1)*c)-d;if(T>0){if(T>_)throw new V;u-=T}const D=new Ie(x,y);for(let P=0;P<y;P++){const L=u+Math.floor(P*c);for(let W=0;W<x;W++)r.get(h+Math.floor(W*c),L)&&D.set(W,P)}return D}static moduleSize(r,s){const a=s.getHeight(),c=s.getWidth();let u=r[0],d=r[1],h=!0,g=0;for(;u<c&&d<a;){if(h!==s.get(u,d)){if(++g===5)break;h=!h}u++,d++}if(u===c||d===a)throw new V;return(u-r[0])/7}}Ci.NO_POINTS=new Array;class be{PDF417Common(){}static getBitCountSum(r){return je.sum(r)}static toIntArray(r){if(r==null||!r.length)return be.EMPTY_INT_ARRAY;const s=new Int32Array(r.length);let a=0;for(const c of r)s[a++]=c;return s}static getCodeword(r){const s=k.binarySearch(be.SYMBOL_TABLE,r&262143);return s<0?-1:(be.CODEWORD_TABLE[s]-1)%be.NUMBER_OF_CODEWORDS}}be.NUMBER_OF_CODEWORDS=929,be.MAX_CODEWORDS_IN_BARCODE=be.NUMBER_OF_CODEWORDS-1,be.MIN_ROWS_IN_BARCODE=3,be.MAX_ROWS_IN_BARCODE=90,be.MODULES_IN_CODEWORD=17,be.MODULES_IN_STOP_PATTERN=18,be.BARS_IN_MODULE=8,be.EMPTY_INT_ARRAY=new Int32Array([]),be.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),be.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class BC{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Ne{static detectMultiple(r,s,a){let c=r.getBlackMatrix(),u=Ne.detect(a,c);return u.length||(c=c.clone(),c.rotate180(),u=Ne.detect(a,c)),new BC(c,u)}static detect(r,s){const a=new Array;let c=0,u=0,d=!1;for(;c<s.getHeight();){const h=Ne.findVertices(s,c,u);if(h[0]==null&&h[3]==null){if(!d)break;d=!1,u=0;for(const g of a)g[1]!=null&&(c=Math.trunc(Math.max(c,g[1].getY()))),g[3]!=null&&(c=Math.max(c,Math.trunc(g[3].getY())));c+=Ne.ROW_STEP;continue}if(d=!0,a.push(h),!r)break;h[2]!=null?(u=Math.trunc(h[2].getX()),c=Math.trunc(h[2].getY())):(u=Math.trunc(h[4].getX()),c=Math.trunc(h[4].getY()))}return a}static findVertices(r,s,a){const c=r.getHeight(),u=r.getWidth(),d=new Array(8);return Ne.copyToResult(d,Ne.findRowsWithPattern(r,c,u,s,a,Ne.START_PATTERN),Ne.INDEXES_START_PATTERN),d[4]!=null&&(a=Math.trunc(d[4].getX()),s=Math.trunc(d[4].getY())),Ne.copyToResult(d,Ne.findRowsWithPattern(r,c,u,s,a,Ne.STOP_PATTERN),Ne.INDEXES_STOP_PATTERN),d}static copyToResult(r,s,a){for(let c=0;c<a.length;c++)r[a[c]]=s[c]}static findRowsWithPattern(r,s,a,c,u,d){const h=new Array(4);let g=!1;const x=new Int32Array(d.length);for(;c<s;c+=Ne.ROW_STEP){let _=Ne.findGuardPattern(r,u,c,a,!1,d,x);if(_!=null){for(;c>0;){const A=Ne.findGuardPattern(r,u,--c,a,!1,d,x);if(A!=null)_=A;else{c++;break}}h[0]=new fe(_[0],c),h[1]=new fe(_[1],c),g=!0;break}}let y=c+1;if(g){let _=0,A=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;y<s;y++){const T=Ne.findGuardPattern(r,A[0],y,a,!1,d,x);if(T!=null&&Math.abs(A[0]-T[0])<Ne.MAX_PATTERN_DRIFT&&Math.abs(A[1]-T[1])<Ne.MAX_PATTERN_DRIFT)A=T,_=0;else{if(_>Ne.SKIPPED_ROW_COUNT_MAX)break;_++}}y-=_+1,h[2]=new fe(A[0],y),h[3]=new fe(A[1],y)}return y-c<Ne.BARCODE_MIN_HEIGHT&&k.fill(h,null),h}static findGuardPattern(r,s,a,c,u,d,h){k.fillWithin(h,0,h.length,0);let g=s,x=0;for(;r.get(g,a)&&g>0&&x++<Ne.MAX_PIXEL_DRIFT;)g--;let y=g,_=0,A=d.length;for(let T=u;y<c;y++)if(r.get(y,a)!==T)h[_]++;else{if(_===A-1){if(Ne.patternMatchVariance(h,d,Ne.MAX_INDIVIDUAL_VARIANCE)<Ne.MAX_AVG_VARIANCE)return new Int32Array([g,y]);g+=h[0]+h[1],B.arraycopy(h,2,h,0,_-1),h[_-1]=0,h[_]=0,_--}else _++;h[_]=1,T=!T}return _===A-1&&Ne.patternMatchVariance(h,d,Ne.MAX_INDIVIDUAL_VARIANCE)<Ne.MAX_AVG_VARIANCE?new Int32Array([g,y-1]):null}static patternMatchVariance(r,s,a){let c=r.length,u=0,d=0;for(let x=0;x<c;x++)u+=r[x],d+=s[x];if(u<d)return 1/0;let h=u/d;a*=h;let g=0;for(let x=0;x<c;x++){let y=r[x],_=s[x]*h,A=y>_?y-_:_-y;if(A>a)return 1/0;g+=A}return g/u}}Ne.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ne.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ne.MAX_AVG_VARIANCE=.42,Ne.MAX_INDIVIDUAL_VARIANCE=.8,Ne.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ne.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ne.MAX_PIXEL_DRIFT=3,Ne.MAX_PATTERN_DRIFT=5,Ne.SKIPPED_ROW_COUNT_MAX=25,Ne.ROW_STEP=5,Ne.BARCODE_MIN_HEIGHT=10;class on{constructor(r,s){if(s.length===0)throw new v;this.field=r;let a=s.length;if(a>1&&s[0]===0){let c=1;for(;c<a&&s[c]===0;)c++;c===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-c),B.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let c=0;for(let u of this.coefficients)c=this.field.add(c,u);return c}let s=this.coefficients[0],a=this.coefficients.length;for(let c=1;c<a;c++)s=this.field.add(this.field.multiply(r,s),this.coefficients[c]);return s}add(r){if(!this.field.equals(r.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,a=r.coefficients;if(s.length>a.length){let d=s;s=a,a=d}let c=new Int32Array(a.length),u=a.length-s.length;B.arraycopy(a,0,c,0,u);for(let d=u;d<a.length;d++)c[d]=this.field.add(s[d-u],a[d]);return new on(this.field,c)}subtract(r){if(!this.field.equals(r.field))throw new v("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof on?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new on(this.field,new Int32Array([0]));let s=this.coefficients,a=s.length,c=r.coefficients,u=c.length,d=new Int32Array(a+u-1);for(let h=0;h<a;h++){let g=s[h];for(let x=0;x<u;x++)d[h+x]=this.field.add(d[h+x],this.field.multiply(g,c[x]))}return new on(this.field,d)}negative(){let r=this.coefficients.length,s=new Int32Array(r);for(let a=0;a<r;a++)s[a]=this.field.subtract(0,this.coefficients[a]);return new on(this.field,s)}multiplyScalar(r){if(r===0)return new on(this.field,new Int32Array([0]));if(r===1)return this;let s=this.coefficients.length,a=new Int32Array(s);for(let c=0;c<s;c++)a[c]=this.field.multiply(this.coefficients[c],r);return new on(this.field,a)}multiplyByMonomial(r,s){if(r<0)throw new v;if(s===0)return new on(this.field,new Int32Array([0]));let a=this.coefficients.length,c=new Int32Array(a+r);for(let u=0;u<a;u++)c[u]=this.field.multiply(this.coefficients[u],s);return new on(this.field,c)}toString(){let r=new ke;for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);a!==0&&(a<0?(r.append(" - "),a=-a):r.length()>0&&r.append(" + "),(s===0||a!==1)&&r.append(a),s!==0&&(s===1?r.append("x"):(r.append("x^"),r.append(s))))}return r.toString()}}class LC{add(r,s){return(r+s)%this.modulus}subtract(r,s){return(this.modulus+r-s)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new v;return this.logTable[r]}inverse(r){if(r===0)throw new Vs;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class Sd extends LC{constructor(r,s){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let a=1;for(let c=0;c<r;c++)this.expTable[c]=a,a=a*s%r;for(let c=0;c<r-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new on(this,new Int32Array([0])),this.one=new on(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new v;if(s===0)return this.zero;let a=new Int32Array(r+1);return a[0]=s,new on(this,a)}}Sd.PDF417_GF=new Sd(be.NUMBER_OF_CODEWORDS,3);class tg{constructor(){this.field=Sd.PDF417_GF}decode(r,s,a){let c=new on(this.field,r),u=new Int32Array(s),d=!1;for(let D=s;D>0;D--){let P=c.evaluateAt(this.field.exp(D));u[s-D]=P,P!==0&&(d=!0)}if(!d)return 0;let h=this.field.getOne();if(a!=null)for(const D of a){let P=this.field.exp(r.length-1-D),L=new on(this.field,new Int32Array([this.field.subtract(0,P),1]));h=h.multiply(L)}let g=new on(this.field,u),x=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),g,s),y=x[0],_=x[1],A=this.findErrorLocations(y),T=this.findErrorMagnitudes(_,y,A);for(let D=0;D<A.length;D++){let P=r.length-1-this.field.log(A[D]);if(P<0)throw R.getChecksumInstance();r[P]=this.field.subtract(r[P],T[D])}return A.length}runEuclideanAlgorithm(r,s,a){if(r.getDegree()<s.getDegree()){let A=r;r=s,s=A}let c=r,u=s,d=this.field.getZero(),h=this.field.getOne();for(;u.getDegree()>=Math.round(a/2);){let A=c,T=d;if(c=u,d=h,c.isZero())throw R.getChecksumInstance();u=A;let D=this.field.getZero(),P=c.getCoefficient(c.getDegree()),L=this.field.inverse(P);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){let W=u.getDegree()-c.getDegree(),ne=this.field.multiply(u.getCoefficient(u.getDegree()),L);D=D.add(this.field.buildMonomial(W,ne)),u=u.subtract(c.multiplyByMonomial(W,ne))}h=D.multiply(d).subtract(T).negative()}let g=h.getCoefficient(0);if(g===0)throw R.getChecksumInstance();let x=this.field.inverse(g),y=h.multiply(x),_=u.multiply(x);return[y,_]}findErrorLocations(r){let s=r.getDegree(),a=new Int32Array(s),c=0;for(let u=1;u<this.field.getSize()&&c<s;u++)r.evaluateAt(u)===0&&(a[c]=this.field.inverse(u),c++);if(c!==s)throw R.getChecksumInstance();return a}findErrorMagnitudes(r,s,a){let c=s.getDegree(),u=new Int32Array(c);for(let x=1;x<=c;x++)u[c-x]=this.field.multiply(x,s.getCoefficient(x));let d=new on(this.field,u),h=a.length,g=new Int32Array(h);for(let x=0;x<h;x++){let y=this.field.inverse(a[x]),_=this.field.subtract(0,r.evaluateAt(y)),A=this.field.inverse(d.evaluateAt(y));g[x]=this.field.multiply(_,A)}return g}}class as{constructor(r,s,a,c,u){r instanceof as?this.constructor_2(r):this.constructor_1(r,s,a,c,u)}constructor_1(r,s,a,c,u){const d=s==null||a==null,h=c==null||u==null;if(d&&h)throw new V;d?(s=new fe(0,c.getY()),a=new fe(0,u.getY())):h&&(c=new fe(r.getWidth()-1,s.getY()),u=new fe(r.getWidth()-1,a.getY())),this.image=r,this.topLeft=s,this.bottomLeft=a,this.topRight=c,this.bottomRight=u,this.minX=Math.trunc(Math.min(s.getX(),a.getX())),this.maxX=Math.trunc(Math.max(c.getX(),u.getX())),this.minY=Math.trunc(Math.min(s.getY(),c.getY())),this.maxY=Math.trunc(Math.max(a.getY(),u.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,s){return r==null?s:s==null?r:new as(r.image,r.topLeft,r.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(r,s,a){let c=this.topLeft,u=this.bottomLeft,d=this.topRight,h=this.bottomRight;if(r>0){let g=a?this.topLeft:this.topRight,x=Math.trunc(g.getY()-r);x<0&&(x=0);let y=new fe(g.getX(),x);a?c=y:d=y}if(s>0){let g=a?this.bottomLeft:this.bottomRight,x=Math.trunc(g.getY()+s);x>=this.image.getHeight()&&(x=this.image.getHeight()-1);let y=new fe(g.getX(),x);a?u=y:h=y}return new as(this.image,c,u,d,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class FC{constructor(r,s,a,c){this.columnCount=r,this.errorCorrectionLevel=c,this.rowCountUpperPart=s,this.rowCountLowerPart=a,this.rowCount=s+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ia{constructor(){this.buffer=""}static form(r,s){let a=-1;function c(d,h,g,x,y,_){if(d==="%%")return"%";if(s[++a]===void 0)return;d=x?parseInt(x.substr(1)):void 0;let A=y?parseInt(y.substr(1)):void 0,T;switch(_){case"s":T=s[a];break;case"c":T=s[a][0];break;case"f":T=parseFloat(s[a]).toFixed(d);break;case"p":T=parseFloat(s[a]).toPrecision(d);break;case"e":T=parseFloat(s[a]).toExponential(d);break;case"x":T=parseInt(s[a]).toString(A||16);break;case"d":T=parseFloat(parseInt(s[a],A||10).toPrecision(d)).toFixed(0);break}T=typeof T=="object"?JSON.stringify(T):(+T).toString(A);let D=parseInt(g),P=g&&g[0]+""=="0"?"0":" ";for(;T.length<D;)T=h!==void 0?T+P:P+T;return T}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,c)}format(r,...s){this.buffer+=ia.form(r,s)}toString(){return this.buffer}}class sa{constructor(r){this.boundingBox=new as(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let s=this.getCodeword(r);if(s!=null)return s;for(let a=1;a<sa.MAX_NEARBY_DISTANCE;a++){let c=this.imageRowToCodewordIndex(r)-a;if(c>=0&&(s=this.codewords[c],s!=null)||(c=this.imageRowToCodewordIndex(r)+a,c<this.codewords.length&&(s=this.codewords[c],s!=null)))return s}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,s){this.codewords[this.imageRowToCodewordIndex(r)]=s}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new ia;let s=0;for(const a of this.codewords){if(a==null){r.format("%3d:    |   %n",s++);continue}r.format("%3d: %3d|%3d%n",s++,a.getRowNumber(),a.getValue())}return r.toString()}}sa.MAX_NEARBY_DISTANCE=5;class oa{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let s=this.values.get(r);s==null&&(s=0),s++,this.values.set(r,s)}getValue(){let r=-1,s=new Array;for(const[a,c]of this.values.entries()){const u={getKey:()=>a,getValue:()=>c};u.getValue()>r?(r=u.getValue(),s=[],s.push(u.getKey())):u.getValue()===r&&s.push(u.getKey())}return be.toIntArray(s)}getConfidence(r){return this.values.get(r)}}class ng extends sa{constructor(r,s){super(r),this._isLeft=s}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,r);let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),h=this.imageRowToCodewordIndex(Math.trunc(u.getY())),g=-1,x=1,y=0;for(let _=d;_<h;_++){if(s[_]==null)continue;let A=s[_],T=A.getRowNumber()-g;if(T===0)y++;else if(T===1)x=Math.max(x,y),y=1,g=A.getRowNumber();else if(T<0||A.getRowNumber()>=r.getRowCount()||T>_)s[_]=null;else{let D;x>2?D=(x-2)*T:D=T;let P=D>=_;for(let L=1;L<=D&&!P;L++)P=s[_-L]!=null;P?s[_]=null:(g=A.getRowNumber(),y=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let s=new Int32Array(r.getRowCount());for(let a of this.getCodewords())if(a!=null){let c=a.getRowNumber();if(c>=s.length)continue;s[c]++}return s}adjustIncompleteIndicatorColumnRowNumbers(r){let s=this.getBoundingBox(),a=this._isLeft?s.getTopLeft():s.getTopRight(),c=this._isLeft?s.getBottomLeft():s.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),h=this.getCodewords(),g=-1;for(let x=u;x<d;x++){if(h[x]==null)continue;let y=h[x];y.setRowNumberAsRowIndicatorColumn();let _=y.getRowNumber()-g;_===0||(_===1?g=y.getRowNumber():y.getRowNumber()>=r.getRowCount()?h[x]=null:g=y.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),s=new oa,a=new oa,c=new oa,u=new oa;for(let h of r){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let g=h.getValue()%30,x=h.getRowNumber();switch(this._isLeft||(x+=2),x%3){case 0:a.setValue(g*3+1);break;case 1:u.setValue(g/3),c.setValue(g%3);break;case 2:s.setValue(g+1);break}}if(s.getValue().length===0||a.getValue().length===0||c.getValue().length===0||u.getValue().length===0||s.getValue()[0]<1||a.getValue()[0]+c.getValue()[0]<be.MIN_ROWS_IN_BARCODE||a.getValue()[0]+c.getValue()[0]>be.MAX_ROWS_IN_BARCODE)return null;let d=new FC(s.getValue()[0],a.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(r,d),d}removeIncorrectCodewords(r,s){for(let a=0;a<r.length;a++){let c=r[a];if(r[a]==null)continue;let u=c.getValue()%30,d=c.getRowNumber();if(d>s.getRowCount()){r[a]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:u*3+1!==s.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(u/3)!==s.getErrorCorrectionLevel()||u%3!==s.getRowCountLowerPart())&&(r[a]=null);break;case 2:u+1!==s.getColumnCount()&&(r[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class aa{constructor(r,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=be.MAX_CODEWORDS_IN_BARCODE,s;do s=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let a=this.detectionResultColumns[s].getCodewords();for(let c=0;c<a.length;c++)a[c]!=null&&(a[c].hasValidRowNumber()||this.adjustRowNumbers(s,c,a))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<r.length;a++)if(r[a]!=null&&s[a]!=null&&r[a].getRowNumber()===s[a].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let u=this.detectionResultColumns[c].getCodewords()[a];u!=null&&(u.setRowNumber(r[a].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let c=s[a].getRowNumber(),u=0;for(let d=this.barcodeColumnCount+1;d>0&&u<this.ADJUST_ROW_NUMBER_SKIP;d--){let h=this.detectionResultColumns[d].getCodewords()[a];h!=null&&(u=aa.adjustRowNumberIfValid(c,u,h),h.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,s=this.detectionResultColumns[0].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let c=s[a].getRowNumber(),u=0;for(let d=1;d<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;d++){let h=this.detectionResultColumns[d].getCodewords()[a];h!=null&&(u=aa.adjustRowNumberIfValid(c,u,h),h.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,s,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(r)?(a.setRowNumber(r),s=0):++s),s}adjustRowNumbers(r,s,a){if(!this.detectionResultColumns[r-1])return;let c=a[s],u=this.detectionResultColumns[r-1].getCodewords(),d=u;this.detectionResultColumns[r+1]!=null&&(d=this.detectionResultColumns[r+1].getCodewords());let h=new Array(14);h[2]=u[s],h[3]=d[s],s>0&&(h[0]=a[s-1],h[4]=u[s-1],h[5]=d[s-1]),s>1&&(h[8]=a[s-2],h[10]=u[s-2],h[11]=d[s-2]),s<a.length-1&&(h[1]=a[s+1],h[6]=u[s+1],h[7]=d[s+1]),s<a.length-2&&(h[9]=a[s+2],h[12]=u[s+2],h[13]=d[s+2]);for(let g of h)if(aa.adjustRowNumber(c,g))return}static adjustRowNumber(r,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===r.getBucket()?(r.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,s){this.detectionResultColumns[r]=s}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new ia;for(let a=0;a<r.getCodewords().length;a++){s.format("CW %3d:",a);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){s.format("    |   ");continue}let u=this.detectionResultColumns[c].getCodewords()[a];if(u==null){s.format("    |   ");continue}s.format(" %3d|%3d",u.getRowNumber(),u.getValue())}s.format("%n")}return s.toString()}}class la{constructor(r,s,a,c){this.rowNumber=la.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(s),this.bucket=Math.trunc(a),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==la.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}la.BARCODE_ROW_UNKNOWN=-1;class Pn{static initialize(){for(let r=0;r<be.SYMBOL_TABLE.length;r++){let s=be.SYMBOL_TABLE[r],a=s&1;for(let c=0;c<be.BARS_IN_MODULE;c++){let u=0;for(;(s&1)===a;)u+=1,s>>=1;a=s&1,Pn.RATIOS_TABLE[r]||(Pn.RATIOS_TABLE[r]=new Array(be.BARS_IN_MODULE)),Pn.RATIOS_TABLE[r][be.BARS_IN_MODULE-c-1]=Math.fround(u/be.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let s=Pn.getDecodedCodewordValue(Pn.sampleBitCounts(r));return s!==-1?s:Pn.getClosestDecodedValue(r)}static sampleBitCounts(r){let s=je.sum(r),a=new Int32Array(be.BARS_IN_MODULE),c=0,u=0;for(let d=0;d<be.MODULES_IN_CODEWORD;d++){let h=s/(2*be.MODULES_IN_CODEWORD)+d*s/be.MODULES_IN_CODEWORD;u+r[c]<=h&&(u+=r[c],c++),a[c]++}return a}static getDecodedCodewordValue(r){let s=Pn.getBitValue(r);return be.getCodeword(s)===-1?-1:s}static getBitValue(r){let s=0;for(let a=0;a<r.length;a++)for(let c=0;c<r[a];c++)s=s<<1|(a%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(r){let s=je.sum(r),a=new Array(be.BARS_IN_MODULE);if(s>1)for(let d=0;d<a.length;d++)a[d]=Math.fround(r[d]/s);let c=Hs.MAX_VALUE,u=-1;this.bSymbolTableReady||Pn.initialize();for(let d=0;d<Pn.RATIOS_TABLE.length;d++){let h=0,g=Pn.RATIOS_TABLE[d];for(let x=0;x<be.BARS_IN_MODULE;x++){let y=Math.fround(g[x]-a[x]);if(h+=Math.fround(y*y),h>=c)break}h<c&&(c=h,u=be.SYMBOL_TABLE[d])}return u}}Pn.bSymbolTableReady=!1,Pn.RATIOS_TABLE=new Array(be.SYMBOL_TABLE.length).map(C=>new Array(be.BARS_IN_MODULE));class rg{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class ig{static parseLong(r,s=void 0){return parseInt(r,s)}}class sg extends m{}sg.kind="NullPointerException";class jC{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,s,a){if(r==null)throw new sg;if(s<0||s>r.length||a<0||s+a>r.length||s+a<0)throw new K;if(a===0)return;for(let c=0;c<a;c++)this.write(r[s+c])}flush(){}close(){}}class UC extends m{}class zC extends jC{constructor(r=32){if(super(),this.count=0,r<0)throw new v("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let a=this.buf.length<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new UC;a=N.MAX_VALUE}this.buf=k.copyOfUint8Array(this.buf,a)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,s,a){if(s<0||s>r.length||a<0||s+a-r.length>0)throw new K;this.ensureCapacity(this.count+a),B.arraycopy(r,s,this.buf,this.count,a),this.count+=a}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return k.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var it;(function(C){C[C.ALPHA=0]="ALPHA",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.PUNCT=3]="PUNCT",C[C.ALPHA_SHIFT=4]="ALPHA_SHIFT",C[C.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(it||(it={}));function og(){if(typeof window<"u")return window.BigInt||null;if(typeof da<"u")return da.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Xl;function _i(C){if(typeof Xl>"u"&&(Xl=og()),Xl===null)throw new Error("BigInt is not supported!");return Xl(C)}function WC(){let C=[];C[0]=_i(1);let r=_i(900);C[1]=r;for(let s=2;s<16;s++)C[s]=C[s-1]*r;return C}class z{static decode(r,s){let a=new ke(""),c=$.ISO8859_1;a.enableDecoding(c);let u=1,d=r[u++],h=new rg;for(;u<r[0];){switch(d){case z.TEXT_COMPACTION_MODE_LATCH:u=z.textCompaction(r,u,a);break;case z.BYTE_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:u=z.byteCompaction(d,r,c,u,a);break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[u++]);break;case z.NUMERIC_COMPACTION_MODE_LATCH:u=z.numericCompaction(r,u,a);break;case z.ECI_CHARSET:$.getCharacterSetECIByValue(r[u++]);break;case z.ECI_GENERAL_PURPOSE:u+=2;break;case z.ECI_USER_DEFINED:u++;break;case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=z.decodeMacroBlock(r,u,h);break;case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:throw new U;default:u--,u=z.textCompaction(r,u,a);break}if(u<r.length)d=r[u++];else throw U.getFormatInstance()}if(a.length()===0)throw U.getFormatInstance();let g=new Pr(null,a.toString(),null,s);return g.setOther(h),g}static decodeMacroBlock(r,s,a){if(s+z.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw U.getFormatInstance();let c=new Int32Array(z.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<z.NUMBER_OF_SEQUENCE_CODEWORDS;h++,s++)c[h]=r[s];a.setSegmentIndex(N.parseInt(z.decodeBase900toBase10(c,z.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new ke;s=z.textCompaction(r,s,u),a.setFileId(u.toString());let d=-1;for(r[s]===z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=s+1);s<r[0];)switch(r[s]){case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,r[s]){case z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new ke;s=z.textCompaction(r,s+1,h),a.setFileName(h.toString());break;case z.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let g=new ke;s=z.textCompaction(r,s+1,g),a.setSender(g.toString());break;case z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let x=new ke;s=z.textCompaction(r,s+1,x),a.setAddressee(x.toString());break;case z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let y=new ke;s=z.numericCompaction(r,s+1,y),a.setSegmentCount(N.parseInt(y.toString()));break;case z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let _=new ke;s=z.numericCompaction(r,s+1,_),a.setTimestamp(ig.parseLong(_.toString()));break;case z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let A=new ke;s=z.numericCompaction(r,s+1,A),a.setChecksum(N.parseInt(A.toString()));break;case z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let T=new ke;s=z.numericCompaction(r,s+1,T),a.setFileSize(ig.parseLong(T.toString()));break;default:throw U.getFormatInstance()}break;case z.MACRO_PDF417_TERMINATOR:s++,a.setLastSegment(!0);break;default:throw U.getFormatInstance()}if(d!==-1){let h=s-d;a.isLastSegment()&&h--,a.setOptionalData(k.copyOfRange(r,d,d+h))}return s}static textCompaction(r,s,a){let c=new Int32Array((r[0]-s)*2),u=new Int32Array((r[0]-s)*2),d=0,h=!1;for(;s<r[0]&&!h;){let g=r[s++];if(g<z.TEXT_COMPACTION_MODE_LATCH)c[d]=g/30,c[d+1]=g%30,d+=2;else switch(g){case z.TEXT_COMPACTION_MODE_LATCH:c[d++]=z.TEXT_COMPACTION_MODE_LATCH;break;case z.BYTE_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:case z.NUMERIC_COMPACTION_MODE_LATCH:case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:s--,h=!0;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[d]=z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,g=r[s++],u[d]=g,d++;break}}return z.decodeTextCompaction(c,u,d,a),s}static decodeTextCompaction(r,s,a,c){let u=it.ALPHA,d=it.ALPHA,h=0;for(;h<a;){let g=r[h],x="";switch(u){case it.ALPHA:if(g<26)x=String.fromCharCode(65+g);else switch(g){case 26:x=" ";break;case z.LL:u=it.LOWER;break;case z.ML:u=it.MIXED;break;case z.PS:d=u,u=it.PUNCT_SHIFT;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case z.TEXT_COMPACTION_MODE_LATCH:u=it.ALPHA;break}break;case it.LOWER:if(g<26)x=String.fromCharCode(97+g);else switch(g){case 26:x=" ";break;case z.AS:d=u,u=it.ALPHA_SHIFT;break;case z.ML:u=it.MIXED;break;case z.PS:d=u,u=it.PUNCT_SHIFT;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case z.TEXT_COMPACTION_MODE_LATCH:u=it.ALPHA;break}break;case it.MIXED:if(g<z.PL)x=z.MIXED_CHARS[g];else switch(g){case z.PL:u=it.PUNCT;break;case 26:x=" ";break;case z.LL:u=it.LOWER;break;case z.AL:u=it.ALPHA;break;case z.PS:d=u,u=it.PUNCT_SHIFT;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case z.TEXT_COMPACTION_MODE_LATCH:u=it.ALPHA;break}break;case it.PUNCT:if(g<z.PAL)x=z.PUNCT_CHARS[g];else switch(g){case z.PAL:u=it.ALPHA;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case z.TEXT_COMPACTION_MODE_LATCH:u=it.ALPHA;break}break;case it.ALPHA_SHIFT:if(u=d,g<26)x=String.fromCharCode(65+g);else switch(g){case 26:x=" ";break;case z.TEXT_COMPACTION_MODE_LATCH:u=it.ALPHA;break}break;case it.PUNCT_SHIFT:if(u=d,g<z.PAL)x=z.PUNCT_CHARS[g];else switch(g){case z.PAL:u=it.ALPHA;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case z.TEXT_COMPACTION_MODE_LATCH:u=it.ALPHA;break}break}x!==""&&c.append(x),h++}}static byteCompaction(r,s,a,c,u){let d=new zC,h=0,g=0,x=!1;switch(r){case z.BYTE_COMPACTION_MODE_LATCH:let y=new Int32Array(6),_=s[c++];for(;c<s[0]&&!x;)switch(y[h++]=_,g=900*g+_,_=s[c++],_){case z.TEXT_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH:case z.NUMERIC_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:c--,x=!0;break;default:if(h%5===0&&h>0){for(let A=0;A<6;++A)d.write(Number(_i(g)>>_i(8*(5-A))));g=0,h=0}break}c===s[0]&&_<z.TEXT_COMPACTION_MODE_LATCH&&(y[h++]=_);for(let A=0;A<h;A++)d.write(y[A]);break;case z.BYTE_COMPACTION_MODE_LATCH_6:for(;c<s[0]&&!x;){let A=s[c++];if(A<z.TEXT_COMPACTION_MODE_LATCH)h++,g=900*g+A;else switch(A){case z.TEXT_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH:case z.NUMERIC_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:c--,x=!0;break}if(h%5===0&&h>0){for(let T=0;T<6;++T)d.write(Number(_i(g)>>_i(8*(5-T))));g=0,h=0}}break}return u.append(Qe.decode(d.toByteArray(),a)),c}static numericCompaction(r,s,a){let c=0,u=!1,d=new Int32Array(z.MAX_NUMERIC_CODEWORDS);for(;s<r[0]&&!u;){let h=r[s++];if(s===r[0]&&(u=!0),h<z.TEXT_COMPACTION_MODE_LATCH)d[c]=h,c++;else switch(h){case z.TEXT_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:s--,u=!0;break}(c%z.MAX_NUMERIC_CODEWORDS===0||h===z.NUMERIC_COMPACTION_MODE_LATCH||u)&&c>0&&(a.append(z.decodeBase900toBase10(d,c)),c=0)}return s}static decodeBase900toBase10(r,s){let a=_i(0);for(let u=0;u<s;u++)a+=z.EXP900[s-u-1]*_i(r[u]);let c=a.toString();if(c.charAt(0)!=="1")throw new U;return c.substring(1)}}z.TEXT_COMPACTION_MODE_LATCH=900,z.BYTE_COMPACTION_MODE_LATCH=901,z.NUMERIC_COMPACTION_MODE_LATCH=902,z.BYTE_COMPACTION_MODE_LATCH_6=924,z.ECI_USER_DEFINED=925,z.ECI_GENERAL_PURPOSE=926,z.ECI_CHARSET=927,z.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,z.MACRO_PDF417_TERMINATOR=922,z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,z.MAX_NUMERIC_CODEWORDS=15,z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,z.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,z.PL=25,z.LL=27,z.AS=27,z.ML=28,z.AL=28,z.PS=29,z.PAL=29,z.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,z.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",z.EXP900=og()?WC():[],z.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Re{constructor(){}static decode(r,s,a,c,u,d,h){let g=new as(r,s,a,c,u),x=null,y=null,_;for(let D=!0;;D=!1){if(s!=null&&(x=Re.getRowIndicatorColumn(r,g,s,!0,d,h)),c!=null&&(y=Re.getRowIndicatorColumn(r,g,c,!1,d,h)),_=Re.merge(x,y),_==null)throw V.getNotFoundInstance();let P=_.getBoundingBox();if(D&&P!=null&&(P.getMinY()<g.getMinY()||P.getMaxY()>g.getMaxY()))g=P;else break}_.setBoundingBox(g);let A=_.getBarcodeColumnCount()+1;_.setDetectionResultColumn(0,x),_.setDetectionResultColumn(A,y);let T=x!=null;for(let D=1;D<=A;D++){let P=T?D:A-D;if(_.getDetectionResultColumn(P)!==void 0)continue;let L;P===0||P===A?L=new ng(g,P===0):L=new sa(g),_.setDetectionResultColumn(P,L);let W=-1,ne=W;for(let re=g.getMinY();re<=g.getMaxY();re++){if(W=Re.getStartColumn(_,P,re,T),W<0||W>g.getMaxX()){if(ne===-1)continue;W=ne}let Q=Re.detectCodeword(r,g.getMinX(),g.getMaxX(),T,W,re,d,h);Q!=null&&(L.setCodeword(re,Q),ne=W,d=Math.min(d,Q.getWidth()),h=Math.max(h,Q.getWidth()))}}return Re.createDecoderResult(_)}static merge(r,s){if(r==null&&s==null)return null;let a=Re.getBarcodeMetadata(r,s);if(a==null)return null;let c=as.merge(Re.adjustBoundingBox(r),Re.adjustBoundingBox(s));return new aa(a,c)}static adjustBoundingBox(r){if(r==null)return null;let s=r.getRowHeights();if(s==null)return null;let a=Re.getMax(s),c=0;for(let h of s)if(c+=a-h,h>0)break;let u=r.getCodewords();for(let h=0;c>0&&u[h]==null;h++)c--;let d=0;for(let h=s.length-1;h>=0&&(d+=a-s[h],!(s[h]>0));h--);for(let h=u.length-1;d>0&&u[h]==null;h--)d--;return r.getBoundingBox().addMissingRows(c,d,r.isLeft())}static getMax(r){let s=-1;for(let a of r)s=Math.max(s,a);return s}static getBarcodeMetadata(r,s){let a;if(r==null||(a=r.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let c;return s==null||(c=s.getBarcodeMetadata())==null?a:a.getColumnCount()!==c.getColumnCount()&&a.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&a.getRowCount()!==c.getRowCount()?null:a}static getRowIndicatorColumn(r,s,a,c,u,d){let h=new ng(s,c);for(let g=0;g<2;g++){let x=g===0?1:-1,y=Math.trunc(Math.trunc(a.getX()));for(let _=Math.trunc(Math.trunc(a.getY()));_<=s.getMaxY()&&_>=s.getMinY();_+=x){let A=Re.detectCodeword(r,0,r.getWidth(),c,y,_,u,d);A!=null&&(h.setCodeword(_,A),c?y=A.getStartX():y=A.getEndX())}}return h}static adjustCodewordCount(r,s){let a=s[0][1],c=a.getValue(),u=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-Re.getNumberOfECCodeWords(r.getBarcodeECLevel());if(c.length===0){if(u<1||u>be.MAX_CODEWORDS_IN_BARCODE)throw V.getNotFoundInstance();a.setValue(u)}else c[0]!==u&&a.setValue(u)}static createDecoderResult(r){let s=Re.createBarcodeMatrix(r);Re.adjustCodewordCount(r,s);let a=new Array,c=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),u=[],d=new Array;for(let g=0;g<r.getBarcodeRowCount();g++)for(let x=0;x<r.getBarcodeColumnCount();x++){let y=s[g][x+1].getValue(),_=g*r.getBarcodeColumnCount()+x;y.length===0?a.push(_):y.length===1?c[_]=y[0]:(d.push(_),u.push(y))}let h=new Array(u.length);for(let g=0;g<h.length;g++)h[g]=u[g];return Re.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),c,be.toIntArray(a),be.toIntArray(d),h)}static createDecoderResultFromAmbiguousValues(r,s,a,c,u){let d=new Int32Array(c.length),h=100;for(;h-- >0;){for(let g=0;g<d.length;g++)s[c[g]]=u[g][d[g]];try{return Re.decodeCodewords(s,r,a)}catch(g){if(!(g instanceof R))throw g}if(d.length===0)throw R.getChecksumInstance();for(let g=0;g<d.length;g++)if(d[g]<u[g].length-1){d[g]++;break}else if(d[g]=0,g===d.length-1)throw R.getChecksumInstance()}throw R.getChecksumInstance()}static createBarcodeMatrix(r){let s=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let c=0;c<s.length;c++)for(let u=0;u<s[c].length;u++)s[c][u]=new oa;let a=0;for(let c of r.getDetectionResultColumns()){if(c!=null){for(let u of c.getCodewords())if(u!=null){let d=u.getRowNumber();if(d>=0){if(d>=s.length)continue;s[d][a].setValue(u.getValue())}}}a++}return s}static isValidBarcodeColumn(r,s){return s>=0&&s<=r.getBarcodeColumnCount()+1}static getStartColumn(r,s,a,c){let u=c?1:-1,d=null;if(Re.isValidBarcodeColumn(r,s-u)&&(d=r.getDetectionResultColumn(s-u).getCodeword(a)),d!=null)return c?d.getEndX():d.getStartX();if(d=r.getDetectionResultColumn(s).getCodewordNearby(a),d!=null)return c?d.getStartX():d.getEndX();if(Re.isValidBarcodeColumn(r,s-u)&&(d=r.getDetectionResultColumn(s-u).getCodewordNearby(a)),d!=null)return c?d.getEndX():d.getStartX();let h=0;for(;Re.isValidBarcodeColumn(r,s-u);){s-=u;for(let g of r.getDetectionResultColumn(s).getCodewords())if(g!=null)return(c?g.getEndX():g.getStartX())+u*h*(g.getEndX()-g.getStartX());h++}return c?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,s,a,c,u,d,h,g){u=Re.adjustCodewordStartColumn(r,s,a,c,u,d);let x=Re.getModuleBitCount(r,s,a,c,u,d);if(x==null)return null;let y,_=je.sum(x);if(c)y=u+_;else{for(let D=0;D<x.length/2;D++){let P=x[D];x[D]=x[x.length-1-D],x[x.length-1-D]=P}y=u,u=y-_}if(!Re.checkCodewordSkew(_,h,g))return null;let A=Pn.getDecodedValue(x),T=be.getCodeword(A);return T===-1?null:new la(u,y,Re.getCodewordBucketNumber(A),T)}static getModuleBitCount(r,s,a,c,u,d){let h=u,g=new Int32Array(8),x=0,y=c?1:-1,_=c;for(;(c?h<a:h>=s)&&x<g.length;)r.get(h,d)===_?(g[x]++,h+=y):(x++,_=!_);return x===g.length||h===(c?a:s)&&x===g.length-1?g:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,s,a,c,u,d){let h=u,g=c?-1:1;for(let x=0;x<2;x++){for(;(c?h>=s:h<a)&&c===r.get(h,d);){if(Math.abs(u-h)>Re.CODEWORD_SKEW_SIZE)return u;h+=g}g=-g,c=!c}return h}static checkCodewordSkew(r,s,a){return s-Re.CODEWORD_SKEW_SIZE<=r&&r<=a+Re.CODEWORD_SKEW_SIZE}static decodeCodewords(r,s,a){if(r.length===0)throw U.getFormatInstance();let c=1<<s+1,u=Re.correctErrors(r,a,c);Re.verifyCodewordCount(r,c);let d=z.decode(r,""+s);return d.setErrorsCorrected(u),d.setErasures(a.length),d}static correctErrors(r,s,a){if(s!=null&&s.length>a/2+Re.MAX_ERRORS||a<0||a>Re.MAX_EC_CODEWORDS)throw R.getChecksumInstance();return Re.errorCorrection.decode(r,a,s)}static verifyCodewordCount(r,s){if(r.length<4)throw U.getFormatInstance();let a=r[0];if(a>r.length)throw U.getFormatInstance();if(a===0)if(s<r.length)r[0]=r.length-s;else throw U.getFormatInstance()}static getBitCountForCodeword(r){let s=new Int32Array(8),a=0,c=s.length-1;for(;!((r&1)!==a&&(a=r&1,c--,c<0));)s[c]++,r>>=1;return s}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return Re.getCodewordBucketNumber(Re.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let s=new ia;for(let a=0;a<r.length;a++){s.format("Row %2d: ",a);for(let c=0;c<r[a].length;c++){let u=r[a][c];u.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}s.format("%n")}return s.toString()}}Re.CODEWORD_SKEW_SIZE=2,Re.MAX_ERRORS=3,Re.MAX_EC_CODEWORDS=512,Re.errorCorrection=new tg;class an{decode(r,s=null){let a=an.decode(r,s,!1);if(a==null||a.length===0||a[0]==null)throw V.getNotFoundInstance();return a[0]}decodeMultiple(r,s=null){try{return an.decode(r,s,!0)}catch(a){throw a instanceof U||a instanceof R?V.getNotFoundInstance():a}}static decode(r,s,a){const c=new Array,u=Ne.detectMultiple(r,s,a);for(const d of u.getPoints()){const h=Re.decode(u.getBits(),d[4],d[5],d[6],d[7],an.getMinCodewordWidth(d),an.getMaxCodewordWidth(d)),g=new ve(h.getText(),h.getRawBytes(),void 0,d,ce.PDF_417);g.putMetadata(Oe.ERROR_CORRECTION_LEVEL,h.getECLevel());const x=h.getOther();x!=null&&g.putMetadata(Oe.PDF417_EXTRA_METADATA,x),c.push(g)}return c.map(d=>d)}static getMaxWidth(r,s){return r==null||s==null?0:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMinWidth(r,s){return r==null||s==null?N.MAX_VALUE:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(an.getMaxWidth(r[0],r[4]),an.getMaxWidth(r[6],r[2])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN),Math.max(an.getMaxWidth(r[1],r[5]),an.getMaxWidth(r[7],r[3])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(an.getMinWidth(r[0],r[4]),an.getMinWidth(r[6],r[2])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN),Math.min(an.getMinWidth(r[1],r[5]),an.getMinWidth(r[7],r[3])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN)))}reset(){}}class Yl extends m{}Yl.kind="ReaderException";class ag{constructor(r,s){this.verbose=r===!0,s&&this.setHints(s)}decode(r,s){return s&&this.setHints(s),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const s=!i(r)&&r.get(Z.TRY_HARDER)===!0,a=i(r)?null:r.get(Z.POSSIBLE_FORMATS),c=new Array;if(!i(a)){const u=a.some(d=>d===ce.UPC_A||d===ce.UPC_E||d===ce.EAN_13||d===ce.EAN_8||d===ce.CODABAR||d===ce.CODE_39||d===ce.CODE_93||d===ce.CODE_128||d===ce.ITF||d===ce.RSS_14||d===ce.RSS_EXPANDED);u&&!s&&c.push(new $s(r,this.verbose)),a.includes(ce.QR_CODE)&&c.push(new Ci),a.includes(ce.DATA_MATRIX)&&c.push(new vi),a.includes(ce.AZTEC)&&c.push(new Ut),a.includes(ce.PDF_417)&&c.push(new an),u&&s&&c.push(new $s(r,this.verbose))}c.length===0&&(s||c.push(new $s(r,this.verbose)),c.push(new Ci),c.push(new vi),c.push(new Ut),c.push(new an),s&&c.push(new $s(r,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new Yl("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(r,this.hints)}catch(a){if(a instanceof Yl)continue}throw new V("No MultiFormat Readers were able to detect the code.")}}class VC extends Xe{constructor(r=null,s=500){const a=new ag;a.setHints(r),super(a,s)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class HC extends Xe{constructor(r=500){super(new an,r)}}class GC extends Xe{constructor(r=500){super(new Ci,r)}}var Id;(function(C){C[C.ERROR_CORRECTION=0]="ERROR_CORRECTION",C[C.CHARACTER_SET=1]="CHARACTER_SET",C[C.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",C[C.MIN_SIZE=3]="MIN_SIZE",C[C.MAX_SIZE=4]="MAX_SIZE",C[C.MARGIN=5]="MARGIN",C[C.PDF417_COMPACT=6]="PDF417_COMPACT",C[C.PDF417_COMPACTION=7]="PDF417_COMPACTION",C[C.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",C[C.AZTEC_LAYERS=9]="AZTEC_LAYERS",C[C.QR_VERSION=10]="QR_VERSION"})(Id||(Id={}));var Xt=Id;class Td{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new Mt(r,Int32Array.from([1])))}buildGenerator(r){const s=this.cachedGenerators;if(r>=s.length){let a=s[s.length-1];const c=this.field;for(let u=s.length;u<=r;u++){const d=a.multiply(new Mt(c,Int32Array.from([1,c.exp(u-1+c.getGeneratorBase())])));s.push(d),a=d}}return s[r]}encode(r,s){if(s===0)throw new v("No error correction bytes");const a=r.length-s;if(a<=0)throw new v("No data bytes provided");const c=this.buildGenerator(s),u=new Int32Array(a);B.arraycopy(r,0,u,0,a);let d=new Mt(this.field,u);d=d.multiplyByMonomial(s,1);const g=d.divide(c)[1].getCoefficients(),x=s-g.length;for(let y=0;y<x;y++)r[a+y]=0;B.arraycopy(g,0,r,a+x,g.length)}}class kt{constructor(){}static applyMaskPenaltyRule1(r){return kt.applyMaskPenaltyRule1Internal(r,!0)+kt.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let s=0;const a=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let d=0;d<u-1;d++){const h=a[d];for(let g=0;g<c-1;g++){const x=h[g];x===h[g+1]&&x===a[d+1][g]&&x===a[d+1][g+1]&&s++}}return kt.N2*s}static applyMaskPenaltyRule3(r){let s=0;const a=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let d=0;d<u;d++)for(let h=0;h<c;h++){const g=a[d];h+6<c&&g[h]===1&&g[h+1]===0&&g[h+2]===1&&g[h+3]===1&&g[h+4]===1&&g[h+5]===0&&g[h+6]===1&&(kt.isWhiteHorizontal(g,h-4,h)||kt.isWhiteHorizontal(g,h+7,h+11))&&s++,d+6<u&&a[d][h]===1&&a[d+1][h]===0&&a[d+2][h]===1&&a[d+3][h]===1&&a[d+4][h]===1&&a[d+5][h]===0&&a[d+6][h]===1&&(kt.isWhiteVertical(a,h,d-4,d)||kt.isWhiteVertical(a,h,d+7,d+11))&&s++}return s*kt.N3}static isWhiteHorizontal(r,s,a){s=Math.max(s,0),a=Math.min(a,r.length);for(let c=s;c<a;c++)if(r[c]===1)return!1;return!0}static isWhiteVertical(r,s,a,c){a=Math.max(a,0),c=Math.min(c,r.length);for(let u=a;u<c;u++)if(r[u][s]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let s=0;const a=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let g=0;g<u;g++){const x=a[g];for(let y=0;y<c;y++)x[y]===1&&s++}const d=r.getHeight()*r.getWidth();return Math.floor(Math.abs(s*2-d)*10/d)*kt.N4}static getDataMaskBit(r,s,a){let c,u;switch(r){case 0:c=a+s&1;break;case 1:c=a&1;break;case 2:c=s%3;break;case 3:c=(a+s)%3;break;case 4:c=Math.floor(a/2)+Math.floor(s/3)&1;break;case 5:u=a*s,c=(u&1)+u%3;break;case 6:u=a*s,c=(u&1)+u%3&1;break;case 7:u=a*s,c=u%3+(a+s&1)&1;break;default:throw new v("Invalid mask pattern: "+r)}return c===0}static applyMaskPenaltyRule1Internal(r,s){let a=0;const c=s?r.getHeight():r.getWidth(),u=s?r.getWidth():r.getHeight(),d=r.getArray();for(let h=0;h<c;h++){let g=0,x=-1;for(let y=0;y<u;y++){const _=s?d[h][y]:d[y][h];_===x?g++:(g>=5&&(a+=kt.N1+(g-5)),g=1,x=_)}g>=5&&(a+=kt.N1+(g-5))}return a}}kt.N1=3,kt.N2=3,kt.N3=40,kt.N4=10;class $l{constructor(r,s){this.width=r,this.height=s;const a=new Array(s);for(let c=0;c!==s;c++)a[c]=new Uint8Array(r);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(r,s){return this.bytes[s][r]}getArray(){return this.bytes}setNumber(r,s,a){this.bytes[s][r]=a}setBoolean(r,s,a){this.bytes[s][r]=a?1:0}clear(r){for(const s of this.bytes)k.fill(s,r)}equals(r){if(!(r instanceof $l))return!1;const s=r;if(this.width!==s.width||this.height!==s.height)return!1;for(let a=0,c=this.height;a<c;++a){const u=this.bytes[a],d=s.bytes[a];for(let h=0,g=this.width;h<g;++h)if(u[h]!==d[h])return!1}return!0}toString(){const r=new ke;for(let s=0,a=this.height;s<a;++s){const c=this.bytes[s];for(let u=0,d=this.width;u<d;++u)switch(c[u]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class ls{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new ke;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<ls.NUM_MASK_PATTERNS}}ls.NUM_MASK_PATTERNS=8;class ct extends m{}ct.kind="WriterException";class Ce{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,s,a,c,u){Ce.clearMatrix(u),Ce.embedBasicPatterns(a,u),Ce.embedTypeInfo(s,c,u),Ce.maybeEmbedVersionInfo(a,u),Ce.embedDataBits(r,c,u)}static embedBasicPatterns(r,s){Ce.embedPositionDetectionPatternsAndSeparators(s),Ce.embedDarkDotAtLeftBottomCorner(s),Ce.maybeEmbedPositionAdjustmentPatterns(r,s),Ce.embedTimingPatterns(s)}static embedTypeInfo(r,s,a){const c=new j;Ce.makeTypeInfoBits(r,s,c);for(let u=0,d=c.getSize();u<d;++u){const h=c.get(c.getSize()-1-u),g=Ce.TYPE_INFO_COORDINATES[u],x=g[0],y=g[1];if(a.setBoolean(x,y,h),u<8){const _=a.getWidth()-u-1;a.setBoolean(_,8,h)}else{const A=a.getHeight()-7+(u-8);a.setBoolean(8,A,h)}}}static maybeEmbedVersionInfo(r,s){if(r.getVersionNumber()<7)return;const a=new j;Ce.makeVersionInfoBits(r,a);let c=6*3-1;for(let u=0;u<6;++u)for(let d=0;d<3;++d){const h=a.get(c);c--,s.setBoolean(u,s.getHeight()-11+d,h),s.setBoolean(s.getHeight()-11+d,u,h)}}static embedDataBits(r,s,a){let c=0,u=-1,d=a.getWidth()-1,h=a.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);h>=0&&h<a.getHeight();){for(let g=0;g<2;++g){const x=d-g;if(!Ce.isEmpty(a.get(x,h)))continue;let y;c<r.getSize()?(y=r.get(c),++c):y=!1,s!==255&&kt.getDataMaskBit(s,x,h)&&(y=!y),a.setBoolean(x,h,y)}h+=u}u=-u,h+=u,d-=2}if(c!==r.getSize())throw new ct("Not all bits consumed: "+c+"/"+r.getSize())}static findMSBSet(r){return 32-N.numberOfLeadingZeros(r)}static calculateBCHCode(r,s){if(s===0)throw new v("0 polynomial");const a=Ce.findMSBSet(s);for(r<<=a-1;Ce.findMSBSet(r)>=a;)r^=s<<Ce.findMSBSet(r)-a;return r}static makeTypeInfoBits(r,s,a){if(!ls.isValidMaskPattern(s))throw new ct("Invalid mask pattern");const c=r.getBits()<<3|s;a.appendBits(c,5);const u=Ce.calculateBCHCode(c,Ce.TYPE_INFO_POLY);a.appendBits(u,10);const d=new j;if(d.appendBits(Ce.TYPE_INFO_MASK_PATTERN,15),a.xor(d),a.getSize()!==15)throw new ct("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(r,s){s.appendBits(r.getVersionNumber(),6);const a=Ce.calculateBCHCode(r.getVersionNumber(),Ce.VERSION_INFO_POLY);if(s.appendBits(a,12),s.getSize()!==18)throw new ct("should not happen but we got: "+s.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let s=8;s<r.getWidth()-8;++s){const a=(s+1)%2;Ce.isEmpty(r.get(s,6))&&r.setNumber(s,6,a),Ce.isEmpty(r.get(6,s))&&r.setNumber(6,s,a)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new ct;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,s,a){for(let c=0;c<8;++c){if(!Ce.isEmpty(a.get(r+c,s)))throw new ct;a.setNumber(r+c,s,0)}}static embedVerticalSeparationPattern(r,s,a){for(let c=0;c<7;++c){if(!Ce.isEmpty(a.get(r,s+c)))throw new ct;a.setNumber(r,s+c,0)}}static embedPositionAdjustmentPattern(r,s,a){for(let c=0;c<5;++c){const u=Ce.POSITION_ADJUSTMENT_PATTERN[c];for(let d=0;d<5;++d)a.setNumber(r+d,s+c,u[d])}}static embedPositionDetectionPattern(r,s,a){for(let c=0;c<7;++c){const u=Ce.POSITION_DETECTION_PATTERN[c];for(let d=0;d<7;++d)a.setNumber(r+d,s+c,u[d])}}static embedPositionDetectionPatternsAndSeparators(r){const s=Ce.POSITION_DETECTION_PATTERN[0].length;Ce.embedPositionDetectionPattern(0,0,r),Ce.embedPositionDetectionPattern(r.getWidth()-s,0,r),Ce.embedPositionDetectionPattern(0,r.getWidth()-s,r);const a=8;Ce.embedHorizontalSeparationPattern(0,a-1,r),Ce.embedHorizontalSeparationPattern(r.getWidth()-a,a-1,r),Ce.embedHorizontalSeparationPattern(0,r.getWidth()-a,r);const c=7;Ce.embedVerticalSeparationPattern(c,0,r),Ce.embedVerticalSeparationPattern(r.getHeight()-c-1,0,r),Ce.embedVerticalSeparationPattern(c,r.getHeight()-c,r)}static maybeEmbedPositionAdjustmentPatterns(r,s){if(r.getVersionNumber()<2)return;const a=r.getVersionNumber()-1,c=Ce.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let u=0,d=c.length;u!==d;u++){const h=c[u];if(h>=0)for(let g=0;g!==d;g++){const x=c[g];x>=0&&Ce.isEmpty(s.get(x,h))&&Ce.embedPositionAdjustmentPattern(x-2,h-2,s)}}}}Ce.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ce.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ce.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ce.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ce.VERSION_INFO_POLY=7973,Ce.TYPE_INFO_POLY=1335,Ce.TYPE_INFO_MASK_PATTERN=21522;class XC{constructor(r,s){this.dataBytes=r,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class wt{constructor(){}static calculateMaskPenalty(r){return kt.applyMaskPenaltyRule1(r)+kt.applyMaskPenaltyRule2(r)+kt.applyMaskPenaltyRule3(r)+kt.applyMaskPenaltyRule4(r)}static encode(r,s,a=null){let c=wt.DEFAULT_BYTE_MODE_ENCODING;const u=a!==null&&a.get(Xt.CHARACTER_SET)!==void 0;u&&(c=a.get(Xt.CHARACTER_SET).toString());const d=this.chooseMode(r,c),h=new j;if(d===xe.BYTE&&(u||wt.DEFAULT_BYTE_MODE_ENCODING!==c)){const re=$.getCharacterSetECIByName(c);re!==void 0&&this.appendECI(re,h)}this.appendModeInfo(d,h);const g=new j;this.appendBytes(r,d,g,c);let x;if(a!==null&&a.get(Xt.QR_VERSION)!==void 0){const re=Number.parseInt(a.get(Xt.QR_VERSION).toString(),10);x=pe.getVersionForNumber(re);const Q=this.calculateBitsNeeded(d,h,g,x);if(!this.willFit(Q,x,s))throw new ct("Data too big for requested version")}else x=this.recommendVersion(s,d,h,g);const y=new j;y.appendBitArray(h);const _=d===xe.BYTE?g.getSizeInBytes():r.length;this.appendLengthInfo(_,x,d,y),y.appendBitArray(g);const A=x.getECBlocksForLevel(s),T=x.getTotalCodewords()-A.getTotalECCodewords();this.terminateBits(T,y);const D=this.interleaveWithECBytes(y,x.getTotalCodewords(),T,A.getNumBlocks()),P=new ls;P.setECLevel(s),P.setMode(d),P.setVersion(x);const L=x.getDimensionForVersion(),W=new $l(L,L),ne=this.chooseMaskPattern(D,s,x,W);return P.setMaskPattern(ne),Ce.buildMatrix(D,s,x,ne,W),P.setMatrix(W),P}static recommendVersion(r,s,a,c){const u=this.calculateBitsNeeded(s,a,c,pe.getVersionForNumber(1)),d=this.chooseVersion(u,r),h=this.calculateBitsNeeded(s,a,c,d);return this.chooseVersion(h,r)}static calculateBitsNeeded(r,s,a,c){return s.getSize()+r.getCharacterCountBits(c)+a.getSize()}static getAlphanumericCode(r){return r<wt.ALPHANUMERIC_TABLE.length?wt.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,s=null){if($.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(r))return xe.KANJI;let a=!1,c=!1;for(let u=0,d=r.length;u<d;++u){const h=r.charAt(u);if(wt.isDigit(h))a=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)c=!0;else return xe.BYTE}return c?xe.ALPHANUMERIC:a?xe.NUMERIC:xe.BYTE}static isOnlyDoubleByteKanji(r){let s;try{s=Qe.encode(r,$.SJIS)}catch{return!1}const a=s.length;if(a%2!==0)return!1;for(let c=0;c<a;c+=2){const u=s[c]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(r,s,a,c){let u=Number.MAX_SAFE_INTEGER,d=-1;for(let h=0;h<ls.NUM_MASK_PATTERNS;h++){Ce.buildMatrix(r,s,a,h,c);let g=this.calculateMaskPenalty(c);g<u&&(u=g,d=h)}return d}static chooseVersion(r,s){for(let a=1;a<=40;a++){const c=pe.getVersionForNumber(a);if(wt.willFit(r,c,s))return c}throw new ct("Data too big")}static willFit(r,s,a){const c=s.getTotalCodewords(),d=s.getECBlocksForLevel(a).getTotalECCodewords(),h=c-d,g=(r+7)/8;return h>=g}static terminateBits(r,s){const a=r*8;if(s.getSize()>a)throw new ct("data bits cannot fit in the QR Code"+s.getSize()+" > "+a);for(let d=0;d<4&&s.getSize()<a;++d)s.appendBit(!1);const c=s.getSize()&7;if(c>0)for(let d=c;d<8;d++)s.appendBit(!1);const u=r-s.getSizeInBytes();for(let d=0;d<u;++d)s.appendBits(d&1?17:236,8);if(s.getSize()!==a)throw new ct("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,s,a,c,u,d){if(c>=a)throw new ct("Block ID too large");const h=r%a,g=a-h,x=Math.floor(r/a),y=x+1,_=Math.floor(s/a),A=_+1,T=x-_,D=y-A;if(T!==D)throw new ct("EC bytes mismatch");if(a!==g+h)throw new ct("RS blocks mismatch");if(r!==(_+T)*g+(A+D)*h)throw new ct("Total bytes mismatch");c<g?(u[0]=_,d[0]=T):(u[0]=A,d[0]=D)}static interleaveWithECBytes(r,s,a,c){if(r.getSizeInBytes()!==a)throw new ct("Number of bits and data bytes does not match");let u=0,d=0,h=0;const g=new Array;for(let y=0;y<c;++y){const _=new Int32Array(1),A=new Int32Array(1);wt.getNumDataBytesAndNumECBytesForBlockID(s,a,c,y,_,A);const T=_[0],D=new Uint8Array(T);r.toBytes(8*u,D,0,T);const P=wt.generateECBytes(D,A[0]);g.push(new XC(D,P)),d=Math.max(d,T),h=Math.max(h,P.length),u+=_[0]}if(a!==u)throw new ct("Data bytes does not match offset");const x=new j;for(let y=0;y<d;++y)for(const _ of g){const A=_.getDataBytes();y<A.length&&x.appendBits(A[y],8)}for(let y=0;y<h;++y)for(const _ of g){const A=_.getErrorCorrectionBytes();y<A.length&&x.appendBits(A[y],8)}if(s!==x.getSizeInBytes())throw new ct("Interleaving error: "+s+" and "+x.getSizeInBytes()+" differ.");return x}static generateECBytes(r,s){const a=r.length,c=new Int32Array(a+s);for(let d=0;d<a;d++)c[d]=r[d]&255;new Td(ze.QR_CODE_FIELD_256).encode(c,s);const u=new Uint8Array(s);for(let d=0;d<s;d++)u[d]=c[a+d];return u}static appendModeInfo(r,s){s.appendBits(r.getBits(),4)}static appendLengthInfo(r,s,a,c){const u=a.getCharacterCountBits(s);if(r>=1<<u)throw new ct(r+" is bigger than "+((1<<u)-1));c.appendBits(r,u)}static appendBytes(r,s,a,c){switch(s){case xe.NUMERIC:wt.appendNumericBytes(r,a);break;case xe.ALPHANUMERIC:wt.appendAlphanumericBytes(r,a);break;case xe.BYTE:wt.append8BitBytes(r,a,c);break;case xe.KANJI:wt.appendKanjiBytes(r,a);break;default:throw new ct("Invalid mode: "+s)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const s=wt.getDigit(r);return s>=0&&s<=9}static appendNumericBytes(r,s){const a=r.length;let c=0;for(;c<a;){const u=wt.getDigit(r.charAt(c));if(c+2<a){const d=wt.getDigit(r.charAt(c+1)),h=wt.getDigit(r.charAt(c+2));s.appendBits(u*100+d*10+h,10),c+=3}else if(c+1<a){const d=wt.getDigit(r.charAt(c+1));s.appendBits(u*10+d,7),c+=2}else s.appendBits(u,4),c++}}static appendAlphanumericBytes(r,s){const a=r.length;let c=0;for(;c<a;){const u=wt.getAlphanumericCode(r.charCodeAt(c));if(u===-1)throw new ct;if(c+1<a){const d=wt.getAlphanumericCode(r.charCodeAt(c+1));if(d===-1)throw new ct;s.appendBits(u*45+d,11),c+=2}else s.appendBits(u,6),c++}}static append8BitBytes(r,s,a){let c;try{c=Qe.encode(r,a)}catch(u){throw new ct(u)}for(let u=0,d=c.length;u!==d;u++){const h=c[u];s.appendBits(h,8)}}static appendKanjiBytes(r,s){let a;try{a=Qe.encode(r,$.SJIS)}catch(u){throw new ct(u)}const c=a.length;for(let u=0;u<c;u+=2){const d=a[u]&255,h=a[u+1]&255,g=d<<8&4294967295|h;let x=-1;if(g>=33088&&g<=40956?x=g-33088:g>=57408&&g<=60351&&(x=g-49472),x===-1)throw new ct("Invalid byte sequence");const y=(x>>8)*192+(x&255);s.appendBits(y,13)}}static appendECI(r,s){s.appendBits(xe.ECI.getBits(),4),s.appendBits(r.getValue(),8)}}wt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),wt.DEFAULT_BYTE_MODE_ENCODING=$.UTF8.getName();class cs{write(r,s,a,c=null){if(r.length===0)throw new v("Found empty contents");if(s<0||a<0)throw new v("Requested dimensions are too small: "+s+"x"+a);let u=dt.L,d=cs.QUIET_ZONE_SIZE;c!==null&&(c.get(Xt.ERROR_CORRECTION)!==void 0&&(u=dt.fromString(c.get(Xt.ERROR_CORRECTION).toString())),c.get(Xt.MARGIN)!==void 0&&(d=Number.parseInt(c.get(Xt.MARGIN).toString(),10)));const h=wt.encode(r,u,c);return this.renderResult(h,s,a,d)}writeToDom(r,s,a,c,u=null){typeof r=="string"&&(r=document.querySelector(r));const d=this.write(s,a,c,u);r&&r.appendChild(d)}renderResult(r,s,a,c){const u=r.getMatrix();if(u===null)throw new ir;const d=u.getWidth(),h=u.getHeight(),g=d+c*2,x=h+c*2,y=Math.max(s,g),_=Math.max(a,x),A=Math.min(Math.floor(y/g),Math.floor(_/x)),T=Math.floor((y-d*A)/2),D=Math.floor((_-h*A)/2),P=this.createSVGElement(y,_);for(let L=0,W=D;L<h;L++,W+=A)for(let ne=0,re=T;ne<d;ne++,re+=A)if(u.get(ne,L)===1){const Q=this.createSvgRectElement(re,W,A,A);P.appendChild(Q)}return P}createSVGElement(r,s){const a=document.createElementNS(cs.SVG_NS,"svg");return a.setAttributeNS(null,"height",r.toString()),a.setAttributeNS(null,"width",s.toString()),a}createSvgRectElement(r,s,a,c){const u=document.createElementNS(cs.SVG_NS,"rect");return u.setAttributeNS(null,"x",r.toString()),u.setAttributeNS(null,"y",s.toString()),u.setAttributeNS(null,"height",a.toString()),u.setAttributeNS(null,"width",c.toString()),u.setAttributeNS(null,"fill","#000000"),u}}cs.QUIET_ZONE_SIZE=4,cs.SVG_NS="http://www.w3.org/2000/svg";class qs{encode(r,s,a,c,u){if(r.length===0)throw new v("Found empty contents");if(s!==ce.QR_CODE)throw new v("Can only encode QR_CODE, but got "+s);if(a<0||c<0)throw new v(`Requested dimensions are too small: ${a}x${c}`);let d=dt.L,h=qs.QUIET_ZONE_SIZE;u!==null&&(u.get(Xt.ERROR_CORRECTION)!==void 0&&(d=dt.fromString(u.get(Xt.ERROR_CORRECTION).toString())),u.get(Xt.MARGIN)!==void 0&&(h=Number.parseInt(u.get(Xt.MARGIN).toString(),10)));const g=wt.encode(r,d,u);return qs.renderResult(g,a,c,h)}static renderResult(r,s,a,c){const u=r.getMatrix();if(u===null)throw new ir;const d=u.getWidth(),h=u.getHeight(),g=d+c*2,x=h+c*2,y=Math.max(s,g),_=Math.max(a,x),A=Math.min(Math.floor(y/g),Math.floor(_/x)),T=Math.floor((y-d*A)/2),D=Math.floor((_-h*A)/2),P=new Ie(y,_);for(let L=0,W=D;L<h;L++,W+=A)for(let ne=0,re=T;ne<d;ne++,re+=A)u.get(ne,L)===1&&P.setRegion(re,W,A,A);return P}}qs.QUIET_ZONE_SIZE=4;class YC{encode(r,s,a,c,u){let d;switch(s){case ce.QR_CODE:d=new qs;break;default:throw new v("No encoder available for format "+s)}return d.encode(r,s,a,c,u)}}class jr extends se{constructor(r,s,a,c,u,d,h,g){if(super(d,h),this.yuvData=r,this.dataWidth=s,this.dataHeight=a,this.left=c,this.top=u,c+d>s||u+h>a)throw new v("Crop rectangle does not fit within image data.");g&&this.reverseHorizontal(d,h)}getRow(r,s){if(r<0||r>=this.getHeight())throw new v("Requested row is outside the image: "+r);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const c=(r+this.top)*this.dataWidth+this.left;return B.arraycopy(this.yuvData,c,s,0,a),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.yuvData;const a=r*s,c=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return B.arraycopy(this.yuvData,u,c,0,a),c;for(let d=0;d<s;d++){const h=d*r;B.arraycopy(this.yuvData,u,c,h,r),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,s,a,c){return new jr(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+s,a,c,!1)}renderThumbnail(){const r=this.getWidth()/jr.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/jr.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*s),c=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let d=0;d<s;d++){const h=d*r;for(let g=0;g<r;g++){const x=c[u+g*jr.THUMBNAIL_SCALE_FACTOR]&255;a[h+g]=4278190080|x*65793}u+=this.dataWidth*jr.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/jr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/jr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,s){const a=this.yuvData;for(let c=0,u=this.top*this.dataWidth+this.left;c<s;c++,u+=this.dataWidth){const d=u+r/2;for(let h=u,g=u+r-1;h<d;h++,g--){const x=a[h];a[h]=a[g],a[g]=x}}}invert(){return new me(this)}}jr.THUMBNAIL_SCALE_FACTOR=2;class Nd extends se{constructor(r,s,a,c,u,d,h){if(super(s,a),this.dataWidth=c,this.dataHeight=u,this.left=d,this.top=h,r.BYTES_PER_ELEMENT===4){const g=s*a,x=new Uint8ClampedArray(g);for(let y=0;y<g;y++){const _=r[y],A=_>>16&255,T=_>>7&510,D=_&255;x[y]=(A+T+D)/4&255}this.luminances=x}else this.luminances=r;if(c===void 0&&(this.dataWidth=s),u===void 0&&(this.dataHeight=a),d===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+a>this.dataHeight)throw new v("Crop rectangle does not fit within image data.")}getRow(r,s){if(r<0||r>=this.getHeight())throw new v("Requested row is outside the image: "+r);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const c=(r+this.top)*this.dataWidth+this.left;return B.arraycopy(this.luminances,c,s,0,a),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.luminances;const a=r*s,c=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return B.arraycopy(this.luminances,u,c,0,a),c;for(let d=0;d<s;d++){const h=d*r;B.arraycopy(this.luminances,u,c,h,r),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,s,a,c){return new Nd(this.luminances,a,c,this.dataWidth,this.dataHeight,this.left+r,this.top+s)}invert(){return new me(this)}}class lg extends ${static forName(r){return this.getCharacterSetECIByName(r)}}class kd{}kd.ISO_8859_1=$.ISO8859_1;class cg{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class ug{static singletonList(r){return[r]}static min(r,s){return r.sort(s)[0]}}class $C{constructor(r){this.previous=r}getPrevious(){return this.previous}}class Zs extends $C{constructor(r,s,a){super(r),this.value=s,this.bitCount=a}appendTo(r,s){r.appendBits(this.value,this.bitCount)}add(r,s){return new Zs(this,r,s)}addBinaryShift(r,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Zs(this,r,s)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+N.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class Rd extends Zs{constructor(r,s,a){super(r,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=a}appendTo(r,s){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(s[this.binaryShiftStart+a],8)}addBinaryShift(r,s){return new Rd(this,r,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function KC(C,r,s){return new Rd(C,r,s)}function ca(C,r,s){return new Zs(C,r,s)}const qC=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ei=0,Kl=1,cr=2,dg=3,Ur=4,ZC=new Zs(null,0,0),Od=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function QC(C){for(let r of C)k.fill(r,-1);return C[Ei][Ur]=0,C[Kl][Ur]=0,C[Kl][Ei]=28,C[dg][Ur]=0,C[cr][Ur]=0,C[cr][Ei]=15,C}const fg=QC(k.createInt32Array(6,6));class zr{constructor(r,s,a,c){this.token=r,this.mode=s,this.binaryShiftByteCount=a,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,s){let a=this.bitCount,c=this.token;if(r!==this.mode){let d=Od[this.mode][r];c=ca(c,d&65535,d>>16),a+=d>>16}let u=r===cr?4:5;return c=ca(c,s,u),new zr(c,r,0,a+u)}shiftAndAppend(r,s){let a=this.token,c=this.mode===cr?4:5;return a=ca(a,fg[this.mode][r],c),a=ca(a,s,5),new zr(a,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(r){let s=this.token,a=this.mode,c=this.bitCount;if(this.mode===Ur||this.mode===cr){let h=Od[a][Ei];s=ca(s,h&65535,h>>16),c+=h>>16,a=Ei}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new zr(s,a,this.binaryShiftByteCount+1,c+u);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(r+1)),d}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=KC(s,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new zr(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let s=this.bitCount+(Od[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?s+=zr.calculateBinaryShiftCost(r)-zr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(s+=10),s<=r.bitCount}toBitArray(r){let s=[];for(let c=this.endBinaryShift(r.length).token;c!==null;c=c.getPrevious())s.unshift(c);let a=new j;for(const c of s)c.appendTo(a,r);return a}toString(){return ge.format("%s bits=%d bytes=%d",qC[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}zr.INITIAL_STATE=new zr(ZC,Ei,0,0);function JC(C){const r=ge.getCharCode(" "),s=ge.getCharCode("."),a=ge.getCharCode(",");C[Ei][r]=1;const c=ge.getCharCode("Z"),u=ge.getCharCode("A");for(let A=u;A<=c;A++)C[Ei][A]=A-u+2;C[Kl][r]=1;const d=ge.getCharCode("z"),h=ge.getCharCode("a");for(let A=h;A<=d;A++)C[Kl][A]=A-h+2;C[cr][r]=1;const g=ge.getCharCode("9"),x=ge.getCharCode("0");for(let A=x;A<=g;A++)C[cr][A]=A-x+2;C[cr][a]=12,C[cr][s]=13;const y=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let A=0;A<y.length;A++)C[dg][ge.getCharCode(y[A])]=A;const _=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let A=0;A<_.length;A++)ge.getCharCode(_[A])>0&&(C[Ur][ge.getCharCode(_[A])]=A);return C}const Dd=JC(k.createInt32Array(5,256));class ua{constructor(r){this.text=r}encode(){const r=ge.getCharCode(" "),s=ge.getCharCode(`
`);let a=ug.singletonList(zr.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let d,h=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case ge.getCharCode("\r"):d=h===s?2:0;break;case ge.getCharCode("."):d=h===r?3:0;break;case ge.getCharCode(","):d=h===r?4:0;break;case ge.getCharCode(":"):d=h===r?5:0;break;default:d=0}d>0?(a=ua.updateStateListForPair(a,u,d),u++):a=this.updateStateListForChar(a,u)}return ug.min(a,(u,d)=>u.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,s){const a=[];for(let c of r)this.updateStateForChar(c,s,a);return ua.simplifyStates(a)}updateStateForChar(r,s,a){let c=this.text[s]&255,u=Dd[r.getMode()][c]>0,d=null;for(let h=0;h<=Ur;h++){let g=Dd[h][c];if(g>0){if(d==null&&(d=r.endBinaryShift(s)),!u||h===r.getMode()||h===cr){const x=d.latchAndAppend(h,g);a.push(x)}if(!u&&fg[r.getMode()][h]>=0){const x=d.shiftAndAppend(h,g);a.push(x)}}}if(r.getBinaryShiftByteCount()>0||Dd[r.getMode()][c]===0){let h=r.addBinaryShiftChar(s);a.push(h)}}static updateStateListForPair(r,s,a){const c=[];for(let u of r)this.updateStateForPair(u,s,a,c);return this.simplifyStates(c)}static updateStateForPair(r,s,a,c){let u=r.endBinaryShift(s);if(c.push(u.latchAndAppend(Ur,a)),r.getMode()!==Ur&&c.push(u.shiftAndAppend(Ur,a)),a===3||a===4){let d=u.latchAndAppend(cr,16-a).latchAndAppend(cr,1);c.push(d)}if(r.getBinaryShiftByteCount()>0){let d=r.addBinaryShiftChar(s).addBinaryShiftChar(s+1);c.push(d)}}static simplifyStates(r){let s=[];for(const a of r){let c=!0;for(const u of s){if(u.isBetterThanOrEqualTo(a)){c=!1;break}a.isBetterThanOrEqualTo(u)&&(s=s.filter(d=>d!==u))}c&&s.push(a)}return s}}class We{constructor(){}static encodeBytes(r){return We.encode(r,We.DEFAULT_EC_PERCENT,We.DEFAULT_AZTEC_LAYERS)}static encode(r,s,a){let c=new ua(r).encode(),u=N.truncDivision(c.getSize()*s,100)+11,d=c.getSize()+u,h,g,x,y,_;if(a!==We.DEFAULT_AZTEC_LAYERS){if(h=a<0,g=Math.abs(a),g>(h?We.MAX_NB_BITS_COMPACT:We.MAX_NB_BITS))throw new v(ge.format("Illegal value %s for layers",a));x=We.totalBitsInLayer(g,h),y=We.WORD_SIZE[g];let Q=x-x%y;if(_=We.stuffBits(c,y),_.getSize()+u>Q)throw new v("Data to large for user specified layer");if(h&&_.getSize()>y*64)throw new v("Data to large for user specified layer")}else{y=0,_=null;for(let Q=0;;Q++){if(Q>We.MAX_NB_BITS)throw new v("Data too large for an Aztec code");if(h=Q<=3,g=h?Q+1:Q,x=We.totalBitsInLayer(g,h),d>x)continue;(_==null||y!==We.WORD_SIZE[g])&&(y=We.WORD_SIZE[g],_=We.stuffBits(c,y));let Le=x-x%y;if(!(h&&_.getSize()>y*64)&&_.getSize()+u<=Le)break}}let A=We.generateCheckWords(_,x,y),T=_.getSize()/y,D=We.generateModeMessage(h,g,T),P=(h?11:14)+g*4,L=new Int32Array(P),W;if(h){W=P;for(let Q=0;Q<L.length;Q++)L[Q]=Q}else{W=P+1+2*N.truncDivision(N.truncDivision(P,2)-1,15);let Q=N.truncDivision(P,2),Le=N.truncDivision(W,2);for(let Te=0;Te<Q;Te++){let Mn=Te+N.truncDivision(Te,15);L[Q-Te-1]=Le-Mn-1,L[Q+Te]=Le+Mn+1}}let ne=new Ie(W);for(let Q=0,Le=0;Q<g;Q++){let Te=(g-Q)*4+(h?9:12);for(let Mn=0;Mn<Te;Mn++){let Er=Mn*2;for(let Bn=0;Bn<2;Bn++)A.get(Le+Er+Bn)&&ne.set(L[Q*2+Bn],L[Q*2+Mn]),A.get(Le+Te*2+Er+Bn)&&ne.set(L[Q*2+Mn],L[P-1-Q*2-Bn]),A.get(Le+Te*4+Er+Bn)&&ne.set(L[P-1-Q*2-Bn],L[P-1-Q*2-Mn]),A.get(Le+Te*6+Er+Bn)&&ne.set(L[P-1-Q*2-Mn],L[Q*2+Bn])}Le+=Te*8}if(We.drawModeMessage(ne,h,W,D),h)We.drawBullsEye(ne,N.truncDivision(W,2),5);else{We.drawBullsEye(ne,N.truncDivision(W,2),7);for(let Q=0,Le=0;Q<N.truncDivision(P,2)-1;Q+=15,Le+=16)for(let Te=N.truncDivision(W,2)&1;Te<W;Te+=2)ne.set(N.truncDivision(W,2)-Le,Te),ne.set(N.truncDivision(W,2)+Le,Te),ne.set(Te,N.truncDivision(W,2)-Le),ne.set(Te,N.truncDivision(W,2)+Le)}let re=new cg;return re.setCompact(h),re.setSize(W),re.setLayers(g),re.setCodeWords(T),re.setMatrix(ne),re}static drawBullsEye(r,s,a){for(let c=0;c<a;c+=2)for(let u=s-c;u<=s+c;u++)r.set(u,s-c),r.set(u,s+c),r.set(s-c,u),r.set(s+c,u);r.set(s-a,s-a),r.set(s-a+1,s-a),r.set(s-a,s-a+1),r.set(s+a,s-a),r.set(s+a,s-a+1),r.set(s+a,s+a-1)}static generateModeMessage(r,s,a){let c=new j;return r?(c.appendBits(s-1,2),c.appendBits(a-1,6),c=We.generateCheckWords(c,28,4)):(c.appendBits(s-1,5),c.appendBits(a-1,11),c=We.generateCheckWords(c,40,4)),c}static drawModeMessage(r,s,a,c){let u=N.truncDivision(a,2);if(s)for(let d=0;d<7;d++){let h=u-3+d;c.get(d)&&r.set(h,u-5),c.get(d+7)&&r.set(u+5,h),c.get(20-d)&&r.set(h,u+5),c.get(27-d)&&r.set(u-5,h)}else for(let d=0;d<10;d++){let h=u-5+d+N.truncDivision(d,5);c.get(d)&&r.set(h,u-7),c.get(d+10)&&r.set(u+7,h),c.get(29-d)&&r.set(h,u+7),c.get(39-d)&&r.set(u-7,h)}}static generateCheckWords(r,s,a){let c=r.getSize()/a,u=new Td(We.getGF(a)),d=N.truncDivision(s,a),h=We.bitsToWords(r,a,d);u.encode(h,d-c);let g=s%a,x=new j;x.appendBits(0,g);for(const y of Array.from(h))x.appendBits(y,a);return x}static bitsToWords(r,s,a){let c=new Int32Array(a),u,d;for(u=0,d=r.getSize()/s;u<d;u++){let h=0;for(let g=0;g<s;g++)h|=r.get(u*s+g)?1<<s-g-1:0;c[u]=h}return c}static getGF(r){switch(r){case 4:return ze.AZTEC_PARAM;case 6:return ze.AZTEC_DATA_6;case 8:return ze.AZTEC_DATA_8;case 10:return ze.AZTEC_DATA_10;case 12:return ze.AZTEC_DATA_12;default:throw new v("Unsupported word size "+r)}}static stuffBits(r,s){let a=new j,c=r.getSize(),u=(1<<s)-2;for(let d=0;d<c;d+=s){let h=0;for(let g=0;g<s;g++)(d+g>=c||r.get(d+g))&&(h|=1<<s-1-g);(h&u)===u?(a.appendBits(h&u,s),d--):h&u?a.appendBits(h,s):(a.appendBits(h|1,s),d--)}return a}static totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}We.DEFAULT_EC_PERCENT=33,We.DEFAULT_AZTEC_LAYERS=0,We.MAX_NB_BITS=32,We.MAX_NB_BITS_COMPACT=4,We.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ql{encode(r,s,a,c){return this.encodeWithHints(r,s,a,c,null)}encodeWithHints(r,s,a,c,u){let d=kd.ISO_8859_1,h=We.DEFAULT_EC_PERCENT,g=We.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(Xt.CHARACTER_SET)&&(d=lg.forName(u.get(Xt.CHARACTER_SET).toString())),u.has(Xt.ERROR_CORRECTION)&&(h=N.parseInt(u.get(Xt.ERROR_CORRECTION).toString())),u.has(Xt.AZTEC_LAYERS)&&(g=N.parseInt(u.get(Xt.AZTEC_LAYERS).toString()))),ql.encodeLayers(r,s,a,c,d,h,g)}static encodeLayers(r,s,a,c,u,d,h){if(s!==ce.AZTEC)throw new v("Can only encode AZTEC, but got "+s);let g=We.encode(ge.getBytes(r,u),d,h);return ql.renderResult(g,a,c)}static renderResult(r,s,a){let c=r.getMatrix();if(c==null)throw new ir;let u=c.getWidth(),d=c.getHeight(),h=Math.max(s,u),g=Math.max(a,d),x=Math.min(h/u,g/d),y=(h-u*x)/2,_=(g-d*x)/2,A=new Ie(h,g);for(let T=0,D=_;T<d;T++,D+=x)for(let P=0,L=y;P<u;P++,L+=x)c.get(P,T)&&A.setRegion(L,D,x,x);return A}}n.AbstractExpandedDecoder=xd,n.ArgumentException=E,n.ArithmeticException=Vs,n.AztecCode=cg,n.AztecCodeReader=Ut,n.AztecCodeWriter=ql,n.AztecDecoder=rt,n.AztecDetector=sr,n.AztecDetectorResult=zl,n.AztecEncoder=We,n.AztecHighLevelEncoder=ua,n.AztecPoint=Ee,n.BarcodeFormat=ce,n.Binarizer=M,n.BinaryBitmap=S,n.BitArray=j,n.BitMatrix=Ie,n.BitSource=_d,n.BrowserAztecCodeReader=Mr,n.BrowserBarcodeReader=kC,n.BrowserCodeReader=Xe,n.BrowserDatamatrixCodeReader=OC,n.BrowserMultiFormatReader=VC,n.BrowserPDF417Reader=HC,n.BrowserQRCodeReader=GC,n.BrowserQRCodeSvgWriter=cs,n.CharacterSetECI=$,n.ChecksumException=R,n.Code128Reader=ae,n.Code39Reader=Ht,n.DataMatrixDecodedBitStreamParser=yi,n.DataMatrixReader=vi,n.DecodeHintType=Z,n.DecoderResult=Pr,n.DefaultGridSampler=Je,n.DetectorResult=rs,n.EAN13Reader=is,n.EncodeHintType=Xt,n.Exception=m,n.FormatException=U,n.GenericGF=ze,n.GenericGFPoly=Mt,n.GlobalHistogramBinarizer=at,n.GridSampler=X,n.GridSamplerInstance=De,n.HTMLCanvasElementLuminanceSource=we,n.HybridBinarizer=_e,n.ITFReader=lt,n.IllegalArgumentException=v,n.IllegalStateException=ir,n.InvertedLuminanceSource=me,n.LuminanceSource=se,n.MathUtils=je,n.MultiFormatOneDReader=$s,n.MultiFormatReader=ag,n.MultiFormatWriter=YC,n.NotFoundException=V,n.OneDReader=tt,n.PDF417DecodedBitStreamParser=z,n.PDF417DecoderErrorCorrection=tg,n.PDF417Reader=an,n.PDF417ResultMetadata=rg,n.PerspectiveTransform=he,n.PlanarYUVLuminanceSource=jr,n.QRCodeByteMatrix=$l,n.QRCodeDataMask=ar,n.QRCodeDecodedBitStreamParser=bt,n.QRCodeDecoderErrorCorrectionLevel=dt,n.QRCodeDecoderFormatInformation=mn,n.QRCodeEncoder=wt,n.QRCodeEncoderQRCode=ls,n.QRCodeMaskUtil=kt,n.QRCodeMatrixUtil=Ce,n.QRCodeMode=xe,n.QRCodeReader=Ci,n.QRCodeVersion=pe,n.QRCodeWriter=qs,n.RGBLuminanceSource=Nd,n.RSS14Reader=Nt,n.RSSExpandedReader=q,n.ReaderException=Yl,n.ReedSolomonDecoder=wi,n.ReedSolomonEncoder=Td,n.ReedSolomonException=Zr,n.Result=ve,n.ResultMetadataType=Oe,n.ResultPoint=fe,n.StringUtils=ge,n.UnsupportedOperationException=Se,n.VideoInputDevice=G,n.WhiteRectangleDetector=Cr,n.WriterException=ct,n.ZXingArrays=k,n.ZXingCharset=lg,n.ZXingInteger=N,n.ZXingStandardCharsets=kd,n.ZXingStringBuilder=ke,n.ZXingStringEncoding=Qe,n.ZXingSystem=B,n.createAbstractExpandedDecoder=J1,Object.defineProperty(n,"__esModule",{value:!0})})})(Hh,Hh.exports);var yt=Hh.exports;const i6=t2(yt),s6=e2({__proto__:null,default:i6},[yt]);var Mm=function(){function t(e,n,i){if(this.formatMap=new Map([[le.QR_CODE,yt.BarcodeFormat.QR_CODE],[le.AZTEC,yt.BarcodeFormat.AZTEC],[le.CODABAR,yt.BarcodeFormat.CODABAR],[le.CODE_39,yt.BarcodeFormat.CODE_39],[le.CODE_93,yt.BarcodeFormat.CODE_93],[le.CODE_128,yt.BarcodeFormat.CODE_128],[le.DATA_MATRIX,yt.BarcodeFormat.DATA_MATRIX],[le.MAXICODE,yt.BarcodeFormat.MAXICODE],[le.ITF,yt.BarcodeFormat.ITF],[le.EAN_13,yt.BarcodeFormat.EAN_13],[le.EAN_8,yt.BarcodeFormat.EAN_8],[le.PDF_417,yt.BarcodeFormat.PDF_417],[le.RSS_14,yt.BarcodeFormat.RSS_14],[le.RSS_EXPANDED,yt.BarcodeFormat.RSS_EXPANDED],[le.UPC_A,yt.BarcodeFormat.UPC_A],[le.UPC_E,yt.BarcodeFormat.UPC_E],[le.UPC_EAN_EXTENSION,yt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!s6)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var o=this.createZXingFormats(e),l=new Map;l.set(yt.DecodeHintType.POSSIBLE_FORMATS,o),l.set(yt.DecodeHintType.TRY_HARDER,!1),this.hints=l}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(i,o){try{i(n.decode(e))}catch(l){o(l)}})},t.prototype.decode=function(e){var n=new yt.MultiFormatReader(this.verbose,this.hints),i=new yt.HTMLCanvasElementLuminanceSource(e),o=new yt.BinaryBitmap(new yt.HybridBinarizer(i)),l=n.decode(o);return{text:l.text,format:Tv.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,o){e.set(n,i)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],i=0,o=e;i<o.length;i++){var l=o[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),o6=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function p(E){try{m(i.next(E))}catch(v){f(v)}}function w(E){try{m(i.throw(E))}catch(v){f(v)}}function m(E){E.done?l(E.value):o(E.value).then(p,w)}m((i=i.apply(t,e||[])).next())})},a6=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(m){return function(E){return w([m,E])}}function w(m){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(i=1,o&&(l=m[0]&2?o.return:m[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,m[1])).done)return l;switch(o=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,o=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(E){m=[6,E],o=0}finally{i=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Bm=function(){function t(e,n,i){if(this.formatMap=new Map([[le.QR_CODE,"qr_code"],[le.AZTEC,"aztec"],[le.CODABAR,"codabar"],[le.CODE_39,"code_39"],[le.CODE_93,"code_93"],[le.CODE_128,"code_128"],[le.DATA_MATRIX,"data_matrix"],[le.ITF,"itf"],[le.EAN_13,"ean_13"],[le.EAN_8,"ean_8"],[le.PDF_417,"pdf417"],[le.UPC_A,"upc_a"],[le.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var o=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(o),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return o6(this,void 0,void 0,function(){var n,i;return a6(this,function(o){switch(o.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=o.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:Tv.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,i=0,o=0,l=e;o<l.length;o++){var f=l[o],p=f.boundingBox.width*f.boundingBox.height;p>i&&(i=p,n=f)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],i=0,o=e;i<o.length;i++){var l=o[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,o){e.set(n,i)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),Lm=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function p(E){try{m(i.next(E))}catch(v){f(v)}}function w(E){try{m(i.throw(E))}catch(v){f(v)}}function m(E){E.done?l(E.value):o(E.value).then(p,w)}m((i=i.apply(t,e||[])).next())})},Fm=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(m){return function(E){return w([m,E])}}function w(m){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(i=1,o&&(l=m[0]&2?o.return:m[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,m[1])).done)return l;switch(o=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,o=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(E){m=[6,E],o=0}finally{i=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},l6=function(){function t(e,n,i,o){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&Bm.isSupported()?(this.primaryDecoder=new Bm(e,i,o),this.secondaryDecoder=new Mm(e,i,o)):this.primaryDecoder=new Mm(e,i,o)}return t.prototype.decodeAsync=function(e){return Lm(this,void 0,void 0,function(){var n;return Fm(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return Lm(this,void 0,void 0,function(){var n,i;return Fm(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,o.sent()];case 3:if(i=o.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,i=this.executionResults;n<i.length;n++){var o=i[n];e+=o}var l=e/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),P1=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),_u=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function p(E){try{m(i.next(E))}catch(v){f(v)}}function w(E){try{m(i.throw(E))}catch(v){f(v)}}function m(E){E.done?l(E.value):o(E.value).then(p,w)}m((i=i.apply(t,e||[])).next())})},Eu=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(m){return function(E){return w([m,E])}}function w(m){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(i=1,o&&(l=m[0]&2?o.return:m[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,m[1])).done)return l;switch(o=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,o=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(E){m=[6,E],o=0}finally{i=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},kv=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var i={advanced:[n]};return this.track.applyConstraints(i)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),c6=function(t){P1(e,t);function e(n,i){return t.call(this,n,i)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var i={};i[this.name]=n;var o={advanced:[i]};return this.track.applyConstraints(o)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(kv),u6=function(t){P1(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(c6),d6=function(t){P1(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(kv),f6=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new u6(this.track)},t.prototype.torchFeature=function(){return new d6(this.track)},t}(),h6=function(){function t(e,n,i){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=e.surface.clientWidth,o=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(i,o),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,i,o){return _u(this,void 0,void 0,function(){var l,f;return Eu(this,function(p){switch(p.label){case 0:return l=new t(e,n,o),i.aspectRatio?(f={aspectRatio:i.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:p.sent(),p.label=2;case 2:return l.setupSurface(),[2,l]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,i=function(){setTimeout(e,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return _u(this,void 0,void 0,function(){return Eu(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,i){var o=e.mediaStream.getVideoTracks(),l=o.length,f=0;e.mediaStream.getVideoTracks().forEach(function(p){e.mediaStream.removeTrack(p),p.stop(),++f,f>=l&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new f6(this.getFirstTrackOrFail())},t}(),g6=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,i){return _u(this,void 0,void 0,function(){return Eu(this,function(o){return[2,h6.create(e,this.mediaStream,n,i)]})})},t.create=function(e){return _u(this,void 0,void 0,function(){var n,i;return Eu(this,function(o){switch(o.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=o.sent(),[2,new t(i)]}})})},t}(),jm=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function p(E){try{m(i.next(E))}catch(v){f(v)}}function w(E){try{m(i.throw(E))}catch(v){f(v)}}function m(E){E.done?l(E.value):o(E.value).then(p,w)}m((i=i.apply(t,e||[])).next())})},Um=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(m){return function(E){return w([m,E])}}function w(m){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(i=1,o&&(l=m[0]&2?o.return:m[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,m[1])).done)return l;switch(o=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,o=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(E){m=[6,E],o=0}finally{i=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},p6=function(){function t(){}return t.failIfNotSupported=function(){return jm(this,void 0,void 0,function(){return Um(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return jm(this,void 0,void 0,function(){return Um(this,function(n){return[2,g6.create(e)]})})},t}(),m6=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function p(E){try{m(i.next(E))}catch(v){f(v)}}function w(E){try{m(i.throw(E))}catch(v){f(v)}}function m(E){E.done?l(E.value):o(E.value).then(p,w)}m((i=i.apply(t,e||[])).next())})},w6=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(m){return function(E){return w([m,E])}}function w(m){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(i=1,o&&(l=m[0]&2?o.return:m[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,m[1])).done)return l;switch(o=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,o=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(E){m=[6,E],o=0}finally{i=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},x6=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=xo.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=xo.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return m6(this,void 0,void 0,function(){var e,n,i,o,l,f,p;return w6(this,function(w){switch(w.label){case 0:return e=function(m){for(var E=m.getVideoTracks(),v=0,S=E;v<S.length;v++){var R=S[v];R.enabled=!1,R.stop(),m.removeTrack(R)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=w.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=w.sent(),o=[],l=0,f=i;l<f.length;l++)p=f[l],p.kind==="videoinput"&&o.push({id:p.deviceId,label:p.label});return e(n),[2,o]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var i=function(l){for(var f=[],p=0,w=l;p<w.length;p++){var m=w[p];m.kind==="video"&&f.push({id:m.id,label:m.label})}e(f)},o=MediaStreamTrack;o.getSources(i)})},t}(),Rt;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(Rt||(Rt={}));var y6=function(){function t(){this.state=Rt.NOT_STARTED,this.onGoingTransactionNewState=Rt.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===Rt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Rt.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===Rt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Rt.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Rt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case Rt.UNKNOWN:throw"Transition from unknown is not allowed";case Rt.NOT_STARTED:this.failIfNewStateIs(e,[Rt.PAUSED]);break;case Rt.SCANNING:break;case Rt.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var i=0,o=n;i<o.length;i++){var l=o[i];if(e===l)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),v6=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===Rt.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==Rt.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Rt.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===Rt.PAUSED},t}(),C6=function(){function t(){}return t.create=function(){return new v6(new y6)},t}(),_6=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Yn=function(t){_6(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(t6),E6=function(){function t(e,n){this.logger=n,this.fps=Yn.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Yn.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Nv.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Qr(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),zm=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new r6(this.verbose),this.qrcode=new l6(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=C6.create()}return t.prototype.start=function(e,n,i,o){var l=this;if(!e)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;o?f=o:f=this.verbose?this.logger.log:function(){};var p=E6.create(n,this.logger);this.clearElement();var w=!1;p.videoConstraints&&(p.isMediaStreamConstraintsValid()?w=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=w,E=document.getElementById(this.elementId);E.clientWidth?E.clientWidth:Yn.DEFAULT_WIDTH,E.style.position="relative",this.shouldScan=!0,this.element=E;var v=this,S=this.stateManagerProxy.startTransition(Rt.SCANNING);return new Promise(function(R,M){var B=m?p.videoConstraints:v.createVideoConstraints(e);if(!B){S.cancel(),M("videoConstraints should be defined");return}var K={};(!m||p.aspectRatio)&&(K.aspectRatio=p.aspectRatio);var O={onRenderSurfaceReady:function(k,N){v.setupUi(k,N,p),v.isScanning=!0,v.foreverScan(p,i,f)}};p6.failIfNotSupported().then(function(k){k.create(B).then(function(N){return N.render(l.element,K,O).then(function(j){v.renderedCamera=j,S.execute(),R(null)}).catch(function(j){S.cancel(),M(j)})}).catch(function(N){S.cancel(),M(xo.errorGettingUserMedia(N))})}).catch(function(k){S.cancel(),M(xo.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Rt.PAUSED),this.showPausedState(),(Qr(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Rt.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Rt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(e.element){var l=document.getElementById(Yn.SHADED_REGION_ELEMENT_ID);l&&e.element.removeChild(l)}},o=this;return this.renderedCamera.close().then(function(){return o.renderedCamera=null,o.element&&(o.element.removeChild(o.canvasElement),o.canvasElement=null),i(),o.qrRegion&&(o.qrRegion=null),o.context&&(o.context=null),n.execute(),o.hidePausedState(),o.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(i){return i.decodedText})},t.prototype.scanFileV2=function(e,n){var i=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Qr(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(o,l){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(e);var f=new Image;f.onload=function(){var p=f.width,w=f.height,m=document.getElementById(i.elementId),E=m.clientWidth?m.clientWidth:Yn.DEFAULT_WIDTH,v=Math.max(m.clientHeight?m.clientHeight:w,Yn.FILE_SCAN_MIN_HEIGHT),S=i.computeCanvasDrawConfig(p,w,E,v);if(n){var R=i.createCanvasElement(E,v,"qr-canvas-visible");R.style.display="inline-block",m.appendChild(R);var M=R.getContext("2d");if(!M)throw"Unable to get 2d context from canvas";M.canvas.width=E,M.canvas.height=v,M.drawImage(f,0,0,p,w,S.x,S.y,S.width,S.height)}var B=Yn.FILE_SCAN_HIDDEN_CANVAS_PADDING,K=Math.max(f.width,S.width),O=Math.max(f.height,S.height),k=K+2*B,N=O+2*B,j=i.createCanvasElement(k,N);m.appendChild(j);var te=j.getContext("2d");if(!te)throw"Unable to get 2d context from canvas";te.canvas.width=k,te.canvas.height=N,te.drawImage(f,0,0,p,w,B,B,K,O);try{i.qrcode.decodeRobustlyAsync(j).then(function(Z){o(Pm.createFromQrcodeResult(Z))}).catch(l)}catch(Z){l("QR code parse error, error = ".concat(Z))}},f.onerror=l,f.onabort=l,f.onstalled=l,f.onsuspend=l,f.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return x6.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!Nv.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[le.QR_CODE,le.AZTEC,le.CODABAR,le.CODE_39,le.CODE_93,le.CODE_128,le.DATA_MATRIX,le.MAXICODE,le.ITF,le.EAN_13,le.EAN_8,le.PDF_417,le.RSS_14,le.RSS_EXPANDED,le.UPC_A,le.UPC_E,le.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],o=0,l=e.formatsToSupport;o<l.length;o++){var f=l[o];e6(f)?i.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Qr(e))return!0;if(!Qr(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Qr(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return Qr(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,i){var o=this,l=i.qrbox;this.validateQrboxConfig(l);var f=this.toQrdimensions(e,n,l),p=function(m){if(m<Yn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Yn.MIN_QR_BOX_SIZE,"px.")},w=function(m){return m>e&&(o.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=e),m};p(f.width),p(f.height),f.width=w(f.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(e,n)}catch(o){throw new Error("qrbox config was passed as a function but it failed with unknown error"+o)}return i},t.prototype.setupUi=function(e,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,i);var o=Qr(i.qrbox)?{width:e,height:n}:i.qrbox;this.validateQrboxConfig(o);var l=this.toQrdimensions(e,n,o);l.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=i.isShadedBoxEnabled()&&l.height<=n,p={x:0,y:0,width:e,height:n},w=f?this.getShadedRegionBounds(e,n,l):p,m=this.createCanvasElement(w.width,w.height),E={willReadFrequently:!0},v=m.getContext("2d",E);v.canvas.width=w.width,v.canvas.height=w.height,this.element.append(m),f&&this.possiblyInsertShadingElement(this.element,e,n,l),this.createScannerPausedUiElement(this.element),this.qrRegion=w,this.context=v,this.canvasElement=m},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=xo.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(o){return e(o.text,Pm.createFromQrcodeResult(o)),i.possiblyUpdateShaders(!0),!0}).catch(function(o){i.possiblyUpdateShaders(!1);var l=xo.codeParseError(o);return n(l,n6.createFrom(l)),!1})},t.prototype.foreverScan=function(e,n,i){var o=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),f=l.videoWidth/l.clientWidth,p=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var w=this.qrRegion.width*f,m=this.qrRegion.height*p,E=this.qrRegion.x*f,v=this.qrRegion.y*p;this.context.drawImage(l,E,v,w,m,0,0,this.qrRegion.width,this.qrRegion.height);var S=function(){o.foreverScanTimeout=setTimeout(function(){o.foreverScan(e,n,i)},o.getTimeoutFps(e.fps))};this.scanContext(n,i).then(function(R){!R&&e.disableFlip!==!0?(o.context.translate(o.context.canvas.width,0),o.context.scale(-1,1),o.scanContext(n,i).finally(function(){S()})):S()}).catch(function(R){o.logger.logError("Error happend while scanning context",R),S()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",i="deviceId",o={user:!0,environment:!0},l="exact",f=function(M){if(M in o)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(M,"'")},p=Object.keys(e);if(p.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(p.length," keys");var w=Object.keys(e)[0];if(w!==n&&w!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(w===n){var m=e.facingMode;if(typeof m=="string"){if(f(m))return{facingMode:m}}else if(typeof m=="object")if(l in m){if(f(m["".concat(l)]))return{facingMode:{exact:m["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var E=typeof m;throw"Invalid type of 'facingMode' = ".concat(E)}}else{var v=e.deviceId;if(typeof v=="string")return{deviceId:v};if(typeof v=="object"){if(l in v)return{deviceId:{exact:v["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var S=typeof v;throw"Invalid type of 'deviceId' = ".concat(S)}}}var R=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(R)},t.prototype.computeCanvasDrawConfig=function(e,n,i,o){if(e<=i&&n<=o){var l=(i-e)/2,f=(o-n)/2;return{x:l,y:f,width:e,height:n}}else{var p=e,w=n;return e>i&&(n=i/e*n,e=i),n>o&&(e=o/n*e,n=o),this.logger.log("Image downsampled from "+"".concat(p,"X").concat(w)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,i,o)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Yn.BORDER_SHADER_MATCH_COLOR:Yn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,i){var o=e,l=n,f=document.createElement("canvas");return f.style.width="".concat(o,"px"),f.style.height="".concat(l,"px"),f.style.display="none",f.id=Qr(i)?"qr-canvas":i,f},t.prototype.getShadedRegionBounds=function(e,n,i){if(i.width>e||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},t.prototype.possiblyInsertShadingElement=function(e,n,i,o){if(!(n-o.width<1||i-o.height<1)){var l=document.createElement("div");l.style.position="absolute";var f=(n-o.width)/2,p=(i-o.height)/2;if(l.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(Yn.SHADED_REGION_ELEMENT_ID),n-o.width<11||i-o.height<11)this.hasBorderShaders=!1;else{var w=5,m=40;this.insertShaderBorders(l,m,w,-w,null,0,!0),this.insertShaderBorders(l,m,w,-w,null,0,!1),this.insertShaderBorders(l,m,w,null,-w,0,!0),this.insertShaderBorders(l,m,w,null,-w,0,!1),this.insertShaderBorders(l,w,m+w,-w,null,-w,!0),this.insertShaderBorders(l,w,m+w,null,-w,-w,!0),this.insertShaderBorders(l,w,m+w,-w,null,-w,!1),this.insertShaderBorders(l,w,m+w,null,-w,-w,!1),this.hasBorderShaders=!0}e.append(l)}},t.prototype.insertShaderBorders=function(e,n,i,o,l,f,p){var w=document.createElement("div");w.style.position="absolute",w.style.backgroundColor=Yn.BORDER_SHADER_DEFAULT_COLOR,w.style.width="".concat(n,"px"),w.style.height="".concat(i,"px"),o!==null&&(w.style.top="".concat(o,"px")),l!==null&&(w.style.bottom="".concat(l,"px")),p?w.style.left="".concat(f,"px"):w.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(w),e.appendChild(w)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),Wm;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Wm||(Wm={}));const Rv=({onScan:t,onClose:e,isOpen:n})=>{const[i,o]=Y.useState(!1),[l,f]=Y.useState(""),[p,w]=Y.useState(""),[m,E]=Y.useState(!1),[v,S]=Y.useState(""),R=Y.useRef(null),M=Y.useRef(`html5qr-${Math.random().toString(36).slice(2)}`);Y.useEffect(()=>(n&&B(),()=>{K()}),[n]);const B=async()=>{try{w(""),E(!1),R.current||(R.current=new zm(M.current,!1));const N=await zm.getCameras();if(!N||N.length===0){w("Kamera tidak ditemukan.");return}const j=N.find(Z=>/back|rear|environment/i.test(Z.label))||N[0],te={fps:10,qrbox:{width:280,height:200},aspectRatio:1.777,rememberLastUsedCamera:!0,focusMode:"continuous",focusDistance:0,formatsToSupport:[le.CODE_128,le.EAN_13,le.EAN_8,le.UPC_A,le.UPC_E,le.QR_CODE]};await R.current.start(j.id,te,Z=>{Z&&(f(Z),t(Z),K())},Z=>{}),E(!0),o(!0)}catch(N){console.error("Scanner init error:",N),w("Tidak dapat memulai pemindai: "+((N==null?void 0:N.message)||String(N)))}},K=async()=>{o(!1);try{R.current&&(await R.current.stop(),await R.current.clear())}catch{}},O=()=>{K(),e()},k=()=>{w(""),f(""),B()};return n?b.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:[b.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",width:"100%",maxWidth:"28rem",maxHeight:"90vh",overflow:"auto"},children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[b.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",margin:0},children:"Scan Barcode"}),b.jsx("button",{onClick:O,style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem"},children:b.jsx(Lb,{size:24})})]}),b.jsx("div",{style:{position:"relative",width:"100%",height:"320px",backgroundColor:"#000",borderRadius:"0.5rem",overflow:"hidden",marginBottom:"1rem"},children:b.jsx("div",{id:M.current,style:{width:"100%",height:"100%"}})}),p&&b.jsxs("div",{style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"0.5rem",padding:"1rem",marginBottom:"1rem",display:"flex",alignItems:"center"},children:[b.jsx(Db,{size:20,style:{color:"#dc2626",marginRight:"0.5rem"}}),b.jsxs("div",{children:[b.jsx("p",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#991b1b",margin:0},children:p}),b.jsx("button",{onClick:k,style:{marginTop:"0.5rem",fontSize:"0.75rem",color:"#dc2626",background:"none",border:"none",cursor:"pointer",textDecoration:"underline"},children:"Coba Lagi"})]})]}),l&&b.jsxs("div",{style:{backgroundColor:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"0.5rem",padding:"1rem",marginBottom:"1rem",display:"flex",alignItems:"center"},children:[b.jsx(Ix,{size:20,style:{color:"#059669",marginRight:"0.5rem"}}),b.jsxs("div",{children:[b.jsx("p",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#065f46",margin:0},children:"Barcode berhasil dipindai!"}),b.jsx("p",{style:{fontSize:"0.75rem",color:"#059669",marginTop:"0.25rem",margin:0},children:l})]})]}),b.jsxs("div",{style:{marginBottom:"1rem"},children:[b.jsx("label",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem",display:"block"},children:"Atau masukkan barcode secara manual:"}),b.jsx("input",{type:"text",value:v,onChange:N=>S(N.target.value),placeholder:"Masukkan kode barcode",style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem"}}),v&&b.jsx("button",{onClick:()=>{t(v),O()},style:{marginTop:"0.5rem",width:"100%",backgroundColor:"#10b981",color:"white",padding:"0.5rem",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Gunakan Kode Manual"})]}),b.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[b.jsx("button",{onClick:O,style:{flex:1,backgroundColor:"#6b7280",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Tutup"}),l&&b.jsx("button",{onClick:()=>{t(l),O()},style:{flex:1,backgroundColor:"#3b82f6",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Gunakan"})]})]}),b.jsx("style",{jsx:!0,children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
      `})]}):null};/*!
* sweetalert2 v11.26.3
* Released under the MIT License.
*/function Ov(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function b6(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Vm(t,e){return t.get(Ov(t,e))}function A6(t,e,n){b6(t,e),e.set(t,n)}function S6(t,e,n){return t.set(Ov(t,e),n),n}const I6=100,ye={},T6=()=>{ye.previousActiveElement instanceof HTMLElement?(ye.previousActiveElement.focus(),ye.previousActiveElement=null):document.body&&document.body.focus()},N6=t=>new Promise(e=>{if(!t)return e();const n=window.scrollX,i=window.scrollY;ye.restoreFocusTimeout=setTimeout(()=>{T6(),e()},I6),window.scrollTo(n,i)}),Dv="swal2-",k6=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],H=k6.reduce((t,e)=>(t[e]=Dv+e,t),{}),R6=["success","warning","info","question","error"],bu=R6.reduce((t,e)=>(t[e]=Dv+e,t),{}),Pv="SweetAlert2:",M1=t=>t.charAt(0).toUpperCase()+t.slice(1),Tn=t=>{console.warn(`${Pv} ${typeof t=="object"?t.join(" "):t}`)},zs=t=>{console.error(`${Pv} ${t}`)},Hm=[],O6=t=>{Hm.includes(t)||(Hm.push(t),Tn(t))},Mv=(t,e=null)=>{O6(`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},ud=t=>typeof t=="function"?t():t,B1=t=>t&&typeof t.toPromise=="function",Ml=t=>B1(t)?t.toPromise():Promise.resolve(t),L1=t=>t&&Promise.resolve(t)===t,Rn=()=>document.body.querySelector(`.${H.container}`),Bl=t=>{const e=Rn();return e?e.querySelector(t):null},nr=t=>Bl(`.${t}`),$e=()=>nr(H.popup),Qo=()=>nr(H.icon),D6=()=>nr(H["icon-content"]),Bv=()=>nr(H.title),F1=()=>nr(H["html-container"]),Lv=()=>nr(H.image),j1=()=>nr(H["progress-steps"]),dd=()=>nr(H["validation-message"]),Kr=()=>Bl(`.${H.actions} .${H.confirm}`),Jo=()=>Bl(`.${H.actions} .${H.cancel}`),Ws=()=>Bl(`.${H.actions} .${H.deny}`),P6=()=>nr(H["input-label"]),ea=()=>Bl(`.${H.loader}`),Ll=()=>nr(H.actions),Fv=()=>nr(H.footer),fd=()=>nr(H["timer-progress-bar"]),U1=()=>nr(H.close),M6=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,z1=()=>{const t=$e();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(e).sort((l,f)=>{const p=parseInt(l.getAttribute("tabindex")||"0"),w=parseInt(f.getAttribute("tabindex")||"0");return p>w?1:p<w?-1:0}),i=t.querySelectorAll(M6),o=Array.from(i).filter(l=>l.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(o))].filter(l=>Hn(l))},W1=()=>oi(document.body,H.shown)&&!oi(document.body,H["toast-shown"])&&!oi(document.body,H["no-backdrop"]),hd=()=>{const t=$e();return t?oi(t,H.toast):!1},B6=()=>{const t=$e();return t?t.hasAttribute("data-loading"):!1},rr=(t,e)=>{if(t.textContent="",e){const i=new DOMParser().parseFromString(e,"text/html"),o=i.querySelector("head");o&&Array.from(o.childNodes).forEach(f=>{t.appendChild(f)});const l=i.querySelector("body");l&&Array.from(l.childNodes).forEach(f=>{f instanceof HTMLVideoElement||f instanceof HTMLAudioElement?t.appendChild(f.cloneNode(!0)):t.appendChild(f)})}},oi=(t,e)=>{if(!e)return!1;const n=e.split(/\s+/);for(let i=0;i<n.length;i++)if(!t.classList.contains(n[i]))return!1;return!0},L6=(t,e)=>{Array.from(t.classList).forEach(n=>{!Object.values(H).includes(n)&&!Object.values(bu).includes(n)&&!Object.values(e.showClass||{}).includes(n)&&t.classList.remove(n)})},Jn=(t,e,n)=>{if(L6(t,e),!e.customClass)return;const i=e.customClass[n];if(i){if(typeof i!="string"&&!i.forEach){Tn(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof i}"`);return}Ze(t,i)}},gd=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${H.popup} > .${H[e]}`);case"checkbox":return t.querySelector(`.${H.popup} > .${H.checkbox} input`);case"radio":return t.querySelector(`.${H.popup} > .${H.radio} input:checked`)||t.querySelector(`.${H.popup} > .${H.radio} input:first-child`);case"range":return t.querySelector(`.${H.popup} > .${H.range} input`);default:return t.querySelector(`.${H.popup} > .${H.input}`)}},jv=t=>{if(t.focus(),t.type!=="file"){const e=t.value;t.value="",t.value=e}},Uv=(t,e,n)=>{!t||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(i=>{Array.isArray(t)?t.forEach(o=>{n?o.classList.add(i):o.classList.remove(i)}):n?t.classList.add(i):t.classList.remove(i)}))},Ze=(t,e)=>{Uv(t,e,!0)},yr=(t,e)=>{Uv(t,e,!1)},Di=(t,e)=>{const n=Array.from(t.children);for(let i=0;i<n.length;i++){const o=n[i];if(o instanceof HTMLElement&&oi(o,e))return o}},_s=(t,e,n)=>{n===`${parseInt(`${n}`)}`&&(n=parseInt(n)),n||parseInt(`${n}`)===0?t.style.setProperty(e,typeof n=="number"?`${n}px`:n):t.style.removeProperty(e)},sn=(t,e="flex")=>{t&&(t.style.display=e)},Cn=t=>{t&&(t.style.display="none")},V1=(t,e="block")=>{t&&new MutationObserver(()=>{Fl(t,t.innerHTML,e)}).observe(t,{childList:!0,subtree:!0})},Gm=(t,e,n,i)=>{const o=t.querySelector(e);o&&o.style.setProperty(n,i)},Fl=(t,e,n="flex")=>{e?sn(t,n):Cn(t)},Hn=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),F6=()=>!Hn(Kr())&&!Hn(Ws())&&!Hn(Jo()),Gh=t=>t.scrollHeight>t.clientHeight,j6=(t,e)=>{let n=t;for(;n&&n!==e;){if(Gh(n))return!0;n=n.parentElement}return!1},zv=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),i=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||i>0},H1=(t,e=!1)=>{const n=fd();n&&Hn(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${t/1e3}s linear`,n.style.width="0%"},10))},U6=()=>{const t=fd();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const n=parseInt(window.getComputedStyle(t).width),i=e/n*100;t.style.width=`${i}%`},z6=()=>typeof window>"u"||typeof document>"u",W6=`
 <div aria-labelledby="${H.title}" aria-describedby="${H["html-container"]}" class="${H.popup}" tabindex="-1">
   <button type="button" class="${H.close}"></button>
   <ul class="${H["progress-steps"]}"></ul>
   <div class="${H.icon}"></div>
   <img class="${H.image}" />
   <h2 class="${H.title}" id="${H.title}"></h2>
   <div class="${H["html-container"]}" id="${H["html-container"]}"></div>
   <input class="${H.input}" id="${H.input}" />
   <input type="file" class="${H.file}" />
   <div class="${H.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${H.select}" id="${H.select}"></select>
   <div class="${H.radio}"></div>
   <label class="${H.checkbox}">
     <input type="checkbox" id="${H.checkbox}" />
     <span class="${H.label}"></span>
   </label>
   <textarea class="${H.textarea}" id="${H.textarea}"></textarea>
   <div class="${H["validation-message"]}" id="${H["validation-message"]}"></div>
   <div class="${H.actions}">
     <div class="${H.loader}"></div>
     <button type="button" class="${H.confirm}"></button>
     <button type="button" class="${H.deny}"></button>
     <button type="button" class="${H.cancel}"></button>
   </div>
   <div class="${H.footer}"></div>
   <div class="${H["timer-progress-bar-container"]}">
     <div class="${H["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),V6=()=>{const t=Rn();return t?(t.remove(),yr([document.documentElement,document.body],[H["no-backdrop"],H["toast-shown"],H["has-column"]]),!0):!1},us=()=>{ye.currentInstance.resetValidationMessage()},H6=()=>{const t=$e(),e=Di(t,H.input),n=Di(t,H.file),i=t.querySelector(`.${H.range} input`),o=t.querySelector(`.${H.range} output`),l=Di(t,H.select),f=t.querySelector(`.${H.checkbox} input`),p=Di(t,H.textarea);e.oninput=us,n.onchange=us,l.onchange=us,f.onchange=us,p.oninput=us,i.oninput=()=>{us(),o.value=i.value},i.onchange=()=>{us(),o.value=i.value}},G6=t=>typeof t=="string"?document.querySelector(t):t,X6=t=>{const e=$e();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")},Y6=t=>{window.getComputedStyle(t).direction==="rtl"&&Ze(Rn(),H.rtl)},$6=t=>{const e=V6();if(z6()){zs("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=H.container,e&&Ze(n,H["no-transition"]),rr(n,W6),n.dataset.swal2Theme=t.theme;const i=G6(t.target);i.appendChild(n),t.topLayer&&(n.setAttribute("popover",""),n.showPopover()),X6(t),Y6(i),H6()},G1=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):typeof t=="object"?K6(t,e):t&&rr(e,t)},K6=(t,e)=>{t.jquery?q6(e,t):rr(e,t.toString())},q6=(t,e)=>{if(t.textContent="",0 in e)for(let n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},Z6=(t,e)=>{const n=Ll(),i=ea();!n||!i||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?Cn(n):sn(n),Jn(n,e,"actions"),Q6(n,i,e),rr(i,e.loaderHtml||""),Jn(i,e,"loader"))};function Q6(t,e,n){const i=Kr(),o=Ws(),l=Jo();!i||!o||!l||(Ef(i,"confirm",n),Ef(o,"deny",n),Ef(l,"cancel",n),J6(i,o,l,n),n.reverseButtons&&(n.toast?(t.insertBefore(l,i),t.insertBefore(o,i)):(t.insertBefore(l,e),t.insertBefore(o,e),t.insertBefore(i,e))))}function J6(t,e,n,i){if(!i.buttonsStyling){yr([t,e,n],H.styled);return}Ze([t,e,n],H.styled),i.confirmButtonColor&&t.style.setProperty("--swal2-confirm-button-background-color",i.confirmButtonColor),i.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",i.denyButtonColor),i.cancelButtonColor&&n.style.setProperty("--swal2-cancel-button-background-color",i.cancelButtonColor),_f(t),_f(e),_f(n)}function _f(t){const e=window.getComputedStyle(t);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const n=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");t.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${n}`))}function Ef(t,e,n){const i=M1(e);Fl(t,n[`show${i}Button`],"inline-block"),rr(t,n[`${e}ButtonText`]||""),t.setAttribute("aria-label",n[`${e}ButtonAriaLabel`]||""),t.className=H[e],Jn(t,n,`${e}Button`)}const e5=(t,e)=>{const n=U1();n&&(rr(n,e.closeButtonHtml||""),Jn(n,e,"closeButton"),Fl(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel||""))},t5=(t,e)=>{const n=Rn();n&&(n5(n,e.backdrop),r5(n,e.position),i5(n,e.grow),Jn(n,e,"container"))};function n5(t,e){typeof e=="string"?t.style.background=e:e||Ze([document.documentElement,document.body],H["no-backdrop"])}function r5(t,e){e&&(e in H?Ze(t,H[e]):(Tn('The "position" parameter is not valid, defaulting to "center"'),Ze(t,H.center)))}function i5(t,e){e&&Ze(t,H[`grow-${e}`])}var mt={innerParams:new WeakMap,domCache:new WeakMap};const s5=["input","file","range","select","radio","checkbox","textarea"],o5=(t,e)=>{const n=$e();if(!n)return;const i=mt.innerParams.get(t),o=!i||e.input!==i.input;s5.forEach(l=>{const f=Di(n,H[l]);f&&(c5(l,e.inputAttributes),f.className=H[l],o&&Cn(f))}),e.input&&(o&&a5(e),u5(e))},a5=t=>{if(!t.input)return;if(!Lt[t.input]){zs(`Unexpected type of input! Expected ${Object.keys(Lt).join(" | ")}, got "${t.input}"`);return}const e=Wv(t.input);if(!e)return;const n=Lt[t.input](e,t);sn(e),t.inputAutoFocus&&setTimeout(()=>{jv(n)})},l5=t=>{for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;["id","type","value","style"].includes(n)||t.removeAttribute(n)}},c5=(t,e)=>{const n=$e();if(!n)return;const i=gd(n,t);if(i){l5(i);for(const o in e)i.setAttribute(o,e[o])}},u5=t=>{if(!t.input)return;const e=Wv(t.input);e&&Jn(e,t,"input")},X1=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},jl=(t,e,n)=>{if(n.inputLabel){const i=document.createElement("label"),o=H["input-label"];i.setAttribute("for",t.id),i.className=o,typeof n.customClass=="object"&&Ze(i,n.customClass.inputLabel),i.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",i)}},Wv=t=>{const e=$e();if(e)return Di(e,H[t]||H.input)},Au=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:L1(e)||Tn(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},Lt={};Lt.text=Lt.email=Lt.password=Lt.number=Lt.tel=Lt.url=Lt.search=Lt.date=Lt["datetime-local"]=Lt.time=Lt.week=Lt.month=(t,e)=>(Au(t,e.inputValue),jl(t,t,e),X1(t,e),t.type=e.input,t);Lt.file=(t,e)=>(jl(t,t,e),X1(t,e),t);Lt.range=(t,e)=>{const n=t.querySelector("input"),i=t.querySelector("output");return Au(n,e.inputValue),n.type=e.input,Au(i,e.inputValue),jl(n,t,e),t};Lt.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const n=document.createElement("option");rr(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return jl(t,t,e),t};Lt.radio=t=>(t.textContent="",t);Lt.checkbox=(t,e)=>{const n=gd($e(),"checkbox");n.value="1",n.checked=!!e.inputValue;const i=t.querySelector("span");return rr(i,e.inputPlaceholder||e.inputLabel),n};Lt.textarea=(t,e)=>{Au(t,e.inputValue),X1(t,e),jl(t,t,e);const n=i=>parseInt(window.getComputedStyle(i).marginLeft)+parseInt(window.getComputedStyle(i).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const i=parseInt(window.getComputedStyle($e()).width),o=()=>{if(!document.body.contains(t))return;const l=t.offsetWidth+n(t);l>i?$e().style.width=`${l}px`:_s($e(),"width",e.width)};new MutationObserver(o).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const d5=(t,e)=>{const n=F1();n&&(V1(n),Jn(n,e,"htmlContainer"),e.html?(G1(e.html,n),sn(n,"block")):e.text?(n.textContent=e.text,sn(n,"block")):Cn(n),o5(t,e))},f5=(t,e)=>{const n=Fv();n&&(V1(n),Fl(n,!!e.footer,"block"),e.footer&&G1(e.footer,n),Jn(n,e,"footer"))},h5=(t,e)=>{const n=mt.innerParams.get(t),i=Qo();if(!i)return;if(n&&e.icon===n.icon){Ym(i,e),Xm(i,e);return}if(!e.icon&&!e.iconHtml){Cn(i);return}if(e.icon&&Object.keys(bu).indexOf(e.icon)===-1){zs(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),Cn(i);return}sn(i),Ym(i,e),Xm(i,e),Ze(i,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",Vv)},Xm=(t,e)=>{for(const[n,i]of Object.entries(bu))e.icon!==n&&yr(t,i);Ze(t,e.icon&&bu[e.icon]),m5(t,e),Vv(),Jn(t,e,"icon")},Vv=()=>{const t=$e();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let i=0;i<n.length;i++)n[i].style.backgroundColor=e},g5=t=>`
  ${t.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${t.animation?'<div class="swal2-success-fix"></div>':""}
  ${t.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,p5=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Ym=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let n=t.innerHTML,i="";e.iconHtml?i=$m(e.iconHtml):e.icon==="success"?(i=g5(e),n=n.replace(/ style=".*?"/g,"")):e.icon==="error"?i=p5:e.icon&&(i=$m({question:"?",warning:"!",info:"i"}[e.icon])),n.trim()!==i.trim()&&rr(t,i)},m5=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Gm(t,n,"background-color",e.iconColor);Gm(t,".swal2-success-ring","border-color",e.iconColor)}},$m=t=>`<div class="${H["icon-content"]}">${t}</div>`,w5=(t,e)=>{const n=Lv();if(n){if(!e.imageUrl){Cn(n);return}sn(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt||""),_s(n,"width",e.imageWidth),_s(n,"height",e.imageHeight),n.className=H.image,Jn(n,e,"image")}};let Y1=!1,Hv=0,Gv=0,Xv=0,Yv=0;const x5=t=>{t.addEventListener("mousedown",Su),document.body.addEventListener("mousemove",Iu),t.addEventListener("mouseup",Tu),t.addEventListener("touchstart",Su),document.body.addEventListener("touchmove",Iu),t.addEventListener("touchend",Tu)},y5=t=>{t.removeEventListener("mousedown",Su),document.body.removeEventListener("mousemove",Iu),t.removeEventListener("mouseup",Tu),t.removeEventListener("touchstart",Su),document.body.removeEventListener("touchmove",Iu),t.removeEventListener("touchend",Tu)},Su=t=>{const e=$e();if(t.target===e||Qo().contains(t.target)){Y1=!0;const n=$v(t);Hv=n.clientX,Gv=n.clientY,Xv=parseInt(e.style.insetInlineStart)||0,Yv=parseInt(e.style.insetBlockStart)||0,Ze(e,"swal2-dragging")}},Iu=t=>{const e=$e();if(Y1){let{clientX:n,clientY:i}=$v(t);e.style.insetInlineStart=`${Xv+(n-Hv)}px`,e.style.insetBlockStart=`${Yv+(i-Gv)}px`}},Tu=()=>{const t=$e();Y1=!1,yr(t,"swal2-dragging")},$v=t=>{let e=0,n=0;return t.type.startsWith("mouse")?(e=t.clientX,n=t.clientY):t.type.startsWith("touch")&&(e=t.touches[0].clientX,n=t.touches[0].clientY),{clientX:e,clientY:n}},v5=(t,e)=>{const n=Rn(),i=$e();if(!(!n||!i)){if(e.toast){_s(n,"width",e.width),i.style.width="100%";const o=ea();o&&i.insertBefore(o,Qo())}else _s(i,"width",e.width);_s(i,"padding",e.padding),e.color&&(i.style.color=e.color),e.background&&(i.style.background=e.background),Cn(dd()),C5(i,e),e.draggable&&!e.toast?(Ze(i,H.draggable),x5(i)):(yr(i,H.draggable),y5(i))}},C5=(t,e)=>{const n=e.showClass||{};t.className=`${H.popup} ${Hn(t)?n.popup:""}`,e.toast?(Ze([document.documentElement,document.body],H["toast-shown"]),Ze(t,H.toast)):Ze(t,H.modal),Jn(t,e,"popup"),typeof e.customClass=="string"&&Ze(t,e.customClass),e.icon&&Ze(t,H[`icon-${e.icon}`])},_5=(t,e)=>{const n=j1();if(!n)return;const{progressSteps:i,currentProgressStep:o}=e;if(!i||i.length===0||o===void 0){Cn(n);return}sn(n),n.textContent="",o>=i.length&&Tn("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),i.forEach((l,f)=>{const p=E5(l);if(n.appendChild(p),f===o&&Ze(p,H["active-progress-step"]),f!==i.length-1){const w=b5(e);n.appendChild(w)}})},E5=t=>{const e=document.createElement("li");return Ze(e,H["progress-step"]),rr(e,t),e},b5=t=>{const e=document.createElement("li");return Ze(e,H["progress-step-line"]),t.progressStepsDistance&&_s(e,"width",t.progressStepsDistance),e},A5=(t,e)=>{const n=Bv();n&&(V1(n),Fl(n,!!(e.title||e.titleText),"block"),e.title&&G1(e.title,n),e.titleText&&(n.innerText=e.titleText),Jn(n,e,"title"))},Kv=(t,e)=>{v5(t,e),t5(t,e),_5(t,e),h5(t,e),w5(t,e),A5(t,e),e5(t,e),d5(t,e),Z6(t,e),f5(t,e);const n=$e();typeof e.didRender=="function"&&n&&e.didRender(n),ye.eventEmitter.emit("didRender",n)},S5=()=>Hn($e()),qv=()=>{var t;return(t=Kr())===null||t===void 0?void 0:t.click()},I5=()=>{var t;return(t=Ws())===null||t===void 0?void 0:t.click()},T5=()=>{var t;return(t=Jo())===null||t===void 0?void 0:t.click()},ta=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Zv=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},N5=(t,e,n)=>{Zv(t),e.toast||(t.keydownHandler=i=>R5(e,i,n),t.keydownTarget=e.keydownListenerCapture?window:$e(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},Xh=(t,e)=>{var n;const i=z1();if(i.length){t=t+e,t===-2&&(t=i.length-1),t===i.length?t=0:t===-1&&(t=i.length-1),i[t].focus();return}(n=$e())===null||n===void 0||n.focus()},Qv=["ArrowRight","ArrowDown"],k5=["ArrowLeft","ArrowUp"],R5=(t,e,n)=>{t&&(e.isComposing||e.keyCode===229||(t.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?O5(e,t):e.key==="Tab"?D5(e):[...Qv,...k5].includes(e.key)?P5(e.key):e.key==="Escape"&&M5(e,t,n)))},O5=(t,e)=>{if(!ud(e.allowEnterKey))return;const n=gd($e(),e.input);if(t.target&&n&&t.target instanceof HTMLElement&&t.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(e.input))return;qv(),t.preventDefault()}},D5=t=>{const e=t.target,n=z1();let i=-1;for(let o=0;o<n.length;o++)if(e===n[o]){i=o;break}t.shiftKey?Xh(i,-1):Xh(i,1),t.stopPropagation(),t.preventDefault()},P5=t=>{const e=Ll(),n=Kr(),i=Ws(),o=Jo();if(!e||!n||!i||!o)return;const l=[n,i,o];if(document.activeElement instanceof HTMLElement&&!l.includes(document.activeElement))return;const f=Qv.includes(t)?"nextElementSibling":"previousElementSibling";let p=document.activeElement;if(p){for(let w=0;w<e.children.length;w++){if(p=p[f],!p)return;if(p instanceof HTMLButtonElement&&Hn(p))break}p instanceof HTMLButtonElement&&p.focus()}},M5=(t,e,n)=>{t.preventDefault(),ud(e.allowEscapeKey)&&n(ta.esc)};var Wo={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const B5=()=>{const t=Rn();Array.from(document.body.children).forEach(n=>{n.contains(t)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},Jv=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},eC=typeof window<"u"&&!!window.GestureEvent,L5=()=>{if(eC&&!oi(document.body,H.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,Ze(document.body,H.iosfix),F5()}},F5=()=>{const t=Rn();if(!t)return;let e;t.ontouchstart=n=>{e=j5(n)},t.ontouchmove=n=>{e&&(n.preventDefault(),n.stopPropagation())}},j5=t=>{const e=t.target,n=Rn(),i=F1();return!n||!i||U5(t)||z5(t)?!1:e===n||!Gh(n)&&e instanceof HTMLElement&&!j6(e,i)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(Gh(i)&&i.contains(e))},U5=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",z5=t=>t.touches&&t.touches.length>1,W5=()=>{if(oi(document.body,H.iosfix)){const t=parseInt(document.body.style.top,10);yr(document.body,H.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},V5=()=>{const t=document.createElement("div");t.className=H["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e};let Io=null;const H5=t=>{Io===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(Io=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Io+V5()}px`)},G5=()=>{Io!==null&&(document.body.style.paddingRight=`${Io}px`,Io=null)};function tC(t,e,n,i){hd()?Km(t,i):(N6(n).then(()=>Km(t,i)),Zv(ye)),eC?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),W1()&&(G5(),W5(),Jv()),X5()}function X5(){yr([document.documentElement,document.body],[H.shown,H["height-auto"],H["no-backdrop"],H["toast-shown"]])}function Pi(t){t=$5(t);const e=Wo.swalPromiseResolve.get(this),n=Y5(this);this.isAwaitingPromise?t.isDismissed||(Ul(this),e(t)):n&&e(t)}const Y5=t=>{const e=$e();if(!e)return!1;const n=mt.innerParams.get(t);if(!n||oi(e,n.hideClass.popup))return!1;yr(e,n.showClass.popup),Ze(e,n.hideClass.popup);const i=Rn();return yr(i,n.showClass.backdrop),Ze(i,n.hideClass.backdrop),K5(t,e,n),!0};function nC(t){const e=Wo.swalPromiseReject.get(this);Ul(this),e&&e(t)}const Ul=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,mt.innerParams.get(t)||t._destroy())},$5=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),K5=(t,e,n)=>{var i;const o=Rn(),l=zv(e);typeof n.willClose=="function"&&n.willClose(e),(i=ye.eventEmitter)===null||i===void 0||i.emit("willClose",e),l?q5(t,e,o,n.returnFocus,n.didClose):tC(t,o,n.returnFocus,n.didClose)},q5=(t,e,n,i,o)=>{ye.swalCloseEventFinishedCallback=tC.bind(null,t,n,i,o);const l=function(f){if(f.target===e){var p;(p=ye.swalCloseEventFinishedCallback)===null||p===void 0||p.call(ye),delete ye.swalCloseEventFinishedCallback,e.removeEventListener("animationend",l),e.removeEventListener("transitionend",l)}};e.addEventListener("animationend",l),e.addEventListener("transitionend",l)},Km=(t,e)=>{setTimeout(()=>{var n;typeof e=="function"&&e.bind(t.params)(),(n=ye.eventEmitter)===null||n===void 0||n.emit("didClose"),t._destroy&&t._destroy()})},Vo=t=>{let e=$e();if(e||new st,e=$e(),!e)return;const n=ea();hd()?Cn(Qo()):Z5(e,t),sn(n),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},Z5=(t,e)=>{const n=Ll(),i=ea();!n||!i||(!e&&Hn(Kr())&&(e=Kr()),sn(n),e&&(Cn(e),i.setAttribute("data-button-to-replace",e.className),n.insertBefore(i,e)),Ze([t,n],H.loading))},Q5=(t,e)=>{e.input==="select"||e.input==="radio"?rN(t,e):["text","email","number","tel","textarea"].some(n=>n===e.input)&&(B1(e.inputValue)||L1(e.inputValue))&&(Vo(Kr()),iN(t,e))},J5=(t,e)=>{const n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return eN(n);case"radio":return tN(n);case"file":return nN(n);default:return e.inputAutoTrim?n.value.trim():n.value}},eN=t=>t.checked?1:0,tN=t=>t.checked?t.value:null,nN=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,rN=(t,e)=>{const n=$e();if(!n)return;const i=o=>{e.input==="select"?sN(n,Nu(o),e):e.input==="radio"&&oN(n,Nu(o),e)};B1(e.inputOptions)||L1(e.inputOptions)?(Vo(Kr()),Ml(e.inputOptions).then(o=>{t.hideLoading(),i(o)})):typeof e.inputOptions=="object"?i(e.inputOptions):zs(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},iN=(t,e)=>{const n=t.getInput();n&&(Cn(n),Ml(e.inputValue).then(i=>{n.value=e.input==="number"?`${parseFloat(i)||0}`:`${i}`,sn(n),n.focus(),t.hideLoading()}).catch(i=>{zs(`Error in inputValue promise: ${i}`),n.value="",sn(n),n.focus(),t.hideLoading()}))};function sN(t,e,n){const i=Di(t,H.select);if(!i)return;const o=(l,f,p)=>{const w=document.createElement("option");w.value=p,rr(w,f),w.selected=rC(p,n.inputValue),l.appendChild(w)};e.forEach(l=>{const f=l[0],p=l[1];if(Array.isArray(p)){const w=document.createElement("optgroup");w.label=f,w.disabled=!1,i.appendChild(w),p.forEach(m=>o(w,m[1],m[0]))}else o(i,p,f)}),i.focus()}function oN(t,e,n){const i=Di(t,H.radio);if(!i)return;e.forEach(l=>{const f=l[0],p=l[1],w=document.createElement("input"),m=document.createElement("label");w.type="radio",w.name=H.radio,w.value=f,rC(f,n.inputValue)&&(w.checked=!0);const E=document.createElement("span");rr(E,p),E.className=H.label,m.appendChild(w),m.appendChild(E),i.appendChild(m)});const o=i.querySelectorAll("input");o.length&&o[0].focus()}const Nu=t=>{const e=[];return t instanceof Map?t.forEach((n,i)=>{let o=n;typeof o=="object"&&(o=Nu(o)),e.push([i,o])}):Object.keys(t).forEach(n=>{let i=t[n];typeof i=="object"&&(i=Nu(i)),e.push([n,i])}),e},rC=(t,e)=>!!e&&e.toString()===t.toString(),aN=t=>{const e=mt.innerParams.get(t);t.disableButtons(),e.input?iC(t,"confirm"):K1(t,!0)},lN=t=>{const e=mt.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?iC(t,"deny"):$1(t,!1)},cN=(t,e)=>{t.disableButtons(),e(ta.cancel)},iC=(t,e)=>{const n=mt.innerParams.get(t);if(!n.input){zs(`The "input" parameter is needed to be set when using returnInputValueOn${M1(e)}`);return}const i=t.getInput(),o=J5(t,n);n.inputValidator?uN(t,o,e):i&&!i.checkValidity()?(t.enableButtons(),t.showValidationMessage(n.validationMessage||i.validationMessage)):e==="deny"?$1(t,o):K1(t,o)},uN=(t,e,n)=>{const i=mt.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>Ml(i.inputValidator(e,i.validationMessage))).then(l=>{t.enableButtons(),t.enableInput(),l?t.showValidationMessage(l):n==="deny"?$1(t,e):K1(t,e)})},$1=(t,e)=>{const n=mt.innerParams.get(t||void 0);n.showLoaderOnDeny&&Vo(Ws()),n.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>Ml(n.preDeny(e,n.validationMessage))).then(o=>{o===!1?(t.hideLoading(),Ul(t)):t.close({isDenied:!0,value:typeof o>"u"?e:o})}).catch(o=>sC(t||void 0,o))):t.close({isDenied:!0,value:e})},qm=(t,e)=>{t.close({isConfirmed:!0,value:e})},sC=(t,e)=>{t.rejectPromise(e)},K1=(t,e)=>{const n=mt.innerParams.get(t||void 0);n.showLoaderOnConfirm&&Vo(),n.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>Ml(n.preConfirm(e,n.validationMessage))).then(o=>{Hn(dd())||o===!1?(t.hideLoading(),Ul(t)):qm(t,typeof o>"u"?e:o)}).catch(o=>sC(t||void 0,o))):qm(t,e)};function ku(){const t=mt.innerParams.get(this);if(!t)return;const e=mt.domCache.get(this);Cn(e.loader),hd()?t.icon&&sn(Qo()):dN(e),yr([e.popup,e.actions],H.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const dN=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?sn(e[0],"inline-block"):F6()&&Cn(t.actions)};function oC(){const t=mt.innerParams.get(this),e=mt.domCache.get(this);return e?gd(e.popup,t.input):null}function aC(t,e,n){const i=mt.domCache.get(t);e.forEach(o=>{i[o].disabled=n})}function lC(t,e){const n=$e();if(!(!n||!t))if(t.type==="radio"){const i=n.querySelectorAll(`[name="${H.radio}"]`);for(let o=0;o<i.length;o++)i[o].disabled=e}else t.disabled=e}function cC(){aC(this,["confirmButton","denyButton","cancelButton"],!1)}function uC(){aC(this,["confirmButton","denyButton","cancelButton"],!0)}function dC(){lC(this.getInput(),!1)}function fC(){lC(this.getInput(),!0)}function hC(t){const e=mt.domCache.get(this),n=mt.innerParams.get(this);rr(e.validationMessage,t),e.validationMessage.className=H["validation-message"],n.customClass&&n.customClass.validationMessage&&Ze(e.validationMessage,n.customClass.validationMessage),sn(e.validationMessage);const i=this.getInput();i&&(i.setAttribute("aria-invalid","true"),i.setAttribute("aria-describedby",H["validation-message"]),jv(i),Ze(i,H.inputerror))}function gC(){const t=mt.domCache.get(this);t.validationMessage&&Cn(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),yr(e,H.inputerror))}const To={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},fN=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],hN={allowEnterKey:void 0},gN=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],pC=t=>Object.prototype.hasOwnProperty.call(To,t),mC=t=>fN.indexOf(t)!==-1,wC=t=>hN[t],pN=t=>{pC(t)||Tn(`Unknown parameter "${t}"`)},mN=t=>{gN.includes(t)&&Tn(`The parameter "${t}" is incompatible with toasts`)},wN=t=>{const e=wC(t);e&&Mv(t,e)},xC=t=>{t.backdrop===!1&&t.allowOutsideClick&&Tn('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","minimal","borderless","bootstrap-4","bootstrap-4-light","bootstrap-4-dark","bootstrap-5","bootstrap-5-light","bootstrap-5-dark","material-ui","material-ui-light","material-ui-dark","embed-iframe","bulma","bulma-light","bulma-dark"].includes(t.theme)&&Tn(`Invalid theme "${t.theme}"`);for(const e in t)pN(e),t.toast&&mN(e),wN(e)};function yC(t){const e=Rn(),n=$e(),i=mt.innerParams.get(this);if(!n||oi(n,i.hideClass.popup)){Tn("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const o=xN(t),l=Object.assign({},i,o);xC(l),e.dataset.swal2Theme=l.theme,Kv(this,l),mt.innerParams.set(this,l),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const xN=t=>{const e={};return Object.keys(t).forEach(n=>{mC(n)?e[n]=t[n]:Tn(`Invalid parameter to update: ${n}`)}),e};function vC(){const t=mt.domCache.get(this),e=mt.innerParams.get(this);if(!e){CC(this);return}t.popup&&ye.swalCloseEventFinishedCallback&&(ye.swalCloseEventFinishedCallback(),delete ye.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),ye.eventEmitter.emit("didDestroy"),yN(this)}const yN=t=>{CC(t),delete t.params,delete ye.keydownHandler,delete ye.keydownTarget,delete ye.currentInstance},CC=t=>{t.isAwaitingPromise?(bf(mt,t),t.isAwaitingPromise=!0):(bf(Wo,t),bf(mt,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},bf=(t,e)=>{for(const n in t)t[n].delete(e)};var vN=Object.freeze({__proto__:null,_destroy:vC,close:Pi,closeModal:Pi,closePopup:Pi,closeToast:Pi,disableButtons:uC,disableInput:fC,disableLoading:ku,enableButtons:cC,enableInput:dC,getInput:oC,handleAwaitingPromise:Ul,hideLoading:ku,rejectPromise:nC,resetValidationMessage:gC,showValidationMessage:hC,update:yC});const CN=(t,e,n)=>{t.toast?_N(t,e,n):(bN(e),AN(e),SN(t,e,n))},_N=(t,e,n)=>{e.popup.onclick=()=>{t&&(EN(t)||t.timer||t.input)||n(ta.close)}},EN=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let Ru=!1;const bN=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(Ru=!0)}}},AN=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(n){t.popup.onmouseup=()=>{},(n.target===t.popup||n.target instanceof HTMLElement&&t.popup.contains(n.target))&&(Ru=!0)}}},SN=(t,e,n)=>{e.container.onclick=i=>{if(Ru){Ru=!1;return}i.target===e.container&&ud(t.allowOutsideClick)&&n(ta.backdrop)}},IN=t=>typeof t=="object"&&t.jquery,Zm=t=>t instanceof Element||IN(t),TN=t=>{const e={};return typeof t[0]=="object"&&!Zm(t[0])?Object.assign(e,t[0]):["title","html","icon"].forEach((n,i)=>{const o=t[i];typeof o=="string"||Zm(o)?e[n]=o:o!==void 0&&zs(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof o}`)}),e};function NN(...t){return new this(...t)}function kN(t){class e extends this{_main(i,o){return super._main(i,Object.assign({},t,o))}}return e}const RN=()=>ye.timeout&&ye.timeout.getTimerLeft(),_C=()=>{if(ye.timeout)return U6(),ye.timeout.stop()},EC=()=>{if(ye.timeout){const t=ye.timeout.start();return H1(t),t}},ON=()=>{const t=ye.timeout;return t&&(t.running?_C():EC())},DN=t=>{if(ye.timeout){const e=ye.timeout.increase(t);return H1(e,!0),e}},PN=()=>!!(ye.timeout&&ye.timeout.isRunning());let Qm=!1;const Yh={};function MN(t="data-swal-template"){Yh[t]=this,Qm||(document.body.addEventListener("click",BN),Qm=!0)}const BN=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const n in Yh){const i=e.getAttribute(n);if(i){Yh[n].fire({template:i});return}}};class LN{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,n){const i=this._getHandlersByEventName(e);i.includes(n)||i.push(n)}once(e,n){const i=(...o)=>{this.removeListener(e,i),n.apply(this,o)};this.on(e,i)}emit(e,...n){this._getHandlersByEventName(e).forEach(i=>{try{i.apply(this,n)}catch(o){console.error(o)}})}removeListener(e,n){const i=this._getHandlersByEventName(e),o=i.indexOf(n);o>-1&&i.splice(o,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}}ye.eventEmitter=new LN;const FN=(t,e)=>{ye.eventEmitter.on(t,e)},jN=(t,e)=>{ye.eventEmitter.once(t,e)},UN=(t,e)=>{if(!t){ye.eventEmitter.reset();return}e?ye.eventEmitter.removeListener(t,e):ye.eventEmitter.removeAllListeners(t)};var zN=Object.freeze({__proto__:null,argsToParams:TN,bindClickHandler:MN,clickCancel:T5,clickConfirm:qv,clickDeny:I5,enableLoading:Vo,fire:NN,getActions:Ll,getCancelButton:Jo,getCloseButton:U1,getConfirmButton:Kr,getContainer:Rn,getDenyButton:Ws,getFocusableElements:z1,getFooter:Fv,getHtmlContainer:F1,getIcon:Qo,getIconContent:D6,getImage:Lv,getInputLabel:P6,getLoader:ea,getPopup:$e,getProgressSteps:j1,getTimerLeft:RN,getTimerProgressBar:fd,getTitle:Bv,getValidationMessage:dd,increaseTimer:DN,isDeprecatedParameter:wC,isLoading:B6,isTimerRunning:PN,isUpdatableParameter:mC,isValidParameter:pC,isVisible:S5,mixin:kN,off:UN,on:FN,once:jN,resumeTimer:EC,showLoading:Vo,stopTimer:_C,toggleTimer:ON});class WN{constructor(e,n){this.callback=e,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const n=this.running;return n&&this.stop(),this.remaining+=e,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const bC=["swal-title","swal-html","swal-footer"],VN=t=>{const e=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!e)return{};const n=e.content;return ZN(n),Object.assign(HN(n),GN(n),XN(n),YN(n),$N(n),KN(n),qN(n,bC))},HN=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach(i=>{Ds(i,["name","value"]);const o=i.getAttribute("name"),l=i.getAttribute("value");!o||!l||(typeof To[o]=="boolean"?e[o]=l!=="false":typeof To[o]=="object"?e[o]=JSON.parse(l):e[o]=l)}),e},GN=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(i=>{const o=i.getAttribute("name"),l=i.getAttribute("value");!o||!l||(e[o]=new Function(`return ${l}`)())}),e},XN=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach(i=>{Ds(i,["type","color","aria-label"]);const o=i.getAttribute("type");!o||!["confirm","cancel","deny"].includes(o)||(e[`${o}ButtonText`]=i.innerHTML,e[`show${M1(o)}Button`]=!0,i.hasAttribute("color")&&(e[`${o}ButtonColor`]=i.getAttribute("color")),i.hasAttribute("aria-label")&&(e[`${o}ButtonAriaLabel`]=i.getAttribute("aria-label")))}),e},YN=t=>{const e={},n=t.querySelector("swal-image");return n&&(Ds(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt")||void 0)),e},$N=t=>{const e={},n=t.querySelector("swal-icon");return n&&(Ds(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e},KN=t=>{const e={},n=t.querySelector("swal-input");n&&(Ds(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));const i=Array.from(t.querySelectorAll("swal-input-option"));return i.length&&(e.inputOptions={},i.forEach(o=>{Ds(o,["value"]);const l=o.getAttribute("value");if(!l)return;const f=o.innerHTML;e.inputOptions[l]=f})),e},qN=(t,e)=>{const n={};for(const i in e){const o=e[i],l=t.querySelector(o);l&&(Ds(l,[]),n[o.replace(/^swal-/,"")]=l.innerHTML.trim())}return n},ZN=t=>{const e=bC.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(n=>{const i=n.tagName.toLowerCase();e.includes(i)||Tn(`Unrecognized element <${i}>`)})},Ds=(t,e)=>{Array.from(t.attributes).forEach(n=>{e.indexOf(n.name)===-1&&Tn([`Unrecognized attribute "${n.name}" on <${t.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},AC=10,QN=t=>{const e=Rn(),n=$e();typeof t.willOpen=="function"&&t.willOpen(n),ye.eventEmitter.emit("willOpen",n);const o=window.getComputedStyle(document.body).overflowY;tk(e,n,t),setTimeout(()=>{JN(e,n)},AC),W1()&&(ek(e,t.scrollbarPadding,o),B5()),!hd()&&!ye.previousActiveElement&&(ye.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(n)),ye.eventEmitter.emit("didOpen",n)},Ou=t=>{const e=$e();if(t.target!==e)return;const n=Rn();e.removeEventListener("animationend",Ou),e.removeEventListener("transitionend",Ou),n.style.overflowY="auto",yr(n,H["no-transition"])},JN=(t,e)=>{zv(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",Ou),e.addEventListener("transitionend",Ou)):t.style.overflowY="auto"},ek=(t,e,n)=>{L5(),e&&n!=="hidden"&&H5(n),setTimeout(()=>{t.scrollTop=0})},tk=(t,e,n)=>{Ze(t,n.showClass.backdrop),n.animation?(e.style.setProperty("opacity","0","important"),sn(e,"grid"),setTimeout(()=>{Ze(e,n.showClass.popup),e.style.removeProperty("opacity")},AC)):sn(e,"grid"),Ze([document.documentElement,document.body],H.shown),n.heightAuto&&n.backdrop&&!n.toast&&Ze([document.documentElement,document.body],H["height-auto"])};var Jm={email:(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function nk(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=Jm.email),t.input==="url"&&(t.inputValidator=Jm.url))}function rk(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(Tn('Target parameter is not valid, defaulting to "body"'),t.target="body")}function ik(t){nk(t),t.showLoaderOnConfirm&&!t.preConfirm&&Tn(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),rk(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),$6(t)}let Hr;var mc=new WeakMap;class jt{constructor(...e){if(A6(this,mc,void 0),typeof window>"u")return;Hr=this;const n=Object.freeze(this.constructor.argsToParams(e));this.params=n,this.isAwaitingPromise=!1,S6(mc,this,this._main(Hr.params))}_main(e,n={}){if(xC(Object.assign({},n,e)),ye.currentInstance){const l=Wo.swalPromiseResolve.get(ye.currentInstance),{isAwaitingPromise:f}=ye.currentInstance;ye.currentInstance._destroy(),f||l({isDismissed:!0}),W1()&&Jv()}ye.currentInstance=Hr;const i=ok(e,n);ik(i),Object.freeze(i),ye.timeout&&(ye.timeout.stop(),delete ye.timeout),clearTimeout(ye.restoreFocusTimeout);const o=ak(Hr);return Kv(Hr,i),mt.innerParams.set(Hr,i),sk(Hr,o,i)}then(e){return Vm(mc,this).then(e)}finally(e){return Vm(mc,this).finally(e)}}const sk=(t,e,n)=>new Promise((i,o)=>{const l=f=>{t.close({isDismissed:!0,dismiss:f,isConfirmed:!1,isDenied:!1})};Wo.swalPromiseResolve.set(t,i),Wo.swalPromiseReject.set(t,o),e.confirmButton.onclick=()=>{aN(t)},e.denyButton.onclick=()=>{lN(t)},e.cancelButton.onclick=()=>{cN(t,l)},e.closeButton.onclick=()=>{l(ta.close)},CN(n,e,l),N5(ye,n,l),Q5(t,n),QN(n),lk(ye,n,l),ck(e,n),setTimeout(()=>{e.container.scrollTop=0})}),ok=(t,e)=>{const n=VN(t),i=Object.assign({},To,e,n,t);return i.showClass=Object.assign({},To.showClass,i.showClass),i.hideClass=Object.assign({},To.hideClass,i.hideClass),i.animation===!1&&(i.showClass={backdrop:"swal2-noanimation"},i.hideClass={}),i},ak=t=>{const e={popup:$e(),container:Rn(),actions:Ll(),confirmButton:Kr(),denyButton:Ws(),cancelButton:Jo(),loader:ea(),closeButton:U1(),validationMessage:dd(),progressSteps:j1()};return mt.domCache.set(t,e),e},lk=(t,e,n)=>{const i=fd();Cn(i),e.timer&&(t.timeout=new WN(()=>{n("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(sn(i),Jn(i,e,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&H1(e.timer)})))},ck=(t,e)=>{if(!e.toast){if(!ud(e.allowEnterKey)){Mv("allowEnterKey"),fk();return}uk(t)||dk(t,e)||Xh(-1,1)}},uk=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const n of e)if(n instanceof HTMLElement&&Hn(n))return n.focus(),!0;return!1},dk=(t,e)=>e.focusDeny&&Hn(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&Hn(t.cancelButton)?(t.cancelButton.focus(),!0):e.focusConfirm&&Hn(t.confirmButton)?(t.confirmButton.focus(),!0):!1,fk=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};jt.prototype.disableButtons=uC;jt.prototype.enableButtons=cC;jt.prototype.getInput=oC;jt.prototype.disableInput=fC;jt.prototype.enableInput=dC;jt.prototype.hideLoading=ku;jt.prototype.disableLoading=ku;jt.prototype.showValidationMessage=hC;jt.prototype.resetValidationMessage=gC;jt.prototype.close=Pi;jt.prototype.closePopup=Pi;jt.prototype.closeModal=Pi;jt.prototype.closeToast=Pi;jt.prototype.rejectPromise=nC;jt.prototype.update=yC;jt.prototype._destroy=vC;Object.assign(jt,zN);Object.keys(vN).forEach(t=>{jt[t]=function(...e){return Hr&&Hr[t]?Hr[t](...e):null}});jt.DismissReason=ta;jt.version="11.26.3";const st=jt;st.default=st;typeof document<"u"&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.15s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}100%{transform:translate3d(0, 0, 0) scale(1);opacity:1}}@keyframes swal2-hide{0%{transform:translate3d(0, 0, 0) scale(1);opacity:1}100%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const hk=()=>{const[t,e]=Y.useState([]),[n,i]=Y.useState({}),[o,l]=Y.useState({}),[f,p]=Y.useState(!0),[w,m]=Y.useState(!1),[E,v]=Y.useState(!1),[S,R]=Y.useState(!1),[M,B]=Y.useState(!1),[K,O]=Y.useState(!1),[k,N]=Y.useState(null),[j,te]=Y.useState(null),[Z,U]=Y.useState(""),[J,$]=Y.useState(null),[Se,Qe]=Y.useState(""),[ge,ke]=Y.useState([]),[Ie,V]=Y.useState(null),[at,_e]=Y.useState(!1),[se,me]=Y.useState(new Date().toISOString().split("T")[0]),[we,G]=Y.useState(new Date().toTimeString().slice(0,5)),[oe,Xe]=Y.useState([]),[ve,Et]=Y.useState(null),[ce,_n]=Y.useState(null),[Oe,Pr]=Y.useState({name:"",category:"",price:"",stock:"",minStock:"",useBarcode:!0});Y.useEffect(()=>{vr()},[]);const vr=async()=>{try{p(!0);const X=await un.getAllProducts();e(X);const he={},Je={};for(const Ee of X)he[Ee.id]=await un.getUnitsWithBarcodeCount(Ee.id),Je[Ee.id]=await un.getReadyStock(Ee.id);i(he),l(Je);const De=X.filter(Ee=>Ee.stock<=Ee.minStock);ke(De)}catch(X){console.error("Error loading products:",X)}finally{p(!1)}},Mt=X=>{const{name:he,value:Je,type:De,checked:Ee}=X.target;Pr(sr=>({...sr,[he]:De==="checkbox"?Ee:Je}))},Vs=async X=>{X.preventDefault();try{const he={...Oe,price:parseFloat(Oe.price),stock:Oe.useBarcode?0:parseInt(Oe.stock),minStock:parseInt(Oe.minStock)};E&&J?await un.updateProduct(J.id,he):await un.createProduct(he),m(!1),v(!1),Pr({name:"",category:"",price:"",stock:"",minStock:"",useBarcode:!0}),vr()}catch(he){console.error("Error saving product:",he)}},ze=X=>{$(X),Pr({name:X.name,category:X.category,price:X.price.toString(),stock:X.stock.toString(),minStock:X.minStock.toString(),useBarcode:X.useBarcode!==!1}),v(!0)},Zr=async X=>{if((await st.fire({title:"Hapus Produk?",text:"Apakah Anda yakin ingin menghapus produk ini?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"})).isConfirmed)try{await un.deleteProduct(X),await st.fire({title:"Berhasil!",text:"Produk berhasil dihapus.",icon:"success",timer:2e3,showConfirmButton:!1}),vr()}catch(Je){console.error("Error deleting product:",Je),await st.fire({title:"Error!",text:"Gagal menghapus produk.",icon:"error"})}},ir=async X=>{try{const he=await un.getProductByBarcode(X);he?(V(he),B(!0)):await st.fire({title:"Produk Tidak Ditemukan",text:"Barcode tidak terdaftar dalam sistem.",icon:"warning"})}catch(he){console.error("Error checking stock:",he),await st.fire({title:"Error!",text:"Gagal memeriksa stok.",icon:"error"})}R(!1),N(null)},wi=X=>{te(X),U(""),O(!0)},Vt=async X=>{try{if(!j)return;await un.addBarcodeToProduct(j,X),await st.fire({title:"Berhasil!",text:"Barcode berhasil di-assign.",icon:"success",timer:2e3,showConfirmButton:!1}),te(null),N(null),R(!1),vr()}catch(he){await st.fire({title:"Error!",text:he.message||"Gagal assign barcode",icon:"error"}),te(null),N(null),R(!1)}},rt=async()=>{if(!Z.trim()){await st.fire({title:"Perhatian!",text:"Masukkan barcode terlebih dahulu.",icon:"warning"});return}try{await un.addBarcodeToProduct(j,Z.trim()),await st.fire({title:"Berhasil!",text:"Barcode berhasil di-assign.",icon:"success",timer:2e3,showConfirmButton:!1}),O(!1),te(null),U(""),vr()}catch(X){await st.fire({title:"Error!",text:X.message||"Gagal assign barcode"})}},je=async()=>{try{const X=Ve(He,`stockAuditsByDate/${se}`),he=await Jt(X);let Je=[];if(he.exists()){const sr=(he.val()||{}).results||{};Je=t.map(Ut=>{const Mr=sr[Ut.id],tt=!!Mr;return{...Ut,physicalStock:(Mr==null?void 0:Mr.physicalStock)??null,databaseStock:Ut.stock,readyStock:o[Ut.id]||0,status:tt?"completed":"pending"}})}else await fr(Ve(He,`stockAuditsByDate/${se}/meta`),{date:se,createdAt:Date.now()}),Je=t.map(Ee=>({...Ee,physicalStock:null,databaseStock:Ee.stock,readyStock:o[Ee.id]||0,status:"pending"}));Xe(Je);const De=Je.find(Ee=>Ee.status==="pending")||null;Et(De),_n(De?De.useBarcode!==!1?"barcode":"manual":null)}catch(X){await st.fire({title:"Error!",text:X.message||"Gagal memulai audit.",icon:"error"})}},Hs=async X=>{try{const he=await un.getProductByBarcode(X);if(he&&ve&&he.id===ve.id){const Je=Ve(He,`productUnits/${he.id}`),De=await Jt(Je);let Ee=0;De.exists()&&(Ee=Object.values(De.val()).filter(ae=>ae.barcode===X&&ae.status==="in_stock").length);const sr={productId:he.id,name:he.name,useBarcode:he.useBarcode!==!1,databaseStock:ve.databaseStock,readyStock:ve.readyStock,physicalStock:Ee,status:"completed",updatedAt:Date.now()};await fr(Ve(He,`stockAuditsByDate/${se}/results/${he.id}`),sr);const Ut=oe.map(tt=>tt.id===ve.id?{...tt,physicalStock:Ee,status:"completed"}:tt);Xe(Ut);const Mr=Ut.find(tt=>tt.status==="pending");Mr?(Et(Mr),_n(Mr.useBarcode!==!1?"barcode":"manual")):(Et(null),_n(null)),await st.fire({title:"Berhasil!",text:`Stock fisik: ${Ee}, Database: ${he.stock}`,icon:"success",timer:2e3,showConfirmButton:!1})}else await st.fire({title:"Barcode Salah",text:"Barcode tidak sesuai produk yang diaudit.",icon:"warning"})}catch(he){console.error("Error scanning barcode:",he),await st.fire({title:"Error!",text:"Gagal memindai barcode.",icon:"error"})}R(!1)},fe=async(X,he)=>{try{const Je=oe.find(Ut=>Ut.id===X);if(!Je)return;const De={productId:X,name:Je.name,useBarcode:Je.useBarcode!==!1,databaseStock:Je.databaseStock,readyStock:Je.readyStock,physicalStock:parseInt(he),status:"completed",updatedAt:Date.now()};await fr(Ve(He,`stockAuditsByDate/${se}/results/${X}`),De);const Ee=oe.map(Ut=>Ut.id===X?{...Ut,physicalStock:parseInt(he),status:"completed"}:Ut);Xe(Ee);const sr=Ee.find(Ut=>Ut.status==="pending");sr?(Et(sr),_n(sr.useBarcode!==!1?"barcode":"manual")):(Et(null),_n(null))}catch(Je){await st.fire({title:"Error!",text:Je.message||"Gagal menyimpan hasil item.",icon:"error"})}},rs=t.filter(X=>{if(!X||!X.name||!X.category)return!1;const he=Se.toLowerCase(),Je=X.name.toLowerCase().includes(he),De=X.category.toLowerCase().includes(he);return Je||De});if(f)return b.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"16rem"},children:b.jsx("div",{className:"spinner"})});const zl=async()=>{try{const X=Ve(He,"stockAudits"),he=wo(X),Je={id:he.key,date:se,time:we,createdAt:Date.now(),results:oe.map(De=>({productId:De.id,name:De.name,useBarcode:De.useBarcode!==!1,databaseStock:De.databaseStock,readyStock:De.readyStock,physicalStock:De.physicalStock,status:De.status}))};await fr(he,Je),await st.fire({title:"Tersimpan!",text:"Laporan audit berhasil disimpan.",icon:"success",timer:2e3,showConfirmButton:!1})}catch(X){await st.fire({title:"Error!",text:X.message||"Gagal menyimpan laporan audit.",icon:"error"})}},Cr=()=>{try{const X=`Laporan Stock Audit - ${se} ${we}`,he=oe.map(Ee=>`
        <tr>
          <td>${Ee.name||"-"}</td>
          <td style="text-align:center;">${Ee.useBarcode!==!1?"Barcode":"Manual"}</td>
          <td style="text-align:right;">${Ee.databaseStock??"-"}</td>
          <td style="text-align:right;">${Ee.readyStock??"-"}</td>
          <td style="text-align:right;">${Ee.physicalStock??"-"}</td>
          <td style="text-align:center;">${Ee.status}</td>
        </tr>
      `).join(""),Je=`
        <html>
          <head>
            <meta charset="utf-8" />
            <title>${X}</title>
            <style>
              body { font-family: Arial, Helvetica, sans-serif; color: #111827; padding: 24px; }
              h1 { font-size: 18px; margin: 0 0 4px 0; }
              p { margin: 0 0 16px 0; color: #6b7280; }
              table { width: 100%; border-collapse: collapse; }
              th, td { border: 1px solid #e5e7eb; padding: 8px; font-size: 12px; }
              th { background: #f3f4f6; text-align: left; }
              tfoot td { font-weight: 600; }
              .meta { margin-bottom: 16px; }
              @media print {
                @page { size: A4; margin: 16mm; }
              }
            </style>
          </head>
          <body>
            <h1>${X}</h1>
            <p class="meta">Total item selesai: ${oe.filter(Ee=>Ee.status==="completed").length}/${oe.length}</p>
            <table>
              <thead>
                <tr>
                  <th>Produk</th>
                  <th style="text-align:center;">Mode</th>
                  <th style="text-align:right;">DB</th>
                  <th style="text-align:right;">Ready</th>
                  <th style="text-align:right;">Fisik</th>
                  <th style="text-align:center;">Status</th>
                </tr>
              </thead>
              <tbody>
                ${he}
              </tbody>
            </table>
          </body>
        </html>
      `,De=window.open("","_blank","width=1024,height=768");if(!De)return;De.document.open(),De.document.write(Je),De.document.close(),De.focus(),setTimeout(()=>{De.print()},300)}catch(X){st.fire({title:"Error!",text:X.message||"Gagal mengekspor PDF.",icon:"error"})}};return b.jsxs("div",{style:{padding:"1.5rem"},children:[b.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"}}),ge.length>0&&b.jsxs("div",{style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"0.5rem",padding:"1rem",marginBottom:"1.5rem",display:"flex",alignItems:"center"},children:[b.jsx(Ch,{size:20,style:{color:"#dc2626",marginRight:"0.5rem"}}),b.jsxs("div",{children:[b.jsx("h3",{style:{fontWeight:"500",color:"#991b1b",margin:0,fontSize:"0.875rem"},children:"Stok Rendah!"}),b.jsxs("p",{style:{fontSize:"0.75rem",color:"#dc2626",marginTop:"0.25rem",margin:0},children:[ge.length," produk memiliki stok di bawah minimum"]})]})]}),b.jsxs("div",{style:{background:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",overflow:"hidden"},children:[b.jsxs("div",{style:{backgroundColor:"#f9fafb",padding:"1rem 1.5rem",borderBottom:"1px solid #e5e7eb",display:"flex",flexDirection:window.innerWidth<=768?"column":"row",alignItems:window.innerWidth<=768?"stretch":"center",justifyContent:"space-between",gap:"1rem"},children:[b.jsxs("div",{style:{position:"relative",flex:window.innerWidth<=768?"none":"1",maxWidth:window.innerWidth<=768?"none":"300px"},children:[b.jsx(Tx,{size:20,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),b.jsx("input",{type:"text",placeholder:"Cari produk...",value:Se,onChange:X=>Qe(X.target.value),style:{width:"100%",paddingLeft:"2.5rem",paddingRight:"1rem",paddingTop:"0.5rem",paddingBottom:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.5rem",fontSize:"0.875rem"}})]}),b.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",width:window.innerWidth<=768?"100%":"auto"},children:[b.jsxs("button",{onClick:()=>_e(!0),style:{backgroundColor:"#10b981",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",flex:window.innerWidth<=768?"1":"none",minWidth:window.innerWidth<=768?"0":"auto"},children:[b.jsx(Ix,{size:20}),"Stock Audit"]}),b.jsxs("button",{onClick:()=>m(!0),style:{backgroundColor:"transparent",color:"#111827",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",flex:window.innerWidth<=768?"1":"none",minWidth:window.innerWidth<=768?"0":"auto"},children:[b.jsx(_h,{size:20}),"Produk"]})]})]}),b.jsx("div",{style:{overflowX:"auto",WebkitOverflowScrolling:"touch",display:window.innerWidth<=768?"none":"block"},children:b.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:"600px"},children:[b.jsx("thead",{style:{backgroundColor:"#f9fafb"},children:b.jsxs("tr",{children:[b.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",borderBottom:"1px solid #e5e7eb"},children:"Produk"}),b.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",borderBottom:"1px solid #e5e7eb"},children:"Ready Stock"}),b.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",borderBottom:"1px solid #e5e7eb"},children:"Kategori"}),b.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",borderBottom:"1px solid #e5e7eb"},children:"Stok"}),b.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",borderBottom:"1px solid #e5e7eb"},children:"Harga"}),b.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",borderBottom:"1px solid #e5e7eb"},children:"Aksi"})]})}),b.jsx("tbody",{children:rs.map(X=>b.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[b.jsx("td",{style:{padding:"1rem 1.5rem"},children:b.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[b.jsx(nu,{size:20,style:{color:"#9ca3af",marginRight:"0.75rem"}}),b.jsx("div",{children:b.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827"},children:X.name})})]})}),b.jsxs("td",{style:{padding:"1rem 1.5rem",fontSize:"0.875rem",color:"#111827"},children:[b.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[b.jsx("span",{style:{fontWeight:"600",color:(X.useBarcode===!1?X.stock:o[X.id]||0)>0?"#059669":"#dc2626"},children:X.useBarcode===!1?X.stock:o[X.id]||0}),b.jsxs("span",{style:{color:"#6b7280",marginLeft:"0.25rem"},children:["/ ",X.stock," unit"]})]}),b.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:X.useBarcode!==!1?"Dengan barcode":"Tanpa barcode"})]}),b.jsx("td",{style:{padding:"1rem 1.5rem",fontSize:"0.875rem",color:"#111827"},children:X.category}),b.jsxs("td",{style:{padding:"1rem 1.5rem"},children:[b.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[b.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:X.stock<=X.minStock?"#dc2626":"#111827"},children:X.stock}),b.jsxs("span",{style:{fontSize:"0.875rem",color:"#6b7280",marginLeft:"0.25rem"},children:["/ ",X.minStock," min"]})]}),b.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:X.useBarcode!==!1?"Dihitung dari unit":"Manual"})]}),b.jsxs("td",{style:{padding:"1rem 1.5rem",fontSize:"0.875rem",color:"#111827"},children:["Rp ",X.price.toLocaleString("id-ID")]}),b.jsx("td",{style:{padding:"1rem 1.5rem"},children:b.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[b.jsx("button",{onClick:()=>ze(X),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:"0.25rem"},children:b.jsx(Rp,{size:16})}),X.useBarcode!==!1&&b.jsx("button",{onClick:()=>wi(X.id),style:{color:"#10b981",background:"none",border:"1px dashed #10b981",borderRadius:"0.375rem",cursor:"pointer",padding:"0.25rem 0.5rem",fontSize:"0.75rem"},title:"Assign barcode via scan",children:b.jsx(Ta,{size:14})}),b.jsx("button",{onClick:()=>Zr(X.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem"},children:b.jsx(Eh,{size:16})})]})})]},X.id))})]})}),b.jsx("div",{style:{display:window.innerWidth<=768?"block":"none"},children:rs.map(X=>b.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[b.jsxs("div",{style:{flex:1},children:[b.jsx("div",{style:{display:"flex",alignItems:"center",marginBottom:"0.5rem"},children:b.jsxs("div",{children:[b.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827"},children:X.name}),b.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:X.category})]})}),b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[b.jsxs("div",{children:[b.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:"600",color:(X.useBarcode===!1?X.stock:o[X.id]||0)>0?"#059669":"#dc2626"},children:["Ready ",X.useBarcode===!1?X.stock:o[X.id]||0]}),b.jsxs("span",{style:{fontSize:"0.75rem",color:"#6b7280",marginLeft:"0.25rem"},children:["/ ",X.stock]})]}),b.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["Rp ",X.price.toLocaleString("id-ID")]})]}),b.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:X.useBarcode!==!1?"Dengan barcode":"Tanpa barcode"})]}),b.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginLeft:"1rem"},children:[b.jsx("button",{onClick:()=>ze(X),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",fontSize:"0.75rem"},title:"Edit",children:b.jsx(Rp,{size:14})}),X.useBarcode!==!1&&b.jsx("button",{onClick:()=>wi(X.id),style:{color:"#10b981",background:"none",border:"1px dashed #10b981",borderRadius:"0.25rem",cursor:"pointer",padding:"0.25rem",fontSize:"0.75rem"},title:"Assign Barcode",children:b.jsx(Ta,{size:14})}),b.jsx("button",{onClick:()=>Zr(X.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",fontSize:"0.75rem"},title:"Delete",children:b.jsx(Eh,{size:14})})]})]},X.id))})]}),(w||E)&&b.jsx("div",{className:"modal-overlay",children:b.jsxs("div",{className:"modal",children:[b.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",margin:0},children:w?"Tambah Produk":"Edit Produk"}),b.jsxs("form",{onSubmit:Vs,children:[b.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[b.jsxs("div",{children:[b.jsx("label",{className:"form-label",children:"Nama Produk"}),b.jsx("input",{type:"text",name:"name",value:Oe.name,onChange:Mt,required:!0,className:"form-input"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"form-label",children:"Kategori"}),b.jsxs("select",{name:"category",value:Oe.category,onChange:Mt,required:!0,className:"form-select",children:[b.jsx("option",{value:"",children:"Pilih Kategori"}),b.jsx("option",{value:"IQOS Device",children:"IQOS Device"}),b.jsx("option",{value:"HEETS",children:"HEETS"}),b.jsx("option",{value:"Aksesoris",children:"Aksesoris"}),b.jsx("option",{value:"Lainnya",children:"Lainnya"})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"form-label",children:"Harga"}),b.jsx("input",{type:"number",name:"price",value:Oe.price,onChange:Mt,required:!0,min:"0",step:"0.01",className:"form-input",placeholder:"Harga jual produk"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"form-label",children:"Gunakan Barcode"}),b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[b.jsx("input",{type:"checkbox",name:"useBarcode",checked:Oe.useBarcode,onChange:Mt,style:{width:"1rem",height:"1rem"}}),b.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Centang jika produk menggunakan barcode untuk tracking unit"})]}),Oe.useBarcode&&b.jsxs("div",{style:{marginTop:"0.5rem",padding:"0.75rem",backgroundColor:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:"0.375rem",fontSize:"0.75rem",color:"#0369a1"},children:[b.jsx("strong",{children:"Info:"}),' Stok akan dihitung otomatis dari jumlah unit yang memiliki barcode. Field "Stok Awal" akan di-disable.']}),!Oe.useBarcode&&b.jsxs("div",{style:{marginTop:"0.5rem",padding:"0.75rem",backgroundColor:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"0.375rem",fontSize:"0.75rem",color:"#92400e"},children:[b.jsx("strong",{children:"Info:"}),' Produk tanpa barcode menggunakan input stok manual. Field "Stok Awal" akan di-enable untuk input manual.']})]}),b.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[b.jsxs("div",{children:[b.jsx("label",{className:"form-label",children:"Stok Awal"}),b.jsx("input",{type:"number",name:"stock",value:Oe.stock,onChange:Mt,required:!Oe.useBarcode,disabled:Oe.useBarcode,min:"0",className:"form-input",placeholder:Oe.useBarcode?"Dihitung otomatis":"Jumlah stok awal",style:{opacity:Oe.useBarcode?.6:1,backgroundColor:Oe.useBarcode?"#f9fafb":"white",cursor:Oe.useBarcode?"not-allowed":"text"}})]}),b.jsxs("div",{children:[b.jsx("label",{className:"form-label",children:"Stok Minimum"}),b.jsx("input",{type:"number",name:"minStock",value:Oe.minStock,onChange:Mt,required:!0,min:"0",className:"form-input",placeholder:"Minimum stock untuk alert"})]})]})]}),b.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1.5rem"},children:[b.jsx("button",{type:"button",onClick:()=>{m(!1),v(!1),Pr({name:"",category:"",price:"",stock:"",minStock:"",useBarcode:!0})},className:"btn btn-secondary",style:{flex:1},children:"Batal"}),b.jsx("button",{type:"submit",className:"btn btn-primary",style:{flex:1},children:w?"Tambah":"Update"})]})]})]})}),K&&j&&b.jsx("div",{className:"modal-overlay",children:b.jsxs("div",{className:"modal",children:[b.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",margin:0},children:"Assign Barcode ke Unit"}),b.jsxs("div",{style:{marginBottom:"1rem"},children:[b.jsx("label",{className:"form-label",children:"Input Barcode Manual"}),b.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[b.jsx("input",{type:"text",value:Z,onChange:X=>U(X.target.value),placeholder:"Masukkan barcode...",className:"form-input",style:{flex:1}}),b.jsx("button",{onClick:rt,className:"btn btn-primary",style:{padding:"0.5rem 1rem"},children:"Assign"})]})]}),b.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem",padding:"1rem",backgroundColor:"#f8fafc",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[b.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0 0 0.5rem 0"},children:"Atau scan barcode dengan kamera"}),b.jsxs("button",{onClick:()=>{O(!1),N("assign"),R(!0)},style:{backgroundColor:"#10b981",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",margin:"0 auto"},children:[b.jsx(Ta,{size:16}),"Scan Barcode"]})]}),b.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:b.jsx("button",{onClick:()=>{O(!1),te(null),U("")},className:"btn btn-secondary",style:{flex:1},children:"Tutup"})})]})}),M&&Ie&&b.jsx("div",{className:"modal-overlay",children:b.jsxs("div",{className:"modal",children:[b.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",margin:0},children:"Informasi Stok Produk"}),b.jsxs("div",{style:{backgroundColor:Ie.stock<=Ie.minStock?"#fef2f2":"#f0fdf4",border:`1px solid ${Ie.stock<=Ie.minStock?"#fecaca":"#bbf7d0"}`,borderRadius:"0.5rem",padding:"1rem",marginBottom:"1rem"},children:[b.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"0.5rem"},children:[b.jsx(nu,{size:20,style:{color:Ie.stock<=Ie.minStock?"#dc2626":"#059669",marginRight:"0.5rem"}}),b.jsx("h4",{style:{fontSize:"1rem",fontWeight:"600",color:Ie.stock<=Ie.minStock?"#991b1b":"#065f46",margin:0},children:Ie.name})]}),b.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[b.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Unit ID:"}),b.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827"},children:Ie.matchedUnitId||"-"})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[b.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Kategori:"}),b.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827"},children:Ie.category})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[b.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Stok Saat Ini:"}),b.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:Ie.stock<=Ie.minStock?"#dc2626":"#059669"},children:[Ie.stock," unit"]})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[b.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Stok Minimum:"}),b.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827"},children:[Ie.minStock," unit"]})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[b.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Harga:"}),b.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827"},children:["Rp ",Ie.price.toLocaleString("id-ID")]})]})]}),Ie.stock<=Ie.minStock&&b.jsx("div",{style:{marginTop:"0.75rem",padding:"0.5rem",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"0.25rem"},children:b.jsxs("p",{style:{fontSize:"0.75rem",color:"#991b1b",margin:0,display:"flex",alignItems:"center"},children:[b.jsx(Ch,{size:14,style:{marginRight:"0.25rem"}}),"Stok rendah! Segera lakukan restocking."]})})]}),b.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[b.jsx("button",{onClick:()=>{B(!1),V(null)},className:"btn btn-secondary",style:{flex:1},children:"Tutup"}),b.jsx("button",{onClick:()=>{B(!1),V(null),R(!0)},className:"btn btn-primary",style:{flex:1},children:"Scan Lagi"})]})]})}),at&&b.jsx("div",{className:"modal-overlay",children:b.jsxs("div",{className:"modal",style:{maxWidth:"600px",maxHeight:"80vh",overflow:"auto"},children:[b.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",margin:0},children:"Stock Audit Report"}),b.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem"},children:[b.jsxs("div",{style:{flex:1},children:[b.jsx("label",{className:"form-label",children:"Tanggal Audit"}),b.jsx("input",{type:"date",value:se,onChange:X=>me(X.target.value),className:"form-input"})]}),b.jsxs("div",{style:{flex:1},children:[b.jsx("label",{className:"form-label",children:"Waktu Audit"}),b.jsx("input",{type:"time",value:we,onChange:X=>G(X.target.value),className:"form-input"})]})]}),oe.length===0&&b.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[b.jsx("button",{onClick:()=>_e(!1),className:"btn btn-secondary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:"Tutup"}),b.jsx("button",{onClick:je,className:"btn btn-primary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:"Mulai Stock Audit"})]}),ve&&b.jsxs("div",{style:{backgroundColor:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"0.5rem",padding:"1rem",marginBottom:"1.5rem"},children:[b.jsxs("h4",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"0.5rem",margin:0},children:["Sedang Audit: ",ve.name]}),b.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.5rem",margin:0},children:["Database Stock: ",ve.databaseStock," | Ready Stock: ",ve.readyStock]}),ce==="manual"?b.jsxs("div",{children:[b.jsx("label",{className:"form-label",children:"Stock Fisik:"}),b.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[b.jsx("input",{type:"number",min:"0",placeholder:"Masukkan jumlah fisik",className:"form-input",style:{flex:1},onKeyPress:X=>{if(X.key==="Enter"){const he=X.target.value;he&&(fe(ve.id,he),X.target.value="")}}}),b.jsx("button",{onClick:X=>{const he=X.target.previousElementSibling;he.value&&(fe(ve.id,he.value),he.value="")},className:"btn btn-primary",children:"Submit"})]})]}):b.jsxs("div",{children:[b.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.5rem",margin:0},children:"Scan barcode untuk menghitung stock fisik"}),b.jsxs("button",{onClick:()=>R(!0),className:"btn btn-primary",style:{width:"100%"},children:[b.jsx(Ta,{size:20,style:{marginRight:"0.5rem"}}),"Scan Barcode"]})]})]}),oe.length>0&&b.jsxs("div",{children:[b.jsxs("h4",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem",margin:0},children:["Hasil Audit (",oe.filter(X=>X.status==="completed").length,"/",oe.length,")"]}),b.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:oe.map(X=>b.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.75rem",marginBottom:"0.5rem",backgroundColor:X.status==="completed"?"#f0fdf4":"#fefce8"},children:b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[b.jsxs("div",{children:[b.jsx("h5",{style:{fontSize:"0.875rem",fontWeight:"500",margin:0},children:X.name}),b.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",margin:0},children:X.useBarcode!==!1?"Barcode":"Manual"})]}),b.jsxs("div",{style:{textAlign:"right"},children:[b.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["DB: ",X.databaseStock," | Ready: ",X.readyStock]}),X.status==="completed"?b.jsxs("div",{style:{fontSize:"0.75rem",fontWeight:"500",color:"#059669"},children:["Fisik: ",X.physicalStock]}):b.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"500",color:"#f59e0b"},children:"Pending"})]})]})},X.id))})]}),oe.length>0&&b.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[b.jsx("button",{onClick:()=>{_e(!1),Xe([]),Et(null),_n(null)},className:"btn btn-secondary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:"Tutup"}),b.jsx("button",{onClick:Cr,className:"btn btn-secondary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:"Export PDF"}),b.jsx("button",{onClick:async()=>{await fr(Ve(He,`stockAuditsByDate/${se}/meta/`),{date:se,updatedAt:Date.now()}),await zl()},className:"btn btn-primary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:"Simpan Laporan"})]})]})}),b.jsx(Rv,{isOpen:S,onScan:k==="assign"?Vt:k==="check"?ir:Hs,onClose:()=>{R(!1),N(null),te(null)}})]})},gk=()=>{const[t,e]=Y.useState([]),[n,i]=Y.useState({}),[o,l]=Y.useState([]),[f,p]=Y.useState(!0),[w,m]=Y.useState(!1),[E,v]=Y.useState(null),[S,R]=Y.useState(null),[M,B]=Y.useState(""),[K,O]=Y.useState("all"),[k,N]=Y.useState({name:"",phone:""}),[j,te]=Y.useState("cash"),[Z,U]=Y.useState(!1),[J,$]=Y.useState(null);Y.useEffect(()=>{Se()},[]);const Se=async()=>{try{p(!0);const G=await un.getAllProducts(),oe={};for(const ve of G)oe[ve.id]=await un.getReadyStock(ve.id);i(oe);const Xe=G.filter(ve=>oe[ve.id]>0);e(Xe)}catch(G){console.error("Error loading products:",G)}finally{p(!1)}},Qe=async G=>{try{const oe=await un.getProductByBarcode(G);oe?E==="add"?ge(oe):E==="increase"&&S?Ie(S):ge(oe):await st.fire({title:"Produk Tidak Ditemukan",text:"Barcode tidak terdaftar dalam sistem.",icon:"warning"})}catch(oe){console.error("Error scanning barcode:",oe),await st.fire({title:"Error!",text:"Gagal memindai barcode.",icon:"error"})}m(!1),v(null),R(null)},ge=G=>{if(o.find(Xe=>Xe.productId===G.id))Ie(G.id);else{if((n[G.id]||0)<=0){st.fire({title:"Stok Habis",text:"Stok siap jual untuk produk ini habis.",icon:"warning"});return}l([...o,{productId:G.id,productName:G.name,quantity:1,price:G.price,total:G.price}])}},ke=G=>{l(o.filter(oe=>oe.productId!==G))},Ie=G=>{if(!t.find(Et=>Et.id===G))return;const Xe=n[G]||0,ve=o.find(Et=>Et.productId===G);if(ve){if(ve.quantity>=Xe){st.fire({title:"Stok Tidak Cukup",text:`Maksimal quantity: ${Xe}`,icon:"warning"});return}const Et=ve.quantity+1;l(o.map(ce=>ce.productId===G?{...ce,quantity:Et,total:Et*ce.price}:ce))}},V=(G,oe)=>{if(oe<=0){ke(G);return}const Xe=n[G]||0;if(oe>Xe){st.fire({title:"Stok Tidak Cukup",text:`Maksimal quantity: ${Xe}`,icon:"warning"});return}l(o.map(ve=>ve.productId===G?{...ve,quantity:oe,total:oe*ve.price}:ve))},at=()=>o.reduce((G,oe)=>G+oe.total,0),_e=G=>{G.useBarcode!==!1?(v("add"),R(G.id),m(!0)):ge(G)},se=G=>{const oe=t.find(Xe=>Xe.id===G);oe&&oe.useBarcode!==!1?(v("increase"),R(G),m(!0)):Ie(G)},me=async()=>{if(o.length===0){await st.fire({title:"Keranjang Kosong",text:"Tambahkan produk ke keranjang terlebih dahulu.",icon:"warning"});return}try{const G={items:o,totalAmount:at(),customerName:k.name,customerPhone:k.phone,paymentMethod:j},oe=await Iv.createSale(G);$(oe),U(!0),l([]),N({name:"",phone:""}),te("cash"),Se()}catch(G){console.error("Error creating sale:",G),await st.fire({title:"Error!",text:"Gagal melakukan penjualan.",icon:"error"})}},we=t.filter(G=>{if(!G||!G.name||!G.category)return!1;const oe=M.toLowerCase(),Xe=G.name.toLowerCase().includes(oe),ve=G.category.toLowerCase().includes(oe),Et=Xe||ve;let ce=!0;return K==="barcode"?ce=G.useBarcode!==!1:K==="manual"&&(ce=G.useBarcode===!1),Et&&ce});return f?b.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"16rem"},children:b.jsx("div",{className:"spinner"})}):b.jsxs("div",{style:{padding:"1.5rem"},children:[b.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"2fr 1fr",gap:"1rem"},children:[b.jsx("div",{children:b.jsxs("div",{style:{background:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",padding:"1.5rem"},children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[b.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",margin:0},children:"Daftar Produk"}),b.jsxs("button",{onClick:()=>m(!0),style:{backgroundColor:"#10b981",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:[b.jsx(Ta,{size:20}),"Scan Barcode"]})]}),b.jsxs("div",{style:{marginBottom:"1rem"},children:[b.jsxs("div",{style:{position:"relative",marginBottom:"0.75rem"},children:[b.jsx(Tx,{size:20,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),b.jsx("input",{type:"text",placeholder:"Cari produk...",value:M,onChange:G=>B(G.target.value),style:{width:"100%",paddingLeft:"2.5rem",paddingRight:"1rem",paddingTop:"0.5rem",paddingBottom:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.5rem",fontSize:"0.875rem"}})]}),b.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[b.jsx("button",{onClick:()=>O("all"),style:{backgroundColor:K==="all"?"#3b82f6":"#f3f4f6",color:K==="all"?"white":"#374151",padding:"0.375rem 0.75rem",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:"500"},children:"Semua"}),b.jsx("button",{onClick:()=>O("barcode"),style:{backgroundColor:K==="barcode"?"#3b82f6":"#f3f4f6",color:K==="barcode"?"white":"#374151",padding:"0.375rem 0.75rem",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:"500"},children:"Dengan Barcode"}),b.jsx("button",{onClick:()=>O("manual"),style:{backgroundColor:K==="manual"?"#3b82f6":"#f3f4f6",color:K==="manual"?"white":"#374151",padding:"0.375rem 0.75rem",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:"500"},children:"Manual"})]})]}),b.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",maxHeight:window.innerWidth<=768?"20rem":"24rem",overflowY:"auto"},children:we.map(G=>b.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"1rem",transition:"box-shadow 0.2s"},children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[b.jsx("h3",{style:{fontWeight:"500",color:"#111827",margin:0,fontSize:"0.875rem"},children:G.name}),b.jsx("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:G.category})]}),b.jsxs("div",{style:{marginBottom:"0.5rem"},children:[b.jsxs("p",{style:{fontSize:"0.75rem",color:"#6b7280",margin:0},children:["Barcode: ",G.useBarcode!==!1?"Per unit":G.barcode||"-"]}),b.jsx("span",{style:{fontSize:"0.625rem",padding:"0.125rem 0.375rem",borderRadius:"0.25rem",backgroundColor:G.useBarcode!==!1?"#dbeafe":"#f3f4f6",color:G.useBarcode!==!1?"#1e40af":"#6b7280",fontWeight:"500"},children:G.useBarcode!==!1?"Dengan Barcode":"Manual"})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[b.jsxs("span",{style:{fontWeight:"600",color:"#2563eb",fontSize:"0.875rem"},children:["Rp ",G.price.toLocaleString("id-ID")]}),b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[b.jsxs("span",{style:{fontSize:"0.75rem",color:(n[G.id]||0)>0?"#059669":"#dc2626"},children:["Ready: ",n[G.id]||0]}),b.jsx("button",{onClick:()=>_e(G),disabled:(n[G.id]||0)<=0,style:{backgroundColor:(n[G.id]||0)<=0?"#d1d5db":"#3b82f6",color:"white",padding:"0.25rem",borderRadius:"0.25rem",border:"none",cursor:(n[G.id]||0)<=0?"not-allowed":"pointer",fontSize:"0.75rem"},title:(n[G.id]||0)<=0?"Stok habis":G.useBarcode!==!1?"Scan barcode untuk menambah":"Tambah ke keranjang",children:b.jsx(_h,{size:16})})]})]})]},G.id))})]})}),b.jsx("div",{children:b.jsxs("div",{style:{background:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",padding:"1.5rem"},children:[b.jsxs("h2",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",margin:0,display:"flex",alignItems:"center"},children:[b.jsx(H0,{size:20,style:{marginRight:"0.5rem"}}),"Keranjang"]}),b.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1rem",maxHeight:"16rem",overflowY:"auto"},children:o.map(G=>b.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.75rem"},children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[b.jsx("h4",{style:{fontWeight:"500",fontSize:"0.75rem",color:"#111827",margin:0},children:G.productName}),b.jsx("button",{onClick:()=>ke(G.productId),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem"},children:b.jsx(Eh,{size:14})})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[b.jsx("button",{onClick:()=>V(G.productId,G.quantity-1),style:{backgroundColor:"#e5e7eb",color:"#374151",padding:"0.25rem",borderRadius:"0.25rem",border:"none",cursor:"pointer",fontSize:"0.75rem"},"aria-label":"Kurangi qty (akan menghapus item)",children:b.jsx(Mb,{size:12})}),b.jsx("span",{style:{fontSize:"0.75rem",fontWeight:"500"},children:G.quantity}),b.jsx("button",{onClick:()=>se(G.productId),disabled:G.quantity>=(n[G.productId]||0),style:{backgroundColor:G.quantity>=(n[G.productId]||0)?"#e5e7eb":"#3b82f6",color:G.quantity>=(n[G.productId]||0)?"#9ca3af":"white",padding:"0.25rem",borderRadius:"0.25rem",border:"none",cursor:G.quantity>=(n[G.productId]||0)?"not-allowed":"pointer",fontSize:"0.75rem"},title:G.quantity>=(n[G.productId]||0)?"Stok tidak cukup":"Tambah quantity",children:b.jsx(_h,{size:12})})]}),b.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:"600"},children:["Rp ",G.total.toLocaleString("id-ID")]})]})]},G.productId))}),b.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1rem"},children:[b.jsxs("div",{children:[b.jsx("label",{className:"form-label",children:"Nama"}),b.jsx("input",{type:"text",value:k.name,onChange:G=>N(oe=>({...oe,name:G.target.value})),className:"form-input",style:{fontSize:"0.75rem"}})]}),b.jsxs("div",{children:[b.jsx("label",{className:"form-label",children:"No. HP"}),b.jsx("input",{type:"text",value:k.phone,onChange:G=>N(oe=>({...oe,phone:G.target.value})),className:"form-input",style:{fontSize:"0.75rem"}})]}),b.jsxs("div",{children:[b.jsx("label",{className:"form-label",children:"Metode Pembayaran"}),b.jsxs("select",{value:j,onChange:G=>te(G.target.value),className:"form-select",style:{fontSize:"0.75rem"},children:[b.jsx("option",{value:"cash",children:"Tunai"}),b.jsx("option",{value:"qris",children:"QRIS"}),b.jsx("option",{value:"card",children:"Kartu"}),b.jsx("option",{value:"transfer",children:"Transfer"})]})]})]}),b.jsxs("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:"1rem"},children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[b.jsx("span",{style:{fontSize:"1.125rem",fontWeight:"600"},children:"Total"}),b.jsxs("span",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#2563eb"},children:["Rp ",at().toLocaleString("id-ID")]})]}),b.jsx("button",{onClick:me,disabled:o.length===0,style:{width:"100%",backgroundColor:o.length===0?"#d1d5db":"#10b981",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",cursor:o.length===0?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Checkout"})]})]})})]}),b.jsx(Rv,{isOpen:w,onScan:Qe,onClose:()=>{m(!1),v(null),R(null)}}),Z&&J&&b.jsx("div",{className:"modal-overlay",children:b.jsxs("div",{className:"modal",children:[b.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",margin:0},children:"Struk Penjualan"}),b.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"1rem"},children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[b.jsx("span",{children:"No. Transaksi:"}),b.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.75rem"},children:J.id})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[b.jsx("span",{children:"Tanggal:"}),b.jsx("span",{children:new Date(J.createdAt).toLocaleString("id-ID")})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[b.jsx("span",{children:"Pelanggan:"}),b.jsx("span",{children:J.customerName||"-"})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[b.jsx("span",{children:"Pembayaran:"}),b.jsx("span",{style:{textTransform:"capitalize"},children:J.paymentMethod})]})]}),b.jsxs("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:"0.5rem",marginBottom:"1rem"},children:[b.jsx("h4",{style:{fontWeight:"500",marginBottom:"0.5rem",margin:0},children:"Item:"}),J.items.map((G,oe)=>b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.75rem"},children:[b.jsxs("span",{children:[G.productName," x",G.quantity]}),b.jsxs("span",{children:["Rp ",G.total.toLocaleString("id-ID")]})]},oe))]}),b.jsx("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:"0.5rem",marginBottom:"1rem"},children:b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:"600"},children:[b.jsx("span",{children:"Total:"}),b.jsxs("span",{children:["Rp ",J.totalAmount.toLocaleString("id-ID")]})]})}),b.jsx("button",{onClick:()=>U(!1),className:"btn btn-primary",style:{width:"100%"},children:"Tutup"})]})})]})},pk=()=>{const[t,e]=Y.useState(!1),[n,i]=Y.useState(!1),[o,l]=Y.useState(!1);return Y.useEffect(()=>{const f=()=>{const p=window.innerWidth;e(p<=768),i(p>768&&p<=1024),l(p>1024)};return f(),window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),{isMobile:t,isTablet:n,isDesktop:o}},mk=()=>{const{isMobile:t}=pk(),[e,n]=Y.useState({totalProducts:0,lowStockProducts:0,totalSales:0,totalRevenue:0}),[i,o]=Y.useState(!0),[l,f]=Y.useState([]);Y.useEffect(()=>{p()},[]);const p=async()=>{try{o(!0);const[m,E]=await Promise.all([un.getAllProducts(),Iv.getAllSales()]),v=m.filter(M=>M.stock<=M.minStock),S=E.reduce((M,B)=>M+B.totalAmount,0);n({totalProducts:m.length,lowStockProducts:v.length,totalSales:E.length,totalRevenue:S});const R=E.sort((M,B)=>B.createdAt-M.createdAt).slice(0,5);f(R)}catch(m){console.error("Error loading dashboard data:",m)}finally{o(!1)}},w=({title:m,value:E,icon:v,color:S})=>b.jsxs("div",{style:{background:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",padding:"1.5rem",display:"flex",alignItems:"center"},children:[b.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",backgroundColor:S+"20",marginRight:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:b.jsx(v,{size:24,style:{color:S}})}),b.jsxs("div",{children:[b.jsx("p",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#6b7280",margin:0},children:m}),b.jsx("p",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#111827",margin:0},children:E})]})]});return i?b.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"16rem"},children:b.jsx("div",{className:"spinner"})}):b.jsxs("div",{style:{padding:"1.5rem"},children:[b.jsxs("div",{style:{display:"grid",gridTemplateColumns:t?"1fr":"repeat(auto-fit, minmax(250px, 1fr))",gap:t?"1rem":"1.5rem",marginBottom:"1.5rem"},children:[b.jsx(w,{title:"Total Produk",value:e.totalProducts,icon:nu,color:"#3b82f6"}),b.jsx(w,{title:"Stok Rendah",value:e.lowStockProducts,icon:Ch,color:"#ef4444"}),b.jsx(w,{title:"Total Penjualan",value:e.totalSales,icon:H0,color:"#10b981"}),b.jsx(w,{title:"Total Revenue",value:`Rp ${e.totalRevenue.toLocaleString("id-ID")}`,icon:Bb,color:"#8b5cf6"})]}),b.jsxs("div",{style:{background:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:[b.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid #e5e7eb"},children:b.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#111827",margin:0},children:"Penjualan Terbaru"})}),b.jsx("div",{style:{padding:"1.5rem"},children:l.length>0?b.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:l.map(m=>b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"0.5rem",borderBottom:"1px solid #f3f4f6"},children:[b.jsxs("div",{children:[b.jsx("p",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827",margin:0},children:m.customerName||"Pelanggan Umum"}),b.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",margin:0},children:new Date(m.createdAt).toLocaleDateString("id-ID")})]}),b.jsxs("div",{style:{textAlign:"right"},children:[b.jsxs("p",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#059669",margin:0},children:["Rp ",m.totalAmount.toLocaleString("id-ID")]}),b.jsxs("p",{style:{fontSize:"0.75rem",color:"#6b7280",margin:0},children:[m.items.length," item"]})]})]},m.id))}):b.jsx("p",{style:{color:"#6b7280",textAlign:"center",padding:"1rem",margin:0},children:"Belum ada penjualan"})})]})]})},wk=()=>{const t=Sl(),e=[{path:"/",icon:Pb,label:"Dashboard"},{path:"/inventory",icon:nu,label:"Inventory"},{path:"/sales",icon:H0,label:"Penjualan"}];return b.jsx("nav",{className:"nav",children:b.jsxs("div",{className:"nav-container",children:[b.jsx(Tp,{to:"/",className:"nav-brand",children:b.jsx("span",{className:"mobile-hidden",children:"IQOS"})}),b.jsx("ul",{className:"nav-menu",children:e.map(n=>{const i=n.icon,o=t.pathname===n.path;return b.jsx("li",{children:b.jsxs(Tp,{to:n.path,className:`nav-link ${o?"active":""}`,children:[b.jsx(i,{size:18}),n.label]})},n.path)})})]})})},xk=()=>b.jsx(Ib,{children:b.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f9fafb"},children:[b.jsx(wk,{}),b.jsx("main",{className:"container",children:b.jsxs(vb,{children:[b.jsx(Nc,{path:"/",element:b.jsx(mk,{})}),b.jsx(Nc,{path:"/inventory",element:b.jsx(hk,{})}),b.jsx(Nc,{path:"/sales",element:b.jsx(gk,{})})]})})]})});Af.createRoot(document.getElementById("root")).render(b.jsx(f2.StrictMode,{children:b.jsx(xk,{})}));
